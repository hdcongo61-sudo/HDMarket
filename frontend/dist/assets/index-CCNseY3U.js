function fD(t,r){for(var a=0;a<r.length;a++){const n=r[a];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jb={exports:{}},Ir={};var a4;function gD(){if(a4)return Ir;a4=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function y(B,ae,te){this.props=B,this.context=ae,this.refs=E,this.updater=te||x}y.prototype.isReactComponent={},y.prototype.setState=function(B,ae){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ae,"setState")},y.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function w(){}w.prototype=y.prototype;function k(B,ae,te){this.props=B,this.context=ae,this.refs=E,this.updater=te||x}var C=k.prototype=new w;C.constructor=k,v(C,y.prototype),C.isPureReactComponent=!0;var A=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function O(B,ae,te){var ge,ue={},Ee=null,fe=null;if(ae!=null)for(ge in ae.ref!==void 0&&(fe=ae.ref),ae.key!==void 0&&(Ee=""+ae.key),ae)S.call(ae,ge)&&!T.hasOwnProperty(ge)&&(ue[ge]=ae[ge]);var re=arguments.length-2;if(re===1)ue.children=te;else if(1<re){for(var U=Array(re),W=0;W<re;W++)U[W]=arguments[W+2];ue.children=U}if(B&&B.defaultProps)for(ge in re=B.defaultProps,re)ue[ge]===void 0&&(ue[ge]=re[ge]);return{$$typeof:t,type:B,key:Ee,ref:fe,props:ue,_owner:P.current}}function R(B,ae){return{$$typeof:t,type:B.type,key:ae,ref:B.ref,props:B.props,_owner:B._owner}}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function $(B){var ae={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return ae[te]})}var j=/\/+/g;function K(B,ae){return typeof B=="object"&&B!==null&&B.key!=null?$(""+B.key):ae.toString(36)}function H(B,ae,te,ge,ue){var Ee=typeof B;(Ee==="undefined"||Ee==="boolean")&&(B=null);var fe=!1;if(B===null)fe=!0;else switch(Ee){case"string":case"number":fe=!0;break;case"object":switch(B.$$typeof){case t:case r:fe=!0}}if(fe)return fe=B,ue=ue(fe),B=ge===""?"."+K(fe,0):ge,A(ue)?(te="",B!=null&&(te=B.replace(j,"$&/")+"/"),H(ue,ae,te,"",function(W){return W})):ue!=null&&(D(ue)&&(ue=R(ue,te+(!ue.key||fe&&fe.key===ue.key?"":(""+ue.key).replace(j,"$&/")+"/")+B)),ae.push(ue)),1;if(fe=0,ge=ge===""?".":ge+":",A(B))for(var re=0;re<B.length;re++){Ee=B[re];var U=ge+K(Ee,re);fe+=H(Ee,ae,te,U,ue)}else if(U=b(B),typeof U=="function")for(B=U.call(B),re=0;!(Ee=B.next()).done;)Ee=Ee.value,U=ge+K(Ee,re++),fe+=H(Ee,ae,te,U,ue);else if(Ee==="object")throw ae=String(B),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return fe}function V(B,ae,te){if(B==null)return B;var ge=[],ue=0;return H(B,ge,"","",function(Ee){return ae.call(te,Ee,ue++)}),ge}function q(B){if(B._status===-1){var ae=B._result;ae=ae(),ae.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=ae)}if(B._status===1)return B._result.default;throw B._result}var Y={current:null},z={transition:null},L={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:z,ReactCurrentOwner:P};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Ir.Children={map:V,forEach:function(B,ae,te){V(B,function(){ae.apply(this,arguments)},te)},count:function(B){var ae=0;return V(B,function(){ae++}),ae},toArray:function(B){return V(B,function(ae){return ae})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ir.Component=y,Ir.Fragment=a,Ir.Profiler=s,Ir.PureComponent=k,Ir.StrictMode=n,Ir.Suspense=m,Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,Ir.act=Q,Ir.cloneElement=function(B,ae,te){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ge=v({},B.props),ue=B.key,Ee=B.ref,fe=B._owner;if(ae!=null){if(ae.ref!==void 0&&(Ee=ae.ref,fe=P.current),ae.key!==void 0&&(ue=""+ae.key),B.type&&B.type.defaultProps)var re=B.type.defaultProps;for(U in ae)S.call(ae,U)&&!T.hasOwnProperty(U)&&(ge[U]=ae[U]===void 0&&re!==void 0?re[U]:ae[U])}var U=arguments.length-2;if(U===1)ge.children=te;else if(1<U){re=Array(U);for(var W=0;W<U;W++)re[W]=arguments[W+2];ge.children=re}return{$$typeof:t,type:B.type,key:ue,ref:Ee,props:ge,_owner:fe}},Ir.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},Ir.createElement=O,Ir.createFactory=function(B){var ae=O.bind(null,B);return ae.type=B,ae},Ir.createRef=function(){return{current:null}},Ir.forwardRef=function(B){return{$$typeof:c,render:B}},Ir.isValidElement=D,Ir.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:q}},Ir.memo=function(B,ae){return{$$typeof:p,type:B,compare:ae===void 0?null:ae}},Ir.startTransition=function(B){var ae=z.transition;z.transition={};try{B()}finally{z.transition=ae}},Ir.unstable_act=Q,Ir.useCallback=function(B,ae){return Y.current.useCallback(B,ae)},Ir.useContext=function(B){return Y.current.useContext(B)},Ir.useDebugValue=function(){},Ir.useDeferredValue=function(B){return Y.current.useDeferredValue(B)},Ir.useEffect=function(B,ae){return Y.current.useEffect(B,ae)},Ir.useId=function(){return Y.current.useId()},Ir.useImperativeHandle=function(B,ae,te){return Y.current.useImperativeHandle(B,ae,te)},Ir.useInsertionEffect=function(B,ae){return Y.current.useInsertionEffect(B,ae)},Ir.useLayoutEffect=function(B,ae){return Y.current.useLayoutEffect(B,ae)},Ir.useMemo=function(B,ae){return Y.current.useMemo(B,ae)},Ir.useReducer=function(B,ae,te){return Y.current.useReducer(B,ae,te)},Ir.useRef=function(B){return Y.current.useRef(B)},Ir.useState=function(B){return Y.current.useState(B)},Ir.useSyncExternalStore=function(B,ae,te){return Y.current.useSyncExternalStore(B,ae,te)},Ir.useTransition=function(){return Y.current.useTransition()},Ir.version="18.3.1",Ir}var n4;function bM(){return n4||(n4=1,Jb.exports=gD()),Jb.exports}var u=bM();const e=Aa(u),hD=fD({__proto__:null,default:e},[u]);var E0={},Zb={exports:{}},xs={},ex={exports:{}},tx={};var s4;function bD(){return s4||(s4=1,(function(t){function r(z,L){var Q=z.length;z.push(L);e:for(;0<Q;){var B=Q-1>>>1,ae=z[B];if(0<s(ae,L))z[B]=L,z[Q]=ae,Q=B;else break e}}function a(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var L=z[0],Q=z.pop();if(Q!==L){z[0]=Q;e:for(var B=0,ae=z.length,te=ae>>>1;B<te;){var ge=2*(B+1)-1,ue=z[ge],Ee=ge+1,fe=z[Ee];if(0>s(ue,Q))Ee<ae&&0>s(fe,ue)?(z[B]=fe,z[Ee]=Q,B=Ee):(z[B]=ue,z[ge]=Q,B=ge);else if(Ee<ae&&0>s(fe,Q))z[B]=fe,z[Ee]=Q,B=Ee;else break e}}return L}function s(z,L){var Q=z.sortIndex-L.sortIndex;return Q!==0?Q:z.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var m=[],p=[],f=1,g=null,b=3,x=!1,v=!1,E=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var L=a(p);L!==null;){if(L.callback===null)n(p);else if(L.startTime<=z)n(p),L.sortIndex=L.expirationTime,r(m,L);else break;L=a(p)}}function A(z){if(E=!1,C(z),!v)if(a(m)!==null)v=!0,q(S);else{var L=a(p);L!==null&&Y(A,L.startTime-z)}}function S(z,L){v=!1,E&&(E=!1,w(O),O=-1),x=!0;var Q=b;try{for(C(L),g=a(m);g!==null&&(!(g.expirationTime>L)||z&&!$());){var B=g.callback;if(typeof B=="function"){g.callback=null,b=g.priorityLevel;var ae=B(g.expirationTime<=L);L=t.unstable_now(),typeof ae=="function"?g.callback=ae:g===a(m)&&n(m),C(L)}else n(m);g=a(m)}if(g!==null)var te=!0;else{var ge=a(p);ge!==null&&Y(A,ge.startTime-L),te=!1}return te}finally{g=null,b=Q,x=!1}}var P=!1,T=null,O=-1,R=5,D=-1;function $(){return!(t.unstable_now()-D<R)}function j(){if(T!==null){var z=t.unstable_now();D=z;var L=!0;try{L=T(!0,z)}finally{L?K():(P=!1,T=null)}}else P=!1}var K;if(typeof k=="function")K=function(){k(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=j,K=function(){V.postMessage(null)}}else K=function(){y(j,0)};function q(z){T=z,P||(P=!0,K())}function Y(z,L){O=y(function(){z(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){v||x||(v=!0,q(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return a(m)},t.unstable_next=function(z){switch(b){case 1:case 2:case 3:var L=3;break;default:L=b}var Q=b;b=L;try{return z()}finally{b=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,L){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=b;b=z;try{return L()}finally{b=Q}},t.unstable_scheduleCallback=function(z,L,Q){var B=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?B+Q:B):Q=B,z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,z={id:f++,callback:L,priorityLevel:z,startTime:Q,expirationTime:ae,sortIndex:-1},Q>B?(z.sortIndex=Q,r(p,z),a(m)===null&&z===a(p)&&(E?(w(O),O=-1):E=!0,Y(A,Q-B))):(z.sortIndex=ae,r(m,z),v||x||(v=!0,q(S))),z},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(z){var L=b;return function(){var Q=b;b=L;try{return z.apply(this,arguments)}finally{b=Q}}}})(tx)),tx}var o4;function xD(){return o4||(o4=1,ex.exports=bD()),ex.exports}var l4;function yD(){if(l4)return xs;l4=1;var t=bM(),r=xD();function a(i){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,d){l(i,d),l(i+"Capture",d)}function l(i,d){for(s[i]=d,i=0;i<d.length;i++)n.add(d[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function b(i){return m.call(g,i)?!0:m.call(f,i)?!1:p.test(i)?g[i]=!0:(f[i]=!0,!1)}function x(i,d,h,N){if(h!==null&&h.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return N?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function v(i,d,h,N){if(d===null||typeof d>"u"||x(i,d,h,N))return!0;if(N)return!1;if(h!==null)switch(h.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function E(i,d,h,N,_,M,X){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=N,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=i,this.type=d,this.sanitizeURL=M,this.removeEmptyString=X}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){y[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var d=i[0];y[d]=new E(d,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){y[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){y[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){y[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){y[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){y[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){y[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){y[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function k(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var d=i.replace(w,k);y[d]=new E(d,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var d=i.replace(w,k);y[d]=new E(d,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var d=i.replace(w,k);y[d]=new E(d,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){y[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),y.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){y[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,d,h,N){var _=y.hasOwnProperty(d)?y[d]:null;(_!==null?_.type!==0:N||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,h,_,N)&&(h=null),N||_===null?b(d)&&(h===null?i.removeAttribute(d):i.setAttribute(d,""+h)):_.mustUseProperty?i[_.propertyName]=h===null?_.type===3?!1:"":h:(d=_.attributeName,N=_.attributeNamespace,h===null?i.removeAttribute(d):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,N?i.setAttributeNS(N,d,h):i.setAttribute(d,h))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),P=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),$=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),z=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Object.assign,B;function ae(i){if(B===void 0)try{throw Error()}catch(h){var d=h.stack.trim().match(/\n( *(at )?)/);B=d&&d[1]||""}return`
`+B+i}var te=!1;function ge(i,d){if(!i||te)return"";te=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ve){var N=Ve}Reflect.construct(i,[],d)}else{try{d.call()}catch(Ve){N=Ve}i.call(d.prototype)}else{try{throw Error()}catch(Ve){N=Ve}i()}}catch(Ve){if(Ve&&N&&typeof Ve.stack=="string"){for(var _=Ve.stack.split(`
`),M=N.stack.split(`
`),X=_.length-1,xe=M.length-1;1<=X&&0<=xe&&_[X]!==M[xe];)xe--;for(;1<=X&&0<=xe;X--,xe--)if(_[X]!==M[xe]){if(X!==1||xe!==1)do if(X--,xe--,0>xe||_[X]!==M[xe]){var Ce=`
`+_[X].replace(" at new "," at ");return i.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",i.displayName)),Ce}while(1<=X&&0<=xe);break}}}finally{te=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?ae(i):""}function ue(i){switch(i.tag){case 5:return ae(i.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return i=ge(i.type,!1),i;case 11:return i=ge(i.type.render,!1),i;case 1:return i=ge(i.type,!0),i;default:return""}}function Ee(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case P:return"Portal";case R:return"Profiler";case O:return"StrictMode";case K:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case D:return(i._context.displayName||"Context")+".Provider";case j:var d=i.render;return i=i.displayName,i||(i=d.displayName||d.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return d=i.displayName||null,d!==null?d:Ee(i.type)||"Memo";case q:d=i._payload,i=i._init;try{return Ee(i(d))}catch{}}return null}function fe(i){var d=i.type;switch(i.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=d.render,i=i.displayName||i.name||"",d.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(d);case 8:return d===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function re(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function U(i){var d=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function W(i){var d=U(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,d),N=""+i[d];if(!i.hasOwnProperty(d)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,M=h.set;return Object.defineProperty(i,d,{configurable:!0,get:function(){return _.call(this)},set:function(X){N=""+X,M.call(this,X)}}),Object.defineProperty(i,d,{enumerable:h.enumerable}),{getValue:function(){return N},setValue:function(X){N=""+X},stopTracking:function(){i._valueTracker=null,delete i[d]}}}}function me(i){i._valueTracker||(i._valueTracker=W(i))}function ne(i){if(!i)return!1;var d=i._valueTracker;if(!d)return!0;var h=d.getValue(),N="";return i&&(N=U(i)?i.checked?"true":"false":i.value),i=N,i!==h?(d.setValue(i),!0):!1}function ee(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ve(i,d){var h=d.checked;return Q({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function be(i,d){var h=d.defaultValue==null?"":d.defaultValue,N=d.checked!=null?d.checked:d.defaultChecked;h=re(d.value!=null?d.value:h),i._wrapperState={initialChecked:N,initialValue:h,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function J(i,d){d=d.checked,d!=null&&C(i,"checked",d,!1)}function Ge(i,d){J(i,d);var h=re(d.value),N=d.type;if(h!=null)N==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(N==="submit"||N==="reset"){i.removeAttribute("value");return}d.hasOwnProperty("value")?tt(i,d.type,h):d.hasOwnProperty("defaultValue")&&tt(i,d.type,re(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(i.defaultChecked=!!d.defaultChecked)}function je(i,d,h){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var N=d.type;if(!(N!=="submit"&&N!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+i._wrapperState.initialValue,h||d===i.value||(i.value=d),i.defaultValue=d}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function tt(i,d,h){(d!=="number"||ee(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var At=Array.isArray;function He(i,d,h,N){if(i=i.options,d){d={};for(var _=0;_<h.length;_++)d["$"+h[_]]=!0;for(h=0;h<i.length;h++)_=d.hasOwnProperty("$"+i[h].value),i[h].selected!==_&&(i[h].selected=_),_&&N&&(i[h].defaultSelected=!0)}else{for(h=""+re(h),d=null,_=0;_<i.length;_++){if(i[_].value===h){i[_].selected=!0,N&&(i[_].defaultSelected=!0);return}d!==null||i[_].disabled||(d=i[_])}d!==null&&(d.selected=!0)}}function Tt(i,d){if(d.dangerouslySetInnerHTML!=null)throw Error(a(91));return Q({},d,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Re(i,d){var h=d.value;if(h==null){if(h=d.children,d=d.defaultValue,h!=null){if(d!=null)throw Error(a(92));if(At(h)){if(1<h.length)throw Error(a(93));h=h[0]}d=h}d==null&&(d=""),h=d}i._wrapperState={initialValue:re(h)}}function et(i,d){var h=re(d.value),N=re(d.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),d.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),N!=null&&(i.defaultValue=""+N)}function gt(i){var d=i.textContent;d===i._wrapperState.initialValue&&d!==""&&d!==null&&(i.value=d)}function Ze(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(i,d){return i==null||i==="http://www.w3.org/1999/xhtml"?Ze(d):i==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Dt,nt=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,h,N,_){MSApp.execUnsafeLocalFunction(function(){return i(d,h,N,_)})}:i})(function(i,d){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=d;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Dt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;d.firstChild;)i.appendChild(d.firstChild)}});function Me(i,d){if(d){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=d;return}}i.textContent=d}var Qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(Qe).forEach(function(i){wt.forEach(function(d){d=d+i.charAt(0).toUpperCase()+i.substring(1),Qe[d]=Qe[i]})});function lt(i,d,h){return d==null||typeof d=="boolean"||d===""?"":h||typeof d!="number"||d===0||Qe.hasOwnProperty(i)&&Qe[i]?(""+d).trim():d+"px"}function we(i,d){i=i.style;for(var h in d)if(d.hasOwnProperty(h)){var N=h.indexOf("--")===0,_=lt(h,d[h],N);h==="float"&&(h="cssFloat"),N?i.setProperty(h,_):i[h]=_}}var vt=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pt(i,d){if(d){if(vt[i]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(a(137,i));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(a(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(a(61))}if(d.style!=null&&typeof d.style!="object")throw Error(a(62))}}function Le(i,d){if(i.indexOf("-")===-1)return typeof d.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pe=null;function Pe(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ft=null,ht=null,Lt=null;function nr(i){if(i=ym(i)){if(typeof ft!="function")throw Error(a(280));var d=i.stateNode;d&&(d=$p(d),ft(i.stateNode,i.type,d))}}function er(i){ht?Lt?Lt.push(i):Lt=[i]:ht=i}function Nt(){if(ht){var i=ht,d=Lt;if(Lt=ht=null,nr(i),d)for(i=0;i<d.length;i++)nr(d[i])}}function sr(i,d){return i(d)}function Rt(){}var zt=!1;function mr(i,d,h){if(zt)return i(d,h);zt=!0;try{return sr(i,d,h)}finally{zt=!1,(ht!==null||Lt!==null)&&(Rt(),Nt())}}function Mr(i,d){var h=i.stateNode;if(h===null)return null;var N=$p(h);if(N===null)return null;h=N[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(i=i.type,N=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!N;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(a(231,d,typeof h));return h}var br=!1;if(c)try{var or={};Object.defineProperty(or,"passive",{get:function(){br=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{br=!1}function Gt(i,d,h,N,_,M,X,xe,Ce){var Ve=Array.prototype.slice.call(arguments,3);try{d.apply(h,Ve)}catch(yt){this.onError(yt)}}var Zt=!1,se=null,dt=!1,ut=null,It={onError:function(i){Zt=!0,se=i}};function de(i,d,h,N,_,M,X,xe,Ce){Zt=!1,se=null,Gt.apply(It,arguments)}function De(i,d,h,N,_,M,X,xe,Ce){if(de.apply(this,arguments),Zt){if(Zt){var Ve=se;Zt=!1,se=null}else throw Error(a(198));dt||(dt=!0,ut=Ve)}}function F(i){var d=i,h=i;if(i.alternate)for(;d.return;)d=d.return;else{i=d;do d=i,(d.flags&4098)!==0&&(h=d.return),i=d.return;while(i)}return d.tag===3?h:null}function ie(i){if(i.tag===13){var d=i.memoizedState;if(d===null&&(i=i.alternate,i!==null&&(d=i.memoizedState)),d!==null)return d.dehydrated}return null}function he(i){if(F(i)!==i)throw Error(a(188))}function ke(i){var d=i.alternate;if(!d){if(d=F(i),d===null)throw Error(a(188));return d!==i?null:i}for(var h=i,N=d;;){var _=h.return;if(_===null)break;var M=_.alternate;if(M===null){if(N=_.return,N!==null){h=N;continue}break}if(_.child===M.child){for(M=_.child;M;){if(M===h)return he(_),i;if(M===N)return he(_),d;M=M.sibling}throw Error(a(188))}if(h.return!==N.return)h=_,N=M;else{for(var X=!1,xe=_.child;xe;){if(xe===h){X=!0,h=_,N=M;break}if(xe===N){X=!0,N=_,h=M;break}xe=xe.sibling}if(!X){for(xe=M.child;xe;){if(xe===h){X=!0,h=M,N=_;break}if(xe===N){X=!0,N=M,h=_;break}xe=xe.sibling}if(!X)throw Error(a(189))}}if(h.alternate!==N)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?i:d}function mt(i){return i=ke(i),i!==null?G(i):null}function G(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var d=G(i);if(d!==null)return d;i=i.sibling}return null}var Z=r.unstable_scheduleCallback,le=r.unstable_cancelCallback,_e=r.unstable_shouldYield,Be=r.unstable_requestPaint,Te=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,qt=r.unstable_UserBlockingPriority,lr=r.unstable_NormalPriority,Nr=r.unstable_LowPriority,ra=r.unstable_IdlePriority,Oe=null,it=null;function gr(i){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Oe,i,void 0,(i.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:Ua,xa=Math.log,fa=Math.LN2;function Ua(i){return i>>>=0,i===0?32:31-(xa(i)/fa|0)|0}var Na=64,nn=4194304;function Fr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ka(i,d){var h=i.pendingLanes;if(h===0)return 0;var N=0,_=i.suspendedLanes,M=i.pingedLanes,X=h&268435455;if(X!==0){var xe=X&~_;xe!==0?N=Fr(xe):(M&=X,M!==0&&(N=Fr(M)))}else X=h&~_,X!==0?N=Fr(X):M!==0&&(N=Fr(M));if(N===0)return 0;if(d!==0&&d!==N&&(d&_)===0&&(_=N&-N,M=d&-d,_>=M||_===16&&(M&4194240)!==0))return d;if((N&4)!==0&&(N|=h&16),d=i.entangledLanes,d!==0)for(i=i.entanglements,d&=N;0<d;)h=31-wr(d),_=1<<h,N|=i[h],d&=~_;return N}function _a(i,d){switch(i){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pa(i,d){for(var h=i.suspendedLanes,N=i.pingedLanes,_=i.expirationTimes,M=i.pendingLanes;0<M;){var X=31-wr(M),xe=1<<X,Ce=_[X];Ce===-1?((xe&h)===0||(xe&N)!==0)&&(_[X]=_a(xe,d)):Ce<=d&&(i.expiredLanes|=xe),M&=~xe}}function oo(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Fe(){var i=Na;return Na<<=1,(Na&4194240)===0&&(Na=64),i}function $e(i){for(var d=[],h=0;31>h;h++)d.push(i);return d}function Ke(i,d,h){i.pendingLanes|=d,d!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,d=31-wr(d),i[d]=h}function st(i,d){var h=i.pendingLanes&~d;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=d,i.mutableReadLanes&=d,i.entangledLanes&=d,d=i.entanglements;var N=i.eventTimes;for(i=i.expirationTimes;0<h;){var _=31-wr(h),M=1<<_;d[_]=0,N[_]=-1,i[_]=-1,h&=~M}}function St(i,d){var h=i.entangledLanes|=d;for(i=i.entanglements;h;){var N=31-wr(h),_=1<<N;_&d|i[N]&d&&(i[N]|=d),h&=~_}}var rt=0;function _t(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Mt,hr,Pt,ur,aa,sn=!1,Ta=[],gn=null,pr=null,na=null,ya=new Map,_s=new Map,Ne=[],Ye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(i,d){switch(i){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":ya.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(d.pointerId)}}function xr(i,d,h,N,_,M){return i===null||i.nativeEvent!==M?(i={blockedOn:d,domEventName:h,eventSystemFlags:N,nativeEvent:M,targetContainers:[_]},d!==null&&(d=ym(d),d!==null&&hr(d)),i):(i.eventSystemFlags|=N,d=i.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),i)}function sa(i,d,h,N,_){switch(d){case"focusin":return gn=xr(gn,i,d,h,N,_),!0;case"dragenter":return pr=xr(pr,i,d,h,N,_),!0;case"mouseover":return na=xr(na,i,d,h,N,_),!0;case"pointerover":var M=_.pointerId;return ya.set(M,xr(ya.get(M)||null,i,d,h,N,_)),!0;case"gotpointercapture":return M=_.pointerId,_s.set(M,xr(_s.get(M)||null,i,d,h,N,_)),!0}return!1}function jr(i){var d=ki(i.target);if(d!==null){var h=F(d);if(h!==null){if(d=h.tag,d===13){if(d=ie(h),d!==null){i.blockedOn=d,aa(i.priority,function(){Pt(h)});return}}else if(d===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function da(i){if(i.blockedOn!==null)return!1;for(var d=i.targetContainers;0<d.length;){var h=ce(i.domEventName,i.eventSystemFlags,d[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var N=new h.constructor(h.type,h);pe=N,h.target.dispatchEvent(N),pe=null}else return d=ym(h),d!==null&&hr(d),i.blockedOn=h,!1;d.shift()}return!0}function Ps(i,d,h){da(i)&&h.delete(d)}function lo(){sn=!1,gn!==null&&da(gn)&&(gn=null),pr!==null&&da(pr)&&(pr=null),na!==null&&da(na)&&(na=null),ya.forEach(Ps),_s.forEach(Ps)}function Dn(i,d){i.blockedOn===d&&(i.blockedOn=null,sn||(sn=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,lo)))}function Ao(i){function d(_){return Dn(_,i)}if(0<Ta.length){Dn(Ta[0],i);for(var h=1;h<Ta.length;h++){var N=Ta[h];N.blockedOn===i&&(N.blockedOn=null)}}for(gn!==null&&Dn(gn,i),pr!==null&&Dn(pr,i),na!==null&&Dn(na,i),ya.forEach(d),_s.forEach(d),h=0;h<Ne.length;h++)N=Ne[h],N.blockedOn===i&&(N.blockedOn=null);for(;0<Ne.length&&(h=Ne[0],h.blockedOn===null);)jr(h),h.blockedOn===null&&Ne.shift()}var zs=A.ReactCurrentBatchConfig,On=!0;function _o(i,d,h,N){var _=rt,M=zs.transition;zs.transition=null;try{rt=1,el(i,d,h,N)}finally{rt=_,zs.transition=M}}function Ni(i,d,h,N){var _=rt,M=zs.transition;zs.transition=null;try{rt=4,el(i,d,h,N)}finally{rt=_,zs.transition=M}}function el(i,d,h,N){if(On){var _=ce(i,d,h,N);if(_===null)qh(i,d,N,Po,h),Ot(i,N);else if(sa(_,i,d,h,N))N.stopPropagation();else if(Ot(i,N),d&4&&-1<Ye.indexOf(i)){for(;_!==null;){var M=ym(_);if(M!==null&&Mt(M),M=ce(i,d,h,N),M===null&&qh(i,d,N,Po,h),M===_)break;_=M}_!==null&&N.stopPropagation()}else qh(i,d,N,null,h)}}var Po=null;function ce(i,d,h,N){if(Po=null,i=Pe(N),i=ki(i),i!==null)if(d=F(i),d===null)i=null;else if(h=d.tag,h===13){if(i=ie(d),i!==null)return i;i=null}else if(h===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;i=null}else d!==i&&(i=null);return Po=i,null}function qe(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Se()){case Je:return 1;case qt:return 4;case lr:case Nr:return 16;case ra:return 536870912;default:return 16}default:return 16}}var Ue=null,ct=null,kt=null;function Cr(){if(kt)return kt;var i,d=ct,h=d.length,N,_="value"in Ue?Ue.value:Ue.textContent,M=_.length;for(i=0;i<h&&d[i]===_[i];i++);var X=h-i;for(N=1;N<=X&&d[h-N]===_[M-N];N++);return kt=_.slice(i,1<N?1-N:void 0)}function ga(i){var d=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&d===13&&(i=13)):i=d,i===10&&(i=13),32<=i||i===13?i:0}function us(){return!0}function To(){return!1}function Ur(i){function d(h,N,_,M,X){this._reactName=h,this._targetInst=_,this.type=N,this.nativeEvent=M,this.target=X,this.currentTarget=null;for(var xe in i)i.hasOwnProperty(xe)&&(h=i[xe],this[xe]=h?h(M):M[xe]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?us:To,this.isPropagationStopped=To,this}return Q(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),d}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fn=Ur(tr),Ut=Q({},tr,{view:0,detail:0}),Bs=Ur(Ut),_c,I,ot,Vt=Q({},Ut,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ot&&(ot&&i.type==="mousemove"?(_c=i.screenX-ot.screenX,I=i.screenY-ot.screenY):I=_c=0,ot=i),_c)},movementY:function(i){return"movementY"in i?i.movementY:I}}),kr=Ur(Vt),yr=Q({},Vt,{dataTransfer:0}),Rr=Ur(yr),Jr=Q({},Ut,{relatedTarget:0}),ia=Ur(Jr),wn=Q({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Nn=Ur(wn),Fl=Q({},tr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ap=Ur(Fl),YL=Q({},tr,{data:0}),Gk=Ur(YL),XL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZL(i){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(i):(i=JL[i])?!!d[i]:!1}function Oh(){return ZL}var eI=Q({},Ut,{key:function(i){if(i.key){var d=XL[i.key]||i.key;if(d!=="Unidentified")return d}return i.type==="keypress"?(i=ga(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?QL[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(i){return i.type==="keypress"?ga(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ga(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),tI=Ur(eI),rI=Q({},Vt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kk=Ur(rI),aI=Q({},Ut,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),nI=Ur(aI),sI=Q({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oI=Ur(sI),lI=Q({},Vt,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),iI=Ur(lI),cI=[9,13,27,32],Mh=c&&"CompositionEvent"in window,dm=null;c&&"documentMode"in document&&(dm=document.documentMode);var dI=c&&"TextEvent"in window&&!dm,Yk=c&&(!Mh||dm&&8<dm&&11>=dm),Xk=" ",Qk=!1;function Jk(i,d){switch(i){case"keyup":return cI.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zk(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Pc=!1;function mI(i,d){switch(i){case"compositionend":return Zk(d);case"keypress":return d.which!==32?null:(Qk=!0,Xk);case"textInput":return i=d.data,i===Xk&&Qk?null:i;default:return null}}function uI(i,d){if(Pc)return i==="compositionend"||!Mh&&Jk(i,d)?(i=Cr(),kt=ct=Ue=null,Pc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Yk&&d.locale!=="ko"?null:d.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eS(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d==="input"?!!pI[i.type]:d==="textarea"}function tS(i,d,h,N){er(N),d=Mp(d,"onChange"),0<d.length&&(h=new Fn("onChange","change",null,h,N),i.push({event:h,listeners:d}))}var mm=null,um=null;function fI(i){yS(i,0)}function _p(i){var d=Rc(i);if(ne(d))return i}function gI(i,d){if(i==="change")return d}var rS=!1;if(c){var jh;if(c){var Rh="oninput"in document;if(!Rh){var aS=document.createElement("div");aS.setAttribute("oninput","return;"),Rh=typeof aS.oninput=="function"}jh=Rh}else jh=!1;rS=jh&&(!document.documentMode||9<document.documentMode)}function nS(){mm&&(mm.detachEvent("onpropertychange",sS),um=mm=null)}function sS(i){if(i.propertyName==="value"&&_p(um)){var d=[];tS(d,um,i,Pe(i)),mr(fI,d)}}function hI(i,d,h){i==="focusin"?(nS(),mm=d,um=h,mm.attachEvent("onpropertychange",sS)):i==="focusout"&&nS()}function bI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _p(um)}function xI(i,d){if(i==="click")return _p(d)}function yI(i,d){if(i==="input"||i==="change")return _p(d)}function vI(i,d){return i===d&&(i!==0||1/i===1/d)||i!==i&&d!==d}var io=typeof Object.is=="function"?Object.is:vI;function pm(i,d){if(io(i,d))return!0;if(typeof i!="object"||i===null||typeof d!="object"||d===null)return!1;var h=Object.keys(i),N=Object.keys(d);if(h.length!==N.length)return!1;for(N=0;N<h.length;N++){var _=h[N];if(!m.call(d,_)||!io(i[_],d[_]))return!1}return!0}function oS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lS(i,d){var h=oS(i);i=0;for(var N;h;){if(h.nodeType===3){if(N=i+h.textContent.length,i<=d&&N>=d)return{node:h,offset:d-i};i=N}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=oS(h)}}function iS(i,d){return i&&d?i===d?!0:i&&i.nodeType===3?!1:d&&d.nodeType===3?iS(i,d.parentNode):"contains"in i?i.contains(d):i.compareDocumentPosition?!!(i.compareDocumentPosition(d)&16):!1:!1}function cS(){for(var i=window,d=ee();d instanceof i.HTMLIFrameElement;){try{var h=typeof d.contentWindow.location.href=="string"}catch{h=!1}if(h)i=d.contentWindow;else break;d=ee(i.document)}return d}function $h(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d&&(d==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||d==="textarea"||i.contentEditable==="true")}function EI(i){var d=cS(),h=i.focusedElem,N=i.selectionRange;if(d!==h&&h&&h.ownerDocument&&iS(h.ownerDocument.documentElement,h)){if(N!==null&&$h(h)){if(d=N.start,i=N.end,i===void 0&&(i=d),"selectionStart"in h)h.selectionStart=d,h.selectionEnd=Math.min(i,h.value.length);else if(i=(d=h.ownerDocument||document)&&d.defaultView||window,i.getSelection){i=i.getSelection();var _=h.textContent.length,M=Math.min(N.start,_);N=N.end===void 0?M:Math.min(N.end,_),!i.extend&&M>N&&(_=N,N=M,M=_),_=lS(h,M);var X=lS(h,N);_&&X&&(i.rangeCount!==1||i.anchorNode!==_.node||i.anchorOffset!==_.offset||i.focusNode!==X.node||i.focusOffset!==X.offset)&&(d=d.createRange(),d.setStart(_.node,_.offset),i.removeAllRanges(),M>N?(i.addRange(d),i.extend(X.node,X.offset)):(d.setEnd(X.node,X.offset),i.addRange(d)))}}for(d=[],i=h;i=i.parentNode;)i.nodeType===1&&d.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<d.length;h++)i=d[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var wI=c&&"documentMode"in document&&11>=document.documentMode,Tc=null,Lh=null,fm=null,Ih=!1;function dS(i,d,h){var N=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ih||Tc==null||Tc!==ee(N)||(N=Tc,"selectionStart"in N&&$h(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),fm&&pm(fm,N)||(fm=N,N=Mp(Lh,"onSelect"),0<N.length&&(d=new Fn("onSelect","select",null,d,h),i.push({event:d,listeners:N}),d.target=Tc)))}function Pp(i,d){var h={};return h[i.toLowerCase()]=d.toLowerCase(),h["Webkit"+i]="webkit"+d,h["Moz"+i]="moz"+d,h}var Oc={animationend:Pp("Animation","AnimationEnd"),animationiteration:Pp("Animation","AnimationIteration"),animationstart:Pp("Animation","AnimationStart"),transitionend:Pp("Transition","TransitionEnd")},Dh={},mS={};c&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function Tp(i){if(Dh[i])return Dh[i];if(!Oc[i])return i;var d=Oc[i],h;for(h in d)if(d.hasOwnProperty(h)&&h in mS)return Dh[i]=d[h];return i}var uS=Tp("animationend"),pS=Tp("animationiteration"),fS=Tp("animationstart"),gS=Tp("transitionend"),hS=new Map,bS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zl(i,d){hS.set(i,d),o(d,[i])}for(var Fh=0;Fh<bS.length;Fh++){var zh=bS[Fh],NI=zh.toLowerCase(),kI=zh[0].toUpperCase()+zh.slice(1);zl(NI,"on"+kI)}zl(uS,"onAnimationEnd"),zl(pS,"onAnimationIteration"),zl(fS,"onAnimationStart"),zl("dblclick","onDoubleClick"),zl("focusin","onFocus"),zl("focusout","onBlur"),zl(gS,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SI=new Set("cancel close invalid load scroll toggle".split(" ").concat(gm));function xS(i,d,h){var N=i.type||"unknown-event";i.currentTarget=h,De(N,d,void 0,i),i.currentTarget=null}function yS(i,d){d=(d&4)!==0;for(var h=0;h<i.length;h++){var N=i[h],_=N.event;N=N.listeners;e:{var M=void 0;if(d)for(var X=N.length-1;0<=X;X--){var xe=N[X],Ce=xe.instance,Ve=xe.currentTarget;if(xe=xe.listener,Ce!==M&&_.isPropagationStopped())break e;xS(_,xe,Ve),M=Ce}else for(X=0;X<N.length;X++){if(xe=N[X],Ce=xe.instance,Ve=xe.currentTarget,xe=xe.listener,Ce!==M&&_.isPropagationStopped())break e;xS(_,xe,Ve),M=Ce}}}if(dt)throw i=ut,dt=!1,ut=null,i}function ja(i,d){var h=d[Kh];h===void 0&&(h=d[Kh]=new Set);var N=i+"__bubble";h.has(N)||(vS(d,i,2,!1),h.add(N))}function Bh(i,d,h){var N=0;d&&(N|=4),vS(h,i,N,d)}var Op="_reactListening"+Math.random().toString(36).slice(2);function hm(i){if(!i[Op]){i[Op]=!0,n.forEach(function(h){h!=="selectionchange"&&(SI.has(h)||Bh(h,!1,i),Bh(h,!0,i))});var d=i.nodeType===9?i:i.ownerDocument;d===null||d[Op]||(d[Op]=!0,Bh("selectionchange",!1,d))}}function vS(i,d,h,N){switch(qe(d)){case 1:var _=_o;break;case 4:_=Ni;break;default:_=el}h=_.bind(null,d,h,i),_=void 0,!br||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),N?_!==void 0?i.addEventListener(d,h,{capture:!0,passive:_}):i.addEventListener(d,h,!0):_!==void 0?i.addEventListener(d,h,{passive:_}):i.addEventListener(d,h,!1)}function qh(i,d,h,N,_){var M=N;if((d&1)===0&&(d&2)===0&&N!==null)e:for(;;){if(N===null)return;var X=N.tag;if(X===3||X===4){var xe=N.stateNode.containerInfo;if(xe===_||xe.nodeType===8&&xe.parentNode===_)break;if(X===4)for(X=N.return;X!==null;){var Ce=X.tag;if((Ce===3||Ce===4)&&(Ce=X.stateNode.containerInfo,Ce===_||Ce.nodeType===8&&Ce.parentNode===_))return;X=X.return}for(;xe!==null;){if(X=ki(xe),X===null)return;if(Ce=X.tag,Ce===5||Ce===6){N=M=X;continue e}xe=xe.parentNode}}N=N.return}mr(function(){var Ve=M,yt=Pe(h),Et=[];e:{var bt=hS.get(i);if(bt!==void 0){var Bt=Fn,Kt=i;switch(i){case"keypress":if(ga(h)===0)break e;case"keydown":case"keyup":Bt=tI;break;case"focusin":Kt="focus",Bt=ia;break;case"focusout":Kt="blur",Bt=ia;break;case"beforeblur":case"afterblur":Bt=ia;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=Rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=nI;break;case uS:case pS:case fS:Bt=Nn;break;case gS:Bt=oI;break;case"scroll":Bt=Bs;break;case"wheel":Bt=iI;break;case"copy":case"cut":case"paste":Bt=Ap;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=Kk}var Qt=(d&4)!==0,Ja=!Qt&&i==="scroll",Ie=Qt?bt!==null?bt+"Capture":null:bt;Qt=[];for(var Ae=Ve,ze;Ae!==null;){ze=Ae;var Ct=ze.stateNode;if(ze.tag===5&&Ct!==null&&(ze=Ct,Ie!==null&&(Ct=Mr(Ae,Ie),Ct!=null&&Qt.push(bm(Ae,Ct,ze)))),Ja)break;Ae=Ae.return}0<Qt.length&&(bt=new Bt(bt,Kt,null,h,yt),Et.push({event:bt,listeners:Qt}))}}if((d&7)===0){e:{if(bt=i==="mouseover"||i==="pointerover",Bt=i==="mouseout"||i==="pointerout",bt&&h!==pe&&(Kt=h.relatedTarget||h.fromElement)&&(ki(Kt)||Kt[tl]))break e;if((Bt||bt)&&(bt=yt.window===yt?yt:(bt=yt.ownerDocument)?bt.defaultView||bt.parentWindow:window,Bt?(Kt=h.relatedTarget||h.toElement,Bt=Ve,Kt=Kt?ki(Kt):null,Kt!==null&&(Ja=F(Kt),Kt!==Ja||Kt.tag!==5&&Kt.tag!==6)&&(Kt=null)):(Bt=null,Kt=Ve),Bt!==Kt)){if(Qt=kr,Ct="onMouseLeave",Ie="onMouseEnter",Ae="mouse",(i==="pointerout"||i==="pointerover")&&(Qt=Kk,Ct="onPointerLeave",Ie="onPointerEnter",Ae="pointer"),Ja=Bt==null?bt:Rc(Bt),ze=Kt==null?bt:Rc(Kt),bt=new Qt(Ct,Ae+"leave",Bt,h,yt),bt.target=Ja,bt.relatedTarget=ze,Ct=null,ki(yt)===Ve&&(Qt=new Qt(Ie,Ae+"enter",Kt,h,yt),Qt.target=ze,Qt.relatedTarget=Ja,Ct=Qt),Ja=Ct,Bt&&Kt)t:{for(Qt=Bt,Ie=Kt,Ae=0,ze=Qt;ze;ze=Mc(ze))Ae++;for(ze=0,Ct=Ie;Ct;Ct=Mc(Ct))ze++;for(;0<Ae-ze;)Qt=Mc(Qt),Ae--;for(;0<ze-Ae;)Ie=Mc(Ie),ze--;for(;Ae--;){if(Qt===Ie||Ie!==null&&Qt===Ie.alternate)break t;Qt=Mc(Qt),Ie=Mc(Ie)}Qt=null}else Qt=null;Bt!==null&&ES(Et,bt,Bt,Qt,!1),Kt!==null&&Ja!==null&&ES(Et,Ja,Kt,Qt,!0)}}e:{if(bt=Ve?Rc(Ve):window,Bt=bt.nodeName&&bt.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&bt.type==="file")var Jt=gI;else if(eS(bt))if(rS)Jt=yI;else{Jt=bI;var cr=hI}else(Bt=bt.nodeName)&&Bt.toLowerCase()==="input"&&(bt.type==="checkbox"||bt.type==="radio")&&(Jt=xI);if(Jt&&(Jt=Jt(i,Ve))){tS(Et,Jt,h,yt);break e}cr&&cr(i,bt,Ve),i==="focusout"&&(cr=bt._wrapperState)&&cr.controlled&&bt.type==="number"&&tt(bt,"number",bt.value)}switch(cr=Ve?Rc(Ve):window,i){case"focusin":(eS(cr)||cr.contentEditable==="true")&&(Tc=cr,Lh=Ve,fm=null);break;case"focusout":fm=Lh=Tc=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,dS(Et,h,yt);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":dS(Et,h,yt)}var dr;if(Mh)e:{switch(i){case"compositionstart":var vr="onCompositionStart";break e;case"compositionend":vr="onCompositionEnd";break e;case"compositionupdate":vr="onCompositionUpdate";break e}vr=void 0}else Pc?Jk(i,h)&&(vr="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(vr="onCompositionStart");vr&&(Yk&&h.locale!=="ko"&&(Pc||vr!=="onCompositionStart"?vr==="onCompositionEnd"&&Pc&&(dr=Cr()):(Ue=yt,ct="value"in Ue?Ue.value:Ue.textContent,Pc=!0)),cr=Mp(Ve,vr),0<cr.length&&(vr=new Gk(vr,i,null,h,yt),Et.push({event:vr,listeners:cr}),dr?vr.data=dr:(dr=Zk(h),dr!==null&&(vr.data=dr)))),(dr=dI?mI(i,h):uI(i,h))&&(Ve=Mp(Ve,"onBeforeInput"),0<Ve.length&&(yt=new Gk("onBeforeInput","beforeinput",null,h,yt),Et.push({event:yt,listeners:Ve}),yt.data=dr))}yS(Et,d)})}function bm(i,d,h){return{instance:i,listener:d,currentTarget:h}}function Mp(i,d){for(var h=d+"Capture",N=[];i!==null;){var _=i,M=_.stateNode;_.tag===5&&M!==null&&(_=M,M=Mr(i,h),M!=null&&N.unshift(bm(i,M,_)),M=Mr(i,d),M!=null&&N.push(bm(i,M,_))),i=i.return}return N}function Mc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ES(i,d,h,N,_){for(var M=d._reactName,X=[];h!==null&&h!==N;){var xe=h,Ce=xe.alternate,Ve=xe.stateNode;if(Ce!==null&&Ce===N)break;xe.tag===5&&Ve!==null&&(xe=Ve,_?(Ce=Mr(h,M),Ce!=null&&X.unshift(bm(h,Ce,xe))):_||(Ce=Mr(h,M),Ce!=null&&X.push(bm(h,Ce,xe)))),h=h.return}X.length!==0&&i.push({event:d,listeners:X})}var CI=/\r\n?/g,AI=/\u0000|\uFFFD/g;function wS(i){return(typeof i=="string"?i:""+i).replace(CI,`
`).replace(AI,"")}function jp(i,d,h){if(d=wS(d),wS(i)!==d&&h)throw Error(a(425))}function Rp(){}var Uh=null,Vh=null;function Hh(i,d){return i==="textarea"||i==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,_I=typeof clearTimeout=="function"?clearTimeout:void 0,NS=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof NS<"u"?function(i){return NS.resolve(null).then(i).catch(TI)}:Wh;function TI(i){setTimeout(function(){throw i})}function Gh(i,d){var h=d,N=0;do{var _=h.nextSibling;if(i.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(N===0){i.removeChild(_),Ao(d);return}N--}else h!=="$"&&h!=="$?"&&h!=="$!"||N++;h=_}while(h);Ao(d)}function Bl(i){for(;i!=null;i=i.nextSibling){var d=i.nodeType;if(d===1||d===3)break;if(d===8){if(d=i.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return i}function kS(i){i=i.previousSibling;for(var d=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(d===0)return i;d--}else h==="/$"&&d++}i=i.previousSibling}return null}var jc=Math.random().toString(36).slice(2),Oo="__reactFiber$"+jc,xm="__reactProps$"+jc,tl="__reactContainer$"+jc,Kh="__reactEvents$"+jc,OI="__reactListeners$"+jc,MI="__reactHandles$"+jc;function ki(i){var d=i[Oo];if(d)return d;for(var h=i.parentNode;h;){if(d=h[tl]||h[Oo]){if(h=d.alternate,d.child!==null||h!==null&&h.child!==null)for(i=kS(i);i!==null;){if(h=i[Oo])return h;i=kS(i)}return d}i=h,h=i.parentNode}return null}function ym(i){return i=i[Oo]||i[tl],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Rc(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(a(33))}function $p(i){return i[xm]||null}var Yh=[],$c=-1;function ql(i){return{current:i}}function Ra(i){0>$c||(i.current=Yh[$c],Yh[$c]=null,$c--)}function Oa(i,d){$c++,Yh[$c]=i.current,i.current=d}var Ul={},zn=ql(Ul),ps=ql(!1),Si=Ul;function Lc(i,d){var h=i.type.contextTypes;if(!h)return Ul;var N=i.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===d)return N.__reactInternalMemoizedMaskedChildContext;var _={},M;for(M in h)_[M]=d[M];return N&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=d,i.__reactInternalMemoizedMaskedChildContext=_),_}function fs(i){return i=i.childContextTypes,i!=null}function Lp(){Ra(ps),Ra(zn)}function SS(i,d,h){if(zn.current!==Ul)throw Error(a(168));Oa(zn,d),Oa(ps,h)}function CS(i,d,h){var N=i.stateNode;if(d=d.childContextTypes,typeof N.getChildContext!="function")return h;N=N.getChildContext();for(var _ in N)if(!(_ in d))throw Error(a(108,fe(i)||"Unknown",_));return Q({},h,N)}function Ip(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ul,Si=zn.current,Oa(zn,i),Oa(ps,ps.current),!0}function AS(i,d,h){var N=i.stateNode;if(!N)throw Error(a(169));h?(i=CS(i,d,Si),N.__reactInternalMemoizedMergedChildContext=i,Ra(ps),Ra(zn),Oa(zn,i)):Ra(ps),Oa(ps,h)}var rl=null,Dp=!1,Xh=!1;function _S(i){rl===null?rl=[i]:rl.push(i)}function jI(i){Dp=!0,_S(i)}function Vl(){if(!Xh&&rl!==null){Xh=!0;var i=0,d=rt;try{var h=rl;for(rt=1;i<h.length;i++){var N=h[i];do N=N(!0);while(N!==null)}rl=null,Dp=!1}catch(_){throw rl!==null&&(rl=rl.slice(i+1)),Z(Je,Vl),_}finally{rt=d,Xh=!1}}return null}var Ic=[],Dc=0,Fp=null,zp=0,qs=[],Us=0,Ci=null,al=1,nl="";function Ai(i,d){Ic[Dc++]=zp,Ic[Dc++]=Fp,Fp=i,zp=d}function PS(i,d,h){qs[Us++]=al,qs[Us++]=nl,qs[Us++]=Ci,Ci=i;var N=al;i=nl;var _=32-wr(N)-1;N&=~(1<<_),h+=1;var M=32-wr(d)+_;if(30<M){var X=_-_%5;M=(N&(1<<X)-1).toString(32),N>>=X,_-=X,al=1<<32-wr(d)+_|h<<_|N,nl=M+i}else al=1<<M|h<<_|N,nl=i}function Qh(i){i.return!==null&&(Ai(i,1),PS(i,1,0))}function Jh(i){for(;i===Fp;)Fp=Ic[--Dc],Ic[Dc]=null,zp=Ic[--Dc],Ic[Dc]=null;for(;i===Ci;)Ci=qs[--Us],qs[Us]=null,nl=qs[--Us],qs[Us]=null,al=qs[--Us],qs[Us]=null}var Ts=null,Os=null,Fa=!1,co=null;function TS(i,d){var h=Gs(5,null,null,0);h.elementType="DELETED",h.stateNode=d,h.return=i,d=i.deletions,d===null?(i.deletions=[h],i.flags|=16):d.push(h)}function OS(i,d){switch(i.tag){case 5:var h=i.type;return d=d.nodeType!==1||h.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(i.stateNode=d,Ts=i,Os=Bl(d.firstChild),!0):!1;case 6:return d=i.pendingProps===""||d.nodeType!==3?null:d,d!==null?(i.stateNode=d,Ts=i,Os=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(h=Ci!==null?{id:al,overflow:nl}:null,i.memoizedState={dehydrated:d,treeContext:h,retryLane:1073741824},h=Gs(18,null,null,0),h.stateNode=d,h.return=i,i.child=h,Ts=i,Os=null,!0):!1;default:return!1}}function Zh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function eb(i){if(Fa){var d=Os;if(d){var h=d;if(!OS(i,d)){if(Zh(i))throw Error(a(418));d=Bl(h.nextSibling);var N=Ts;d&&OS(i,d)?TS(N,h):(i.flags=i.flags&-4097|2,Fa=!1,Ts=i)}}else{if(Zh(i))throw Error(a(418));i.flags=i.flags&-4097|2,Fa=!1,Ts=i}}}function MS(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ts=i}function Bp(i){if(i!==Ts)return!1;if(!Fa)return MS(i),Fa=!0,!1;var d;if((d=i.tag!==3)&&!(d=i.tag!==5)&&(d=i.type,d=d!=="head"&&d!=="body"&&!Hh(i.type,i.memoizedProps)),d&&(d=Os)){if(Zh(i))throw jS(),Error(a(418));for(;d;)TS(i,d),d=Bl(d.nextSibling)}if(MS(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));e:{for(i=i.nextSibling,d=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(d===0){Os=Bl(i.nextSibling);break e}d--}else h!=="$"&&h!=="$!"&&h!=="$?"||d++}i=i.nextSibling}Os=null}}else Os=Ts?Bl(i.stateNode.nextSibling):null;return!0}function jS(){for(var i=Os;i;)i=Bl(i.nextSibling)}function Fc(){Os=Ts=null,Fa=!1}function tb(i){co===null?co=[i]:co.push(i)}var RI=A.ReactCurrentBatchConfig;function vm(i,d,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(a(309));var N=h.stateNode}if(!N)throw Error(a(147,i));var _=N,M=""+i;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===M?d.ref:(d=function(X){var xe=_.refs;X===null?delete xe[M]:xe[M]=X},d._stringRef=M,d)}if(typeof i!="string")throw Error(a(284));if(!h._owner)throw Error(a(290,i))}return i}function qp(i,d){throw i=Object.prototype.toString.call(d),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":i))}function RS(i){var d=i._init;return d(i._payload)}function $S(i){function d(Ie,Ae){if(i){var ze=Ie.deletions;ze===null?(Ie.deletions=[Ae],Ie.flags|=16):ze.push(Ae)}}function h(Ie,Ae){if(!i)return null;for(;Ae!==null;)d(Ie,Ae),Ae=Ae.sibling;return null}function N(Ie,Ae){for(Ie=new Map;Ae!==null;)Ae.key!==null?Ie.set(Ae.key,Ae):Ie.set(Ae.index,Ae),Ae=Ae.sibling;return Ie}function _(Ie,Ae){return Ie=Jl(Ie,Ae),Ie.index=0,Ie.sibling=null,Ie}function M(Ie,Ae,ze){return Ie.index=ze,i?(ze=Ie.alternate,ze!==null?(ze=ze.index,ze<Ae?(Ie.flags|=2,Ae):ze):(Ie.flags|=2,Ae)):(Ie.flags|=1048576,Ae)}function X(Ie){return i&&Ie.alternate===null&&(Ie.flags|=2),Ie}function xe(Ie,Ae,ze,Ct){return Ae===null||Ae.tag!==6?(Ae=Wb(ze,Ie.mode,Ct),Ae.return=Ie,Ae):(Ae=_(Ae,ze),Ae.return=Ie,Ae)}function Ce(Ie,Ae,ze,Ct){var Jt=ze.type;return Jt===T?yt(Ie,Ae,ze.props.children,Ct,ze.key):Ae!==null&&(Ae.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===q&&RS(Jt)===Ae.type)?(Ct=_(Ae,ze.props),Ct.ref=vm(Ie,Ae,ze),Ct.return=Ie,Ct):(Ct=u0(ze.type,ze.key,ze.props,null,Ie.mode,Ct),Ct.ref=vm(Ie,Ae,ze),Ct.return=Ie,Ct)}function Ve(Ie,Ae,ze,Ct){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==ze.containerInfo||Ae.stateNode.implementation!==ze.implementation?(Ae=Gb(ze,Ie.mode,Ct),Ae.return=Ie,Ae):(Ae=_(Ae,ze.children||[]),Ae.return=Ie,Ae)}function yt(Ie,Ae,ze,Ct,Jt){return Ae===null||Ae.tag!==7?(Ae=$i(ze,Ie.mode,Ct,Jt),Ae.return=Ie,Ae):(Ae=_(Ae,ze),Ae.return=Ie,Ae)}function Et(Ie,Ae,ze){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=Wb(""+Ae,Ie.mode,ze),Ae.return=Ie,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:return ze=u0(Ae.type,Ae.key,Ae.props,null,Ie.mode,ze),ze.ref=vm(Ie,null,Ae),ze.return=Ie,ze;case P:return Ae=Gb(Ae,Ie.mode,ze),Ae.return=Ie,Ae;case q:var Ct=Ae._init;return Et(Ie,Ct(Ae._payload),ze)}if(At(Ae)||L(Ae))return Ae=$i(Ae,Ie.mode,ze,null),Ae.return=Ie,Ae;qp(Ie,Ae)}return null}function bt(Ie,Ae,ze,Ct){var Jt=Ae!==null?Ae.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return Jt!==null?null:xe(Ie,Ae,""+ze,Ct);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case S:return ze.key===Jt?Ce(Ie,Ae,ze,Ct):null;case P:return ze.key===Jt?Ve(Ie,Ae,ze,Ct):null;case q:return Jt=ze._init,bt(Ie,Ae,Jt(ze._payload),Ct)}if(At(ze)||L(ze))return Jt!==null?null:yt(Ie,Ae,ze,Ct,null);qp(Ie,ze)}return null}function Bt(Ie,Ae,ze,Ct,Jt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ie=Ie.get(ze)||null,xe(Ae,Ie,""+Ct,Jt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case S:return Ie=Ie.get(Ct.key===null?ze:Ct.key)||null,Ce(Ae,Ie,Ct,Jt);case P:return Ie=Ie.get(Ct.key===null?ze:Ct.key)||null,Ve(Ae,Ie,Ct,Jt);case q:var cr=Ct._init;return Bt(Ie,Ae,ze,cr(Ct._payload),Jt)}if(At(Ct)||L(Ct))return Ie=Ie.get(ze)||null,yt(Ae,Ie,Ct,Jt,null);qp(Ae,Ct)}return null}function Kt(Ie,Ae,ze,Ct){for(var Jt=null,cr=null,dr=Ae,vr=Ae=0,Cn=null;dr!==null&&vr<ze.length;vr++){dr.index>vr?(Cn=dr,dr=null):Cn=dr.sibling;var oa=bt(Ie,dr,ze[vr],Ct);if(oa===null){dr===null&&(dr=Cn);break}i&&dr&&oa.alternate===null&&d(Ie,dr),Ae=M(oa,Ae,vr),cr===null?Jt=oa:cr.sibling=oa,cr=oa,dr=Cn}if(vr===ze.length)return h(Ie,dr),Fa&&Ai(Ie,vr),Jt;if(dr===null){for(;vr<ze.length;vr++)dr=Et(Ie,ze[vr],Ct),dr!==null&&(Ae=M(dr,Ae,vr),cr===null?Jt=dr:cr.sibling=dr,cr=dr);return Fa&&Ai(Ie,vr),Jt}for(dr=N(Ie,dr);vr<ze.length;vr++)Cn=Bt(dr,Ie,vr,ze[vr],Ct),Cn!==null&&(i&&Cn.alternate!==null&&dr.delete(Cn.key===null?vr:Cn.key),Ae=M(Cn,Ae,vr),cr===null?Jt=Cn:cr.sibling=Cn,cr=Cn);return i&&dr.forEach(function(Zl){return d(Ie,Zl)}),Fa&&Ai(Ie,vr),Jt}function Qt(Ie,Ae,ze,Ct){var Jt=L(ze);if(typeof Jt!="function")throw Error(a(150));if(ze=Jt.call(ze),ze==null)throw Error(a(151));for(var cr=Jt=null,dr=Ae,vr=Ae=0,Cn=null,oa=ze.next();dr!==null&&!oa.done;vr++,oa=ze.next()){dr.index>vr?(Cn=dr,dr=null):Cn=dr.sibling;var Zl=bt(Ie,dr,oa.value,Ct);if(Zl===null){dr===null&&(dr=Cn);break}i&&dr&&Zl.alternate===null&&d(Ie,dr),Ae=M(Zl,Ae,vr),cr===null?Jt=Zl:cr.sibling=Zl,cr=Zl,dr=Cn}if(oa.done)return h(Ie,dr),Fa&&Ai(Ie,vr),Jt;if(dr===null){for(;!oa.done;vr++,oa=ze.next())oa=Et(Ie,oa.value,Ct),oa!==null&&(Ae=M(oa,Ae,vr),cr===null?Jt=oa:cr.sibling=oa,cr=oa);return Fa&&Ai(Ie,vr),Jt}for(dr=N(Ie,dr);!oa.done;vr++,oa=ze.next())oa=Bt(dr,Ie,vr,oa.value,Ct),oa!==null&&(i&&oa.alternate!==null&&dr.delete(oa.key===null?vr:oa.key),Ae=M(oa,Ae,vr),cr===null?Jt=oa:cr.sibling=oa,cr=oa);return i&&dr.forEach(function(pD){return d(Ie,pD)}),Fa&&Ai(Ie,vr),Jt}function Ja(Ie,Ae,ze,Ct){if(typeof ze=="object"&&ze!==null&&ze.type===T&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case S:e:{for(var Jt=ze.key,cr=Ae;cr!==null;){if(cr.key===Jt){if(Jt=ze.type,Jt===T){if(cr.tag===7){h(Ie,cr.sibling),Ae=_(cr,ze.props.children),Ae.return=Ie,Ie=Ae;break e}}else if(cr.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===q&&RS(Jt)===cr.type){h(Ie,cr.sibling),Ae=_(cr,ze.props),Ae.ref=vm(Ie,cr,ze),Ae.return=Ie,Ie=Ae;break e}h(Ie,cr);break}else d(Ie,cr);cr=cr.sibling}ze.type===T?(Ae=$i(ze.props.children,Ie.mode,Ct,ze.key),Ae.return=Ie,Ie=Ae):(Ct=u0(ze.type,ze.key,ze.props,null,Ie.mode,Ct),Ct.ref=vm(Ie,Ae,ze),Ct.return=Ie,Ie=Ct)}return X(Ie);case P:e:{for(cr=ze.key;Ae!==null;){if(Ae.key===cr)if(Ae.tag===4&&Ae.stateNode.containerInfo===ze.containerInfo&&Ae.stateNode.implementation===ze.implementation){h(Ie,Ae.sibling),Ae=_(Ae,ze.children||[]),Ae.return=Ie,Ie=Ae;break e}else{h(Ie,Ae);break}else d(Ie,Ae);Ae=Ae.sibling}Ae=Gb(ze,Ie.mode,Ct),Ae.return=Ie,Ie=Ae}return X(Ie);case q:return cr=ze._init,Ja(Ie,Ae,cr(ze._payload),Ct)}if(At(ze))return Kt(Ie,Ae,ze,Ct);if(L(ze))return Qt(Ie,Ae,ze,Ct);qp(Ie,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,Ae!==null&&Ae.tag===6?(h(Ie,Ae.sibling),Ae=_(Ae,ze),Ae.return=Ie,Ie=Ae):(h(Ie,Ae),Ae=Wb(ze,Ie.mode,Ct),Ae.return=Ie,Ie=Ae),X(Ie)):h(Ie,Ae)}return Ja}var zc=$S(!0),LS=$S(!1),Up=ql(null),Vp=null,Bc=null,rb=null;function ab(){rb=Bc=Vp=null}function nb(i){var d=Up.current;Ra(Up),i._currentValue=d}function sb(i,d,h){for(;i!==null;){var N=i.alternate;if((i.childLanes&d)!==d?(i.childLanes|=d,N!==null&&(N.childLanes|=d)):N!==null&&(N.childLanes&d)!==d&&(N.childLanes|=d),i===h)break;i=i.return}}function qc(i,d){Vp=i,rb=Bc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&d)!==0&&(gs=!0),i.firstContext=null)}function Vs(i){var d=i._currentValue;if(rb!==i)if(i={context:i,memoizedValue:d,next:null},Bc===null){if(Vp===null)throw Error(a(308));Bc=i,Vp.dependencies={lanes:0,firstContext:i}}else Bc=Bc.next=i;return d}var _i=null;function ob(i){_i===null?_i=[i]:_i.push(i)}function IS(i,d,h,N){var _=d.interleaved;return _===null?(h.next=h,ob(d)):(h.next=_.next,_.next=h),d.interleaved=h,sl(i,N)}function sl(i,d){i.lanes|=d;var h=i.alternate;for(h!==null&&(h.lanes|=d),h=i,i=i.return;i!==null;)i.childLanes|=d,h=i.alternate,h!==null&&(h.childLanes|=d),h=i,i=i.return;return h.tag===3?h.stateNode:null}var Hl=!1;function lb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DS(i,d){i=i.updateQueue,d.updateQueue===i&&(d.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ol(i,d){return{eventTime:i,lane:d,tag:0,payload:null,callback:null,next:null}}function Wl(i,d,h){var N=i.updateQueue;if(N===null)return null;if(N=N.shared,(Zr&2)!==0){var _=N.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),N.pending=d,sl(i,h)}return _=N.interleaved,_===null?(d.next=d,ob(N)):(d.next=_.next,_.next=d),N.interleaved=d,sl(i,h)}function Hp(i,d,h){if(d=d.updateQueue,d!==null&&(d=d.shared,(h&4194240)!==0)){var N=d.lanes;N&=i.pendingLanes,h|=N,d.lanes=h,St(i,h)}}function FS(i,d){var h=i.updateQueue,N=i.alternate;if(N!==null&&(N=N.updateQueue,h===N)){var _=null,M=null;if(h=h.firstBaseUpdate,h!==null){do{var X={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};M===null?_=M=X:M=M.next=X,h=h.next}while(h!==null);M===null?_=M=d:M=M.next=d}else _=M=d;h={baseState:N.baseState,firstBaseUpdate:_,lastBaseUpdate:M,shared:N.shared,effects:N.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=d:i.next=d,h.lastBaseUpdate=d}function Wp(i,d,h,N){var _=i.updateQueue;Hl=!1;var M=_.firstBaseUpdate,X=_.lastBaseUpdate,xe=_.shared.pending;if(xe!==null){_.shared.pending=null;var Ce=xe,Ve=Ce.next;Ce.next=null,X===null?M=Ve:X.next=Ve,X=Ce;var yt=i.alternate;yt!==null&&(yt=yt.updateQueue,xe=yt.lastBaseUpdate,xe!==X&&(xe===null?yt.firstBaseUpdate=Ve:xe.next=Ve,yt.lastBaseUpdate=Ce))}if(M!==null){var Et=_.baseState;X=0,yt=Ve=Ce=null,xe=M;do{var bt=xe.lane,Bt=xe.eventTime;if((N&bt)===bt){yt!==null&&(yt=yt.next={eventTime:Bt,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var Kt=i,Qt=xe;switch(bt=d,Bt=h,Qt.tag){case 1:if(Kt=Qt.payload,typeof Kt=="function"){Et=Kt.call(Bt,Et,bt);break e}Et=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Qt.payload,bt=typeof Kt=="function"?Kt.call(Bt,Et,bt):Kt,bt==null)break e;Et=Q({},Et,bt);break e;case 2:Hl=!0}}xe.callback!==null&&xe.lane!==0&&(i.flags|=64,bt=_.effects,bt===null?_.effects=[xe]:bt.push(xe))}else Bt={eventTime:Bt,lane:bt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},yt===null?(Ve=yt=Bt,Ce=Et):yt=yt.next=Bt,X|=bt;if(xe=xe.next,xe===null){if(xe=_.shared.pending,xe===null)break;bt=xe,xe=bt.next,bt.next=null,_.lastBaseUpdate=bt,_.shared.pending=null}}while(!0);if(yt===null&&(Ce=Et),_.baseState=Ce,_.firstBaseUpdate=Ve,_.lastBaseUpdate=yt,d=_.shared.interleaved,d!==null){_=d;do X|=_.lane,_=_.next;while(_!==d)}else M===null&&(_.shared.lanes=0);Oi|=X,i.lanes=X,i.memoizedState=Et}}function zS(i,d,h){if(i=d.effects,d.effects=null,i!==null)for(d=0;d<i.length;d++){var N=i[d],_=N.callback;if(_!==null){if(N.callback=null,N=h,typeof _!="function")throw Error(a(191,_));_.call(N)}}}var Em={},Mo=ql(Em),wm=ql(Em),Nm=ql(Em);function Pi(i){if(i===Em)throw Error(a(174));return i}function ib(i,d){switch(Oa(Nm,d),Oa(wm,i),Oa(Mo,Em),i=d.nodeType,i){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:xt(null,"");break;default:i=i===8?d.parentNode:d,d=i.namespaceURI||null,i=i.tagName,d=xt(d,i)}Ra(Mo),Oa(Mo,d)}function Uc(){Ra(Mo),Ra(wm),Ra(Nm)}function BS(i){Pi(Nm.current);var d=Pi(Mo.current),h=xt(d,i.type);d!==h&&(Oa(wm,i),Oa(Mo,h))}function cb(i){wm.current===i&&(Ra(Mo),Ra(wm))}var Va=ql(0);function Gp(i){for(var d=i;d!==null;){if(d.tag===13){var h=d.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var db=[];function mb(){for(var i=0;i<db.length;i++)db[i]._workInProgressVersionPrimary=null;db.length=0}var Kp=A.ReactCurrentDispatcher,ub=A.ReactCurrentBatchConfig,Ti=0,Ha=null,hn=null,kn=null,Yp=!1,km=!1,Sm=0,$I=0;function Bn(){throw Error(a(321))}function pb(i,d){if(d===null)return!1;for(var h=0;h<d.length&&h<i.length;h++)if(!io(i[h],d[h]))return!1;return!0}function fb(i,d,h,N,_,M){if(Ti=M,Ha=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Kp.current=i===null||i.memoizedState===null?FI:zI,i=h(N,_),km){M=0;do{if(km=!1,Sm=0,25<=M)throw Error(a(301));M+=1,kn=hn=null,d.updateQueue=null,Kp.current=BI,i=h(N,_)}while(km)}if(Kp.current=Jp,d=hn!==null&&hn.next!==null,Ti=0,kn=hn=Ha=null,Yp=!1,d)throw Error(a(300));return i}function gb(){var i=Sm!==0;return Sm=0,i}function jo(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Ha.memoizedState=kn=i:kn=kn.next=i,kn}function Hs(){if(hn===null){var i=Ha.alternate;i=i!==null?i.memoizedState:null}else i=hn.next;var d=kn===null?Ha.memoizedState:kn.next;if(d!==null)kn=d,hn=i;else{if(i===null)throw Error(a(310));hn=i,i={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},kn===null?Ha.memoizedState=kn=i:kn=kn.next=i}return kn}function Cm(i,d){return typeof d=="function"?d(i):d}function hb(i){var d=Hs(),h=d.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=i;var N=hn,_=N.baseQueue,M=h.pending;if(M!==null){if(_!==null){var X=_.next;_.next=M.next,M.next=X}N.baseQueue=_=M,h.pending=null}if(_!==null){M=_.next,N=N.baseState;var xe=X=null,Ce=null,Ve=M;do{var yt=Ve.lane;if((Ti&yt)===yt)Ce!==null&&(Ce=Ce.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),N=Ve.hasEagerState?Ve.eagerState:i(N,Ve.action);else{var Et={lane:yt,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};Ce===null?(xe=Ce=Et,X=N):Ce=Ce.next=Et,Ha.lanes|=yt,Oi|=yt}Ve=Ve.next}while(Ve!==null&&Ve!==M);Ce===null?X=N:Ce.next=xe,io(N,d.memoizedState)||(gs=!0),d.memoizedState=N,d.baseState=X,d.baseQueue=Ce,h.lastRenderedState=N}if(i=h.interleaved,i!==null){_=i;do M=_.lane,Ha.lanes|=M,Oi|=M,_=_.next;while(_!==i)}else _===null&&(h.lanes=0);return[d.memoizedState,h.dispatch]}function bb(i){var d=Hs(),h=d.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=i;var N=h.dispatch,_=h.pending,M=d.memoizedState;if(_!==null){h.pending=null;var X=_=_.next;do M=i(M,X.action),X=X.next;while(X!==_);io(M,d.memoizedState)||(gs=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),h.lastRenderedState=M}return[M,N]}function qS(){}function US(i,d){var h=Ha,N=Hs(),_=d(),M=!io(N.memoizedState,_);if(M&&(N.memoizedState=_,gs=!0),N=N.queue,xb(WS.bind(null,h,N,i),[i]),N.getSnapshot!==d||M||kn!==null&&kn.memoizedState.tag&1){if(h.flags|=2048,Am(9,HS.bind(null,h,N,_,d),void 0,null),Sn===null)throw Error(a(349));(Ti&30)!==0||VS(h,d,_)}return _}function VS(i,d,h){i.flags|=16384,i={getSnapshot:d,value:h},d=Ha.updateQueue,d===null?(d={lastEffect:null,stores:null},Ha.updateQueue=d,d.stores=[i]):(h=d.stores,h===null?d.stores=[i]:h.push(i))}function HS(i,d,h,N){d.value=h,d.getSnapshot=N,GS(d)&&KS(i)}function WS(i,d,h){return h(function(){GS(d)&&KS(i)})}function GS(i){var d=i.getSnapshot;i=i.value;try{var h=d();return!io(i,h)}catch{return!0}}function KS(i){var d=sl(i,1);d!==null&&fo(d,i,1,-1)}function YS(i){var d=jo();return typeof i=="function"&&(i=i()),d.memoizedState=d.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cm,lastRenderedState:i},d.queue=i,i=i.dispatch=DI.bind(null,Ha,i),[d.memoizedState,i]}function Am(i,d,h,N){return i={tag:i,create:d,destroy:h,deps:N,next:null},d=Ha.updateQueue,d===null?(d={lastEffect:null,stores:null},Ha.updateQueue=d,d.lastEffect=i.next=i):(h=d.lastEffect,h===null?d.lastEffect=i.next=i:(N=h.next,h.next=i,i.next=N,d.lastEffect=i)),i}function XS(){return Hs().memoizedState}function Xp(i,d,h,N){var _=jo();Ha.flags|=i,_.memoizedState=Am(1|d,h,void 0,N===void 0?null:N)}function Qp(i,d,h,N){var _=Hs();N=N===void 0?null:N;var M=void 0;if(hn!==null){var X=hn.memoizedState;if(M=X.destroy,N!==null&&pb(N,X.deps)){_.memoizedState=Am(d,h,M,N);return}}Ha.flags|=i,_.memoizedState=Am(1|d,h,M,N)}function QS(i,d){return Xp(8390656,8,i,d)}function xb(i,d){return Qp(2048,8,i,d)}function JS(i,d){return Qp(4,2,i,d)}function ZS(i,d){return Qp(4,4,i,d)}function e5(i,d){if(typeof d=="function")return i=i(),d(i),function(){d(null)};if(d!=null)return i=i(),d.current=i,function(){d.current=null}}function t5(i,d,h){return h=h!=null?h.concat([i]):null,Qp(4,4,e5.bind(null,d,i),h)}function yb(){}function r5(i,d){var h=Hs();d=d===void 0?null:d;var N=h.memoizedState;return N!==null&&d!==null&&pb(d,N[1])?N[0]:(h.memoizedState=[i,d],i)}function a5(i,d){var h=Hs();d=d===void 0?null:d;var N=h.memoizedState;return N!==null&&d!==null&&pb(d,N[1])?N[0]:(i=i(),h.memoizedState=[i,d],i)}function n5(i,d,h){return(Ti&21)===0?(i.baseState&&(i.baseState=!1,gs=!0),i.memoizedState=h):(io(h,d)||(h=Fe(),Ha.lanes|=h,Oi|=h,i.baseState=!0),d)}function LI(i,d){var h=rt;rt=h!==0&&4>h?h:4,i(!0);var N=ub.transition;ub.transition={};try{i(!1),d()}finally{rt=h,ub.transition=N}}function s5(){return Hs().memoizedState}function II(i,d,h){var N=Xl(i);if(h={lane:N,action:h,hasEagerState:!1,eagerState:null,next:null},o5(i))l5(d,h);else if(h=IS(i,d,h,N),h!==null){var _=ns();fo(h,i,N,_),i5(h,d,N)}}function DI(i,d,h){var N=Xl(i),_={lane:N,action:h,hasEagerState:!1,eagerState:null,next:null};if(o5(i))l5(d,_);else{var M=i.alternate;if(i.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var X=d.lastRenderedState,xe=M(X,h);if(_.hasEagerState=!0,_.eagerState=xe,io(xe,X)){var Ce=d.interleaved;Ce===null?(_.next=_,ob(d)):(_.next=Ce.next,Ce.next=_),d.interleaved=_;return}}catch{}h=IS(i,d,_,N),h!==null&&(_=ns(),fo(h,i,N,_),i5(h,d,N))}}function o5(i){var d=i.alternate;return i===Ha||d!==null&&d===Ha}function l5(i,d){km=Yp=!0;var h=i.pending;h===null?d.next=d:(d.next=h.next,h.next=d),i.pending=d}function i5(i,d,h){if((h&4194240)!==0){var N=d.lanes;N&=i.pendingLanes,h|=N,d.lanes=h,St(i,h)}}var Jp={readContext:Vs,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},FI={readContext:Vs,useCallback:function(i,d){return jo().memoizedState=[i,d===void 0?null:d],i},useContext:Vs,useEffect:QS,useImperativeHandle:function(i,d,h){return h=h!=null?h.concat([i]):null,Xp(4194308,4,e5.bind(null,d,i),h)},useLayoutEffect:function(i,d){return Xp(4194308,4,i,d)},useInsertionEffect:function(i,d){return Xp(4,2,i,d)},useMemo:function(i,d){var h=jo();return d=d===void 0?null:d,i=i(),h.memoizedState=[i,d],i},useReducer:function(i,d,h){var N=jo();return d=h!==void 0?h(d):d,N.memoizedState=N.baseState=d,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},N.queue=i,i=i.dispatch=II.bind(null,Ha,i),[N.memoizedState,i]},useRef:function(i){var d=jo();return i={current:i},d.memoizedState=i},useState:YS,useDebugValue:yb,useDeferredValue:function(i){return jo().memoizedState=i},useTransition:function(){var i=YS(!1),d=i[0];return i=LI.bind(null,i[1]),jo().memoizedState=i,[d,i]},useMutableSource:function(){},useSyncExternalStore:function(i,d,h){var N=Ha,_=jo();if(Fa){if(h===void 0)throw Error(a(407));h=h()}else{if(h=d(),Sn===null)throw Error(a(349));(Ti&30)!==0||VS(N,d,h)}_.memoizedState=h;var M={value:h,getSnapshot:d};return _.queue=M,QS(WS.bind(null,N,M,i),[i]),N.flags|=2048,Am(9,HS.bind(null,N,M,h,d),void 0,null),h},useId:function(){var i=jo(),d=Sn.identifierPrefix;if(Fa){var h=nl,N=al;h=(N&~(1<<32-wr(N)-1)).toString(32)+h,d=":"+d+"R"+h,h=Sm++,0<h&&(d+="H"+h.toString(32)),d+=":"}else h=$I++,d=":"+d+"r"+h.toString(32)+":";return i.memoizedState=d},unstable_isNewReconciler:!1},zI={readContext:Vs,useCallback:r5,useContext:Vs,useEffect:xb,useImperativeHandle:t5,useInsertionEffect:JS,useLayoutEffect:ZS,useMemo:a5,useReducer:hb,useRef:XS,useState:function(){return hb(Cm)},useDebugValue:yb,useDeferredValue:function(i){var d=Hs();return n5(d,hn.memoizedState,i)},useTransition:function(){var i=hb(Cm)[0],d=Hs().memoizedState;return[i,d]},useMutableSource:qS,useSyncExternalStore:US,useId:s5,unstable_isNewReconciler:!1},BI={readContext:Vs,useCallback:r5,useContext:Vs,useEffect:xb,useImperativeHandle:t5,useInsertionEffect:JS,useLayoutEffect:ZS,useMemo:a5,useReducer:bb,useRef:XS,useState:function(){return bb(Cm)},useDebugValue:yb,useDeferredValue:function(i){var d=Hs();return hn===null?d.memoizedState=i:n5(d,hn.memoizedState,i)},useTransition:function(){var i=bb(Cm)[0],d=Hs().memoizedState;return[i,d]},useMutableSource:qS,useSyncExternalStore:US,useId:s5,unstable_isNewReconciler:!1};function mo(i,d){if(i&&i.defaultProps){d=Q({},d),i=i.defaultProps;for(var h in i)d[h]===void 0&&(d[h]=i[h]);return d}return d}function vb(i,d,h,N){d=i.memoizedState,h=h(N,d),h=h==null?d:Q({},d,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Zp={isMounted:function(i){return(i=i._reactInternals)?F(i)===i:!1},enqueueSetState:function(i,d,h){i=i._reactInternals;var N=ns(),_=Xl(i),M=ol(N,_);M.payload=d,h!=null&&(M.callback=h),d=Wl(i,M,_),d!==null&&(fo(d,i,_,N),Hp(d,i,_))},enqueueReplaceState:function(i,d,h){i=i._reactInternals;var N=ns(),_=Xl(i),M=ol(N,_);M.tag=1,M.payload=d,h!=null&&(M.callback=h),d=Wl(i,M,_),d!==null&&(fo(d,i,_,N),Hp(d,i,_))},enqueueForceUpdate:function(i,d){i=i._reactInternals;var h=ns(),N=Xl(i),_=ol(h,N);_.tag=2,d!=null&&(_.callback=d),d=Wl(i,_,N),d!==null&&(fo(d,i,N,h),Hp(d,i,N))}};function c5(i,d,h,N,_,M,X){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(N,M,X):d.prototype&&d.prototype.isPureReactComponent?!pm(h,N)||!pm(_,M):!0}function d5(i,d,h){var N=!1,_=Ul,M=d.contextType;return typeof M=="object"&&M!==null?M=Vs(M):(_=fs(d)?Si:zn.current,N=d.contextTypes,M=(N=N!=null)?Lc(i,_):Ul),d=new d(h,M),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Zp,i.stateNode=d,d._reactInternals=i,N&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_,i.__reactInternalMemoizedMaskedChildContext=M),d}function m5(i,d,h,N){i=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(h,N),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(h,N),d.state!==i&&Zp.enqueueReplaceState(d,d.state,null)}function Eb(i,d,h,N){var _=i.stateNode;_.props=h,_.state=i.memoizedState,_.refs={},lb(i);var M=d.contextType;typeof M=="object"&&M!==null?_.context=Vs(M):(M=fs(d)?Si:zn.current,_.context=Lc(i,M)),_.state=i.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(vb(i,d,M,h),_.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(d=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),d!==_.state&&Zp.enqueueReplaceState(_,_.state,null),Wp(i,h,_,N),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308)}function Vc(i,d){try{var h="",N=d;do h+=ue(N),N=N.return;while(N);var _=h}catch(M){_=`
Error generating stack: `+M.message+`
`+M.stack}return{value:i,source:d,stack:_,digest:null}}function wb(i,d,h){return{value:i,source:null,stack:h??null,digest:d??null}}function Nb(i,d){try{console.error(d.value)}catch(h){setTimeout(function(){throw h})}}var qI=typeof WeakMap=="function"?WeakMap:Map;function u5(i,d,h){h=ol(-1,h),h.tag=3,h.payload={element:null};var N=d.value;return h.callback=function(){o0||(o0=!0,Db=N),Nb(i,d)},h}function p5(i,d,h){h=ol(-1,h),h.tag=3;var N=i.type.getDerivedStateFromError;if(typeof N=="function"){var _=d.value;h.payload=function(){return N(_)},h.callback=function(){Nb(i,d)}}var M=i.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(h.callback=function(){Nb(i,d),typeof N!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var X=d.stack;this.componentDidCatch(d.value,{componentStack:X!==null?X:""})}),h}function f5(i,d,h){var N=i.pingCache;if(N===null){N=i.pingCache=new qI;var _=new Set;N.set(d,_)}else _=N.get(d),_===void 0&&(_=new Set,N.set(d,_));_.has(h)||(_.add(h),i=rD.bind(null,i,d,h),d.then(i,i))}function g5(i){do{var d;if((d=i.tag===13)&&(d=i.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return i;i=i.return}while(i!==null);return null}function h5(i,d,h,N,_){return(i.mode&1)===0?(i===d?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(d=ol(-1,1),d.tag=2,Wl(h,d,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=_,i)}var UI=A.ReactCurrentOwner,gs=!1;function as(i,d,h,N){d.child=i===null?LS(d,null,h,N):zc(d,i.child,h,N)}function b5(i,d,h,N,_){h=h.render;var M=d.ref;return qc(d,_),N=fb(i,d,h,N,M,_),h=gb(),i!==null&&!gs?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~_,ll(i,d,_)):(Fa&&h&&Qh(d),d.flags|=1,as(i,d,N,_),d.child)}function x5(i,d,h,N,_){if(i===null){var M=h.type;return typeof M=="function"&&!Hb(M)&&M.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(d.tag=15,d.type=M,y5(i,d,M,N,_)):(i=u0(h.type,null,N,d,d.mode,_),i.ref=d.ref,i.return=d,d.child=i)}if(M=i.child,(i.lanes&_)===0){var X=M.memoizedProps;if(h=h.compare,h=h!==null?h:pm,h(X,N)&&i.ref===d.ref)return ll(i,d,_)}return d.flags|=1,i=Jl(M,N),i.ref=d.ref,i.return=d,d.child=i}function y5(i,d,h,N,_){if(i!==null){var M=i.memoizedProps;if(pm(M,N)&&i.ref===d.ref)if(gs=!1,d.pendingProps=N=M,(i.lanes&_)!==0)(i.flags&131072)!==0&&(gs=!0);else return d.lanes=i.lanes,ll(i,d,_)}return kb(i,d,h,N,_)}function v5(i,d,h){var N=d.pendingProps,_=N.children,M=i!==null?i.memoizedState:null;if(N.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oa(Wc,Ms),Ms|=h;else{if((h&1073741824)===0)return i=M!==null?M.baseLanes|h:h,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:i,cachePool:null,transitions:null},d.updateQueue=null,Oa(Wc,Ms),Ms|=i,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=M!==null?M.baseLanes:h,Oa(Wc,Ms),Ms|=N}else M!==null?(N=M.baseLanes|h,d.memoizedState=null):N=h,Oa(Wc,Ms),Ms|=N;return as(i,d,_,h),d.child}function E5(i,d){var h=d.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(d.flags|=512,d.flags|=2097152)}function kb(i,d,h,N,_){var M=fs(h)?Si:zn.current;return M=Lc(d,M),qc(d,_),h=fb(i,d,h,N,M,_),N=gb(),i!==null&&!gs?(d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~_,ll(i,d,_)):(Fa&&N&&Qh(d),d.flags|=1,as(i,d,h,_),d.child)}function w5(i,d,h,N,_){if(fs(h)){var M=!0;Ip(d)}else M=!1;if(qc(d,_),d.stateNode===null)t0(i,d),d5(d,h,N),Eb(d,h,N,_),N=!0;else if(i===null){var X=d.stateNode,xe=d.memoizedProps;X.props=xe;var Ce=X.context,Ve=h.contextType;typeof Ve=="object"&&Ve!==null?Ve=Vs(Ve):(Ve=fs(h)?Si:zn.current,Ve=Lc(d,Ve));var yt=h.getDerivedStateFromProps,Et=typeof yt=="function"||typeof X.getSnapshotBeforeUpdate=="function";Et||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(xe!==N||Ce!==Ve)&&m5(d,X,N,Ve),Hl=!1;var bt=d.memoizedState;X.state=bt,Wp(d,N,X,_),Ce=d.memoizedState,xe!==N||bt!==Ce||ps.current||Hl?(typeof yt=="function"&&(vb(d,h,yt,N),Ce=d.memoizedState),(xe=Hl||c5(d,h,xe,N,bt,Ce,Ve))?(Et||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(d.flags|=4194308)):(typeof X.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=N,d.memoizedState=Ce),X.props=N,X.state=Ce,X.context=Ve,N=xe):(typeof X.componentDidMount=="function"&&(d.flags|=4194308),N=!1)}else{X=d.stateNode,DS(i,d),xe=d.memoizedProps,Ve=d.type===d.elementType?xe:mo(d.type,xe),X.props=Ve,Et=d.pendingProps,bt=X.context,Ce=h.contextType,typeof Ce=="object"&&Ce!==null?Ce=Vs(Ce):(Ce=fs(h)?Si:zn.current,Ce=Lc(d,Ce));var Bt=h.getDerivedStateFromProps;(yt=typeof Bt=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(xe!==Et||bt!==Ce)&&m5(d,X,N,Ce),Hl=!1,bt=d.memoizedState,X.state=bt,Wp(d,N,X,_);var Kt=d.memoizedState;xe!==Et||bt!==Kt||ps.current||Hl?(typeof Bt=="function"&&(vb(d,h,Bt,N),Kt=d.memoizedState),(Ve=Hl||c5(d,h,Ve,N,bt,Kt,Ce)||!1)?(yt||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(N,Kt,Ce),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(N,Kt,Ce)),typeof X.componentDidUpdate=="function"&&(d.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof X.componentDidUpdate!="function"||xe===i.memoizedProps&&bt===i.memoizedState||(d.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||xe===i.memoizedProps&&bt===i.memoizedState||(d.flags|=1024),d.memoizedProps=N,d.memoizedState=Kt),X.props=N,X.state=Kt,X.context=Ce,N=Ve):(typeof X.componentDidUpdate!="function"||xe===i.memoizedProps&&bt===i.memoizedState||(d.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||xe===i.memoizedProps&&bt===i.memoizedState||(d.flags|=1024),N=!1)}return Sb(i,d,h,N,M,_)}function Sb(i,d,h,N,_,M){E5(i,d);var X=(d.flags&128)!==0;if(!N&&!X)return _&&AS(d,h,!1),ll(i,d,M);N=d.stateNode,UI.current=d;var xe=X&&typeof h.getDerivedStateFromError!="function"?null:N.render();return d.flags|=1,i!==null&&X?(d.child=zc(d,i.child,null,M),d.child=zc(d,null,xe,M)):as(i,d,xe,M),d.memoizedState=N.state,_&&AS(d,h,!0),d.child}function N5(i){var d=i.stateNode;d.pendingContext?SS(i,d.pendingContext,d.pendingContext!==d.context):d.context&&SS(i,d.context,!1),ib(i,d.containerInfo)}function k5(i,d,h,N,_){return Fc(),tb(_),d.flags|=256,as(i,d,h,N),d.child}var Cb={dehydrated:null,treeContext:null,retryLane:0};function Ab(i){return{baseLanes:i,cachePool:null,transitions:null}}function S5(i,d,h){var N=d.pendingProps,_=Va.current,M=!1,X=(d.flags&128)!==0,xe;if((xe=X)||(xe=i!==null&&i.memoizedState===null?!1:(_&2)!==0),xe?(M=!0,d.flags&=-129):(i===null||i.memoizedState!==null)&&(_|=1),Oa(Va,_&1),i===null)return eb(d),i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((d.mode&1)===0?d.lanes=1:i.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(X=N.children,i=N.fallback,M?(N=d.mode,M=d.child,X={mode:"hidden",children:X},(N&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=X):M=p0(X,N,0,null),i=$i(i,N,h,null),M.return=d,i.return=d,M.sibling=i,d.child=M,d.child.memoizedState=Ab(h),d.memoizedState=Cb,i):_b(d,X));if(_=i.memoizedState,_!==null&&(xe=_.dehydrated,xe!==null))return VI(i,d,X,N,xe,_,h);if(M){M=N.fallback,X=d.mode,_=i.child,xe=_.sibling;var Ce={mode:"hidden",children:N.children};return(X&1)===0&&d.child!==_?(N=d.child,N.childLanes=0,N.pendingProps=Ce,d.deletions=null):(N=Jl(_,Ce),N.subtreeFlags=_.subtreeFlags&14680064),xe!==null?M=Jl(xe,M):(M=$i(M,X,h,null),M.flags|=2),M.return=d,N.return=d,N.sibling=M,d.child=N,N=M,M=d.child,X=i.child.memoizedState,X=X===null?Ab(h):{baseLanes:X.baseLanes|h,cachePool:null,transitions:X.transitions},M.memoizedState=X,M.childLanes=i.childLanes&~h,d.memoizedState=Cb,N}return M=i.child,i=M.sibling,N=Jl(M,{mode:"visible",children:N.children}),(d.mode&1)===0&&(N.lanes=h),N.return=d,N.sibling=null,i!==null&&(h=d.deletions,h===null?(d.deletions=[i],d.flags|=16):h.push(i)),d.child=N,d.memoizedState=null,N}function _b(i,d){return d=p0({mode:"visible",children:d},i.mode,0,null),d.return=i,i.child=d}function e0(i,d,h,N){return N!==null&&tb(N),zc(d,i.child,null,h),i=_b(d,d.pendingProps.children),i.flags|=2,d.memoizedState=null,i}function VI(i,d,h,N,_,M,X){if(h)return d.flags&256?(d.flags&=-257,N=wb(Error(a(422))),e0(i,d,X,N)):d.memoizedState!==null?(d.child=i.child,d.flags|=128,null):(M=N.fallback,_=d.mode,N=p0({mode:"visible",children:N.children},_,0,null),M=$i(M,_,X,null),M.flags|=2,N.return=d,M.return=d,N.sibling=M,d.child=N,(d.mode&1)!==0&&zc(d,i.child,null,X),d.child.memoizedState=Ab(X),d.memoizedState=Cb,M);if((d.mode&1)===0)return e0(i,d,X,null);if(_.data==="$!"){if(N=_.nextSibling&&_.nextSibling.dataset,N)var xe=N.dgst;return N=xe,M=Error(a(419)),N=wb(M,N,void 0),e0(i,d,X,N)}if(xe=(X&i.childLanes)!==0,gs||xe){if(N=Sn,N!==null){switch(X&-X){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(N.suspendedLanes|X))!==0?0:_,_!==0&&_!==M.retryLane&&(M.retryLane=_,sl(i,_),fo(N,i,_,-1))}return Vb(),N=wb(Error(a(421))),e0(i,d,X,N)}return _.data==="$?"?(d.flags|=128,d.child=i.child,d=aD.bind(null,i),_._reactRetry=d,null):(i=M.treeContext,Os=Bl(_.nextSibling),Ts=d,Fa=!0,co=null,i!==null&&(qs[Us++]=al,qs[Us++]=nl,qs[Us++]=Ci,al=i.id,nl=i.overflow,Ci=d),d=_b(d,N.children),d.flags|=4096,d)}function C5(i,d,h){i.lanes|=d;var N=i.alternate;N!==null&&(N.lanes|=d),sb(i.return,d,h)}function Pb(i,d,h,N,_){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:N,tail:h,tailMode:_}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=N,M.tail=h,M.tailMode=_)}function A5(i,d,h){var N=d.pendingProps,_=N.revealOrder,M=N.tail;if(as(i,d,N.children,h),N=Va.current,(N&2)!==0)N=N&1|2,d.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=d.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&C5(i,h,d);else if(i.tag===19)C5(i,h,d);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===d)break e;for(;i.sibling===null;){if(i.return===null||i.return===d)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}N&=1}if(Oa(Va,N),(d.mode&1)===0)d.memoizedState=null;else switch(_){case"forwards":for(h=d.child,_=null;h!==null;)i=h.alternate,i!==null&&Gp(i)===null&&(_=h),h=h.sibling;h=_,h===null?(_=d.child,d.child=null):(_=h.sibling,h.sibling=null),Pb(d,!1,_,h,M);break;case"backwards":for(h=null,_=d.child,d.child=null;_!==null;){if(i=_.alternate,i!==null&&Gp(i)===null){d.child=_;break}i=_.sibling,_.sibling=h,h=_,_=i}Pb(d,!0,h,null,M);break;case"together":Pb(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function t0(i,d){(d.mode&1)===0&&i!==null&&(i.alternate=null,d.alternate=null,d.flags|=2)}function ll(i,d,h){if(i!==null&&(d.dependencies=i.dependencies),Oi|=d.lanes,(h&d.childLanes)===0)return null;if(i!==null&&d.child!==i.child)throw Error(a(153));if(d.child!==null){for(i=d.child,h=Jl(i,i.pendingProps),d.child=h,h.return=d;i.sibling!==null;)i=i.sibling,h=h.sibling=Jl(i,i.pendingProps),h.return=d;h.sibling=null}return d.child}function HI(i,d,h){switch(d.tag){case 3:N5(d),Fc();break;case 5:BS(d);break;case 1:fs(d.type)&&Ip(d);break;case 4:ib(d,d.stateNode.containerInfo);break;case 10:var N=d.type._context,_=d.memoizedProps.value;Oa(Up,N._currentValue),N._currentValue=_;break;case 13:if(N=d.memoizedState,N!==null)return N.dehydrated!==null?(Oa(Va,Va.current&1),d.flags|=128,null):(h&d.child.childLanes)!==0?S5(i,d,h):(Oa(Va,Va.current&1),i=ll(i,d,h),i!==null?i.sibling:null);Oa(Va,Va.current&1);break;case 19:if(N=(h&d.childLanes)!==0,(i.flags&128)!==0){if(N)return A5(i,d,h);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Oa(Va,Va.current),N)break;return null;case 22:case 23:return d.lanes=0,v5(i,d,h)}return ll(i,d,h)}var _5,Tb,P5,T5;_5=function(i,d){for(var h=d.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Tb=function(){},P5=function(i,d,h,N){var _=i.memoizedProps;if(_!==N){i=d.stateNode,Pi(Mo.current);var M=null;switch(h){case"input":_=ve(i,_),N=ve(i,N),M=[];break;case"select":_=Q({},_,{value:void 0}),N=Q({},N,{value:void 0}),M=[];break;case"textarea":_=Tt(i,_),N=Tt(i,N),M=[];break;default:typeof _.onClick!="function"&&typeof N.onClick=="function"&&(i.onclick=Rp)}pt(h,N);var X;h=null;for(Ve in _)if(!N.hasOwnProperty(Ve)&&_.hasOwnProperty(Ve)&&_[Ve]!=null)if(Ve==="style"){var xe=_[Ve];for(X in xe)xe.hasOwnProperty(X)&&(h||(h={}),h[X]="")}else Ve!=="dangerouslySetInnerHTML"&&Ve!=="children"&&Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&Ve!=="autoFocus"&&(s.hasOwnProperty(Ve)?M||(M=[]):(M=M||[]).push(Ve,null));for(Ve in N){var Ce=N[Ve];if(xe=_?.[Ve],N.hasOwnProperty(Ve)&&Ce!==xe&&(Ce!=null||xe!=null))if(Ve==="style")if(xe){for(X in xe)!xe.hasOwnProperty(X)||Ce&&Ce.hasOwnProperty(X)||(h||(h={}),h[X]="");for(X in Ce)Ce.hasOwnProperty(X)&&xe[X]!==Ce[X]&&(h||(h={}),h[X]=Ce[X])}else h||(M||(M=[]),M.push(Ve,h)),h=Ce;else Ve==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,xe=xe?xe.__html:void 0,Ce!=null&&xe!==Ce&&(M=M||[]).push(Ve,Ce)):Ve==="children"?typeof Ce!="string"&&typeof Ce!="number"||(M=M||[]).push(Ve,""+Ce):Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ve)?(Ce!=null&&Ve==="onScroll"&&ja("scroll",i),M||xe===Ce||(M=[])):(M=M||[]).push(Ve,Ce))}h&&(M=M||[]).push("style",h);var Ve=M;(d.updateQueue=Ve)&&(d.flags|=4)}},T5=function(i,d,h,N){h!==N&&(d.flags|=4)};function _m(i,d){if(!Fa)switch(i.tailMode){case"hidden":d=i.tail;for(var h=null;d!==null;)d.alternate!==null&&(h=d),d=d.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var N=null;h!==null;)h.alternate!==null&&(N=h),h=h.sibling;N===null?d||i.tail===null?i.tail=null:i.tail.sibling=null:N.sibling=null}}function qn(i){var d=i.alternate!==null&&i.alternate.child===i.child,h=0,N=0;if(d)for(var _=i.child;_!==null;)h|=_.lanes|_.childLanes,N|=_.subtreeFlags&14680064,N|=_.flags&14680064,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)h|=_.lanes|_.childLanes,N|=_.subtreeFlags,N|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=N,i.childLanes=h,d}function WI(i,d,h){var N=d.pendingProps;switch(Jh(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(d),null;case 1:return fs(d.type)&&Lp(),qn(d),null;case 3:return N=d.stateNode,Uc(),Ra(ps),Ra(zn),mb(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(i===null||i.child===null)&&(Bp(d)?d.flags|=4:i===null||i.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,co!==null&&(Bb(co),co=null))),Tb(i,d),qn(d),null;case 5:cb(d);var _=Pi(Nm.current);if(h=d.type,i!==null&&d.stateNode!=null)P5(i,d,h,N,_),i.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!N){if(d.stateNode===null)throw Error(a(166));return qn(d),null}if(i=Pi(Mo.current),Bp(d)){N=d.stateNode,h=d.type;var M=d.memoizedProps;switch(N[Oo]=d,N[xm]=M,i=(d.mode&1)!==0,h){case"dialog":ja("cancel",N),ja("close",N);break;case"iframe":case"object":case"embed":ja("load",N);break;case"video":case"audio":for(_=0;_<gm.length;_++)ja(gm[_],N);break;case"source":ja("error",N);break;case"img":case"image":case"link":ja("error",N),ja("load",N);break;case"details":ja("toggle",N);break;case"input":be(N,M),ja("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!M.multiple},ja("invalid",N);break;case"textarea":Re(N,M),ja("invalid",N)}pt(h,M),_=null;for(var X in M)if(M.hasOwnProperty(X)){var xe=M[X];X==="children"?typeof xe=="string"?N.textContent!==xe&&(M.suppressHydrationWarning!==!0&&jp(N.textContent,xe,i),_=["children",xe]):typeof xe=="number"&&N.textContent!==""+xe&&(M.suppressHydrationWarning!==!0&&jp(N.textContent,xe,i),_=["children",""+xe]):s.hasOwnProperty(X)&&xe!=null&&X==="onScroll"&&ja("scroll",N)}switch(h){case"input":me(N),je(N,M,!0);break;case"textarea":me(N),gt(N);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(N.onclick=Rp)}N=_,d.updateQueue=N,N!==null&&(d.flags|=4)}else{X=_.nodeType===9?_:_.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ze(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=X.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof N.is=="string"?i=X.createElement(h,{is:N.is}):(i=X.createElement(h),h==="select"&&(X=i,N.multiple?X.multiple=!0:N.size&&(X.size=N.size))):i=X.createElementNS(i,h),i[Oo]=d,i[xm]=N,_5(i,d,!1,!1),d.stateNode=i;e:{switch(X=Le(h,N),h){case"dialog":ja("cancel",i),ja("close",i),_=N;break;case"iframe":case"object":case"embed":ja("load",i),_=N;break;case"video":case"audio":for(_=0;_<gm.length;_++)ja(gm[_],i);_=N;break;case"source":ja("error",i),_=N;break;case"img":case"image":case"link":ja("error",i),ja("load",i),_=N;break;case"details":ja("toggle",i),_=N;break;case"input":be(i,N),_=ve(i,N),ja("invalid",i);break;case"option":_=N;break;case"select":i._wrapperState={wasMultiple:!!N.multiple},_=Q({},N,{value:void 0}),ja("invalid",i);break;case"textarea":Re(i,N),_=Tt(i,N),ja("invalid",i);break;default:_=N}pt(h,_),xe=_;for(M in xe)if(xe.hasOwnProperty(M)){var Ce=xe[M];M==="style"?we(i,Ce):M==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,Ce!=null&&nt(i,Ce)):M==="children"?typeof Ce=="string"?(h!=="textarea"||Ce!=="")&&Me(i,Ce):typeof Ce=="number"&&Me(i,""+Ce):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?Ce!=null&&M==="onScroll"&&ja("scroll",i):Ce!=null&&C(i,M,Ce,X))}switch(h){case"input":me(i),je(i,N,!1);break;case"textarea":me(i),gt(i);break;case"option":N.value!=null&&i.setAttribute("value",""+re(N.value));break;case"select":i.multiple=!!N.multiple,M=N.value,M!=null?He(i,!!N.multiple,M,!1):N.defaultValue!=null&&He(i,!!N.multiple,N.defaultValue,!0);break;default:typeof _.onClick=="function"&&(i.onclick=Rp)}switch(h){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return qn(d),null;case 6:if(i&&d.stateNode!=null)T5(i,d,i.memoizedProps,N);else{if(typeof N!="string"&&d.stateNode===null)throw Error(a(166));if(h=Pi(Nm.current),Pi(Mo.current),Bp(d)){if(N=d.stateNode,h=d.memoizedProps,N[Oo]=d,(M=N.nodeValue!==h)&&(i=Ts,i!==null))switch(i.tag){case 3:jp(N.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&jp(N.nodeValue,h,(i.mode&1)!==0)}M&&(d.flags|=4)}else N=(h.nodeType===9?h:h.ownerDocument).createTextNode(N),N[Oo]=d,d.stateNode=N}return qn(d),null;case 13:if(Ra(Va),N=d.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Fa&&Os!==null&&(d.mode&1)!==0&&(d.flags&128)===0)jS(),Fc(),d.flags|=98560,M=!1;else if(M=Bp(d),N!==null&&N.dehydrated!==null){if(i===null){if(!M)throw Error(a(318));if(M=d.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(a(317));M[Oo]=d}else Fc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qn(d),M=!1}else co!==null&&(Bb(co),co=null),M=!0;if(!M)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=h,d):(N=N!==null,N!==(i!==null&&i.memoizedState!==null)&&N&&(d.child.flags|=8192,(d.mode&1)!==0&&(i===null||(Va.current&1)!==0?bn===0&&(bn=3):Vb())),d.updateQueue!==null&&(d.flags|=4),qn(d),null);case 4:return Uc(),Tb(i,d),i===null&&hm(d.stateNode.containerInfo),qn(d),null;case 10:return nb(d.type._context),qn(d),null;case 17:return fs(d.type)&&Lp(),qn(d),null;case 19:if(Ra(Va),M=d.memoizedState,M===null)return qn(d),null;if(N=(d.flags&128)!==0,X=M.rendering,X===null)if(N)_m(M,!1);else{if(bn!==0||i!==null&&(i.flags&128)!==0)for(i=d.child;i!==null;){if(X=Gp(i),X!==null){for(d.flags|=128,_m(M,!1),N=X.updateQueue,N!==null&&(d.updateQueue=N,d.flags|=4),d.subtreeFlags=0,N=h,h=d.child;h!==null;)M=h,i=N,M.flags&=14680066,X=M.alternate,X===null?(M.childLanes=0,M.lanes=i,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=X.childLanes,M.lanes=X.lanes,M.child=X.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=X.memoizedProps,M.memoizedState=X.memoizedState,M.updateQueue=X.updateQueue,M.type=X.type,i=X.dependencies,M.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return Oa(Va,Va.current&1|2),d.child}i=i.sibling}M.tail!==null&&Te()>Gc&&(d.flags|=128,N=!0,_m(M,!1),d.lanes=4194304)}else{if(!N)if(i=Gp(X),i!==null){if(d.flags|=128,N=!0,h=i.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),_m(M,!0),M.tail===null&&M.tailMode==="hidden"&&!X.alternate&&!Fa)return qn(d),null}else 2*Te()-M.renderingStartTime>Gc&&h!==1073741824&&(d.flags|=128,N=!0,_m(M,!1),d.lanes=4194304);M.isBackwards?(X.sibling=d.child,d.child=X):(h=M.last,h!==null?h.sibling=X:d.child=X,M.last=X)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=Te(),d.sibling=null,h=Va.current,Oa(Va,N?h&1|2:h&1),d):(qn(d),null);case 22:case 23:return Ub(),N=d.memoizedState!==null,i!==null&&i.memoizedState!==null!==N&&(d.flags|=8192),N&&(d.mode&1)!==0?(Ms&1073741824)!==0&&(qn(d),d.subtreeFlags&6&&(d.flags|=8192)):qn(d),null;case 24:return null;case 25:return null}throw Error(a(156,d.tag))}function GI(i,d){switch(Jh(d),d.tag){case 1:return fs(d.type)&&Lp(),i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 3:return Uc(),Ra(ps),Ra(zn),mb(),i=d.flags,(i&65536)!==0&&(i&128)===0?(d.flags=i&-65537|128,d):null;case 5:return cb(d),null;case 13:if(Ra(Va),i=d.memoizedState,i!==null&&i.dehydrated!==null){if(d.alternate===null)throw Error(a(340));Fc()}return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 19:return Ra(Va),null;case 4:return Uc(),null;case 10:return nb(d.type._context),null;case 22:case 23:return Ub(),null;case 24:return null;default:return null}}var r0=!1,Un=!1,KI=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Hc(i,d){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(N){Ya(i,d,N)}else h.current=null}function Ob(i,d,h){try{h()}catch(N){Ya(i,d,N)}}var O5=!1;function YI(i,d){if(Uh=On,i=cS(),$h(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var N=h.getSelection&&h.getSelection();if(N&&N.rangeCount!==0){h=N.anchorNode;var _=N.anchorOffset,M=N.focusNode;N=N.focusOffset;try{h.nodeType,M.nodeType}catch{h=null;break e}var X=0,xe=-1,Ce=-1,Ve=0,yt=0,Et=i,bt=null;t:for(;;){for(var Bt;Et!==h||_!==0&&Et.nodeType!==3||(xe=X+_),Et!==M||N!==0&&Et.nodeType!==3||(Ce=X+N),Et.nodeType===3&&(X+=Et.nodeValue.length),(Bt=Et.firstChild)!==null;)bt=Et,Et=Bt;for(;;){if(Et===i)break t;if(bt===h&&++Ve===_&&(xe=X),bt===M&&++yt===N&&(Ce=X),(Bt=Et.nextSibling)!==null)break;Et=bt,bt=Et.parentNode}Et=Bt}h=xe===-1||Ce===-1?null:{start:xe,end:Ce}}else h=null}h=h||{start:0,end:0}}else h=null;for(Vh={focusedElem:i,selectionRange:h},On=!1,Ht=d;Ht!==null;)if(d=Ht,i=d.child,(d.subtreeFlags&1028)!==0&&i!==null)i.return=d,Ht=i;else for(;Ht!==null;){d=Ht;try{var Kt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Kt!==null){var Qt=Kt.memoizedProps,Ja=Kt.memoizedState,Ie=d.stateNode,Ae=Ie.getSnapshotBeforeUpdate(d.elementType===d.type?Qt:mo(d.type,Qt),Ja);Ie.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var ze=d.stateNode.containerInfo;ze.nodeType===1?ze.textContent="":ze.nodeType===9&&ze.documentElement&&ze.removeChild(ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ct){Ya(d,d.return,Ct)}if(i=d.sibling,i!==null){i.return=d.return,Ht=i;break}Ht=d.return}return Kt=O5,O5=!1,Kt}function Pm(i,d,h){var N=d.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var _=N=N.next;do{if((_.tag&i)===i){var M=_.destroy;_.destroy=void 0,M!==void 0&&Ob(d,h,M)}_=_.next}while(_!==N)}}function a0(i,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&i)===i){var N=h.create;h.destroy=N()}h=h.next}while(h!==d)}}function Mb(i){var d=i.ref;if(d!==null){var h=i.stateNode;i.tag,i=h,typeof d=="function"?d(i):d.current=i}}function M5(i){var d=i.alternate;d!==null&&(i.alternate=null,M5(d)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(d=i.stateNode,d!==null&&(delete d[Oo],delete d[xm],delete d[Kh],delete d[OI],delete d[MI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function j5(i){return i.tag===5||i.tag===3||i.tag===4}function R5(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||j5(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jb(i,d,h){var N=i.tag;if(N===5||N===6)i=i.stateNode,d?h.nodeType===8?h.parentNode.insertBefore(i,d):h.insertBefore(i,d):(h.nodeType===8?(d=h.parentNode,d.insertBefore(i,h)):(d=h,d.appendChild(i)),h=h._reactRootContainer,h!=null||d.onclick!==null||(d.onclick=Rp));else if(N!==4&&(i=i.child,i!==null))for(jb(i,d,h),i=i.sibling;i!==null;)jb(i,d,h),i=i.sibling}function Rb(i,d,h){var N=i.tag;if(N===5||N===6)i=i.stateNode,d?h.insertBefore(i,d):h.appendChild(i);else if(N!==4&&(i=i.child,i!==null))for(Rb(i,d,h),i=i.sibling;i!==null;)Rb(i,d,h),i=i.sibling}var Mn=null,uo=!1;function Gl(i,d,h){for(h=h.child;h!==null;)$5(i,d,h),h=h.sibling}function $5(i,d,h){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Oe,h)}catch{}switch(h.tag){case 5:Un||Hc(h,d);case 6:var N=Mn,_=uo;Mn=null,Gl(i,d,h),Mn=N,uo=_,Mn!==null&&(uo?(i=Mn,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):Mn.removeChild(h.stateNode));break;case 18:Mn!==null&&(uo?(i=Mn,h=h.stateNode,i.nodeType===8?Gh(i.parentNode,h):i.nodeType===1&&Gh(i,h),Ao(i)):Gh(Mn,h.stateNode));break;case 4:N=Mn,_=uo,Mn=h.stateNode.containerInfo,uo=!0,Gl(i,d,h),Mn=N,uo=_;break;case 0:case 11:case 14:case 15:if(!Un&&(N=h.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){_=N=N.next;do{var M=_,X=M.destroy;M=M.tag,X!==void 0&&((M&2)!==0||(M&4)!==0)&&Ob(h,d,X),_=_.next}while(_!==N)}Gl(i,d,h);break;case 1:if(!Un&&(Hc(h,d),N=h.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=h.memoizedProps,N.state=h.memoizedState,N.componentWillUnmount()}catch(xe){Ya(h,d,xe)}Gl(i,d,h);break;case 21:Gl(i,d,h);break;case 22:h.mode&1?(Un=(N=Un)||h.memoizedState!==null,Gl(i,d,h),Un=N):Gl(i,d,h);break;default:Gl(i,d,h)}}function L5(i){var d=i.updateQueue;if(d!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new KI),d.forEach(function(N){var _=nD.bind(null,i,N);h.has(N)||(h.add(N),N.then(_,_))})}}function po(i,d){var h=d.deletions;if(h!==null)for(var N=0;N<h.length;N++){var _=h[N];try{var M=i,X=d,xe=X;e:for(;xe!==null;){switch(xe.tag){case 5:Mn=xe.stateNode,uo=!1;break e;case 3:Mn=xe.stateNode.containerInfo,uo=!0;break e;case 4:Mn=xe.stateNode.containerInfo,uo=!0;break e}xe=xe.return}if(Mn===null)throw Error(a(160));$5(M,X,_),Mn=null,uo=!1;var Ce=_.alternate;Ce!==null&&(Ce.return=null),_.return=null}catch(Ve){Ya(_,d,Ve)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)I5(d,i),d=d.sibling}function I5(i,d){var h=i.alternate,N=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(po(d,i),Ro(i),N&4){try{Pm(3,i,i.return),a0(3,i)}catch(Qt){Ya(i,i.return,Qt)}try{Pm(5,i,i.return)}catch(Qt){Ya(i,i.return,Qt)}}break;case 1:po(d,i),Ro(i),N&512&&h!==null&&Hc(h,h.return);break;case 5:if(po(d,i),Ro(i),N&512&&h!==null&&Hc(h,h.return),i.flags&32){var _=i.stateNode;try{Me(_,"")}catch(Qt){Ya(i,i.return,Qt)}}if(N&4&&(_=i.stateNode,_!=null)){var M=i.memoizedProps,X=h!==null?h.memoizedProps:M,xe=i.type,Ce=i.updateQueue;if(i.updateQueue=null,Ce!==null)try{xe==="input"&&M.type==="radio"&&M.name!=null&&J(_,M),Le(xe,X);var Ve=Le(xe,M);for(X=0;X<Ce.length;X+=2){var yt=Ce[X],Et=Ce[X+1];yt==="style"?we(_,Et):yt==="dangerouslySetInnerHTML"?nt(_,Et):yt==="children"?Me(_,Et):C(_,yt,Et,Ve)}switch(xe){case"input":Ge(_,M);break;case"textarea":et(_,M);break;case"select":var bt=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!M.multiple;var Bt=M.value;Bt!=null?He(_,!!M.multiple,Bt,!1):bt!==!!M.multiple&&(M.defaultValue!=null?He(_,!!M.multiple,M.defaultValue,!0):He(_,!!M.multiple,M.multiple?[]:"",!1))}_[xm]=M}catch(Qt){Ya(i,i.return,Qt)}}break;case 6:if(po(d,i),Ro(i),N&4){if(i.stateNode===null)throw Error(a(162));_=i.stateNode,M=i.memoizedProps;try{_.nodeValue=M}catch(Qt){Ya(i,i.return,Qt)}}break;case 3:if(po(d,i),Ro(i),N&4&&h!==null&&h.memoizedState.isDehydrated)try{Ao(d.containerInfo)}catch(Qt){Ya(i,i.return,Qt)}break;case 4:po(d,i),Ro(i);break;case 13:po(d,i),Ro(i),_=i.child,_.flags&8192&&(M=_.memoizedState!==null,_.stateNode.isHidden=M,!M||_.alternate!==null&&_.alternate.memoizedState!==null||(Ib=Te())),N&4&&L5(i);break;case 22:if(yt=h!==null&&h.memoizedState!==null,i.mode&1?(Un=(Ve=Un)||yt,po(d,i),Un=Ve):po(d,i),Ro(i),N&8192){if(Ve=i.memoizedState!==null,(i.stateNode.isHidden=Ve)&&!yt&&(i.mode&1)!==0)for(Ht=i,yt=i.child;yt!==null;){for(Et=Ht=yt;Ht!==null;){switch(bt=Ht,Bt=bt.child,bt.tag){case 0:case 11:case 14:case 15:Pm(4,bt,bt.return);break;case 1:Hc(bt,bt.return);var Kt=bt.stateNode;if(typeof Kt.componentWillUnmount=="function"){N=bt,h=bt.return;try{d=N,Kt.props=d.memoizedProps,Kt.state=d.memoizedState,Kt.componentWillUnmount()}catch(Qt){Ya(N,h,Qt)}}break;case 5:Hc(bt,bt.return);break;case 22:if(bt.memoizedState!==null){z5(Et);continue}}Bt!==null?(Bt.return=bt,Ht=Bt):z5(Et)}yt=yt.sibling}e:for(yt=null,Et=i;;){if(Et.tag===5){if(yt===null){yt=Et;try{_=Et.stateNode,Ve?(M=_.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(xe=Et.stateNode,Ce=Et.memoizedProps.style,X=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null,xe.style.display=lt("display",X))}catch(Qt){Ya(i,i.return,Qt)}}}else if(Et.tag===6){if(yt===null)try{Et.stateNode.nodeValue=Ve?"":Et.memoizedProps}catch(Qt){Ya(i,i.return,Qt)}}else if((Et.tag!==22&&Et.tag!==23||Et.memoizedState===null||Et===i)&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===i)break e;for(;Et.sibling===null;){if(Et.return===null||Et.return===i)break e;yt===Et&&(yt=null),Et=Et.return}yt===Et&&(yt=null),Et.sibling.return=Et.return,Et=Et.sibling}}break;case 19:po(d,i),Ro(i),N&4&&L5(i);break;case 21:break;default:po(d,i),Ro(i)}}function Ro(i){var d=i.flags;if(d&2){try{e:{for(var h=i.return;h!==null;){if(j5(h)){var N=h;break e}h=h.return}throw Error(a(160))}switch(N.tag){case 5:var _=N.stateNode;N.flags&32&&(Me(_,""),N.flags&=-33);var M=R5(i);Rb(i,M,_);break;case 3:case 4:var X=N.stateNode.containerInfo,xe=R5(i);jb(i,xe,X);break;default:throw Error(a(161))}}catch(Ce){Ya(i,i.return,Ce)}i.flags&=-3}d&4096&&(i.flags&=-4097)}function XI(i,d,h){Ht=i,D5(i)}function D5(i,d,h){for(var N=(i.mode&1)!==0;Ht!==null;){var _=Ht,M=_.child;if(_.tag===22&&N){var X=_.memoizedState!==null||r0;if(!X){var xe=_.alternate,Ce=xe!==null&&xe.memoizedState!==null||Un;xe=r0;var Ve=Un;if(r0=X,(Un=Ce)&&!Ve)for(Ht=_;Ht!==null;)X=Ht,Ce=X.child,X.tag===22&&X.memoizedState!==null?B5(_):Ce!==null?(Ce.return=X,Ht=Ce):B5(_);for(;M!==null;)Ht=M,D5(M),M=M.sibling;Ht=_,r0=xe,Un=Ve}F5(i)}else(_.subtreeFlags&8772)!==0&&M!==null?(M.return=_,Ht=M):F5(i)}}function F5(i){for(;Ht!==null;){var d=Ht;if((d.flags&8772)!==0){var h=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Un||a0(5,d);break;case 1:var N=d.stateNode;if(d.flags&4&&!Un)if(h===null)N.componentDidMount();else{var _=d.elementType===d.type?h.memoizedProps:mo(d.type,h.memoizedProps);N.componentDidUpdate(_,h.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var M=d.updateQueue;M!==null&&zS(d,M,N);break;case 3:var X=d.updateQueue;if(X!==null){if(h=null,d.child!==null)switch(d.child.tag){case 5:h=d.child.stateNode;break;case 1:h=d.child.stateNode}zS(d,X,h)}break;case 5:var xe=d.stateNode;if(h===null&&d.flags&4){h=xe;var Ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Ce.autoFocus&&h.focus();break;case"img":Ce.src&&(h.src=Ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ve=d.alternate;if(Ve!==null){var yt=Ve.memoizedState;if(yt!==null){var Et=yt.dehydrated;Et!==null&&Ao(Et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Un||d.flags&512&&Mb(d)}catch(bt){Ya(d,d.return,bt)}}if(d===i){Ht=null;break}if(h=d.sibling,h!==null){h.return=d.return,Ht=h;break}Ht=d.return}}function z5(i){for(;Ht!==null;){var d=Ht;if(d===i){Ht=null;break}var h=d.sibling;if(h!==null){h.return=d.return,Ht=h;break}Ht=d.return}}function B5(i){for(;Ht!==null;){var d=Ht;try{switch(d.tag){case 0:case 11:case 15:var h=d.return;try{a0(4,d)}catch(Ce){Ya(d,h,Ce)}break;case 1:var N=d.stateNode;if(typeof N.componentDidMount=="function"){var _=d.return;try{N.componentDidMount()}catch(Ce){Ya(d,_,Ce)}}var M=d.return;try{Mb(d)}catch(Ce){Ya(d,M,Ce)}break;case 5:var X=d.return;try{Mb(d)}catch(Ce){Ya(d,X,Ce)}}}catch(Ce){Ya(d,d.return,Ce)}if(d===i){Ht=null;break}var xe=d.sibling;if(xe!==null){xe.return=d.return,Ht=xe;break}Ht=d.return}}var QI=Math.ceil,n0=A.ReactCurrentDispatcher,$b=A.ReactCurrentOwner,Ws=A.ReactCurrentBatchConfig,Zr=0,Sn=null,on=null,jn=0,Ms=0,Wc=ql(0),bn=0,Tm=null,Oi=0,s0=0,Lb=0,Om=null,hs=null,Ib=0,Gc=1/0,il=null,o0=!1,Db=null,Kl=null,l0=!1,Yl=null,i0=0,Mm=0,Fb=null,c0=-1,d0=0;function ns(){return(Zr&6)!==0?Te():c0!==-1?c0:c0=Te()}function Xl(i){return(i.mode&1)===0?1:(Zr&2)!==0&&jn!==0?jn&-jn:RI.transition!==null?(d0===0&&(d0=Fe()),d0):(i=rt,i!==0||(i=window.event,i=i===void 0?16:qe(i.type)),i)}function fo(i,d,h,N){if(50<Mm)throw Mm=0,Fb=null,Error(a(185));Ke(i,h,N),((Zr&2)===0||i!==Sn)&&(i===Sn&&((Zr&2)===0&&(s0|=h),bn===4&&Ql(i,jn)),bs(i,N),h===1&&Zr===0&&(d.mode&1)===0&&(Gc=Te()+500,Dp&&Vl()))}function bs(i,d){var h=i.callbackNode;Pa(i,d);var N=ka(i,i===Sn?jn:0);if(N===0)h!==null&&le(h),i.callbackNode=null,i.callbackPriority=0;else if(d=N&-N,i.callbackPriority!==d){if(h!=null&&le(h),d===1)i.tag===0?jI(U5.bind(null,i)):_S(U5.bind(null,i)),PI(function(){(Zr&6)===0&&Vl()}),h=null;else{switch(_t(N)){case 1:h=Je;break;case 4:h=qt;break;case 16:h=lr;break;case 536870912:h=ra;break;default:h=lr}h=Q5(h,q5.bind(null,i))}i.callbackPriority=d,i.callbackNode=h}}function q5(i,d){if(c0=-1,d0=0,(Zr&6)!==0)throw Error(a(327));var h=i.callbackNode;if(Kc()&&i.callbackNode!==h)return null;var N=ka(i,i===Sn?jn:0);if(N===0)return null;if((N&30)!==0||(N&i.expiredLanes)!==0||d)d=m0(i,N);else{d=N;var _=Zr;Zr|=2;var M=H5();(Sn!==i||jn!==d)&&(il=null,Gc=Te()+500,ji(i,d));do try{eD();break}catch(xe){V5(i,xe)}while(!0);ab(),n0.current=M,Zr=_,on!==null?d=0:(Sn=null,jn=0,d=bn)}if(d!==0){if(d===2&&(_=oo(i),_!==0&&(N=_,d=zb(i,_))),d===1)throw h=Tm,ji(i,0),Ql(i,N),bs(i,Te()),h;if(d===6)Ql(i,N);else{if(_=i.current.alternate,(N&30)===0&&!JI(_)&&(d=m0(i,N),d===2&&(M=oo(i),M!==0&&(N=M,d=zb(i,M))),d===1))throw h=Tm,ji(i,0),Ql(i,N),bs(i,Te()),h;switch(i.finishedWork=_,i.finishedLanes=N,d){case 0:case 1:throw Error(a(345));case 2:Ri(i,hs,il);break;case 3:if(Ql(i,N),(N&130023424)===N&&(d=Ib+500-Te(),10<d)){if(ka(i,0)!==0)break;if(_=i.suspendedLanes,(_&N)!==N){ns(),i.pingedLanes|=i.suspendedLanes&_;break}i.timeoutHandle=Wh(Ri.bind(null,i,hs,il),d);break}Ri(i,hs,il);break;case 4:if(Ql(i,N),(N&4194240)===N)break;for(d=i.eventTimes,_=-1;0<N;){var X=31-wr(N);M=1<<X,X=d[X],X>_&&(_=X),N&=~M}if(N=_,N=Te()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*QI(N/1960))-N,10<N){i.timeoutHandle=Wh(Ri.bind(null,i,hs,il),N);break}Ri(i,hs,il);break;case 5:Ri(i,hs,il);break;default:throw Error(a(329))}}}return bs(i,Te()),i.callbackNode===h?q5.bind(null,i):null}function zb(i,d){var h=Om;return i.current.memoizedState.isDehydrated&&(ji(i,d).flags|=256),i=m0(i,d),i!==2&&(d=hs,hs=h,d!==null&&Bb(d)),i}function Bb(i){hs===null?hs=i:hs.push.apply(hs,i)}function JI(i){for(var d=i;;){if(d.flags&16384){var h=d.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var N=0;N<h.length;N++){var _=h[N],M=_.getSnapshot;_=_.value;try{if(!io(M(),_))return!1}catch{return!1}}}if(h=d.child,d.subtreeFlags&16384&&h!==null)h.return=d,d=h;else{if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ql(i,d){for(d&=~Lb,d&=~s0,i.suspendedLanes|=d,i.pingedLanes&=~d,i=i.expirationTimes;0<d;){var h=31-wr(d),N=1<<h;i[h]=-1,d&=~N}}function U5(i){if((Zr&6)!==0)throw Error(a(327));Kc();var d=ka(i,0);if((d&1)===0)return bs(i,Te()),null;var h=m0(i,d);if(i.tag!==0&&h===2){var N=oo(i);N!==0&&(d=N,h=zb(i,N))}if(h===1)throw h=Tm,ji(i,0),Ql(i,d),bs(i,Te()),h;if(h===6)throw Error(a(345));return i.finishedWork=i.current.alternate,i.finishedLanes=d,Ri(i,hs,il),bs(i,Te()),null}function qb(i,d){var h=Zr;Zr|=1;try{return i(d)}finally{Zr=h,Zr===0&&(Gc=Te()+500,Dp&&Vl())}}function Mi(i){Yl!==null&&Yl.tag===0&&(Zr&6)===0&&Kc();var d=Zr;Zr|=1;var h=Ws.transition,N=rt;try{if(Ws.transition=null,rt=1,i)return i()}finally{rt=N,Ws.transition=h,Zr=d,(Zr&6)===0&&Vl()}}function Ub(){Ms=Wc.current,Ra(Wc)}function ji(i,d){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,_I(h)),on!==null)for(h=on.return;h!==null;){var N=h;switch(Jh(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Lp();break;case 3:Uc(),Ra(ps),Ra(zn),mb();break;case 5:cb(N);break;case 4:Uc();break;case 13:Ra(Va);break;case 19:Ra(Va);break;case 10:nb(N.type._context);break;case 22:case 23:Ub()}h=h.return}if(Sn=i,on=i=Jl(i.current,null),jn=Ms=d,bn=0,Tm=null,Lb=s0=Oi=0,hs=Om=null,_i!==null){for(d=0;d<_i.length;d++)if(h=_i[d],N=h.interleaved,N!==null){h.interleaved=null;var _=N.next,M=h.pending;if(M!==null){var X=M.next;M.next=_,N.next=X}h.pending=N}_i=null}return i}function V5(i,d){do{var h=on;try{if(ab(),Kp.current=Jp,Yp){for(var N=Ha.memoizedState;N!==null;){var _=N.queue;_!==null&&(_.pending=null),N=N.next}Yp=!1}if(Ti=0,kn=hn=Ha=null,km=!1,Sm=0,$b.current=null,h===null||h.return===null){bn=1,Tm=d,on=null;break}e:{var M=i,X=h.return,xe=h,Ce=d;if(d=jn,xe.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Ve=Ce,yt=xe,Et=yt.tag;if((yt.mode&1)===0&&(Et===0||Et===11||Et===15)){var bt=yt.alternate;bt?(yt.updateQueue=bt.updateQueue,yt.memoizedState=bt.memoizedState,yt.lanes=bt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var Bt=g5(X);if(Bt!==null){Bt.flags&=-257,h5(Bt,X,xe,M,d),Bt.mode&1&&f5(M,Ve,d),d=Bt,Ce=Ve;var Kt=d.updateQueue;if(Kt===null){var Qt=new Set;Qt.add(Ce),d.updateQueue=Qt}else Kt.add(Ce);break e}else{if((d&1)===0){f5(M,Ve,d),Vb();break e}Ce=Error(a(426))}}else if(Fa&&xe.mode&1){var Ja=g5(X);if(Ja!==null){(Ja.flags&65536)===0&&(Ja.flags|=256),h5(Ja,X,xe,M,d),tb(Vc(Ce,xe));break e}}M=Ce=Vc(Ce,xe),bn!==4&&(bn=2),Om===null?Om=[M]:Om.push(M),M=X;do{switch(M.tag){case 3:M.flags|=65536,d&=-d,M.lanes|=d;var Ie=u5(M,Ce,d);FS(M,Ie);break e;case 1:xe=Ce;var Ae=M.type,ze=M.stateNode;if((M.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(Kl===null||!Kl.has(ze)))){M.flags|=65536,d&=-d,M.lanes|=d;var Ct=p5(M,xe,d);FS(M,Ct);break e}}M=M.return}while(M!==null)}G5(h)}catch(Jt){d=Jt,on===h&&h!==null&&(on=h=h.return);continue}break}while(!0)}function H5(){var i=n0.current;return n0.current=Jp,i===null?Jp:i}function Vb(){(bn===0||bn===3||bn===2)&&(bn=4),Sn===null||(Oi&268435455)===0&&(s0&268435455)===0||Ql(Sn,jn)}function m0(i,d){var h=Zr;Zr|=2;var N=H5();(Sn!==i||jn!==d)&&(il=null,ji(i,d));do try{ZI();break}catch(_){V5(i,_)}while(!0);if(ab(),Zr=h,n0.current=N,on!==null)throw Error(a(261));return Sn=null,jn=0,bn}function ZI(){for(;on!==null;)W5(on)}function eD(){for(;on!==null&&!_e();)W5(on)}function W5(i){var d=X5(i.alternate,i,Ms);i.memoizedProps=i.pendingProps,d===null?G5(i):on=d,$b.current=null}function G5(i){var d=i;do{var h=d.alternate;if(i=d.return,(d.flags&32768)===0){if(h=WI(h,d,Ms),h!==null){on=h;return}}else{if(h=GI(h,d),h!==null){h.flags&=32767,on=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bn=6,on=null;return}}if(d=d.sibling,d!==null){on=d;return}on=d=i}while(d!==null);bn===0&&(bn=5)}function Ri(i,d,h){var N=rt,_=Ws.transition;try{Ws.transition=null,rt=1,tD(i,d,h,N)}finally{Ws.transition=_,rt=N}return null}function tD(i,d,h,N){do Kc();while(Yl!==null);if((Zr&6)!==0)throw Error(a(327));h=i.finishedWork;var _=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(a(177));i.callbackNode=null,i.callbackPriority=0;var M=h.lanes|h.childLanes;if(st(i,M),i===Sn&&(on=Sn=null,jn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||l0||(l0=!0,Q5(lr,function(){return Kc(),null})),M=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||M){M=Ws.transition,Ws.transition=null;var X=rt;rt=1;var xe=Zr;Zr|=4,$b.current=null,YI(i,h),I5(h,i),EI(Vh),On=!!Uh,Vh=Uh=null,i.current=h,XI(h),Be(),Zr=xe,rt=X,Ws.transition=M}else i.current=h;if(l0&&(l0=!1,Yl=i,i0=_),M=i.pendingLanes,M===0&&(Kl=null),gr(h.stateNode),bs(i,Te()),d!==null)for(N=i.onRecoverableError,h=0;h<d.length;h++)_=d[h],N(_.value,{componentStack:_.stack,digest:_.digest});if(o0)throw o0=!1,i=Db,Db=null,i;return(i0&1)!==0&&i.tag!==0&&Kc(),M=i.pendingLanes,(M&1)!==0?i===Fb?Mm++:(Mm=0,Fb=i):Mm=0,Vl(),null}function Kc(){if(Yl!==null){var i=_t(i0),d=Ws.transition,h=rt;try{if(Ws.transition=null,rt=16>i?16:i,Yl===null)var N=!1;else{if(i=Yl,Yl=null,i0=0,(Zr&6)!==0)throw Error(a(331));var _=Zr;for(Zr|=4,Ht=i.current;Ht!==null;){var M=Ht,X=M.child;if((Ht.flags&16)!==0){var xe=M.deletions;if(xe!==null){for(var Ce=0;Ce<xe.length;Ce++){var Ve=xe[Ce];for(Ht=Ve;Ht!==null;){var yt=Ht;switch(yt.tag){case 0:case 11:case 15:Pm(8,yt,M)}var Et=yt.child;if(Et!==null)Et.return=yt,Ht=Et;else for(;Ht!==null;){yt=Ht;var bt=yt.sibling,Bt=yt.return;if(M5(yt),yt===Ve){Ht=null;break}if(bt!==null){bt.return=Bt,Ht=bt;break}Ht=Bt}}}var Kt=M.alternate;if(Kt!==null){var Qt=Kt.child;if(Qt!==null){Kt.child=null;do{var Ja=Qt.sibling;Qt.sibling=null,Qt=Ja}while(Qt!==null)}}Ht=M}}if((M.subtreeFlags&2064)!==0&&X!==null)X.return=M,Ht=X;else e:for(;Ht!==null;){if(M=Ht,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Pm(9,M,M.return)}var Ie=M.sibling;if(Ie!==null){Ie.return=M.return,Ht=Ie;break e}Ht=M.return}}var Ae=i.current;for(Ht=Ae;Ht!==null;){X=Ht;var ze=X.child;if((X.subtreeFlags&2064)!==0&&ze!==null)ze.return=X,Ht=ze;else e:for(X=Ae;Ht!==null;){if(xe=Ht,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:a0(9,xe)}}catch(Jt){Ya(xe,xe.return,Jt)}if(xe===X){Ht=null;break e}var Ct=xe.sibling;if(Ct!==null){Ct.return=xe.return,Ht=Ct;break e}Ht=xe.return}}if(Zr=_,Vl(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Oe,i)}catch{}N=!0}return N}finally{rt=h,Ws.transition=d}}return!1}function K5(i,d,h){d=Vc(h,d),d=u5(i,d,1),i=Wl(i,d,1),d=ns(),i!==null&&(Ke(i,1,d),bs(i,d))}function Ya(i,d,h){if(i.tag===3)K5(i,i,h);else for(;d!==null;){if(d.tag===3){K5(d,i,h);break}else if(d.tag===1){var N=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Kl===null||!Kl.has(N))){i=Vc(h,i),i=p5(d,i,1),d=Wl(d,i,1),i=ns(),d!==null&&(Ke(d,1,i),bs(d,i));break}}d=d.return}}function rD(i,d,h){var N=i.pingCache;N!==null&&N.delete(d),d=ns(),i.pingedLanes|=i.suspendedLanes&h,Sn===i&&(jn&h)===h&&(bn===4||bn===3&&(jn&130023424)===jn&&500>Te()-Ib?ji(i,0):Lb|=h),bs(i,d)}function Y5(i,d){d===0&&((i.mode&1)===0?d=1:(d=nn,nn<<=1,(nn&130023424)===0&&(nn=4194304)));var h=ns();i=sl(i,d),i!==null&&(Ke(i,d,h),bs(i,h))}function aD(i){var d=i.memoizedState,h=0;d!==null&&(h=d.retryLane),Y5(i,h)}function nD(i,d){var h=0;switch(i.tag){case 13:var N=i.stateNode,_=i.memoizedState;_!==null&&(h=_.retryLane);break;case 19:N=i.stateNode;break;default:throw Error(a(314))}N!==null&&N.delete(d),Y5(i,h)}var X5;X5=function(i,d,h){if(i!==null)if(i.memoizedProps!==d.pendingProps||ps.current)gs=!0;else{if((i.lanes&h)===0&&(d.flags&128)===0)return gs=!1,HI(i,d,h);gs=(i.flags&131072)!==0}else gs=!1,Fa&&(d.flags&1048576)!==0&&PS(d,zp,d.index);switch(d.lanes=0,d.tag){case 2:var N=d.type;t0(i,d),i=d.pendingProps;var _=Lc(d,zn.current);qc(d,h),_=fb(null,d,N,i,_,h);var M=gb();return d.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,fs(N)?(M=!0,Ip(d)):M=!1,d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,lb(d),_.updater=Zp,d.stateNode=_,_._reactInternals=d,Eb(d,N,i,h),d=Sb(null,d,N,!0,M,h)):(d.tag=0,Fa&&M&&Qh(d),as(null,d,_,h),d=d.child),d;case 16:N=d.elementType;e:{switch(t0(i,d),i=d.pendingProps,_=N._init,N=_(N._payload),d.type=N,_=d.tag=oD(N),i=mo(N,i),_){case 0:d=kb(null,d,N,i,h);break e;case 1:d=w5(null,d,N,i,h);break e;case 11:d=b5(null,d,N,i,h);break e;case 14:d=x5(null,d,N,mo(N.type,i),h);break e}throw Error(a(306,N,""))}return d;case 0:return N=d.type,_=d.pendingProps,_=d.elementType===N?_:mo(N,_),kb(i,d,N,_,h);case 1:return N=d.type,_=d.pendingProps,_=d.elementType===N?_:mo(N,_),w5(i,d,N,_,h);case 3:e:{if(N5(d),i===null)throw Error(a(387));N=d.pendingProps,M=d.memoizedState,_=M.element,DS(i,d),Wp(d,N,null,h);var X=d.memoizedState;if(N=X.element,M.isDehydrated)if(M={element:N,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){_=Vc(Error(a(423)),d),d=k5(i,d,N,h,_);break e}else if(N!==_){_=Vc(Error(a(424)),d),d=k5(i,d,N,h,_);break e}else for(Os=Bl(d.stateNode.containerInfo.firstChild),Ts=d,Fa=!0,co=null,h=LS(d,null,N,h),d.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Fc(),N===_){d=ll(i,d,h);break e}as(i,d,N,h)}d=d.child}return d;case 5:return BS(d),i===null&&eb(d),N=d.type,_=d.pendingProps,M=i!==null?i.memoizedProps:null,X=_.children,Hh(N,_)?X=null:M!==null&&Hh(N,M)&&(d.flags|=32),E5(i,d),as(i,d,X,h),d.child;case 6:return i===null&&eb(d),null;case 13:return S5(i,d,h);case 4:return ib(d,d.stateNode.containerInfo),N=d.pendingProps,i===null?d.child=zc(d,null,N,h):as(i,d,N,h),d.child;case 11:return N=d.type,_=d.pendingProps,_=d.elementType===N?_:mo(N,_),b5(i,d,N,_,h);case 7:return as(i,d,d.pendingProps,h),d.child;case 8:return as(i,d,d.pendingProps.children,h),d.child;case 12:return as(i,d,d.pendingProps.children,h),d.child;case 10:e:{if(N=d.type._context,_=d.pendingProps,M=d.memoizedProps,X=_.value,Oa(Up,N._currentValue),N._currentValue=X,M!==null)if(io(M.value,X)){if(M.children===_.children&&!ps.current){d=ll(i,d,h);break e}}else for(M=d.child,M!==null&&(M.return=d);M!==null;){var xe=M.dependencies;if(xe!==null){X=M.child;for(var Ce=xe.firstContext;Ce!==null;){if(Ce.context===N){if(M.tag===1){Ce=ol(-1,h&-h),Ce.tag=2;var Ve=M.updateQueue;if(Ve!==null){Ve=Ve.shared;var yt=Ve.pending;yt===null?Ce.next=Ce:(Ce.next=yt.next,yt.next=Ce),Ve.pending=Ce}}M.lanes|=h,Ce=M.alternate,Ce!==null&&(Ce.lanes|=h),sb(M.return,h,d),xe.lanes|=h;break}Ce=Ce.next}}else if(M.tag===10)X=M.type===d.type?null:M.child;else if(M.tag===18){if(X=M.return,X===null)throw Error(a(341));X.lanes|=h,xe=X.alternate,xe!==null&&(xe.lanes|=h),sb(X,h,d),X=M.sibling}else X=M.child;if(X!==null)X.return=M;else for(X=M;X!==null;){if(X===d){X=null;break}if(M=X.sibling,M!==null){M.return=X.return,X=M;break}X=X.return}M=X}as(i,d,_.children,h),d=d.child}return d;case 9:return _=d.type,N=d.pendingProps.children,qc(d,h),_=Vs(_),N=N(_),d.flags|=1,as(i,d,N,h),d.child;case 14:return N=d.type,_=mo(N,d.pendingProps),_=mo(N.type,_),x5(i,d,N,_,h);case 15:return y5(i,d,d.type,d.pendingProps,h);case 17:return N=d.type,_=d.pendingProps,_=d.elementType===N?_:mo(N,_),t0(i,d),d.tag=1,fs(N)?(i=!0,Ip(d)):i=!1,qc(d,h),d5(d,N,_),Eb(d,N,_,h),Sb(null,d,N,!0,i,h);case 19:return A5(i,d,h);case 22:return v5(i,d,h)}throw Error(a(156,d.tag))};function Q5(i,d){return Z(i,d)}function sD(i,d,h,N){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(i,d,h,N){return new sD(i,d,h,N)}function Hb(i){return i=i.prototype,!(!i||!i.isReactComponent)}function oD(i){if(typeof i=="function")return Hb(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===V)return 14}return 2}function Jl(i,d){var h=i.alternate;return h===null?(h=Gs(i.tag,d,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=d,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,d=i.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function u0(i,d,h,N,_,M){var X=2;if(N=i,typeof i=="function")Hb(i)&&(X=1);else if(typeof i=="string")X=5;else e:switch(i){case T:return $i(h.children,_,M,d);case O:X=8,_|=8;break;case R:return i=Gs(12,h,d,_|2),i.elementType=R,i.lanes=M,i;case K:return i=Gs(13,h,d,_),i.elementType=K,i.lanes=M,i;case H:return i=Gs(19,h,d,_),i.elementType=H,i.lanes=M,i;case Y:return p0(h,_,M,d);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:X=10;break e;case $:X=9;break e;case j:X=11;break e;case V:X=14;break e;case q:X=16,N=null;break e}throw Error(a(130,i==null?i:typeof i,""))}return d=Gs(X,h,d,_),d.elementType=i,d.type=N,d.lanes=M,d}function $i(i,d,h,N){return i=Gs(7,i,N,d),i.lanes=h,i}function p0(i,d,h,N){return i=Gs(22,i,N,d),i.elementType=Y,i.lanes=h,i.stateNode={isHidden:!1},i}function Wb(i,d,h){return i=Gs(6,i,null,d),i.lanes=h,i}function Gb(i,d,h){return d=Gs(4,i.children!==null?i.children:[],i.key,d),d.lanes=h,d.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},d}function lD(i,d,h,N,_){this.tag=d,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$e(0),this.expirationTimes=$e(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.identifierPrefix=N,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Kb(i,d,h,N,_,M,X,xe,Ce){return i=new lD(i,d,h,xe,Ce),d===1?(d=1,M===!0&&(d|=8)):d=0,M=Gs(3,null,null,d),i.current=M,M.stateNode=i,M.memoizedState={element:N,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},lb(M),i}function iD(i,d,h){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:N==null?null:""+N,children:i,containerInfo:d,implementation:h}}function J5(i){if(!i)return Ul;i=i._reactInternals;e:{if(F(i)!==i||i.tag!==1)throw Error(a(170));var d=i;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(fs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(a(171))}if(i.tag===1){var h=i.type;if(fs(h))return CS(i,h,d)}return d}function Z5(i,d,h,N,_,M,X,xe,Ce){return i=Kb(h,N,!0,i,_,M,X,xe,Ce),i.context=J5(null),h=i.current,N=ns(),_=Xl(h),M=ol(N,_),M.callback=d??null,Wl(h,M,_),i.current.lanes=_,Ke(i,_,N),bs(i,N),i}function f0(i,d,h,N){var _=d.current,M=ns(),X=Xl(_);return h=J5(h),d.context===null?d.context=h:d.pendingContext=h,d=ol(M,X),d.payload={element:i},N=N===void 0?null:N,N!==null&&(d.callback=N),i=Wl(_,d,X),i!==null&&(fo(i,_,X,M),Hp(i,_,X)),X}function g0(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function e4(i,d){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<d?h:d}}function Yb(i,d){e4(i,d),(i=i.alternate)&&e4(i,d)}function cD(){return null}var t4=typeof reportError=="function"?reportError:function(i){console.error(i)};function Xb(i){this._internalRoot=i}h0.prototype.render=Xb.prototype.render=function(i){var d=this._internalRoot;if(d===null)throw Error(a(409));f0(i,d,null,null)},h0.prototype.unmount=Xb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var d=i.containerInfo;Mi(function(){f0(null,i,null,null)}),d[tl]=null}};function h0(i){this._internalRoot=i}h0.prototype.unstable_scheduleHydration=function(i){if(i){var d=ur();i={blockedOn:null,target:i,priority:d};for(var h=0;h<Ne.length&&d!==0&&d<Ne[h].priority;h++);Ne.splice(h,0,i),h===0&&jr(i)}};function Qb(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function b0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function r4(){}function dD(i,d,h,N,_){if(_){if(typeof N=="function"){var M=N;N=function(){var Ve=g0(X);M.call(Ve)}}var X=Z5(d,N,i,0,null,!1,!1,"",r4);return i._reactRootContainer=X,i[tl]=X.current,hm(i.nodeType===8?i.parentNode:i),Mi(),X}for(;_=i.lastChild;)i.removeChild(_);if(typeof N=="function"){var xe=N;N=function(){var Ve=g0(Ce);xe.call(Ve)}}var Ce=Kb(i,0,!1,null,null,!1,!1,"",r4);return i._reactRootContainer=Ce,i[tl]=Ce.current,hm(i.nodeType===8?i.parentNode:i),Mi(function(){f0(d,Ce,h,N)}),Ce}function x0(i,d,h,N,_){var M=h._reactRootContainer;if(M){var X=M;if(typeof _=="function"){var xe=_;_=function(){var Ce=g0(X);xe.call(Ce)}}f0(d,X,i,_)}else X=dD(h,d,i,_,N);return g0(X)}Mt=function(i){switch(i.tag){case 3:var d=i.stateNode;if(d.current.memoizedState.isDehydrated){var h=Fr(d.pendingLanes);h!==0&&(St(d,h|1),bs(d,Te()),(Zr&6)===0&&(Gc=Te()+500,Vl()))}break;case 13:Mi(function(){var N=sl(i,1);if(N!==null){var _=ns();fo(N,i,1,_)}}),Yb(i,1)}},hr=function(i){if(i.tag===13){var d=sl(i,134217728);if(d!==null){var h=ns();fo(d,i,134217728,h)}Yb(i,134217728)}},Pt=function(i){if(i.tag===13){var d=Xl(i),h=sl(i,d);if(h!==null){var N=ns();fo(h,i,d,N)}Yb(i,d)}},ur=function(){return rt},aa=function(i,d){var h=rt;try{return rt=i,d()}finally{rt=h}},ft=function(i,d,h){switch(d){case"input":if(Ge(i,h),d=h.name,h.type==="radio"&&d!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<h.length;d++){var N=h[d];if(N!==i&&N.form===i.form){var _=$p(N);if(!_)throw Error(a(90));ne(N),Ge(N,_)}}}break;case"textarea":et(i,h);break;case"select":d=h.value,d!=null&&He(i,!!h.multiple,d,!1)}},sr=qb,Rt=Mi;var mD={usingClientEntryPoint:!1,Events:[ym,Rc,$p,er,Nt,qb]},jm={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uD={bundleType:jm.bundleType,version:jm.version,rendererPackageName:jm.rendererPackageName,rendererConfig:jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=mt(i),i===null?null:i.stateNode},findFiberByHostInstance:jm.findFiberByHostInstance||cD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y0.isDisabled&&y0.supportsFiber)try{Oe=y0.inject(uD),it=y0}catch{}}return xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mD,xs.createPortal=function(i,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qb(d))throw Error(a(200));return iD(i,d,null,h)},xs.createRoot=function(i,d){if(!Qb(i))throw Error(a(299));var h=!1,N="",_=t4;return d!=null&&(d.unstable_strictMode===!0&&(h=!0),d.identifierPrefix!==void 0&&(N=d.identifierPrefix),d.onRecoverableError!==void 0&&(_=d.onRecoverableError)),d=Kb(i,1,!1,null,null,h,!1,N,_),i[tl]=d.current,hm(i.nodeType===8?i.parentNode:i),new Xb(d)},xs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var d=i._reactInternals;if(d===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=mt(d),i=i===null?null:i.stateNode,i},xs.flushSync=function(i){return Mi(i)},xs.hydrate=function(i,d,h){if(!b0(d))throw Error(a(200));return x0(null,i,d,!0,h)},xs.hydrateRoot=function(i,d,h){if(!Qb(i))throw Error(a(405));var N=h!=null&&h.hydratedSources||null,_=!1,M="",X=t4;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(M=h.identifierPrefix),h.onRecoverableError!==void 0&&(X=h.onRecoverableError)),d=Z5(d,null,i,1,h??null,_,!1,M,X),i[tl]=d.current,hm(i),N)for(i=0;i<N.length;i++)h=N[i],_=h._getVersion,_=_(h._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,_]:d.mutableSourceEagerHydrationData.push(h,_);return new h0(d)},xs.render=function(i,d,h){if(!b0(d))throw Error(a(200));return x0(null,i,d,!1,h)},xs.unmountComponentAtNode=function(i){if(!b0(i))throw Error(a(40));return i._reactRootContainer?(Mi(function(){x0(null,null,i,!1,function(){i._reactRootContainer=null,i[tl]=null})}),!0):!1},xs.unstable_batchedUpdates=qb,xs.unstable_renderSubtreeIntoContainer=function(i,d,h,N){if(!b0(h))throw Error(a(200));if(i==null||i._reactInternals===void 0)throw Error(a(38));return x0(i,d,h,!1,N)},xs.version="18.3.1-next-f1338f8080-20240426",xs}var i4;function xM(){if(i4)return Zb.exports;i4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Zb.exports=yD(),Zb.exports}var c4;function vD(){if(c4)return E0;c4=1;var t=xM();return E0.createRoot=t.createRoot,E0.hydrateRoot=t.hydrateRoot,E0}var ED=vD();xM();function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},hu.apply(this,arguments)}var oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(oi||(oi={}));const d4="popstate";function wD(t){t===void 0&&(t={});function r(n,s){let{pathname:o,search:l,hash:c}=n.location;return aN("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(n,s){return typeof s=="string"?s:gf(s)}return kD(r,a,null,t)}function Ka(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function o2(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function ND(){return Math.random().toString(36).substr(2,8)}function m4(t,r){return{usr:t.state,key:t.key,idx:r}}function aN(t,r,a,n){return a===void 0&&(a=null),hu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?Xd(r):r,{state:a,key:r&&r.key||n||ND()})}function gf(t){let{pathname:r="/",search:a="",hash:n=""}=t;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Xd(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substr(a),t=t.substr(0,a));let n=t.indexOf("?");n>=0&&(r.search=t.substr(n),t=t.substr(0,n)),t&&(r.pathname=t)}return r}function kD(t,r,a,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,c=oi.Pop,m=null,p=f();p==null&&(p=0,l.replaceState(hu({},l.state,{idx:p}),""));function f(){return(l.state||{idx:null}).idx}function g(){c=oi.Pop;let y=f(),w=y==null?null:y-p;p=y,m&&m({action:c,location:E.location,delta:w})}function b(y,w){c=oi.Push;let k=aN(E.location,y,w);p=f()+1;let C=m4(k,p),A=E.createHref(k);try{l.pushState(C,"",A)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(A)}o&&m&&m({action:c,location:E.location,delta:1})}function x(y,w){c=oi.Replace;let k=aN(E.location,y,w);p=f();let C=m4(k,p),A=E.createHref(k);l.replaceState(C,"",A),o&&m&&m({action:c,location:E.location,delta:0})}function v(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof y=="string"?y:gf(y);return k=k.replace(/ $/,"%20"),Ka(w,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,w)}let E={get action(){return c},get location(){return t(s,l)},listen(y){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(d4,g),m=y,()=>{s.removeEventListener(d4,g),m=null}},createHref(y){return r(s,y)},createURL:v,encodeLocation(y){let w=v(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:x,go(y){return l.go(y)}};return E}var u4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u4||(u4={}));function SD(t,r,a){return a===void 0&&(a="/"),CD(t,r,a)}function CD(t,r,a,n){let s=typeof r=="string"?Xd(r):r,o=Ed(s.pathname||"/",a);if(o==null)return null;let l=yM(t);AD(l);let c=null;for(let m=0;c==null&&m<l.length;++m){let p=DD(o);c=LD(l[m],p)}return c}function yM(t,r,a,n){r===void 0&&(r=[]),a===void 0&&(a=[]),n===void 0&&(n="");let s=(o,l,c)=>{let m={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};m.relativePath.startsWith("/")&&(Ka(m.relativePath.startsWith(n),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(n.length));let p=di([n,m.relativePath]),f=a.concat(m);o.children&&o.children.length>0&&(Ka(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),yM(o.children,r,f,p)),!(o.path==null&&!o.index)&&r.push({path:p,score:RD(p,o.index),routesMeta:f})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let m of vM(o.path))s(o,l,m)}),r}function vM(t){let r=t.split("/");if(r.length===0)return[];let[a,...n]=r,s=a.endsWith("?"),o=a.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=vM(n.join("/")),c=[];return c.push(...l.map(m=>m===""?o:[o,m].join("/"))),s&&c.push(...l),c.map(m=>t.startsWith("/")&&m===""?"/":m)}function AD(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:$D(r.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const _D=/^:[\w-]+$/,PD=3,TD=2,OD=1,MD=10,jD=-2,p4=t=>t==="*";function RD(t,r){let a=t.split("/"),n=a.length;return a.some(p4)&&(n+=jD),r&&(n+=TD),a.filter(s=>!p4(s)).reduce((s,o)=>s+(_D.test(o)?PD:o===""?OD:MD),n)}function $D(t,r){return t.length===r.length&&t.slice(0,-1).every((n,s)=>n===r[s])?t[t.length-1]-r[r.length-1]:0}function LD(t,r,a){let{routesMeta:n}=t,s={},o="/",l=[];for(let c=0;c<n.length;++c){let m=n[c],p=c===n.length-1,f=o==="/"?r:r.slice(o.length)||"/",g=nN({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},f),b=m.route;if(!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:di([o,g.pathname]),pathnameBase:UD(di([o,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(o=di([o,g.pathnameBase]))}return l}function nN(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,n]=ID(t.path,t.caseSensitive,t.end),s=r.match(a);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((p,f,g)=>{let{paramName:b,isOptional:x}=f;if(b==="*"){let E=c[g]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const v=c[g];return x&&!v?p[b]=void 0:p[b]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function ID(t,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),o2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,m)=>(n.push({paramName:c,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),n]}function DD(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return o2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function Ed(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,n=t.charAt(a);return n&&n!=="/"?null:t.slice(a)||"/"}const FD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zD=t=>FD.test(t);function BD(t,r){r===void 0&&(r="/");let{pathname:a,search:n="",hash:s=""}=typeof t=="string"?Xd(t):t,o;if(a)if(zD(a))o=a;else{if(a.includes("//")){let l=a;a=a.replace(/\/\/+/g,"/"),o2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+a))}a.startsWith("/")?o=f4(a.substring(1),"/"):o=f4(a,r)}else o=r;return{pathname:o,search:VD(n),hash:HD(s)}}function f4(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function rx(t,r,a,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qD(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function l2(t,r){let a=qD(t);return r?a.map((n,s)=>s===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function i2(t,r,a,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Xd(t):(s=hu({},t),Ka(!s.pathname||!s.pathname.includes("?"),rx("?","pathname","search",s)),Ka(!s.pathname||!s.pathname.includes("#"),rx("#","pathname","hash",s)),Ka(!s.search||!s.search.includes("#"),rx("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=a;else{let g=r.length-1;if(!n&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),g-=1;s.pathname=b.join("/")}c=g>=0?r[g]:"/"}let m=BD(s,c),p=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(p||f)&&(m.pathname+="/"),m}const di=t=>t.join("/").replace(/\/\/+/g,"/"),UD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EM=["post","put","patch","delete"];new Set(EM);const GD=["get",...EM];new Set(GD);function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},bu.apply(this,arguments)}const jg=u.createContext(null),wM=u.createContext(null),Rl=u.createContext(null),Rg=u.createContext(null),Qo=u.createContext({outlet:null,matches:[],isDataRoute:!1}),NM=u.createContext(null);function KD(t,r){let{relative:a}=r===void 0?{}:r;Qd()||Ka(!1);let{basename:n,navigator:s}=u.useContext(Rl),{hash:o,pathname:l,search:c}=$g(t,{relative:a}),m=l;return n!=="/"&&(m=l==="/"?n:di([n,l])),s.createHref({pathname:m,search:c,hash:o})}function Qd(){return u.useContext(Rg)!=null}function ts(){return Qd()||Ka(!1),u.useContext(Rg).location}function kM(t){u.useContext(Rl).static||u.useLayoutEffect(t)}function wa(){let{isDataRoute:t}=u.useContext(Qo);return t?c8():YD()}function YD(){Qd()||Ka(!1);let t=u.useContext(jg),{basename:r,future:a,navigator:n}=u.useContext(Rl),{matches:s}=u.useContext(Qo),{pathname:o}=ts(),l=JSON.stringify(l2(s,a.v7_relativeSplatPath)),c=u.useRef(!1);return kM(()=>{c.current=!0}),u.useCallback(function(p,f){if(f===void 0&&(f={}),!c.current)return;if(typeof p=="number"){n.go(p);return}let g=i2(p,JSON.parse(l),o,f.relative==="path");t==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:di([r,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[r,n,l,o,t])}const XD=u.createContext(null);function QD(t){let r=u.useContext(Qo).outlet;return r&&u.createElement(XD.Provider,{value:t},r)}function Jo(){let{matches:t}=u.useContext(Qo),r=t[t.length-1];return r?r.params:{}}function $g(t,r){let{relative:a}=r===void 0?{}:r,{future:n}=u.useContext(Rl),{matches:s}=u.useContext(Qo),{pathname:o}=ts(),l=JSON.stringify(l2(s,n.v7_relativeSplatPath));return u.useMemo(()=>i2(t,JSON.parse(l),o,a==="path"),[t,l,o,a])}function JD(t,r){return ZD(t,r)}function ZD(t,r,a,n){Qd()||Ka(!1);let{navigator:s}=u.useContext(Rl),{matches:o}=u.useContext(Qo),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let m=l?l.pathnameBase:"/";l&&l.route;let p=ts(),f;if(r){var g;let y=typeof r=="string"?Xd(r):r;m==="/"||(g=y.pathname)!=null&&g.startsWith(m)||Ka(!1),f=y}else f=p;let b=f.pathname||"/",x=b;if(m!=="/"){let y=m.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=SD(t,{pathname:x}),E=n8(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:di([m,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?m:di([m,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,a,n);return r&&E?u.createElement(Rg.Provider,{value:{location:bu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:oi.Pop}},E):E}function e8(){let t=i8(),r=WD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},r),a?u.createElement("pre",{style:s},a):null,null)}const t8=u.createElement(e8,null);class r8 extends u.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?u.createElement(Qo.Provider,{value:this.props.routeContext},u.createElement(NM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a8(t){let{routeContext:r,match:a,children:n}=t,s=u.useContext(jg);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(Qo.Provider,{value:r},n)}function n8(t,r,a,n){var s;if(r===void 0&&(r=[]),a===void 0&&(a=null),n===void 0&&(n=null),t==null){var o;if(!a)return null;if(a.errors)t=a.matches;else if((o=n)!=null&&o.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let l=t,c=(s=a)==null?void 0:s.errors;if(c!=null){let f=l.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);f>=0||Ka(!1),l=l.slice(0,Math.min(l.length,f+1))}let m=!1,p=-1;if(a&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let g=l[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=f),g.route.id){let{loaderData:b,errors:x}=a,v=g.route.loader&&b[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||v){m=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((f,g,b)=>{let x,v=!1,E=null,y=null;a&&(x=c&&g.route.id?c[g.route.id]:void 0,E=g.route.errorElement||t8,m&&(p<0&&b===0?(d8("route-fallback"),v=!0,y=null):p===b&&(v=!0,y=g.route.hydrateFallbackElement||null)));let w=r.concat(l.slice(0,b+1)),k=()=>{let C;return x?C=E:v?C=y:g.route.Component?C=u.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=f,u.createElement(a8,{match:g,routeContext:{outlet:f,matches:w,isDataRoute:a!=null},children:C})};return a&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?u.createElement(r8,{location:a.location,revalidation:a.revalidation,component:E,error:x,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}var SM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(SM||{}),CM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(CM||{});function s8(t){let r=u.useContext(jg);return r||Ka(!1),r}function o8(t){let r=u.useContext(wM);return r||Ka(!1),r}function l8(t){let r=u.useContext(Qo);return r||Ka(!1),r}function AM(t){let r=l8(),a=r.matches[r.matches.length-1];return a.route.id||Ka(!1),a.route.id}function i8(){var t;let r=u.useContext(NM),a=o8(),n=AM();return r!==void 0?r:(t=a.errors)==null?void 0:t[n]}function c8(){let{router:t}=s8(SM.UseNavigateStable),r=AM(CM.UseNavigateStable),a=u.useRef(!1);return kM(()=>{a.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),a.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bu({fromRouteId:r},o)))},[t,r])}const g4={};function d8(t,r,a){g4[t]||(g4[t]=!0)}function m8(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function lu(t){let{to:r,replace:a,state:n,relative:s}=t;Qd()||Ka(!1);let{future:o,static:l}=u.useContext(Rl),{matches:c}=u.useContext(Qo),{pathname:m}=ts(),p=wa(),f=i2(r,l2(c,o.v7_relativeSplatPath),m,s==="path"),g=JSON.stringify(f);return u.useEffect(()=>p(JSON.parse(g),{replace:a,state:n,relative:s}),[p,g,s,a,n]),null}function u8(t){return QD(t.context)}function rr(t){Ka(!1)}function p8(t){let{basename:r="/",children:a=null,location:n,navigationType:s=oi.Pop,navigator:o,static:l=!1,future:c}=t;Qd()&&Ka(!1);let m=r.replace(/^\/*/,"/"),p=u.useMemo(()=>({basename:m,navigator:o,static:l,future:bu({v7_relativeSplatPath:!1},c)}),[m,c,o,l]);typeof n=="string"&&(n=Xd(n));let{pathname:f="/",search:g="",hash:b="",state:x=null,key:v="default"}=n,E=u.useMemo(()=>{let y=Ed(f,m);return y==null?null:{location:{pathname:y,search:g,hash:b,state:x,key:v},navigationType:s}},[m,f,g,b,x,v,s]);return E==null?null:u.createElement(Rl.Provider,{value:p},u.createElement(Rg.Provider,{children:a,value:E}))}function f8(t){let{children:r,location:a}=t;return JD(sN(r),a)}new Promise(()=>{});function sN(t,r){r===void 0&&(r=[]);let a=[];return u.Children.forEach(t,(n,s)=>{if(!u.isValidElement(n))return;let o=[...r,s];if(n.type===u.Fragment){a.push.apply(a,sN(n.props.children,o));return}n.type!==rr&&Ka(!1),!n.props.index||!n.props.children||Ka(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=sN(n.props.children,o)),a.push(l)}),a}function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},hf.apply(this,arguments)}function _M(t,r){if(t==null)return{};var a={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(r.indexOf(s)>=0)&&(a[s]=t[s]);return a}function g8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function h8(t,r){return t.button===0&&(!r||r==="_self")&&!g8(t)}function oN(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,a)=>{let n=t[a];return r.concat(Array.isArray(n)?n.map(s=>[a,s]):[[a,n]])},[]))}function b8(t,r){let a=oN(t);return r&&r.forEach((n,s)=>{a.has(s)||r.getAll(s).forEach(o=>{a.append(s,o)})}),a}const x8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y8=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],v8="6";try{window.__reactRouterVersion=v8}catch{}const E8=u.createContext({isTransitioning:!1}),w8="startTransition",h4=hD[w8];function N8(t){let{basename:r,children:a,future:n,window:s}=t,o=u.useRef();o.current==null&&(o.current=wD({window:s,v5Compat:!0}));let l=o.current,[c,m]=u.useState({action:l.action,location:l.location}),{v7_startTransition:p}=n||{},f=u.useCallback(g=>{p&&h4?h4(()=>m(g)):m(g)},[m,p]);return u.useLayoutEffect(()=>l.listen(f),[l,f]),u.useEffect(()=>m8(n),[n]),u.createElement(p8,{basename:r,children:a,location:c.location,navigationType:c.action,navigator:l,future:n})}const k8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=u.forwardRef(function(r,a){let{onClick:n,relative:s,reloadDocument:o,replace:l,state:c,target:m,to:p,preventScrollReset:f,viewTransition:g}=r,b=_M(r,x8),{basename:x}=u.useContext(Rl),v,E=!1;if(typeof p=="string"&&S8.test(p)&&(v=p,k8))try{let C=new URL(window.location.href),A=p.startsWith("//")?new URL(C.protocol+p):new URL(p),S=Ed(A.pathname,x);A.origin===C.origin&&S!=null?p=S+A.search+A.hash:E=!0}catch{}let y=KD(p,{relative:s}),w=A8(p,{replace:l,state:c,target:m,preventScrollReset:f,relative:s,viewTransition:g});function k(C){n&&n(C),C.defaultPrevented||w(C)}return u.createElement("a",hf({},b,{href:v||y,onClick:E||o?n:k,ref:a,target:m}))}),$r=u.forwardRef(function(r,a){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:l=!1,style:c,to:m,viewTransition:p,children:f}=r,g=_M(r,y8),b=$g(m,{relative:g.relative}),x=ts(),v=u.useContext(wM),{navigator:E,basename:y}=u.useContext(Rl),w=v!=null&&_8(b)&&p===!0,k=E.encodeLocation?E.encodeLocation(b).pathname:b.pathname,C=x.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(C=C.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&y&&(A=Ed(A,y)||A);const S=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let P=C===k||!l&&C.startsWith(k)&&C.charAt(S)==="/",T=A!=null&&(A===k||!l&&A.startsWith(k)&&A.charAt(k.length)==="/"),O={isActive:P,isPending:T,isTransitioning:w},R=P?n:void 0,D;typeof o=="function"?D=o(O):D=[o,P?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let $=typeof c=="function"?c(O):c;return u.createElement(ye,hf({},g,{"aria-current":R,className:D,ref:a,style:$,to:m,viewTransition:p}),typeof f=="function"?f(O):f)});var lN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lN||(lN={}));var b4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(b4||(b4={}));function C8(t){let r=u.useContext(jg);return r||Ka(!1),r}function A8(t,r){let{target:a,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:c}=r===void 0?{}:r,m=wa(),p=ts(),f=$g(t,{relative:l});return u.useCallback(g=>{if(h8(g,a)){g.preventDefault();let b=n!==void 0?n:gf(p)===gf(f);m(t,{replace:b,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[p,m,f,n,s,a,t,o,l,c])}function bi(t){let r=u.useRef(oN(t)),a=u.useRef(!1),n=ts(),s=u.useMemo(()=>b8(n.search,a.current?null:r.current),[n.search]),o=wa(),l=u.useCallback((c,m)=>{const p=oN(typeof c=="function"?c(s):c);a.current=!0,o("?"+p,m)},[o,s]);return[s,l]}function _8(t,r){r===void 0&&(r={});let a=u.useContext(E8);a==null&&Ka(!1);let{basename:n}=C8(lN.useViewTransitionState),s=$g(t,{relative:r.relative});if(!a.isTransitioning)return!1;let o=Ed(a.currentLocation.pathname,n)||a.currentLocation.pathname,l=Ed(a.nextLocation.pathname,n)||a.nextLocation.pathname;return nN(s.pathname,l)!=null||nN(s.pathname,o)!=null}function PM(t,r){return function(){return t.apply(r,arguments)}}const{toString:P8}=Object.prototype,{getPrototypeOf:c2}=Object,{iterator:Lg,toStringTag:TM}=Symbol,Ig=(t=>r=>{const a=P8.call(r);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),So=t=>(t=t.toLowerCase(),r=>Ig(r)===t),Dg=t=>r=>typeof r===t,{isArray:Jd}=Array,wd=Dg("undefined");function dp(t){return t!==null&&!wd(t)&&t.constructor!==null&&!wd(t.constructor)&&ks(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const OM=So("ArrayBuffer");function T8(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&OM(t.buffer),r}const O8=Dg("string"),ks=Dg("function"),MM=Dg("number"),mp=t=>t!==null&&typeof t=="object",M8=t=>t===!0||t===!1,rf=t=>{if(Ig(t)!=="object")return!1;const r=c2(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(TM in t)&&!(Lg in t)},j8=t=>{if(!mp(t)||dp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},R8=So("Date"),$8=So("File"),L8=So("Blob"),I8=So("FileList"),D8=t=>mp(t)&&ks(t.pipe),F8=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||ks(t.append)&&((r=Ig(t))==="formdata"||r==="object"&&ks(t.toString)&&t.toString()==="[object FormData]"))},z8=So("URLSearchParams"),[B8,q8,U8,V8]=["ReadableStream","Request","Response","Headers"].map(So),H8=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function up(t,r,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Jd(t))for(n=0,s=t.length;n<s;n++)r.call(null,t[n],n,t);else{if(dp(t))return;const o=a?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let c;for(n=0;n<l;n++)c=o[n],r.call(null,t[c],c,t)}}function jM(t,r){if(dp(t))return null;r=r.toLowerCase();const a=Object.keys(t);let n=a.length,s;for(;n-- >0;)if(s=a[n],r===s.toLowerCase())return s;return null}const Ji=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,RM=t=>!wd(t)&&t!==Ji;function iN(){const{caseless:t,skipUndefined:r}=RM(this)&&this||{},a={},n=(s,o)=>{const l=t&&jM(a,o)||o;rf(a[l])&&rf(s)?a[l]=iN(a[l],s):rf(s)?a[l]=iN({},s):Jd(s)?a[l]=s.slice():(!r||!wd(s))&&(a[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&up(arguments[s],n);return a}const W8=(t,r,a,{allOwnKeys:n}={})=>(up(r,(s,o)=>{a&&ks(s)?t[o]=PM(s,a):t[o]=s},{allOwnKeys:n}),t),G8=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),K8=(t,r,a,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),a&&Object.assign(t.prototype,a)},Y8=(t,r,a,n)=>{let s,o,l;const c={};if(r=r||{},t==null)return r;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)l=s[o],(!n||n(l,t,r))&&!c[l]&&(r[l]=t[l],c[l]=!0);t=a!==!1&&c2(t)}while(t&&(!a||a(t,r))&&t!==Object.prototype);return r},X8=(t,r,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=r.length;const n=t.indexOf(r,a);return n!==-1&&n===a},Q8=t=>{if(!t)return null;if(Jd(t))return t;let r=t.length;if(!MM(r))return null;const a=new Array(r);for(;r-- >0;)a[r]=t[r];return a},J8=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&c2(Uint8Array)),Z8=(t,r)=>{const n=(t&&t[Lg]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;r.call(t,o[0],o[1])}},e9=(t,r)=>{let a;const n=[];for(;(a=t.exec(r))!==null;)n.push(a);return n},t9=So("HTMLFormElement"),r9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,s){return n.toUpperCase()+s}),x4=(({hasOwnProperty:t})=>(r,a)=>t.call(r,a))(Object.prototype),a9=So("RegExp"),$M=(t,r)=>{const a=Object.getOwnPropertyDescriptors(t),n={};up(a,(s,o)=>{let l;(l=r(s,o,t))!==!1&&(n[o]=l||s)}),Object.defineProperties(t,n)},n9=t=>{$M(t,(r,a)=>{if(ks(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=t[a];if(ks(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},s9=(t,r)=>{const a={},n=s=>{s.forEach(o=>{a[o]=!0})};return Jd(t)?n(t):n(String(t).split(r)),a},o9=()=>{},l9=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function i9(t){return!!(t&&ks(t.append)&&t[TM]==="FormData"&&t[Lg])}const c9=t=>{const r=new Array(10),a=(n,s)=>{if(mp(n)){if(r.indexOf(n)>=0)return;if(dp(n))return n;if(!("toJSON"in n)){r[s]=n;const o=Jd(n)?[]:{};return up(n,(l,c)=>{const m=a(l,s+1);!wd(m)&&(o[c]=m)}),r[s]=void 0,o}}return n};return a(t,0)},d9=So("AsyncFunction"),m9=t=>t&&(mp(t)||ks(t))&&ks(t.then)&&ks(t.catch),LM=((t,r)=>t?setImmediate:r?((a,n)=>(Ji.addEventListener("message",({source:s,data:o})=>{s===Ji&&o===a&&n.length&&n.shift()()},!1),s=>{n.push(s),Ji.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ks(Ji.postMessage)),u9=typeof queueMicrotask<"u"?queueMicrotask.bind(Ji):typeof process<"u"&&process.nextTick||LM,p9=t=>t!=null&&ks(t[Lg]),We={isArray:Jd,isArrayBuffer:OM,isBuffer:dp,isFormData:F8,isArrayBufferView:T8,isString:O8,isNumber:MM,isBoolean:M8,isObject:mp,isPlainObject:rf,isEmptyObject:j8,isReadableStream:B8,isRequest:q8,isResponse:U8,isHeaders:V8,isUndefined:wd,isDate:R8,isFile:$8,isBlob:L8,isRegExp:a9,isFunction:ks,isStream:D8,isURLSearchParams:z8,isTypedArray:J8,isFileList:I8,forEach:up,merge:iN,extend:W8,trim:H8,stripBOM:G8,inherits:K8,toFlatObject:Y8,kindOf:Ig,kindOfTest:So,endsWith:X8,toArray:Q8,forEachEntry:Z8,matchAll:e9,isHTMLForm:t9,hasOwnProperty:x4,hasOwnProp:x4,reduceDescriptors:$M,freezeMethods:n9,toObjectSet:s9,toCamelCase:r9,noop:o9,toFiniteNumber:l9,findKey:jM,global:Ji,isContextDefined:RM,isSpecCompliantForm:i9,toJSONObject:c9,isAsyncFn:d9,isThenable:m9,setImmediate:LM,asap:u9,isIterable:p9};function _r(t,r,a,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),a&&(this.config=a),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}We.inherits(_r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:We.toJSONObject(this.config),code:this.code,status:this.status}}});const IM=_r.prototype,DM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{DM[t]={value:t}});Object.defineProperties(_r,DM);Object.defineProperty(IM,"isAxiosError",{value:!0});_r.from=(t,r,a,n,s,o)=>{const l=Object.create(IM);We.toFlatObject(t,l,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const c=t&&t.message?t.message:"Error",m=r==null&&t?t.code:r;return _r.call(l,c,m,a,n,s),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",o&&Object.assign(l,o),l};const f9=null;function cN(t){return We.isPlainObject(t)||We.isArray(t)}function FM(t){return We.endsWith(t,"[]")?t.slice(0,-2):t}function y4(t,r,a){return t?t.concat(r).map(function(s,o){return s=FM(s),!a&&o?"["+s+"]":s}).join(a?".":""):r}function g9(t){return We.isArray(t)&&!t.some(cN)}const h9=We.toFlatObject(We,{},null,function(r){return/^is[A-Z]/.test(r)});function Fg(t,r,a){if(!We.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,a=We.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,y){return!We.isUndefined(y[E])});const n=a.metaTokens,s=a.visitor||f,o=a.dots,l=a.indexes,m=(a.Blob||typeof Blob<"u"&&Blob)&&We.isSpecCompliantForm(r);if(!We.isFunction(s))throw new TypeError("visitor must be a function");function p(v){if(v===null)return"";if(We.isDate(v))return v.toISOString();if(We.isBoolean(v))return v.toString();if(!m&&We.isBlob(v))throw new _r("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(v)||We.isTypedArray(v)?m&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,E,y){let w=v;if(v&&!y&&typeof v=="object"){if(We.endsWith(E,"{}"))E=n?E:E.slice(0,-2),v=JSON.stringify(v);else if(We.isArray(v)&&g9(v)||(We.isFileList(v)||We.endsWith(E,"[]"))&&(w=We.toArray(v)))return E=FM(E),w.forEach(function(C,A){!(We.isUndefined(C)||C===null)&&r.append(l===!0?y4([E],A,o):l===null?E:E+"[]",p(C))}),!1}return cN(v)?!0:(r.append(y4(y,E,o),p(v)),!1)}const g=[],b=Object.assign(h9,{defaultVisitor:f,convertValue:p,isVisitable:cN});function x(v,E){if(!We.isUndefined(v)){if(g.indexOf(v)!==-1)throw Error("Circular reference detected in "+E.join("."));g.push(v),We.forEach(v,function(w,k){(!(We.isUndefined(w)||w===null)&&s.call(r,w,We.isString(k)?k.trim():k,E,b))===!0&&x(w,E?E.concat(k):[k])}),g.pop()}}if(!We.isObject(t))throw new TypeError("data must be an object");return x(t),r}function v4(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function d2(t,r){this._pairs=[],t&&Fg(t,this,r)}const zM=d2.prototype;zM.append=function(r,a){this._pairs.push([r,a])};zM.toString=function(r){const a=r?function(n){return r.call(this,n,v4)}:v4;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function b9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function BM(t,r,a){if(!r)return t;const n=a&&a.encode||b9;We.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let o;if(s?o=s(r,a):o=We.isURLSearchParams(r)?r.toString():new d2(r,a).toString(n),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class E4{constructor(){this.handlers=[]}use(r,a,n){return this.handlers.push({fulfilled:r,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){We.forEach(this.handlers,function(n){n!==null&&r(n)})}}const qM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},x9=typeof URLSearchParams<"u"?URLSearchParams:d2,y9=typeof FormData<"u"?FormData:null,v9=typeof Blob<"u"?Blob:null,E9={isBrowser:!0,classes:{URLSearchParams:x9,FormData:y9,Blob:v9},protocols:["http","https","file","blob","url","data"]},m2=typeof window<"u"&&typeof document<"u",dN=typeof navigator=="object"&&navigator||void 0,w9=m2&&(!dN||["ReactNative","NativeScript","NS"].indexOf(dN.product)<0),N9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",k9=m2&&window.location.href||"http://localhost",S9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:m2,hasStandardBrowserEnv:w9,hasStandardBrowserWebWorkerEnv:N9,navigator:dN,origin:k9},Symbol.toStringTag,{value:"Module"})),Qn={...S9,...E9};function C9(t,r){return Fg(t,new Qn.classes.URLSearchParams,{visitor:function(a,n,s,o){return Qn.isNode&&We.isBuffer(a)?(this.append(n,a.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...r})}function A9(t){return We.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function _9(t){const r={},a=Object.keys(t);let n;const s=a.length;let o;for(n=0;n<s;n++)o=a[n],r[o]=t[o];return r}function UM(t){function r(a,n,s,o){let l=a[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),m=o>=a.length;return l=!l&&We.isArray(s)?s.length:l,m?(We.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!c):((!s[l]||!We.isObject(s[l]))&&(s[l]=[]),r(a,n,s[l],o)&&We.isArray(s[l])&&(s[l]=_9(s[l])),!c)}if(We.isFormData(t)&&We.isFunction(t.entries)){const a={};return We.forEachEntry(t,(n,s)=>{r(A9(n),s,a,0)}),a}return null}function P9(t,r,a){if(We.isString(t))try{return(r||JSON.parse)(t),We.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(t)}const pp={transitional:qM,adapter:["xhr","http","fetch"],transformRequest:[function(r,a){const n=a.getContentType()||"",s=n.indexOf("application/json")>-1,o=We.isObject(r);if(o&&We.isHTMLForm(r)&&(r=new FormData(r)),We.isFormData(r))return s?JSON.stringify(UM(r)):r;if(We.isArrayBuffer(r)||We.isBuffer(r)||We.isStream(r)||We.isFile(r)||We.isBlob(r)||We.isReadableStream(r))return r;if(We.isArrayBufferView(r))return r.buffer;if(We.isURLSearchParams(r))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return C9(r,this.formSerializer).toString();if((c=We.isFileList(r))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Fg(c?{"files[]":r}:r,m&&new m,this.formSerializer)}}return o||s?(a.setContentType("application/json",!1),P9(r)):r}],transformResponse:[function(r){const a=this.transitional||pp.transitional,n=a&&a.forcedJSONParsing,s=this.responseType==="json";if(We.isResponse(r)||We.isReadableStream(r))return r;if(r&&We.isString(r)&&(n&&!this.responseType||s)){const l=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(r,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?_r.from(c,_r.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qn.classes.FormData,Blob:Qn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};We.forEach(["delete","get","head","post","put","patch"],t=>{pp.headers[t]={}});const T9=We.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),O9=t=>{const r={};let a,n,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),a=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!a||r[a]&&T9[a])&&(a==="set-cookie"?r[a]?r[a].push(n):r[a]=[n]:r[a]=r[a]?r[a]+", "+n:n)}),r},w4=Symbol("internals");function Rm(t){return t&&String(t).trim().toLowerCase()}function af(t){return t===!1||t==null?t:We.isArray(t)?t.map(af):String(t)}function M9(t){const r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(t);)r[n[1]]=n[2];return r}const j9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ax(t,r,a,n,s){if(We.isFunction(n))return n.call(this,r,a);if(s&&(r=a),!!We.isString(r)){if(We.isString(n))return r.indexOf(n)!==-1;if(We.isRegExp(n))return n.test(r)}}function R9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,a,n)=>a.toUpperCase()+n)}function $9(t,r){const a=We.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+a,{value:function(s,o,l){return this[n].call(this,r,s,o,l)},configurable:!0})})}let Ss=class{constructor(r){r&&this.set(r)}set(r,a,n){const s=this;function o(c,m,p){const f=Rm(m);if(!f)throw new Error("header name must be a non-empty string");const g=We.findKey(s,f);(!g||s[g]===void 0||p===!0||p===void 0&&s[g]!==!1)&&(s[g||m]=af(c))}const l=(c,m)=>We.forEach(c,(p,f)=>o(p,f,m));if(We.isPlainObject(r)||r instanceof this.constructor)l(r,a);else if(We.isString(r)&&(r=r.trim())&&!j9(r))l(O9(r),a);else if(We.isObject(r)&&We.isIterable(r)){let c={},m,p;for(const f of r){if(!We.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[p=f[0]]=(m=c[p])?We.isArray(m)?[...m,f[1]]:[m,f[1]]:f[1]}l(c,a)}else r!=null&&o(a,r,n);return this}get(r,a){if(r=Rm(r),r){const n=We.findKey(this,r);if(n){const s=this[n];if(!a)return s;if(a===!0)return M9(s);if(We.isFunction(a))return a.call(this,s,n);if(We.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,a){if(r=Rm(r),r){const n=We.findKey(this,r);return!!(n&&this[n]!==void 0&&(!a||ax(this,this[n],n,a)))}return!1}delete(r,a){const n=this;let s=!1;function o(l){if(l=Rm(l),l){const c=We.findKey(n,l);c&&(!a||ax(n,n[c],c,a))&&(delete n[c],s=!0)}}return We.isArray(r)?r.forEach(o):o(r),s}clear(r){const a=Object.keys(this);let n=a.length,s=!1;for(;n--;){const o=a[n];(!r||ax(this,this[o],o,r,!0))&&(delete this[o],s=!0)}return s}normalize(r){const a=this,n={};return We.forEach(this,(s,o)=>{const l=We.findKey(n,o);if(l){a[l]=af(s),delete a[o];return}const c=r?R9(o):String(o).trim();c!==o&&delete a[o],a[c]=af(s),n[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const a=Object.create(null);return We.forEach(this,(n,s)=>{n!=null&&n!==!1&&(a[s]=r&&We.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,a])=>r+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...a){const n=new this(r);return a.forEach(s=>n.set(s)),n}static accessor(r){const n=(this[w4]=this[w4]={accessors:{}}).accessors,s=this.prototype;function o(l){const c=Rm(l);n[c]||($9(s,l),n[c]=!0)}return We.isArray(r)?r.forEach(o):o(r),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);We.reduceDescriptors(Ss.prototype,({value:t},r)=>{let a=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[a]=n}}});We.freezeMethods(Ss);function nx(t,r){const a=this||pp,n=r||a,s=Ss.from(n.headers);let o=n.data;return We.forEach(t,function(c){o=c.call(a,o,s.normalize(),r?r.status:void 0)}),s.normalize(),o}function VM(t){return!!(t&&t.__CANCEL__)}function Zd(t,r,a){_r.call(this,t??"canceled",_r.ERR_CANCELED,r,a),this.name="CanceledError"}We.inherits(Zd,_r,{__CANCEL__:!0});function HM(t,r,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?t(a):r(new _r("Request failed with status code "+a.status,[_r.ERR_BAD_REQUEST,_r.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function L9(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function I9(t,r){t=t||10;const a=new Array(t),n=new Array(t);let s=0,o=0,l;return r=r!==void 0?r:1e3,function(m){const p=Date.now(),f=n[o];l||(l=p),a[s]=m,n[s]=p;let g=o,b=0;for(;g!==s;)b+=a[g++],g=g%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),p-l<r)return;const x=f&&p-f;return x?Math.round(b*1e3/x):void 0}}function D9(t,r){let a=0,n=1e3/r,s,o;const l=(p,f=Date.now())=>{a=f,s=null,o&&(clearTimeout(o),o=null),t(...p)};return[(...p)=>{const f=Date.now(),g=f-a;g>=n?l(p,f):(s=p,o||(o=setTimeout(()=>{o=null,l(s)},n-g)))},()=>s&&l(s)]}const bf=(t,r,a=3)=>{let n=0;const s=I9(50,250);return D9(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,m=l-n,p=s(m),f=l<=c;n=l;const g={loaded:l,total:c,progress:c?l/c:void 0,bytes:m,rate:p||void 0,estimated:p&&c&&f?(c-l)/p:void 0,event:o,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(g)},a)},N4=(t,r)=>{const a=t!=null;return[n=>r[0]({lengthComputable:a,total:t,loaded:n}),r[1]]},k4=t=>(...r)=>We.asap(()=>t(...r)),F9=Qn.hasStandardBrowserEnv?((t,r)=>a=>(a=new URL(a,Qn.origin),t.protocol===a.protocol&&t.host===a.host&&(r||t.port===a.port)))(new URL(Qn.origin),Qn.navigator&&/(msie|trident)/i.test(Qn.navigator.userAgent)):()=>!0,z9=Qn.hasStandardBrowserEnv?{write(t,r,a,n,s,o,l){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(r)}`];We.isNumber(a)&&c.push(`expires=${new Date(a).toUTCString()}`),We.isString(n)&&c.push(`path=${n}`),We.isString(s)&&c.push(`domain=${s}`),o===!0&&c.push("secure"),We.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function B9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function q9(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function WM(t,r,a){let n=!B9(r);return t&&(n||a==!1)?q9(t,r):r}const S4=t=>t instanceof Ss?{...t}:t;function cc(t,r){r=r||{};const a={};function n(p,f,g,b){return We.isPlainObject(p)&&We.isPlainObject(f)?We.merge.call({caseless:b},p,f):We.isPlainObject(f)?We.merge({},f):We.isArray(f)?f.slice():f}function s(p,f,g,b){if(We.isUndefined(f)){if(!We.isUndefined(p))return n(void 0,p,g,b)}else return n(p,f,g,b)}function o(p,f){if(!We.isUndefined(f))return n(void 0,f)}function l(p,f){if(We.isUndefined(f)){if(!We.isUndefined(p))return n(void 0,p)}else return n(void 0,f)}function c(p,f,g){if(g in r)return n(p,f);if(g in t)return n(void 0,p)}const m={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(p,f,g)=>s(S4(p),S4(f),g,!0)};return We.forEach(Object.keys({...t,...r}),function(f){const g=m[f]||s,b=g(t[f],r[f],f);We.isUndefined(b)&&g!==c||(a[f]=b)}),a}const GM=t=>{const r=cc({},t);let{data:a,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:c}=r;if(r.headers=l=Ss.from(l),r.url=BM(WM(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),We.isFormData(a)){if(Qn.hasStandardBrowserEnv||Qn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(We.isFunction(a.getHeaders)){const m=a.getHeaders(),p=["content-type","content-length"];Object.entries(m).forEach(([f,g])=>{p.includes(f.toLowerCase())&&l.set(f,g)})}}if(Qn.hasStandardBrowserEnv&&(n&&We.isFunction(n)&&(n=n(r)),n||n!==!1&&F9(r.url))){const m=s&&o&&z9.read(o);m&&l.set(s,m)}return r},U9=typeof XMLHttpRequest<"u",V9=U9&&function(t){return new Promise(function(a,n){const s=GM(t);let o=s.data;const l=Ss.from(s.headers).normalize();let{responseType:c,onUploadProgress:m,onDownloadProgress:p}=s,f,g,b,x,v;function E(){x&&x(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function w(){if(!y)return;const C=Ss.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:C,config:t,request:y};HM(function(T){a(T),E()},function(T){n(T),E()},S),y=null}"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(n(new _r("Request aborted",_r.ECONNABORTED,t,y)),y=null)},y.onerror=function(A){const S=A&&A.message?A.message:"Network Error",P=new _r(S,_r.ERR_NETWORK,t,y);P.event=A||null,n(P),y=null},y.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||qM;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),n(new _r(A,S.clarifyTimeoutError?_r.ETIMEDOUT:_r.ECONNABORTED,t,y)),y=null},o===void 0&&l.setContentType(null),"setRequestHeader"in y&&We.forEach(l.toJSON(),function(A,S){y.setRequestHeader(S,A)}),We.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),c&&c!=="json"&&(y.responseType=s.responseType),p&&([b,v]=bf(p,!0),y.addEventListener("progress",b)),m&&y.upload&&([g,x]=bf(m),y.upload.addEventListener("progress",g),y.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(f=C=>{y&&(n(!C||C.type?new Zd(null,t,y):C),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const k=L9(s.url);if(k&&Qn.protocols.indexOf(k)===-1){n(new _r("Unsupported protocol "+k+":",_r.ERR_BAD_REQUEST,t));return}y.send(o||null)})},H9=(t,r)=>{const{length:a}=t=t?t.filter(Boolean):[];if(r||a){let n=new AbortController,s;const o=function(p){if(!s){s=!0,c();const f=p instanceof Error?p:this.reason;n.abort(f instanceof _r?f:new Zd(f instanceof Error?f.message:f))}};let l=r&&setTimeout(()=>{l=null,o(new _r(`timeout ${r} of ms exceeded`,_r.ETIMEDOUT))},r);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),t=null)};t.forEach(p=>p.addEventListener("abort",o));const{signal:m}=n;return m.unsubscribe=()=>We.asap(c),m}},W9=function*(t,r){let a=t.byteLength;if(a<r){yield t;return}let n=0,s;for(;n<a;)s=n+r,yield t.slice(n,s),n=s},G9=async function*(t,r){for await(const a of K9(t))yield*W9(a,r)},K9=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:a,value:n}=await r.read();if(a)break;yield n}}finally{await r.cancel()}},C4=(t,r,a,n)=>{const s=G9(t,r);let o=0,l,c=m=>{l||(l=!0,n&&n(m))};return new ReadableStream({async pull(m){try{const{done:p,value:f}=await s.next();if(p){c(),m.close();return}let g=f.byteLength;if(a){let b=o+=g;a(b)}m.enqueue(new Uint8Array(f))}catch(p){throw c(p),p}},cancel(m){return c(m),s.return()}},{highWaterMark:2})},A4=64*1024,{isFunction:w0}=We,Y9=(({Request:t,Response:r})=>({Request:t,Response:r}))(We.global),{ReadableStream:_4,TextEncoder:P4}=We.global,T4=(t,...r)=>{try{return!!t(...r)}catch{return!1}},X9=t=>{t=We.merge.call({skipUndefined:!0},Y9,t);const{fetch:r,Request:a,Response:n}=t,s=r?w0(r):typeof fetch=="function",o=w0(a),l=w0(n);if(!s)return!1;const c=s&&w0(_4),m=s&&(typeof P4=="function"?(v=>E=>v.encode(E))(new P4):async v=>new Uint8Array(await new a(v).arrayBuffer())),p=o&&c&&T4(()=>{let v=!1;const E=new a(Qn.origin,{body:new _4,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!E}),f=l&&c&&T4(()=>We.isReadableStream(new n("").body)),g={stream:f&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!g[v]&&(g[v]=(E,y)=>{let w=E&&E[v];if(w)return w.call(E);throw new _r(`Response type '${v}' is not supported`,_r.ERR_NOT_SUPPORT,y)})});const b=async v=>{if(v==null)return 0;if(We.isBlob(v))return v.size;if(We.isSpecCompliantForm(v))return(await new a(Qn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(We.isArrayBufferView(v)||We.isArrayBuffer(v))return v.byteLength;if(We.isURLSearchParams(v)&&(v=v+""),We.isString(v))return(await m(v)).byteLength},x=async(v,E)=>{const y=We.toFiniteNumber(v.getContentLength());return y??b(E)};return async v=>{let{url:E,method:y,data:w,signal:k,cancelToken:C,timeout:A,onDownloadProgress:S,onUploadProgress:P,responseType:T,headers:O,withCredentials:R="same-origin",fetchOptions:D}=GM(v),$=r||fetch;T=T?(T+"").toLowerCase():"text";let j=H9([k,C&&C.toAbortSignal()],A),K=null;const H=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let V;try{if(P&&p&&y!=="get"&&y!=="head"&&(V=await x(O,w))!==0){let B=new a(E,{method:"POST",body:w,duplex:"half"}),ae;if(We.isFormData(w)&&(ae=B.headers.get("content-type"))&&O.setContentType(ae),B.body){const[te,ge]=N4(V,bf(k4(P)));w=C4(B.body,A4,te,ge)}}We.isString(R)||(R=R?"include":"omit");const q=o&&"credentials"in a.prototype,Y={...D,signal:j,method:y.toUpperCase(),headers:O.normalize().toJSON(),body:w,duplex:"half",credentials:q?R:void 0};K=o&&new a(E,Y);let z=await(o?$(K,D):$(E,Y));const L=f&&(T==="stream"||T==="response");if(f&&(S||L&&H)){const B={};["status","statusText","headers"].forEach(ue=>{B[ue]=z[ue]});const ae=We.toFiniteNumber(z.headers.get("content-length")),[te,ge]=S&&N4(ae,bf(k4(S),!0))||[];z=new n(C4(z.body,A4,te,()=>{ge&&ge(),H&&H()}),B)}T=T||"text";let Q=await g[We.findKey(g,T)||"text"](z,v);return!L&&H&&H(),await new Promise((B,ae)=>{HM(B,ae,{data:Q,headers:Ss.from(z.headers),status:z.status,statusText:z.statusText,config:v,request:K})})}catch(q){throw H&&H(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new _r("Network Error",_r.ERR_NETWORK,v,K),{cause:q.cause||q}):_r.from(q,q&&q.code,v,K)}}},Q9=new Map,KM=t=>{let r=t&&t.env||{};const{fetch:a,Request:n,Response:s}=r,o=[n,s,a];let l=o.length,c=l,m,p,f=Q9;for(;c--;)m=o[c],p=f.get(m),p===void 0&&f.set(m,p=c?new Map:X9(r)),f=p;return p};KM();const u2={http:f9,xhr:V9,fetch:{get:KM}};We.forEach(u2,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const O4=t=>`- ${t}`,J9=t=>We.isFunction(t)||t===null||t===!1;function Z9(t,r){t=We.isArray(t)?t:[t];const{length:a}=t;let n,s;const o={};for(let l=0;l<a;l++){n=t[l];let c;if(s=n,!J9(n)&&(s=u2[(c=String(n)).toLowerCase()],s===void 0))throw new _r(`Unknown adapter '${c}'`);if(s&&(We.isFunction(s)||(s=s.get(r))))break;o[c||"#"+l]=s}if(!s){const l=Object.entries(o).map(([m,p])=>`adapter ${m} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(O4).join(`
`):" "+O4(l[0]):"as no adapter specified";throw new _r("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const YM={getAdapter:Z9,adapters:u2};function sx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zd(null,t)}function M4(t){return sx(t),t.headers=Ss.from(t.headers),t.data=nx.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YM.getAdapter(t.adapter||pp.adapter,t)(t).then(function(n){return sx(t),n.data=nx.call(t,t.transformResponse,n),n.headers=Ss.from(n.headers),n},function(n){return VM(n)||(sx(t),n&&n.response&&(n.response.data=nx.call(t,t.transformResponse,n.response),n.response.headers=Ss.from(n.response.headers))),Promise.reject(n)})}const XM="1.13.2",zg={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{zg[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const j4={};zg.transitional=function(r,a,n){function s(o,l){return"[Axios v"+XM+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,c)=>{if(r===!1)throw new _r(s(l," has been removed"+(a?" in "+a:"")),_r.ERR_DEPRECATED);return a&&!j4[l]&&(j4[l]=!0,console.warn(s(l," has been deprecated since v"+a+" and will be removed in the near future"))),r?r(o,l,c):!0}};zg.spelling=function(r){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${r}`),!0)};function eF(t,r,a){if(typeof t!="object")throw new _r("options must be an object",_r.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],l=r[o];if(l){const c=t[o],m=c===void 0||l(c,o,t);if(m!==!0)throw new _r("option "+o+" must be "+m,_r.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new _r("Unknown option "+o,_r.ERR_BAD_OPTION)}}const nf={assertOptions:eF,validators:zg},$o=nf.validators;let nc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new E4,response:new E4}}async request(r,a){try{return await this._request(r,a)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(r,a){typeof r=="string"?(a=a||{},a.url=r):a=r||{},a=cc(this.defaults,a);const{transitional:n,paramsSerializer:s,headers:o}=a;n!==void 0&&nf.assertOptions(n,{silentJSONParsing:$o.transitional($o.boolean),forcedJSONParsing:$o.transitional($o.boolean),clarifyTimeoutError:$o.transitional($o.boolean)},!1),s!=null&&(We.isFunction(s)?a.paramsSerializer={serialize:s}:nf.assertOptions(s,{encode:$o.function,serialize:$o.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),nf.assertOptions(a,{baseUrl:$o.spelling("baseURL"),withXsrfToken:$o.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=o&&We.merge(o.common,o[a.method]);o&&We.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),a.headers=Ss.concat(l,o);const c=[];let m=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(a)===!1||(m=m&&E.synchronous,c.unshift(E.fulfilled,E.rejected))});const p=[];this.interceptors.response.forEach(function(E){p.push(E.fulfilled,E.rejected)});let f,g=0,b;if(!m){const v=[M4.bind(this),void 0];for(v.unshift(...c),v.push(...p),b=v.length,f=Promise.resolve(a);g<b;)f=f.then(v[g++],v[g++]);return f}b=c.length;let x=a;for(;g<b;){const v=c[g++],E=c[g++];try{x=v(x)}catch(y){E.call(this,y);break}}try{f=M4.call(this,x)}catch(v){return Promise.reject(v)}for(g=0,b=p.length;g<b;)f=f.then(p[g++],p[g++]);return f}getUri(r){r=cc(this.defaults,r);const a=WM(r.baseURL,r.url,r.allowAbsoluteUrls);return BM(a,r.params,r.paramsSerializer)}};We.forEach(["delete","get","head","options"],function(r){nc.prototype[r]=function(a,n){return this.request(cc(n||{},{method:r,url:a,data:(n||{}).data}))}});We.forEach(["post","put","patch"],function(r){function a(n){return function(o,l,c){return this.request(cc(c||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}nc.prototype[r]=a(),nc.prototype[r+"Form"]=a(!0)});let tF=class QM{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(o){a=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(c=>{n.subscribe(c),o=c}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},r(function(o,l,c){n.reason||(n.reason=new Zd(o,l,c),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const a=this._listeners.indexOf(r);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const r=new AbortController,a=n=>{r.abort(n)};return this.subscribe(a),r.signal.unsubscribe=()=>this.unsubscribe(a),r.signal}static source(){let r;return{token:new QM(function(s){r=s}),cancel:r}}};function rF(t){return function(a){return t.apply(null,a)}}function aF(t){return We.isObject(t)&&t.isAxiosError===!0}const mN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mN).forEach(([t,r])=>{mN[r]=t});function JM(t){const r=new nc(t),a=PM(nc.prototype.request,r);return We.extend(a,nc.prototype,r,{allOwnKeys:!0}),We.extend(a,r,null,{allOwnKeys:!0}),a.create=function(s){return JM(cc(t,s))},a}const an=JM(pp);an.Axios=nc;an.CanceledError=Zd;an.CancelToken=tF;an.isCancel=VM;an.VERSION=XM;an.toFormData=Fg;an.AxiosError=_r;an.Cancel=an.CanceledError;an.all=function(r){return Promise.all(r)};an.spread=rF;an.isAxiosError=aF;an.mergeConfig=cc;an.AxiosHeaders=Ss;an.formToJSON=t=>UM(We.isHTMLForm(t)?new FormData(t):t);an.getAdapter=YM.getAdapter;an.HttpStatusCode=mN;an.default=an;const{Axios:nge,AxiosError:sge,CanceledError:oge,isCancel:lge,CancelToken:ige,VERSION:cge,all:dge,Cancel:mge,isAxiosError:uge,spread:pge,toFormData:fge,AxiosHeaders:gge,HttpStatusCode:hge,formToJSON:bge,getAdapter:xge,mergeConfig:yge}=an;var Nd;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Nd||(Nd={}));class ox extends Error{constructor(r,a,n){super(r),this.message=r,this.code=a,this.data=n}}const nF=t=>{var r,a;return t?.androidBridge?"android":!((a=(r=t?.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},sF=t=>{const r=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},n=a.Plugins=a.Plugins||{},s=()=>r!==null?r.name:nF(t),o=()=>s()!=="web",l=g=>{const b=p.get(g);return!!(b?.platforms.has(s())||c(g))},c=g=>{var b;return(b=a.PluginHeaders)===null||b===void 0?void 0:b.find(x=>x.name===g)},m=g=>t.console.error(g),p=new Map,f=(g,b={})=>{const x=p.get(g);if(x)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),x.proxy;const v=s(),E=c(g);let y;const w=async()=>(!y&&v in b?y=typeof b[v]=="function"?y=await b[v]():y=b[v]:r!==null&&!y&&"web"in b&&(y=typeof b.web=="function"?y=await b.web():y=b.web),y),k=(O,R)=>{var D,$;if(E){const j=E?.methods.find(K=>R===K.name);if(j)return j.rtype==="promise"?K=>a.nativePromise(g,R.toString(),K):(K,H)=>a.nativeCallback(g,R.toString(),K,H);if(O)return(D=O[R])===null||D===void 0?void 0:D.bind(O)}else{if(O)return($=O[R])===null||$===void 0?void 0:$.bind(O);throw new ox(`"${g}" plugin is not implemented on ${v}`,Nd.Unimplemented)}},C=O=>{let R;const D=(...$)=>{const j=w().then(K=>{const H=k(K,O);if(H){const V=H(...$);return R=V?.remove,V}else throw new ox(`"${g}.${O}()" is not implemented on ${v}`,Nd.Unimplemented)});return O==="addListener"&&(j.remove=async()=>R()),j};return D.toString=()=>`${O.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:O,writable:!1,configurable:!1}),D},A=C("addListener"),S=C("removeListener"),P=(O,R)=>{const D=A({eventName:O},R),$=async()=>{const K=await D;S({eventName:O,callbackId:K},R)},j=new Promise(K=>D.then(()=>K({remove:$})));return j.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await $()},j},T=new Proxy({},{get(O,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return E?P:A;case"removeListener":return S;default:return C(R)}}});return n[g]=T,p.set(g,{name:g,proxy:T,platforms:new Set([...Object.keys(b),...E?[v]:[]])}),T};return a.convertFileSrc||(a.convertFileSrc=g=>g),a.getPlatform=s,a.handleError=m,a.isNativePlatform=o,a.isPluginAvailable=l,a.registerPlugin=f,a.Exception=ox,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},oF=t=>t.Capacitor=sF(t),kd=oF(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),fp=kd.registerPlugin;class p2{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,a){let n=!1;this.listeners[r]||(this.listeners[r]=[],n=!0),this.listeners[r].push(a);const o=this.windowListeners[r];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(r);const l=async()=>this.removeListener(r,a);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}}notifyListeners(r,a,n){const s=this.listeners[r];if(!s){if(n){let o=this.retainedEventArguments[r];o||(o=[]),o.push(a),this.retainedEventArguments[r]=o}return}s.forEach(o=>o(a))}hasListeners(r){var a;return!!(!((a=this.listeners[r])===null||a===void 0)&&a.length)}registerWindowListener(r,a){this.windowListeners[a]={registered:!1,windowEventName:r,pluginEventName:a,handler:n=>{this.notifyListeners(a,n)}}}unimplemented(r="not implemented"){return new kd.Exception(r,Nd.Unimplemented)}unavailable(r="not available"){return new kd.Exception(r,Nd.Unavailable)}async removeListener(r,a){const n=this.listeners[r];if(!n)return;const s=n.indexOf(a);this.listeners[r].splice(s,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){const a=this.retainedEventArguments[r];a&&(delete this.retainedEventArguments[r],a.forEach(n=>{this.notifyListeners(r,n)}))}}const R4=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$4=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lF extends p2{async getCookies(){const r=document.cookie,a={};return r.split(";").forEach(n=>{if(n.length<=0)return;let[s,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=$4(s).trim(),o=$4(o).trim(),a[s]=o}),a}async setCookie(r){try{const a=R4(r.key),n=R4(r.value),s=`; expires=${(r.expires||"").replace("expires=","")}`,o=(r.path||"/").replace("path=",""),l=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${a}=${n||""}${s}; path=${o}; ${l};`}catch(a){return Promise.reject(a)}}async deleteCookie(r){try{document.cookie=`${r.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{const r=document.cookie.split(";")||[];for(const a of r)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}}async clearAllCookies(){try{await this.clearCookies()}catch(r){return Promise.reject(r)}}}fp("CapacitorCookies",{web:()=>new lF});const iF=async t=>new Promise((r,a)=>{const n=new FileReader;n.onload=()=>{const s=n.result;r(s.indexOf(",")>=0?s.split(",")[1]:s)},n.onerror=s=>a(s),n.readAsDataURL(t)}),cF=(t={})=>{const r=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,o,l)=>(s[o]=t[r[l]],s),{})},dF=(t,r=!0)=>t?Object.entries(t).reduce((n,s)=>{const[o,l]=s;let c,m;return Array.isArray(l)?(m="",l.forEach(p=>{c=r?encodeURIComponent(p):p,m+=`${o}=${c}&`}),m.slice(0,-1)):(c=r?encodeURIComponent(l):l,m=`${o}=${c}`),`${n}&${m}`},"").substr(1):null,mF=(t,r={})=>{const a=Object.assign({method:t.method||"GET",headers:t.headers},r),s=cF(t.headers)["content-type"]||"";if(typeof t.data=="string")a.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,c]of Object.entries(t.data||{}))o.set(l,c);a.body=o.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((c,m)=>{o.append(m,c)});else for(const c of Object.keys(t.data))o.append(c,t.data[c]);a.body=o;const l=new Headers(a.headers);l.delete("content-type"),a.headers=l}else(s.includes("application/json")||typeof t.data=="object")&&(a.body=JSON.stringify(t.data));return a};class uF extends p2{async request(r){const a=mF(r,r.webFetchExtra),n=dF(r.params,r.shouldEncodeUrlParams),s=n?`${r.url}?${n}`:r.url,o=await fetch(s,a),l=o.headers.get("content-type")||"";let{responseType:c="text"}=o.ok?r:{};l.includes("application/json")&&(c="json");let m,p;switch(c){case"arraybuffer":case"blob":p=await o.blob(),m=await iF(p);break;case"json":m=await o.json();break;default:m=await o.text()}const f={};return o.headers.forEach((g,b)=>{f[b]=g}),{data:m,headers:f,status:o.status,url:o.url}}async get(r){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))}async post(r){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))}async put(r){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))}async patch(r){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))}async delete(r){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))}}fp("CapacitorHttp",{web:()=>new uF});var L4;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(L4||(L4={}));var I4;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(I4||(I4={}));class pF extends p2{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}fp("SystemBars",{web:()=>new pF});const fF="modulepreload",gF=function(t){return"/"+t},D4={},yl=function(r,a,n){let s=Promise.resolve();if(a&&a.length>0){let m=function(p){return Promise.all(p.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=m(a.map(p=>{if(p=gF(p),p in D4)return;D4[p]=!0;const f=p.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":fF,f||(b.as="script"),b.crossOrigin="",b.href=p,c&&b.setAttribute("nonce",c),document.head.appendChild(b),f)return new Promise((x,v)=>{b.addEventListener("load",x),b.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return r().catch(o)})},Li=fp("Preferences",{web:()=>yl(()=>import("./web-CGV2izKP.js"),[]).then(t=>new t.PreferencesWeb)});class hF{constructor(){try{this.isNative=kd.isNativePlatform()}catch{this.isNative=!1}this.maxLocalStorageSize=5*1024*1024}_useNativeStorage(){return this.isNative}async get(r){try{const a=this._useNativeStorage();let n=null;if(a?n=(await Li.get({key:r}))?.value:n=localStorage.getItem(r),!n||n==="null")return null;try{return JSON.parse(n)}catch{return n}}catch{return null}}async set(r,a){try{const n=JSON.stringify(a);if(this._useNativeStorage())return await Li.set({key:r,value:n}),!0;{const o=new Blob([n]).size;return o>this.maxLocalStorageSize?(console.warn(`Value too large for localStorage (${o} bytes). Consider using IndexedDB.`),!1):(localStorage.setItem(r,n),!0)}}catch(n){if(n.name==="QuotaExceededError"){console.warn("Storage quota exceeded. Cleaning up old entries..."),await this.cleanup();try{return this._useNativeStorage()?await Li.set({key:r,value:JSON.stringify(a)}):localStorage.setItem(r,JSON.stringify(a)),!0}catch(s){return console.error("Storage set error after cleanup:",s),!1}}return console.error(`Storage set error for key ${r}:`,n),!1}}async remove(r){try{return this._useNativeStorage()?await Li.remove({key:r}):localStorage.removeItem(r),!0}catch(a){return console.error(`Storage remove error for key ${r}:`,a),!1}}async clear(){try{return this._useNativeStorage()?await Li.clear():localStorage.clear(),!0}catch(r){return console.error("Storage clear error:",r),!1}}async keys(){try{if(this._useNativeStorage()){const{keys:a}=await Li.keys();return a}else return Object.keys(localStorage)}catch(r){return console.error("Storage keys error:",r),[]}}async has(r){try{if(this._useNativeStorage()){const{value:n}=await Li.get({key:r});return n!==null}else return localStorage.getItem(r)!==null}catch{return!1}}async cleanup(){return!0}}const Br=new hF,bF="HDMarketDB",xF=1,Gn={PRODUCTS:"products",SEARCH_RESULTS:"searchResults",SHOP_DATA:"shopData",CACHE:"cache"};class yF{constructor(){this.db=null,this.initPromise=null}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((r,a)=>{if(typeof window>"u"||!window.indexedDB){console.warn("IndexedDB not available"),r(!1);return}const n=vl.open(bF,xF);n.onerror=()=>{console.error("IndexedDB open error:",n.error),a(n.error)},n.onsuccess=()=>{this.db=n.result,r(!0)},n.onupgradeneeded=s=>{const o=s.target.result;if(!o.objectStoreNames.contains(Gn.PRODUCTS)){const l=o.createObjectStore(Gn.PRODUCTS,{keyPath:"id"});l.createIndex("slug","slug",{unique:!0}),l.createIndex("category","category",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}if(o.objectStoreNames.contains(Gn.SEARCH_RESULTS)||o.createObjectStore(Gn.SEARCH_RESULTS,{keyPath:"query"}).createIndex("timestamp","timestamp",{unique:!1}),!o.objectStoreNames.contains(Gn.SHOP_DATA)){const l=o.createObjectStore(Gn.SHOP_DATA,{keyPath:"id"});l.createIndex("slug","slug",{unique:!0}),l.createIndex("timestamp","timestamp",{unique:!1})}o.objectStoreNames.contains(Gn.CACHE)||o.createObjectStore(Gn.CACHE,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}}),this.initPromise)}async get(r,a){return await this.init(),this.db?new Promise((n,s)=>{const c=this.db.transaction([r],"readonly").objectStore(r).get(a);c.onsuccess=()=>{const m=c.result;m&&m.data?m.expiry&&Date.now()>m.expiry?(this.delete(r,a),n(null)):n(m.data):n(null)},c.onerror=()=>{s(c.error)}}):null}async set(r,a,n,s=null){return await this.init(),this.db?new Promise((o,l)=>{const m=this.db.transaction([r],"readwrite").objectStore(r),p={key:typeof a=="object"?a.id||a.slug||a.query:a,data:n,timestamp:Date.now(),expiry:s?Date.now()+s:null},f=m.put(p);f.onsuccess=()=>{o(!0)},f.onerror=()=>{l(f.error)}}):!1}async delete(r,a){return await this.init(),this.db?new Promise((n,s)=>{const c=this.db.transaction([r],"readwrite").objectStore(r).delete(a);c.onsuccess=()=>{n(!0)},c.onerror=()=>{s(c.error)}}):!1}async clear(r){return await this.init(),this.db?new Promise((a,n)=>{const l=this.db.transaction([r],"readwrite").objectStore(r).clear();l.onsuccess=()=>{a(!0)},l.onerror=()=>{n(l.error)}}):!1}async cleanup(r){return await this.init(),this.db?new Promise((a,n)=>{const c=this.db.transaction([r],"readwrite").objectStore(r).index("timestamp").openCursor();let m=0;c.onsuccess=p=>{const f=p.target.result;if(f){const g=f.value;g.expiry&&Date.now()>g.expiry&&(f.delete(),m++),f.continue()}else a(m)},c.onerror=()=>{n(c.error)}}):0}async getAllKeys(r){return await this.init(),this.db?new Promise((a,n)=>{const l=this.db.transaction([r],"readonly").objectStore(r).getAllKeys();l.onsuccess=()=>{a(l.result)},l.onerror=()=>{n(l.error)}}):[]}}const vl=new yF,oe=an.create({baseURL:"https://hdmarket-backend.onrender.com/api",withCredentials:!0}),vF=120*1e3,ZM="hdmarket:api-cache:",Sd="hdmarket:cache-keys",ej={"/products/public":180*1e3,"/products/public/installments":180*1e3,"/marketplace-promo-codes/public/home":180*1e3,"/shops":300*1e3,"/shops/verified":300*1e3,"/settings":600*1e3,"/search":120*1e3,"/categories":1800*1e3,"/cities":1800*1e3,"/users/notifications":60*1e3,"/users/profile/stats":120*1e3,"/admin/dashboard/stats":60*1e3},EF=Object.keys(ej),wF=["/users/auth","/users/login","/users/register","/cart","/orders/create","/admin","/payments","/support","/chat","/settings/networks"],f2=()=>typeof window<"u",Bg=t=>{const r=t.url||"",a=t.baseURL||"";if(r.startsWith("http"))try{const n=new URL(r);return n.pathname+n.search}catch{return r.replace(a,"")}return r.replace(a,"")},tj=t=>{const r=Bg(t),a=t.params?new URLSearchParams(t.params).toString():"",n=a?r.includes("?")?`&${a}`:`?${a}`:"";return`${ZM}${r}${n}`},xf=t=>{for(const[r,a]of Object.entries(ej))if(t.startsWith(r))return a;return vF},F4=async t=>{try{const r=await Br.get(Sd)||[];r.includes(t)||(r.push(t),await Br.set(Sd,r))}catch{}},uN=(t,r)=>{const a=["/products/public","/search","/shops"],n=r>102400;return a.some(s=>t.startsWith(s))||n},pN=async()=>{try{const t=await Br.get(Sd)||[],r=[];for(const a of t)try{const n=await Br.get(a);if(n){const s=xf(a.replace(ZM,""));Date.now()-n.timestamp<s?r.push(a):await Br.remove(a)}}catch{await Br.remove(a)}await Br.set(Sd,r),await vl.cleanup(Gn.CACHE)}catch{}};typeof window<"u"&&(pN(),setInterval(pN,300*1e3));const NF=async(t,r)=>{if(!f2())return null;try{if(uN(r,0))return await vl.get(Gn.CACHE,t);const a=await Br.get(t);if(!a||typeof a!="object")return null;const n=xf(r);return Date.now()-a.timestamp>n?(await Br.remove(t),null):a.data}catch{return null}},kF=async(t,r,a)=>{if(f2())try{const n=new Blob([JSON.stringify(r)]).size,s=xf(a);uN(a,n)?await vl.set(Gn.CACHE,t,r,s):await Br.set(t,{timestamp:Date.now(),data:r}),await F4(t)}catch(n){if(n.name==="QuotaExceededError"||n.message?.includes("quota")){await pN();try{const s=new Blob([JSON.stringify(r)]).size,o=xf(a);uN(a,s)?await vl.set(Gn.CACHE,t,r,o):await Br.set(t,{timestamp:Date.now(),data:r}),await F4(t)}catch{}}}},SF=async()=>{if(!(typeof window>"u"))try{const t=await Br.get(Sd)||[];for(const r of t)await Br.remove(r);await Br.remove(Sd),await vl.clear(Gn.CACHE)}catch{}},rj=t=>{if(!f2()||(t.method||"get").toLowerCase()!=="get"||t.skipCache||t.headers?.["x-skip-cache"])return!1;const r=Bg(t);return!r.startsWith("/")||wF.some(a=>r.startsWith(a))?!1:EF.some(a=>r.startsWith(a))};oe.interceptors.request.use(async t=>{t.headers=t.headers||{};const r=await Br.get("qm_token");if(r&&(t.headers.Authorization=`Bearer ${r}`),rj(t)){const a=Bg(t),n=tj(t),s=await NF(n,a);s?t.adapter=async()=>({data:s,status:200,statusText:"OK",headers:{"x-cache":"HIT"},config:t,request:{fromCache:!0}}):(t.__cacheKey=n,t.__normalizedUrl=a)}return t});const CF=2,AF=1200,_F=15e3;let z4=0;oe.interceptors.response.use(async t=>{if(rj(t.config)){const r=t.config.__cacheKey||tj(t.config),a=t.config.__normalizedUrl||Bg(t.config);r&&t.status===200&&await kF(r,t.data,a)}return t},async t=>{const r=t.config||{},a=r.__retryCount??0,n=!t.response;if(n&&a<CF){r.__retryCount=a+1;const s=AF*(a+1);return await new Promise(o=>setTimeout(o,s)),oe.request(r)}if(n&&typeof window<"u"){const s=Date.now();if(s-z4>=_F){z4=s;const o="Impossible de joindre le serveur. Vrifiez votre connexion internet et ressayez.";window.dispatchEvent(new CustomEvent("hdmarket:network-error",{detail:{message:o},bubbles:!0,cancelable:!1}))}}return Promise.reject(t)});class tu extends Error{}tu.prototype.name="InvalidTokenError";function PF(t){return decodeURIComponent(atob(t).replace(/(.)/g,(r,a)=>{let n=a.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function TF(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return PF(r)}catch{return atob(r)}}function OF(t,r){if(typeof t!="string")throw new tu("Invalid token specified: must be a string");r||(r={});const a=r.header===!0?0:1,n=t.split(".")[a];if(typeof n!="string")throw new tu(`Invalid token specified: missing part #${a+1}`);let s;try{s=TF(n)}catch(o){throw new tu(`Invalid token specified: invalid base64 for part #${a+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new tu(`Invalid token specified: invalid json for part #${a+1} (${o.message})`)}}const g2="hdmarket:search-cache:",MF=300*1e3,B4=50,jF=1440*60*1e3,aj=(t,r={})=>{const a=(t||"").trim().toLowerCase(),n=JSON.stringify(r);return`${g2}${a}:${n}`},q4=async(t,r={})=>{try{const a=aj(t,r),n=await Br.get(a);return n?Date.now()-n.timestamp>MF?(await Br.remove(a),null):(n.lastAccessed=Date.now(),await Br.set(a,n),n.data):null}catch(a){return console.error("Error getting cached search:",a),null}},RF=async(t,r={},a)=>{try{const n=aj(t,r),s={data:a,timestamp:Date.now(),lastAccessed:Date.now(),query:t.trim(),filters:r};return await Br.set(n,s),await $F(),!0}catch(n){return console.error("Error setting cached search:",n),!1}},$F=async()=>{try{const r=(await Br.keys()).filter(o=>o.startsWith(g2));if(r.length<=B4)return;const a=[];for(const o of r){const l=await Br.get(o);l&&a.push({key:o,lastAccessed:l.lastAccessed||l.timestamp,age:Date.now()-l.timestamp})}a.sort((o,l)=>o.lastAccessed-l.lastAccessed);const n=a.slice(0,a.length-B4);for(const o of n)await Br.remove(o.key);const s=Date.now();for(const o of a)o.age>jF&&await Br.remove(o.key)}catch(t){console.error("Error cleaning up cache:",t)}},LF=async()=>{try{const r=(await Br.keys()).filter(a=>a.startsWith(g2));for(const a of r)await Br.remove(a);return!0}catch(t){return console.error("Error clearing search cache:",t),!1}},IF=["cached_orders","hdmarket:recent-product-views","hdmarket_saved_searches","hdmarket_custom_nav_items","hdmarket_chat_hidden","hdmarket_chat_button_collapsed","hdmarket_order_chat_encryption","user"],DF=["userDashboard_savedFilters"],FF="hdmarket_chat_key_",zF=async()=>{if(!(typeof window>"u"))try{for(const t of IF)try{localStorage.removeItem(t)}catch{}try{const t=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);a&&a.startsWith(FF)&&t.push(a)}t.forEach(r=>localStorage.removeItem(r))}catch{}for(const t of DF)try{await Br.remove(t)}catch{}}catch{}},Sr=u.createContext(),BF=async()=>{if(typeof window>"u")return null;try{const t=await Br.get("qm_token");if(!t)return null;const r=OF(t),n=await Br.get("qm_user")||{},s={...n,shopHours:Array.isArray(n.shopHours)?n.shopHours:[],shopVerified:!!n.shopVerified,phoneVerified:!!n.phoneVerified,followingShops:Array.isArray(n.followingShops)?n.followingShops:[],canReadFeedback:!!n.canReadFeedback,canVerifyPayments:!!n.canVerifyPayments,canManageBoosts:!!n.canManageBoosts,canManageComplaints:!!n.canManageComplaints};return{id:r.id,role:r.role,token:t,...s}}catch{return await Br.remove("qm_token"),await Br.remove("qm_user"),null}},qF=({children:t})=>{const[r,a]=u.useState(null),[n,s]=u.useState(!0);u.useEffect(()=>{BF().then(p=>{a(p),s(!1)})},[]);const o=async p=>{const{token:f,...g}=p||{};try{await Br.set("qm_user",g)}catch{}},l=async p=>{await Br.set("qm_token",p.token);const f={id:p._id,role:p.role,token:p.token,name:p.name,email:p.email,phone:p.phone,phoneVerified:!!p.phoneVerified,accountType:p.accountType||"person",shopName:p.shopName||"",shopAddress:p.shopAddress||"",shopLogo:p.shopLogo||"",shopBanner:p.shopBanner||"",shopDescription:p.shopDescription||"",shopHours:Array.isArray(p.shopHours)?p.shopHours:[],shopVerified:!!p.shopVerified,followingShops:Array.isArray(p.followingShops)?p.followingShops:[],canReadFeedback:!!p.canReadFeedback,canVerifyPayments:!!p.canVerifyPayments,canManageBoosts:!!p.canManageBoosts,canManageComplaints:!!p.canManageComplaints,country:p.country||"Rpublique du Congo",address:p.address||"",city:p.city||"",gender:p.gender||""};await o(f),a(f)},c=async()=>{try{await SF(),await zF(),await Promise.all([vl.clear(Gn.PRODUCTS),vl.clear(Gn.SEARCH_RESULTS),vl.clear(Gn.SHOP_DATA)]),await LF()}catch{}await Br.remove("qm_token"),await Br.remove("qm_user"),a(null),typeof window<"u"&&(window.location.href="/")};u.useEffect(()=>{(async()=>{if(r?.token)try{const{data:f}=await oe.get("/users/profile");m(f)}catch(f){if(f.response?.status===401)c();else if(f.response?.status===403&&f.response?.data?.code==="ACCOUNT_BLOCKED"){const g=f.response?.data?.message||"Votre compte est suspendu. Contactez ladministrateur pour plus dinformations.";c(),alert(g)}}})()},[r?.token]);const m=async p=>{a(f=>{if(!f)return f;const g={...f,...p};return o(g),g})};return e.createElement(Sr.Provider,{value:{user:r,loading:n,login:l,logout:c,updateUser:m}},t)},od={items:[],totals:{quantity:0,subtotal:0},updatedAt:null},$l=u.createContext({cart:od,loading:!1,error:"",addItem:async()=>{},updateItem:async()=>{},removeItem:async()=>{},clearCart:async()=>{},refresh:async()=>{}}),UF=({children:t})=>{const{user:r}=u.useContext(Sr),[a,n]=u.useState(od),[s,o]=u.useState(!1),[l,c]=u.useState(""),m=u.useCallback(E=>{n(E?{items:E.items||[],totals:E.totals||{quantity:0,subtotal:0},updatedAt:E.updatedAt||null}:od)},[]),p=u.useCallback(async()=>{if(!r){n(od),c("");return}o(!0);try{const{data:E}=await oe.get("/cart");m(E),c("")}catch(E){E.response?.status===401?n(od):c(E.response?.data?.message||E.message||"Erreur lors du chargement du panier.")}finally{o(!1)}},[m,r]);u.useEffect(()=>{p()},[p]);const f=u.useCallback(async(E,y=1)=>{if(r){o(!0);try{const{data:w}=await oe.post("/cart/items",{productId:E,quantity:y});m(w),c("")}catch(w){throw c(w.response?.data?.message||w.message||"Impossible dajouter larticle au panier."),w}finally{o(!1)}}},[m,r]),g=u.useCallback(async(E,y)=>{if(r){o(!0);try{if(y<=0){const{data:w}=await oe.delete(`/cart/items/${E}`);m(w)}else{const{data:w}=await oe.put(`/cart/items/${E}`,{quantity:y});m(w)}c("")}catch(w){throw c(w.response?.data?.message||w.message||"Impossible de mettre  jour le panier."),w}finally{o(!1)}}},[m,r]),b=u.useCallback(async E=>{if(r){o(!0);try{const{data:y}=await oe.delete(`/cart/items/${E}`);m(y),c("")}catch(y){throw c(y.response?.data?.message||y.message||"Impossible de retirer larticle."),y}finally{o(!1)}}},[m,r]),x=u.useCallback(async()=>{if(!r){n(od);return}o(!0);try{const{data:E}=await oe.delete("/cart");m(E),c("")}catch(E){throw c(E.response?.data?.message||E.message||"Impossible de vider le panier."),E}finally{o(!1)}},[m,r]),v=u.useMemo(()=>({cart:a,loading:s,error:l,addItem:f,updateItem:g,removeItem:b,clearCart:x,refresh:p}),[f,a,x,l,p,s,b,g]);return e.createElement($l.Provider,{value:v},t)},em=u.createContext({favorites:[],loading:!1,refreshFavorites:()=>Promise.resolve(),addFavorite:()=>Promise.resolve(),removeFavorite:()=>Promise.resolve(),toggleFavorite:()=>Promise.resolve(),isFavorite:()=>!1}),VF=({children:t})=>{const{user:r}=u.useContext(Sr),[a,n]=u.useState([]),[s,o]=u.useState(!1),l=u.useCallback(async()=>{if(!r?.token){n([]);return}o(!0);try{const{data:b}=await oe.get("/users/favorites");n(Array.isArray(b)?b:[])}catch(b){console.error("Impossible de rcuprer les favoris.",b)}finally{o(!1)}},[r?.token]);u.useEffect(()=>{l()},[l]),u.useEffect(()=>{r?.token||(n([]),o(!1))},[r?.token]);const c=u.useCallback(b=>a.some(x=>x._id===b),[a]),m=u.useCallback(async b=>{if(!r?.token||!b?._id)throw new Error("Authentification requise");return await oe.post("/users/favorites",{productId:b._id}),n(x=>x.some(v=>v._id===b._id)?x:[{...b},...x]),!0},[r?.token]),p=u.useCallback(async b=>{if(!r?.token||!b)throw new Error("Authentification requise");return await oe.delete(`/users/favorites/${b}`),n(x=>x.filter(v=>v._id!==b)),!0},[r?.token]),f=u.useCallback(async b=>b?._id?c(b._id)?(await p(b._id),!1):(await m(b),!0):null,[c,m,p]),g=u.useMemo(()=>({favorites:a,loading:s,refreshFavorites:l,addFavorite:m,removeFavorite:p,toggleFavorite:f,isFavorite:c}),[a,s,l,m,p,f,c]);return e.createElement(em.Provider,{value:g},t)},U4={waitingPayments:0,unreadFeedback:0};function HF(t){const[r,a]=u.useState(U4),[n,s]=u.useState(!1),[o,l]=u.useState(""),c=u.useCallback(async()=>{s(!0);try{const{data:m}=await oe.get("/admin/stats");a({waitingPayments:m?.payments?.waiting||0,unreadFeedback:m?.feedback?.unread||0}),l("")}catch(m){l(m.response?.data?.message||m.message||"Erreur lors du chargement des statistiques admin.")}finally{s(!1)}},[]);return u.useEffect(()=>{if(!t){a(U4);return}return c().catch(()=>{}),()=>{}},[t,c]),u.useEffect(()=>{if(!t)return()=>{};const m=()=>{c().catch(()=>{})};return window.addEventListener("hdmarket:admin-counts-refresh",m),()=>{window.removeEventListener("hdmarket:admin-counts-refresh",m)}},[t,c]),{counts:r,loading:n,error:o}}const WF=Object.freeze({product_comment:!0,reply:!0,favorite:!0,rating:!0,product_approval:!0,product_rejection:!0,promotional:!0,shop_review:!0,shop_follow:!0,payment_pending:!0,order_created:!0,order_received:!0,order_reminder:!0,order_delivering:!0,order_delivered:!0,installment_due_reminder:!0,installment_overdue_warning:!0,installment_payment_submitted:!0,installment_payment_validated:!0,installment_sale_confirmation_required:!0,installment_sale_confirmed:!0,installment_completed:!0,installment_product_suspended:!0,feedback_read:!0,complaint_created:!0,improvement_feedback_created:!0,admin_broadcast:!0}),nj=()=>({...WF}),GF=(t={})=>{const r=nj();return Object.keys(r).forEach(a=>{typeof t[a]=="boolean"&&(r[a]=t[a])}),r},N0=()=>({commentAlerts:0,alerts:[],unreadCount:0,preferences:nj()});function sj(t,r={}){const{skipRefreshEvent:a=!1}=r,[n,s]=u.useState(()=>N0()),[o,l]=u.useState(!1),[c,m]=u.useState(""),p="hdmarket:notifications-refresh",f=u.useCallback(v=>{s(E=>typeof v=="function"?v(E):v)},[]),g=u.useCallback(async()=>{if(!t){const v=N0();return s(v),v}l(!0);try{const{data:v}=await oe.get("/users/notifications",{skipCache:!0}),E=typeof v?.unreadCount=="number"?v.unreadCount:typeof v?.commentAlerts=="number"?v.commentAlerts:0,y=Array.isArray(v?.alerts)?v.alerts:[],w={commentAlerts:E,unreadCount:E,alerts:y,preferences:GF(v?.preferences)};return s(w),m(""),w}catch(v){return m(v.response?.data?.message||v.message||"Erreur lors du chargement des notifications."),N0()}finally{l(!1)}},[t]);u.useEffect(()=>{g()},[g]);const b=u.useRef(null),x=u.useRef(null);return u.useEffect(()=>{if(typeof window>"u")return()=>{};const v=()=>{b.current&&(b.current.close(),b.current=null)},E=()=>{x.current&&(clearTimeout(x.current),x.current=null)};if(!t)return v(),E(),s(N0()),m(""),()=>{v(),E()};let y=window.localStorage.getItem("qm_token");if(y)try{const S=JSON.parse(y);typeof S=="string"&&(y=S)}catch{}if(!y)return v(),E(),()=>{v(),E()};const w="https://hdmarket-backend.onrender.com/api",k=w.endsWith("/")?w:`${w}/`,C=new URL("users/notifications/stream",k);C.searchParams.set("token",y);const A=()=>{E(),v();const S=new EventSource(C.toString());b.current=S,S.onopen=()=>{g()},S.onmessage=P=>{if(P?.data){try{if(JSON.parse(P.data)?.type==="connected")return}catch{}g()}},S.onerror=()=>{v(),x.current=setTimeout(A,5e3)}};return A(),()=>{v(),E()}},[t,g]),u.useEffect(()=>{if(a)return;const v=()=>{g()};return window.addEventListener(p,v),()=>{window.removeEventListener(p,v)}},[g,a]),{counts:n,loading:o,error:c,refresh:g,updateCounts:f}}const lx=()=>{window.dispatchEvent(new Event("hdmarket:notifications-refresh"))},KF=(t,r="slug")=>{if(!t)return null;if(typeof t=="string")return t;if(typeof t=="object"){if(t[r])return t[r];if(t._id)return t._id;if(t.id)return t.id;if(t.slug)return t.slug}return null},oj=(t,r="slug")=>{if(!t)return null;if(typeof t=="string")return t;if(typeof t=="object"){if(t[r])return t[r];if(t.slug)return t.slug}return null},Dr=t=>{const r=oj(t,"slug");return r?`/product/${r}`:"/product"},Da=t=>{const r=KF(t,"slug");return r?`/shop/${r}`:"/shop"},lj=(t,r="")=>{const a=r||(typeof window<"u"?window.location.origin:""),n=oj(t,"slug");return n?`${a}/product/${n}`:a};const YF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,n)=>n?n.toUpperCase():a.toLowerCase()),V4=t=>{const r=XF(t);return r.charAt(0).toUpperCase()+r.slice(1)},ij=(...t)=>t.filter((r,a,n)=>!!r&&r.trim()!==""&&n.indexOf(r)===a).join(" ").trim(),QF=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var JF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZF=u.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:l,...c},m)=>u.createElement("svg",{ref:m,...JF,width:r,height:r,stroke:t,strokeWidth:n?Number(a)*24/Number(r):a,className:ij("lucide",s),...!o&&!QF(c)&&{"aria-hidden":"true"},...c},[...l.map(([p,f])=>u.createElement(p,f)),...Array.isArray(o)?o:[o]]));const Xe=(t,r)=>{const a=u.forwardRef(({className:n,...s},o)=>u.createElement(ZF,{ref:o,iconNode:r,className:ij(`lucide-${YF(V4(t))}`,`lucide-${t}`,n),...s}));return a.displayName=V4(t),a};const ez=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],cj=Xe("activity",ez);const tz=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],rz=Xe("archive-restore",tz);const az=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],h2=Xe("archive",az);const nz=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],sz=Xe("arrow-down",nz);const oz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Gr=Xe("arrow-left",oz);const lz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dj=Xe("arrow-right",lz);const iz=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],cz=Xe("arrow-up",iz);const dz=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ko=Xe("award",dz);const mz=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ix=Xe("ban",mz);const uz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],H4=Xe("bell-ring",uz);const pz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kn=Xe("bell",pz);const fz=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],gz=Xe("bookmark-check",fz);const hz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dn=Xe("calendar",hz);const bz=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],yf=Xe("camera",bz);const xz=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],yz=Xe("car",xz);const vz=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mn=Xe("chart-column",vz);const Ez=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],mj=Xe("check-check",Ez);const wz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],li=Xe("check",wz);const Nz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Za=Xe("chevron-down",Nz);const kz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xu=Xe("chevron-left",kz);const Sz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ar=Xe("chevron-right",Sz);const Cz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wo=Xe("chevron-up",Cz);const Az=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Yt=Xe("circle-alert",Az);const _z=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ar=Xe("circle-check-big",_z);const Pz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],za=Xe("circle-check",Pz);const Tz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ba=Xe("circle-x",Tz);const Oz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ea=Xe("clipboard-list",Oz);const Mz=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xt=Xe("clock",Mz);const jz=[["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}],["path",{d:"m9 10-5 5 5 5",key:"1kshq7"}]],W4=Xe("corner-down-left",jz);const Rz=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Sa=Xe("credit-card",Rz);const $z=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],G4=Xe("crop",$z);const Lz=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Iz=Xe("crown",Lz);const Dz=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ea=Xe("dollar-sign",Dz);const Fz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zo=Xe("download",Fz);const zz=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Bz=Xe("dumbbell",zz);const qz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],uj=Xe("ellipsis-vertical",qz);const Uz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fN=Xe("external-link",Uz);const Vz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dc=Xe("eye-off",Vz);const Hz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jn=Xe("eye",Hz);const Wz=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Gz=Xe("factory",Wz);const Kz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Yz=Xe("file-down",Kz);const Xz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],b2=Xe("file-image",Xz);const Qz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pn=Xe("file-text",Qz);const Jz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],K4=Xe("file",Jz);const Zz=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],yu=Xe("flag",Zz);const eB=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],vf=Xe("flame",eB);const tB=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],rB=Xe("flip-horizontal",tB);const aB=[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]],nB=Xe("flip-vertical",aB);const sB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ls=Xe("funnel",sB);const oB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],x2=Xe("grid-3x3",oB);const lB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],y2=Xe("hash",lB);const iB=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],cB=Xe("headphones",iB);const dB=[["path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655",key:"1inpfl"}],["path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761",key:"vbc6x7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mB=Xe("heart-off",dB);const uB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],pB=Xe("heart-pulse",uB);const fB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yr=Xe("heart",fB);const gB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Y4=Xe("history",gB);const hB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],gN=Xe("house",hB);const bB=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],xB=Xe("image-off",bB);const yB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],El=Xe("image",yB);const vB=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],EB=Xe("inbox",vB);const wB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],v2=Xe("info",wB);const NB=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],iu=Xe("layout-grid",NB);const kB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],SB=Xe("layout-dashboard",kB);const CB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],E2=Xe("list",CB);const AB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vs=Xe("loader-circle",AB);const _B=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cn=Xe("lock",_B);const PB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],X4=Xe("log-out",PB);const TB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gi=Xe("mail",TB);const OB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Wr=Xe("map-pin",OB);const MB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],jB=Xe("maximize-2",MB);const RB=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Q4=Xe("menu",RB);const $B=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Hr=Xe("message-circle",$B);const LB=[["path",{d:"M19 19H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.7.7 0 0 1 2 21.286V5a2 2 0 0 1 1.184-1.826",key:"1wyg69"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.656 3H20a2 2 0 0 1 2 2v11.344",key:"mhl4k6"}]],J4=Xe("message-square-off",LB);const IB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ca=Xe("message-square",IB);const DB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],FB=Xe("mic-off",DB);const zB=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],BB=Xe("mic",zB);const qB=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],UB=Xe("minimize-2",qB);const VB=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],HB=Xe("moon",VB);const WB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ft=Xe("package",WB);const GB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Z4=Xe("panels-top-left",GB);const KB=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],pd=Xe("paperclip",KB);const YB=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vu=Xe("pen-line",YB);const XB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],QB=Xe("pencil",XB);const JB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Es=Xe("phone",JB);const ZB=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],eq=Xe("pin-off",ZB);const tq=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],cx=Xe("pin",tq);const rq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bo=Xe("plus",rq);const aq=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sf=Xe("power-off",aq);const nq=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],dx=Xe("power",nq);const sq=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],qg=Xe("receipt",sq);const oq=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Cd=Xe("refresh-ccw",oq);const lq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cs=Xe("refresh-cw",lq);const iq=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],cq=Xe("reply",iq);const dq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hN=Xe("rotate-ccw",dq);const mq=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],uq=Xe("rotate-cw",mq);const pq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vc=Xe("save",pq);const fq=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tr=Xe("search",fq);const gq=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Eu=Xe("send",gq);const hq=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wu=Xe("settings",hq);const bq=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],mx=Xe("share-2",bq);const xq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],$m=Xe("shield-alert",xq);const yq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ga=Xe("shield-check",yq);const vq=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pa=Xe("shield",vq);const Eq=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],wq=Xe("shirt",Eq);const Nq=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ws=Xe("shopping-bag",Nq);const kq=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],en=Xe("shopping-cart",kq);const Sq=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Nu=Xe("sliders-horizontal",Sq);const Cq=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],bN=Xe("smartphone",Cq);const Aq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],_q=Xe("smile",Aq);const Pq=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ba=Xe("sparkles",Pq);const Tq=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],k0=Xe("square-check-big",Tq);const Oq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fd=Xe("square-pen",Oq);const Mq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ux=Xe("square",Mq);const jq=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],zr=Xe("star",jq);const Rq=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Er=Xe("store",Rq);const $q=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Lq=Xe("sun",$q);const Iq=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Wa=Xe("tag",Iq);const Dq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xN=Xe("target",Dq);const Fq=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],w2=Xe("ticket",Fq);const zq=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ld=Xe("timer",zq);const Bq=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],is=Xe("trash-2",Bq);const qq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pr=Xe("trending-up",qq);const Uq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yN=Xe("triangle-alert",Uq);const Vq=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Kr=Xe("truck",Vq);const Hq=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gl=Xe("upload",Hq);const Wq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Go=Xe("user-minus",Wq);const Gq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hi=Xe("user-plus",Gq);const Kq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ia=Xe("user",Kq);const Yq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tn=Xe("users",Yq);const Xq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],vN=Xe("video",Xq);const Qq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pj=Xe("wifi-off",Qq);const Jq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Zq=Xe("wifi",Jq);const eU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jt=Xe("x",eU);const tU=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ln=Xe("zap",tU);const rU=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],fj=Xe("zoom-in",rU);const aU=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],nU=Xe("zoom-out",aU),to=[{id:"electronics",label:"lectronique & High-Tech",description:"Smartphones, ordinateurs, accessoires et plus encore.",icon:bN,options:[{value:"telephones",label:"Tlphones & Accessoires"},{value:"informatique",label:"Ordinateurs & Composants"},{value:"gadgets",label:"Gadgets Connects"},{value:"audio",label:"Audio & Vido"}]},{id:"fashion",label:"Mode & Accessoires",description:"Prt--porter, chaussures, bijoux et sacs tendance.",icon:wq,options:[{value:"pret-porter",label:"Prt--porter"},{value:"chaussures",label:"Chaussures"},{value:"bijoux",label:"Bijoux & Montres"},{value:"sacs",label:"Sacs & Accessoires"}]},{id:"sport",label:"Sport & Fitness",description:"quipements sportifs, fitness, plein air et loisirs.",icon:Bz,options:[{value:"sports-loisirs",label:"Sports & Loisirs"},{value:"fitness",label:"Fitness & Musculation"},{value:"sports-collectifs",label:"Sports Collectifs"},{value:"sports-plein-air",label:"Plein Air & Randonne"},{value:"velos",label:"Vlos & Mobilit"},{value:"accessoires-sport",label:"Accessoires Sportifs"}]},{id:"home",label:"Maison & Jardin",description:"Meubles, dcoration, cuisine et jardinage pour la maison.",icon:gN,options:[{value:"meubles",label:"Meubles"},{value:"decoration",label:"Dcoration"},{value:"cuisine",label:"Ustensiles de Cuisine"},{value:"jardinage",label:"Jardinage"}]},{id:"industry",label:"Industrie & Business",description:"Machines, outils, matires premires et emballages.",icon:Gz,options:[{value:"machines-industrielles",label:"Machines Industrielles"},{value:"outils",label:"Outils"},{value:"matieres-premieres",label:"Matires Premires"},{value:"emballage",label:"Emballage"}]},{id:"health",label:"Sant, Beaut & Loisirs",description:"Cosmtiques, soins, quipements mdicaux et sports.",icon:pB,options:[{value:"cosmetiques",label:"Cosmtiques"},{value:"soins-peau",label:"Soins de la Peau"},{value:"equipement-medical",label:"quipement Mdical"},{value:"complements",label:"Complments Alimentaires"}]},{id:"automobile",label:"Automobile & Accessoires",description:"Voitures, motos, pices dtaches et quipements automobiles.",icon:yz,options:[{value:"voitures",label:"Voitures"},{value:"motos",label:"Motos & Scooters"},{value:"pieces-detachees",label:"Pices Dtaches"},{value:"accessoires-auto",label:"Accessoires Auto & Moto"},{value:"entretien",label:"Produits dEntretien & Rparation"},{value:"pneus-jantes",label:"Pneus & Jantes"},{value:"audio-auto",label:"Audio & lectronique de Bord"}]},{id:"transport",label:"Transport & Vhicules Professionnels",description:"Camions, bus, engins, bateaux et quipements de transport.",icon:Kr,options:[{value:"camions",label:"Camions & Vhicules Utilitaires"},{value:"bus",label:"Bus & Minibus"},{value:"engins",label:"Engins & Matriels Lourds"},{value:"bateaux",label:"Bateaux & Accessoires Maritimes"},{value:"remorques",label:"Remorques & Porte-charges"},{value:"pieces-transport",label:"Pices & Accessoires de Transport"}]}],sU={"sports,-loisirs":"sports-loisirs"},Ef=new Map;to.forEach(t=>{t.options.forEach(r=>{Ef.set(r.value,{...r,group:t})})});Object.entries(sU).forEach(([t,r])=>{const a=Ef.get(r);a&&Ef.set(t,{...a,legacyValue:t})});Array.from(to.flatMap(t=>t.options));const Ug=t=>t&&Ef.get(t)||null;function _n({verified:t,showLabel:r=!0,className:a="",verifiedLabel:n="Boutique vrifie",unverifiedLabel:s="Boutique non vrifie"}){const o=t?Ga:pa,l=t?n:s,c=t?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 bg-gray-100 text-gray-500",m=r?"px-2":"px-1.5";return e.createElement("span",{className:`inline-flex items-center gap-1 rounded-full border ${m} py-0.5 text-[11px] font-semibold ${c} ${a}`,"aria-label":l,title:r?void 0:l},e.createElement(o,{size:12}),r?e.createElement("span",null,l):null)}const oU=t=>{if(!t)return"";const r=new Date(t);if(Number.isNaN(r.getTime()))return"";const n=new Date-r,s=Math.floor(n/(1e3*60)),o=Math.floor(n/(1e3*60*60)),l=Math.floor(n/(1e3*60*60*24));return s<1?" l'instant":s<60?`Il y a ${s} min`:o<24?`Il y a ${o} h`:l===1?"Hier":l<7?`Il y a ${l} j`:r.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:l>365?"numeric":void 0})},Ii=(t,r)=>{if(!r||!t)return t;const a=new RegExp(`(${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return t.split(a).map((s,o)=>a.test(s)?e.createElement("mark",{key:o,className:"bg-yellow-200 text-gray-900 rounded px-0.5"},s):s)},eC=t=>{const r=Number(t);return Number.isNaN(r)?"0 FCFA":r.toLocaleString("fr-FR")+" FCFA"};function lU(){const t=wa(),{user:r,logout:a}=u.useContext(Sr),{cart:n}=u.useContext($l),{favorites:s}=u.useContext(em),o=n?.totals?.quantity||0,l=s.length,[c,m]=u.useState(0),[p,f]=u.useState(0),[g,b]=u.useState(0),x=r?.role==="admin",v=r?.role==="manager",E=x||v,y=!!r?.canManageDelivery,w=!!r?.canManageProducts,k=!!r?.canVerifyPayments,C=E||k,{counts:A}=HF(C),S=A.waitingPayments||0,P=A.unreadFeedback||0,{counts:T}=sj(!!r),O=T.commentAlerts||0,R=c>0,D=c>99?"99+":c,$=p>0,j=p>99?"99+":p,K=g>0,H=g>99?"99+":g,[V,q]=u.useState(!1),[Y,z]=u.useState(!1),[L,Q]=u.useState(""),[B,ae]=u.useState({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),[te,ge]=u.useState({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),[ue,Ee]=u.useState({products:5,shops:3,categories:3}),[fe,re]=u.useState(!1),[U,W]=u.useState(!1),[me,ne]=u.useState(""),[ee,ve]=u.useState(!1),[be,J]=u.useState([]),[Ge,je]=u.useState({pinned:[],today:[],yesterday:[],thisWeek:[],older:[]}),[tt,At]=u.useState(!1),[He,Tt]=u.useState(""),[Re,et]=u.useState(!0),[gt,Ze]=u.useState([]),[xt,Dt]=u.useState(!1),[nt,Me]=u.useState({category:"",minPrice:"",maxPrice:"",city:"",shopVerified:!1,condition:""}),[Qe,wt]=u.useState([]),[lt,we]=u.useState(!1),[vt,pt]=u.useState([]),[Le,pe]=u.useState(!1),[Pe,ft]=u.useState(""),[ht,Lt]=u.useState({desktop:"",mobile:""}),[nr,er]=u.useState(!1),[Nt,sr]=u.useState(!1),Rt=u.useRef(null),zt=u.useRef(null),[mr,Mr]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<1024),br=V&&mr,or=u.useRef(ee),Gt=u.useRef(null),Zt=u.useRef(null),[se,dt]=u.useState(!1),[ut,It]=u.useState([]),[de,De]=u.useState(()=>[{id:"new_products",label:"Nouveaux produits",path:"/products?sort=new",icon:ba},{id:"top_deals",label:"Meilleures offres",path:"/products?sort=price_asc",icon:vf},{id:"verified_shops",label:"Boutiques vrifies",path:"/shops/verified",icon:Ga},{id:"trending",label:"Tendances",path:"/products?sort=popular",icon:Pr}]),[F,ie]=u.useState(null),[he,ke]=u.useState(!1),[mt,G]=u.useState(!1),[Z,le]=u.useState(null),[_e,Be]=u.useState(null),[Te,Se]=u.useState(null),[Je,qt]=u.useState(null),lr="/favicon.svg",Nr="/icons/icon-192.svg",ra=ht.desktop||ht.mobile||lr,Oe=ht.mobile||ht.desktop||Nr;u.useEffect(()=>{document.documentElement.classList.toggle("dark",Y)},[Y]),u.useEffect(()=>{if(!r)return m(0),()=>{};let ce=!1,qe;const Ue=async()=>{try{const{data:ct}=await oe.get("/orders?limit=50");if(!ce){const Cr=(Array.isArray(ct)?ct:ct?.items||[]).filter(ga=>ga?.status!=="delivered").length;m(Cr)}}catch{ce||m(0)}};return Ue(),qe=setInterval(Ue,6e4),()=>{ce=!0,qe&&clearInterval(qe)}},[r]),u.useEffect(()=>{if(!r||x)return f(0),()=>{};let ce=!1,qe;const Ue=async()=>{try{const{data:ct}=await oe.get("/orders/seller?limit=50");if(!ce){const Cr=(Array.isArray(ct)?ct:ct?.items||[]).filter(ga=>ga?.status!=="delivered").length;f(Cr)}}catch{ce||f(0)}};return Ue(),qe=setInterval(Ue,6e4),()=>{ce=!0,qe&&clearInterval(qe)}},[r,x]),u.useEffect(()=>{if(!r)return b(0),()=>{};let ce=!1,qe;const Ue=async()=>{try{const{data:ct}=await oe.get("/orders/messages/unread");ce||b(ct?.unreadCount||0)}catch{ce||b(0)}};return Ue(),qe=setInterval(Ue,3e4),()=>{ce=!0,qe&&clearInterval(qe)}},[r]);const it=u.useCallback(()=>{Rt.current&&(clearTimeout(Rt.current),Rt.current=null)},[]),gr=u.useCallback(()=>{it(),er(!0)},[it]),wr=u.useCallback(()=>{it(),Rt.current=setTimeout(()=>{er(!1),Rt.current=null},1500)},[it]),xa=u.useCallback(()=>{zt.current&&(clearTimeout(zt.current),zt.current=null)},[]),fa=u.useCallback(()=>{xa(),sr(!0)},[xa]),Ua=u.useCallback(()=>{xa(),zt.current=setTimeout(()=>{sr(!1),zt.current=null},1500)},[xa]);u.useEffect(()=>()=>{it(),xa()},[it,xa]),u.useEffect(()=>{if(typeof window>"u")return;const ce=()=>{Mr(window.innerWidth<1024)};return ce(),window.addEventListener("resize",ce),()=>window.removeEventListener("resize",ce)},[]),u.useEffect(()=>{br&&(re(!1),ve(!1))},[br]),u.useEffect(()=>{or.current=ee},[ee]),u.useEffect(()=>{if(typeof document>"u")return;const ce=document.body;return V||se?(ce.style.overflow="hidden",V&&ce.classList.add("menu-open")):(ce.style.overflow="",ce.classList.remove("menu-open")),()=>{ce.style.overflow="",ce.classList.remove("menu-open")}},[V,se]),u.useEffect(()=>{if(typeof document>"u")return;const ce=qe=>{qe.target.tagName==="INPUT"||qe.target.tagName==="TEXTAREA"||qe.target.isContentEditable||(qe.key==="/"&&!qe.ctrlKey&&!qe.metaKey&&!qe.altKey&&(qe.preventDefault(),Gt.current&&(Gt.current.focus(),mr&&dt(!0))),qe.key==="Escape"&&(se||fe)&&(dt(!1),re(!1),ve(!1),Gt.current&&Gt.current.blur()))};return document.addEventListener("keydown",ce),()=>document.removeEventListener("keydown",ce)},[mr,se,fe]),u.useEffect(()=>{if(!r){It([]);return}try{const ce=localStorage.getItem("hdmarket_saved_searches");ce&&It(JSON.parse(ce))}catch(ce){console.error("Error loading saved searches:",ce)}},[r]);const Na={sparkles:ba,flame:vf,"shield-check":Ga,"trending-up":Pr};u.useEffect(()=>{let ce=!1;return oe.get("/search/quick-filters").then(({data:qe})=>{if(ce||!Array.isArray(qe)||qe.length===0)return;const Ue=qe.map(ct=>({...ct,icon:Na[ct.icon]||ba}));De(Ue)}).catch(()=>{}),()=>{ce=!0}},[]),u.useEffect(()=>{try{const ce=localStorage.getItem("hdmarket_custom_nav_items");ce&&qt(JSON.parse(ce))}catch(ce){console.error("Error loading custom nav items:",ce)}},[]);const nn=[{id:"home",label:"Accueil",path:"/",icon:gN,badge:null,visible:!0,order:0},{id:"shops",label:"Boutiques",path:"/shops/verified",icon:Er,badge:null,visible:!0,order:1},{id:"favorites",label:"Favoris",path:"/favorites",icon:Yr,badge:l,visible:!0,order:2},{id:"cart",label:"Panier",path:"/cart",icon:en,badge:o,visible:!0,order:3},{id:"menu",label:"Menu",path:null,icon:Q4,badge:null,visible:!0,order:4,isButton:!0},{id:"profile",label:"Profil",path:"/profile",icon:Ia,badge:null,visible:!!r,order:5},{id:"notifications",label:"Notifications",path:"/notifications",icon:Kn,badge:O,visible:!!r,order:6},{id:"orders",label:"Commandes",path:"/orders",icon:ea,badge:c,visible:!!r,order:7},{id:"messages",label:"Messages",path:"/orders/messages",icon:ca,badge:g,visible:!!r,order:8},{id:"my",label:"Mes annonces",path:"/my",icon:Ft,badge:null,visible:!!r,order:9},{id:"shop-conversion",label:"Devenir Boutique",path:"/shop-conversion-request",icon:Er,badge:null,visible:!!(r&&r.accountType!=="shop"),order:10},{id:"suggestions",label:"Suggestions",path:"/suggestions",icon:ba,badge:null,visible:!0,order:11}],Fr=Je||nn,ka=Fr.filter(ce=>ce.visible&&ce.order<5).sort((ce,qe)=>ce.order-qe.order),_a=Fr.filter(ce=>ce.visible&&ce.order>=5).sort((ce,qe)=>ce.order-qe.order),Pa=ce=>{le(ce.touches[0].clientY);const qe=setTimeout(()=>{const Ue=ce.currentTarget.dataset.itemId;Ue&&(Se(Ue),rt("medium"))},500);Be(qe)},oo=ce=>{if(Z===null)return;const qe=ce.touches[0].clientY,Ue=Z-qe;_e&&(clearTimeout(_e),Be(null)),!mt&&Ue>20&&(G(!0),rt("light"))},Fe=ce=>{_e&&(clearTimeout(_e),Be(null)),le(null)},$e=ce=>({home:[{label:"Rechercher",action:()=>{Gt.current&&Gt.current.focus(),rt("light")}},{label:"Nouveaux produits",action:()=>{t("/products?sort=newest"),rt("light")}}],favorites:[{label:"Vider les favoris",action:()=>{rt("warning")}}],cart:[{label:"Vider le panier",action:()=>{rt("warning")}},{label:"Voir le panier",action:()=>{t("/cart"),rt("light")}}],profile:[{label:"Paramtres",action:()=>{t("/profile"),rt("light")}},{label:"Statistiques",action:()=>{t("/my/stats"),rt("light")}}],notifications:[{label:"Marquer tout lu",action:()=>{rt("light")}},{label:"Paramtres notifications",action:()=>{t("/profile"),rt("light")}}]})[ce]||[],Ke=ce=>{!mr||!se||ie(ce.touches[0].clientY)},st=ce=>{if(!mr||!se||F===null)return;const Ue=ce.touches[0].clientY-F;Ue>0&&Zt.current&&(Zt.current.style.transform=`translateY(${Math.min(Ue,100)}px)`,Zt.current.style.opacity=`${1-Ue/300}`)},St=ce=>{if(!mr||!se||F===null)return;ce.changedTouches[0].clientY-F>100?(dt(!1),re(!1),ve(!1),Gt.current&&Gt.current.blur(),navigator.vibrate&&navigator.vibrate(50)):Zt.current&&(Zt.current.style.transform="",Zt.current.style.opacity=""),ie(null)},rt=(ce=50)=>{if(typeof navigator<"u"&&navigator.vibrate)if(typeof ce=="string")switch(ce){case"light":navigator.vibrate(25);break;case"medium":navigator.vibrate(50);break;case"heavy":navigator.vibrate(100);break;case"success":navigator.vibrate([50,30,50]);break;case"error":navigator.vibrate([100,50,100]);break;case"warning":navigator.vibrate([75,50,75]);break;default:navigator.vibrate(50)}else navigator.vibrate(ce)},_t=(ce,qe={})=>{if(!ce.trim())return;const ct=[{id:Date.now().toString(),query:ce.trim(),filters:qe,createdAt:new Date().toISOString()},...ut.filter(kt=>kt.query!==ce.trim())].slice(0,10);It(ct);try{localStorage.setItem("hdmarket_saved_searches",JSON.stringify(ct))}catch(kt){console.error("Error saving search:",kt)}rt(50)},Mt=ce=>{const qe=ut.filter(Ue=>Ue.id!==ce);It(qe);try{localStorage.setItem("hdmarket_saved_searches",JSON.stringify(qe))}catch(Ue){console.error("Error deleting saved search:",Ue)}rt(50)},hr=ce=>{Q(ce.query||""),Me(qe=>({...qe,...ce.filters})),Gt.current&&Gt.current.focus(),rt(50)};u.useEffect(()=>{if(!L.trim()){ae({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),ge({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),Ee({products:5,shops:3,categories:3}),ne("");return}ve(!1);const ce=new AbortController,qe=setTimeout(async()=>{W(!0),ne("");try{const Ue=await q4(L.trim(),nt);if(Ue){ae(Ue),ge({products:Ue.products.slice(0,ue.products),shops:Ue.shops.slice(0,ue.shops),categories:Ue.categories.slice(0,ue.categories),totals:Ue.totals}),re(!0),W(!1);const Ur=new Set,tr=Array.isArray(Ue?.products)?Ue.products:[];(Array.isArray(Ue?.categories)?Ue.categories:[]).slice(0,3).forEach(Ut=>{Ut.title&&Ut.title.toLowerCase()!==L.trim().toLowerCase()&&Ur.add(Ut.title)}),tr.slice(0,5).forEach(Ut=>{Ut.category&&Ut.category.toLowerCase()!==L.trim().toLowerCase()&&Ur.add(Ut.category),Ut.brand&&Ut.brand.toLowerCase()!==L.trim().toLowerCase()&&Ur.add(Ut.brand)}),Ze(Array.from(Ur).slice(0,5))}const ct=new URLSearchParams;ct.append("q",L.trim()),nt.category&&ct.append("category",nt.category),nt.minPrice&&ct.append("minPrice",nt.minPrice),nt.maxPrice&&ct.append("maxPrice",nt.maxPrice),nt.city&&ct.append("city",nt.city),nt.shopVerified&&ct.append("shopVerified","true"),nt.condition&&ct.append("condition",nt.condition);const{data:kt}=await oe.get(`/search?${ct.toString()}`,{signal:ce.signal}),Cr={products:Array.isArray(kt?.products)?kt.products:[],shops:Array.isArray(kt?.shops)?kt.shops:[],categories:Array.isArray(kt?.categories)?kt.categories:[],totals:kt?.totals||{products:0,shops:0,categories:0,total:0}};Ue?ge({products:Ue.products.slice(0,ue.products),shops:Ue.shops.slice(0,ue.shops),categories:Ue.categories.slice(0,ue.categories),totals:Ue.totals}):(ae(Cr),ge({products:Cr.products.slice(0,ue.products),shops:Cr.shops.slice(0,ue.shops),categories:Cr.categories.slice(0,ue.categories),totals:Cr.totals}),re(!0)),await RF(L.trim(),nt,Cr);const ga=new Set,us=Array.isArray(kt?.products)?kt.products:[];(Array.isArray(kt?.categories)?kt.categories:[]).slice(0,3).forEach(Ur=>{Ur.title&&Ur.title.toLowerCase()!==L.trim().toLowerCase()&&ga.add(Ur.title)}),us.slice(0,5).forEach(Ur=>{Ur.category&&Ur.category.toLowerCase()!==L.trim().toLowerCase()&&ga.add(Ur.category),Ur.brand&&Ur.brand.toLowerCase()!==L.trim().toLowerCase()&&ga.add(Ur.brand)}),Ue||Ze(Array.from(ga).slice(0,5))}catch(Ue){if(Ue.name!=="CanceledError"&&Ue.name!=="AbortError"){console.error("Search error:",Ue);const ct=await q4(L.trim(),nt);ct?(ae(ct),ge({products:ct.products.slice(0,ue.products),shops:ct.shops.slice(0,ue.shops),categories:ct.categories.slice(0,ue.categories),totals:ct.totals}),re(!0)):(ne("Erreur lors de la recherche. Veuillez ressayer."),ae({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),ge({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}))}}finally{W(!1)}},300);return()=>{clearTimeout(qe),ce.abort()}},[L,nt]);const Pt=u.useCallback(async()=>{if(!r)return J([]),je({pinned:[],today:[],yesterday:[],thisWeek:[],older:[]}),[];At(!0);try{const ce=new URLSearchParams;Re&&ce.append("groupByDate","true"),He.trim()&&ce.append("search",He.trim());const{data:qe}=await oe.get(`/users/search-history?${ce.toString()}`);if(Re&&qe&&typeof qe=="object"&&!Array.isArray(qe)){je({pinned:Array.isArray(qe.pinned)?qe.pinned:[],today:Array.isArray(qe.today)?qe.today:[],yesterday:Array.isArray(qe.yesterday)?qe.yesterday:[],thisWeek:Array.isArray(qe.thisWeek)?qe.thisWeek:[],older:Array.isArray(qe.older)?qe.older:[]});const Ue=[...qe.pinned||[],...qe.today||[],...qe.yesterday||[],...qe.thisWeek||[],...qe.older||[]];return J(Ue),Ue}else{const Ue=Array.isArray(qe)?qe:[];return J(Ue),je({pinned:[],today:[],yesterday:[],thisWeek:[],older:[]}),Ue}}catch{return J([]),je({pinned:[],today:[],yesterday:[],thisWeek:[],older:[]}),[]}finally{At(!1)}},[r,Re,He]),ur=async()=>{if(!r){t("/login",{state:{from:"/profile"}});return}Tt(""),await Pt(),re(!0),ve(!0)};u.useEffect(()=>{if(ee&&r&&He!==void 0){const ce=setTimeout(()=>{Pt()},300);return()=>clearTimeout(ce)}},[He,ee,r,Pt]);const aa=()=>{ve(!1),re(!1)},sn=async ce=>{if(ce)try{await oe.delete(`/users/search-history/${ce}`),J(qe=>qe.filter(Ue=>Ue._id!==ce)),je(qe=>{const Ue={...qe};return Object.keys(Ue).forEach(ct=>{Ue[ct]=Ue[ct].filter(kt=>kt._id!==ce)}),Ue}),await Pt()}catch{}},Ta=async(ce=null)=>{if(r)try{await oe.delete("/users/search-history",{data:ce?{dateRange:ce}:{}}),J([]),je({pinned:[],today:[],yesterday:[],thisWeek:[],older:[]}),await Pt()}catch{}},gn=async ce=>{if(!(!r||!ce))try{const{data:qe}=await oe.patch(`/users/search-history/${ce}/pin`);J(Ue=>Ue.map(ct=>ct._id===ce?{...ct,isPinned:qe.isPinned,pinnedAt:qe.pinnedAt}:ct)),je(Ue=>{const ct={...Ue};return Object.keys(ct).forEach(kt=>{ct[kt]=ct[kt].map(Cr=>Cr._id===ce?{...Cr,isPinned:qe.isPinned,pinnedAt:qe.pinnedAt}:Cr)}),ct}),await Pt()}catch{}},pr=async(ce="json")=>{if(r)try{const qe=await oe.get(`/users/search-history/export?format=${ce}`,{responseType:"blob"}),Ue=new Blob([qe.data]),ct=window.URL.createObjectURL(Ue),kt=document.createElement("a");kt.href=ct,kt.download=`search-history-${Date.now()}.${ce}`,document.body.appendChild(kt),kt.click(),document.body.removeChild(kt),window.URL.revokeObjectURL(ct)}catch(qe){console.error("Error exporting history:",qe)}},na=ce=>{const qe=ce.metadata?.type,Ue=ce.metadata?.targetSlug,ct=ce.metadata?.targetId,kt=!!Ue;return qe==="shop"?kt||ct?Da(kt?{slug:Ue}:{_id:ct}):"/shops/verified":kt?Dr({slug:Ue}):"/shops/verified"},ya=ce=>{re(!1),dt(!1),ve(!1);const qe=L.trim();if(qe&&r)try{oe.post("/users/search-history",{query:qe,metadata:{type:ce?.type,targetId:ce?._id,targetSlug:ce?.slug}}).then(Ue=>{const ct=Ue.data;ct&&J(kt=>[ct,...kt].slice(0,20))}).catch(()=>{})}catch{}if(Q(""),ae({products:[],shops:[],categories:[],totals:{products:0,shops:0,categories:0,total:0}}),ce?.type==="shop"){t(Da(ce));return}if(ce?.type==="category"){t(`/products?category=${encodeURIComponent(ce.title)}&search=${encodeURIComponent(L.trim())}`);return}ce?.slug&&t(Dr(ce))},_s=ce=>{if(ce.key==="Enter"){ce.preventDefault();const{products:qe=[],shops:Ue=[],categories:ct=[]}=B||{},kt=[...qe,...Ue,...ct];kt.length>0&&ya(kt[0])}},Ne=ce=>{re(!1),ve(!1),t(`/products?category=${encodeURIComponent(ce.title)}&search=${encodeURIComponent(L.trim())}`),Q("")},Ye=ce=>{if(!ce)return;const qe=na(ce);qe&&(aa(),t(qe))},Ot=(ce,qe)=>{Me(Ue=>({...Ue,[ce]:qe}))},xr=()=>{Me({category:"",minPrice:"",maxPrice:"",city:"",shopVerified:!1,condition:""})},sa=nt.category||nt.minPrice||nt.maxPrice||nt.city||nt.shopVerified||nt.condition,jr=()=>e.createElement("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse"},e.createElement("div",{className:"h-12 w-12 rounded-lg bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"flex-1 space-y-2"},e.createElement("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.createElement("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}))),da=(ce=!1)=>e.createElement("div",{className:ce?"":"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},!ce&&e.createElement("button",{type:"button",onClick:()=>{mr?(ke(!0),rt(50)):Dt(!xt)},className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(ls,{size:16,className:"text-gray-600 dark:text-gray-400"}),e.createElement("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Filtres"),sa&&e.createElement("span",{className:"bg-[#007AFF] text-white text-xs font-bold px-2 py-0.5 rounded-full"},[nt.category&&1,nt.minPrice&&1,nt.maxPrice&&1,nt.city&&1,nt.shopVerified&&1,nt.condition&&1].filter(Boolean).length)),e.createElement(Za,{size:16,className:`text-gray-500 transition-transform ${xt?"rotate-180":""}`})),(xt||ce)&&e.createElement("div",{className:"px-4 py-3 space-y-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Catgorie"),e.createElement("select",{value:nt.category,onChange:qe=>Ot("category",qe.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#007AFF] focus:border-[#007AFF]"},e.createElement("option",{value:""},"Toutes les catgories"),lt?e.createElement("option",{disabled:!0},"Chargement..."):Qe.map(qe=>e.createElement("option",{key:qe,value:qe},qe)))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Prix (FCFA)"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("input",{type:"number",placeholder:"Min",value:nt.minPrice,onChange:qe=>Ot("minPrice",qe.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#007AFF] focus:border-[#007AFF]",min:"0"}),e.createElement("span",{className:"text-gray-500"},"-"),e.createElement("input",{type:"number",placeholder:"Max",value:nt.maxPrice,onChange:qe=>Ot("maxPrice",qe.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#007AFF] focus:border-[#007AFF]",min:"0"}))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},e.createElement(Wr,{size:12,className:"inline mr-1"}),"Ville"),e.createElement("select",{value:nt.city,onChange:qe=>Ot("city",qe.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#007AFF] focus:border-[#007AFF]"},e.createElement("option",{value:""},"Toutes les villes"),e.createElement("option",{value:"Brazzaville"},"Brazzaville"),e.createElement("option",{value:"Pointe-Noire"},"Pointe-Noire"),e.createElement("option",{value:"Ouesso"},"Ouesso"),e.createElement("option",{value:"Oyo"},"Oyo"))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"tat"),e.createElement("select",{value:nt.condition,onChange:qe=>Ot("condition",qe.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#007AFF] focus:border-[#007AFF]"},e.createElement("option",{value:""},"Tous les tats"),e.createElement("option",{value:"new"},"Neuf"),e.createElement("option",{value:"used"},"Occasion"))),e.createElement("div",null,e.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:nt.shopVerified,onChange:qe=>Ot("shopVerified",qe.target.checked),className:"w-4 h-4 text-[#007AFF] border-gray-300 rounded focus:ring-[#007AFF]"}),e.createElement("span",{className:"text-sm text-gray-700 dark:text-gray-300"},"Boutiques vrifies uniquement"))),sa&&e.createElement("button",{type:"button",onClick:xr,className:"w-full px-3 py-2 text-sm font-semibold text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},"Effacer les filtres"))),Ps=ce=>{Q(ce),re(!0),oe.post("/search/analytics",{query:ce,action:"click"}).catch(()=>{})},lo=()=>{const ce=be.slice(0,5),qe=ce.length>0,Ue=Qe.slice(0,4),ct=vt.filter(kt=>kt.verified).slice(0,4);return e.createElement("div",{className:"max-h-[400px] overflow-auto"},r&&qe&&e.createElement("div",{className:"border-b border-gray-100 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2.5 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Xt,{size:14,className:"text-[#007AFF]"}),e.createElement("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300 uppercase tracking-wide"},"Recherches rcentes")),e.createElement("button",{type:"button",onClick:ur,className:"text-[10px] font-semibold text-[#007AFF] hover:underline"},"Voir tout"))),e.createElement("div",{className:"p-2 flex flex-wrap gap-2"},ce.map(kt=>e.createElement("button",{key:kt._id,type:"button",onClick:()=>Ps(kt.query),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gray-100 dark:bg-gray-800 text-sm text-gray-700 dark:text-gray-300 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors"},e.createElement(Xt,{size:12,className:"text-gray-400"}),e.createElement("span",{className:"truncate max-w-[120px]"},kt.query))))),Ue.length>0&&e.createElement("div",{className:"border-b border-gray-100 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Wa,{size:14,className:"text-[#007AFF]"}),e.createElement("span",{className:"text-xs font-bold text-blue-700 dark:text-blue-300 uppercase tracking-wide"},"Catgories"))),e.createElement("div",{className:"p-2 grid grid-cols-2 gap-2"},Ue.map(kt=>e.createElement("button",{key:kt._id||kt.title,type:"button",onClick:()=>{re(!1),t(`/products?category=${encodeURIComponent(kt.title)}`)},className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-[#007AFF]/40 hover:bg-[rgba(0,122,255,0.08)] transition-all text-left group"},e.createElement("div",{className:"p-1.5 rounded-lg bg-blue-100 dark:bg-blue-900/30 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/40 transition-colors"},e.createElement(Wa,{size:14,className:"text-[#007AFF]"})),e.createElement("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate"},kt.title))))),ct.length>0&&e.createElement("div",null,e.createElement("div",{className:"px-4 py-2.5 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Er,{size:14,className:"text-purple-600 dark:text-purple-400"}),e.createElement("span",{className:"text-xs font-bold text-purple-700 dark:text-purple-300 uppercase tracking-wide"},"Boutiques vrifies")),e.createElement(ye,{to:"/shops/verified",onClick:()=>re(!1),className:"text-[10px] font-semibold text-purple-600 dark:text-purple-400 hover:underline"},"Voir tout"))),e.createElement("div",{className:"p-2 space-y-1"},ct.map(kt=>e.createElement("button",{key:kt._id,type:"button",onClick:()=>{re(!1),t(Da(kt))},className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors text-left group"},e.createElement("img",{src:kt.shopLogo||"/api/placeholder/40/40",alt:kt.shopName,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-700",onError:Cr=>{Cr.target.src="/api/placeholder/40/40"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement("span",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate"},kt.shopName),e.createElement(_n,{verified:kt.verified,showLabel:!1})),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate"},kt.shopAddress||"HDMarket")),e.createElement(Ar,{size:16,className:"text-gray-300 dark:text-gray-600 group-hover:text-purple-500 transition-colors"}))))))},Dn=u.useCallback(ce=>{const qe=ue[ce]||0,Ue=B[ce]||[],ct=Math.min(qe+5,Ue.length);Ee(kt=>({...kt,[ce]:ct})),ge(kt=>({...kt,[ce]:Ue.slice(0,ct)})),rt(50)},[ue,B]),Ao=()=>{const{products:ce=[],shops:qe=[],categories:Ue=[],totals:ct={}}=te||B||{},kt=B?.products||[],Cr=B?.shops||[],ga=B?.categories||[],us=kt.length>ce.length,To=Cr.length>qe.length,Ur=ga.length>Ue.length,tr=(ce?.length||0)>0||(qe?.length||0)>0||(Ue?.length||0)>0,Fn=ct?.total||0;return!L.trim()&&!ee?lo():e.createElement(e.Fragment,null,U&&e.createElement("div",{className:"py-2"},[1,2,3].map(Ut=>e.createElement(jr,{key:Ut}))),!U&&me&&e.createElement("div",{className:"px-4 py-3 flex items-center space-x-3 text-red-500 text-sm"},e.createElement(Yt,{size:16}),me),!U&&!me&&!tr&&L.trim()&&e.createElement("div",{className:"px-4 py-6 text-center text-gray-500"},e.createElement("p",{className:"text-sm"},"Aucun rsultat pour  ",L," "),e.createElement("p",{className:"text-xs mt-2 text-gray-400"},"Essayez avec d'autres mots-cls")),!U&&!me&&tr&&e.createElement("div",{className:"max-h-96 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"},ce.length>0&&e.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Produits (",(ct?.products||0)>ce.length?`${ce.length} sur ${ct.products}`:ce.length,")"))),ce.map(Ut=>e.createElement("button",{key:Ut._id,type:"button",onClick:()=>ya(Ut),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors"},e.createElement("img",{src:Ut.image||Ut.shopLogo||"/api/placeholder/60/60",alt:Ut.title,className:"h-12 w-12 rounded-lg object-cover border border-gray-200 dark:border-gray-600 flex-shrink-0",onError:Bs=>{Bs.target.src="/api/placeholder/60/60"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"font-semibold text-gray-900 dark:text-white text-sm block truncate"},Ii(Ut.title,L)),e.createElement("div",{className:"text-gray-500 text-xs flex items-center gap-2 mt-1 flex-wrap"},Ut.price&&e.createElement("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400"},eC(Ut.price),Ut.discount>0&&e.createElement("span",{className:"ml-1 text-green-600 dark:text-green-400"},"(-",Ut.discount,"%)")),Ut.rating>0&&e.createElement("span",{className:"flex items-center gap-1"},e.createElement(zr,{size:12,className:"fill-yellow-400 text-yellow-400"}),e.createElement("span",null,Ut.rating.toFixed(1)),Ut.ratingCount>0&&e.createElement("span",{className:"text-gray-400"},"(",Ut.ratingCount,")")),Ut.condition&&e.createElement("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${Ut.condition==="new"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`},Ut.condition==="new"?"Neuf":"Occasion"),Ut.shopName&&e.createElement("span",{className:"flex items-center gap-1 truncate"},Ut.shopName,e.createElement(_n,{verified:!!Ut.shopVerified,showLabel:!1})),Ut.category&&e.createElement("span",{className:"truncate"},Ut.category))))),us&&e.createElement("button",{type:"button",onClick:()=>Dn("products"),className:"w-full px-4 py-2 text-sm font-medium text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] border-t border-gray-200 dark:border-gray-700 transition-colors"},"Voir plus de produits (",kt.length-ce.length," restant",kt.length-ce.length>1?"s":"",")")),qe.length>0&&e.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Boutiques (",(ct?.shops||0)>qe.length?`${qe.length} sur ${ct?.shops||0}`:qe.length,")")),qe.map(Ut=>e.createElement("button",{key:Ut._id,type:"button",onClick:()=>ya(Ut),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors"},e.createElement("img",{src:Ut.image||Ut.shopLogo||"/api/placeholder/60/60",alt:Ut.title,className:"h-12 w-12 rounded-lg object-cover border border-gray-200 dark:border-gray-600 flex-shrink-0",onError:Bs=>{Bs.target.src="/api/placeholder/60/60"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"font-semibold text-gray-900 dark:text-white text-sm block truncate"},Ii(Ut.title,L)),e.createElement("div",{className:"text-gray-500 text-xs flex items-center gap-2 mt-1 flex-wrap"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Ft,{size:12}),e.createElement("span",null,Ut.productCount||0," produit",Ut.productCount!==1?"s":"")),Ut.shopAddress&&e.createElement("span",{className:"truncate"},Ut.shopAddress),e.createElement(_n,{verified:!!Ut.shopVerified,showLabel:!1}))))),To&&e.createElement("button",{type:"button",onClick:()=>Dn("shops"),className:"w-full px-4 py-2 text-sm font-medium text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] border-t border-gray-200 dark:border-gray-700 transition-colors"},"Voir plus de boutiques (",Cr.length-qe.length," restant",Cr.length-qe.length>1?"s":"",")")),Ue.length>0&&e.createElement("div",null,e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Catgories (",Ue.length,")")),Ue.map(Ut=>e.createElement("button",{key:Ut._id,type:"button",onClick:()=>Ne(Ut),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors"},e.createElement("div",{className:"h-12 w-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"},e.createElement(Wa,{size:20,className:"text-blue-600 dark:text-blue-400"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"font-semibold text-gray-900 dark:text-white text-sm"},Ii(Ut.title,L)),e.createElement("div",{className:"text-gray-500 text-xs mt-1"},"Voir tous les produits de cette catgorie")))),Ur&&e.createElement("button",{type:"button",onClick:()=>Dn("categories"),className:"w-full px-4 py-2 text-sm font-medium text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] border-t border-gray-200 dark:border-gray-700 transition-colors"},"Voir plus de catgories (",ga.length-Ue.length," restant",ga.length-Ue.length>1?"s":"",")")),gt.length>0&&e.createElement("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800/50 dark:to-gray-900/50"},e.createElement("div",{className:"px-4 py-2.5"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(tn,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.createElement("span",{className:"text-[11px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Les gens recherchent aussi")),e.createElement("div",{className:"flex flex-wrap gap-1.5"},gt.map((Ut,Bs)=>e.createElement("button",{key:Bs,type:"button",onClick:()=>Ps(Ut),className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-xs font-medium text-gray-700 dark:text-gray-300 hover:border-[#007AFF]/40 hover:text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] transition-all"},e.createElement(Tr,{size:10,className:"text-gray-400"}),Ut))))),L.trim()&&Fn>0&&e.createElement("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm text-center sticky bottom-0"},e.createElement(ye,{to:`/products?search=${encodeURIComponent(L.trim())}`,className:"font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 inline-flex items-center gap-2",onClick:()=>{ve(!1),re(!1),dt(!1)}},"Voir tous les rsultats (",Fn,")",e.createElement(Za,{size:16,className:"rotate-[-90deg]"})))))},zs=()=>{const{products:ce=[],shops:qe=[],categories:Ue=[],totals:ct={}}=te||B||{},kt=B?.products||[],Cr=B?.shops||[],ga=B?.categories||[],us=kt.length>ce.length;Cr.length>qe.length,ga.length>Ue.length;const To=(ce?.length||0)>0||(qe?.length||0)>0||(Ue?.length||0)>0,Ur=ct?.total||0;return!L.trim()&&!ee?lo():e.createElement(e.Fragment,null,L.trim()&&!mr&&da(),L.trim()&&mr&&e.createElement("button",{type:"button",onClick:()=>{ke(!0),rt(50)},className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(ls,{size:16,className:"text-gray-600 dark:text-gray-400"}),e.createElement("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Filtres"),sa&&e.createElement("span",{className:"px-2 py-0.5 bg-[#007AFF] text-white text-xs font-bold rounded-full"},Object.values(nt).filter(Boolean).length)),e.createElement(Za,{size:16,className:"text-gray-500 dark:text-gray-400"})),U&&e.createElement("div",{className:"py-2"},[1,2,3].map(tr=>e.createElement(jr,{key:tr}))),!U&&me&&e.createElement("div",{className:"px-4 py-3 flex items-center space-x-3 text-red-500 text-sm"},e.createElement(Yt,{size:16}),me),!U&&!me&&!To&&L.trim()&&e.createElement("div",{className:"px-4 py-6 text-center text-gray-500"},e.createElement("p",{className:"text-sm"},"Aucun rsultat pour  ",L," "),e.createElement("p",{className:"text-xs mt-2 text-gray-400"},"Essayez avec d'autres mots-cls")),!U&&!me&&To&&e.createElement("div",{className:"max-h-80 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"},ce.length>0&&e.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Produits (",ct.products>ce.length?`${ce.length} sur ${ct.products}`:ce.length,")")),ce.map(tr=>{const Fn=tr.image||tr.shopLogo||"/api/placeholder/60/60";return e.createElement("button",{key:tr._id,type:"button",onClick:()=>ya(tr),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0"},e.createElement("img",{src:Fn,alt:tr.title||"Rsultat de recherche",className:"w-14 h-14 rounded-xl object-cover border border-gray-200 dark:border-gray-600 flex-shrink-0",onError:Ut=>{Ut.currentTarget.src="/api/placeholder/60/60"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate"},Ii(tr.title,L)),e.createElement("div",{className:"text-xs text-gray-500 flex items-center gap-2 mt-1 flex-wrap"},tr.price&&e.createElement("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400"},eC(tr.price),tr.discount>0&&e.createElement("span",{className:"ml-1 text-green-600 dark:text-green-400"},"(-",tr.discount,"%)")),tr.rating>0&&e.createElement("span",{className:"flex items-center gap-1"},e.createElement(zr,{size:12,className:"fill-yellow-400 text-yellow-400"}),e.createElement("span",null,tr.rating.toFixed(1)),tr.ratingCount>0&&e.createElement("span",{className:"text-gray-400"},"(",tr.ratingCount,")")),tr.condition&&e.createElement("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${tr.condition==="new"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`},tr.condition==="new"?"Neuf":"Occasion"),tr.shopName&&e.createElement("span",{className:"flex items-center gap-1 truncate"},tr.shopName,e.createElement(_n,{verified:!!tr.shopVerified,showLabel:!1})))))})),qe.length>0&&e.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Boutiques (",(ct?.shops||0)>qe.length?`${qe.length} sur ${ct?.shops||0}`:qe.length,")")),qe.map(tr=>{const Fn=tr.image||tr.shopLogo||"/api/placeholder/60/60";return e.createElement("button",{key:tr._id,type:"button",onClick:()=>ya(tr),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0"},e.createElement("img",{src:Fn,alt:tr.title||"Boutique",className:"w-14 h-14 rounded-xl object-cover border border-gray-200 dark:border-gray-600 flex-shrink-0",onError:Ut=>{Ut.currentTarget.src="/api/placeholder/60/60"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white text-sm truncate"},Ii(tr.title,L)),e.createElement("div",{className:"text-xs text-gray-500 flex items-center gap-2 mt-1 flex-wrap"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Ft,{size:12}),e.createElement("span",null,tr.productCount||0," produit",tr.productCount!==1?"s":"")),tr.shopAddress&&e.createElement("span",{className:"truncate"},tr.shopAddress),e.createElement(_n,{verified:!!tr.shopVerified,showLabel:!1}))))}),us&&e.createElement("button",{type:"button",onClick:()=>Dn("products"),className:"w-full px-4 py-2 text-sm font-medium text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] border-t border-gray-200 dark:border-gray-700 transition-colors"},"Voir plus (",kt.length-ce.length," restant",kt.length-ce.length>1?"s":"",")")),Ue.length>0&&e.createElement("div",null,e.createElement("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700"},e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Catgories (",Ue.length,")")),Ue.map(tr=>e.createElement("button",{key:tr._id,type:"button",onClick:()=>Ne(tr),className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0"},e.createElement("div",{className:"w-14 h-14 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0"},e.createElement(Wa,{size:20,className:"text-blue-600 dark:text-blue-400"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white text-sm"},Ii(tr.title,L)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Voir tous les produits")))),us&&e.createElement("button",{type:"button",onClick:()=>Dn("products"),className:"w-full px-4 py-2 text-sm font-medium text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] border-t border-gray-200 dark:border-gray-700 transition-colors"},"Voir plus (",kt.length-ce.length," restant",kt.length-ce.length>1?"s":"",")")),gt.length>0&&e.createElement("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800/50 dark:to-gray-900/50"},e.createElement("div",{className:"px-4 py-2.5"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(tn,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.createElement("span",{className:"text-[11px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Les gens recherchent aussi")),e.createElement("div",{className:"flex flex-wrap gap-1.5"},gt.map((tr,Fn)=>e.createElement("button",{key:Fn,type:"button",onClick:()=>Ps(tr),className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-xs font-medium text-gray-700 dark:text-gray-300 hover:border-[#007AFF]/40 hover:text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] transition-all"},e.createElement(Tr,{size:10,className:"text-gray-400"}),tr))))),L.trim()&&Ur>0&&e.createElement("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm text-center sticky bottom-0"},e.createElement(ye,{to:`/products?search=${encodeURIComponent(L.trim())}`,className:"font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 inline-flex items-center gap-2",onClick:()=>{ve(!1),re(!1),dt(!1)}},"Voir tous les rsultats (",Ur,")",e.createElement(Za,{size:16,className:"rotate-[-90deg]"})))))},On=(ce,qe=0)=>{const Ue=ce.metadata?.type==="shop"?"Boutique":ce.metadata?.type==="category"?"Catgorie":"Produit",ct=ce.metadata?.type==="shop"?e.createElement(Er,{size:14,className:"text-purple-500"}):ce.metadata?.type==="category"?e.createElement(Wa,{size:14,className:"text-blue-500"}):e.createElement(Ft,{size:14,className:"text-indigo-500"}),kt=ce.metadata?.type==="shop"?"bg-purple-100 dark:bg-purple-900/30":ce.metadata?.type==="category"?"bg-blue-100 dark:bg-blue-900/30":"bg-indigo-100 dark:bg-indigo-900/30";return e.createElement("div",{key:ce._id,role:"button",tabIndex:0,onClick:()=>Ye(ce),onKeyDown:Cr=>{(Cr.key==="Enter"||Cr.key===" ")&&(Cr.preventDefault(),Ye(ce))},className:`group flex items-center gap-3 p-2.5 rounded-xl bg-white dark:bg-gray-800 border transition-all duration-200 cursor-pointer ${ce.isPinned?"border-amber-300 dark:border-amber-600/50 bg-amber-50/50 dark:bg-amber-900/10":"border-gray-100 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"} hover:shadow-md hover:shadow-indigo-100 dark:hover:shadow-indigo-900/20`},ce.isPinned&&e.createElement("div",{className:"flex-shrink-0"},e.createElement(cx,{size:14,className:"text-amber-500 fill-amber-500"})),e.createElement("div",{className:`p-2 rounded-lg ${kt} flex-shrink-0`},ct),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"},Ii(ce.query,He)),e.createElement("div",{className:"flex items-center gap-2 mt-0.5"},e.createElement("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium ${ce.metadata?.type==="shop"?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":ce.metadata?.type==="category"?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300"}`},Ue),e.createElement("span",{className:"text-[10px] text-gray-400 dark:text-gray-500"},oU(ce.createdAt)))),e.createElement("div",{className:"flex items-center gap-1 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"},e.createElement("button",{type:"button",onClick:Cr=>{Cr.stopPropagation(),gn(ce._id)},className:`p-1.5 rounded-lg transition-colors ${ce.isPinned?"text-amber-600 hover:bg-amber-100 dark:hover:bg-amber-900/30":"text-gray-400 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:ce.isPinned?"Dspingler":"pingler"},ce.isPinned?e.createElement(eq,{size:14}):e.createElement(cx,{size:14})),e.createElement("button",{type:"button",onClick:Cr=>{Cr.stopPropagation(),Ye(ce)},className:"p-1.5 text-indigo-600 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Rechercher"},e.createElement(Tr,{size:14})),e.createElement("button",{type:"button",onClick:Cr=>{Cr.stopPropagation(),sn(ce._id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Supprimer"},e.createElement(is,{size:14}))),e.createElement(Ar,{size:14,className:"text-gray-300 dark:text-gray-600 group-hover:text-indigo-400 transition-colors flex-shrink-0"}))},_o=()=>{const ce=be.length>0,qe=Re&&(Ge.pinned.length>0||Ge.today.length>0||Ge.yesterday.length>0||Ge.thisWeek.length>0||Ge.older.length>0);return e.createElement("div",{className:"text-sm text-gray-900 dark:text-white"},e.createElement("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600 px-4 py-3 rounded-t-2xl"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"p-1.5 bg-white/20 rounded-lg backdrop-blur-sm"},e.createElement(Xt,{size:16,className:"text-white"})),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-semibold text-white"},"Historique"),e.createElement("p",{className:"text-[10px] text-indigo-100"},ce?`${be.length} recherche${be.length>1?"s":""}`:"Aucune recherche"))),e.createElement("div",{className:"flex items-center gap-1"},ce&&e.createElement(e.Fragment,null,e.createElement("button",{type:"button",onClick:()=>pr("json"),className:"p-1.5 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Exporter (JSON)"},e.createElement(zo,{size:14})),e.createElement("button",{type:"button",onClick:()=>et(!Re),className:"p-1.5 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:Re?"Vue simple":"Vue groupe"},e.createElement(dn,{size:14}))),e.createElement("button",{type:"button","aria-label":"Fermer l'historique",onClick:aa,className:"p-1.5 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors"},e.createElement(jt,{size:16})))),ce&&e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/60",size:14}),e.createElement("input",{type:"text",value:He,onChange:Ue=>{Tt(Ue.target.value),setTimeout(()=>Pt(),300)},placeholder:"Rechercher dans l'historique...",className:"w-full pl-9 pr-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg text-white placeholder:text-white/60 text-sm focus:outline-none focus:ring-2 focus:ring-white/50 focus:bg-white/30"}),He&&e.createElement("button",{type:"button",onClick:()=>{Tt(""),Pt()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-white/60 hover:text-white"},e.createElement(jt,{size:14})))),e.createElement("div",{className:"p-3 bg-gray-50 dark:bg-gray-900/50 rounded-b-2xl"},tt?e.createElement("div",{className:"space-y-2"},[1,2,3].map(Ue=>e.createElement("div",{key:Ue,className:"flex items-center gap-3 p-3 rounded-xl bg-white dark:bg-gray-800 animate-pulse"},e.createElement("div",{className:"h-8 w-8 rounded-lg bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"flex-1 space-y-2"},e.createElement("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.createElement("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}))))):ce?e.createElement("div",{className:"space-y-4 max-h-96 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"},Re&&qe?e.createElement(e.Fragment,null,Ge.pinned.length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(cx,{size:12,className:"text-amber-500 fill-amber-500"}),e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"pingles (",Ge.pinned.length,")")),e.createElement("button",{type:"button",onClick:()=>Ta("all"),className:"text-[10px] text-red-600 hover:text-red-700 dark:text-red-400"},"Effacer")),e.createElement("div",{className:"space-y-2"},Ge.pinned.map((Ue,ct)=>On(Ue,ct)))),Ge.today.length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Aujourd'hui (",Ge.today.length,")"),e.createElement("button",{type:"button",onClick:()=>Ta("today"),className:"text-[10px] text-red-600 hover:text-red-700 dark:text-red-400"},"Effacer")),e.createElement("div",{className:"space-y-2"},Ge.today.map((Ue,ct)=>On(Ue,ct)))),Ge.yesterday.length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Hier (",Ge.yesterday.length,")"),e.createElement("button",{type:"button",onClick:()=>Ta("yesterday"),className:"text-[10px] text-red-600 hover:text-red-700 dark:text-red-400"},"Effacer")),e.createElement("div",{className:"space-y-2"},Ge.yesterday.map((Ue,ct)=>On(Ue,ct)))),Ge.thisWeek.length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Cette semaine (",Ge.thisWeek.length,")"),e.createElement("button",{type:"button",onClick:()=>Ta("week"),className:"text-[10px] text-red-600 hover:text-red-700 dark:text-red-400"},"Effacer")),e.createElement("div",{className:"space-y-2"},Ge.thisWeek.map((Ue,ct)=>On(Ue,ct)))),Ge.older.length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Plus ancien (",Ge.older.length,")"),e.createElement("button",{type:"button",onClick:()=>Ta("month"),className:"text-[10px] text-red-600 hover:text-red-700 dark:text-red-400"},"Effacer")),e.createElement("div",{className:"space-y-2"},Ge.older.map((Ue,ct)=>On(Ue,ct))))):e.createElement("div",{className:"space-y-2"},be.map((Ue,ct)=>On(Ue,ct)))):e.createElement("div",{className:"text-center py-8"},e.createElement("div",{className:"inline-flex p-3 rounded-full bg-gray-100 dark:bg-gray-800 mb-3"},e.createElement(Xt,{size:24,className:"text-gray-400"})),e.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},He?"Aucun rsultat":"Aucun historique"),e.createElement("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1"},He?"Essayez avec d'autres mots-cls":"Vos recherches rcentes apparatront ici")),ce&&e.createElement("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>pr("csv"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors"},e.createElement(zo,{size:12}),"Exporter CSV"),e.createElement("button",{type:"button",onClick:()=>pr("json"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors"},e.createElement(zo,{size:12}),"Exporter JSON")),e.createElement("button",{type:"button",onClick:()=>Ta("all"),className:"px-3 py-1.5 text-xs font-semibold text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"},"Tout effacer"))))};u.useEffect(()=>{let ce=!1;return(async()=>{pe(!0),ft("");try{const{data:Ue}=await oe.get("/shops");ce||pt(Array.isArray(Ue)?Ue:[])}catch(Ue){ce||(console.error("Shops loading error:",Ue),ft("Impossible de charger les boutiques. Vrifiez votre connexion."),pt([]))}finally{ce||pe(!1)}})(),()=>{ce=!0}},[]),u.useEffect(()=>{let ce=!1;return(async()=>{try{const{data:Ue}=await oe.get("/settings/app-logo");if(ce)return;Lt({desktop:Ue?.appLogoDesktop||"",mobile:Ue?.appLogoMobile||""})}catch{ce||Lt({desktop:"",mobile:""})}})(),()=>{ce=!0}},[]);const Ni=ce=>{ce.path?(t(ce.path),dt(!1),re(!1),rt("light")):hr(ce)},el=()=>e.createElement("div",{className:"grid grid-cols-2 gap-2 mb-4"},de.map(ce=>{const qe=ce.icon||Ln;return e.createElement("button",{key:ce.id,type:"button",onClick:()=>Ni(ce),className:"flex items-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl hover:from-indigo-100 hover:to-purple-100 dark:hover:from-indigo-900/30 dark:hover:to-purple-900/30 transition-all group"},e.createElement(qe,{size:18,className:"text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform"}),e.createElement("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300"},ce.label))})),Po=()=>ut.length===0?null:e.createElement("div",{className:"mb-4"},e.createElement("div",{className:"flex items-center justify-between mb-2 px-1"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(gz,{size:14,className:"text-indigo-600 dark:text-indigo-400"}),e.createElement("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},"Recherches sauvegardes"))),e.createElement("div",{className:"flex flex-wrap gap-2"},ut.map(ce=>e.createElement("div",{key:ce.id,className:"group flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors"},e.createElement("button",{type:"button",onClick:()=>{Q(ce.query),Me(qe=>({...qe,...ce.filters})),rt(50)},className:"flex-1 text-left text-sm font-medium text-gray-700 dark:text-gray-300"},ce.query),e.createElement("button",{type:"button",onClick:()=>Mt(ce.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 text-red-500 hover:text-red-700"},e.createElement(jt,{size:12}))))));return e.createElement(e.Fragment,null,se&&mr&&e.createElement("div",{ref:Zt,className:"fixed inset-0 z-[100] bg-white dark:bg-gray-900",style:{paddingTop:"env(safe-area-inset-top)"},onTouchStart:Ke,onTouchMove:st,onTouchEnd:St},e.createElement("div",{className:"h-full flex flex-col"},e.createElement("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"},e.createElement("button",{type:"button",onClick:()=>{dt(!1),re(!1),ve(!1),Gt.current&&Gt.current.blur(),rt(50)},className:"p-2 -ml-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"},e.createElement(sz,{size:20})),e.createElement("div",{className:"flex-1 relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.createElement("input",{ref:Gt,type:"text",value:L,onChange:ce=>Q(ce.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-4 py-3 bg-gray-100 dark:bg-gray-800 border-0 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:bg-white dark:focus:bg-gray-700 transition-all text-sm",onKeyDown:_s,autoFocus:!0}),L&&e.createElement("button",{type:"button",onClick:()=>{Q(""),rt(50)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},e.createElement(jt,{size:18}))),L.trim()&&e.createElement("button",{type:"button",onClick:()=>_t(L,nt),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"Sauvegarder la recherche"},e.createElement(vc,{size:18}))),e.createElement("div",{className:"overflow-y-auto flex-1 bg-white dark:bg-gray-900"},!L.trim()&&e.createElement(e.Fragment,null,e.createElement("div",{className:"px-4 py-3"},el(),Po()),lo()),fe&&e.createElement("div",{className:"mt-4 px-4"},ee?_o():zs())),he&&e.createElement("div",{className:"fixed inset-x-0 bottom-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 rounded-t-3xl shadow-2xl z-[101] max-h-[80vh] overflow-y-auto"},e.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between"},e.createElement("h3",{className:"font-bold text-lg text-gray-900 dark:text-white"},"Filtres"),e.createElement("button",{type:"button",onClick:()=>{ke(!1),rt(50)},className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"p-4"},da(!0))))),e.createElement("nav",{className:"fixed top-0 left-0 right-0 z-50 backdrop-blur-xl bg-white/95 dark:bg-gray-900/95 shadow-lg border-b border-gray-200/50 dark:border-gray-800/50",style:{paddingTop:"env(safe-area-inset-top)"}},e.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 max-w-[1400px] 2xl:max-w-[1600px]"},e.createElement("div",{className:"flex items-center justify-between h-16 gap-4 lg:gap-6"},e.createElement(ye,{to:"/",className:"flex items-center space-x-2 sm:space-x-3 group active:scale-95 transition-transform"},e.createElement(e.Fragment,null,e.createElement("img",{src:Oe,alt:"Logo HDMarket",className:"h-10 w-10 sm:h-14 sm:w-14 rounded-xl object-contain border border-gray-200/60 dark:border-gray-700/60 bg-white dark:bg-gray-800 shadow-sm sm:shadow-md transition-all duration-300 group-hover:shadow-lg sm:hidden"}),e.createElement("img",{src:ra,alt:"Logo HDMarket",className:"hidden h-[62px] w-auto max-w-[200px] object-contain sm:block transition-all duration-300 group-hover:scale-105",style:{lineHeight:"28px"}}))),r&&e.createElement("div",{className:"md:hidden flex items-center gap-2"},e.createElement(ye,{to:"/notifications",className:"relative flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 active:scale-95","aria-label":"Notifications"},e.createElement(Kn,{className:"text-gray-600 dark:text-gray-300",size:18}),O>0&&e.createElement("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center shadow-lg"},O>99?"99+":O))),e.createElement("div",{className:"hidden lg:flex flex-1 max-w-xl mx-4"},e.createElement("div",{className:"relative w-full"},e.createElement(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.createElement("input",{ref:Gt,type:"text",value:L,onChange:ce=>Q(ce.target.value),placeholder:"Rechercher produits, boutiques, catgories...",className:"w-full pl-12 pr-20 py-3 bg-gray-100 dark:bg-gray-800 border-0 rounded-2xl focus:ring-2 focus:ring-indigo-500 focus:bg-white dark:focus:bg-gray-700 transition-all duration-200 placeholder-gray-500 text-sm",onFocus:()=>{re(!0),mr&&dt(!0),r&&be.length===0&&Pt()},onKeyDown:_s,onBlur:()=>setTimeout(()=>re(!1),250)}),e.createElement("div",{className:"absolute right-3 top-1/2 -translate-y-1/2"},e.createElement("button",{onClick:ur,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 px-2 py-1 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"},"Historique")),fe&&e.createElement("div",{className:"absolute top-14 left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl max-h-80 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 z-50 w-full"},ee?_o():Ao()))),e.createElement("div",{className:"hidden md:flex items-center gap-2"},r&&e.createElement(e.Fragment,null,e.createElement(ye,{to:"/notifications",className:"relative flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200","aria-label":"Notifications"},e.createElement(Kn,{size:18}),O>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center"},O>99?"99+":O)),e.createElement(ye,{to:"/orders/messages",className:"relative flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200","aria-label":"Messages"},e.createElement(ca,{size:18}),K&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center animate-pulse"},H)),e.createElement(ye,{to:"/favorites",className:"relative flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200","aria-label":"Favoris"},e.createElement(Yr,{size:18}),l>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center"},l>99?"99+":l)),e.createElement(ye,{to:"/cart",className:"relative flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200","aria-label":"Panier"},e.createElement(en,{size:18}),o>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-indigo-600 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center"},o>99?"99+":o))),r?e.createElement("div",{className:"relative group"},e.createElement("button",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200"},e.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center"},e.createElement("span",{className:"text-white font-semibold text-sm"},r.name?.charAt(0)?.toUpperCase()||"U")),e.createElement("span",{className:"font-medium text-gray-700 dark:text-gray-200 max-w-24 truncate hidden lg:block"},r.name||"Mon compte"),e.createElement(Za,{size:16,className:"text-gray-500 hidden lg:block"})),e.createElement("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50"},e.createElement("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700"},e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white truncate"},r.name||"Utilisateur"),e.createElement("p",{className:"text-sm text-gray-500 truncate"},r.email)),e.createElement("div",{className:"p-2"},e.createElement(ye,{to:"/profile",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Ia,{size:16}),e.createElement("span",null,"Mon profil")),e.createElement(ye,{to:"/my",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Ft,{size:16}),e.createElement("span",null,"Mes annonces")),e.createElement(ye,{to:"/orders",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ea,{size:16}),e.createElement("span",null,"Mes commandes"),R&&e.createElement("span",{className:"ml-auto bg-indigo-600 text-white text-xs font-bold px-2 py-0.5 rounded-full"},D)),e.createElement(ye,{to:"/seller/orders",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Ft,{size:16}),e.createElement("span",null,"Commandes clients"),$&&e.createElement("span",{className:"ml-auto bg-emerald-600 text-white text-xs font-bold px-2 py-0.5 rounded-full"},j)),(E||w)&&e.createElement(ye,{to:"/admin/products",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Ft,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Produits")),(E||y)&&e.createElement(ye,{to:"/admin/delivery-guys",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Kr,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Livreurs")),r?.role==="admin"&&e.createElement(ye,{to:"/admin/chat-templates",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ca,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Chat templates")),r?.role==="admin"&&e.createElement(ye,{to:"/admin/settings",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Nu,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"App Settings")),(x||r?.canReadFeedback)&&e.createElement(ye,{to:"/admin/feedback",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ca,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Avis amlioration"),P>0&&e.createElement("span",{className:"ml-auto bg-emerald-500 text-white text-xs font-bold px-2 py-0.5 rounded-full"},P>99?"99+":P)),(x||r?.canVerifyPayments)&&e.createElement(ye,{to:"/admin/payment-verification",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ar,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Vrifier paiements"),S>0&&e.createElement("span",{className:"ml-auto flex items-center justify-center min-w-[22px] h-6 px-2 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg border-2 border-white dark:border-gray-800 animate-pulse"},S>99?"99+":S)),(E||r?.canManageComplaints)&&e.createElement(ye,{to:"/admin/complaints",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Yt,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Traiter les rclamations")),!x&&r?.canManageBoosts&&e.createElement(ye,{to:"/admin/product-boosts",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ba,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Boost produits")),x&&e.createElement(ye,{to:"/admin/payment-verifiers",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(tn,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Vrificateurs paiements")),x&&e.createElement(ye,{to:"/admin/product-boosts",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(ba,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Boost produits")),x&&e.createElement(ye,{to:"/admin/reports",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Pn,{size:16}),e.createElement("span",{className:"text-sm font-semibold"},"Rapports")),e.createElement(ye,{to:"/my/stats",className:"flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(mn,{size:16}),e.createElement("span",null,"Statistiques")),e.createElement(ye,{to:"/favorites",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(Yr,{size:16}),e.createElement("span",null,"Favoris"),l>0&&e.createElement("span",{className:"ml-auto bg-pink-500 text-white text-xs font-bold px-2 py-0.5 rounded-full"},l)),e.createElement(ye,{to:"/cart",className:"relative flex items-center gap-3 px-3 py-2 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},e.createElement(en,{size:16}),e.createElement("span",null,"Panier"),o>0&&e.createElement("span",{className:"ml-auto bg-indigo-600 text-white text-xs font-bold px-2 py-0.5 rounded-full"},o)),e.createElement("button",{onClick:a,className:"flex items-center gap-3 px-3 py-2 rounded-xl text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors w-full text-left"},e.createElement(X4,{size:16}),e.createElement("span",null,"Dconnexion"))))):e.createElement("div",{className:"flex items-center gap-2"},e.createElement($r,{to:"/login",className:"px-3 py-2 rounded-full border border-[#007AFF] text-[#007AFF] font-medium hover:bg-[rgba(0,122,255,0.08)] tap-feedback transition-all duration-200"},"Connexion"),e.createElement($r,{to:"/register",className:"px-3 py-2 rounded-xl bg-indigo-600 text-white font-medium hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200"},"Inscription"))),e.createElement("button",{onClick:()=>q(!V),className:`md:hidden flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-300 active:scale-95 ${V?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"aria-label":V?"Fermer le menu":"Ouvrir le menu"},V?e.createElement(jt,{size:20,strokeWidth:2.5}):e.createElement(Q4,{size:20,strokeWidth:2})))),e.createElement("div",{className:"hidden lg:block bg-gradient-to-r from-indigo-600 to-indigo-700 dark:from-indigo-800 dark:to-indigo-900"},e.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 max-w-[1400px] 2xl:max-w-[1600px]"},e.createElement("div",{className:"flex items-center gap-1 h-12"},e.createElement($r,{to:"/",className:({isActive:ce})=>`px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 ${ce?"underline":""}`},"Accueil"),e.createElement("div",{className:"relative"},e.createElement("button",{onMouseEnter:fa,onMouseLeave:Ua,className:"px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 flex items-center gap-1"},"Catgories",e.createElement(Za,{size:16,className:`transition-transform duration-200 ${Nt?"rotate-180":""}`})),Nt&&e.createElement("div",{className:"absolute left-0 mt-0 w-[800px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl z-50 overflow-hidden",onMouseEnter:fa,onMouseLeave:Ua},e.createElement("div",{className:"p-6"},e.createElement("div",{className:"grid grid-cols-3 gap-6"},to.map(ce=>{const qe=ce.icon;return e.createElement("div",{key:ce.id,className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-2 mb-3"},qe&&e.createElement(qe,{className:"w-5 h-5 text-indigo-600"}),e.createElement("h3",{className:"font-bold text-gray-900 dark:text-white text-sm"},ce.label)),e.createElement("ul",{className:"space-y-1"},ce.options.map(Ue=>e.createElement("li",{key:Ue.value},e.createElement(ye,{to:`/categories/${Ue.value}`,className:"block px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>sr(!1)},Ue.label)))))})),e.createElement("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:"/products",className:"text-sm font-semibold text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 flex items-center gap-2",onClick:()=>sr(!1)},"Voir toutes les catgories "))))),e.createElement("div",{className:"relative"},e.createElement("button",{onMouseEnter:gr,onMouseLeave:wr,className:"px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 flex items-center gap-1"},"Boutiques",e.createElement(Za,{size:16,className:`transition-transform duration-200 ${nr?"rotate-180":""}`})),nr&&e.createElement("div",{className:"absolute left-0 mt-0 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl z-50 overflow-hidden",onMouseEnter:gr,onMouseLeave:wr},e.createElement("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between gap-3"},e.createElement("div",null,e.createElement("h3",{className:"font-bold text-gray-900 dark:text-white"},"Nos Boutiques"),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Dcouvrez nos vendeurs professionnels")),e.createElement(ye,{to:"/shops/verified",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-500",onClick:()=>er(!1)},"Tout voir ")),e.createElement("div",{className:"max-h-96 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"},Le?e.createElement("div",{className:"p-4 flex items-center justify-center"},e.createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-indigo-600 border-t-transparent"})):Pe?e.createElement("div",{className:"p-4 text-center text-red-500 text-sm flex items-center justify-center gap-2"},e.createElement(Yt,{size:16}),Pe):vt.length===0?e.createElement("div",{className:"p-4 text-center text-gray-500 text-sm"},"Aucune boutique enregistre pour le moment."):e.createElement("div",{className:"p-2"},vt.map(ce=>e.createElement(ye,{key:ce._id,to:Da(ce),className:"flex items-center gap-3 rounded-xl p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",onClick:()=>er(!1)},e.createElement("img",{src:ce.shopLogo||"/api/placeholder/60/60",alt:ce.shopName,className:"h-12 w-12 rounded-xl object-cover border border-gray-200 dark:border-gray-600 group-hover:border-indigo-300 transition-colors",onError:qe=>{qe.target.src="/api/placeholder/60/60"}}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"font-semibold text-gray-900 dark:text-white text-sm block group-hover:text-indigo-600 transition-colors"},ce.shopName),e.createElement(_n,{verified:!!ce.shopVerified,showLabel:!1})),e.createElement("span",{className:"text-xs text-gray-500 block mt-1 truncate"},ce.shopAddress||"Adresse non renseigne"),e.createElement("span",{className:"text-xs text-indigo-600 font-semibold"},ce.productCount||0," annonce",ce.productCount>1?"s":"")))))))),e.createElement($r,{to:"/top-deals",className:({isActive:ce})=>`px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 ${ce?"underline":""}`},"Promotions"),e.createElement($r,{to:"/top-new",className:({isActive:ce})=>`px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 ${ce?"underline":""}`},"Nouveauts"),e.createElement(ye,{to:"/reclamations",className:"px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200"},"Rclamations"),e.createElement(ye,{to:"/avis-amelioration",className:"px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200"},"Avis amlioration"),r&&r.accountType!=="shop"&&e.createElement($r,{to:"/shop-conversion-request",className:({isActive:ce})=>`px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 ${ce?"underline":""}`},"Devenir Boutique"),E&&e.createElement($r,{to:"/admin",className:({isActive:ce})=>`px-4 py-2 text-white font-semibold text-sm hover:underline transition-all duration-200 flex items-center gap-1.5 ${ce?"underline":""}`},e.createElement(wu,{size:16}),v?"Gestion":"Admin"),r&&e.createElement(ye,{to:"/my",className:"ml-auto px-4 py-2 bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 font-bold text-sm rounded-xl hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all duration-200 flex items-center gap-2 shadow-md hover:shadow-lg"},e.createElement(Bo,{size:16}),"Vendre")))),e.createElement("div",{className:`lg:hidden mt-2 border-t border-gray-200/60 dark:border-gray-800/60 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md mb-6 ${br?"hidden":""}`},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-3"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),e.createElement("input",{ref:Gt,type:"text",value:L,onChange:ce=>Q(ce.target.value),placeholder:"Rechercher produits, boutiques...",className:"w-full pl-11 pr-20 py-3 bg-gray-50 dark:bg-gray-800/80 border border-gray-200/60 dark:border-gray-700/60 rounded-2xl focus:ring-2 focus:ring-[#007AFF]/50 focus:border-[#007AFF] focus:bg-white dark:focus:bg-gray-800 transition-all duration-200 text-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 shadow-sm focus:shadow-md",onFocus:()=>{re(!0),mr&&dt(!0),r&&be.length===0&&Pt()},onKeyDown:_s,onBlur:()=>setTimeout(()=>re(!1),250)}),e.createElement("div",{className:"absolute right-3 top-1/2 -translate-y-1/2"},e.createElement("button",{onClick:ur,className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 px-2 py-1 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors"},"Historique")),fe&&!se&&e.createElement("div",{className:"absolute top-14 left-0 right-0 bg-white dark:bg-gray-900 border border-gray-200/80 dark:border-gray-700/80 rounded-2xl shadow-2xl max-h-80 overflow-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 z-40 backdrop-blur-xl"},ee?_o():zs()))))),V&&e.createElement("div",{className:"md:hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm mt-16"},e.createElement("div",{className:"bg-white dark:bg-gray-900 h-full overflow-y-auto pb-32"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-3"},e.createElement($r,{to:"/",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(gN,{size:20}),"Accueil"),e.createElement($r,{to:"/shops/verified",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(Er,{size:20}),"Boutiques"),e.createElement($r,{to:"/suggestions",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(ba,{size:20}),"Suggestions"),e.createElement(ye,{to:"/reclamations",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Yt,{size:20}),"Rclamations"),e.createElement(ye,{to:"/avis-amelioration",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ca,{size:20}),"Avis amlioration"),r&&e.createElement(e.Fragment,null,e.createElement($r,{to:"/my",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(Ft,{size:20}),"Mes annonces"),e.createElement($r,{to:"/profile",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(Ia,{size:20}),"Mon profil"),e.createElement($r,{to:"/my/stats",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(mn,{size:20}),"Statistiques"),r&&r.accountType!=="shop"&&e.createElement($r,{to:"/shop-conversion-request",onClick:()=>q(!1),className:({isActive:ce})=>`flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ${ce?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200"}`},e.createElement(Er,{size:20}),"Devenir Boutique"),e.createElement($r,{to:"/notifications",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Kn,{size:20}),"Notifications",O>0&&e.createElement("span",{className:"ml-auto bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"},O)),e.createElement($r,{to:"/orders",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ea,{size:20}),"Mes commandes",R&&e.createElement("span",{className:"ml-auto bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded-full"},D)),e.createElement($r,{to:"/orders/messages",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ca,{size:20}),"Messages",K&&e.createElement("span",{className:"ml-auto bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse"},H)),e.createElement($r,{to:"/seller/orders",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Ft,{size:20}),"Commandes clients",$&&e.createElement("span",{className:"ml-auto bg-emerald-600 text-white text-xs font-bold px-2 py-1 rounded-full"},j)),E&&e.createElement($r,{to:"/admin/orders",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ea,{size:20}),"Commandes admin"),(x||r?.canReadFeedback)&&e.createElement($r,{to:"/admin/feedback",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ca,{size:20}),"Avis amlioration",P>0&&e.createElement("span",{className:"ml-auto bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full"},P>99?"99+":P)),(x||r?.canVerifyPayments)&&e.createElement($r,{to:"/admin/payment-verification",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ar,{size:20}),e.createElement("span",null,"Vrifier paiements"),S>0&&e.createElement("span",{className:"ml-auto flex items-center justify-center min-w-[22px] h-6 px-2 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg border-2 border-white dark:border-gray-800 animate-pulse"},S>99?"99+":S)),(E||r?.canManageComplaints)&&e.createElement($r,{to:"/admin/complaints",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Yt,{size:20}),"Traiter les rclamations"),!x&&r?.canManageBoosts&&e.createElement($r,{to:"/admin/product-boosts",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ba,{size:20}),"Boost produits"),x&&e.createElement($r,{to:"/admin/payment-verifiers",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(tn,{size:20}),"Vrificateurs paiements"),x&&e.createElement($r,{to:"/admin/product-boosts",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(ba,{size:20}),"Boost produits"),x&&e.createElement($r,{to:"/admin/reports",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Pn,{size:20}),"Rapports"),(E||w)&&e.createElement($r,{to:"/admin/products",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Ft,{size:20}),"Produits"),(E||y)&&e.createElement($r,{to:"/admin/delivery-guys",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Kr,{size:20}),"Livreurs")),E&&e.createElement(e.Fragment,null,e.createElement($r,{to:"/admin",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-amber-100 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 font-medium hover:bg-amber-200 dark:hover:bg-amber-900/30 transition-colors"},e.createElement(wu,{size:20}),v?"Espace gestionnaire":"Administration",S>0&&e.createElement("span",{className:"ml-auto bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full"},S)),r?.role==="admin"&&e.createElement(e.Fragment,null,e.createElement($r,{to:"/admin/chat-templates",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors"},e.createElement(ca,{size:20}),"Chat templates"),e.createElement($r,{to:"/admin/promo-codes",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors"},e.createElement(Wa,{size:20}),"Codes promo"),e.createElement($r,{to:"/admin/settings",onClick:()=>q(!1),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-900/20 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors"},e.createElement(Nu,{size:20}),"App Settings"))),e.createElement($r,{to:"/favorites",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(Yr,{size:20}),"Favoris",l>0&&e.createElement("span",{className:"ml-auto bg-pink-500 text-white text-xs font-bold px-2 py-1 rounded-full"},l)),e.createElement($r,{to:"/cart",onClick:()=>q(!1),className:"relative flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},e.createElement(en,{size:20}),"Panier",o>0&&e.createElement("span",{className:"ml-auto bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded-full"},o)),e.createElement("button",{onClick:()=>z(!Y),className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},Y?e.createElement(Lq,{size:20}):e.createElement(HB,{size:20}),Y?"Mode clair":"Mode sombre"),r?e.createElement("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800"},e.createElement("button",{onClick:()=>{a(),q(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},e.createElement(X4,{size:20}),"Dconnexion")):e.createElement("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-gray-200 dark:border-gray-800"},e.createElement($r,{to:"/login",onClick:()=>q(!1),className:"px-4 py-3 rounded-xl border border-indigo-600 text-indigo-600 text-center font-medium hover:bg-indigo-50 transition-colors"},"Connexion"),e.createElement($r,{to:"/register",onClick:()=>q(!1),className:"px-4 py-3 rounded-xl bg-indigo-600 text-white text-center font-medium hover:bg-indigo-700 transition-colors"},"Inscription"))))),e.createElement("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-t border-gray-200/80 dark:border-gray-800/80 shadow-2xl backdrop-blur-xl transition-all duration-300",style:{paddingBottom:"env(safe-area-inset-bottom)"},onTouchStart:Pa,onTouchMove:oo,onTouchEnd:Fe},!mt&&_a.length>0&&e.createElement("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center cursor-pointer z-10",onClick:()=>{G(!0),rt("medium")}},e.createElement("div",{className:"bg-indigo-600 dark:bg-indigo-500 text-white p-1.5 rounded-full shadow-lg"},e.createElement(wo,{size:12,className:"animate-bounce"}))),e.createElement("div",{className:`max-w-3xl mx-auto px-3 transition-all duration-300 ${mt?"py-3":"py-2.5"}`},e.createElement("div",{className:"flex items-center justify-around"},ka.map(ce=>{const qe=ce.icon,Ue=ce.badge||0;return location.pathname,ce.path,ce.isButton?e.createElement("button",{key:ce.id,type:"button","data-item-id":ce.id,onClick:()=>{q(!0),rt("light")},onTouchStart:Pa,onTouchEnd:Fe,className:`relative flex flex-col items-center justify-center gap-1.5 px-4 py-2 rounded-2xl transition-all duration-300 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 active:scale-95 ${V?"text-indigo-600 dark:text-indigo-400 scale-105":""}`},e.createElement("div",{className:`relative transition-all duration-300 ${V?"scale-110":""}`},V?e.createElement(jt,{size:22,className:"text-indigo-600 dark:text-indigo-400",strokeWidth:2.5}):e.createElement(qe,{size:22,strokeWidth:2}),V&&e.createElement("div",{className:"absolute inset-0 -z-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-full blur-md animate-pulse"})),e.createElement("span",{className:`text-[11px] font-semibold transition-all ${V?"text-indigo-600 dark:text-indigo-400":""}`},ce.label),V&&e.createElement("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-indigo-600 dark:bg-indigo-400 rounded-full"}),Te===ce.id&&e.createElement("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-2 min-w-[150px] z-50"},$e(ce.id).map((ct,kt)=>e.createElement("button",{key:kt,type:"button",onClick:()=>{ct.action(),Se(null)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},ct.label)),e.createElement("button",{type:"button",onClick:()=>Se(null),className:"w-full text-left px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mt-1"},"Annuler"))):e.createElement($r,{key:ce.id,to:ce.path,"data-item-id":ce.id,onTouchStart:Pa,onTouchEnd:Fe,className:({isActive:ct})=>`relative flex flex-col items-center justify-center gap-1.5 px-4 py-2 rounded-2xl transition-all duration-300 ${ct?"text-indigo-600 dark:text-indigo-400 scale-105":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>{q(!1),G(!1),rt("light")}},({isActive:ct})=>e.createElement(e.Fragment,null,e.createElement("div",{className:`relative transition-all duration-300 ${ct?"scale-110":""}`},e.createElement(qe,{size:22,className:ct?"text-indigo-600 dark:text-indigo-400":"",strokeWidth:ct?2.5:2,fill:ce.id==="favorites"&&ct?"currentColor":"none"}),ct&&e.createElement("div",{className:"absolute inset-0 -z-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-full blur-md animate-pulse"})),e.createElement("span",{className:`text-[11px] font-semibold transition-all ${ct?"text-indigo-600 dark:text-indigo-400":""}`},ce.label),Ue>0&&e.createElement("span",{className:`absolute -top-0.5 right-2.5 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center shadow-lg transition-all ${ct?"bg-indigo-600":ce.id==="favorites"?"bg-pink-500":"bg-indigo-600"}`},Ue>99?"99+":Ue),ct&&e.createElement("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-indigo-600 dark:bg-indigo-400 rounded-full"}),Te===ce.id&&e.createElement("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-2 min-w-[150px] z-50"},$e(ce.id).map((kt,Cr)=>e.createElement("button",{key:Cr,type:"button",onClick:ga=>{ga.preventDefault(),ga.stopPropagation(),kt.action(),Se(null)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},kt.label)),e.createElement("button",{type:"button",onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Se(null)},className:"w-full text-left px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mt-1"},"Annuler"))))})),mt&&_a.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"flex items-center justify-between mb-2 px-2"},e.createElement("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400"},"Plus d'options"),e.createElement("button",{type:"button",onClick:()=>{G(!1),rt("light")},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},e.createElement(wo,{size:16,className:"rotate-180"}))),e.createElement("div",{className:"grid grid-cols-4 gap-2"},_a.map(ce=>{const qe=ce.icon,Ue=ce.badge||0;return location.pathname,ce.path,e.createElement($r,{key:ce.id,to:ce.path,"data-item-id":ce.id,onTouchStart:Pa,onTouchEnd:Fe,className:({isActive:ct})=>`relative flex flex-col items-center justify-center gap-1 px-2 py-2 rounded-xl transition-all duration-300 ${ct?"text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 scale-105":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,onClick:()=>{G(!1),rt("light")}},({isActive:ct})=>e.createElement(e.Fragment,null,e.createElement("div",{className:"relative"},e.createElement(qe,{size:18,className:ct?"text-indigo-600 dark:text-indigo-400":"",strokeWidth:ct?2.5:2}),Ue>0&&e.createElement("span",{className:`absolute -top-1 -right-1 text-white text-[9px] font-bold px-1 py-0.5 rounded-full min-w-[16px] text-center shadow-lg ${ct?"bg-indigo-600":"bg-red-500"}`},Ue>99?"99+":Ue)),e.createElement("span",{className:`text-[10px] font-medium transition-all truncate w-full text-center ${ct?"text-indigo-600 dark:text-indigo-400":""}`},ce.label),ct&&e.createElement("div",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-0.5 h-0.5 bg-indigo-600 dark:bg-indigo-400 rounded-full"}),Te===ce.id&&e.createElement("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-2 min-w-[150px] z-50"},$e(ce.id).map((kt,Cr)=>e.createElement("button",{key:Cr,type:"button",onClick:ga=>{ga.preventDefault(),ga.stopPropagation(),kt.action(),Se(null)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},kt.label)),e.createElement("button",{type:"button",onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Se(null)},className:"w-full text-left px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors mt-1"},"Annuler"))))})))))),e.createElement("div",{className:"h-16 lg:h-24"}),e.createElement("div",{className:"md:hidden h-20"}))}const iU=3;function cU({splashImage:t,splashDurationSeconds:r=iU,onDismiss:a}){const n=wa(),[s,o]=u.useState(r);u.useEffect(()=>{if(s<=0){a?.(),n("/",{replace:!0});return}const c=setInterval(()=>o(m=>m-1),1e3);return()=>clearInterval(c)},[s,n,a]);const l=()=>{a?.(),n("/",{replace:!0})};return t?e.createElement("div",{className:"fixed inset-0 z-[9999] flex flex-col bg-black",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}},e.createElement("div",{className:"relative flex-1 min-h-0"},e.createElement("img",{src:t,alt:"",className:"absolute inset-0 w-full h-full object-cover object-center"}),e.createElement("div",{className:"absolute inset-0 bg-black/20"})),e.createElement("div",{className:"absolute top-0 right-0 flex items-center gap-2 p-3 sm:p-4"},e.createElement("button",{type:"button",onClick:l,className:"flex items-center gap-2 rounded-full bg-white/90 backdrop-blur-sm px-4 py-2 text-sm font-semibold text-gray-900 shadow-lg hover:bg-white transition-colors","aria-label":"Passer"},e.createElement("span",null,"Passer"),e.createElement("span",{className:"min-w-[1.25rem] tabular-nums"},s),e.createElement(jt,{size:18,className:"text-gray-600"})))):null}const dU=()=>typeof window>"u"?"":`${window.location.origin}/favicon.svg`;function mU({visible:t,logoSrc:r,label:a="HDMarket"}){const[n,s]=u.useState(r||"");if(u.useEffect(()=>{if(r){s(r);return}let l=!0;return oe.get("/settings/app-logo").then(c=>{if(!l)return;const m=c?.data?.appLogoMobile||c?.data?.appLogoDesktop||"";s(m||"")}).catch(()=>{l&&s("")}),()=>{l=!1}},[r]),!t)return null;const o=n||dU();return e.createElement("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-white/95 backdrop-blur-sm",role:"status","aria-live":"polite","aria-busy":"true"},e.createElement("div",{className:"relative flex flex-col items-center"},e.createElement("div",{className:"absolute -inset-6 rounded-full border border-indigo-200/70 motion-safe:animate-ping motion-reduce:animate-none"}),e.createElement("div",{className:"absolute -inset-10 rounded-full border border-indigo-100/80 motion-safe:animate-pulse motion-reduce:animate-none"}),e.createElement("div",{className:"relative flex h-20 w-20 items-center justify-center rounded-2xl bg-white shadow-xl"},o?e.createElement("img",{src:o,alt:a,className:"h-12 w-12 object-contain motion-safe:animate-pulse motion-reduce:animate-none"}):e.createElement("span",{className:"text-lg font-bold text-gray-900"},a)),e.createElement("span",{className:"mt-4 text-[11px] font-semibold uppercase tracking-[0.3em] text-gray-400"},"Chargement")))}function Vg(){const[t,r]=u.useState([]),[a,n]=u.useState(!0),[s,o]=u.useState(null),l=async()=>{try{n(!0),o(null);const c=await oe.get("/settings/networks",{skipCache:!0}),m=Array.isArray(c.data)?c.data:Array.isArray(c.data?.data)?c.data.data:[];r(m)}catch(c){console.error("Failed to fetch networks:",c),o(c.response?.data?.message||"Erreur lors du chargement des rseaux."),r([])}finally{n(!1)}};return u.useEffect(()=>{l()},[]),{networks:t,loading:a,error:s,refresh:l}}function uU(t){if(!Array.isArray(t)||t.length===0)return null;const r=t.filter(a=>a.isActive);return r.length===0?null:r[0].phoneNumber||null}function pU(t,r){return!Array.isArray(t)||!r?null:t.find(n=>n.isActive&&n.name?.toLowerCase()===r?.toLowerCase())?.phoneNumber||null}function fU(t){return Array.isArray(t)?t.filter(r=>r.isActive).sort((r,a)=>(r.order||0)-(a.order||0)).map(r=>({name:r.name,phoneNumber:r.phoneNumber,display:`${r.name}: ${r.phoneNumber}`})):[]}function gU(){const t=new Date().getFullYear(),{networks:r}=Vg(),a=u.useMemo(()=>r.filter(n=>n.isActive).sort((n,s)=>(n.order||0)-(s.order||0)),[r]);return e.createElement("footer",{className:"hidden md:block bg-gray-900 text-gray-300"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 grid gap-8 sm:grid-cols-2 lg:grid-cols-4"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-indigo-400 uppercase tracking-widest"},"ETS HD Tech Filial"),e.createElement("h3",{className:"mt-2 text-xl font-bold text-white"},"HDMarket"),e.createElement("p",{className:"mt-3 text-sm text-gray-400"},"Marketplace premium opre par ETS HD Tech Filial. Achetez et vendez en toute confiance, partout au Congo.")),e.createElement("div",null,e.createElement("h4",{className:"text-base font-semibold text-white"},"Navigation"),e.createElement("ul",{className:"mt-3 space-y-2 text-sm"},e.createElement("li",null,e.createElement(ye,{to:"/",className:"hover:text-white"},"Accueil")),e.createElement("li",null,e.createElement(ye,{to:"/products",className:"hover:text-white"},"Produits")),e.createElement("li",null,e.createElement(ye,{to:"/top-deals",className:"hover:text-white"},"Bons plans")),e.createElement("li",null,e.createElement(ye,{to:"/help",className:"hover:text-white"},"Aide et service client")))),e.createElement("div",null,e.createElement("h4",{className:"text-base font-semibold text-white"},"Support"),e.createElement("ul",{className:"mt-3 space-y-2 text-sm"},e.createElement("li",{className:"flex items-center gap-2"},e.createElement(gi,{size:16,className:"text-indigo-400"}),"support@hdmarket.cg"),a.length>0?a.map(n=>e.createElement("li",{key:n._id,className:"flex items-center gap-2"},e.createElement(Es,{size:16,className:"text-indigo-400"}),e.createElement("span",null,n.name,": ",n.phoneNumber))):e.createElement("li",{className:"flex items-center gap-2"},e.createElement(Es,{size:16,className:"text-indigo-400"}),"+242 06 000 00 00"),e.createElement("li",{className:"flex items-center gap-2"},e.createElement(Wr,{size:16,className:"text-indigo-400"}),"Brazzaville, Congo"))),e.createElement("div",null,e.createElement("h4",{className:"text-base font-semibold text-white"},"Communaut"),e.createElement("p",{className:"mt-3 text-sm text-gray-400"},"Rejoignez les vendeurs et acheteurs professionnels accompagns par ETS HD Tech Filial."),e.createElement(ye,{to:"/help",className:"mt-4 inline-flex items-center justify-center rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-500"},"Contacter le support"))),e.createElement("div",{className:"border-t border-gray-800"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col gap-2 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null," ",t," ETS HD Tech Filial  Tous droits rservs."),e.createElement("p",null,"HDMarket, marketplace scurise pour les vendeurs et acheteurs congolais."))))}const hU=t=>t?String(t).replace(/[^\d+]/g,""):"",bU=(t,r)=>{const a=t?`"${t}"`:"votre annonce";return encodeURIComponent(`Bonjour, je suis intress par ${a} sur HDMarket. Pouvez-vous me donner plus d'informations ? ${r||""}`.trim())},N2=(t,r)=>{const a=hU(r);if(!t?._id||!a)return null;const n=typeof window<"u"?window.location.origin:"",s=lj(t,n),o=bU(t.title,s);return`https://wa.me/${a}?text=${o}`},gj="hdmarket:recent-product-views",xU=50,yU=/^[a-fA-F0-9]{24}$/,vU=t=>{if(!t)return[];try{const r=JSON.parse(t);return Array.isArray(r)?r:[]}catch{return[]}},Ki=()=>typeof window>"u"?[]:vU(window.localStorage.getItem(gj)),EU=t=>{typeof window>"u"||window.localStorage.setItem(gj,JSON.stringify(t))},gp=t=>{if(!t)return;const r=t?._id?String(t._id):"",a=t?.slug?String(t.slug):"",n=r||a;if(!n)return;const s=t.category||"",o=Ki(),l=[{id:n,category:s,visitedAt:Date.now()},...o.filter(c=>String(c.id)!==n)].slice(0,xU);if(EU(l),typeof window<"u"&&window.localStorage.getItem("qm_token")){if(t?.status&&t.status!=="approved")return;const m=yU.test(r)?r:a;if(!m)return;oe.post(`/users/product-views/${m}`).catch(()=>{})}},tC=async(t=50)=>{const{data:r}=await oe.get("/users/product-views",{params:{limit:t}});return Array.isArray(r)?r:[]},wU=(t,r=4)=>{const a=new Map;return t.forEach(n=>{if(!n?.category)return;const s=a.get(n.category)||{count:0,last:0};a.set(n.category,{count:s.count+1,last:Math.max(s.last,Number(n.visitedAt)||0)})}),Array.from(a.entries()).sort((n,s)=>{const o=s[1].count-n[1].count;return o!==0?o:s[1].last-n[1].last}).slice(0,r).map(([n])=>n)},EN="hdmarket_pending_action";function gd(t){if(!(typeof window>"u"))try{t?sessionStorage.setItem(EN,JSON.stringify(t)):sessionStorage.removeItem(EN)}catch(r){console.warn("pendingAction: set failed",r)}}function NU(){if(typeof window>"u")return null;try{const t=sessionStorage.getItem(EN);return t?JSON.parse(t):null}catch(t){return console.warn("pendingAction: get failed",t),null}}function kU(){gd(null)}const SU=767;function rs(t=SU){const r=()=>typeof window>"u"?!1:window.matchMedia(`(max-width: ${t}px)`).matches,[a,n]=u.useState(r);return u.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia(`(max-width: ${t}px)`),o=l=>n(l.matches);return s.addEventListener?s.addEventListener("change",o):s.addListener(o),()=>{s.removeEventListener?s.removeEventListener("change",o):s.removeListener(o)}},[t]),a}function cs(){return rs()?{}:{target:"_blank",rel:"noopener noreferrer"}}function un({p:t,hideMobileDiscountBadge:r=!1,productLink:a,onProductClick:n}){const{user:s}=u.useContext(Sr),{addItem:o,cart:l}=u.useContext($l),c=wa(),m=ts(),[p,f]=u.useState(!1),[g,b]=u.useState(""),[x,v]=u.useState(""),[E,y]=u.useState(!1),[w,k]=u.useState(!1),[C,A]=u.useState(0),S=u.useRef(null),P=u.useRef(0),T=u.useRef(0),[O,R]=u.useState(!1),[D,$]=u.useState({});rs();const j=!!(s&&l?.items?.some(Le=>Le.product?._id===t._id)),{toggleFavorite:K,isFavorite:H}=u.useContext(em),V=H(t._id),[q,Y]=u.useState(t.whatsappClicks||0),[z,L]=u.useState(t.favoritesCount||0),Q=cs(),B=a||Dr(t),ae=n||gp,te=u.useMemo(()=>{const Le=Array.isArray(t.images)?t.images.filter(Boolean):[];return Le.length>0?Le:["https://via.placeholder.com/400x400"]},[t.images]),ge=te.length>1,ue=ge,Ee=!1;u.useEffect(()=>{const Le=(pe,Pe)=>{const ft=new Image;ft.crossOrigin="anonymous",ft.onload=()=>{$(ht=>ht[Pe]===!0?ht:{...ht,[Pe]:!0})},ft.onerror=()=>{$(ht=>ht[Pe]===!1?ht:{...ht,[Pe]:!1})},ft.src=pe};te.forEach((pe,Pe)=>{pe&&pe!=="https://via.placeholder.com/400x400"?Le(pe,Pe):$(ft=>({...ft,[Pe]:!0}))})},[te,t.title]);const fe=u.useCallback(()=>{O||(R(!0),A(Le=>(Le+1)%te.length),setTimeout(()=>R(!1),500))},[O,te.length]),re=u.useCallback(()=>{O||(R(!0),A(Le=>(Le-1+te.length)%te.length),setTimeout(()=>R(!1),500))},[O,te.length]);u.useEffect(()=>{},[Ee,te.length,O]);const U=()=>{S.current&&clearInterval(S.current)},W=()=>{},me=Le=>{P.current=Le.touches[0].clientX},ne=Le=>{T.current=Le.touches[0].clientX},ee=()=>{if(!P.current||!T.current)return;const Le=P.current-T.current;Math.abs(Le)>50&&(Le>0?fe():re()),P.current=0,T.current=0};u.useMemo(()=>N2(t,t?.user?.phone||t?.contactPhone),[t]),u.useEffect(()=>{Y(t.whatsappClicks||0)},[t._id,t.whatsappClicks]),u.useEffect(()=>{L(t.favoritesCount||0)},[t._id,t.favoritesCount]);const ve=`${m.pathname}${m.search}${m.hash}`,be=()=>{c("/login",{state:{from:ve||"/"}})};u.useEffect(()=>{j||b("")},[j]);const J=typeof t.discount=="number"&&t.discount>0,Ge=u.useMemo(()=>{if(t?.installmentAvailable)return!0;if(!t?.installmentEnabled)return!1;const Le=t?.installmentStartDate?new Date(t.installmentStartDate):null,pe=t?.installmentEndDate?new Date(t.installmentEndDate):null;if(!Le||Number.isNaN(Le.getTime())||!pe||Number.isNaN(pe.getTime()))return!1;const Pe=new Date;return Pe>=Le&&Pe<=pe},[t]);Number(t.price).toLocaleString();const je=J&&t.priceBeforeDiscount?Number(t.priceBeforeDiscount).toLocaleString():null,tt=Number(t.ratingAverage||0).toFixed(1),At=t.ratingCount||0,He=t.commentCount||0,Tt=!!(t.user?.shopVerified??t.shopVerified),Re=t.user?.shopLogo||t.shopLogo||null,{publishedLabel:et,daysSince:gt,isNew:Ze}=u.useMemo(()=>{if(!t?.createdAt)return{publishedLabel:"",daysSince:null,isNew:!1};const Le=new Date(t.createdAt);if(Number.isNaN(Le.getTime()))return{publishedLabel:"",daysSince:null,isNew:!1};const pe=Date.now()-Le.getTime(),Pe=Math.max(0,Math.floor(pe/(1e3*60*60*24))),ft=Pe<=7;return Pe===0?{publishedLabel:"Aujourd'hui",daysSince:0,isNew:ft}:Pe===1?{publishedLabel:"Hier",daysSince:1,isNew:ft}:{publishedLabel:`Il y a ${Pe}j`,daysSince:Pe,isNew:ft}},[t.createdAt]),xt=t?.user?._id||t?.user,Dt=!!(s&&xt&&String(xt)===s.id),nt=t?.condition==="new"?"Neuf":"Occasion";t?.condition;const Me=async Le=>{if(Le&&(Le.preventDefault(),Le.stopPropagation()),!s){gd({type:"addFavorite",payload:{product:t}}),be();return}try{const pe=await K(t);pe===!0?L(Pe=>Pe+1):pe===!1&&L(Pe=>Math.max(0,Pe-1))}catch(pe){console.error("Impossible de modifier les favoris.",pe)}},Qe=async()=>{if(!s){gd({type:"addToCart",payload:{productId:t._id,quantity:1}}),be();return}if(!j){f(!0),v("");try{await o(t._id,1),b("Ajout au panier !")}catch(Le){v(Le.response?.data?.message||Le.message||"Impossible d'ajouter cet article.")}finally{f(!1)}}},wt=u.useMemo(()=>{if(typeof t.salesCount=="number"&&t.salesCount>0)return t.salesCount;const Le=t.views||0,pe=t.favoritesCount||0,Pe=t.commentCount||0,ft=q||0;return Math.floor(Le*.02+pe*1.5+Pe*2+ft*.8)},[t.views,t.favoritesCount,t.commentCount,t.salesCount,q]),lt=typeof t.salesCount=="number"&&t.salesCount>0,we=Le=>Le>=1e4?`${(Le/1e3).toFixed(0)}k+`:Le>=1e3?`${(Le/1e3).toFixed(1)}k+`:`${Le}`,vt=wt>=3e3,pt=wt>=1e4;return e.createElement("div",{className:"group relative flex h-full w-full flex-col bg-white overflow-hidden rounded-[16px] border border-[#E5E5EA] shadow-[0_1px_3px_rgba(0,0,0,0.06)] hover:shadow-[0_4px_12px_rgba(0,0,0,0.08)] transition-all duration-300 dark:bg-[#1C1C1E] dark:border-[#38383A]",onMouseEnter:U,onMouseLeave:W},e.createElement(ye,{to:B,...Q,onClick:()=>ae?.(t),className:`relative aspect-square bg-gray-100 overflow-hidden ${ge?"touch-pan-y":""}`,...ge&&{onTouchStart:me,onTouchMove:ne,onTouchEnd:ee}},ue?e.createElement("div",{className:"relative w-full h-full overflow-hidden"},e.createElement("div",{className:"flex h-full transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${C*100}%)`,width:"100%",willChange:"transform"}},te.map((Le,pe)=>{const Pe=D[pe]===!1,ft=Pe?"https://via.placeholder.com/400x400?text=HDMarket":Le,ht=D[pe]===!0;return e.createElement("div",{key:`${t._id}-img-${pe}-${Le}`,className:"relative w-full h-full flex-shrink-0",style:{minWidth:"100%",width:"100%"}},!ht&&!Pe&&e.createElement("div",{className:"absolute inset-0 bg-gray-200 animate-pulse z-10"}),e.createElement("img",{src:ft,alt:`${t.title} - Image ${pe+1}`,className:"w-full h-full object-contain",style:{opacity:1,visibility:"visible",display:"block"},onLoad:()=>{$(Lt=>({...Lt,[pe]:!0})),pe===0&&y(!0)},onError:()=>{$(Lt=>({...Lt,[pe]:!1})),pe===0&&k(!0)},loading:"eager",fetchpriority:pe<=1?"high":"auto"}))})),e.createElement("div",{className:"absolute bottom-2 sm:bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-1.5 sm:gap-2 z-30 bg-black/40 backdrop-blur-sm px-2 sm:px-3 py-1 sm:py-1.5 rounded-full"},te.map((Le,pe)=>e.createElement("button",{key:pe,type:"button",onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),O||(R(!0),A(pe),setTimeout(()=>R(!1),500))},className:`rounded-full transition-all duration-300 ${pe===C?"w-2 h-2 sm:w-2.5 sm:h-2.5 bg-white shadow-lg":"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white/60 hover:bg-white/80"}`,"aria-label":`Go to image ${pe+1}`}))),e.createElement(e.Fragment,null,e.createElement("button",{type:"button",onClick:Le=>{Le.preventDefault(),Le.stopPropagation(),re()},className:"absolute left-2 top-1/2 -translate-y-1/2 z-30 bg-white/90 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-all opacity-0 group-hover:opacity-100 hover:scale-110 hidden sm:flex items-center justify-center","aria-label":"Previous image"},e.createElement(xu,{className:"w-4 h-4 text-gray-700"})),e.createElement("button",{type:"button",onClick:Le=>{Le.preventDefault(),Le.stopPropagation(),fe()},className:"absolute right-2 top-1/2 -translate-y-1/2 z-30 bg-white/90 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-all opacity-0 group-hover:opacity-100 hover:scale-110 hidden sm:flex items-center justify-center","aria-label":"Next image"},e.createElement(Ar,{className:"w-4 h-4 text-gray-700"})))):e.createElement("div",{className:"relative w-full h-full"},e.createElement("img",{src:w?"https://via.placeholder.com/400x400?text=HDMarket":te[0],alt:t.title,className:"w-full h-full object-contain",onLoad:()=>y(!0),onError:()=>k(!0),loading:"eager"}),!E&&e.createElement("div",{className:"absolute inset-0 bg-gray-200 animate-pulse z-10"})),e.createElement("div",{className:"absolute top-1.5 sm:top-2 left-1.5 sm:left-2 z-20 flex flex-col gap-1 sm:gap-1.5"},J&&e.createElement("div",{className:"bg-red-600 text-white px-1.5 sm:px-2 py-0.5 sm:py-1 rounded sm:rounded-md text-[9px] sm:text-[10px] font-black shadow-lg border border-white/20"},"-",t.discount,"%"),(J||Ze)&&e.createElement("div",{className:"bg-orange-600 text-white px-1.5 sm:px-2 py-0.5 rounded text-[8px] sm:text-[9px] font-bold shadow-md"},Ze?"Nouveau":"Promo"),t.certified&&e.createElement("div",{className:"inline-flex items-center gap-0.5 sm:gap-1 bg-emerald-500 text-white px-1.5 sm:px-2 py-0.5 rounded text-[8px] sm:text-[9px] font-bold shadow-md"},e.createElement(Ga,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5"}),"Certifi"),Ge&&e.createElement("div",{className:"inline-flex items-center gap-0.5 sm:gap-1 bg-indigo-600 text-white px-1.5 sm:px-2 py-0.5 rounded text-[8px] sm:text-[9px] font-bold shadow-md"},e.createElement(Xt,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5"}),"Paiement en tranche")),e.createElement("button",{type:"button",onClick:Le=>Me(Le),className:"absolute top-1.5 sm:top-2 right-1.5 sm:right-2 z-30 bg-white/95 backdrop-blur-sm min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 p-2 sm:p-1.5 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110 tap-feedback flex items-center justify-center group/fav","aria-label":V?"Retirer des favoris":"Ajouter aux favoris"},e.createElement(Yr,{size:14,className:`sm:w-4 sm:h-4 transition-all duration-300 ${V?"text-red-500 transform scale-110":"text-gray-600 group-hover/fav:text-red-400"}`,strokeWidth:2,fill:V?"currentColor":"none"})),e.createElement("div",{className:"absolute bottom-1.5 sm:bottom-2 left-1.5 sm:left-2 right-1.5 sm:right-2 z-20"},e.createElement("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap"},wt>0&&e.createElement("div",{className:"bg-black/70 backdrop-blur-sm text-white px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold"},lt?"Vendu":"Engagement"," ",we(wt)),vt&&e.createElement("div",{className:"bg-orange-600 text-white px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold"},"Tendance ",we(wt)),pt&&e.createElement("div",{className:"bg-purple-600 text-white px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold flex items-center gap-0.5 sm:gap-1"},e.createElement(ko,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),"TOP VENTE")))),e.createElement("div",{className:"flex-1 flex flex-col px-2 sm:px-3 py-2 sm:py-3 space-y-1.5 sm:space-y-2 min-h-0"},e.createElement("h3",{className:"text-xs sm:text-sm font-bold text-gray-900 line-clamp-2 leading-tight min-h-[2rem] sm:min-h-[2.5rem]"},t.title),e.createElement("div",{className:"flex items-baseline gap-1.5 sm:gap-2 flex-wrap"},e.createElement("div",{className:"flex items-baseline gap-0.5 sm:gap-1"},e.createElement("span",{className:"text-[10px] sm:text-xs text-gray-500"},"FCFA"),e.createElement("span",{className:"text-base sm:text-lg font-black text-red-600"},J?Number(t.priceAfterDiscount||t.price).toLocaleString():Number(t.price).toLocaleString())),je&&e.createElement("span",{className:"text-[10px] sm:text-xs text-gray-400 line-through"},je," FCFA"),J&&e.createElement("span",{className:"text-[9px] sm:text-[10px] font-bold text-red-500 bg-red-50 px-1 sm:px-1.5 py-0.5 rounded"},"Prix promo")),e.createElement("div",{className:"flex items-center gap-2 sm:gap-3 text-[9px] sm:text-[10px] text-gray-500 flex-wrap"},tt>0&&e.createElement("div",{className:"flex items-center gap-0.5 sm:gap-1"},e.createElement(zr,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-amber-500 fill-amber-500"}),e.createElement("span",{className:"font-semibold text-gray-700"},tt),At>0&&e.createElement("span",{className:"text-gray-500 hidden sm:inline"},"(",we(At),")")),He>0&&e.createElement("div",{className:"flex items-center gap-0.5 sm:gap-1"},e.createElement(Hr,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),e.createElement("span",null,we(He))),wt>0&&e.createElement("div",{className:"flex items-center gap-0.5 sm:gap-1 text-orange-600"},e.createElement(Pr,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),e.createElement("span",{className:"font-semibold"},lt?"Vendu":"Engagement"," ",we(wt)))),Ge&&e.createElement("div",{className:"inline-flex w-fit items-center gap-1 rounded-full border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-[9px] font-semibold text-indigo-700"},"Paiement en plusieurs fois disponible"),t.certified&&e.createElement("div",{className:"flex items-center gap-1.5 flex-wrap"},e.createElement("span",{className:"inline-flex items-center gap-1 bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded text-[9px] font-semibold border border-emerald-200"},e.createElement(Ga,{className:"w-2.5 h-2.5"}),"Garanti authentique"),nt==="Neuf"&&e.createElement("span",{className:"bg-[rgba(0,122,255,0.12)] text-[#007AFF] px-2 py-0.5 rounded text-[9px] font-semibold border border-[rgba(0,122,255,0.24)]"},"Neuf")),Tt&&e.createElement("div",{className:"flex items-center gap-1.5 pt-1"},Re&&e.createElement("img",{src:Re,alt:t.user?.shopName||"Logo boutique",className:"h-4 w-4 rounded-full border border-gray-200 object-cover",loading:"lazy"}),e.createElement(ye,{to:Da(t.user),...Q,className:"text-[10px] font-semibold text-[#8E8E93] truncate hover:text-[#007AFF]"},t.user?.shopName||"Boutique HDMarket"),e.createElement(_n,{verified:!0,showLabel:!1,className:"text-[8px]"})),!Dt&&e.createElement("div",{className:"pt-2 border-t border-gray-100"},e.createElement("button",{type:"button",onClick:Le=>{Le.preventDefault(),Le.stopPropagation(),Qe()},disabled:p||j,className:`w-full inline-flex items-center justify-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-2xl sm:rounded-3xl text-[10px] sm:text-xs font-semibold transition-all duration-200 active:scale-95 shadow-sm ${j?"bg-gray-100 text-gray-500 cursor-not-allowed opacity-60":p?"bg-[#007AFF]/80 text-white cursor-wait":"bg-[#007AFF] text-white hover:bg-[#0051D5] shadow-[0_1px_3px_rgba(0,0,0,0.08)]"}`},e.createElement(en,{size:12,className:"sm:w-4 sm:h-4"}),e.createElement("span",null,j?"Dj au panier":p?"Ajout...":"Ajouter au panier"))),g&&e.createElement("p",{className:"text-[10px] text-emerald-600 font-semibold"},g),x&&e.createElement("p",{className:"text-[10px] text-red-600"},x)))}function CU({visible:t,logoSrc:r,label:a="HDMarket"}){return t?e.createElement("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-white"},r?e.createElement("img",{src:r,alt:a,className:"h-20 w-20 object-contain"}):e.createElement("span",{className:"text-2xl font-semibold text-gray-900"},a)):null}function rC(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function k2(t={},r={}){const a=["__proto__","constructor","prototype"];Object.keys(r).filter(n=>a.indexOf(n)<0).forEach(n=>{typeof t[n]>"u"?t[n]=r[n]:rC(r[n])&&rC(t[n])&&Object.keys(r[n]).length>0&&k2(t[n],r[n])})}const hj={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ec(){const t=typeof document<"u"?document:{};return k2(t,hj),t}const AU={document:hj,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function ds(){const t=typeof window<"u"?window:{};return k2(t,AU),t}function _U(t=""){return t.trim().split(" ").filter(r=>!!r.trim())}function PU(t){const r=t;Object.keys(r).forEach(a=>{try{r[a]=null}catch{}try{delete r[a]}catch{}})}function bj(t,r=0){return setTimeout(t,r)}function wf(){return Date.now()}function TU(t){const r=ds();let a;return r.getComputedStyle&&(a=r.getComputedStyle(t,null)),!a&&t.currentStyle&&(a=t.currentStyle),a||(a=t.style),a}function OU(t,r="x"){const a=ds();let n,s,o;const l=TU(t);return a.WebKitCSSMatrix?(s=l.transform||l.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(c=>c.replace(",",".")).join(", ")),o=new a.WebKitCSSMatrix(s==="none"?"":s)):(o=l.MozTransform||l.OTransform||l.MsTransform||l.msTransform||l.transform||l.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),r==="x"&&(a.WebKitCSSMatrix?s=o.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),r==="y"&&(a.WebKitCSSMatrix?s=o.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function S0(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function MU(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Ls(...t){const r=Object(t[0]),a=["__proto__","constructor","prototype"];for(let n=1;n<t.length;n+=1){const s=t[n];if(s!=null&&!MU(s)){const o=Object.keys(Object(s)).filter(l=>a.indexOf(l)<0);for(let l=0,c=o.length;l<c;l+=1){const m=o[l],p=Object.getOwnPropertyDescriptor(s,m);p!==void 0&&p.enumerable&&(S0(r[m])&&S0(s[m])?s[m].__swiper__?r[m]=s[m]:Ls(r[m],s[m]):!S0(r[m])&&S0(s[m])?(r[m]={},s[m].__swiper__?r[m]=s[m]:Ls(r[m],s[m])):r[m]=s[m])}}}return r}function C0(t,r,a){t.style.setProperty(r,a)}function xj({swiper:t,targetPosition:r,side:a}){const n=ds(),s=-t.translate;let o=null,l;const c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const m=r>s?"next":"prev",p=(g,b)=>m==="next"&&g>=b||m==="prev"&&g<=b,f=()=>{l=new Date().getTime(),o===null&&(o=l);const g=Math.max(Math.min((l-o)/c,1),0),b=.5-Math.cos(g*Math.PI)/2;let x=s+b*(r-s);if(p(x,r)&&(x=r),t.wrapperEl.scrollTo({[a]:x}),p(x,r)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[a]:x})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(f)};f()}function Do(t,r=""){const a=ds(),n=[...t.children];return a.HTMLSlotElement&&t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),r?n.filter(s=>s.matches(r)):n}function jU(t,r){const a=[r];for(;a.length>0;){const n=a.shift();if(t===n)return!0;a.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function RU(t,r){const a=ds();let n=r.contains(t);return!n&&a.HTMLSlotElement&&r instanceof HTMLSlotElement&&(n=[...r.assignedElements()].includes(t),n||(n=jU(t,r))),n}function Nf(t){try{console.warn(t);return}catch{}}function kf(t,r=[]){const a=document.createElement(t);return a.classList.add(...Array.isArray(r)?r:_U(r)),a}function $U(t,r){const a=[];for(;t.previousElementSibling;){const n=t.previousElementSibling;r?n.matches(r)&&a.push(n):a.push(n),t=n}return a}function LU(t,r){const a=[];for(;t.nextElementSibling;){const n=t.nextElementSibling;r?n.matches(r)&&a.push(n):a.push(n),t=n}return a}function ii(t,r){return ds().getComputedStyle(t,null).getPropertyValue(r)}function Sf(t){let r=t,a;if(r){for(a=0;(r=r.previousSibling)!==null;)r.nodeType===1&&(a+=1);return a}}function yj(t,r){const a=[];let n=t.parentElement;for(;n;)r?n.matches(r)&&a.push(n):a.push(n),n=n.parentElement;return a}function wN(t,r,a){const n=ds();return t[r==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(t,null).getPropertyValue(r==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(t,null).getPropertyValue(r==="width"?"margin-left":"margin-bottom"))}function cl(t){return(Array.isArray(t)?t:[t]).filter(r=>!!r)}function Cf(t,r=""){typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:a=>a}).createHTML(r):t.innerHTML=r}let px;function IU(){const t=ds(),r=Ec();return{smoothScroll:r.documentElement&&r.documentElement.style&&"scrollBehavior"in r.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&r instanceof t.DocumentTouch)}}function vj(){return px||(px=IU()),px}let fx;function DU({userAgent:t}={}){const r=vj(),a=ds(),n=a.navigator.platform,s=t||a.navigator.userAgent,o={ios:!1,android:!1},l=a.screen.width,c=a.screen.height,m=s.match(/(Android);?[\s\/]+([\d.]+)?/);let p=s.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const f=s.match(/(iPod)(.*OS\s([\d_]+))?/),g=!p&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=n==="Win32";let x=n==="MacIntel";const v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!p&&x&&r.touch&&v.indexOf(`${l}x${c}`)>=0&&(p=s.match(/(Version)\/([\d.]+)/),p||(p=[0,1,"13_0_0"]),x=!1),m&&!b&&(o.os="android",o.android=!0),(p||g||f)&&(o.os="ios",o.ios=!0),o}function Ej(t={}){return fx||(fx=DU(t)),fx}let gx;function FU(){const t=ds(),r=Ej();let a=!1;function n(){const c=t.navigator.userAgent.toLowerCase();return c.indexOf("safari")>=0&&c.indexOf("chrome")<0&&c.indexOf("android")<0}if(n()){const c=String(t.navigator.userAgent);if(c.includes("Version/")){const[m,p]=c.split("Version/")[1].split(" ")[0].split(".").map(f=>Number(f));a=m<16||m===16&&p<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),o=n(),l=o||s&&r.ios;return{isSafari:a||o,needPerspectiveFix:a,need3dFix:l,isWebView:s}}function wj(){return gx||(gx=FU()),gx}function zU({swiper:t,on:r,emit:a}){const n=ds();let s=null,o=null;const l=()=>{!t||t.destroyed||!t.initialized||(a("beforeResize"),a("resize"))},c=()=>{!t||t.destroyed||!t.initialized||(s=new ResizeObserver(f=>{o=n.requestAnimationFrame(()=>{const{width:g,height:b}=t;let x=g,v=b;f.forEach(({contentBoxSize:E,contentRect:y,target:w})=>{w&&w!==t.el||(x=y?y.width:(E[0]||E).inlineSize,v=y?y.height:(E[0]||E).blockSize)}),(x!==g||v!==b)&&l()})}),s.observe(t.el))},m=()=>{o&&n.cancelAnimationFrame(o),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null)},p=()=>{!t||t.destroyed||!t.initialized||a("orientationchange")};r("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver<"u"){c();return}n.addEventListener("resize",l),n.addEventListener("orientationchange",p)}),r("destroy",()=>{m(),n.removeEventListener("resize",l),n.removeEventListener("orientationchange",p)})}function BU({swiper:t,extendParams:r,on:a,emit:n}){const s=[],o=ds(),l=(p,f={})=>{const g=o.MutationObserver||o.WebkitMutationObserver,b=new g(x=>{if(t.__preventObserver__)return;if(x.length===1){n("observerUpdate",x[0]);return}const v=function(){n("observerUpdate",x[0])};o.requestAnimationFrame?o.requestAnimationFrame(v):o.setTimeout(v,0)});b.observe(p,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:t.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),s.push(b)},c=()=>{if(t.params.observer){if(t.params.observeParents){const p=yj(t.hostEl);for(let f=0;f<p.length;f+=1)l(p[f])}l(t.hostEl,{childList:t.params.observeSlideChildren}),l(t.wrapperEl,{attributes:!1})}},m=()=>{s.forEach(p=>{p.disconnect()}),s.splice(0,s.length)};r({observer:!1,observeParents:!1,observeSlideChildren:!1}),a("init",c),a("destroy",m)}var qU={on(t,r,a){const n=this;if(!n.eventsListeners||n.destroyed||typeof r!="function")return n;const s=a?"unshift":"push";return t.split(" ").forEach(o=>{n.eventsListeners[o]||(n.eventsListeners[o]=[]),n.eventsListeners[o][s](r)}),n},once(t,r,a){const n=this;if(!n.eventsListeners||n.destroyed||typeof r!="function")return n;function s(...o){n.off(t,s),s.__emitterProxy&&delete s.__emitterProxy,r.apply(n,o)}return s.__emitterProxy=r,n.on(t,s,a)},onAny(t,r){const a=this;if(!a.eventsListeners||a.destroyed||typeof t!="function")return a;const n=r?"unshift":"push";return a.eventsAnyListeners.indexOf(t)<0&&a.eventsAnyListeners[n](t),a},offAny(t){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsAnyListeners)return r;const a=r.eventsAnyListeners.indexOf(t);return a>=0&&r.eventsAnyListeners.splice(a,1),r},off(t,r){const a=this;return!a.eventsListeners||a.destroyed||!a.eventsListeners||t.split(" ").forEach(n=>{typeof r>"u"?a.eventsListeners[n]=[]:a.eventsListeners[n]&&a.eventsListeners[n].forEach((s,o)=>{(s===r||s.__emitterProxy&&s.__emitterProxy===r)&&a.eventsListeners[n].splice(o,1)})}),a},emit(...t){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let a,n,s;return typeof t[0]=="string"||Array.isArray(t[0])?(a=t[0],n=t.slice(1,t.length),s=r):(a=t[0].events,n=t[0].data,s=t[0].context||r),n.unshift(s),(Array.isArray(a)?a:a.split(" ")).forEach(l=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(c=>{c.apply(s,[l,...n])}),r.eventsListeners&&r.eventsListeners[l]&&r.eventsListeners[l].forEach(c=>{c.apply(s,n)})}),r}};function UU(){const t=this;let r,a;const n=t.el;typeof t.params.width<"u"&&t.params.width!==null?r=t.params.width:r=n.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?a=t.params.height:a=n.clientHeight,!(r===0&&t.isHorizontal()||a===0&&t.isVertical())&&(r=r-parseInt(ii(n,"padding-left")||0,10)-parseInt(ii(n,"padding-right")||0,10),a=a-parseInt(ii(n,"padding-top")||0,10)-parseInt(ii(n,"padding-bottom")||0,10),Number.isNaN(r)&&(r=0),Number.isNaN(a)&&(a=0),Object.assign(t,{width:r,height:a,size:t.isHorizontal()?r:a}))}function VU(){const t=this;function r(D,$){return parseFloat(D.getPropertyValue(t.getDirectionLabel($))||0)}const a=t.params,{wrapperEl:n,slidesEl:s,rtlTranslate:o,wrongRTL:l}=t,c=t.virtual&&a.virtual.enabled,m=c?t.virtual.slides.length:t.slides.length,p=Do(s,`.${t.params.slideClass}, swiper-slide`),f=c?t.virtual.slides.length:p.length;let g=[];const b=[],x=[];let v=a.slidesOffsetBefore;typeof v=="function"&&(v=a.slidesOffsetBefore.call(t));let E=a.slidesOffsetAfter;typeof E=="function"&&(E=a.slidesOffsetAfter.call(t));const y=t.snapGrid.length,w=t.slidesGrid.length,k=t.size-v-E;let C=a.spaceBetween,A=-v,S=0,P=0;if(typeof k>"u")return;typeof C=="string"&&C.indexOf("%")>=0?C=parseFloat(C.replace("%",""))/100*k:typeof C=="string"&&(C=parseFloat(C)),t.virtualSize=-C-v-E,p.forEach(D=>{o?D.style.marginLeft="":D.style.marginRight="",D.style.marginBottom="",D.style.marginTop=""}),a.centeredSlides&&a.cssMode&&(C0(n,"--swiper-centered-offset-before",""),C0(n,"--swiper-centered-offset-after",""));const T=a.grid&&a.grid.rows>1&&t.grid;T?t.grid.initSlides(p):t.grid&&t.grid.unsetSlides();let O;const R=a.slidesPerView==="auto"&&a.breakpoints&&Object.keys(a.breakpoints).filter(D=>typeof a.breakpoints[D].slidesPerView<"u").length>0;for(let D=0;D<f;D+=1){O=0;const $=p[D];if(!($&&(T&&t.grid.updateSlide(D,$,p),ii($,"display")==="none"))){if(c&&a.slidesPerView==="auto")a.virtual.slidesPerViewAutoSlideSize&&(O=a.virtual.slidesPerViewAutoSlideSize),O&&$&&(a.roundLengths&&(O=Math.floor(O)),$.style[t.getDirectionLabel("width")]=`${O}px`);else if(a.slidesPerView==="auto"){R&&($.style[t.getDirectionLabel("width")]="");const j=getComputedStyle($),K=$.style.transform,H=$.style.webkitTransform;if(K&&($.style.transform="none"),H&&($.style.webkitTransform="none"),a.roundLengths)O=t.isHorizontal()?wN($,"width"):wN($,"height");else{const V=r(j,"width"),q=r(j,"padding-left"),Y=r(j,"padding-right"),z=r(j,"margin-left"),L=r(j,"margin-right"),Q=j.getPropertyValue("box-sizing");if(Q&&Q==="border-box")O=V+z+L;else{const{clientWidth:B,offsetWidth:ae}=$;O=V+q+Y+z+L+(ae-B)}}K&&($.style.transform=K),H&&($.style.webkitTransform=H),a.roundLengths&&(O=Math.floor(O))}else O=(k-(a.slidesPerView-1)*C)/a.slidesPerView,a.roundLengths&&(O=Math.floor(O)),$&&($.style[t.getDirectionLabel("width")]=`${O}px`);$&&($.swiperSlideSize=O),x.push(O),a.centeredSlides?(A=A+O/2+S/2+C,S===0&&D!==0&&(A=A-k/2-C),D===0&&(A=A-k/2-C),Math.abs(A)<1/1e3&&(A=0),a.roundLengths&&(A=Math.floor(A)),P%a.slidesPerGroup===0&&g.push(A),b.push(A)):(a.roundLengths&&(A=Math.floor(A)),(P-Math.min(t.params.slidesPerGroupSkip,P))%t.params.slidesPerGroup===0&&g.push(A),b.push(A),A=A+O+C),t.virtualSize+=O+C,S=O,P+=1}}if(t.virtualSize=Math.max(t.virtualSize,k)+E,o&&l&&(a.effect==="slide"||a.effect==="coverflow")&&(n.style.width=`${t.virtualSize+C}px`),a.setWrapperSize&&(n.style[t.getDirectionLabel("width")]=`${t.virtualSize+C}px`),T&&t.grid.updateWrapperSize(O,g),!a.centeredSlides){const D=[];for(let $=0;$<g.length;$+=1){let j=g[$];a.roundLengths&&(j=Math.floor(j)),g[$]<=t.virtualSize-k&&D.push(j)}g=D,Math.floor(t.virtualSize-k)-Math.floor(g[g.length-1])>1&&g.push(t.virtualSize-k)}if(c&&a.loop){const D=x[0]+C;if(a.slidesPerGroup>1){const $=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/a.slidesPerGroup),j=D*a.slidesPerGroup;for(let K=0;K<$;K+=1)g.push(g[g.length-1]+j)}for(let $=0;$<t.virtual.slidesBefore+t.virtual.slidesAfter;$+=1)a.slidesPerGroup===1&&g.push(g[g.length-1]+D),b.push(b[b.length-1]+D),t.virtualSize+=D}if(g.length===0&&(g=[0]),C!==0){const D=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");p.filter(($,j)=>!a.cssMode||a.loop?!0:j!==p.length-1).forEach($=>{$.style[D]=`${C}px`})}if(a.centeredSlides&&a.centeredSlidesBounds){let D=0;x.forEach(j=>{D+=j+(C||0)}),D-=C;const $=D>k?D-k:0;g=g.map(j=>j<=0?-v:j>$?$+E:j)}if(a.centerInsufficientSlides){let D=0;x.forEach(j=>{D+=j+(C||0)}),D-=C;const $=(v||0)+(E||0);if(D+$<k){const j=(k-D-$)/2;g.forEach((K,H)=>{g[H]=K-j}),b.forEach((K,H)=>{b[H]=K+j})}}if(Object.assign(t,{slides:p,snapGrid:g,slidesGrid:b,slidesSizesGrid:x}),a.centeredSlides&&a.cssMode&&!a.centeredSlidesBounds){C0(n,"--swiper-centered-offset-before",`${-g[0]}px`),C0(n,"--swiper-centered-offset-after",`${t.size/2-x[x.length-1]/2}px`);const D=-t.snapGrid[0],$=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(j=>j+D),t.slidesGrid=t.slidesGrid.map(j=>j+$)}if(f!==m&&t.emit("slidesLengthChange"),g.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),b.length!==w&&t.emit("slidesGridLengthChange"),a.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!c&&!a.cssMode&&(a.effect==="slide"||a.effect==="fade")){const D=`${a.containerModifierClass}backface-hidden`,$=t.el.classList.contains(D);f<=a.maxBackfaceHiddenSlides?$||t.el.classList.add(D):$&&t.el.classList.remove(D)}}function HU(t){const r=this,a=[],n=r.virtual&&r.params.virtual.enabled;let s=0,o;typeof t=="number"?r.setTransition(t):t===!0&&r.setTransition(r.params.speed);const l=c=>n?r.slides[r.getSlideIndexByData(c)]:r.slides[c];if(r.params.slidesPerView!=="auto"&&r.params.slidesPerView>1)if(r.params.centeredSlides)(r.visibleSlides||[]).forEach(c=>{a.push(c)});else for(o=0;o<Math.ceil(r.params.slidesPerView);o+=1){const c=r.activeIndex+o;if(c>r.slides.length&&!n)break;a.push(l(c))}else a.push(l(r.activeIndex));for(o=0;o<a.length;o+=1)if(typeof a[o]<"u"){const c=a[o].offsetHeight;s=c>s?c:s}(s||s===0)&&(r.wrapperEl.style.height=`${s}px`)}function WU(){const t=this,r=t.slides,a=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let n=0;n<r.length;n+=1)r[n].swiperSlideOffset=(t.isHorizontal()?r[n].offsetLeft:r[n].offsetTop)-a-t.cssOverflowAdjustment()}const aC=(t,r,a)=>{r&&!t.classList.contains(a)?t.classList.add(a):!r&&t.classList.contains(a)&&t.classList.remove(a)};function GU(t=this&&this.translate||0){const r=this,a=r.params,{slides:n,rtlTranslate:s,snapGrid:o}=r;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&r.updateSlidesOffset();let l=-t;s&&(l=t),r.visibleSlidesIndexes=[],r.visibleSlides=[];let c=a.spaceBetween;typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*r.size:typeof c=="string"&&(c=parseFloat(c));for(let m=0;m<n.length;m+=1){const p=n[m];let f=p.swiperSlideOffset;a.cssMode&&a.centeredSlides&&(f-=n[0].swiperSlideOffset);const g=(l+(a.centeredSlides?r.minTranslate():0)-f)/(p.swiperSlideSize+c),b=(l-o[0]+(a.centeredSlides?r.minTranslate():0)-f)/(p.swiperSlideSize+c),x=-(l-f),v=x+r.slidesSizesGrid[m],E=x>=0&&x<=r.size-r.slidesSizesGrid[m],y=x>=0&&x<r.size-1||v>1&&v<=r.size||x<=0&&v>=r.size;y&&(r.visibleSlides.push(p),r.visibleSlidesIndexes.push(m)),aC(p,y,a.slideVisibleClass),aC(p,E,a.slideFullyVisibleClass),p.progress=s?-g:g,p.originalProgress=s?-b:b}}function KU(t){const r=this;if(typeof t>"u"){const f=r.rtlTranslate?-1:1;t=r&&r.translate&&r.translate*f||0}const a=r.params,n=r.maxTranslate()-r.minTranslate();let{progress:s,isBeginning:o,isEnd:l,progressLoop:c}=r;const m=o,p=l;if(n===0)s=0,o=!0,l=!0;else{s=(t-r.minTranslate())/n;const f=Math.abs(t-r.minTranslate())<1,g=Math.abs(t-r.maxTranslate())<1;o=f||s<=0,l=g||s>=1,f&&(s=0),g&&(s=1)}if(a.loop){const f=r.getSlideIndexByData(0),g=r.getSlideIndexByData(r.slides.length-1),b=r.slidesGrid[f],x=r.slidesGrid[g],v=r.slidesGrid[r.slidesGrid.length-1],E=Math.abs(t);E>=b?c=(E-b)/v:c=(E+v-x)/v,c>1&&(c-=1)}Object.assign(r,{progress:s,progressLoop:c,isBeginning:o,isEnd:l}),(a.watchSlidesProgress||a.centeredSlides&&a.autoHeight)&&r.updateSlidesProgress(t),o&&!m&&r.emit("reachBeginning toEdge"),l&&!p&&r.emit("reachEnd toEdge"),(m&&!o||p&&!l)&&r.emit("fromEdge"),r.emit("progress",s)}const hx=(t,r,a)=>{r&&!t.classList.contains(a)?t.classList.add(a):!r&&t.classList.contains(a)&&t.classList.remove(a)};function YU(){const t=this,{slides:r,params:a,slidesEl:n,activeIndex:s}=t,o=t.virtual&&a.virtual.enabled,l=t.grid&&a.grid&&a.grid.rows>1,c=g=>Do(n,`.${a.slideClass}${g}, swiper-slide${g}`)[0];let m,p,f;if(o)if(a.loop){let g=s-t.virtual.slidesBefore;g<0&&(g=t.virtual.slides.length+g),g>=t.virtual.slides.length&&(g-=t.virtual.slides.length),m=c(`[data-swiper-slide-index="${g}"]`)}else m=c(`[data-swiper-slide-index="${s}"]`);else l?(m=r.find(g=>g.column===s),f=r.find(g=>g.column===s+1),p=r.find(g=>g.column===s-1)):m=r[s];m&&(l||(f=LU(m,`.${a.slideClass}, swiper-slide`)[0],a.loop&&!f&&(f=r[0]),p=$U(m,`.${a.slideClass}, swiper-slide`)[0],a.loop&&!p===0&&(p=r[r.length-1]))),r.forEach(g=>{hx(g,g===m,a.slideActiveClass),hx(g,g===f,a.slideNextClass),hx(g,g===p,a.slidePrevClass)}),t.emitSlidesClasses()}const of=(t,r)=>{if(!t||t.destroyed||!t.params)return;const a=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,n=r.closest(a());if(n){let s=n.querySelector(`.${t.params.lazyPreloaderClass}`);!s&&t.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},bx=(t,r)=>{if(!t.slides[r])return;const a=t.slides[r].querySelector('[loading="lazy"]');a&&a.removeAttribute("loading")},NN=t=>{if(!t||t.destroyed||!t.params)return;let r=t.params.lazyPreloadPrevNext;const a=t.slides.length;if(!a||!r||r<0)return;r=Math.min(r,a);const n=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),s=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const l=s,c=[l-r];c.push(...Array.from({length:r}).map((m,p)=>l+n+p)),t.slides.forEach((m,p)=>{c.includes(m.column)&&bx(t,p)});return}const o=s+n-1;if(t.params.rewind||t.params.loop)for(let l=s-r;l<=o+r;l+=1){const c=(l%a+a)%a;(c<s||c>o)&&bx(t,c)}else for(let l=Math.max(s-r,0);l<=Math.min(o+r,a-1);l+=1)l!==s&&(l>o||l<s)&&bx(t,l)};function XU(t){const{slidesGrid:r,params:a}=t,n=t.rtlTranslate?t.translate:-t.translate;let s;for(let o=0;o<r.length;o+=1)typeof r[o+1]<"u"?n>=r[o]&&n<r[o+1]-(r[o+1]-r[o])/2?s=o:n>=r[o]&&n<r[o+1]&&(s=o+1):n>=r[o]&&(s=o);return a.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function QU(t){const r=this,a=r.rtlTranslate?r.translate:-r.translate,{snapGrid:n,params:s,activeIndex:o,realIndex:l,snapIndex:c}=r;let m=t,p;const f=x=>{let v=x-r.virtual.slidesBefore;return v<0&&(v=r.virtual.slides.length+v),v>=r.virtual.slides.length&&(v-=r.virtual.slides.length),v};if(typeof m>"u"&&(m=XU(r)),n.indexOf(a)>=0)p=n.indexOf(a);else{const x=Math.min(s.slidesPerGroupSkip,m);p=x+Math.floor((m-x)/s.slidesPerGroup)}if(p>=n.length&&(p=n.length-1),m===o&&!r.params.loop){p!==c&&(r.snapIndex=p,r.emit("snapIndexChange"));return}if(m===o&&r.params.loop&&r.virtual&&r.params.virtual.enabled){r.realIndex=f(m);return}const g=r.grid&&s.grid&&s.grid.rows>1;let b;if(r.virtual&&s.virtual.enabled&&s.loop)b=f(m);else if(g){const x=r.slides.find(E=>E.column===m);let v=parseInt(x.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(r.slides.indexOf(x),0)),b=Math.floor(v/s.grid.rows)}else if(r.slides[m]){const x=r.slides[m].getAttribute("data-swiper-slide-index");x?b=parseInt(x,10):b=m}else b=m;Object.assign(r,{previousSnapIndex:c,snapIndex:p,previousRealIndex:l,realIndex:b,previousIndex:o,activeIndex:m}),r.initialized&&NN(r),r.emit("activeIndexChange"),r.emit("snapIndexChange"),(r.initialized||r.params.runCallbacksOnInit)&&(l!==b&&r.emit("realIndexChange"),r.emit("slideChange"))}function JU(t,r){const a=this,n=a.params;let s=t.closest(`.${n.slideClass}, swiper-slide`);!s&&a.isElement&&r&&r.length>1&&r.includes(t)&&[...r.slice(r.indexOf(t)+1,r.length)].forEach(c=>{!s&&c.matches&&c.matches(`.${n.slideClass}, swiper-slide`)&&(s=c)});let o=!1,l;if(s){for(let c=0;c<a.slides.length;c+=1)if(a.slides[c]===s){o=!0,l=c;break}}if(s&&o)a.clickedSlide=s,a.virtual&&a.params.virtual.enabled?a.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):a.clickedIndex=l;else{a.clickedSlide=void 0,a.clickedIndex=void 0;return}n.slideToClickedSlide&&a.clickedIndex!==void 0&&a.clickedIndex!==a.activeIndex&&a.slideToClickedSlide()}var ZU={updateSize:UU,updateSlides:VU,updateAutoHeight:HU,updateSlidesOffset:WU,updateSlidesProgress:GU,updateProgress:KU,updateSlidesClasses:YU,updateActiveIndex:QU,updateClickedSlide:JU};function eV(t=this.isHorizontal()?"x":"y"){const r=this,{params:a,rtlTranslate:n,translate:s,wrapperEl:o}=r;if(a.virtualTranslate)return n?-s:s;if(a.cssMode)return s;let l=OU(o,t);return l+=r.cssOverflowAdjustment(),n&&(l=-l),l||0}function tV(t,r){const a=this,{rtlTranslate:n,params:s,wrapperEl:o,progress:l}=a;let c=0,m=0;const p=0;a.isHorizontal()?c=n?-t:t:m=t,s.roundLengths&&(c=Math.floor(c),m=Math.floor(m)),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?c:m,s.cssMode?o[a.isHorizontal()?"scrollLeft":"scrollTop"]=a.isHorizontal()?-c:-m:s.virtualTranslate||(a.isHorizontal()?c-=a.cssOverflowAdjustment():m-=a.cssOverflowAdjustment(),o.style.transform=`translate3d(${c}px, ${m}px, ${p}px)`);let f;const g=a.maxTranslate()-a.minTranslate();g===0?f=0:f=(t-a.minTranslate())/g,f!==l&&a.updateProgress(t),a.emit("setTranslate",a.translate,r)}function rV(){return-this.snapGrid[0]}function aV(){return-this.snapGrid[this.snapGrid.length-1]}function nV(t=0,r=this.params.speed,a=!0,n=!0,s){const o=this,{params:l,wrapperEl:c}=o;if(o.animating&&l.preventInteractionOnTransition)return!1;const m=o.minTranslate(),p=o.maxTranslate();let f;if(n&&t>m?f=m:n&&t<p?f=p:f=t,o.updateProgress(f),l.cssMode){const g=o.isHorizontal();if(r===0)c[g?"scrollLeft":"scrollTop"]=-f;else{if(!o.support.smoothScroll)return xj({swiper:o,targetPosition:-f,side:g?"left":"top"}),!0;c.scrollTo({[g?"left":"top"]:-f,behavior:"smooth"})}return!0}return r===0?(o.setTransition(0),o.setTranslate(f),a&&(o.emit("beforeTransitionStart",r,s),o.emit("transitionEnd"))):(o.setTransition(r),o.setTranslate(f),a&&(o.emit("beforeTransitionStart",r,s),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(b){!o||o.destroyed||b.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,a&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var sV={getTranslate:eV,setTranslate:tV,minTranslate:rV,maxTranslate:aV,translateTo:nV};function oV(t,r){const a=this;a.params.cssMode||(a.wrapperEl.style.transitionDuration=`${t}ms`,a.wrapperEl.style.transitionDelay=t===0?"0ms":""),a.emit("setTransition",t,r)}function Nj({swiper:t,runCallbacks:r,direction:a,step:n}){const{activeIndex:s,previousIndex:o}=t;let l=a;l||(s>o?l="next":s<o?l="prev":l="reset"),t.emit(`transition${n}`),r&&l==="reset"?t.emit(`slideResetTransition${n}`):r&&s!==o&&(t.emit(`slideChangeTransition${n}`),l==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`))}function lV(t=!0,r){const a=this,{params:n}=a;n.cssMode||(n.autoHeight&&a.updateAutoHeight(),Nj({swiper:a,runCallbacks:t,direction:r,step:"Start"}))}function iV(t=!0,r){const a=this,{params:n}=a;a.animating=!1,!n.cssMode&&(a.setTransition(0),Nj({swiper:a,runCallbacks:t,direction:r,step:"End"}))}var cV={setTransition:oV,transitionStart:lV,transitionEnd:iV};function dV(t=0,r,a=!0,n,s){typeof t=="string"&&(t=parseInt(t,10));const o=this;let l=t;l<0&&(l=0);const{params:c,snapGrid:m,slidesGrid:p,previousIndex:f,activeIndex:g,rtlTranslate:b,wrapperEl:x,enabled:v}=o;if(!v&&!n&&!s||o.destroyed||o.animating&&c.preventInteractionOnTransition)return!1;typeof r>"u"&&(r=o.params.speed);const E=Math.min(o.params.slidesPerGroupSkip,l);let y=E+Math.floor((l-E)/o.params.slidesPerGroup);y>=m.length&&(y=m.length-1);const w=-m[y];if(c.normalizeSlideIndex)for(let T=0;T<p.length;T+=1){const O=-Math.floor(w*100),R=Math.floor(p[T]*100),D=Math.floor(p[T+1]*100);typeof p[T+1]<"u"?O>=R&&O<D-(D-R)/2?l=T:O>=R&&O<D&&(l=T+1):O>=R&&(l=T)}if(o.initialized&&l!==g&&(!o.allowSlideNext&&(b?w>o.translate&&w>o.minTranslate():w<o.translate&&w<o.minTranslate())||!o.allowSlidePrev&&w>o.translate&&w>o.maxTranslate()&&(g||0)!==l))return!1;l!==(f||0)&&a&&o.emit("beforeSlideChangeStart"),o.updateProgress(w);let k;l>g?k="next":l<g?k="prev":k="reset";const C=o.virtual&&o.params.virtual.enabled;if(!(C&&s)&&(b&&-w===o.translate||!b&&w===o.translate))return o.updateActiveIndex(l),c.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),c.effect!=="slide"&&o.setTranslate(w),k!=="reset"&&(o.transitionStart(a,k),o.transitionEnd(a,k)),!1;if(c.cssMode){const T=o.isHorizontal(),O=b?w:-w;if(r===0)C&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),C&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{x[T?"scrollLeft":"scrollTop"]=O})):x[T?"scrollLeft":"scrollTop"]=O,C&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return xj({swiper:o,targetPosition:O,side:T?"left":"top"}),!0;x.scrollTo({[T?"left":"top"]:O,behavior:"smooth"})}return!0}const P=wj().isSafari;return C&&!s&&P&&o.isElement&&o.virtual.update(!1,!1,l),o.setTransition(r),o.setTranslate(w),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",r,n),o.transitionStart(a,k),r===0?o.transitionEnd(a,k):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(O){!o||o.destroyed||O.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(a,k))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function mV(t=0,r,a=!0,n){typeof t=="string"&&(t=parseInt(t,10));const s=this;if(s.destroyed)return;typeof r>"u"&&(r=s.params.speed);const o=s.grid&&s.params.grid&&s.params.grid.rows>1;let l=t;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)l=l+s.virtual.slidesBefore;else{let c;if(o){const E=l*s.params.grid.rows;c=s.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===E).column}else c=s.getSlideIndexByData(l);const m=o?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:p,slidesOffsetBefore:f,slidesOffsetAfter:g}=s.params,b=p||!!f||!!g;let x=s.params.slidesPerView;x==="auto"?x=s.slidesPerViewDynamic():(x=Math.ceil(parseFloat(s.params.slidesPerView,10)),b&&x%2===0&&(x=x+1));let v=m-c<x;if(b&&(v=v||c<Math.ceil(x/2)),n&&b&&s.params.slidesPerView!=="auto"&&!o&&(v=!1),v){const E=b?c<s.activeIndex?"prev":"next":c-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:E,slideTo:!0,activeSlideIndex:E==="next"?c+1:c-m+1,slideRealIndex:E==="next"?s.realIndex:void 0})}if(o){const E=l*s.params.grid.rows;l=s.slides.find(y=>y.getAttribute("data-swiper-slide-index")*1===E).column}else l=s.getSlideIndexByData(l)}return requestAnimationFrame(()=>{s.slideTo(l,r,a,n)}),s}function uV(t,r=!0,a){const n=this,{enabled:s,params:o,animating:l}=n;if(!s||n.destroyed)return n;typeof t>"u"&&(t=n.params.speed);let c=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(c=Math.max(n.slidesPerViewDynamic("current",!0),1));const m=n.activeIndex<o.slidesPerGroupSkip?1:c,p=n.virtual&&o.virtual.enabled;if(o.loop){if(l&&!p&&o.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+m,t,r,a)}),!0}return o.rewind&&n.isEnd?n.slideTo(0,t,r,a):n.slideTo(n.activeIndex+m,t,r,a)}function pV(t,r=!0,a){const n=this,{params:s,snapGrid:o,slidesGrid:l,rtlTranslate:c,enabled:m,animating:p}=n;if(!m||n.destroyed)return n;typeof t>"u"&&(t=n.params.speed);const f=n.virtual&&s.virtual.enabled;if(s.loop){if(p&&!f&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const g=c?n.translate:-n.translate;function b(k){return k<0?-Math.floor(Math.abs(k)):Math.floor(k)}const x=b(g),v=o.map(k=>b(k)),E=s.freeMode&&s.freeMode.enabled;let y=o[v.indexOf(x)-1];if(typeof y>"u"&&(s.cssMode||E)){let k;o.forEach((C,A)=>{x>=C&&(k=A)}),typeof k<"u"&&(y=E?o[k]:o[k>0?k-1:k])}let w=0;if(typeof y<"u"&&(w=l.indexOf(y),w<0&&(w=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(w=w-n.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),s.rewind&&n.isBeginning){const k=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(k,t,r,a)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(w,t,r,a)}),!0;return n.slideTo(w,t,r,a)}function fV(t,r=!0,a){const n=this;if(!n.destroyed)return typeof t>"u"&&(t=n.params.speed),n.slideTo(n.activeIndex,t,r,a)}function gV(t,r=!0,a,n=.5){const s=this;if(s.destroyed)return;typeof t>"u"&&(t=s.params.speed);let o=s.activeIndex;const l=Math.min(s.params.slidesPerGroupSkip,o),c=l+Math.floor((o-l)/s.params.slidesPerGroup),m=s.rtlTranslate?s.translate:-s.translate;if(m>=s.snapGrid[c]){const p=s.snapGrid[c],f=s.snapGrid[c+1];m-p>(f-p)*n&&(o+=s.params.slidesPerGroup)}else{const p=s.snapGrid[c-1],f=s.snapGrid[c];m-p<=(f-p)*n&&(o-=s.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,s.slidesGrid.length-1),s.slideTo(o,t,r,a)}function hV(){const t=this;if(t.destroyed)return;const{params:r,slidesEl:a}=t,n=r.slidesPerView==="auto"?t.slidesPerViewDynamic():r.slidesPerView;let s=t.getSlideIndexWhenGrid(t.clickedIndex),o;const l=t.isElement?"swiper-slide":`.${r.slideClass}`,c=t.grid&&t.params.grid&&t.params.grid.rows>1;if(r.loop){if(t.animating)return;o=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),r.centeredSlides?t.slideToLoop(o):s>(c?(t.slides.length-n)/2-(t.params.grid.rows-1):t.slides.length-n)?(t.loopFix(),s=t.getSlideIndex(Do(a,`${l}[data-swiper-slide-index="${o}"]`)[0]),bj(()=>{t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}var bV={slideTo:dV,slideToLoop:mV,slideNext:uV,slidePrev:pV,slideReset:fV,slideToClosest:gV,slideToClickedSlide:hV};function xV(t,r){const a=this,{params:n,slidesEl:s}=a;if(!n.loop||a.virtual&&a.params.virtual.enabled)return;const o=()=>{Do(s,`.${n.slideClass}, swiper-slide`).forEach((v,E)=>{v.setAttribute("data-swiper-slide-index",E)})},l=()=>{const x=Do(s,`.${n.slideBlankClass}`);x.forEach(v=>{v.remove()}),x.length>0&&(a.recalcSlides(),a.updateSlides())},c=a.grid&&n.grid&&n.grid.rows>1;n.loopAddBlankSlides&&(n.slidesPerGroup>1||c)&&l();const m=n.slidesPerGroup*(c?n.grid.rows:1),p=a.slides.length%m!==0,f=c&&a.slides.length%n.grid.rows!==0,g=x=>{for(let v=0;v<x;v+=1){const E=a.isElement?kf("swiper-slide",[n.slideBlankClass]):kf("div",[n.slideClass,n.slideBlankClass]);a.slidesEl.append(E)}};if(p){if(n.loopAddBlankSlides){const x=m-a.slides.length%m;g(x),a.recalcSlides(),a.updateSlides()}else Nf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(f){if(n.loopAddBlankSlides){const x=n.grid.rows-a.slides.length%n.grid.rows;g(x),a.recalcSlides(),a.updateSlides()}else Nf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();const b=n.centeredSlides||!!n.slidesOffsetBefore||!!n.slidesOffsetAfter;a.loopFix({slideRealIndex:t,direction:b?void 0:"next",initial:r})}function yV({slideRealIndex:t,slideTo:r=!0,direction:a,setTranslate:n,activeSlideIndex:s,initial:o,byController:l,byMousewheel:c}={}){const m=this;if(!m.params.loop)return;m.emit("beforeLoopFix");const{slides:p,allowSlidePrev:f,allowSlideNext:g,slidesEl:b,params:x}=m,{centeredSlides:v,slidesOffsetBefore:E,slidesOffsetAfter:y,initialSlide:w}=x,k=v||!!E||!!y;if(m.allowSlidePrev=!0,m.allowSlideNext=!0,m.virtual&&x.virtual.enabled){r&&(!k&&m.snapIndex===0?m.slideTo(m.virtual.slides.length,0,!1,!0):k&&m.snapIndex<x.slidesPerView?m.slideTo(m.virtual.slides.length+m.snapIndex,0,!1,!0):m.snapIndex===m.snapGrid.length-1&&m.slideTo(m.virtual.slidesBefore,0,!1,!0)),m.allowSlidePrev=f,m.allowSlideNext=g,m.emit("loopFix");return}let C=x.slidesPerView;C==="auto"?C=m.slidesPerViewDynamic():(C=Math.ceil(parseFloat(x.slidesPerView,10)),k&&C%2===0&&(C=C+1));const A=x.slidesPerGroupAuto?C:x.slidesPerGroup;let S=k?Math.max(A,Math.ceil(C/2)):A;S%A!==0&&(S+=A-S%A),S+=x.loopAdditionalSlides,m.loopedSlides=S;const P=m.grid&&x.grid&&x.grid.rows>1;p.length<C+S||m.params.effect==="cards"&&p.length<C+S*2?Nf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):P&&x.grid.fill==="row"&&Nf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const T=[],O=[],R=P?Math.ceil(p.length/x.grid.rows):p.length,D=o&&R-w<C&&!k;let $=D?w:m.activeIndex;typeof s>"u"?s=m.getSlideIndex(p.find(z=>z.classList.contains(x.slideActiveClass))):$=s;const j=a==="next"||!a,K=a==="prev"||!a;let H=0,V=0;const Y=(P?p[s].column:s)+(k&&typeof n>"u"?-C/2+.5:0);if(Y<S){H=Math.max(S-Y,A);for(let z=0;z<S-Y;z+=1){const L=z-Math.floor(z/R)*R;if(P){const Q=R-L-1;for(let B=p.length-1;B>=0;B-=1)p[B].column===Q&&T.push(B)}else T.push(R-L-1)}}else if(Y+C>R-S){V=Math.max(Y-(R-S*2),A),D&&(V=Math.max(V,C-R+w+1));for(let z=0;z<V;z+=1){const L=z-Math.floor(z/R)*R;P?p.forEach((Q,B)=>{Q.column===L&&O.push(B)}):O.push(L)}}if(m.__preventObserver__=!0,requestAnimationFrame(()=>{m.__preventObserver__=!1}),m.params.effect==="cards"&&p.length<C+S*2&&(O.includes(s)&&O.splice(O.indexOf(s),1),T.includes(s)&&T.splice(T.indexOf(s),1)),K&&T.forEach(z=>{p[z].swiperLoopMoveDOM=!0,b.prepend(p[z]),p[z].swiperLoopMoveDOM=!1}),j&&O.forEach(z=>{p[z].swiperLoopMoveDOM=!0,b.append(p[z]),p[z].swiperLoopMoveDOM=!1}),m.recalcSlides(),x.slidesPerView==="auto"?m.updateSlides():P&&(T.length>0&&K||O.length>0&&j)&&m.slides.forEach((z,L)=>{m.grid.updateSlide(L,z,m.slides)}),x.watchSlidesProgress&&m.updateSlidesOffset(),r){if(T.length>0&&K){if(typeof t>"u"){const z=m.slidesGrid[$],Q=m.slidesGrid[$+H]-z;c?m.setTranslate(m.translate-Q):(m.slideTo($+Math.ceil(H),0,!1,!0),n&&(m.touchEventsData.startTranslate=m.touchEventsData.startTranslate-Q,m.touchEventsData.currentTranslate=m.touchEventsData.currentTranslate-Q))}else if(n){const z=P?T.length/x.grid.rows:T.length;m.slideTo(m.activeIndex+z,0,!1,!0),m.touchEventsData.currentTranslate=m.translate}}else if(O.length>0&&j)if(typeof t>"u"){const z=m.slidesGrid[$],Q=m.slidesGrid[$-V]-z;c?m.setTranslate(m.translate-Q):(m.slideTo($-V,0,!1,!0),n&&(m.touchEventsData.startTranslate=m.touchEventsData.startTranslate-Q,m.touchEventsData.currentTranslate=m.touchEventsData.currentTranslate-Q))}else{const z=P?O.length/x.grid.rows:O.length;m.slideTo(m.activeIndex-z,0,!1,!0)}}if(m.allowSlidePrev=f,m.allowSlideNext=g,m.controller&&m.controller.control&&!l){const z={slideRealIndex:t,direction:a,setTranslate:n,activeSlideIndex:s,byController:!0};Array.isArray(m.controller.control)?m.controller.control.forEach(L=>{!L.destroyed&&L.params.loop&&L.loopFix({...z,slideTo:L.params.slidesPerView===x.slidesPerView?r:!1})}):m.controller.control instanceof m.constructor&&m.controller.control.params.loop&&m.controller.control.loopFix({...z,slideTo:m.controller.control.params.slidesPerView===x.slidesPerView?r:!1})}m.emit("loopFix")}function vV(){const t=this,{params:r,slidesEl:a}=t;if(!r.loop||!a||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const n=[];t.slides.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[o]=s}),t.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{a.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var EV={loopCreate:xV,loopFix:yV,loopDestroy:vV};function wV(t){const r=this;if(!r.params.simulateTouch||r.params.watchOverflow&&r.isLocked||r.params.cssMode)return;const a=r.params.touchEventsTarget==="container"?r.el:r.wrapperEl;r.isElement&&(r.__preventObserver__=!0),a.style.cursor="move",a.style.cursor=t?"grabbing":"grab",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1})}function NV(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var kV={setGrabCursor:wV,unsetGrabCursor:NV};function SV(t,r=this){function a(n){if(!n||n===Ec()||n===ds())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(t);return!s&&!n.getRootNode?null:s||a(n.getRootNode().host)}return a(r)}function nC(t,r,a){const n=ds(),{params:s}=t,o=s.edgeSwipeDetection,l=s.edgeSwipeThreshold;return o&&(a<=l||a>=n.innerWidth-l)?o==="prevent"?(r.preventDefault(),!0):!1:!0}function CV(t){const r=this,a=Ec();let n=t;n.originalEvent&&(n=n.originalEvent);const s=r.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){nC(r,n,n.targetTouches[0].pageX);return}const{params:o,touches:l,enabled:c}=r;if(!c||!o.simulateTouch&&n.pointerType==="mouse"||r.animating&&o.preventInteractionOnTransition)return;!r.animating&&o.cssMode&&o.loop&&r.loopFix();let m=n.target;if(o.touchEventsTarget==="wrapper"&&!RU(m,r.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const p=!!o.noSwipingClass&&o.noSwipingClass!=="",f=n.composedPath?n.composedPath():n.path;p&&n.target&&n.target.shadowRoot&&f&&(m=f[0]);const g=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,b=!!(n.target&&n.target.shadowRoot);if(o.noSwiping&&(b?SV(g,m):m.closest(g))){r.allowClick=!0;return}if(o.swipeHandler&&!m.closest(o.swipeHandler))return;l.currentX=n.pageX,l.currentY=n.pageY;const x=l.currentX,v=l.currentY;if(!nC(r,n,x))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=x,l.startY=v,s.touchStartTime=wf(),r.allowClick=!0,r.updateSize(),r.swipeDirection=void 0,o.threshold>0&&(s.allowThresholdMove=!1);let E=!0;m.matches(s.focusableElements)&&(E=!1,m.nodeName==="SELECT"&&(s.isTouched=!1)),a.activeElement&&a.activeElement.matches(s.focusableElements)&&a.activeElement!==m&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!m.matches(s.focusableElements))&&a.activeElement.blur();const y=E&&r.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||y)&&!m.isContentEditable&&n.preventDefault(),o.freeMode&&o.freeMode.enabled&&r.freeMode&&r.animating&&!o.cssMode&&r.freeMode.onTouchStart(),r.emit("touchStart",n)}function AV(t){const r=Ec(),a=this,n=a.touchEventsData,{params:s,touches:o,rtlTranslate:l,enabled:c}=a;if(!c||!s.simulateTouch&&t.pointerType==="mouse")return;let m=t;if(m.originalEvent&&(m=m.originalEvent),m.type==="pointermove"&&(n.touchId!==null||m.pointerId!==n.pointerId))return;let p;if(m.type==="touchmove"){if(p=[...m.changedTouches].find(S=>S.identifier===n.touchId),!p||p.identifier!==n.touchId)return}else p=m;if(!n.isTouched){n.startMoving&&n.isScrolling&&a.emit("touchMoveOpposite",m);return}const f=p.pageX,g=p.pageY;if(m.preventedByNestedSwiper){o.startX=f,o.startY=g;return}if(!a.allowTouchMove){m.target.matches(n.focusableElements)||(a.allowClick=!1),n.isTouched&&(Object.assign(o,{startX:f,startY:g,currentX:f,currentY:g}),n.touchStartTime=wf());return}if(s.touchReleaseOnEdges&&!s.loop)if(a.isVertical()){if(g<o.startY&&a.translate<=a.maxTranslate()||g>o.startY&&a.translate>=a.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else{if(l&&(f>o.startX&&-a.translate<=a.maxTranslate()||f<o.startX&&-a.translate>=a.minTranslate()))return;if(!l&&(f<o.startX&&a.translate<=a.maxTranslate()||f>o.startX&&a.translate>=a.minTranslate()))return}if(r.activeElement&&r.activeElement.matches(n.focusableElements)&&r.activeElement!==m.target&&m.pointerType!=="mouse"&&r.activeElement.blur(),r.activeElement&&m.target===r.activeElement&&m.target.matches(n.focusableElements)){n.isMoved=!0,a.allowClick=!1;return}n.allowTouchCallbacks&&a.emit("touchMove",m),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=f,o.currentY=g;const b=o.currentX-o.startX,x=o.currentY-o.startY;if(a.params.threshold&&Math.sqrt(b**2+x**2)<a.params.threshold)return;if(typeof n.isScrolling>"u"){let S;a.isHorizontal()&&o.currentY===o.startY||a.isVertical()&&o.currentX===o.startX?n.isScrolling=!1:b*b+x*x>=25&&(S=Math.atan2(Math.abs(x),Math.abs(b))*180/Math.PI,n.isScrolling=a.isHorizontal()?S>s.touchAngle:90-S>s.touchAngle)}if(n.isScrolling&&a.emit("touchMoveOpposite",m),typeof n.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(n.startMoving=!0),n.isScrolling||m.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;a.allowClick=!1,!s.cssMode&&m.cancelable&&m.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&m.stopPropagation();let v=a.isHorizontal()?b:x,E=a.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;s.oneWayMovement&&(v=Math.abs(v)*(l?1:-1),E=Math.abs(E)*(l?1:-1)),o.diff=v,v*=s.touchRatio,l&&(v=-v,E=-E);const y=a.touchesDirection;a.swipeDirection=v>0?"prev":"next",a.touchesDirection=E>0?"prev":"next";const w=a.params.loop&&!s.cssMode,k=a.touchesDirection==="next"&&a.allowSlideNext||a.touchesDirection==="prev"&&a.allowSlidePrev;if(!n.isMoved){if(w&&k&&a.loopFix({direction:a.swipeDirection}),n.startTranslate=a.getTranslate(),a.setTransition(0),a.animating){const S=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});a.wrapperEl.dispatchEvent(S)}n.allowMomentumBounce=!1,s.grabCursor&&(a.allowSlideNext===!0||a.allowSlidePrev===!0)&&a.setGrabCursor(!0),a.emit("sliderFirstMove",m)}if(new Date().getTime(),s._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&y!==a.touchesDirection&&w&&k&&Math.abs(v)>=1){Object.assign(o,{startX:f,startY:g,currentX:f,currentY:g,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}a.emit("sliderMove",m),n.isMoved=!0,n.currentTranslate=v+n.startTranslate;let C=!0,A=s.resistanceRatio;if(s.touchReleaseOnEdges&&(A=0),v>0?(w&&k&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?a.minTranslate()-a.slidesSizesGrid[a.activeIndex+1]-(s.slidesPerView!=="auto"&&a.slides.length-s.slidesPerView>=2?a.slidesSizesGrid[a.activeIndex+1]+a.params.spaceBetween:0)-a.params.spaceBetween:a.minTranslate())&&a.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>a.minTranslate()&&(C=!1,s.resistance&&(n.currentTranslate=a.minTranslate()-1+(-a.minTranslate()+n.startTranslate+v)**A))):v<0&&(w&&k&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?a.maxTranslate()+a.slidesSizesGrid[a.slidesSizesGrid.length-1]+a.params.spaceBetween+(s.slidesPerView!=="auto"&&a.slides.length-s.slidesPerView>=2?a.slidesSizesGrid[a.slidesSizesGrid.length-1]+a.params.spaceBetween:0):a.maxTranslate())&&a.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:a.slides.length-(s.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<a.maxTranslate()&&(C=!1,s.resistance&&(n.currentTranslate=a.maxTranslate()+1-(a.maxTranslate()-n.startTranslate-v)**A))),C&&(m.preventedByNestedSwiper=!0),!a.allowSlideNext&&a.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!a.allowSlidePrev&&a.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!a.allowSlidePrev&&!a.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(v)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,n.currentTranslate=n.startTranslate,o.diff=a.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&a.freeMode||s.watchSlidesProgress)&&(a.updateActiveIndex(),a.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&a.freeMode&&a.freeMode.onTouchMove(),a.updateProgress(n.currentTranslate),a.setTranslate(n.currentTranslate))}function _V(t){const r=this,a=r.touchEventsData;let n=t;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].find(S=>S.identifier===a.touchId),!s||s.identifier!==a.touchId)return}else{if(a.touchId!==null||n.pointerId!==a.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(r.browser.isSafari||r.browser.isWebView)))return;a.pointerId=null,a.touchId=null;const{params:l,touches:c,rtlTranslate:m,slidesGrid:p,enabled:f}=r;if(!f||!l.simulateTouch&&n.pointerType==="mouse")return;if(a.allowTouchCallbacks&&r.emit("touchEnd",n),a.allowTouchCallbacks=!1,!a.isTouched){a.isMoved&&l.grabCursor&&r.setGrabCursor(!1),a.isMoved=!1,a.startMoving=!1;return}l.grabCursor&&a.isMoved&&a.isTouched&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!1);const g=wf(),b=g-a.touchStartTime;if(r.allowClick){const S=n.path||n.composedPath&&n.composedPath();r.updateClickedSlide(S&&S[0]||n.target,S),r.emit("tap click",n),b<300&&g-a.lastClickTime<300&&r.emit("doubleTap doubleClick",n)}if(a.lastClickTime=wf(),bj(()=>{r.destroyed||(r.allowClick=!0)}),!a.isTouched||!a.isMoved||!r.swipeDirection||c.diff===0&&!a.loopSwapReset||a.currentTranslate===a.startTranslate&&!a.loopSwapReset){a.isTouched=!1,a.isMoved=!1,a.startMoving=!1;return}a.isTouched=!1,a.isMoved=!1,a.startMoving=!1;let x;if(l.followFinger?x=m?r.translate:-r.translate:x=-a.currentTranslate,l.cssMode)return;if(l.freeMode&&l.freeMode.enabled){r.freeMode.onTouchEnd({currentPos:x});return}const v=x>=-r.maxTranslate()&&!r.params.loop;let E=0,y=r.slidesSizesGrid[0];for(let S=0;S<p.length;S+=S<l.slidesPerGroupSkip?1:l.slidesPerGroup){const P=S<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;typeof p[S+P]<"u"?(v||x>=p[S]&&x<p[S+P])&&(E=S,y=p[S+P]-p[S]):(v||x>=p[S])&&(E=S,y=p[p.length-1]-p[p.length-2])}let w=null,k=null;l.rewind&&(r.isBeginning?k=l.virtual&&l.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1:r.isEnd&&(w=0));const C=(x-p[E])/y,A=E<l.slidesPerGroupSkip-1?1:l.slidesPerGroup;if(b>l.longSwipesMs){if(!l.longSwipes){r.slideTo(r.activeIndex);return}r.swipeDirection==="next"&&(C>=l.longSwipesRatio?r.slideTo(l.rewind&&r.isEnd?w:E+A):r.slideTo(E)),r.swipeDirection==="prev"&&(C>1-l.longSwipesRatio?r.slideTo(E+A):k!==null&&C<0&&Math.abs(C)>l.longSwipesRatio?r.slideTo(k):r.slideTo(E))}else{if(!l.shortSwipes){r.slideTo(r.activeIndex);return}r.navigation&&(n.target===r.navigation.nextEl||n.target===r.navigation.prevEl)?n.target===r.navigation.nextEl?r.slideTo(E+A):r.slideTo(E):(r.swipeDirection==="next"&&r.slideTo(w!==null?w:E+A),r.swipeDirection==="prev"&&r.slideTo(k!==null?k:E))}}function sC(){const t=this,{params:r,el:a}=t;if(a&&a.offsetWidth===0)return;r.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:o}=t,l=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const c=l&&r.loop;(r.slidesPerView==="auto"||r.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!c?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!l?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=s,t.allowSlideNext=n,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function PV(t){const r=this;r.enabled&&(r.allowClick||(r.params.preventClicks&&t.preventDefault(),r.params.preventClicksPropagation&&r.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function TV(){const t=this,{wrapperEl:r,rtlTranslate:a,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-r.scrollLeft:t.translate=-r.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let s;const o=t.maxTranslate()-t.minTranslate();o===0?s=0:s=(t.translate-t.minTranslate())/o,s!==t.progress&&t.updateProgress(a?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function OV(t){const r=this;of(r,t.target),!(r.params.cssMode||r.params.slidesPerView!=="auto"&&!r.params.autoHeight)&&r.update()}function MV(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const kj=(t,r)=>{const a=Ec(),{params:n,el:s,wrapperEl:o,device:l}=t,c=!!n.nested,m=r==="on"?"addEventListener":"removeEventListener",p=r;!s||typeof s=="string"||(a[m]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:c}),s[m]("touchstart",t.onTouchStart,{passive:!1}),s[m]("pointerdown",t.onTouchStart,{passive:!1}),a[m]("touchmove",t.onTouchMove,{passive:!1,capture:c}),a[m]("pointermove",t.onTouchMove,{passive:!1,capture:c}),a[m]("touchend",t.onTouchEnd,{passive:!0}),a[m]("pointerup",t.onTouchEnd,{passive:!0}),a[m]("pointercancel",t.onTouchEnd,{passive:!0}),a[m]("touchcancel",t.onTouchEnd,{passive:!0}),a[m]("pointerout",t.onTouchEnd,{passive:!0}),a[m]("pointerleave",t.onTouchEnd,{passive:!0}),a[m]("contextmenu",t.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[m]("click",t.onClick,!0),n.cssMode&&o[m]("scroll",t.onScroll),n.updateOnWindowResize?t[p](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",sC,!0):t[p]("observerUpdate",sC,!0),s[m]("load",t.onLoad,{capture:!0}))};function jV(){const t=this,{params:r}=t;t.onTouchStart=CV.bind(t),t.onTouchMove=AV.bind(t),t.onTouchEnd=_V.bind(t),t.onDocumentTouchStart=MV.bind(t),r.cssMode&&(t.onScroll=TV.bind(t)),t.onClick=PV.bind(t),t.onLoad=OV.bind(t),kj(t,"on")}function RV(){kj(this,"off")}var $V={attachEvents:jV,detachEvents:RV};const oC=(t,r)=>t.grid&&r.grid&&r.grid.rows>1;function LV(){const t=this,{realIndex:r,initialized:a,params:n,el:s}=t,o=n.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const l=Ec(),c=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",m=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?t.el:l.querySelector(n.breakpointsBase),p=t.getBreakpoint(o,c,m);if(!p||t.currentBreakpoint===p)return;const g=(p in o?o[p]:void 0)||t.originalParams,b=oC(t,n),x=oC(t,g),v=t.params.grabCursor,E=g.grabCursor,y=n.enabled;b&&!x?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),t.emitContainerClasses()):!b&&x&&(s.classList.add(`${n.containerModifierClass}grid`),(g.grid.fill&&g.grid.fill==="column"||!g.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),t.emitContainerClasses()),v&&!E?t.unsetGrabCursor():!v&&E&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(P=>{if(typeof g[P]>"u")return;const T=n[P]&&n[P].enabled,O=g[P]&&g[P].enabled;T&&!O&&t[P].disable(),!T&&O&&t[P].enable()});const w=g.direction&&g.direction!==n.direction,k=n.loop&&(g.slidesPerView!==n.slidesPerView||w),C=n.loop;w&&a&&t.changeDirection(),Ls(t.params,g);const A=t.params.enabled,S=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),y&&!A?t.disable():!y&&A&&t.enable(),t.currentBreakpoint=p,t.emit("_beforeBreakpoint",g),a&&(k?(t.loopDestroy(),t.loopCreate(r),t.updateSlides()):!C&&S?(t.loopCreate(r),t.updateSlides()):C&&!S&&t.loopDestroy()),t.emit("breakpoint",g)}function IV(t,r="window",a){if(!t||r==="container"&&!a)return;let n=!1;const s=ds(),o=r==="window"?s.innerHeight:a.clientHeight,l=Object.keys(t).map(c=>{if(typeof c=="string"&&c.indexOf("@")===0){const m=parseFloat(c.substr(1));return{value:o*m,point:c}}return{value:c,point:c}});l.sort((c,m)=>parseInt(c.value,10)-parseInt(m.value,10));for(let c=0;c<l.length;c+=1){const{point:m,value:p}=l[c];r==="window"?s.matchMedia(`(min-width: ${p}px)`).matches&&(n=m):p<=a.clientWidth&&(n=m)}return n||"max"}var DV={setBreakpoint:LV,getBreakpoint:IV};function FV(t,r){const a=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&a.push(r+s)}):typeof n=="string"&&a.push(r+n)}),a}function zV(){const t=this,{classNames:r,params:a,rtl:n,el:s,device:o}=t,l=FV(["initialized",a.direction,{"free-mode":t.params.freeMode&&a.freeMode.enabled},{autoheight:a.autoHeight},{rtl:n},{grid:a.grid&&a.grid.rows>1},{"grid-column":a.grid&&a.grid.rows>1&&a.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":a.cssMode},{centered:a.cssMode&&a.centeredSlides},{"watch-progress":a.watchSlidesProgress}],a.containerModifierClass);r.push(...l),s.classList.add(...r),t.emitContainerClasses()}function BV(){const t=this,{el:r,classNames:a}=t;!r||typeof r=="string"||(r.classList.remove(...a),t.emitContainerClasses())}var qV={addClasses:zV,removeClasses:BV};function UV(){const t=this,{isLocked:r,params:a}=t,{slidesOffsetBefore:n}=a;if(n){const s=t.slides.length-1,o=t.slidesGrid[s]+t.slidesSizesGrid[s]+n*2;t.isLocked=t.size>o}else t.isLocked=t.snapGrid.length===1;a.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),a.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),r&&r!==t.isLocked&&(t.isEnd=!1),r!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var VV={checkOverflow:UV},kN={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function HV(t,r){return function(n={}){const s=Object.keys(n)[0],o=n[s];if(typeof o!="object"||o===null){Ls(r,n);return}if(t[s]===!0&&(t[s]={enabled:!0}),s==="navigation"&&t[s]&&t[s].enabled&&!t[s].prevEl&&!t[s].nextEl&&(t[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&t[s]&&t[s].enabled&&!t[s].el&&(t[s].auto=!0),!(s in t&&"enabled"in o)){Ls(r,n);return}typeof t[s]=="object"&&!("enabled"in t[s])&&(t[s].enabled=!0),t[s]||(t[s]={enabled:!1}),Ls(r,n)}}const xx={eventsEmitter:qU,update:ZU,translate:sV,transition:cV,slide:bV,loop:EV,grabCursor:kV,events:$V,breakpoints:DV,checkOverflow:VV,classes:qV},yx={};let S2=class pl{constructor(...r){let a,n;r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[a,n]=r,n||(n={}),n=Ls({},n),a&&!n.el&&(n.el=a);const s=Ec();if(n.el&&typeof n.el=="string"&&s.querySelectorAll(n.el).length>1){const m=[];return s.querySelectorAll(n.el).forEach(p=>{const f=Ls({},n,{el:p});m.push(new pl(f))}),m}const o=this;o.__swiper__=!0,o.support=vj(),o.device=Ej({userAgent:n.userAgent}),o.browser=wj(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],n.modules&&Array.isArray(n.modules)&&o.modules.push(...n.modules);const l={};o.modules.forEach(m=>{m({params:n,swiper:o,extendParams:HV(n,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=Ls({},kN,l);return o.params=Ls({},c,yx,n),o.originalParams=Ls({},o.params),o.passedParams=Ls({},n),o.params&&o.params.on&&Object.keys(o.params.on).forEach(m=>{o.on(m,o.params.on[m])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:a,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(r){return this.isHorizontal()?r:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[r]}getSlideIndex(r){const{slidesEl:a,params:n}=this,s=Do(a,`.${n.slideClass}, swiper-slide`),o=Sf(s[0]);return Sf(r)-o}getSlideIndexByData(r){return this.getSlideIndex(this.slides.find(a=>a.getAttribute("data-swiper-slide-index")*1===r))}getSlideIndexWhenGrid(r){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?r=Math.floor(r/this.params.grid.rows):this.params.grid.fill==="row"&&(r=r%Math.ceil(this.slides.length/this.params.grid.rows))),r}recalcSlides(){const r=this,{slidesEl:a,params:n}=r;r.slides=Do(a,`.${n.slideClass}, swiper-slide`)}enable(){const r=this;r.enabled||(r.enabled=!0,r.params.grabCursor&&r.setGrabCursor(),r.emit("enable"))}disable(){const r=this;r.enabled&&(r.enabled=!1,r.params.grabCursor&&r.unsetGrabCursor(),r.emit("disable"))}setProgress(r,a){const n=this;r=Math.min(Math.max(r,0),1);const s=n.minTranslate(),l=(n.maxTranslate()-s)*r+s;n.translateTo(l,typeof a>"u"?0:a),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const r=this;if(!r.params._emitClasses||!r.el)return;const a=r.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(r.params.containerModifierClass)===0);r.emit("_containerClasses",a.join(" "))}getSlideClasses(r){const a=this;return a.destroyed?"":r.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(a.params.slideClass)===0).join(" ")}emitSlidesClasses(){const r=this;if(!r.params._emitClasses||!r.el)return;const a=[];r.slides.forEach(n=>{const s=r.getSlideClasses(n);a.push({slideEl:n,classNames:s}),r.emit("_slideClass",n,s)}),r.emit("_slideClasses",a)}slidesPerViewDynamic(r="current",a=!1){const n=this,{params:s,slides:o,slidesGrid:l,slidesSizesGrid:c,size:m,activeIndex:p}=n;let f=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let g=o[p]?Math.ceil(o[p].swiperSlideSize):0,b;for(let x=p+1;x<o.length;x+=1)o[x]&&!b&&(g+=Math.ceil(o[x].swiperSlideSize),f+=1,g>m&&(b=!0));for(let x=p-1;x>=0;x-=1)o[x]&&!b&&(g+=o[x].swiperSlideSize,f+=1,g>m&&(b=!0))}else if(r==="current")for(let g=p+1;g<o.length;g+=1)(a?l[g]+c[g]-l[p]<m:l[g]-l[p]<m)&&(f+=1);else for(let g=p-1;g>=0;g-=1)l[p]-l[g]<m&&(f+=1);return f}update(){const r=this;if(!r||r.destroyed)return;const{snapGrid:a,params:n}=r;n.breakpoints&&r.setBreakpoint(),[...r.el.querySelectorAll('[loading="lazy"]')].forEach(l=>{l.complete&&of(r,l)}),r.updateSize(),r.updateSlides(),r.updateProgress(),r.updateSlidesClasses();function s(){const l=r.rtlTranslate?r.translate*-1:r.translate,c=Math.min(Math.max(l,r.maxTranslate()),r.minTranslate());r.setTranslate(c),r.updateActiveIndex(),r.updateSlidesClasses()}let o;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&r.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&r.isEnd&&!n.centeredSlides){const l=r.virtual&&n.virtual.enabled?r.virtual.slides:r.slides;o=r.slideTo(l.length-1,0,!1,!0)}else o=r.slideTo(r.activeIndex,0,!1,!0);o||s()}n.watchOverflow&&a!==r.snapGrid&&r.checkOverflow(),r.emit("update")}changeDirection(r,a=!0){const n=this,s=n.params.direction;return r||(r=s==="horizontal"?"vertical":"horizontal"),r===s||r!=="horizontal"&&r!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${r}`),n.emitContainerClasses(),n.params.direction=r,n.slides.forEach(o=>{r==="vertical"?o.style.width="":o.style.height=""}),n.emit("changeDirection"),a&&n.update()),n}changeLanguageDirection(r){const a=this;a.rtl&&r==="rtl"||!a.rtl&&r==="ltr"||(a.rtl=r==="rtl",a.rtlTranslate=a.params.direction==="horizontal"&&a.rtl,a.rtl?(a.el.classList.add(`${a.params.containerModifierClass}rtl`),a.el.dir="rtl"):(a.el.classList.remove(`${a.params.containerModifierClass}rtl`),a.el.dir="ltr"),a.update())}mount(r){const a=this;if(a.mounted)return!0;let n=r||a.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=a,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===a.params.swiperElementNodeName.toUpperCase()&&(a.isElement=!0);const s=()=>`.${(a.params.wrapperClass||"").trim().split(" ").join(".")}`;let l=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):Do(n,s())[0];return!l&&a.params.createElements&&(l=kf("div",a.params.wrapperClass),n.append(l),Do(n,`.${a.params.slideClass}`).forEach(c=>{l.append(c)})),Object.assign(a,{el:n,wrapperEl:l,slidesEl:a.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:l,hostEl:a.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||ii(n,"direction")==="rtl",rtlTranslate:a.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||ii(n,"direction")==="rtl"),wrongRTL:ii(l,"display")==="-webkit-box"}),!0}init(r){const a=this;if(a.initialized||a.mount(r)===!1)return a;a.emit("beforeInit"),a.params.breakpoints&&a.setBreakpoint(),a.addClasses(),a.updateSize(),a.updateSlides(),a.params.watchOverflow&&a.checkOverflow(),a.params.grabCursor&&a.enabled&&a.setGrabCursor(),a.params.loop&&a.virtual&&a.params.virtual.enabled?a.slideTo(a.params.initialSlide+a.virtual.slidesBefore,0,a.params.runCallbacksOnInit,!1,!0):a.slideTo(a.params.initialSlide,0,a.params.runCallbacksOnInit,!1,!0),a.params.loop&&a.loopCreate(void 0,!0),a.attachEvents();const s=[...a.el.querySelectorAll('[loading="lazy"]')];return a.isElement&&s.push(...a.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(o=>{o.complete?of(a,o):o.addEventListener("load",l=>{of(a,l.target)})}),NN(a),a.initialized=!0,NN(a),a.emit("init"),a.emit("afterInit"),a}destroy(r=!0,a=!0){const n=this,{params:s,el:o,wrapperEl:l,slides:c}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),a&&(n.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),l&&l.removeAttribute("style"),c&&c.length&&c.forEach(m=>{m.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),m.removeAttribute("style"),m.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(m=>{n.off(m)}),r!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),PU(n)),n.destroyed=!0),null}static extendDefaults(r){Ls(yx,r)}static get extendedDefaults(){return yx}static get defaults(){return kN}static installModule(r){pl.prototype.__modules__||(pl.prototype.__modules__=[]);const a=pl.prototype.__modules__;typeof r=="function"&&a.indexOf(r)<0&&a.push(r)}static use(r){return Array.isArray(r)?(r.forEach(a=>pl.installModule(a)),pl):(pl.installModule(r),pl)}};Object.keys(xx).forEach(t=>{Object.keys(xx[t]).forEach(r=>{S2.prototype[r]=xx[t][r]})});S2.use([zU,BU]);const Sj=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function mc(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function hd(t,r){const a=["__proto__","constructor","prototype"];Object.keys(r).filter(n=>a.indexOf(n)<0).forEach(n=>{typeof t[n]>"u"?t[n]=r[n]:mc(r[n])&&mc(t[n])&&Object.keys(r[n]).length>0?r[n].__swiper__?t[n]=r[n]:hd(t[n],r[n]):t[n]=r[n]})}function Cj(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function Aj(t={}){return t.pagination&&typeof t.pagination.el>"u"}function _j(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function Pj(t=""){const r=t.split(" ").map(n=>n.trim()).filter(n=>!!n),a=[];return r.forEach(n=>{a.indexOf(n)<0&&a.push(n)}),a.join(" ")}function WV(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function GV({swiper:t,slides:r,passedParams:a,changedParams:n,nextEl:s,prevEl:o,scrollbarEl:l,paginationEl:c}){const m=n.filter(O=>O!=="children"&&O!=="direction"&&O!=="wrapperClass"),{params:p,pagination:f,navigation:g,scrollbar:b,virtual:x,thumbs:v}=t;let E,y,w,k,C,A,S,P;n.includes("thumbs")&&a.thumbs&&a.thumbs.swiper&&!a.thumbs.swiper.destroyed&&p.thumbs&&(!p.thumbs.swiper||p.thumbs.swiper.destroyed)&&(E=!0),n.includes("controller")&&a.controller&&a.controller.control&&p.controller&&!p.controller.control&&(y=!0),n.includes("pagination")&&a.pagination&&(a.pagination.el||c)&&(p.pagination||p.pagination===!1)&&f&&!f.el&&(w=!0),n.includes("scrollbar")&&a.scrollbar&&(a.scrollbar.el||l)&&(p.scrollbar||p.scrollbar===!1)&&b&&!b.el&&(k=!0),n.includes("navigation")&&a.navigation&&(a.navigation.prevEl||o)&&(a.navigation.nextEl||s)&&(p.navigation||p.navigation===!1)&&g&&!g.prevEl&&!g.nextEl&&(C=!0);const T=O=>{t[O]&&(t[O].destroy(),O==="navigation"?(t.isElement&&(t[O].prevEl.remove(),t[O].nextEl.remove()),p[O].prevEl=void 0,p[O].nextEl=void 0,t[O].prevEl=void 0,t[O].nextEl=void 0):(t.isElement&&t[O].el.remove(),p[O].el=void 0,t[O].el=void 0))};n.includes("loop")&&t.isElement&&(p.loop&&!a.loop?A=!0:!p.loop&&a.loop?S=!0:P=!0),m.forEach(O=>{if(mc(p[O])&&mc(a[O]))Object.assign(p[O],a[O]),(O==="navigation"||O==="pagination"||O==="scrollbar")&&"enabled"in a[O]&&!a[O].enabled&&T(O);else{const R=a[O];(R===!0||R===!1)&&(O==="navigation"||O==="pagination"||O==="scrollbar")?R===!1&&T(O):p[O]=a[O]}}),m.includes("controller")&&!y&&t.controller&&t.controller.control&&p.controller&&p.controller.control&&(t.controller.control=p.controller.control),n.includes("children")&&r&&x&&p.virtual.enabled?(x.slides=r,x.update(!0)):n.includes("virtual")&&x&&p.virtual.enabled&&(r&&(x.slides=r),x.update(!0)),n.includes("children")&&r&&p.loop&&(P=!0),E&&v.init()&&v.update(!0),y&&(t.controller.control=p.controller.control),w&&(t.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),t.el.appendChild(c)),c&&(p.pagination.el=c),f.init(),f.render(),f.update()),k&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-scrollbar"),l.part.add("scrollbar"),t.el.appendChild(l)),l&&(p.scrollbar.el=l),b.init(),b.updateSize(),b.setTranslate()),C&&(t.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),Cf(s,t.navigation.arrowSvg),s.part.add("button-next"),t.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),Cf(o,t.navigation.arrowSvg),o.part.add("button-prev"),t.el.appendChild(o))),s&&(p.navigation.nextEl=s),o&&(p.navigation.prevEl=o),g.init(),g.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=a.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=a.allowSlidePrev),n.includes("direction")&&t.changeDirection(a.direction,!1),(A||P)&&t.loopDestroy(),(S||P)&&t.loopCreate(),t.update()}function KV(t={},r=!0){const a={on:{}},n={},s={};hd(a,kN),a._emitClasses=!0,a.init=!1;const o={},l=Sj.map(m=>m.replace(/_/,"")),c=Object.assign({},t);return Object.keys(c).forEach(m=>{typeof t[m]>"u"||(l.indexOf(m)>=0?mc(t[m])?(a[m]={},s[m]={},hd(a[m],t[m]),hd(s[m],t[m])):(a[m]=t[m],s[m]=t[m]):m.search(/on[A-Z]/)===0&&typeof t[m]=="function"?r?n[`${m[2].toLowerCase()}${m.substr(3)}`]=t[m]:a.on[`${m[2].toLowerCase()}${m.substr(3)}`]=t[m]:o[m]=t[m])}),["navigation","pagination","scrollbar"].forEach(m=>{a[m]===!0&&(a[m]={}),a[m]===!1&&delete a[m]}),{params:a,passedParams:s,rest:o,events:n}}function YV({el:t,nextEl:r,prevEl:a,paginationEl:n,scrollbarEl:s,swiper:o},l){Cj(l)&&r&&a&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=a,o.originalParams.navigation.prevEl=a),Aj(l)&&n&&(o.params.pagination.el=n,o.originalParams.pagination.el=n),_j(l)&&s&&(o.params.scrollbar.el=s,o.originalParams.scrollbar.el=s),o.init(t)}function XV(t,r,a,n,s){const o=[];if(!r)return o;const l=m=>{o.indexOf(m)<0&&o.push(m)};if(a&&n){const m=n.map(s),p=a.map(s);m.join("")!==p.join("")&&l("children"),n.length!==a.length&&l("children")}return Sj.filter(m=>m[0]==="_").map(m=>m.replace(/_/,"")).forEach(m=>{if(m in t&&m in r)if(mc(t[m])&&mc(r[m])){const p=Object.keys(t[m]),f=Object.keys(r[m]);p.length!==f.length?l(m):(p.forEach(g=>{t[m][g]!==r[m][g]&&l(m)}),f.forEach(g=>{t[m][g]!==r[m][g]&&l(m)}))}else t[m]!==r[m]&&l(m)}),o}const QV=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.emit("_virtualUpdated"),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Af(){return Af=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Af.apply(this,arguments)}function Tj(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function Oj(t){const r=[];return e.Children.toArray(t).forEach(a=>{Tj(a)?r.push(a):a.props&&a.props.children&&Oj(a.props.children).forEach(n=>r.push(n))}),r}function JV(t){const r=[],a={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return e.Children.toArray(t).forEach(n=>{if(Tj(n))r.push(n);else if(n.props&&n.props.slot&&a[n.props.slot])a[n.props.slot].push(n);else if(n.props&&n.props.children){const s=Oj(n.props.children);s.length>0?s.forEach(o=>r.push(o)):a["container-end"].push(n)}else a["container-end"].push(n)}),{slides:r,slots:a}}function ZV(t,r,a){if(!a)return null;const n=f=>{let g=f;return f<0?g=r.length+f:g>=r.length&&(g=g-r.length),g},s=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${a.offset}px`}:{top:`${a.offset}px`},{from:o,to:l}=a,c=t.params.loop?-r.length:0,m=t.params.loop?r.length*2:r.length,p=[];for(let f=c;f<m;f+=1)f>=o&&f<=l&&p.push(r[n(f)]);return p.map((f,g)=>e.cloneElement(f,{swiper:t,style:s,key:f.props.virtualIndex||f.key||`slide-${g}`}))}function cu(t,r){return typeof window>"u"?u.useEffect(t,r):u.useLayoutEffect(t,r)}const lC=u.createContext(null),eH=u.createContext(null),Mj=u.forwardRef(({className:t,tag:r="div",wrapperTag:a="div",children:n,onSwiper:s,...o}={},l)=>{let c=!1;const[m,p]=u.useState("swiper"),[f,g]=u.useState(null),[b,x]=u.useState(!1),v=u.useRef(!1),E=u.useRef(null),y=u.useRef(null),w=u.useRef(null),k=u.useRef(null),C=u.useRef(null),A=u.useRef(null),S=u.useRef(null),P=u.useRef(null),{params:T,passedParams:O,rest:R,events:D}=KV(o),{slides:$,slots:j}=JV(n),K=()=>{x(!b)};Object.assign(T.on,{_containerClasses(z,L){p(L)}});const H=()=>{Object.assign(T.on,D),c=!0;const z={...T};if(delete z.wrapperClass,y.current=new S2(z),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=$;const L={cache:!1,slides:$,renderExternal:g,renderExternalUpdate:!1};hd(y.current.params.virtual,L),hd(y.current.originalParams.virtual,L)}};E.current||H(),y.current&&y.current.on("_beforeBreakpoint",K);const V=()=>{c||!D||!y.current||Object.keys(D).forEach(z=>{y.current.on(z,D[z])})},q=()=>{!D||!y.current||Object.keys(D).forEach(z=>{y.current.off(z,D[z])})};u.useEffect(()=>()=>{y.current&&y.current.off("_beforeBreakpoint",K)}),u.useEffect(()=>{!v.current&&y.current&&(y.current.emitSlidesClasses(),v.current=!0)}),cu(()=>{if(l&&(l.current=E.current),!!E.current)return y.current.destroyed&&H(),YV({el:E.current,nextEl:C.current,prevEl:A.current,paginationEl:S.current,scrollbarEl:P.current,swiper:y.current},T),s&&!y.current.destroyed&&s(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}},[]),cu(()=>{V();const z=XV(O,w.current,$,k.current,L=>L.key);return w.current=O,k.current=$,z.length&&y.current&&!y.current.destroyed&&GV({swiper:y.current,slides:$,passedParams:O,changedParams:z,nextEl:C.current,prevEl:A.current,scrollbarEl:P.current,paginationEl:S.current}),()=>{q()}}),cu(()=>{QV(y.current)},[f]);function Y(){return T.virtual?ZV(y.current,$,f):$.map((z,L)=>e.cloneElement(z,{swiper:y.current,swiperSlideIndex:L}))}return e.createElement(r,Af({ref:E,className:Pj(`${m}${t?` ${t}`:""}`)},R),e.createElement(eH.Provider,{value:y.current},j["container-start"],e.createElement(a,{className:WV(T.wrapperClass)},j["wrapper-start"],Y(),j["wrapper-end"]),Cj(T)&&e.createElement(e.Fragment,null,e.createElement("div",{ref:A,className:"swiper-button-prev"}),e.createElement("div",{ref:C,className:"swiper-button-next"})),_j(T)&&e.createElement("div",{ref:P,className:"swiper-scrollbar"}),Aj(T)&&e.createElement("div",{ref:S,className:"swiper-pagination"}),j["container-end"]))});Mj.displayName="Swiper";const jj=u.forwardRef(({tag:t="div",children:r,className:a="",swiper:n,zoom:s,lazy:o,virtualIndex:l,swiperSlideIndex:c,...m}={},p)=>{const f=u.useRef(null),[g,b]=u.useState("swiper-slide"),[x,v]=u.useState(!1);function E(C,A,S){A===f.current&&b(S)}cu(()=>{if(typeof c<"u"&&(f.current.swiperSlideIndex=c),p&&(p.current=f.current),!(!f.current||!n)){if(n.destroyed){g!=="swiper-slide"&&b("swiper-slide");return}return n.on("_slideClass",E),()=>{n&&n.off("_slideClass",E)}}}),cu(()=>{n&&f.current&&!n.destroyed&&b(n.getSlideClasses(f.current))},[n]);const y={isActive:g.indexOf("swiper-slide-active")>=0,isVisible:g.indexOf("swiper-slide-visible")>=0,isPrev:g.indexOf("swiper-slide-prev")>=0,isNext:g.indexOf("swiper-slide-next")>=0},w=()=>typeof r=="function"?r(y):r,k=()=>{v(!0)};return e.createElement(t,Af({ref:f,className:Pj(`${g}${a?` ${a}`:""}`),"data-swiper-slide-index":l,onLoad:k},m),s&&e.createElement(lC.Provider,{value:y},e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof s=="number"?s:void 0},w(),o&&!x&&e.createElement("div",{className:"swiper-lazy-preloader"}))),!s&&e.createElement(lC.Provider,{value:y},w(),o&&!x&&e.createElement("div",{className:"swiper-lazy-preloader"})))});jj.displayName="SwiperSlide";function tH(t,r,a,n){return t.params.createElements&&Object.keys(n).forEach(s=>{if(!a[s]&&a.auto===!0){let o=Do(t.el,`.${n[s]}`)[0];o||(o=kf("div",n[s]),o.className=n[s],t.el.append(o)),a[s]=o,r[s]=o}}),a}function Lm(t=""){return`.${t.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function rH({swiper:t,extendParams:r,on:a,emit:n}){const s="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:w=>w,formatFractionTotal:w=>w,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),t.pagination={el:null,bullets:[]};let o,l=0;function c(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function m(w,k){const{bulletActiveClass:C}=t.params.pagination;w&&(w=w[`${k==="prev"?"previous":"next"}ElementSibling`],w&&(w.classList.add(`${C}-${k}`),w=w[`${k==="prev"?"previous":"next"}ElementSibling`],w&&w.classList.add(`${C}-${k}-${k}`)))}function p(w,k,C){if(w=w%C,k=k%C,k===w+1)return"next";if(k===w-1)return"previous"}function f(w){const k=w.target.closest(Lm(t.params.pagination.bulletClass));if(!k)return;w.preventDefault();const C=Sf(k)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===C)return;const A=p(t.realIndex,C,t.slides.length);A==="next"?t.slideNext():A==="previous"?t.slidePrev():t.slideToLoop(C)}else t.slideTo(C)}function g(){const w=t.rtl,k=t.params.pagination;if(c())return;let C=t.pagination.el;C=cl(C);let A,S;const P=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,T=t.params.loop?Math.ceil(P/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(S=t.previousRealIndex||0,A=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(A=t.snapIndex,S=t.previousSnapIndex):(S=t.previousIndex||0,A=t.activeIndex||0),k.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const O=t.pagination.bullets;let R,D,$;if(k.dynamicBullets&&(o=wN(O[0],t.isHorizontal()?"width":"height"),C.forEach(j=>{j.style[t.isHorizontal()?"width":"height"]=`${o*(k.dynamicMainBullets+4)}px`}),k.dynamicMainBullets>1&&S!==void 0&&(l+=A-(S||0),l>k.dynamicMainBullets-1?l=k.dynamicMainBullets-1:l<0&&(l=0)),R=Math.max(A-l,0),D=R+(Math.min(O.length,k.dynamicMainBullets)-1),$=(D+R)/2),O.forEach(j=>{const K=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(H=>`${k.bulletActiveClass}${H}`)].map(H=>typeof H=="string"&&H.includes(" ")?H.split(" "):H).flat();j.classList.remove(...K)}),C.length>1)O.forEach(j=>{const K=Sf(j);K===A?j.classList.add(...k.bulletActiveClass.split(" ")):t.isElement&&j.setAttribute("part","bullet"),k.dynamicBullets&&(K>=R&&K<=D&&j.classList.add(...`${k.bulletActiveClass}-main`.split(" ")),K===R&&m(j,"prev"),K===D&&m(j,"next"))});else{const j=O[A];if(j&&j.classList.add(...k.bulletActiveClass.split(" ")),t.isElement&&O.forEach((K,H)=>{K.setAttribute("part",H===A?"bullet-active":"bullet")}),k.dynamicBullets){const K=O[R],H=O[D];for(let V=R;V<=D;V+=1)O[V]&&O[V].classList.add(...`${k.bulletActiveClass}-main`.split(" "));m(K,"prev"),m(H,"next")}}if(k.dynamicBullets){const j=Math.min(O.length,k.dynamicMainBullets+4),K=(o*j-o)/2-$*o,H=w?"right":"left";O.forEach(V=>{V.style[t.isHorizontal()?H:"top"]=`${K}px`})}}C.forEach((O,R)=>{if(k.type==="fraction"&&(O.querySelectorAll(Lm(k.currentClass)).forEach(D=>{D.textContent=k.formatFractionCurrent(A+1)}),O.querySelectorAll(Lm(k.totalClass)).forEach(D=>{D.textContent=k.formatFractionTotal(T)})),k.type==="progressbar"){let D;k.progressbarOpposite?D=t.isHorizontal()?"vertical":"horizontal":D=t.isHorizontal()?"horizontal":"vertical";const $=(A+1)/T;let j=1,K=1;D==="horizontal"?j=$:K=$,O.querySelectorAll(Lm(k.progressbarFillClass)).forEach(H=>{H.style.transform=`translate3d(0,0,0) scaleX(${j}) scaleY(${K})`,H.style.transitionDuration=`${t.params.speed}ms`})}k.type==="custom"&&k.renderCustom?(Cf(O,k.renderCustom(t,A+1,T)),R===0&&n("paginationRender",O)):(R===0&&n("paginationRender",O),n("paginationUpdate",O)),t.params.watchOverflow&&t.enabled&&O.classList[t.isLocked?"add":"remove"](k.lockClass)})}function b(){const w=t.params.pagination;if(c())return;const k=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let C=t.pagination.el;C=cl(C);let A="";if(w.type==="bullets"){let S=t.params.loop?Math.ceil(k/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&S>k&&(S=k);for(let P=0;P<S;P+=1)w.renderBullet?A+=w.renderBullet.call(t,P,w.bulletClass):A+=`<${w.bulletElement} ${t.isElement?'part="bullet"':""} class="${w.bulletClass}"></${w.bulletElement}>`}w.type==="fraction"&&(w.renderFraction?A=w.renderFraction.call(t,w.currentClass,w.totalClass):A=`<span class="${w.currentClass}"></span> / <span class="${w.totalClass}"></span>`),w.type==="progressbar"&&(w.renderProgressbar?A=w.renderProgressbar.call(t,w.progressbarFillClass):A=`<span class="${w.progressbarFillClass}"></span>`),t.pagination.bullets=[],C.forEach(S=>{w.type!=="custom"&&Cf(S,A||""),w.type==="bullets"&&t.pagination.bullets.push(...S.querySelectorAll(Lm(w.bulletClass)))}),w.type!=="custom"&&n("paginationRender",C[0])}function x(){t.params.pagination=tH(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const w=t.params.pagination;if(!w.el)return;let k;typeof w.el=="string"&&t.isElement&&(k=t.el.querySelector(w.el)),!k&&typeof w.el=="string"&&(k=[...document.querySelectorAll(w.el)]),k||(k=w.el),!(!k||k.length===0)&&(t.params.uniqueNavElements&&typeof w.el=="string"&&Array.isArray(k)&&k.length>1&&(k=[...t.el.querySelectorAll(w.el)],k.length>1&&(k=k.find(C=>yj(C,".swiper")[0]===t.el))),Array.isArray(k)&&k.length===1&&(k=k[0]),Object.assign(t.pagination,{el:k}),k=cl(k),k.forEach(C=>{w.type==="bullets"&&w.clickable&&C.classList.add(...(w.clickableClass||"").split(" ")),C.classList.add(w.modifierClass+w.type),C.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.type==="bullets"&&w.dynamicBullets&&(C.classList.add(`${w.modifierClass}${w.type}-dynamic`),l=0,w.dynamicMainBullets<1&&(w.dynamicMainBullets=1)),w.type==="progressbar"&&w.progressbarOpposite&&C.classList.add(w.progressbarOppositeClass),w.clickable&&C.addEventListener("click",f),t.enabled||C.classList.add(w.lockClass)}))}function v(){const w=t.params.pagination;if(c())return;let k=t.pagination.el;k&&(k=cl(k),k.forEach(C=>{C.classList.remove(w.hiddenClass),C.classList.remove(w.modifierClass+w.type),C.classList.remove(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.clickable&&(C.classList.remove(...(w.clickableClass||"").split(" ")),C.removeEventListener("click",f))})),t.pagination.bullets&&t.pagination.bullets.forEach(C=>C.classList.remove(...w.bulletActiveClass.split(" ")))}a("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const w=t.params.pagination;let{el:k}=t.pagination;k=cl(k),k.forEach(C=>{C.classList.remove(w.horizontalClass,w.verticalClass),C.classList.add(t.isHorizontal()?w.horizontalClass:w.verticalClass)})}),a("init",()=>{t.params.pagination.enabled===!1?y():(x(),b(),g())}),a("activeIndexChange",()=>{typeof t.snapIndex>"u"&&g()}),a("snapIndexChange",()=>{g()}),a("snapGridLengthChange",()=>{b(),g()}),a("destroy",()=>{v()}),a("enable disable",()=>{let{el:w}=t.pagination;w&&(w=cl(w),w.forEach(k=>k.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),a("lock unlock",()=>{g()}),a("click",(w,k)=>{const C=k.target,A=cl(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&A&&A.length>0&&!C.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&C===t.navigation.nextEl||t.navigation.prevEl&&C===t.navigation.prevEl))return;const S=A[0].classList.contains(t.params.pagination.hiddenClass);n(S===!0?"paginationShow":"paginationHide"),A.forEach(P=>P.classList.toggle(t.params.pagination.hiddenClass))}});const E=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=cl(w),w.forEach(k=>k.classList.remove(t.params.pagination.paginationDisabledClass))),x(),b(),g()},y=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:w}=t.pagination;w&&(w=cl(w),w.forEach(k=>k.classList.add(t.params.pagination.paginationDisabledClass))),v()};Object.assign(t.pagination,{enable:E,disable:y,render:b,update:g,init:x,destroy:v})}function aH(){const{user:t}=u.useContext(Sr),[r,a]=u.useState([]),[n,s]=u.useState([]),[o,l]=u.useState(""),[c,m]=u.useState("new"),[p,f]=u.useState(!1),[g,b]=u.useState(!1),[x,v]=u.useState(1),[E,y]=u.useState(!1),[w,k]=u.useState(1),[C,A]=u.useState(!1),[S,P]=bi(),T=Number(S.get("page")),O=u.useRef(Number.isInteger(T)&&T>0?T:1),[R,D]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767),[$,j]=u.useState({favorites:[],topRated:[],topDeals:[],topDiscounts:[],newProducts:[],usedProducts:[],installmentProducts:[],cityHighlights:{}}),[K,H]=u.useState(!1),[V,q]=u.useState([]),[Y,z]=u.useState(!1),[L,Q]=u.useState([]),[B,ae]=u.useState(!1),[te,ge]=u.useState(0),[ue,Ee]=u.useState([]),[fe,re]=u.useState(!1),[U,W]=u.useState([]),[me,ne]=u.useState(!1),[ee,ve]=u.useState([]),[be,J]=u.useState(!1),[Ge,je]=u.useState(()=>Date.now()),[tt,At]=u.useState(""),[He,Tt]=u.useState(""),[Re,et]=u.useState(""),[gt,Ze]=u.useState(""),[xt,Dt]=u.useState(""),[nt,Me]=u.useState(""),[Qe,wt]=u.useState(()=>new Date),[lt,we]=u.useState(""),[vt,pt]=u.useState(!1),[Le,pe]=u.useState("favorites"),[Pe,ft]=u.useState([]),[ht,Lt]=u.useState(!1),[nr,er]=u.useState(!1),Nt=u.useRef(null),sr=["Brazzaville","Pointe-Noire","Ouesso","Oyo"],Rt=cs(),zt=u.useMemo(()=>!!(t?.city&&sr.includes(t.city)),[t?.city]),mr=le=>Number(le||0).toLocaleString("fr-FR"),Mr=(le,_e=Date.now())=>{const Be=new Date(le||"").getTime();if(!Number.isFinite(Be)||Be<=_e)return"Expir";const Te=Math.floor((Be-_e)/1e3),Se=Math.floor(Te/86400),Je=Math.floor(Te%86400/3600),qt=Math.floor(Te%3600/60),lr=Te%60;return Se>0?`${Se}j ${Je.toString().padStart(2,"0")}h`:`${Je.toString().padStart(2,"0")}:${qt.toString().padStart(2,"0")}:${lr.toString().padStart(2,"0")}`},br="/promo-default.svg",or=u.useCallback(le=>le?.slug&&R?`/product-preview/${le.slug}`:Dr(le),[R]),Gt=u.useCallback(le=>{if(!le)return null;const _e=new Date(le);return Number.isNaN(_e.getTime())?null:_e},[]),Zt=u.useMemo(()=>{if(!He)return!1;const le=Gt(xt),_e=Gt(nt);return!(le&&Qe<le||_e&&Qe>_e)},[Gt,He,nt,xt,Qe]),se=R&&!vt&&C&&x===1,dt=u.useCallback(async()=>{A(!0);try{const le={page:x,limit:12,sort:c};o&&(le.category=o),p&&(le.installmentOnly=!0),zt&&(le.userCity=t.city,le.locationPriority=!0),g&&zt&&(le.nearMe=!0);const{data:_e}=await oe.get("/products/public",{params:le}),Be=Array.isArray(_e)?_e:_e.items||[],Te=Array.isArray(_e)?1:_e.pagination?.pages||1,Se=Array.isArray(_e)?Be.length:Number(_e?.pagination?.total)||Be.length;a(Je=>R&&x>1?[...Je,...Be]:Be),k(Te),ge(Se)}catch(le){console.error("Erreur chargement produits:",le)}finally{A(!1)}},[x,c,o,p,zt,g,R,t?.city]),ut=u.useCallback(async()=>{Lt(!0);try{const{data:le}=await oe.get("/products/public/installments",{params:{page:1,limit:8}});ft(Array.isArray(le?.items)?le.items:[])}catch(le){console.error("Erreur chargement produits tranche:",le),ft([])}finally{Lt(!1)}},[]),It=u.useCallback(async()=>{try{const{data:le}=await oe.get("/products/public",{params:{certified:!0,sort:"new",limit:8,page:1}}),_e=Array.isArray(le)?le:le?.items||[];s(_e.filter(Be=>Be?.certified))}catch(le){console.error("Erreur chargement produits certifis:",le?.response?.status,le?.response?.data,le)}},[]);u.useEffect(()=>{let le=!0;return(async()=>{try{const{data:Be}=await oe.get("/settings/hero-banner");if(!le)return;At(Be?.heroBanner||"")}catch{if(!le)return;At("")}})(),()=>{le=!1}},[]),u.useEffect(()=>{let le=!0;return(async()=>{try{const{data:Be}=await oe.get("/settings/app-logo");if(!le)return;we(Be?.appLogoMobile||Be?.appLogoDesktop||"")}catch{if(!le)return;we("")}})(),()=>{le=!1}},[]),u.useEffect(()=>{let le=!0;return(async()=>{try{const{data:Be}=await oe.get("/settings/promo-banner");if(!le)return;Tt(Be?.promoBanner||""),et(Be?.promoBannerMobile||""),Ze(Be?.promoBannerLink||""),Dt(Be?.promoBannerStartAt||""),Me(Be?.promoBannerEndAt||"")}catch{if(!le)return;Tt(""),et(""),Ze(""),Dt(""),Me("")}})(),()=>{le=!1}},[]),u.useEffect(()=>{!C&&x===1&&pt(!0)},[C,x]),u.useEffect(()=>{const le=setInterval(()=>{wt(new Date)},6e4);return()=>clearInterval(le)},[]);const de=async()=>{H(!0);try{const{data:le}=await oe.get("/products/public/highlights");j({favorites:Array.isArray(le?.favorites)?le.favorites:[],topRated:Array.isArray(le?.topRated)?le.topRated:[],topDeals:Array.isArray(le?.topDeals)?le.topDeals:[],topDiscounts:Array.isArray(le?.topDiscounts)?le.topDiscounts:[],newProducts:Array.isArray(le?.newProducts)?le.newProducts:[],usedProducts:Array.isArray(le?.usedProducts)?le.usedProducts:[],installmentProducts:Array.isArray(le?.installmentProducts)?le.installmentProducts:[],cityHighlights:le?.cityHighlights&&typeof le.cityHighlights=="object"?le.cityHighlights:{}})}catch(le){console.error("Erreur chargement highlights:",le)}finally{H(!1)}},De=async()=>{re(!0);try{const{data:le}=await oe.get("/shops"),_e=Array.isArray(le)?le.filter(Be=>Be.shopVerified):[];Ee(_e.slice(0,6))}catch(le){console.error("Erreur chargement boutiques vrifies:",le),Ee([])}finally{re(!1)}},F=async()=>{ne(!0),J(!0);try{const{data:le}=await oe.get("/marketplace-promo-codes/public/home",{params:{shopLimit:8,flashLimit:8}});W(Array.isArray(le?.promoShops)?le.promoShops:[]),ve(Array.isArray(le?.flashDeals)?le.flashDeals:[])}catch(le){console.error("Erreur chargement promos homepage:",le),W([]),ve([])}finally{ne(!1),J(!1)}},ie=async()=>{z(!0);try{const{data:le}=await oe.get("/products/public",{params:{sort:"discount",limit:8,page:1}}),Te=[...(Array.isArray(le)?le:le.items||[]).filter(Se=>Se.discount>0&&Se.priceBeforeDiscount&&Se.price<Se.priceBeforeDiscount)].sort(()=>Math.random()-.5);q(Te.slice(0,4))}catch(le){console.error("Erreur chargement produits en promotion:",le)}finally{z(!1)}};u.useEffect(()=>{O.current=1,v(1)},[c,o,p,g]),u.useEffect(()=>{dt()},[x,c,o,p,R,dt]),u.useEffect(()=>{!zt&&g&&b(!1)},[zt,g]),u.useEffect(()=>{P(le=>{const _e=new URLSearchParams(le),Be=x===1?null:String(x);return le.get("page")===Be?le:(x===1?_e.delete("page"):_e.set("page",String(x)),_e)},{replace:x===O.current})},[x,P]),u.useEffect(()=>{const le=Number.isInteger(T)&&T>0?T:1;O.current=le,v(_e=>_e===le?_e:le)},[T]),u.useEffect(()=>{const le=()=>{typeof window>"u"||D(window.innerWidth<=767)};return le(),window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),u.useEffect(()=>{if(!R||C||x>=w)return;const le=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&v(Be=>Math.min(Be+1,w))};return window.addEventListener("scroll",le,{passive:!0}),()=>window.removeEventListener("scroll",le)},[R,C,x,w]),u.useEffect(()=>{if(!Nt.current||nr)return;const le=new IntersectionObserver(_e=>{const[Be]=_e;Be?.isIntersecting&&(er(!0),le.disconnect())},{rootMargin:"180px"});return le.observe(Nt.current),()=>le.disconnect()},[nr]),u.useEffect(()=>{nr&&ut()},[nr,ut]);const he=async()=>{ae(!0);try{const{data:le}=await oe.get("/products/public/top-sales",{params:{limit:6,page:1}}),_e=Array.isArray(le?.items)?le.items:[];Q(_e)}catch(le){console.error("Erreur chargement produits les plus vendus:",le),Q([])}finally{ae(!1)}};u.useEffect(()=>{de(),ie(),De(),F(),It(),he()},[]),u.useEffect(()=>{if(!ee.length)return;const le=setInterval(()=>{je(Date.now())},1e3);return()=>clearInterval(le)},[ee.length]);const ke=$.cityHighlights||{},mt=()=>R||w<=1?null:e.createElement("div",{className:"flex justify-center items-center space-x-2 mt-8"},e.createElement("button",{onClick:()=>v(le=>Math.max(1,le-1)),disabled:x<=1,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""),Array.from({length:Math.min(5,w)},(le,_e)=>{const Be=_e+1;return e.createElement("button",{key:Be,onClick:()=>v(Be),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${x===Be?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},Be)}),w>5&&e.createElement("span",{className:"px-2 text-gray-500"},"..."),e.createElement("button",{onClick:()=>v(le=>Math.min(w,le+1)),disabled:x>=w,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},"")),G=()=>{const le=[...$.topDeals.slice(0,4),...V.filter(Te=>!$.topDeals.some(Se=>Se._id===Te._id)).slice(0,4)].slice(0,8),_e=(ee.length?ee:le).slice(0,8),Be={WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"};return e.createElement("main",{className:"max-w-7xl mx-auto px-3 pt-2 pb-4 space-y-3"},e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-1 hide-scrollbar",style:Be},e.createElement(ye,{to:"/products",...Rt,className:"flex items-center gap-1.5 px-3.5 py-2 rounded-full bg-[#007AFF] text-white text-xs font-bold whitespace-nowrap shadow-[0_1px_3px_rgba(0,0,0,0.08)] tap-feedback transition-transform"},e.createElement(iu,{className:"w-3.5 h-3.5"}),"Tout"),to.map(Te=>{const Se=Te.icon;return e.createElement(ye,{key:Te.id,to:`/categories/${Te.options?.[0]?.value||""}`,className:"flex items-center gap-1.5 px-3.5 py-2 rounded-full bg-white border border-gray-200 text-xs font-semibold text-gray-700 whitespace-nowrap shadow-sm active:scale-95 transition-transform"},Se&&e.createElement(Se,{className:"w-3.5 h-3.5 text-indigo-500 flex-shrink-0"}),e.createElement("span",null,Te.label.split(" & ")[0]))})),e.createElement("div",{className:"flex items-center justify-center gap-2 py-2.5 px-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100/80"},e.createElement(ws,{className:"w-4 h-4 text-indigo-600 flex-shrink-0"}),e.createElement("span",{className:"text-xs text-gray-700 text-center"},"Achetez ou vendez sur HDMarket  ",e.createElement("span",{className:"font-semibold text-indigo-700"},"vous choisissez"),"."),e.createElement(Wa,{className:"w-4 h-4 text-purple-600 flex-shrink-0"})),He&&(()=>{const Se=Zt?Re||He:br,Je=Zt?gt:"/products",qt=e.createElement("img",{src:Se,alt:"Promo",className:"h-full w-full object-cover",loading:"eager"}),lr="block w-full overflow-hidden rounded-xl shadow-sm aspect-[2/1] h-[331px]";return Je?.startsWith("/")?e.createElement(ye,{to:Je,...Rt,className:lr},qt):Je?e.createElement("a",{href:Je,target:"_blank",rel:"noopener noreferrer",className:lr},qt):e.createElement("div",{className:lr},qt)})(),!(K&&be)&&_e.length>0&&e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-red-500 rounded-lg flex items-center justify-center"},e.createElement(Ln,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-sm font-bold text-gray-900"},"Flash Deals")),e.createElement(ye,{to:"/top-deals",...Rt,className:"text-xs font-semibold text-indigo-600 flex items-center"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),e.createElement("div",{className:"flex gap-2.5 overflow-x-auto pb-2 hide-scrollbar",style:Be},_e.map((Te,Se)=>e.createElement(ye,{key:`flash-${Te._id}-${Se}`,to:or(Te),...Rt,className:"flex-shrink-0 w-[130px] bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden active:scale-[0.97] transition-transform"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Te.images?.[0]||"/api/placeholder/200/200",alt:Te.title,className:"w-full h-full object-cover",loading:"lazy"}),Te.flashPromo?.endDate&&e.createElement("span",{className:"absolute bottom-1.5 left-1.5 bg-black/75 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-md"},Mr(Te.flashPromo.endDate,Ge)),Te.discount>0&&e.createElement("span",{className:"absolute top-1.5 left-1.5 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md shadow"},"-",Te.discount,"%")),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-xs font-bold text-gray-900 truncate"},Number(Te.promoPrice??Te.price??0).toLocaleString()," F"),Te.priceBeforeDiscount>Te.price&&e.createElement("p",{className:"text-[10px] text-gray-400 line-through"},Number(Te.priceBeforeDiscount).toLocaleString()," F"),Number(Te.promoSavedAmount||0)>0&&e.createElement("p",{className:"text-[10px] text-emerald-600 font-semibold"},"co: ",Number(Te.promoSavedAmount).toLocaleString()," F")))))),(!me||U.length>0)&&e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-rose-500 rounded-lg flex items-center justify-center"},e.createElement(vf,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-sm font-bold text-gray-900"},"Boutiques en promo cette semaine"))),U.length>0?e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",style:Be},U.slice(0,8).map(Te=>e.createElement(ye,{key:`promo-shop-mobile-${Te._id}`,to:Da(Te),className:"flex-shrink-0 flex items-center gap-2.5 px-3 py-2.5 bg-white rounded-xl border border-gray-100 shadow-sm min-w-[180px]"},e.createElement("img",{src:Te.shopLogo||"/api/placeholder/40/40",alt:Te.shopName,className:"w-9 h-9 rounded-lg object-cover border border-gray-100"}),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-xs font-semibold text-gray-900 truncate"},Te.shopName),e.createElement("p",{className:"text-[10px] text-rose-600 font-semibold"},Te.activePromoCountNow||Te.promoCountThisWeek," promo(s)"))))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune boutique en promo cette semaine.")),!B&&L.length>0&&e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-orange-500 rounded-lg flex items-center justify-center"},e.createElement(Pr,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-sm font-bold text-gray-900"},"Meilleures ventes")),e.createElement(ye,{to:"/top-sales",...Rt,className:"text-xs font-semibold text-[#007AFF] flex items-center"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),e.createElement("div",{className:"flex gap-2.5 overflow-x-auto pb-2 hide-scrollbar",style:Be},L.slice(0,6).map((Te,Se)=>e.createElement(ye,{key:`bestseller-${Te._id}-${Se}`,to:or(Te),...Rt,className:"flex-shrink-0 w-[130px] bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden active:scale-[0.97] transition-transform"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Te.images?.[0]||"/api/placeholder/200/200",alt:Te.title,className:"w-full h-full object-cover",loading:"lazy"}),Se<3&&e.createElement("span",{className:`absolute top-1.5 left-1.5 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow ${Se===0?"bg-yellow-500":Se===1?"bg-gray-400":"bg-amber-600"}`},Se+1)),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-[11px] text-gray-700 font-medium truncate"},Te.title),e.createElement("p",{className:"text-xs font-bold text-gray-900"},Number(Te.price||0).toLocaleString()," F")))))),!fe&&ue.length>0&&e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-emerald-500 rounded-lg flex items-center justify-center"},e.createElement(pa,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-sm font-bold text-gray-900"},"Boutiques vrifies")),e.createElement(ye,{to:"/shops/verified",...Rt,className:"text-xs font-semibold text-[#007AFF] flex items-center"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2 hide-scrollbar",style:Be},ue.map(Te=>e.createElement(ye,{key:Te._id,to:Da(Te),className:"flex-shrink-0 flex items-center gap-2.5 px-3 py-2.5 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-[0.97] transition-transform"},e.createElement("img",{src:Te.shopLogo||"/api/placeholder/40/40",alt:Te.shopName,className:"w-9 h-9 rounded-lg object-cover border border-gray-100"}),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-xs font-semibold text-gray-900 truncate max-w-[100px]"},Te.shopName),e.createElement("p",{className:"text-[10px] text-emerald-600 font-medium"},Te.productCount||0," annonces")))))),(()=>{const Te=sr.find(Nr=>(ke[Nr]||[]).length>0),Se=t?.city&&sr.includes(t.city)?t.city:Te,Je=Se?(ke[Se]||[]).slice(0,8):[],qt=[],lr=new Set;for(const Nr of Je){const ra=Nr.user,Oe=ra?._id||ra?.id;Oe&&!lr.has(String(Oe))&&ra?.accountType==="shop"&&(lr.add(String(Oe)),qt.push(ra))}return Se?e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center"},e.createElement(Wr,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-sm font-bold text-gray-900"},Se)),e.createElement(ye,{to:`/cities?city=${encodeURIComponent(Se)}`,...Rt,className:"text-xs font-semibold text-[#007AFF] flex items-center"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),Se&&Je.length===0&&qt.length===0&&e.createElement("p",{className:"text-xs text-gray-500 py-2"},"Aucune annonce dans votre ville pour le moment."," ",e.createElement(ye,{to:`/cities?city=${encodeURIComponent(Se)}`,...Rt,className:"text-indigo-600 font-medium"},"Explorer ",Se)),qt.length>0&&e.createElement("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 hide-scrollbar",style:Be},qt.slice(0,12).map(Nr=>{const ra=Nr.shopName||Nr.name||"Vendeur",Oe=Nr.shopLogo||null,gr=Nr.slug?Da(Nr):null,wr=e.createElement("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 border-2 border-gray-200 flex items-center justify-center flex-shrink-0"},Oe?e.createElement("img",{src:Oe,alt:ra,className:"w-full h-full object-cover",loading:"lazy"}):e.createElement(Ia,{className:"w-6 h-6 text-gray-400"}));return gr?e.createElement(ye,{key:Nr._id||Nr.id,to:gr,className:"active:scale-[0.97] transition-transform",title:ra},wr):e.createElement("div",{key:Nr._id||Nr.id,title:ra},wr)})),Je.length>0&&e.createElement("div",{className:"flex gap-2.5 overflow-x-auto pb-2 hide-scrollbar",style:Be},Je.map((Nr,ra)=>e.createElement(ye,{key:`city-m-${Nr._id}-${ra}`,to:or(Nr),...Rt,className:"flex-shrink-0 w-[130px] bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden active:scale-[0.97] transition-transform"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Nr.images?.[0]||"/api/placeholder/200/200",alt:Nr.title,className:"w-full h-full object-cover",loading:"lazy"}),e.createElement("span",{className:"absolute top-1.5 right-1.5 px-1.5 py-0.5 text-[9px] font-semibold rounded-md bg-white/90 text-gray-600"},Nr.condition==="new"?"Neuf":"Occasion")),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-xs font-bold text-gray-900 truncate"},Number(Nr.price||0).toLocaleString()," F"),e.createElement("p",{className:"text-[10px] text-gray-500 truncate"},Nr.title)))))):null})(),e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-1 hide-scrollbar",style:Be},[{value:"new",label:"Nouveauts"},{value:"price_asc",label:"Prix "},{value:"price_desc",label:"Prix "},{value:"discount",label:"Promos"}].map(Te=>e.createElement("button",{key:Te.value,type:"button",onClick:()=>{m(Te.value),v(1)},className:`px-3 py-1.5 rounded-full text-xs font-semibold whitespace-nowrap transition-all active:scale-95 ${c===Te.value?"bg-indigo-600 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`},Te.label))),e.createElement("label",{className:"flex items-center gap-2 rounded-xl border border-indigo-100 bg-indigo-50 px-3 py-2 text-xs font-semibold text-indigo-700"},e.createElement("input",{type:"checkbox",checked:p,onChange:Te=>{f(Te.target.checked),v(1)},className:"h-4 w-4 rounded border-indigo-300 text-indigo-600 focus:ring-indigo-500"}),"Afficher uniquement les produits en tranche"),zt&&e.createElement("label",{className:"flex items-center gap-2 rounded-xl border border-blue-100 bg-blue-50 px-3 py-2 text-xs font-semibold text-blue-700"},e.createElement("input",{type:"checkbox",checked:g,onChange:Te=>{b(Te.target.checked),v(1)},className:"h-4 w-4 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),"Voir uniquement dans ma ville"),e.createElement("section",{ref:Nt},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("h2",{className:"text-sm font-bold text-gray-900"},"Produits disponibles en paiement par tranche"),e.createElement(ye,{to:"/products?installmentOnly=true",className:"text-xs font-semibold text-indigo-600"},"Voir tout")),ht&&!Pe.length?e.createElement("div",{className:"grid grid-cols-2 gap-2"},Array.from({length:4}).map((Te,Se)=>e.createElement("div",{key:`installment-skeleton-${Se}`,className:"h-48 animate-pulse rounded-xl bg-gray-200"}))):(Pe.length||$.installmentProducts?.length)>0?e.createElement("div",{className:"grid grid-cols-2 gap-2"},(Pe.length?Pe:$.installmentProducts).slice(0,4).map(Te=>e.createElement(un,{key:`installment-mobile-${Te._id}`,p:Te,productLink:or(Te)}))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucun produit en tranche disponible actuellement.")),e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"flex items-center gap-2.5"},e.createElement("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-md shadow-indigo-500/25"},e.createElement(ws,{className:"w-4 h-4 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Pour vous"),e.createElement("p",{className:"text-xs text-gray-500 font-medium"},e.createElement("span",{className:"tabular-nums font-semibold text-indigo-600"},mr(te))," annonces"),zt&&e.createElement("p",{className:"mt-0.5 inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-0.5 text-[10px] font-semibold text-blue-700"},e.createElement(Wr,{className:"h-3 w-3"}),"Produits prs de vous"))),e.createElement(ye,{to:"/products",className:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl bg-indigo-50 text-indigo-700 font-semibold text-sm hover:bg-indigo-100 active:scale-[0.98] transition-all"},"Voir tout",e.createElement(Ar,{className:"w-4 h-4 flex-shrink-0"}))),C&&x===1?e.createElement("div",{className:"grid grid-cols-2 gap-2"},Array.from({length:6}).map((Te,Se)=>e.createElement("div",{key:Se,className:"animate-pulse bg-gray-200 rounded-xl h-52"}))):r.length>0?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 gap-2"},r.map((Te,Se)=>e.createElement("div",{key:`product-${Te._id}-${Se}`,className:"w-full h-full"},e.createElement(un,{p:Te,productLink:or(Te)})))),C&&x>1&&e.createElement("div",{className:"flex justify-center py-4"},e.createElement("div",{className:"w-6 h-6 border-2 border-[#007AFF] border-t-transparent rounded-full animate-spin"}))):e.createElement("div",{className:"text-center py-8"},e.createElement(Tr,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.createElement("p",{className:"text-sm text-gray-500 mb-3"},"Aucun produit trouv"),e.createElement("button",{onClick:()=>{l(""),m("new"),v(1)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-semibold rounded-full active:scale-95"},"Rinitialiser"))),e.createElement("section",{className:"pb-2"},e.createElement("h3",{className:"text-sm font-bold text-gray-900 mb-2.5"},"Dcouvrir plus"),e.createElement("div",{className:"grid grid-cols-3 gap-2"},e.createElement(ye,{to:"/top-favorites",className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center"},e.createElement(Yr,{className:"w-4 h-4 text-pink-600"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Top Favoris")),e.createElement(ye,{to:"/top-ranking",className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center"},e.createElement(zr,{className:"w-4 h-4 text-amber-600",fill:"currentColor"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Top Nots")),e.createElement(ye,{to:"/top-new",className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center"},e.createElement(ba,{className:"w-4 h-4 text-sky-600"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Neufs")),e.createElement(ye,{to:"/top-used",className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center"},e.createElement(Cd,{className:"w-4 h-4 text-slate-600"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Occasion")),e.createElement(ye,{to:"/certified-products",className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center"},e.createElement(pa,{className:"w-4 h-4 text-emerald-600"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Certifis")),e.createElement(ye,{to:"/cities",...Rt,className:"flex flex-col items-center gap-1.5 p-3 bg-white rounded-xl border border-gray-100 shadow-sm active:scale-95 transition-transform"},e.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"},e.createElement(Wr,{className:"w-4 h-4 text-blue-600"})),e.createElement("span",{className:"text-[11px] font-semibold text-gray-700 text-center"},"Villes")))))},Z=()=>{const le=[...$.topDeals.slice(0,4),...V.filter(Se=>!$.topDeals.some(Je=>Je._id===Se._id)).slice(0,4)].slice(0,4),_e=(ee.length?ee:le).slice(0,4),Be={favorites:{items:$.favorites,icon:Yr,label:"Top Favoris",link:"/top-favorites",iconColor:"text-pink-600",bgColor:"bg-pink-600"},topRated:{items:$.topRated,icon:zr,label:"Top Nots",link:"/top-ranking",iconColor:"text-amber-600",bgColor:"bg-amber-600"},newProducts:{items:$.newProducts,icon:ba,label:"Neufs",link:"/top-new",iconColor:"text-sky-600",bgColor:"bg-sky-600"},usedProducts:{items:$.usedProducts,icon:Cd,label:"Occasion",link:"/top-used",iconColor:"text-slate-600",bgColor:"bg-slate-600"}},Te=Be[Le]||Be.favorites;return e.createElement("main",{className:"max-w-[1400px] 2xl:max-w-[1600px] mx-auto px-6 lg:px-8 py-5 space-y-5"},e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-1 hide-scrollbar items-center"},e.createElement(ye,{to:"/products",...Rt,className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-[#007AFF] text-white text-sm font-bold whitespace-nowrap shadow-[0_1px_3px_rgba(0,0,0,0.08)] hover:bg-[#0051D5] transition-colors"},e.createElement(iu,{className:"w-4 h-4"}),"Tout"),to.map(Se=>{const Je=Se.icon;return e.createElement(ye,{key:Se.id,to:`/categories/${Se.options?.[0]?.value||""}`,className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-white border border-gray-200 text-sm font-semibold text-gray-700 whitespace-nowrap shadow-sm hover:border-indigo-300 hover:text-indigo-600 transition-colors"},Je&&e.createElement(Je,{className:"w-4 h-4 text-indigo-500 flex-shrink-0"}),e.createElement("span",null,Se.label.split(" & ")[0]))}),e.createElement("button",{type:"button",onClick:()=>y(!0),className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-gray-100 text-sm font-semibold text-gray-600 whitespace-nowrap hover:bg-gray-200 transition-colors"},"Tout voir ",e.createElement(Ar,{className:"w-3.5 h-3.5"}))),e.createElement("div",{className:"flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100/80"},e.createElement(ws,{className:"w-5 h-5 text-indigo-600 flex-shrink-0"}),e.createElement("span",{className:"text-sm text-gray-700 text-center"},"Achetez ou vendez sur HDMarket  ",e.createElement("span",{className:"font-semibold text-indigo-700"},"vous choisissez"),"."),e.createElement(Wa,{className:"w-5 h-5 text-purple-600 flex-shrink-0"})),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_380px] gap-5"},e.createElement("div",{className:"flex flex-col gap-4"},e.createElement("section",{className:"relative bg-gradient-to-br from-indigo-900 via-indigo-800 to-purple-900 rounded-2xl overflow-hidden shadow-lg",style:{minHeight:"300px"}},tt&&e.createElement("div",{className:"absolute inset-0"},e.createElement("img",{src:tt,alt:"Bannire HDMarket",className:"h-full w-full object-cover",loading:"lazy"}),e.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950/70 via-indigo-950/70 to-purple-950/70"})),e.createElement("div",{className:"relative z-10 px-6 py-8 lg:py-10 text-left"},e.createElement("div",{className:"inline-flex items-center px-3 py-1.5 bg-white/15 backdrop-blur-md rounded-full border border-white/30 mb-4 shadow-lg"},e.createElement(zr,{className:"w-3.5 h-3.5 text-yellow-300 mr-1.5",fill:"currentColor"}),e.createElement("span",{className:"text-xs text-white font-semibold"},"Marketplace Premium")),e.createElement("h1",{className:"text-3xl lg:text-4xl font-black text-white mb-3 leading-tight"},"Votre March",e.createElement("span",{className:"block bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-300 bg-clip-text text-transparent"},"Digital")),e.createElement("p",{className:"text-sm text-indigo-100 mb-5 max-w-md leading-relaxed"},"Dcouvrez ",e.createElement("span",{className:"font-bold text-yellow-300"},mr(te))," produits vrifis. Vendez et achetez en toute confiance."),e.createElement("div",{className:"flex gap-3"},e.createElement(ye,{to:"/my",className:"inline-flex items-center px-5 py-2.5 bg-white text-gray-900 font-semibold rounded-xl hover:bg-gray-50 transition-all text-sm shadow-sm"},e.createElement(Ln,{className:"w-4 h-4 mr-1.5"})," Publier"),e.createElement(ye,{to:"/products",...Rt,className:"inline-flex items-center px-5 py-2.5 bg-white/15 backdrop-blur-md text-white font-semibold rounded-xl border border-white/30 hover:bg-white/25 transition-all text-sm"},"Explorer ",e.createElement(Ar,{className:"w-4 h-4 ml-1"}))))),He&&(()=>{const Se=Zt?He:br,Je=Zt?gt:"/products",qt=e.createElement("img",{src:Se,alt:"Promo",className:"h-full w-full object-cover",loading:"lazy"}),lr="block w-full overflow-hidden rounded-xl shadow-sm aspect-[21/7]";return Je?.startsWith("/")?e.createElement(ye,{to:Je,...Rt,className:lr},qt):Je?e.createElement("a",{href:Je,target:"_blank",rel:"noopener noreferrer",className:lr},qt):e.createElement("div",{className:lr},qt)})()),e.createElement("section",{className:"apple-card p-4 flex flex-col"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center"},e.createElement(Ln,{className:"w-4 h-4 text-white"})),e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Flash Deals")),e.createElement(ye,{to:"/top-deals",...Rt,className:"text-xs font-semibold text-indigo-600 flex items-center hover:text-indigo-500"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),K&&be?e.createElement("div",{className:"grid grid-cols-2 gap-3 flex-1"},Array.from({length:4}).map((Se,Je)=>e.createElement("div",{key:Je,className:"animate-pulse bg-gray-100 rounded-xl aspect-square"}))):_e.length>0?e.createElement("div",{className:"grid grid-cols-2 gap-3 flex-1"},_e.map((Se,Je)=>e.createElement(ye,{key:`deal-panel-${Se._id}-${Je}`,to:or(Se),...Rt,className:"group bg-gray-50 rounded-xl border border-gray-100 overflow-hidden hover:shadow-md hover:border-indigo-200 transition-all"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Se.images?.[0]||"/api/placeholder/200/200",alt:Se.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",loading:"lazy"}),Se.flashPromo?.endDate&&e.createElement("span",{className:"absolute bottom-1.5 left-1.5 bg-black/75 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md"},Mr(Se.flashPromo.endDate,Ge)),Se.discount>0&&e.createElement("span",{className:"absolute top-1.5 left-1.5 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md shadow"},"-",Se.discount,"%")),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-sm font-bold text-gray-900"},Number(Se.promoPrice??Se.price??0).toLocaleString()," F"),Se.priceBeforeDiscount>Se.price&&e.createElement("p",{className:"text-[10px] text-gray-400 line-through"},Number(Se.priceBeforeDiscount).toLocaleString()," F"),Number(Se.promoSavedAmount||0)>0&&e.createElement("p",{className:"text-[10px] text-emerald-600 font-semibold"},"co: ",Number(Se.promoSavedAmount).toLocaleString()," F"))))):e.createElement("div",{className:"flex-1 flex items-center justify-center text-gray-400 text-sm"},e.createElement(Ln,{className:"w-6 h-6 mr-2 text-gray-300"})," Aucun deal en cours"))),!B&&L.length>0&&e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"flex items-center gap-2.5"},e.createElement("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center"},e.createElement(Pr,{className:"w-4 h-4 text-white"})),e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Meilleures ventes")),e.createElement(ye,{to:"/top-sales",...Rt,className:"text-sm font-semibold text-[#007AFF] flex items-center hover:text-[#0051D5]"},"Voir tout ",e.createElement(Ar,{className:"w-4 h-4 ml-0.5"}))),e.createElement("div",{className:"grid grid-cols-3 lg:grid-cols-5 gap-4"},L.slice(0,5).map((Se,Je)=>e.createElement(ye,{key:`bestseller-d-${Se._id}-${Je}`,to:or(Se),...Rt,className:"group bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden hover:shadow-md hover:border-indigo-200 transition-all"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Se.images?.[0]||"/api/placeholder/200/200",alt:Se.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",loading:"lazy"}),Je<3&&e.createElement("span",{className:`absolute top-2 left-2 w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg ${Je===0?"bg-yellow-500":Je===1?"bg-gray-400":"bg-amber-600"}`},Je+1)),e.createElement("div",{className:"p-3"},e.createElement("p",{className:"text-sm font-medium text-gray-700 truncate"},Se.title),e.createElement("p",{className:"text-sm font-bold text-gray-900 mt-0.5"},Number(Se.price||0).toLocaleString()," FCFA")))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-5"},e.createElement("section",{className:"bg-indigo-50/60 rounded-2xl border border-indigo-100 p-5"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-7 h-7 bg-emerald-500 rounded-lg flex items-center justify-center"},e.createElement(pa,{className:"w-3.5 h-3.5 text-white"})),e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Boutiques vrifies")),e.createElement(ye,{to:"/shops/verified",...Rt,className:"text-xs font-semibold text-[#007AFF] hover:text-[#0051D5]"},"Voir tout")),fe?e.createElement("div",{className:"space-y-3"},Array.from({length:4}).map((Se,Je)=>e.createElement("div",{key:Je,className:"flex items-center gap-3 animate-pulse"},e.createElement("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),e.createElement("div",{className:"flex-1 space-y-1.5"},e.createElement("div",{className:"h-3 bg-gray-200 rounded w-3/4"}),e.createElement("div",{className:"h-2.5 bg-gray-200 rounded w-1/2"}))))):ue.length>0?e.createElement("div",{className:"space-y-2"},ue.map(Se=>e.createElement(ye,{key:Se._id,to:Da(Se),className:"flex items-center gap-3 rounded-xl bg-white border border-gray-100 hover:border-indigo-200 hover:shadow-sm transition-all p-3"},e.createElement("img",{src:Se.shopLogo||"/api/placeholder/40/40",alt:Se.shopName,className:"w-10 h-10 rounded-lg object-cover border border-gray-100"}),e.createElement("div",{className:"min-w-0 flex-1"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},Se.shopName),e.createElement("p",{className:"text-xs text-gray-500 truncate"},Se.shopAddress||"Adresse non renseigne")),e.createElement("span",{className:"text-xs text-emerald-600 font-semibold whitespace-nowrap"},Se.productCount||0," annonces")))):e.createElement("div",{className:"text-center py-6 text-gray-400 text-sm"},"Aucune boutique vrifie")),e.createElement("section",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-5"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Tendances"),e.createElement(ye,{to:Te.link,...Rt,className:"text-xs font-semibold text-[#007AFF] hover:text-[#0051D5] flex items-center"},"Voir tout ",e.createElement(Ar,{className:"w-3 h-3 ml-0.5"}))),e.createElement("div",{className:"flex gap-1 mb-4 bg-gray-100 rounded-xl p-1"},Object.entries(Be).map(([Se,Je])=>{const qt=Je.icon;return e.createElement("button",{key:Se,type:"button",onClick:()=>pe(Se),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-semibold transition-all flex-1 justify-center ${Le===Se?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`},e.createElement(qt,{className:"w-3.5 h-3.5"}),Je.label)})),K?e.createElement("div",{className:"grid grid-cols-3 gap-4"},Array.from({length:3}).map((Se,Je)=>e.createElement("div",{key:Je,className:"animate-pulse bg-gray-100 rounded-xl aspect-square"}))):Te.items.length>0?e.createElement("div",{className:"grid grid-cols-3 gap-4"},Te.items.slice(0,3).map((Se,Je)=>e.createElement(ye,{key:`trend-${Le}-${Se._id}-${Je}`,to:or(Se),...Rt,className:"group bg-gray-50 rounded-xl border border-gray-100 overflow-hidden hover:shadow-md hover:border-indigo-200 transition-all"},e.createElement("div",{className:"relative aspect-square bg-gray-100"},e.createElement("img",{src:Se.images?.[0]||"/api/placeholder/200/200",alt:Se.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",loading:"lazy"}),e.createElement("span",{className:`absolute top-2 left-2 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow ${Je===0?"bg-yellow-500":Je===1?"bg-gray-400":"bg-amber-600"}`},Je+1)),e.createElement("div",{className:"p-3"},e.createElement("p",{className:"text-sm font-medium text-gray-700 truncate group-hover:text-[#007AFF] transition-colors"},Se.title),e.createElement("p",{className:"text-sm font-bold text-gray-900 mt-0.5"},Number(Se.price||0).toLocaleString()," FCFA"),Le==="favorites"&&e.createElement("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-500"},e.createElement(Yr,{className:"w-3 h-3 text-rose-500",fill:"currentColor"}),e.createElement("span",null,Se.favoritesCount||0)),Le==="topRated"&&e.createElement("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-500"},e.createElement(zr,{className:"w-3 h-3 text-yellow-400",fill:"currentColor"}),e.createElement("span",{className:"font-semibold text-gray-700"},Number(Se.ratingAverage||0).toFixed(1)),e.createElement("span",null,"(",Se.ratingCount||0,")")))))):e.createElement("div",{className:"text-center py-8 text-gray-400 text-sm"},"Aucun produit dans cette catgorie"))),e.createElement("section",{className:"bg-white rounded-2xl border border-rose-100 shadow-sm p-5"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center"},e.createElement(vf,{className:"w-4 h-4 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Boutiques en promo cette semaine"),e.createElement("p",{className:"text-xs text-gray-500"},"Offres actives et remises en cours")))),me?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},Array.from({length:4}).map((Se,Je)=>e.createElement("div",{key:`promo-shop-skeleton-${Je}`,className:"h-24 animate-pulse rounded-xl bg-gray-100"}))):U.length>0?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},U.slice(0,8).map(Se=>e.createElement(ye,{key:`promo-shop-desktop-${Se._id}`,to:Da(Se),className:"rounded-xl border border-rose-100 bg-rose-50/50 px-3 py-3 hover:bg-rose-50 transition-colors"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("img",{src:Se.shopLogo||"/api/placeholder/48/48",alt:Se.shopName,className:"w-11 h-11 rounded-lg object-cover border border-rose-100"}),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},Se.shopName),e.createElement("p",{className:"text-xs text-rose-700 font-semibold"},Se.activePromoCountNow||Se.promoCountThisWeek," promo(s) actives")))))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune boutique en promo cette semaine.")),e.createElement("section",{ref:Nt,className:"bg-white rounded-2xl border border-indigo-100 shadow-sm p-5"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:"text-base font-bold text-gray-900"},"Produits disponibles en paiement par tranche"),e.createElement(ye,{to:"/products?installmentOnly=true",className:"text-xs font-semibold text-indigo-600"},"Voir tout")),ht&&!Pe.length?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},Array.from({length:4}).map((Se,Je)=>e.createElement("div",{key:`installment-desktop-skeleton-${Je}`,className:"h-56 animate-pulse rounded-xl bg-gray-200"}))):(Pe.length||$.installmentProducts?.length)>0?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3"},(Pe.length?Pe:$.installmentProducts).slice(0,4).map(Se=>e.createElement(un,{key:`installment-desktop-${Se._id}`,p:Se,productLink:or(Se)}))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun produit en tranche disponible actuellement.")),e.createElement("section",{className:"hidden lg:block"},e.createElement("div",{className:"flex items-center gap-2 mb-3"},e.createElement("span",{className:"text-sm font-semibold text-gray-600"},"Dcouvrir plus")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement(ye,{to:"/cities",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(Wr,{className:"w-4 h-4"}),"Par ville"),e.createElement(ye,{to:"/top-favorites",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(Yr,{className:"w-4 h-4"}),"Favoris"),e.createElement(ye,{to:"/top-ranking",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(zr,{className:"w-4 h-4"}),"Mieux nots"),e.createElement(ye,{to:"/top-new",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(ba,{className:"w-4 h-4"}),"Nouveauts"),e.createElement(ye,{to:"/top-used",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(Xt,{className:"w-4 h-4"}),"Occasions"),e.createElement(ye,{to:"/certified-products",...Rt,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-50 hover:bg-indigo-50 border border-gray-100 hover:border-indigo-200 text-gray-700 hover:text-indigo-700 font-medium text-sm transition-all"},e.createElement(pa,{className:"w-4 h-4"}),"Produits certifis"))),e.createElement("section",null,e.createElement("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3"},e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Tous les produits",e.createElement("span",{className:"text-sm font-normal text-gray-500 ml-2"},"(",mr(te),")")),zt&&e.createElement("p",{className:"mt-1 inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-0.5 text-[11px] font-semibold text-blue-700"},e.createElement(Wr,{className:"h-3.5 w-3.5"}),"Produits prs de vous")),e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("label",{className:"inline-flex items-center gap-2 rounded-xl border border-indigo-100 bg-indigo-50 px-3 py-2 text-sm font-medium text-indigo-700"},e.createElement("input",{type:"checkbox",checked:p,onChange:Se=>{f(Se.target.checked),v(1)},className:"h-4 w-4 rounded border-indigo-300 text-indigo-600 focus:ring-indigo-500"}),"Afficher uniquement les produits en tranche"),zt&&e.createElement("label",{className:"inline-flex items-center gap-2 rounded-xl border border-blue-100 bg-blue-50 px-3 py-2 text-sm font-medium text-blue-700"},e.createElement("input",{type:"checkbox",checked:g,onChange:Se=>{b(Se.target.checked),v(1)},className:"h-4 w-4 rounded border-blue-300 text-blue-600 focus:ring-blue-500"}),"Voir uniquement dans ma ville"),e.createElement("select",{value:c,onChange:Se=>{m(Se.target.value),v(1)},className:"px-3 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 cursor-pointer"},e.createElement("option",{value:"new"},"Nouveauts"),e.createElement("option",{value:"price_asc"},"Prix croissant"),e.createElement("option",{value:"price_desc"},"Prix dcroissant"),e.createElement("option",{value:"discount"},"Remises")),e.createElement("select",{value:o,onChange:Se=>{l(Se.target.value),v(1)},className:"px-3 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 cursor-pointer"},e.createElement("option",{value:""},"Toutes catgories"),e.createElement("option",{value:"electronics"},"lectronique"),e.createElement("option",{value:"fashion"},"Mode"),e.createElement("option",{value:"home"},"Maison"),e.createElement("option",{value:"sports"},"Sports")))),C?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Array.from({length:10}).map((Se,Je)=>e.createElement("div",{key:Je,className:"animate-pulse bg-gray-200 rounded-xl h-64"}))):r.length>0?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},r.map((Se,Je)=>e.createElement("div",{key:`product-d-${Se._id}-${Je}`,className:"hover:shadow-md transition-shadow rounded-xl overflow-hidden"},e.createElement(un,{p:Se,productLink:or(Se)})))),mt()):e.createElement("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border border-gray-200"},e.createElement(Tr,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucun produit trouv"),e.createElement("p",{className:"text-gray-500 text-sm mb-4"},"Modifiez vos critres de filtrage"),e.createElement("button",{onClick:()=>{l(""),m("new"),v(1)},className:"apple-btn-primary px-5 py-2.5 text-sm"},"Rinitialiser les filtres"))))};return e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50"},e.createElement(CU,{visible:se,logoSrc:lt,label:"HDMarket"}),R?G():Z(),E&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 sm:p-6",onClick:()=>y(!1)},e.createElement("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-3xl bg-white dark:bg-gray-800 border border-gray-200/60 dark:border-gray-700/50 shadow-2xl",onClick:le=>le.stopPropagation()},e.createElement("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-gray-200/60 dark:border-gray-700/50 px-6 py-5"},e.createElement("div",{className:"flex items-start justify-between gap-4"},e.createElement("div",{className:"space-y-1"},e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-indigo-100/80 dark:bg-indigo-900/30 border border-indigo-200/50 dark:border-indigo-800/50 w-fit mb-2"},e.createElement(iu,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),e.createElement("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300 uppercase tracking-wider"},"Toutes les catgories")),e.createElement("h3",{className:"text-xl font-black text-gray-900 dark:text-white"},"Explorer nos univers"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"Slectionnez une catgorie pour dcouvrir nos produits")),e.createElement("button",{type:"button",onClick:()=>y(!1),className:"flex-shrink-0 w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-colors text-gray-600 dark:text-gray-400","aria-label":"Fermer"},e.createElement(jt,{className:"w-5 h-5"})))),e.createElement("div",{className:"max-h-[calc(90vh-120px)] overflow-y-auto px-6 py-6"},e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4"},to.map((le,_e)=>{const Be=le.icon,Te=[{bg:"from-[#007AFF]/10 to-[#34C7FE]/10",icon:"text-[#007AFF]",border:"border-[#007AFF]/20",hover:"hover:from-[#007AFF]/20 hover:to-[#34C7FE]/20"},{bg:"from-pink-500/10 to-rose-500/10",icon:"text-pink-600 dark:text-pink-400",border:"border-pink-200/50 dark:border-pink-800/50",hover:"hover:from-pink-500/20 hover:to-rose-500/20"},{bg:"from-emerald-500/10 to-teal-500/10",icon:"text-emerald-600 dark:text-emerald-400",border:"border-emerald-200/50 dark:border-emerald-800/50",hover:"hover:from-emerald-500/20 hover:to-teal-500/20"},{bg:"from-amber-500/10 to-orange-500/10",icon:"text-amber-600 dark:text-amber-400",border:"border-amber-200/50 dark:border-amber-800/50",hover:"hover:from-amber-500/20 hover:to-orange-500/20"},{bg:"from-purple-500/10 to-indigo-500/10",icon:"text-purple-600 dark:text-purple-400",border:"border-purple-200/50 dark:border-purple-800/50",hover:"hover:from-purple-500/20 hover:to-indigo-500/20"},{bg:"from-red-500/10 to-rose-500/10",icon:"text-red-600 dark:text-red-400",border:"border-red-200/50 dark:border-red-800/50",hover:"hover:from-red-500/20 hover:to-rose-500/20"},{bg:"from-violet-500/10 to-purple-500/10",icon:"text-violet-600 dark:text-violet-400",border:"border-violet-200/50 dark:border-violet-800/50",hover:"hover:from-violet-500/20 hover:to-purple-500/20"},{bg:"from-slate-500/10 to-gray-500/10",icon:"text-slate-600 dark:text-slate-400",border:"border-slate-200/50 dark:border-slate-800/50",hover:"hover:from-slate-500/20 hover:to-gray-500/20"}],Se=Te[_e%Te.length];return e.createElement(ye,{key:le.id,to:`/categories/${le.options?.[0]?.value||""}`,onClick:()=>y(!1),className:`group relative overflow-hidden rounded-2xl bg-gradient-to-br ${Se.bg} border ${Se.border} backdrop-blur-sm transition-all duration-300 hover:scale-[1.03] hover:shadow-lg active:scale-[0.98] ${Se.hover}`},e.createElement("div",{className:"p-5 flex flex-col items-center gap-3 text-center"},e.createElement("div",{className:`relative w-16 h-16 rounded-2xl bg-white/80 dark:bg-gray-800/80 border-2 ${Se.border} flex items-center justify-center shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:rotate-3 group-hover:scale-110`},Be?e.createElement(Be,{className:`relative w-8 h-8 ${Se.icon}`}):null),e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-sm font-bold text-gray-900 dark:text-white leading-tight"},le.label),e.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed"},le.description))))}))))))}function nH(){const{user:t,login:r}=u.useContext(Sr),a=wa(),s=ts().state?.from||"/",[o,l]=u.useState({phone:"",password:""}),[c,m]=u.useState(!1),[p,f]=u.useState(!1),[g,b]=u.useState(""),x=async v=>{v.preventDefault(),b(""),f(!0);try{const{data:E}=await oe.post("/auth/login",o);r(E),a(s,{replace:!0})}catch(E){const y=E.response?.data?.message||E.message;b(y||"Numro de tlphone ou mot de passe incorrect.")}finally{f(!1)}};return t?e.createElement(lu,{to:s,replace:!0}):e.createElement("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 safe-area-bottom bg-[#F2F2F7] dark:bg-black"},e.createElement("div",{className:"w-full max-w-[400px]"},e.createElement("div",{className:"text-center mb-10"},e.createElement("h1",{className:"text-[28px] font-semibold tracking-tight text-black dark:text-white mb-2"},"HDMarket"),e.createElement("p",{className:"text-[15px] text-[#8E8E93] dark:text-[#8E8E93]"},"Connectez-vous  votre compte")),e.createElement("div",{className:"apple-card p-6"},e.createElement("form",{onSubmit:x,className:"space-y-4"},g&&e.createElement("div",{className:"rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert"},g),e.createElement("div",null,e.createElement("input",{type:"tel",inputMode:"tel",autoComplete:"tel",className:"apple-input w-full",placeholder:"Numro de tlphone",value:o.phone,onChange:v=>{l({...o,phone:v.target.value}),b("")},required:!0})),e.createElement("div",{className:"relative"},e.createElement("input",{type:c?"text":"password",className:"apple-input w-full pr-12",placeholder:"Mot de passe",value:o.password,onChange:v=>{l({...o,password:v.target.value}),b("")},required:!0}),e.createElement("button",{type:"button",onClick:()=>m(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 -m-2 min-w-[44px] min-h-[44px] flex items-center justify-center text-[#8E8E93] hover:text-black rounded-full tap-feedback"},c?e.createElement(dc,{className:"w-4 h-4"}):e.createElement(Jn,{className:"w-4 h-4"}))),e.createElement("div",{className:"flex items-center justify-between text-[13px]"},e.createElement("label",{className:"flex items-center text-[#8E8E93] cursor-pointer"},e.createElement("input",{type:"checkbox",className:"mr-2 rounded"}),e.createElement("span",null,"Se souvenir de moi")),e.createElement(ye,{to:"/forgot-password",className:"text-[#007AFF] hover:underline"},"Mot de passe oubli ?")),e.createElement("button",{type:"submit",disabled:p||!o.phone||!o.password,className:"apple-btn-primary w-full disabled:opacity-60 disabled:cursor-not-allowed disabled:!bg-[#C7C7CC]"},p?"Connexion...":"Se connecter")),e.createElement("div",{className:"mt-4 pt-4 border-t border-[rgba(60,60,67,0.12)]"},e.createElement(ye,{to:"/register",className:"block w-full py-3 min-h-[48px] flex items-center justify-center rounded-full font-semibold text-[17px] text-[#007AFF] border border-[#C7C7CC] dark:border-[#38383A] bg-white dark:bg-[#1C1C1E] hover:bg-[#F2F2F7] dark:hover:bg-[#2C2C2E] tap-feedback transition-all"},"Crer un compte"))),e.createElement("div",{className:"mt-6 text-center"},e.createElement("p",{className:"text-[13px] text-[#8E8E93]"},"En vous connectant, vous acceptez nos"," ",e.createElement(ye,{to:"/help",className:"text-[#007AFF] hover:underline"},"conditions d'utilisation")," ","et notre"," ",e.createElement(ye,{to:"/privacy",className:"text-[#007AFF] hover:underline"},"politique de confidentialit")))))}function sH(){const{user:t,login:r}=u.useContext(Sr),a=wa(),s=ts().state?.from||"/",[o,l]=u.useState({name:"",email:"",password:"",phone:"",accountType:"person",address:"",country:"Rpublique du Congo",city:"",gender:""}),[c,m]=u.useState(!1),[p,f]=u.useState(!1),[g,b]=u.useState(""),[x,v]=u.useState(!1),[E,y]=u.useState(!1),[w,k]=u.useState(""),[C,A]=u.useState(""),[S,P]=u.useState(""),T=["Brazzaville","Pointe-Noire","Ouesso","Oyo"],O=[{value:"homme",label:"Homme"},{value:"femme",label:"Femme"}],R=async()=>{if(!o.email.trim()){A("Veuillez renseigner votre adresse email.");return}y(!0),A(""),k(""),P("");try{await oe.post("/auth/register/send-code",{email:o.email}),v(!0),k("Code envoy par email. Vrifiez votre bote de rception.")}catch($){A($.response?.data?.message||$.message)}finally{y(!1)}},D=async $=>{if($.preventDefault(),P(""),!o.city||!o.gender){P("Veuillez slectionner votre ville et votre genre.");return}if(!o.address.trim()){P("Veuillez renseigner votre adresse complte.");return}f(!0);try{const j=new FormData;j.append("name",o.name),j.append("email",o.email),j.append("password",o.password),j.append("phone",o.phone),j.append("accountType","person"),j.append("country","Rpublique du Congo"),j.append("city",o.city),j.append("gender",o.gender),j.append("address",o.address.trim()),j.append("verificationCode",g&&g.trim()||"");const{data:K}=await oe.post("/auth/register",j,{headers:{"Content-Type":"multipart/form-data"}});r(K),a(s,{replace:!0})}catch(j){P(j.response?.data?.message||j.message||"Une erreur est survenue lors de la cration du compte.")}finally{f(!1)}};return t?e.createElement(lu,{to:s,replace:!0}):e.createElement("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 bg-[#F2F2F7] dark:bg-black"},e.createElement("div",{className:"w-full max-w-[500px]"},e.createElement("div",{className:"text-center mb-10"},e.createElement("h1",{className:"text-[28px] font-semibold tracking-tight text-black dark:text-white mb-2"},"HDMarket"),e.createElement("p",{className:"text-[15px] text-[#8E8E93]"},"Crez votre compte")),e.createElement("div",{className:"apple-card p-6"},e.createElement("form",{onSubmit:D,className:"space-y-4"},e.createElement("div",null,e.createElement("input",{type:"text",className:"apple-input w-full",placeholder:"Nom complet *",value:o.name,onChange:$=>l({...o,name:$.target.value}),required:!0})),e.createElement("div",null,e.createElement("input",{type:"tel",inputMode:"tel",autoComplete:"tel",className:"apple-input w-full",placeholder:"060000000",value:o.phone,onChange:$=>{l({...o,phone:$.target.value}),A("")},required:!0})),e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex gap-2"},e.createElement("input",{type:"text",className:"apple-input flex-1",placeholder:"Code de vrification email (optionnel)",value:g,onChange:$=>{b($.target.value),P("")}}),e.createElement("button",{type:"button",onClick:R,disabled:E||!o.email.trim(),className:"px-4 py-2.5 rounded-full font-medium text-[15px] border border-[#C7C7CC] text-[#007AFF] hover:bg-[rgba(0,122,255,0.08)] tap-feedback whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed"},E?"Envoi...":x?"Renvoyer":"Envoyer")),C&&e.createElement("p",{className:"text-xs text-red-600"},C),w&&e.createElement("p",{className:"text-xs text-green-600"},w)),e.createElement("div",null,e.createElement("textarea",{className:"w-full px-3 py-2.5 border border-gray-300 focus:outline-none focus:border-indigo-600 text-sm resize-none",rows:2,placeholder:"Adresse complte *",value:o.address,onChange:$=>{l({...o,address:$.target.value}),P("")},required:!0})),e.createElement("div",null,e.createElement("input",{type:"email",className:"apple-input w-full",placeholder:"Adresse email *",value:o.email,onChange:$=>l({...o,email:$.target.value}),required:!0})),e.createElement("div",{className:"relative"},e.createElement("input",{type:c?"text":"password",className:"apple-input w-full pr-12",placeholder:"Mot de passe *",value:o.password,onChange:$=>l({...o,password:$.target.value}),required:!0}),e.createElement("button",{type:"button",onClick:()=>m(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"},c?e.createElement(dc,{className:"w-4 h-4"}):e.createElement(Jn,{className:"w-4 h-4"}))),e.createElement("div",{className:"grid grid-cols-2 gap-3"},e.createElement("div",null,e.createElement("input",{className:"apple-input w-full bg-[rgba(120,120,128,0.08)] text-[#8E8E93] cursor-not-allowed",value:"Rpublique du Congo",readOnly:!0,disabled:!0})),e.createElement("div",null,e.createElement("select",{className:"apple-input w-full bg-white dark:bg-[#1C1C1E]",value:o.city,onChange:$=>{l({...o,city:$.target.value}),P("")},required:!0},e.createElement("option",{value:""},"Ville *"),T.map($=>e.createElement("option",{key:$,value:$},$))))),e.createElement("div",null,e.createElement("div",{className:"grid grid-cols-2 gap-3"},O.map($=>e.createElement("label",{key:$.value,className:`flex items-center justify-center px-3 py-2.5 border text-sm cursor-pointer ${o.gender===$.value?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`},e.createElement("input",{type:"radio",name:"gender",value:$.value,checked:o.gender===$.value,onChange:j=>{l({...o,gender:j.target.value}),P("")},className:"sr-only"}),$.label)))),e.createElement("div",{className:"pt-2 border-t border-gray-200"},e.createElement("div",{className:"text-xs text-gray-600 mb-2"},"Type de compte"),e.createElement("div",{className:"grid grid-cols-2 gap-3"},e.createElement("label",{className:`flex items-center justify-center px-3 py-2.5 border text-sm cursor-pointer ${o.accountType==="person"?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`},e.createElement("input",{type:"radio",name:"accountType",value:"person",checked:o.accountType==="person",onChange:$=>l({...o,accountType:$.target.value}),className:"sr-only"}),"Particulier"),e.createElement("label",{className:`flex items-center justify-center px-3 py-2.5 border text-sm cursor-pointer ${o.accountType==="shop"?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`},e.createElement("input",{type:"radio",name:"accountType",value:"shop",checked:o.accountType==="shop",onChange:$=>l({...o,accountType:$.target.value}),className:"sr-only"}),"Boutique"))),o.accountType==="shop"&&e.createElement("div",{className:"text-xs text-gray-600 bg-gray-50 border border-gray-200 p-3"},e.createElement("p",{className:"font-medium mb-1"},"Boutique sous approbation"),e.createElement("p",null,"Enregistrez-vous d'abord comme particulier puis"," ",e.createElement(ye,{to:"/help",className:"text-indigo-600 hover:text-indigo-700 underline"},"contactez l'quipe HDMarket")," ","pour demander la conversion.")),S&&e.createElement("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 p-3"},S),e.createElement("button",{type:"submit",disabled:p||!o.name||!o.email||!o.password||!o.phone||!o.address||!o.city||!o.gender,className:"w-full py-3 bg-blue-600 text-white text-sm font-semibold rounded-3xl hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed transition-all duration-200 active:scale-95 shadow-sm"},p?"Cration du compte...":"Crer mon compte")),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 text-center"},e.createElement("p",{className:"text-sm text-gray-600"},"Dj un compte ?"," ",e.createElement(ye,{to:"/login",className:"text-indigo-600 hover:text-indigo-700"},"Se connecter")))),e.createElement("div",{className:"mt-6 text-center"},e.createElement("p",{className:"text-xs text-gray-500"},"En crant un compte, vous acceptez nos"," ",e.createElement(ye,{to:"/help",className:"text-gray-600 hover:text-indigo-600"},"conditions d'utilisation")," ","et notre"," ",e.createElement(ye,{to:"/privacy",className:"text-gray-600 hover:text-indigo-600"},"politique de confidentialit")))))}function oH(){const t=wa(),[r,a]=u.useState({email:"",verificationCode:"",newPassword:"",confirmPassword:""}),[n,s]=u.useState(!1),[o,l]=u.useState(!1),[c,m]=u.useState(!1),[p,f]=u.useState(!1),[g,b]=u.useState(""),[x,v]=u.useState(""),E=async()=>{if(!r.email.trim()){v("Veuillez saisir votre adresse email.");return}l(!0),v(""),b("");try{await oe.post("/auth/password/forgot",{email:r.email}),m(!0),b("Code envoy par email. Vrifiez votre bote de rception.")}catch(w){v(w.response?.data?.message||w.message)}finally{l(!1)}},y=async w=>{if(w.preventDefault(),v(""),b(""),!r.verificationCode.trim()){v("Veuillez saisir le code reu par email.");return}if(!r.newPassword){v("Veuillez saisir un nouveau mot de passe.");return}if(r.newPassword!==r.confirmPassword){v("Les mots de passe ne correspondent pas.");return}f(!0);try{await oe.post("/auth/password/reset",{email:r.email,verificationCode:r.verificationCode.trim(),newPassword:r.newPassword}),b("Mot de passe mis  jour. Redirection vers la connexion..."),setTimeout(()=>{t("/login")},1500)}catch(k){v(k.response?.data?.message||k.message)}finally{f(!1)}};return e.createElement("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 bg-[#F2F2F7] dark:bg-black"},e.createElement("div",{className:"max-w-md w-full space-y-8"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"flex justify-center mb-6"},e.createElement("div",{className:"w-20 h-20 bg-[#007AFF] rounded-[20px] flex items-center justify-center shadow-[0_4px_12px_rgba(0,122,255,0.3)]"},e.createElement(Ga,{className:"w-10 h-10 text-white"}))),e.createElement("h1",{className:"text-[28px] font-semibold text-black dark:text-white mb-2"},"Rinitialiser le mot de passe"),e.createElement("p",{className:"text-[15px] text-[#8E8E93]"},"Recevez un code par email pour scuriser la rinitialisation")),e.createElement("div",{className:"apple-card p-8"},e.createElement("form",{onSubmit:y,className:"space-y-6"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(gi,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Adresse email")),e.createElement("div",{className:"relative"},e.createElement("input",{type:"email",inputMode:"email",autoComplete:"email",className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"votre@email.com",value:r.email,onChange:w=>a(k=>({...k,email:w.target.value})),required:!0}),e.createElement(gi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})),e.createElement("button",{type:"button",onClick:E,disabled:o||!r.email.trim(),className:"w-full mt-3 py-3 rounded-xl border border-indigo-200 text-indigo-600 font-semibold hover:bg-indigo-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},o?"Envoi...":c?"Renvoyer le code":"Envoyer le code")),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Ga,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Code de vrification")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Code reu par email",value:r.verificationCode,onChange:w=>a(k=>({...k,verificationCode:w.target.value})),required:!0}),e.createElement(Ga,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Nouveau mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:n?"text":"password",className:"apple-input w-full pl-12 pr-12",placeholder:"Votre nouveau mot de passe",value:r.newPassword,onChange:w=>a(k=>({...k,newPassword:w.target.value})),required:!0}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("button",{type:"button",onClick:()=>s(w=>!w),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"},n?e.createElement(dc,{className:"w-4 h-4"}):e.createElement(Jn,{className:"w-4 h-4"})))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Confirmer le mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:n?"text":"password",className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Confirmez le mot de passe",value:r.confirmPassword,onChange:w=>a(k=>({...k,confirmPassword:w.target.value})),required:!0}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("label",{className:"flex items-center space-x-2 text-sm text-gray-500 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:n,onChange:()=>s(w=>!w),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.createElement("span",null,"Afficher les mots de passe")),x&&e.createElement("p",{className:"text-sm text-red-600"},x),g&&e.createElement("p",{className:"text-sm text-emerald-600"},g),e.createElement("button",{type:"submit",disabled:p,className:"apple-btn-primary w-full py-4 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},p?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,"Confirmation...")):e.createElement(e.Fragment,null,e.createElement(Ga,{className:"w-5 h-5"}),e.createElement("span",null,"Mettre  jour le mot de passe")))),e.createElement("div",{className:"text-center mt-6 pt-6 border-t border-gray-100"},e.createElement(ye,{to:"/login",className:"inline-flex items-center gap-2 text-[15px] text-[#007AFF] hover:underline font-semibold transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour  la connexion")))))}const Rj=u.createContext({showToast:()=>{}}),iC={success:"border-green-200 bg-white text-green-700",error:"border-red-200 bg-white text-red-700",info:"border-indigo-200 bg-white text-indigo-700"},cC={success:"bg-green-100 text-green-600",error:"bg-red-100 text-red-600",info:"bg-indigo-100 text-indigo-600"},lH=({children:t})=>{const[r,a]=u.useState([]),n=u.useCallback(l=>{a(c=>c.filter(m=>m.id!==l))},[]),s=u.useCallback((l,c={})=>{if(!l)return;const m=typeof c=="string"?{variant:c}:Array.isArray(c)?{}:c,{variant:p="success",duration:f=4e3}=m,g=`${Date.now()}-${Math.random().toString(36).slice(2,7)}`;a(b=>[...b,{id:g,message:l,variant:p}]),Number.isFinite(f)&&f>0&&setTimeout(()=>{n(g)},f)},[n]),o=u.useMemo(()=>({showToast:s}),[s]);return u.useEffect(()=>{const l=c=>{const m=c?.detail?.message||"Il semble que vous soyez hors ligne. Connectez-vous  Internet pour continuer.";s(m,{variant:"error"})};return window.addEventListener("hdmarket:network-error",l),()=>{window.removeEventListener("hdmarket:network-error",l)}},[s]),e.createElement(Rj.Provider,{value:o},t,e.createElement("div",{className:"fixed top-24 right-4 z-[1050] flex flex-col gap-3"},r.map(l=>{const c=iC[l.variant]||iC.success,m=cC[l.variant]||cC.success;return e.createElement("div",{key:l.id,className:`flex items-start gap-3 rounded-2xl border px-4 py-3 shadow-lg backdrop-blur-sm transition-all ${c}`},e.createElement("div",{className:`mt-0.5 flex h-8 w-8 items-center justify-center rounded-full ${m}`},e.createElement("span",{className:"text-sm font-semibold"},"!")),e.createElement("div",{className:"flex-1 text-sm leading-relaxed"},l.message),e.createElement("button",{type:"button",onClick:()=>n(l.id),className:"ml-2 text-xs font-semibold uppercase tracking-wide text-gray-400 hover:text-gray-600"},"Fermer"))})))},ms=()=>{const t=u.useContext(Rj);if(!t)throw new Error("useToast doit tre utilis  lintrieur de ToastProvider.");return t},iH={MTN:"069822930",Airtel:"050237023",Other:null},Di=t=>({baseAmount:t,discountAmount:0,dueAmount:t,discountRate:0,isWaived:!1}),cH=t=>t==="valid"?"text-emerald-700 bg-emerald-50 border-emerald-200":t==="invalid"?"text-red-700 bg-red-50 border-red-200":"text-gray-600 bg-gray-50 border-gray-200";function dC({product:t,onSubmitted:r}){const a=u.useMemo(()=>Math.round(t.price*.03*100)/100,[t.price]),[n,s]=u.useState({payerName:"",operator:"MTN",transactionNumber:"",amount:a,promoCode:""}),[o,l]=u.useState(!1),[c,m]=u.useState(!1),[p,f]=u.useState({status:"idle",code:"",message:"",commission:Di(a)}),g=(n.promoCode||"").trim().toUpperCase(),b=p.status==="valid"&&p.code===g,x=b?p.commission:Di(a),v=Number(x.dueAmount||0),E=v>0,{networks:y}=Vg(),w=pU(y,n.operator)||(n.operator==="Other"?uU(y):null)||iH[n.operator];u.useEffect(()=>{s(O=>({...O,amount:v}))},[v]),u.useEffect(()=>{p.code&&p.code!==g&&f({status:"idle",code:"",message:"",commission:Di(a)})},[g,p.code,a]),u.useEffect(()=>{!g&&p.status!=="idle"&&f({status:"idle",code:"",message:"",commission:Di(a)})},[g,p.status,a]);const k=t.payment?.status||null,C=!!t.payment,A=async()=>{if(!g){f({status:"invalid",code:"",message:"Veuillez saisir un code promo.",commission:Di(a)});return}m(!0);try{const{data:O}=await oe.post("/payments/promo-codes/validate",{productId:t._id,code:g});f({status:"valid",code:g,message:O?.message||"Code promo valide.",commission:O?.commission||Di(a)})}catch(O){const R=O.response?.data||{};f({status:"invalid",code:g,message:R.message||"Code invalide ou expir.",commission:R.commission||Di(a)})}finally{m(!1)}},S=async O=>{if(O.preventDefault(),C)return;if(g&&!b){alert("Veuillez valider le code promo avant de soumettre le paiement.");return}const R=(n.transactionNumber||"").replace(/\D/g,"");if(E&&R.length!==10){alert("Le numro de transaction doit contenir exactement 10 chiffres.");return}l(!0);try{const D={productId:t._id,amount:v};b&&(D.promoCode=g),E&&(D.payerName=n.payerName,D.operator=n.operator,D.transactionNumber=R),await oe.post("/payments",D),alert("Paiement soumis. En attente de vrification."),r&&await r()}catch(D){alert(D.response?.data?.message||D.message)}finally{l(!1)}},T={waiting:{title:"Paiement en attente de validation",description:"Votre paiement a t reu et est en cours de vrification par notre quipe. Votre annonce sera publie sous 24h aprs approbation.",icon:Xt,tone:"bg-amber-50 border-amber-200 text-amber-800",iconColor:"text-amber-500"},verified:{title:"Paiement vrifi - Annonce active",description:"Votre paiement a t valid avec succs. Votre annonce est maintenant visible par tous les acheteurs sur la plateforme.",icon:ar,tone:"bg-green-50 border-green-200 text-green-800",iconColor:"text-green-500"},rejected:{title:"Paiement rejet",description:"Votre paiement n'a pas pu tre valid. Veuillez contacter notre support ou soumettre un nouveau paiement.",icon:Yt,tone:"bg-red-50 border-red-200 text-red-800",iconColor:"text-red-500"}}[k]||{title:"Paiement enregistr",description:"Statut en cours de mise  jour.",icon:Xt,tone:"bg-gray-50 border-gray-200 text-gray-700",iconColor:"text-gray-500"};if(C){const O=T.icon,R=Number(t.payment?.commissionBaseAmount??a),D=Number(t.payment?.commissionDiscountAmount??0),$=Number(t.payment?.commissionDueAmount??t.payment?.amount??a);return e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"text-center mb-6"},e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(pa,{className:"w-8 h-8 text-white"})),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Statut de paiement"),e.createElement("p",{className:"text-gray-500"},"Suivi de votre transaction")),e.createElement("div",{className:`rounded-2xl border-2 p-6 ${T.tone} mb-6`},e.createElement("div",{className:"flex items-start space-x-4"},e.createElement("div",{className:"flex-shrink-0"},e.createElement(O,{className:`w-8 h-8 ${T.iconColor}`})),e.createElement("div",{className:"flex-1"},e.createElement("h3",{className:"text-lg font-semibold mb-2"},T.title),e.createElement("p",{className:"text-sm leading-relaxed"},T.description)))),e.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"Dtails de la transaction"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Produit:"),e.createElement("span",{className:"font-medium text-gray-900"},t.title)),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Prix du produit:"),e.createElement("span",{className:"font-medium text-gray-900"},Number(t.price).toLocaleString()," FCFA")),t.payment?.promoCodeValue&&e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Code promo:"),e.createElement("span",{className:"font-semibold text-emerald-700"},t.payment.promoCodeValue)),t.confirmationNumber&&e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Code produit:"),e.createElement("span",{className:"font-semibold text-gray-900"},t.confirmationNumber))),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Commission (base 3%):"),e.createElement("span",{className:"font-medium text-gray-900"},R.toLocaleString()," FCFA")),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Rduction promo:"),e.createElement("span",{className:"font-medium text-emerald-700"},"-",D.toLocaleString()," FCFA")),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Commission  payer:"),e.createElement("span",{className:"font-semibold text-indigo-700"},$.toLocaleString()," FCFA")),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-gray-500"},"Statut actuel:"),e.createElement("span",{className:`font-medium px-2 py-1 rounded-full text-xs ${k==="verified"?"bg-green-100 text-green-800":k==="rejected"?"bg-red-100 text-red-800":"bg-amber-100 text-amber-800"}`},k||t.status))))))}return e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"text-center mb-8"},e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Sa,{className:"w-8 h-8 text-white"})),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Validation de l'annonce"),e.createElement("p",{className:"text-gray-500"},"Finalisez votre publication en payant la commission")),e.createElement("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 space-y-6"},e.createElement("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 p-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h3",{className:"font-semibold text-indigo-900 text-sm"},"Commission de publication"),e.createElement("p",{className:"text-indigo-700 text-xs"},"Base 3% du prix du produit")),e.createElement("div",{className:"text-right"},e.createElement("div",{className:"text-2xl font-bold text-indigo-600"},v.toLocaleString()," FCFA"),e.createElement("div",{className:"text-indigo-500 text-xs"},"sur ",Number(t.price).toLocaleString()," FCFA"))),e.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2 text-xs"},e.createElement("div",{className:"rounded-xl border border-indigo-200 bg-white/70 px-3 py-2"},e.createElement("p",{className:"text-indigo-500"},"Base"),e.createElement("p",{className:"font-semibold text-indigo-800"},Number(x.baseAmount||0).toLocaleString()," FCFA")),e.createElement("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2"},e.createElement("p",{className:"text-emerald-600"},"Rduction"),e.createElement("p",{className:"font-semibold text-emerald-700"},"-",Number(x.discountAmount||0).toLocaleString()," FCFA")),e.createElement("div",{className:"rounded-xl border border-indigo-200 bg-white/70 px-3 py-2"},e.createElement("p",{className:"text-indigo-500"}," payer"),e.createElement("p",{className:"font-semibold text-indigo-800"},v.toLocaleString()," FCFA")))),e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-gray-50 p-4 space-y-3"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800"},e.createElement(w2,{className:"w-4 h-4 text-indigo-600"}),"Code promo commission"),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},e.createElement("input",{type:"text",className:"flex-1 px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Ex: FIRST10",value:n.promoCode,onChange:O=>s(R=>({...R,promoCode:O.target.value.toUpperCase()})),disabled:o||c}),e.createElement("button",{type:"button",onClick:A,disabled:o||c,className:"px-4 py-3 rounded-xl border border-indigo-200 bg-indigo-50 text-indigo-700 text-sm font-semibold hover:bg-indigo-100 disabled:opacity-50"},c?"Validation...":"Valider le code")),(p.message||p.status!=="idle")&&e.createElement("div",{className:`rounded-xl border px-3 py-2 text-sm ${cH(p.status)}`},p.message||"Code en attente de validation.")),e.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-4"},e.createElement("div",{className:"flex items-start space-x-3"},e.createElement(Yt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.createElement("div",{className:"space-y-2"},e.createElement("h3",{className:"font-semibold text-amber-800 text-sm"},"Instructions de paiement"),E?e.createElement("p",{className:"text-amber-700 text-sm"},"Effectuez un transfert mobile de"," ",e.createElement("span",{className:"font-bold"},v.toLocaleString()," FCFA")," et renseignez les dtails de la transaction ci-dessous."):e.createElement("p",{className:"text-amber-700 text-sm"},"Commission annule grce au code promo. Vous pouvez soumettre directement votre demande de validation sans paiement mobile.")))),t.confirmationNumber&&e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-gray-50 px-4 py-3 text-xs text-gray-600"},e.createElement("p",{className:"font-semibold text-gray-900 text-[12px] mb-1"},"Code produit : ",e.createElement("span",{className:"text-indigo-600"},t.confirmationNumber)),e.createElement("p",null,"Communiquez ce code  ladministrateur ou au support lorsque vous confirmez votre commande afin quil identifie rapidement lannonce.")),e.createElement("form",{onSubmit:S,className:"space-y-4"},E&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Ia,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Nom du payeur *")),e.createElement("input",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Votre nom complet",value:n.payerName,onChange:O=>s({...n,payerName:O.target.value}),disabled:o,required:E})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Sa,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Oprateur mobile *")),e.createElement("select",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",value:n.operator,onChange:O=>s({...n,operator:O.target.value}),disabled:o,required:E},e.createElement("option",{value:"MTN"},"MTN"),e.createElement("option",{value:"Airtel"},"Airtel"),e.createElement("option",{value:"Other"},"Autre")),w&&e.createElement("p",{className:"text-sm text-indigo-700 bg-indigo-50 rounded-xl px-3 py-2 border border-indigo-100"},"Envoyer l'argent au numro : ",e.createElement("span",{className:"font-bold"},w))),e.createElement("div",{className:"md:col-span-2 space-y-2"},e.createElement("p",{className:"text-sm font-medium text-gray-700"},"Exemple : o trouver l'ID de la transaction dans le SMS"),e.createElement("div",{className:"rounded-xl border-2 border-indigo-100 bg-indigo-50/50 p-3 overflow-hidden"},e.createElement("img",{src:"/images/transaction-id-sms-example.png",alt:"Exemple de SMS Mobile Money montrant l'ID de la transaction (ex: 7232173826)",className:"w-full max-w-md mx-auto rounded-lg border border-gray-200 bg-white shadow-sm object-contain"}),e.createElement("p",{className:"text-xs text-gray-600 mt-2 text-center"},"Saisissez le numro indiqu  ct de  ID  ou  ID de la transaction  dans le SMS de confirmation."))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(y2,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Numro de transaction *")),e.createElement("input",{type:"text",inputMode:"numeric",maxLength:10,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"10 chiffres (ex: 7232173826)",value:n.transactionNumber,onChange:O=>{const R=O.target.value.replace(/\D/g,"").slice(0,10);s({...n,transactionNumber:R})},disabled:o,required:E,title:"ID de la transaction : 10 chiffres reus par SMS"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Ea,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Montant pay (FCFA)")),e.createElement("input",{type:"number",className:"w-full px-4 py-3 bg-gray-100 border border-gray-200 rounded-xl text-gray-600",value:v,disabled:!0}))),!E&&e.createElement("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800"},"Commission annule grce au code promo. Cliquez sur le bouton ci-dessous pour envoyer la demande de validation."),e.createElement("button",{type:"submit",disabled:o,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2 shadow-lg"},o?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,"Soumission en cours...")):e.createElement(e.Fragment,null,e.createElement(Eu,{className:"w-5 h-5"}),e.createElement("span",null,E?"Soumettre le paiement":"Soumettre la validation promo"))),e.createElement("p",{className:"text-center text-xs text-gray-500"},"Votre annonce sera approuve sous 24h aprs vrification administrative"))))}const Fi=3,Im=20,vx=10,mC=({className:t=""})=>e.createElement("svg",{viewBox:"0 0 24 24",className:t,"aria-hidden":"true",focusable:"false"},e.createElement("path",{fill:"currentColor",d:"M9 3h6l1 2h5v2H3V5h5l1-2zm1 6h2v9h-2V9zm4 0h2v9h-2V9zM6 7h12l-1 14H7L6 7z"}));function dH(t){const{onCreated:r,onUpdated:a,initialValues:n,productId:s,submitLabel:o}=t,[l,c]=u.useState({title:"",description:"",price:"",category:"",condition:"used",operator:"MTN",discount:"",installmentEnabled:!1,installmentMinAmount:"",installmentDuration:"",installmentStartDate:"",installmentEndDate:"",installmentLatePenaltyRate:"",installmentMaxMissedPayments:3,installmentRequireGuarantor:!1}),[m,p]=u.useState([]),[f,g]=u.useState(!1),[b,x]=u.useState([]),[v,E]=u.useState([]),[y,w]=u.useState([]),[k,C]=u.useState(""),{user:A}=u.useContext(Sr),S=A?.accountType==="shop",P=!!(A?.shopVerified&&A?.accountType==="shop"),T=A?.accountType==="shop",[O,R]=u.useState(null),[D,$]=u.useState(null),[j,K]=u.useState(!1),[H,V]=u.useState(""),[q,Y]=u.useState(null),[z,L]=u.useState(""),[Q,B]=u.useState(""),[ae,te]=u.useState(null),[ge,ue]=u.useState(!1),[Ee,fe]=u.useState(0),[re,U]=u.useState(!1),[W,me]=u.useState(!1),[ne,ee]=u.useState(0),[ve,be]=u.useState(0),[J,Ge]=u.useState(null),[je,tt]=u.useState({x:0,y:0,width:0,height:0}),[At,He]=u.useState(!1),[Tt,Re]=u.useState({x:0,y:0}),[et,gt]=u.useState(!1),[Ze,xt]=u.useState({x:0,y:0}),[Dt,nt]=u.useState(1),[Me,Qe]=u.useState({x:0,y:0}),[wt,lt]=u.useState(null),[we,vt]=u.useState(null);u.useRef(null);const pt=u.useRef(null),Le=u.useRef(null),pe=u.useRef(()=>{}),Pe=u.useRef(()=>{}),ft=.3,ht=3,Lt={"1:1":1,"4:3":4/3,"16:9":16/9},[nr,er]=u.useState(!1),Nt=rs(768),[sr,Rt]=u.useState({info:!0,images:!0,media:!0,validation:!0,preview:!1}),zt=Fe=>Rt($e=>({...$e,[Fe]:!$e[Fe]})),mr=Fe=>new Promise(($e,Ke)=>{const st=new FileReader;st.onload=()=>$e(st.result),st.onerror=Ke,st.readAsDataURL(Fe)}),Mr=async Fe=>{const $e=Array.from(Fe.target.files||[]);if(!$e.length)return;const Ke=Math.max(0,Fi-v.length-m.length);if(Ke===0){C(`Maximum ${Fi} photos au total. Supprimez une image pour en ajouter.`),Fe.target.value="";return}const st=$e.slice(0,Ke);$e.length>Ke?C(`Maximum ${Fi} photos au total. Seules les premires ont t conserves.`):C("");const St=st.map(Mt=>({file:Mt,cropped:!1,leftAsIs:!1})),rt=await Promise.all(st.map(mr)),_t=st.map((Mt,hr)=>({url:rt[hr],name:Mt.name}));p(Mt=>[...Mt,...St]),x(Mt=>[...Mt,..._t]),Fe.target.value=""},br=Fe=>{lt(null);const $e=new Image;$e.onload=()=>{const Ke=pt.current;if(!Ke)return;const st=Ke.clientWidth,St=Ke.clientHeight,rt=$e.width/$e.height,_t=st/St;let Mt,hr;rt>_t?(Mt=st,hr=st/rt):(hr=St,Mt=St*rt),nt(Mt/$e.width),Qe({x:(st-Mt)/2,y:(St-hr)/2});const Pt=Math.min(Mt,hr)*.8;tt({x:(st-Pt)/2,y:(St-Pt)/2,width:Pt,height:Pt})},$e.src=Fe},or=(Fe,$e)=>{const Ke=pt.current?.getBoundingClientRect();return Ke?{x:Fe-Ke.left-je.x,y:$e-Ke.top-je.y}:{x:0,y:0}},Gt=(Fe,$e)=>Fe>=je.x&&Fe<=je.x+je.width&&$e>=je.y&&$e<=je.y+je.height,Zt=(Fe,$e)=>{const Ke=pt.current?.getBoundingClientRect();if(!Ke)return"pan";const st=Fe-Ke.left,St=$e-Ke.top,rt=28,{x:_t,y:Mt,width:hr,height:Pt}=je;return st>=_t+hr-rt&&St>=Mt+Pt-rt&&st<=_t+hr&&St<=Mt+Pt?"resize-se":st<=_t+rt&&St<=Mt+rt&&st>=_t&&St>=Mt?"resize-nw":st>=_t+hr-rt&&St<=Mt+rt&&St>=Mt?"resize-ne":st<=_t+rt&&St>=Mt+Pt-rt&&St<=Mt+Pt?"resize-sw":Gt(st,St)?"crop":"pan"},se=Fe=>{if(!J||!pt.current)return;const $e=pt.current.getBoundingClientRect(),Ke=Fe.clientX-$e.left,st=Fe.clientY-$e.top,St=Zt(Fe.clientX,Fe.clientY);St==="resize-se"||St==="resize-nw"||St==="resize-ne"||St==="resize-sw"?(Fe.stopPropagation(),vt(St.replace("resize-","")),Re({x:Ke,y:st})):St==="crop"?(He(!0),Re(or(Fe.clientX,Fe.clientY))):(gt(!0),xt({startX:Fe.clientX,startY:Fe.clientY,startPos:{...Me}}))},dt=Fe=>{if(!J||!Fe.touches[0]||!pt.current)return;const $e=Fe.touches[0],Ke=Zt($e.clientX,$e.clientY),st=pt.current.getBoundingClientRect(),St=$e.clientX-st.left,rt=$e.clientY-st.top;Ke.startsWith("resize-")?(vt(Ke.replace("resize-","")),Re({x:St,y:rt})):Ke==="crop"?(He(!0),Re(or($e.clientX,$e.clientY))):(gt(!0),xt({startX:$e.clientX,startY:$e.clientY,startPos:{...Me}}))},ut=Fe=>{if(!J||!pt.current)return;const $e=pt.current.getBoundingClientRect(),Ke=Fe.clientX-$e.left,st=Fe.clientY-$e.top;if(et){Qe({x:Ze.startPos.x+(Fe.clientX-Ze.startX),y:Ze.startPos.y+(Fe.clientY-Ze.startY)});return}if(we){ie(Ke,st,$e);return}if(!At)return;const St=Fe.clientX-$e.left-Tt.x,rt=Fe.clientY-$e.top-Tt.y,_t=$e.width-je.width,Mt=$e.height-je.height;tt({...je,x:Math.max(0,Math.min(_t,St)),y:Math.max(0,Math.min(Mt,rt))})},It=()=>{He(!1),gt(!1),vt(null)},de=()=>{He(!1),gt(!1),vt(null)},De=Fe=>{if(!J||!pt.current||!Fe.touches[0])return;const $e=Fe.touches[0],Ke=pt.current.getBoundingClientRect(),st=$e.clientX-Ke.left,St=$e.clientY-Ke.top;if(et){Qe({x:Ze.startPos.x+($e.clientX-Ze.startX),y:Ze.startPos.y+($e.clientY-Ze.startY)});return}if(we){ie(st,St,Ke);return}if(!At)return;const rt=$e.clientX-Ke.left-Tt.x,_t=$e.clientY-Ke.top-Tt.y,Mt=Ke.width-je.width,hr=Ke.height-je.height;tt({...je,x:Math.max(0,Math.min(Mt,rt)),y:Math.max(0,Math.min(hr,_t))})},F=80,ie=(Fe,$e,Ke)=>{let{x:st,y:St,width:rt,height:_t}=je;const Mt=wt?Lt[wt]:null,hr=(Pt,ur)=>Mt?Mt>=1?{w:Pt,h:Pt/Mt}:{w:ur*Mt,h:ur}:{w:Pt,h:ur};if(we==="se"){let Pt=Math.max(F,Fe-st),ur=Math.max(F,$e-St);({w:Pt,h:ur}=hr(Pt,ur)),Pt=Math.min(Pt,Ke.width-st),ur=Math.min(ur,Ke.height-St),Mt&&({w:Pt,h:ur}=hr(Pt,ur)),tt({x:st,y:St,width:Pt,height:ur})}else if(we==="sw"){let Pt=Math.max(F,st+rt-Fe),ur=Math.max(F,$e-St);({w:Pt,h:ur}=hr(Pt,ur));const aa=st+rt-Pt;aa<0&&(Pt=st+rt,ur=Mt?Pt/Mt:ur),tt({x:Math.max(0,aa),y:St,width:Pt,height:Math.min(ur,Ke.height-St)})}else if(we==="ne"){let Pt=Math.max(F,Fe-st),ur=Math.max(F,St+_t-$e);({w:Pt,h:ur}=hr(Pt,ur));const aa=St+_t-ur;tt({x:st,y:Math.max(0,aa),width:Pt,height:ur})}else if(we==="nw"){let Pt=Math.max(F,st+rt-Fe),ur=Math.max(F,St+_t-$e);({w:Pt,h:ur}=hr(Pt,ur));const aa=st+rt-Pt,sn=St+_t-ur;tt({x:Math.max(0,aa),y:Math.max(0,sn),width:Pt,height:ur})}},he=Fe=>{const $e=pt.current;if(!$e)return;const Ke={width:$e.clientWidth,height:$e.clientHeight};if(lt(Fe),!Fe)return;const st=Lt[Fe],St=je.x+je.width/2,rt=je.y+je.height/2;let _t=je.width,Mt=je.height;st>=1?(Mt=_t/st,Mt>Ke.height&&(Mt=Ke.height,_t=Mt*st)):(_t=Mt*st,_t>Ke.width&&(_t=Ke.width,Mt=_t/st)),_t=Math.min(_t,Ke.width),Mt=Math.min(Mt,Ke.height);const hr=Math.max(0,Math.min(St-_t/2,Ke.width-_t)),Pt=Math.max(0,Math.min(rt-Mt/2,Ke.height-Mt));tt({x:hr,y:Pt,width:_t,height:Mt})},ke=u.useCallback(()=>{if(!J||!Le.current)return null;const Fe=document.createElement("canvas"),$e=Fe.getContext("2d"),Ke=Le.current,st=Ke.naturalWidth/Ke.width,St=Ke.naturalHeight/Ke.height,rt=(je.x-Me.x)*st,_t=(je.y-Me.y)*St,Mt=je.width*st,hr=je.height*St;return Fe.width=Mt,Fe.height=hr,$e.drawImage(Ke,rt,_t,Mt,hr,0,0,Mt,hr),new Promise(Pt=>{Fe.toBlob(ur=>{const aa=new File([ur],J.file.name,{type:J.file.type,lastModified:Date.now()});Pt(aa)},J.file.type,.95)})},[J,je,Me]),mt=async()=>{const Fe=await ke();if(!Fe)return;const $e={url:URL.createObjectURL(Fe),name:J.file.name};p(Ke=>{const st=[...Ke];return st[J.index]={file:Fe,cropped:!0},st}),x(Ke=>{const st=[...Ke];return st[J.index]=$e,st}),Ge(null),C("")},G=()=>{Ge(null),tt({x:0,y:0,width:0,height:0})},Z=u.useCallback(async(Fe=0,$e=!1,Ke=!1)=>{if(!J?.url)return;const st=new Image;st.crossOrigin="anonymous",await new Promise((na,ya)=>{st.onload=na,st.onerror=ya,st.src=J.url});const St=st.naturalWidth,rt=st.naturalHeight,_t=Fe*Math.PI/180,Mt=Math.abs(Math.cos(_t)),hr=Math.abs(Math.sin(_t)),Pt=Math.round(Mt*St+hr*rt),ur=Math.round(hr*St+Mt*rt),aa=document.createElement("canvas");aa.width=Pt,aa.height=ur;const sn=aa.getContext("2d");sn.translate(Pt/2,ur/2),sn.rotate(_t),sn.scale($e?-1:1,Ke?-1:1),sn.translate(-St/2,-rt/2),sn.drawImage(st,0,0,St,rt,0,0,St,rt);const Ta=await new Promise(na=>aa.toBlob(na,J.file.type,.95)),gn=new File([Ta],J.file.name,{type:J.file.type,lastModified:Date.now()}),pr=URL.createObjectURL(gn);J.url&&J.url.startsWith("blob:")&&URL.revokeObjectURL(J.url),Ge(na=>({...na,file:gn,url:pr})),setTimeout(()=>br(pr),50)},[J]),le=()=>Z(-90,!1,!1),_e=()=>Z(90,!1,!1),Be=()=>Z(0,!0,!1),Te=()=>Z(0,!1,!0),Se=Fe=>{nt($e=>Math.max(ft,Math.min(ht,$e+Fe)))},Je=Fe=>{const $e=parseFloat(Fe.target.value);Number.isNaN($e)||nt(Math.max(ft,Math.min(ht,$e)))},qt=Fe=>{const $e=m[Fe],Ke=b[Fe];if(!$e||!Ke?.url)return;const st=$e?.file||$e;st instanceof File&&(Ge({file:st,url:Ke.url,index:Fe}),setTimeout(()=>br(Ke.url),100))},lr=Fe=>{p($e=>{const Ke=[...$e];return Ke[Fe]&&(Ke[Fe]={...Ke[Fe],leftAsIs:!0}),Ke})},Nr=Fe=>{const $e=m.filter((st,St)=>St!==Fe),Ke=b.filter((st,St)=>St!==Fe);p($e),x(Ke),$e.length<Fi&&C("")},ra=Fe=>{const $e=v[Fe];$e&&(E(v.filter((Ke,st)=>st!==Fe)),w(Ke=>[...Ke,$e]),v.length-1+m.length<Fi&&C(""))},Oe=async Fe=>{const $e=Fe.target.files?.[0];if($e){if(!$e.type.startsWith("video/")){V("Le fichier doit tre une vido (MP4, MOV, ...)."),Fe.target.value="";return}if(be($e.size),V(""),$e.size>Im*1024*1024){me(!0),ee(0);try{const Ke=document.createElement("video");Ke.preload="auto",Ke.muted=!1,Ke.volume=0,Ke.playsInline=!0,Ke.crossOrigin="anonymous";const st=URL.createObjectURL($e);Ke.src=st,await new Promise((pr,na)=>{Ke.onloadedmetadata=()=>{Ke.videoWidth===0||Ke.videoHeight===0?na(new Error("Impossible de lire les dimensions de la vido")):pr()},Ke.onerror=()=>na(new Error("Erreur lors du chargement de la vido"))}),await new Promise((pr,na)=>{Ke.oncanplay=()=>pr(),Ke.onerror=()=>na(new Error("Erreur lors du chargement de la vido"))});const St=Ke.duration,_t=Im*1024*1024*.95*8/St,Mt=Math.max(5e5,Math.floor(_t*.9)),hr=Math.min(128e3,Math.floor(_t*.1));let Pt="video/webm;codecs=vp9,opus";MediaRecorder.isTypeSupported(Pt)||(Pt="video/webm;codecs=vp8,opus",MediaRecorder.isTypeSupported(Pt)||(Pt="video/webm",MediaRecorder.isTypeSupported(Pt)||(Pt="video/mp4")));const ur=[];let aa;if(typeof Ke.captureStream=="function")aa=Ke.captureStream();else{const pr=document.createElement("canvas"),na=pr.getContext("2d");pr.width=Ke.videoWidth,pr.height=Ke.videoHeight,aa=pr.captureStream(30),Ke.onplaying=()=>{const ya=()=>{Ke.ended||Ke.paused||(na.drawImage(Ke,0,0,pr.width,pr.height),requestAnimationFrame(ya))};ya()}}const sn={mimeType:Pt,videoBitsPerSecond:Mt};Pt.includes("webm")&&aa.getAudioTracks&&aa.getAudioTracks().length>0&&(sn.audioBitsPerSecond=hr);const Ta=new MediaRecorder(aa,sn);Ta.ondataavailable=pr=>{pr.data&&pr.data.size>0&&ur.push(pr.data)},Ta.onstop=()=>{ee(100),setTimeout(()=>{const pr=new Blob(ur,{type:Pt}),na=Pt.includes("webm")?"webm":"mp4",ya=new File([pr],$e.name.replace(/\.[^/.]+$/,"")+"."+na,{type:pr.type,lastModified:Date.now()});R(ya),me(!1),ee(0),URL.revokeObjectURL(st),Fe.target.value=""},300)},Ta.onerror=pr=>{console.error("Compression error:",pr),V("Erreur lors de la compression. Veuillez essayer avec une autre vido."),me(!1),ee(0),URL.revokeObjectURL(st),Fe.target.value=""};const gn=setInterval(()=>{if(Ke.ended||Ke.paused)return;const pr=Math.min(98,Ke.currentTime/St*100);ee(pr)},200);Ke.onended=()=>{clearInterval(gn),ee(98),setTimeout(()=>Ta.stop(),150)},Ta.start(100),Ke.currentTime=0,await Ke.play()}catch(Ke){console.error("Video compression error:",Ke),V("Erreur lors de la compression. Le fichier est peut-tre trop volumineux ou corrompu. Veuillez essayer avec une vido plus courte."),me(!1),ee(0),Fe.target.value=""}}else R($e),Fe.target.value=""}},it=()=>{R(null),V(""),me(!1),ee(0),be(0)},gr=()=>{K(!1),document.getElementById("product-form-video-input")?.click()},wr=()=>{K(!0)},xa=()=>{},fa=Fe=>{const $e=Fe.target.files?.[0];if($e){if($e.type!=="application/pdf"){L("Le fichier doit tre un PDF.");return}if($e.size>vx*1024*1024){L(`Le PDF doit faire moins de ${vx} Mo.`);return}L(""),Y($e),ue(!1),Fe.target.value=""}},Ua=()=>{Y(null),L("")},Na=async Fe=>{if(Fe.preventDefault(),B(""),l.installmentEnabled){if(!S){B("Seules les boutiques peuvent activer le paiement par tranche.");return}const $e=Number(l.installmentMinAmount||0),Ke=Number(l.installmentDuration||0),st=l.installmentStartDate?new Date(l.installmentStartDate):null,St=l.installmentEndDate?new Date(l.installmentEndDate):null,rt=Number(l.price||0);if(!Number.isFinite($e)||$e<=0){B("Le minimum du premier paiement est requis.");return}if(Number.isFinite(rt)&&rt>0&&$e>rt){B("Le minimum du premier paiement ne peut pas dpasser le prix du produit.");return}if(!Number.isInteger(Ke)||Ke<=0){B("La dure du paiement par tranche doit tre exprime en jours.");return}if(!st||Number.isNaN(st.getTime())||!St||Number.isNaN(St.getTime())){B("Les dates de dbut et de fin sont requises.");return}if(St<=st){B("La date de fin doit tre aprs la date de dbut.");return}const _t=Math.round((St.getTime()-st.getTime())/(1440*60*1e3));if(_t!==Ke){B(`La dure doit correspondre  l'cart des dates (${_t} jours).`);return}}g(!0),O&&(U(!0),fe(0));try{const $e=new FormData;Object.entries(l).forEach(([rt,_t])=>{["discount","installmentMinAmount","installmentDuration","installmentLatePenaltyRate"].includes(rt)&&(_t===""||_t===null||_t===void 0)||["installmentStartDate","installmentEndDate"].includes(rt)&&!_t||$e.append(rt,_t)}),m.slice(0,Fi).forEach(rt=>{const _t=rt?.file||rt;_t instanceof File&&$e.append("images",_t)}),y.forEach(rt=>$e.append("removeImages",rt)),O&&$e.append("video",O),q&&$e.append("pdf",q),ge&&$e.append("removePdf","true"),j&&$e.append("removeVideo","true");const Ke=`/products${s?`/${s}`:""}`,St=await oe[s?"put":"post"](Ke,$e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:rt=>{if(rt.total){const _t=Math.round(rt.loaded*100/rt.total);fe(_t)}}});s?a?.(St.data):r?.(St.data),c({title:"",description:"",price:"",category:"",condition:"used",operator:"MTN",discount:"",installmentEnabled:!1,installmentMinAmount:"",installmentDuration:"",installmentStartDate:"",installmentEndDate:"",installmentLatePenaltyRate:"",installmentMaxMissedPayments:3,installmentRequireGuarantor:!1}),p([]),x([]),E([]),w([]),C(""),R(null),$(null),K(!1),V(""),Y(null),L(""),te(null),ue(!1)}catch($e){alert($e.response?.data?.message||$e.message)}finally{g(!1),U(!1),fe(0)}},nn=()=>{const Fe=parseFloat(l.price)||0;return Math.round(Fe*.03)};pe.current=ut,Pe.current=It,u.useEffect(()=>{if(!J)return;const Fe=Ke=>{Ke.touches||pe.current(Ke)},$e=()=>Pe.current();return(At||et||we)&&(document.addEventListener("mousemove",Fe),document.addEventListener("mouseup",$e)),()=>{document.removeEventListener("mousemove",Fe),document.removeEventListener("mouseup",$e)}},[J,At,et,we]),u.useEffect(()=>{if(!n){E([]),te(null),ue(!1),w([]);return}c({title:n.title||"",description:n.description||"",price:n.price||"",category:n.category||"",condition:n.condition||"new",operator:n.operator||"MTN",discount:typeof n.discount=="number"||typeof n.discount=="string"?n.discount:"",installmentEnabled:!!n.installmentEnabled,installmentMinAmount:n.installmentMinAmount!==void 0&&n.installmentMinAmount!==null?n.installmentMinAmount:"",installmentDuration:n.installmentDuration!==void 0&&n.installmentDuration!==null?n.installmentDuration:"",installmentStartDate:n.installmentStartDate?new Date(n.installmentStartDate).toISOString().slice(0,10):"",installmentEndDate:n.installmentEndDate?new Date(n.installmentEndDate).toISOString().slice(0,10):"",installmentLatePenaltyRate:n.installmentLatePenaltyRate!==void 0&&n.installmentLatePenaltyRate!==null?n.installmentLatePenaltyRate:"",installmentMaxMissedPayments:n.installmentMaxMissedPayments!==void 0&&n.installmentMaxMissedPayments!==null?n.installmentMaxMissedPayments:3,installmentRequireGuarantor:!!n.installmentRequireGuarantor}),E(Array.isArray(n.images)?n.images:[]),te(n.pdf||null),ue(!1),w([])},[n]);const Fr=!!s,ka=Fr?"Modifier une annonce":"Publier une annonce",_a=Fr?"Mettez  jour les informations de votre produit":"Remplissez les dtails de votre produit pour commencer  vendre",Pa=o||(Fr?"Mettre  jour lannonce":"Publier lannonce"),oo=Fr?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2";return e.createElement("div",{className:`max-w-2xl mx-auto ${Nt?"px-0 pb-28 bg-[#f2f2f7] min-h-screen":""}`},e.createElement("div",{className:Nt?"text-left px-4 pt-2 pb-4 bg-[#f2f2f7]":"text-center mb-8"},!Nt&&e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ft,{className:"w-8 h-8 text-white"})),e.createElement("div",{className:Nt?"flex items-center gap-3":""},Nt&&e.createElement("div",{className:"w-11 h-11 bg-white rounded-xl flex items-center justify-center flex-shrink-0 shadow-sm border border-gray-200/80"},e.createElement(Ft,{className:"w-6 h-6 text-indigo-600"})),e.createElement("div",{className:"min-w-0"},e.createElement("h1",{className:`font-bold text-gray-900 ${Nt?"text-[22px] leading-tight":"text-2xl mb-2"}`},ka),e.createElement("p",{className:`text-gray-500 ${Nt?"text-[13px] mt-0.5":"text-sm"}`},_a)))),e.createElement("form",{onSubmit:Na,className:`space-y-6 bg-white rounded-2xl border border-gray-100 ${Nt?"p-4 pb-6 shadow-sm rounded-2xl mx-4 border-0":"p-6 shadow-sm"}`},e.createElement("div",{className:"space-y-4"},Nt?e.createElement("button",{type:"button",onClick:()=>zt("info"),className:"flex items-center justify-between w-full py-3.5 px-0 text-left rounded-xl -mx-2 px-2 -mt-1 active:bg-gray-100/80 touch-manipulation min-h-[48px] transition-colors","aria-expanded":sr.info},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Pn,{className:"w-4 h-4 text-indigo-600"})),e.createElement("h2",{className:"text-[17px] font-semibold text-gray-900"},"Informations du produit")),e.createElement("span",{className:"min-w-[44px] min-h-[44px] flex items-center justify-center -m-2 text-gray-400"},sr.info?e.createElement(wo,{className:"w-5 h-5"}):e.createElement(Za,{className:"w-5 h-5"}))):e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-indigo-500 to-purple-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Informations du produit")),(!Nt||sr.info)&&e.createElement("div",{className:"space-y-4 pt-1"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Titre de l'annonce *")),e.createElement("input",{className:"w-full px-4 py-3.5 min-h-[48px] text-base bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Ex: iPhone 13 Pro Max 256GB - tat neuf",value:l.title,onChange:Fe=>c({...l,title:Fe.target.value}),required:!0})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Description dtaille *")),e.createElement("textarea",{rows:4,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400 resize-none",placeholder:"Dcrivez votre produit en dtail : caractristiques, tat, accessoires inclus...",value:l.description,onChange:Fe=>c({...l,description:Fe.target.value}),required:!0})),e.createElement("div",{className:`grid ${oo} gap-4`},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wa,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Catgorie *")),e.createElement("select",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",value:l.category,onChange:Fe=>c({...l,category:Fe.target.value}),required:!0},e.createElement("option",{value:""},"Slectionnez une catgorie"),to.map((Fe,$e)=>e.createElement("optgroup",{key:$e,label:Fe.label},Fe.options.map(Ke=>e.createElement("option",{key:Ke.value,value:Ke.value},Ke.label)))))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Ea,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Prix (FCFA) *")),e.createElement("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Ex: 250000",value:l.price,onChange:Fe=>c({...l,price:Fe.target.value}),required:!0,min:"0"})),Fr&&e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wa,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null,"Remise (%)")),e.createElement("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Ex: 5",value:l.discount,onChange:Fe=>{const $e=Fe.target.value;if($e===""){c(st=>({...st,discount:""}));return}const Ke=Math.max(0,Math.min(99,Number($e)));c(st=>({...st,discount:Ke}))},min:"0",max:"99"}),e.createElement("p",{className:"text-[11px] text-gray-500"},"Laissez vide pour aucune remise. Le pourcentage maximum est de 99%."))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"block text-sm font-medium text-gray-700"},"tat du produit"),e.createElement("div",{className:`flex gap-4 ${Nt?"gap-6":"space-x-4"}`},e.createElement("label",{className:`flex items-center gap-2 cursor-pointer touch-manipulation ${Nt?"min-h-[44px] py-2 -my-1":""}`},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("input",{type:"radio",name:"condition",value:"new",checked:l.condition==="new",onChange:Fe=>c({...l,condition:Fe.target.value}),className:"sr-only"}),e.createElement("div",{className:`border-2 rounded-full flex items-center justify-center transition-all ${Nt?"w-6 h-6":"w-5 h-5"} ${l.condition==="new"?"border-indigo-500 bg-indigo-500":"border-gray-300"}`},l.condition==="new"&&e.createElement("div",{className:`bg-white rounded-full ${Nt?"w-2.5 h-2.5":"w-2 h-2"}`}))),e.createElement("span",{className:"text-sm text-gray-700"},"Neuf")),e.createElement("label",{className:`flex items-center gap-2 cursor-pointer touch-manipulation ${Nt?"min-h-[44px] py-2 -my-1":""}`},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("input",{type:"radio",name:"condition",value:"used",checked:l.condition==="used",onChange:Fe=>c({...l,condition:Fe.target.value}),className:"sr-only"}),e.createElement("div",{className:`border-2 rounded-full flex items-center justify-center transition-all ${Nt?"w-6 h-6":"w-5 h-5"} ${l.condition==="used"?"border-indigo-500 bg-indigo-500":"border-gray-300"}`},l.condition==="used"&&e.createElement("div",{className:`bg-white rounded-full ${Nt?"w-2.5 h-2.5":"w-2 h-2"}`}))),e.createElement("span",{className:"text-sm text-gray-700"},"Occasion"))))),e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-gray-50/70 p-4 space-y-4"},e.createElement("div",{className:"flex items-center justify-between gap-4"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},"Paiement par tranche"),e.createElement("p",{className:"text-xs text-gray-500"},"Activez cette option pour proposer un chancier de paiement sur ce produit.")),e.createElement("label",{className:"inline-flex items-center cursor-pointer"},e.createElement("input",{type:"checkbox",className:"sr-only peer",checked:!!l.installmentEnabled,disabled:!S,onChange:Fe=>c($e=>({...$e,installmentEnabled:Fe.target.checked}))}),e.createElement("div",{className:"relative w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:bg-indigo-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"}))),!S&&e.createElement("p",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded-lg px-3 py-2"},"Cette option est rserve aux comptes convertis en boutique."),l.installmentEnabled&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Premier paiement minimum (FCFA)"),e.createElement("input",{type:"number",min:"1",value:l.installmentMinAmount,onChange:Fe=>c($e=>({...$e,installmentMinAmount:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: 30000"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Dure (jours)"),e.createElement("input",{type:"number",min:"1",value:l.installmentDuration,onChange:Fe=>c($e=>({...$e,installmentDuration:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: 30"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Date de dbut"),e.createElement("input",{type:"date",value:l.installmentStartDate,onChange:Fe=>c($e=>({...$e,installmentStartDate:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Date de fin"),e.createElement("input",{type:"date",value:l.installmentEndDate,onChange:Fe=>c($e=>({...$e,installmentEndDate:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Pnalit retard (%)"),e.createElement("input",{type:"number",min:"0",max:"100",value:l.installmentLatePenaltyRate,onChange:Fe=>c($e=>({...$e,installmentLatePenaltyRate:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: 5"})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700"},"Impays max avant suspension"),e.createElement("input",{type:"number",min:"1",max:"12",value:l.installmentMaxMissedPayments,onChange:Fe=>c($e=>({...$e,installmentMaxMissedPayments:Fe.target.value})),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("label",{className:"md:col-span-2 flex items-center gap-2 text-sm text-gray-700"},e.createElement("input",{type:"checkbox",checked:!!l.installmentRequireGuarantor,onChange:Fe=>c($e=>({...$e,installmentRequireGuarantor:Fe.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Exiger les informations dun garant")),Q&&e.createElement("p",{className:"text-xs text-red-600 bg-red-50 border border-red-200 rounded-lg px-3 py-2"},Q)))),e.createElement("div",{className:"space-y-4"},Nt?e.createElement("button",{type:"button",onClick:()=>zt("images"),className:"flex items-center justify-between w-full py-3.5 px-0 text-left rounded-xl -mx-2 px-2 -mt-1 active:bg-gray-100/80 touch-manipulation min-h-[48px] transition-colors","aria-expanded":sr.images},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0"},e.createElement(yf,{className:"w-4 h-4 text-blue-600"})),e.createElement("h2",{className:"text-[17px] font-semibold text-gray-900"},"Photos du produit")),e.createElement("span",{className:"min-w-[44px] min-h-[44px] flex items-center justify-center -m-2 text-gray-400"},sr.images?e.createElement(wo,{className:"w-5 h-5"}):e.createElement(Za,{className:"w-5 h-5"}))):e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-blue-500 to-cyan-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Photos du produit")),(!Nt||sr.images)&&e.createElement("div",{className:"space-y-3 pt-1"},e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(yf,{className:"w-4 h-4 text-blue-500"}),e.createElement("span",null,"Photos"," ",v.length+m.length>0&&`(${v.length+m.length})`)),e.createElement("p",{className:"text-xs text-gray-500"},"Jusqu' ",Fi," photos (PNG ou JPG, 10MB max chacun)."),v.length>0&&e.createElement("div",{className:"space-y-2"},e.createElement("p",{className:"text-xs text-gray-500"},"Images actuelles"),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},v.map((Fe,$e)=>e.createElement("div",{key:`${Fe}-${$e}`,className:"relative group"},e.createElement("img",{src:Fe,alt:`Image existante ${$e+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),e.createElement("button",{type:"button",onClick:()=>ra($e),className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center shadow-sm hover:bg-red-600 transition-colors","aria-label":"Supprimer l'image"},e.createElement(mC,{className:"w-3.5 h-3.5"})))))),e.createElement("label",{className:`flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 active:bg-gray-100 transition-colors group ${Nt?"h-28 min-h-[120px] py-4":"h-32"}`},e.createElement(gl,{className:`text-gray-400 group-hover:text-indigo-500 transition-colors mb-2 ${Nt?"w-10 h-10":"w-8 h-8"}`}),e.createElement("span",{className:"text-gray-500 text-center text-sm"},e.createElement("span",{className:"text-indigo-600 font-medium"},Nt?"Appuyez pour ajouter des photos":"Cliquez pour uploader"),e.createElement("br",null),e.createElement("span",{className:"text-xs"},"PNG, JPG jusqu' 10MB")),e.createElement("input",{type:"file",multiple:!0,onChange:Mr,className:"hidden",accept:"image/*"})),k&&e.createElement("p",{className:"text-xs text-red-500"},k),b.length>0&&e.createElement("div",{className:"space-y-3"},e.createElement("p",{className:"text-xs text-gray-500"},"Pour chaque photo : ",e.createElement("strong",null,"Recadrer")," pour ajuster le cadre, ou ",e.createElement("strong",null,"Laisser tel quel")," pour garder l'originale."),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},b.map((Fe,$e)=>{const Ke=m[$e],st=Ke?.cropped,St=Ke?.leftAsIs;return e.createElement("div",{key:$e,className:"relative group rounded-xl border border-gray-200 overflow-hidden bg-gray-50"},e.createElement("img",{src:Fe.url,alt:`Preview ${$e+1}`,className:"w-full h-28 sm:h-32 object-cover"}),e.createElement("div",{className:"absolute top-1 left-1 flex flex-wrap gap-1"},st&&e.createElement("span",{className:"bg-emerald-500 text-white text-[10px] px-2 py-0.5 rounded font-semibold"},"Recadr"),St&&e.createElement("span",{className:"bg-slate-500 text-white text-[10px] px-2 py-0.5 rounded font-semibold"},"Tel quel")),e.createElement("div",{className:"absolute top-1 right-1"},e.createElement("button",{type:"button",onClick:()=>Nr($e),className:"bg-red-500 text-white p-1.5 rounded-full shadow-lg hover:bg-red-600 transition-all","aria-label":"Supprimer l'image",title:"Supprimer"},e.createElement(mC,{className:"w-3.5 h-3.5"}))),e.createElement("div",{className:"p-2 flex flex-wrap gap-1.5 border-t border-gray-200 bg-white"},e.createElement("button",{type:"button",onClick:()=>qt($e),className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-semibold bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors","aria-label":"Recadrer cette image",title:"Recadrer"},e.createElement(G4,{className:"w-3.5 h-3.5"}),"Recadrer"),e.createElement("button",{type:"button",onClick:()=>lr($e),disabled:St,className:"inline-flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 disabled:opacity-60 disabled:cursor-default transition-colors","aria-label":"Laisser cette image telle quelle",title:"Laisser tel quel"},e.createElement(Jn,{className:"w-3.5 h-3.5"}),"Laisser tel quel")))})))))),P?e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-2"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-emerald-500 to-teal-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Vido de prsentation")),e.createElement("p",{className:"text-sm text-gray-500"},"Ajoutez une courte vido (MP4, MOV, WEBM) pour montrer le produit. Taille maximale ",Im," Mo."),e.createElement("input",{id:"product-form-video-input",type:"file",accept:"video/*",onChange:Oe,className:"hidden"}),D&&!O&&!j?e.createElement("div",{className:"space-y-3"},e.createElement("p",{className:"text-sm font-medium text-gray-700"},"Vido actuelle"),e.createElement("div",{className:"rounded-xl overflow-hidden bg-gray-100 border border-gray-200"},e.createElement("video",{src:D,controls:!0,playsInline:!0,className:"w-full max-h-64 object-contain"}),e.createElement("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 border-t border-gray-200"},e.createElement("button",{type:"button",onClick:xa,className:"px-3 py-2 text-sm font-semibold rounded-full bg-emerald-600 text-white hover:bg-emerald-700 transition-colors"},"Conserver"),e.createElement("button",{type:"button",onClick:gr,className:"px-3 py-2 text-sm font-semibold rounded-full bg-white text-gray-800 border border-gray-300 hover:bg-gray-50 transition-colors"},"Remplacer"),e.createElement("button",{type:"button",onClick:wr,className:"px-3 py-2 text-sm font-semibold rounded-full bg-red-600 text-white hover:bg-red-700 transition-colors"},"Supprimer")))):!O&&!W?e.createElement("label",{htmlFor:"product-form-video-input",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors group"},e.createElement(vN,{className:"w-8 h-8 text-gray-400 group-hover:text-emerald-500 transition-colors mb-2"}),e.createElement("span",{className:"text-sm text-gray-500 text-center"},j?"Vido supprime. Cliquez pour en ajouter une nouvelle.":"Cliquez pour uploader votre vido")):null,W&&e.createElement("div",{className:"space-y-3 p-4 rounded-xl border-2 border-blue-300 bg-gradient-to-br from-blue-50 to-cyan-50 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-8 h-8 border-3 border-blue-600 border-t-transparent rounded-full animate-spin flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-blue-900"},"Compression de la vido en cours..."),e.createElement("p",{className:"text-xs text-blue-600 mt-0.5"},"Rduction de la taille tout en conservant la rsolution originale"))),e.createElement("div",{className:"flex flex-col items-end"},e.createElement("span",{className:"text-lg font-bold text-blue-700"},Math.round(ne),"%"),e.createElement("span",{className:"text-[10px] text-blue-500 font-medium"},"Progression"))),e.createElement("div",{className:"space-y-1"},e.createElement("div",{className:"w-full rounded-full bg-gray-200 h-3 overflow-hidden shadow-inner"},e.createElement("div",{className:"h-full bg-gradient-to-r from-blue-500 via-cyan-500 to-teal-500 transition-all duration-300 ease-out shadow-lg relative",style:{width:`${ne}%`}},e.createElement("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"}))),e.createElement("div",{className:"flex items-center justify-between text-[10px] text-gray-600"},e.createElement("span",null,"0%"),e.createElement("span",{className:"font-semibold text-blue-600"},"En cours..."),e.createElement("span",null,"100%"))),e.createElement("div",{className:"flex items-center gap-2 pt-2 border-t border-blue-200"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs text-gray-600"},e.createElement("span",{className:"font-semibold text-blue-700"},"Taille originale:")," ",(ve/(1024*1024)).toFixed(2)," MB")),e.createElement("div",{className:"w-px h-4 bg-blue-200"}),e.createElement("div",{className:"flex-1 text-right"},e.createElement("p",{className:"text-xs text-gray-600"},e.createElement("span",{className:"font-semibold text-blue-700"},"Cible:")," ",Im," MB max")))),O&&!W&&e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center justify-between px-3 py-2 rounded-xl border border-gray-200 bg-white"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm text-gray-700 truncate font-medium"},O.name),e.createElement("div",{className:"flex items-center gap-2 mt-1"},e.createElement("p",{className:"text-xs text-gray-500"},(O.size/(1024*1024)).toFixed(2)," MB"),ve>O.size&&e.createElement(e.Fragment,null,e.createElement("span",{className:"text-xs text-gray-400"},""),e.createElement("p",{className:"text-xs text-emerald-600 font-semibold"},"Rduit de ",((1-O.size/ve)*100).toFixed(1),"%")))),e.createElement("button",{type:"button",onClick:it,className:"ml-3 text-xs font-semibold text-red-600 hover:text-red-500 px-2 py-1 hover:bg-red-50 rounded transition-colors"},"Supprimer")),ve>Im*1024*1024&&e.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-emerald-50 border border-emerald-200"},e.createElement(za,{className:"w-4 h-4 text-emerald-600 flex-shrink-0"}),e.createElement("p",{className:"text-xs text-emerald-700"},"Vido compresse avec succs. Rsolution originale conserve."))),H&&e.createElement("div",{className:"px-3 py-2 rounded-xl border border-red-200 bg-red-50"},e.createElement("p",{className:"text-xs text-red-600"},H)),re&&e.createElement("div",{className:"mt-2 space-y-1"},e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-600"},e.createElement("span",null,"Upload en cours..."),e.createElement("span",null,Ee,"%")),e.createElement("div",{className:"w-full rounded-full bg-gray-100 h-2 overflow-hidden"},e.createElement("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-purple-600 transition-all duration-200",style:{width:`${Ee}%`}})))):e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-gray-50 p-4 text-sm text-gray-500 space-y-1"},e.createElement("p",{className:"font-semibold text-gray-700"},"Vido rserve aux boutiques certifies"),e.createElement("p",null,"Contactez un administrateur via"," ",e.createElement("a",{href:"/help",className:"font-semibold text-indigo-600 hover:underline"},"le centre daide")," ","pour valider votre boutique.")),T&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-2"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-slate-500 to-gray-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Fiche produit (PDF)")),e.createElement("p",{className:"text-sm text-gray-500"},"Ajoutez un document PDF pour dtailler votre produit. Taille maximale ",vx," Mo."),ae&&!q&&!ge&&e.createElement("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700"},e.createElement("div",null,e.createElement("span",{className:"font-medium"},"PDF actuel :")," ",e.createElement("a",{href:ae,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 hover:underline"},"Ouvrir")),e.createElement("button",{type:"button",onClick:()=>ue(!0),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-red-200 bg-red-50 text-red-600 transition hover:bg-red-100","aria-label":"Supprimer le PDF",title:"Supprimer le PDF"},e.createElement(is,{className:"h-4 w-4"}))),ge&&e.createElement("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700"},e.createElement("span",null,"Le PDF sera supprim lors de lenregistrement."),e.createElement("button",{type:"button",onClick:()=>ue(!1),className:"text-xs font-semibold text-red-600 hover:text-red-500"},"Annuler")),e.createElement("label",{className:"flex flex-col items-center justify-center w-full h-28 border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors group"},e.createElement(Pn,{className:"w-8 h-8 text-gray-400 group-hover:text-slate-600 transition-colors mb-2"}),e.createElement("span",{className:"text-sm text-gray-500 text-center"},"Cliquez pour uploader un PDF"),e.createElement("input",{type:"file",accept:"application/pdf",onChange:fa,className:"hidden"})),q&&e.createElement("div",{className:"flex items-center justify-between px-3 py-2 rounded-xl border border-gray-200 bg-white"},e.createElement("span",{className:"text-sm text-gray-700 truncate"},q.name),e.createElement("button",{type:"button",onClick:Ua,className:"text-xs font-semibold text-red-600 hover:text-red-500"},"Supprimer")),z&&e.createElement("p",{className:"text-xs text-red-500"},z)),!Fr&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-amber-500 to-orange-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Validation de l'annonce")),e.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-4 space-y-3"},e.createElement("div",{className:"flex items-start space-x-3"},e.createElement(Yt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.createElement("div",{className:"space-y-2"},e.createElement("h3",{className:"font-semibold text-amber-800 text-sm"},"Commission de publication"),e.createElement("p",{className:"text-amber-700 text-sm"},"Pour valider votre annonce, envoyez ",e.createElement("span",{className:"font-bold"},nn().toLocaleString()," FCFA")," (3% du prix). Vous pouvez aussi utiliser un code promo dans la section paiement de ",e.createElement("span",{className:"font-semibold"},"/my"),"."),e.createElement("div",{className:"flex items-center space-x-2 text-xs text-amber-600"},e.createElement(za,{className:"w-4 h-4"}),e.createElement("span",null,"Votre annonce sera approuve sous 24h aprs paiement")))))),(l.title||b.length>0||v.length>0)&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-purple-500 to-pink-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Aperu")),e.createElement("button",{type:"button",onClick:()=>er(!nr),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors"},nr?e.createElement(e.Fragment,null,e.createElement(UB,{className:"w-4 h-4"}),e.createElement("span",null,"Masquer")):e.createElement(e.Fragment,null,e.createElement(jB,{className:"w-4 h-4"}),e.createElement("span",null,"Afficher")))),nr&&e.createElement("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200"},e.createElement("div",{className:"max-w-sm mx-auto"},e.createElement(un,{p:{_id:"preview",title:l.title||"Titre du produit",description:l.description||"Description du produit",price:l.price||0,category:l.category||"",condition:l.condition||"used",discount:l.discount||0,images:[...v,...b.map(Fe=>Fe.url)].filter(Boolean),user:A?{_id:A.id,name:A.name,shopName:A.shopName,shopVerified:A.shopVerified,shopLogo:A.shopLogo}:null,createdAt:new Date().toISOString(),views:0,favoritesCount:0,commentCount:0,ratingAverage:0,ratingCount:0},hideMobileDiscountBadge:!1})))),Nt?e.createElement("div",{className:"fixed bottom-0 left-0 right-0 z-40 p-4 pb-[calc(1rem+env(safe-area-inset-bottom))] bg-[#f2f2f7]/95 backdrop-blur-xl border-t border-gray-200/50 safe-area-pb"},e.createElement("button",{type:"submit",disabled:f||!l.title||!l.description||!l.price||!l.category,className:"w-full min-h-[52px] py-4 bg-blue-500 text-white text-[17px] font-semibold rounded-xl active:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm touch-manipulation transition-opacity"},f?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,Fr?"Mise  jour...":"Publication...")):e.createElement(e.Fragment,null,e.createElement(Eu,{className:"w-5 h-5"}),e.createElement("span",null,Pa)))):e.createElement("button",{type:"submit",disabled:f||!l.title||!l.description||!l.price||!l.category,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2 shadow-lg"},f?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,Fr?"Mise  jour en cours...":"Publication en cours...")):e.createElement(e.Fragment,null,e.createElement(Eu,{className:"w-5 h-5"}),e.createElement("span",null,Pa)))),J&&e.createElement("div",{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm ${Nt?"p-0":"p-4"}`},e.createElement("div",{className:`bg-white shadow-2xl overflow-hidden flex flex-col ${Nt?"w-full h-full max-h-none rounded-none":"rounded-2xl max-w-4xl w-full max-h-[90vh]"}`},e.createElement("div",{className:`flex items-center justify-between border-b border-gray-200 flex-shrink-0 ${Nt?"p-4 min-h-[56px] safe-area-top":"p-4"}`},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center"},e.createElement(G4,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Recadrer l'image"),e.createElement("p",{className:"text-xs text-gray-500"},"Glissez la fentre pour la dplacer  Zone sombre pour dplacer l'image  Coins pour redimensionner"))),e.createElement("button",{type:"button",onClick:G,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Fermer"},e.createElement(jt,{className:"w-5 h-5 text-gray-500"}))),e.createElement("div",{className:"flex-shrink-0 border-b border-gray-200 bg-gray-50 px-3 py-3 space-y-3"},e.createElement("div",{className:"flex flex-wrap items-center justify-center gap-2"},e.createElement("button",{type:"button",onClick:le,className:"p-2.5 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 transition-colors touch-manipulation","aria-label":"Tourner  gauche"},e.createElement(hN,{className:"w-5 h-5 text-gray-700"})),e.createElement("button",{type:"button",onClick:_e,className:"p-2.5 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 transition-colors touch-manipulation","aria-label":"Tourner  droite"},e.createElement(uq,{className:"w-5 h-5 text-gray-700"})),e.createElement("button",{type:"button",onClick:Be,className:"p-2.5 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 transition-colors touch-manipulation","aria-label":"Retourner horizontalement"},e.createElement(rB,{className:"w-5 h-5 text-gray-700"})),e.createElement("button",{type:"button",onClick:Te,className:"p-2.5 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 transition-colors touch-manipulation","aria-label":"Retourner verticalement"},e.createElement(nB,{className:"w-5 h-5 text-gray-700"}))),e.createElement("div",{className:"flex flex-wrap items-center justify-center gap-2"},e.createElement("span",{className:"text-xs font-medium text-gray-500 mr-1"},"Format:"),[null,"1:1","4:3","16:9"].map(Fe=>e.createElement("button",{key:Fe||"free",type:"button",onClick:()=>he(Fe),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors touch-manipulation ${wt===Fe?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-100"}`},Fe===null?"Libre":Fe))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>Se(-.2),className:"p-2 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 touch-manipulation","aria-label":"Zoom arrire"},e.createElement(nU,{className:"w-5 h-5 text-gray-700"})),e.createElement("input",{type:"range",min:ft,max:ht,step:.1,value:Dt,onChange:Je,className:"flex-1 h-2 rounded-full appearance-none bg-gray-200 accent-indigo-600"}),e.createElement("button",{type:"button",onClick:()=>Se(.2),className:"p-2 rounded-xl bg-white border border-gray-200 hover:bg-gray-100 active:bg-gray-200 touch-manipulation","aria-label":"Zoom avant"},e.createElement(fj,{className:"w-5 h-5 text-gray-700"})))),e.createElement("div",{className:`flex-1 overflow-auto ${Nt?"p-2 flex items-center justify-center min-h-0":"p-4"}`},e.createElement("div",{ref:pt,className:`relative bg-gray-100 rounded-lg overflow-hidden cursor-move touch-none select-none ${Nt?"w-full max-w-full flex-1 min-h-[280px] max-h-[60vh]":"w-full h-96"}`,onMouseDown:se,onMouseMove:ut,onMouseUp:It,onMouseLeave:It,onTouchStart:dt,onTouchMove:De,onTouchEnd:de,onTouchCancel:de,style:{touchAction:"none"}},e.createElement("img",{ref:Le,src:J.url,alt:"Image  recadrer",className:"absolute",style:{width:`${Le.current?.naturalWidth*Dt||0}px`,height:`${Le.current?.naturalHeight*Dt||0}px`,left:`${Me.x}px`,top:`${Me.y}px`,pointerEvents:"none"},onLoad:Fe=>{const $e=Fe.target,Ke=pt.current;if(!Ke)return;const st=Ke.clientWidth,St=Ke.clientHeight,rt=$e.naturalWidth/$e.naturalHeight,_t=st/St;let Mt,hr;rt>_t?(Mt=st,hr=st/rt):(hr=St,Mt=St*rt),nt(Mt/$e.naturalWidth),Qe({x:(st-Mt)/2,y:(St-hr)/2});const Pt=Math.min(Mt,hr)*.8;tt({x:(st-Pt)/2,y:(St-Pt)/2,width:Pt,height:Pt})}}),e.createElement("div",{className:"absolute border-2 border-white shadow-lg pointer-events-none",style:{left:`${je.x}px`,top:`${je.y}px`,width:`${je.width}px`,height:`${je.height}px`,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}},e.createElement("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-white border-2 border-blue-500 rounded-full pointer-events-none"}),e.createElement("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-white border-2 border-blue-500 rounded-full pointer-events-none"}),e.createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-white border-2 border-blue-500 rounded-full pointer-events-none"}),e.createElement("div",{className:"absolute -top-1 -left-1 w-4 h-4 bg-white border-2 border-blue-500 rounded-full pointer-events-none"})))),e.createElement("div",{className:`flex items-center justify-end gap-3 border-t border-gray-200 bg-gray-50 flex-shrink-0 ${Nt?"p-4 pb-[calc(1rem+env(safe-area-inset-bottom))] safe-area-pb":"p-4"}`},e.createElement("button",{type:"button",onClick:G,className:`font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 active:bg-gray-100 transition-colors touch-manipulation ${Nt?"min-h-[48px] px-5 py-3 text-base":"px-4 py-2 text-sm rounded-lg"}`},"Annuler"),e.createElement("button",{type:"button",onClick:mt,className:`font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl hover:from-indigo-700 hover:to-purple-700 active:scale-[0.98] transition-all shadow-sm touch-manipulation ${Nt?"min-h-[48px] px-5 py-3 text-base":"px-4 py-2 text-sm rounded-lg"}`},"Confirmer le recadrage")))))}function mH({productId:t,productTitle:r,onClose:a}){const{showToast:n}=ms(),[s,o]=u.useState(!0),[l,c]=u.useState(null),[m,p]=u.useState("");u.useEffect(()=>{t&&f()},[t]);const f=async()=>{o(!0),p("");try{const{data:v}=await oe.get(`/products/${t}/analytics`);c(v)}catch(v){p(v.response?.data?.message||"Erreur lors du chargement des analytics"),n("Erreur lors du chargement des analytics",{variant:"error"})}finally{o(!1)}};if(!t)return null;const g=l?.metrics||{},b=l?.viewsOverTime||[],x=Math.max(...b.map(v=>v.views),1);return e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},e.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/30"},e.createElement(mn,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-white"},"Analytics du produit"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-md"},r))),e.createElement("button",{type:"button",onClick:a,className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"p-6 space-y-6"},s?e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})):m?e.createElement("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 text-center"},e.createElement("p",{className:"text-red-600 dark:text-red-400"},m)):e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("div",{className:"p-2 rounded-lg bg-pink-500 text-white"},e.createElement(Yr,{className:"w-4 h-4"})),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs font-semibold text-pink-600 dark:text-pink-400 uppercase tracking-wide"},"Favoris"),e.createElement("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100"},g.favoritesCount||0))),e.createElement("p",{className:"text-xs text-pink-600 dark:text-pink-400"},"Utilisateurs qui ont aim")),e.createElement("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("div",{className:"p-2 rounded-lg bg-green-500 text-white"},e.createElement(Hr,{className:"w-4 h-4"})),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide"},"Clics WhatsApp"),e.createElement("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100"},g.whatsappClicks||0))),e.createElement("p",{className:"text-xs text-green-600 dark:text-green-400"},"Contacts gnrs")),e.createElement("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("div",{className:"p-2 rounded-lg bg-purple-500 text-white"},e.createElement(en,{className:"w-4 h-4"})),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide"},"Ventes"),e.createElement("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100"},g.salesCount||0))),e.createElement("p",{className:"text-xs text-purple-600 dark:text-purple-400"},"Commandes ralises"))),b.length>0&&e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement(Pr,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.createElement("div",{className:"flex-1"},e.createElement("h3",{className:"text-lg font-bold text-gray-900 dark:text-white"},"Vues sur les 30 derniers jours"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Total: ",g.totalViews||0," vues  ",g.uniqueViewers||0," visiteurs uniques"))),e.createElement("div",{className:"h-64 flex items-end gap-1"},b.map((v,E)=>{const y=x>0?v.views/x*100:0;return e.createElement("div",{key:E,className:"flex-1 flex flex-col items-center group relative"},e.createElement("div",{className:"w-full bg-indigo-500 hover:bg-indigo-600 rounded-t transition-all cursor-pointer",style:{height:`${y}%`,minHeight:v.views>0?"4px":"0"},title:`${new Date(v.date).toLocaleDateString("fr-FR")}: ${v.views} vue(s)`}),E%5===0&&e.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transform -rotate-45 origin-left whitespace-nowrap"},new Date(v.date).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})))}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Taux de conversion"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 dark:text-white"},g.totalViews>0?(g.whatsappClicks/g.totalViews*100).toFixed(1):0,"%"),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Vues  Contacts")),e.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Taux d'engagement"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 dark:text-white"},(g.totalViews||0)>0?((g.favoritesCount||0)/g.totalViews*100).toFixed(1):0,"%"),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Vues  Favoris")),e.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1"},"Taux de vente"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 dark:text-white"},g.whatsappClicks>0?(g.salesCount/g.whatsappClicks*100).toFixed(1):0,"%"),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Contacts  Ventes")))))))}const Dm=12,Yc={all:"Toutes",pending:"En attente",approved:"Approuves",rejected:"Rejetes",disabled:"Dsactives"},uC={pending:{badge:"bg-amber-500",card:"bg-amber-50 border-amber-200 text-amber-800"},approved:{badge:"bg-emerald-500",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},rejected:{badge:"bg-red-500",card:"bg-red-50 border-red-200 text-red-800"},disabled:{badge:"bg-gray-500",card:"bg-gray-50 border-gray-200 text-gray-700"}},Ex={pending:Xt,approved:ar,rejected:jt,disabled:sf},pC={pending:"Annonce en attente de validation aprs paiement.",approved:"Annonce valide et visible par les acheteurs.",rejected:"Annonce rejete. Consultez le support pour plus de dtails.",disabled:"Annonce dsactive. Elle n'est plus visible par les acheteurs."},ei=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Xc=t=>{if(!t)return"";const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})},fC=()=>({code:"",appliesTo:"boutique",productId:"",discountType:"percentage",discountValue:"",usageLimit:"10",startDate:"",endDate:"",isActive:!0});function uH(){const{user:t}=u.useContext(Sr),{showToast:r}=ms(),a=cs(),n=rs(768),s=t?.accountType==="shop",[o,l]=u.useState([]),[c,m]=u.useState(!0),[p,f]=u.useState(""),[g,b]=u.useState(!1),[x,v]=u.useState(null),[E,y]=u.useState(1),[w,k]=u.useState("all"),[C,A]=u.useState(""),[S,P]=u.useState(new Set),[T,O]=u.useState(!1),[R,D]=u.useState("multiple"),[$,j]=u.useState(""),[K,H]=u.useState(""),[V,q]=u.useState([]),[Y,z]=u.useState(""),[L,Q]=u.useState(""),[B,ae]=u.useState(""),[te,ge]=u.useState(""),[ue,Ee]=u.useState([]),[fe,re]=u.useState("all"),[U,W]=u.useState("all"),[me,ne]=u.useState("date-desc"),[ee,ve]=u.useState(!1),[be,J]=u.useState([]),[Ge,je]=u.useState(""),[tt,At]=u.useState(null),[He,Tt]=u.useState("grid"),[Re,et]=u.useState(null),[gt,Ze]=u.useState(!1),[xt,Dt]=u.useState([]),[nt,Me]=u.useState(!1),[Qe,wt]=u.useState("active"),[lt,we]=u.useState(fC),[vt,pt]=u.useState(!1),Le=async(G=Qe)=>{if(!s){Dt([]);return}Me(!0);try{const{data:Z}=await oe.get("/marketplace-promo-codes/my",{params:{page:1,limit:20,status:G}});Dt(Array.isArray(Z?.items)?Z.items:[])}catch(Z){Z?.response?.status!==403&&r(Z.response?.data?.message||"Impossible de charger les codes promo.",{variant:"error"}),Dt([])}finally{Me(!1)}},pe=async G=>{if(G.preventDefault(),!s)return;const Z=lt.startDate?new Date(lt.startDate):null,le=lt.endDate?new Date(lt.endDate):null;if(!Z||Number.isNaN(Z.getTime())||!le||Number.isNaN(le.getTime())){r("Veuillez renseigner les dates de dbut et fin.",{variant:"error"});return}if(le<=Z){r("La date de fin doit tre postrieure  la date de dbut.",{variant:"error"});return}if(lt.appliesTo==="product"&&!lt.productId){r("Veuillez slectionner un produit pour un code produit.",{variant:"error"});return}pt(!0);try{await oe.post("/marketplace-promo-codes/my",{code:lt.code.trim().toUpperCase(),appliesTo:lt.appliesTo,productId:lt.appliesTo==="product"?lt.productId:null,discountType:lt.discountType,discountValue:Number(lt.discountValue||0),usageLimit:Number(lt.usageLimit||1),startDate:Z.toISOString(),endDate:le.toISOString(),isActive:!!lt.isActive}),r("Code promo cr avec succs.",{variant:"success"}),we(fC()),await Promise.all([Le(Qe),ft()])}catch(_e){r(_e.response?.data?.message||"Impossible de crer le code promo.",{variant:"error"})}finally{pt(!1)}},Pe=async G=>{if(G?.id)try{await oe.patch(`/marketplace-promo-codes/my/${G.id}/toggle`,{isActive:!G.isActive}),r(G.isActive?"Code promo dsactiv.":"Code promo activ.",{variant:"success"}),await Promise.all([Le(Qe),ft()])}catch(Z){r(Z.response?.data?.message||"Impossible de modifier ce code promo.",{variant:"error"})}},ft=async()=>{m(!0),f(""),s&&Ze(!0);try{const G=[oe.get("/products")];s&&G.push(oe.get("/marketplace-promo-codes/my/analytics"));const[Z,le]=await Promise.allSettled(G);if(Z.status==="fulfilled"){const _e=Z.value?.data;l(Array.isArray(_e)?_e:[])}else throw Z.reason;s&&le?.status==="fulfilled"?et(le.value?.data||null):et(null),y(1)}catch(G){f(G.response?.data?.message||G.message||"Impossible de charger vos annonces."),r(G.response?.data?.message||G.message||"Erreur de chargement",{variant:"error"})}finally{m(!1),s&&Ze(!1)}};u.useEffect(()=>{ft(),ht()},[s]),u.useEffect(()=>{s&&Le(Qe)},[s,Qe]);const ht=async()=>{try{const G=await Br.get("userDashboard_savedFilters");G&&Array.isArray(G)&&J(G)}catch(G){console.error("Error loading saved filters:",G)}},Lt=async()=>{if(!Ge.trim()){r("Veuillez entrer un nom pour ce filtre",{variant:"error"});return}const G={id:Date.now().toString(),name:Ge.trim(),searchQuery:$,selectedCategories:V,priceMin:Y,priceMax:L,dateFrom:B,dateTo:te,selectedStatuses:ue,boostedFilter:fe,installmentFilter:U,sortBy:me,createdAt:new Date().toISOString()};try{const Z=[...be,G];await Br.set("userDashboard_savedFilters",Z),J(Z),je(""),r("Filtre sauvegard avec succs",{variant:"success"})}catch(Z){console.error("Error saving filter:",Z),r("Erreur lors de la sauvegarde",{variant:"error"})}},nr=G=>{j(G.searchQuery||""),H(G.searchQuery||""),q(G.selectedCategories||[]),z(G.priceMin||""),Q(G.priceMax||""),ae(G.dateFrom||""),ge(G.dateTo||""),Ee(G.selectedStatuses||[]),re(G.boostedFilter||"all"),W(G.installmentFilter||"all"),ne(G.sortBy||"date-desc"),G.selectedStatuses&&G.selectedStatuses.length>0?k("custom"):k("all"),r(`Filtre "${G.name}" charg`,{variant:"success"})},er=async G=>{try{const Z=be.filter(le=>le.id!==G);await Br.set("userDashboard_savedFilters",Z),J(Z),r("Filtre supprim",{variant:"success"})}catch(Z){console.error("Error deleting filter:",Z),r("Erreur lors de la suppression",{variant:"error"})}},Nt=()=>{j(""),H(""),q([]),z(""),Q(""),ae(""),ge(""),Ee([]),re("all"),W("all"),ne("date-desc"),k("all"),r("Filtres rinitialiss",{variant:"success"})},sr=()=>{b(!1),v(null)},Rt=async(G,Z)=>{A(G);try{await oe.patch(`/products/${G}/${Z}`),await ft(),r(Z==="disable"?"Annonce dsactive avec succs.":"Annonce ractive avec succs.",{variant:"success"})}catch(le){r(le.response?.data?.message||le.message||"Erreur lors de la mise  jour",{variant:"error"})}finally{A("")}},zt=u.useMemo(()=>{const G=o.length,Z=o.filter(Se=>Se.status==="pending").length,le=o.filter(Se=>Se.status==="approved").length,_e=o.filter(Se=>Se.status==="rejected").length,Be=o.filter(Se=>Se.status==="disabled").length,Te=o.reduce((Se,Je)=>Se+Number(Je.price||0),0);return{total:G,pending:Z,approved:le,rejected:_e,disabled:Be,totalValue:Te}},[o]);u.useEffect(()=>{const G=setTimeout(()=>{j(K.trim())},400);return()=>clearTimeout(G)},[K]);const mr=u.useMemo(()=>{const G=new Set;return o.forEach(Z=>{Z.category&&G.add(Z.category)}),Array.from(G).sort()},[o]),Mr=u.useMemo(()=>o.filter(G=>G?.status==="approved").map(G=>({id:G._id||G.id,title:G.title||"Produit"})).filter(G=>!!G.id),[o]),br=u.useMemo(()=>[...o].filter(G=>G.status==="approved").map(G=>{const Z=Number(G.favoritesCount||0),le=Number(G.whatsappClicks||0),_e=Number(G.salesCount||0),Be=Z*.4+le*.4+_e*20;return{...G,performanceScore:Be}}).sort((G,Z)=>Z.performanceScore-G.performanceScore).slice(0,5).map(G=>G._id||G.id),[o]),or=u.useMemo(()=>{let G=[...o];if($){const Z=$.toLowerCase();G=G.filter(le=>le.title?.toLowerCase().includes(Z)||le.description?.toLowerCase().includes(Z))}if(V.length>0&&(G=G.filter(Z=>V.includes(Z.category))),Y){const Z=Number(Y);isNaN(Z)||(G=G.filter(le=>Number(le.price||0)>=Z))}if(L){const Z=Number(L);isNaN(Z)||(G=G.filter(le=>Number(le.price||0)<=Z))}if(B){const Z=new Date(B);isNaN(Z.getTime())||(G=G.filter(le=>new Date(le.createdAt)>=Z))}if(te){const Z=new Date(te);Z.setHours(23,59,59,999),isNaN(Z.getTime())||(G=G.filter(le=>new Date(le.createdAt)<=Z))}return ue.length>0?G=G.filter(Z=>ue.includes(Z.status)):w!=="all"&&w!=="custom"&&(G=G.filter(Z=>Z.status===w)),fe==="boosted"?G=G.filter(Z=>Z.boosted===!0):fe==="non-boosted"&&(G=G.filter(Z=>Z.boosted!==!0)),U==="enabled"?G=G.filter(Z=>Z.installmentEnabled===!0):U==="disabled"&&(G=G.filter(Z=>Z.installmentEnabled!==!0)),G.sort((Z,le)=>{switch(me){case"date-desc":return new Date(le.createdAt||0)-new Date(Z.createdAt||0);case"date-asc":return new Date(Z.createdAt||0)-new Date(le.createdAt||0);case"price-desc":return Number(le.price||0)-Number(Z.price||0);case"price-asc":return Number(Z.price||0)-Number(le.price||0);case"title-asc":return(Z.title||"").localeCompare(le.title||"","fr");case"title-desc":return(le.title||"").localeCompare(Z.title||"","fr");case"status-asc":return(Z.status||"").localeCompare(le.status||"","fr");case"status-desc":return(le.status||"").localeCompare(Z.status||"","fr");default:return 0}}),G},[o,$,V,Y,L,B,te,ue,w,fe,U,me]),Gt=or.length?Math.ceil(or.length/Dm):1,Zt=u.useMemo(()=>{const G=(E-1)*Dm;return or.slice(G,G+Dm)},[or,E]),se=or.length?(E-1)*Dm+1:0,dt=Math.min(or.length,E*Dm),ut=G=>{const Z=Math.min(Math.max(G,1),Gt);y(Z),window.scrollTo({top:0,behavior:"smooth"})};u.useEffect(()=>{y(1),P(new Set)},[w,$,V,Y,L,B,te,ue,fe,U,me]),u.useEffect(()=>{if(R==="single"&&S.size>1){const G=Array.from(S)[0];P(new Set([G]))}},[R]);const It=G=>{G&&P(R==="single"?Z=>Z.has(G)?new Set:new Set([G]):Z=>{const le=new Set(Z);return le.has(G)?le.delete(G):le.add(G),le})},de=()=>{if(R==="single")D("multiple"),P(new Set(Zt.map(G=>G._id||G.id).filter(Boolean)));else{const G=Zt.map(Z=>Z._id||Z.id).filter(Boolean);S.size===G.length&&G.every(Z=>S.has(Z))?P(new Set):P(new Set(G))}},De=()=>{P(new Set)},F=async()=>{if(S.size!==0&&confirm(`Ractiver ${S.size} produit(s) ?`)){O(!0);try{await oe.post("/products/bulk/enable",{productIds:Array.from(S)}),await ft(),De(),r(`${S.size} produit(s) ractiv(s) avec succs.`,{variant:"success"})}catch(G){r(G.response?.data?.message||G.message||"Erreur lors de la ractivation",{variant:"error"})}finally{O(!1)}}},ie=async()=>{if(S.size!==0&&confirm(`Dsactiver ${S.size} produit(s) ?`)){O(!0);try{await oe.post("/products/bulk/disable",{productIds:Array.from(S)}),await ft(),De(),r(`${S.size} produit(s) dsactiv(s) avec succs.`,{variant:"success"})}catch(G){r(G.response?.data?.message||G.message||"Erreur lors de la dsactivation",{variant:"error"})}finally{O(!1)}}},he=async()=>{if(S.size!==0&&confirm(`Supprimer dfinitivement ${S.size} produit(s) ? Cette action est irrversible.`)){O(!0);try{await oe.post("/products/bulk/delete",{productIds:Array.from(S)}),await ft(),De(),r(`${S.size} produit(s) supprim(s) avec succs.`,{variant:"success"})}catch(G){r(G.response?.data?.message||G.message||"Erreur lors de la suppression",{variant:"error"})}finally{O(!1)}}},ke=()=>{if(S.size===0){r("Veuillez slectionner au moins un produit.",{variant:"error"});return}const G=o.filter(Je=>S.has(Je._id)),Z=["Titre","Prix (FCFA)","Catgorie","Statut","Date de cration"],le=G.map(Je=>[Je.title||"",Je.price||0,Je.category||"",Yc[Je.status]||Je.status,Xc(Je.createdAt)]),_e=[Z.join(","),...le.map(Je=>Je.map(qt=>`"${String(qt).replace(/"/g,'""')}"`).join(","))].join(`
`),Be=new Blob(["\uFEFF"+_e],{type:"text/csv;charset=utf-8;"}),Te=URL.createObjectURL(Be),Se=document.createElement("a");Se.href=Te,Se.download=`mes_annonces_${new Date().toISOString().split("T")[0]}.csv`,Se.click(),URL.revokeObjectURL(Te),r("Export CSV russi !",{variant:"success"})},mt=()=>{if(S.size===0){r("Veuillez slectionner au moins un produit.",{variant:"error"});return}const G=o.filter(_e=>S.has(_e._id)),Z=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <title>Mes Annonces - ${new Date().toLocaleDateString("fr-FR")}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #4f46e5; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4f46e5; color: white; }
            tr:nth-child(even) { background-color: #f2f2f2; }
          </style>
        </head>
        <body>
          <h1>Mes Annonces</h1>
          <p>Date d'export: ${new Date().toLocaleDateString("fr-FR")}</p>
          <p>Nombre d'annonces: ${G.length}</p>
          <table>
            <thead>
              <tr>
                <th>Titre</th>
                <th>Prix (FCFA)</th>
                <th>Catgorie</th>
                <th>Statut</th>
                <th>Date de cration</th>
              </tr>
            </thead>
            <tbody>
              ${G.map(_e=>`
                <tr>
                  <td>${_e.title||""}</td>
                  <td>${ei(_e.price||0)}</td>
                  <td>${_e.category||""}</td>
                  <td>${Yc[_e.status]||_e.status}</td>
                  <td>${Xc(_e.createdAt)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,le=window.open("","_blank");le&&(le.document.write(Z),le.document.close(),le.focus(),setTimeout(()=>{le.print()},250))};return c&&o.length===0?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-12"},e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-xl w-64 animate-pulse"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded-lg w-96 animate-pulse"})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(G=>e.createElement("div",{key:G,className:"h-32 bg-white rounded-2xl border border-gray-100 animate-pulse"}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},[1,2,3,4,5,6].map(G=>e.createElement("div",{key:G,className:"h-64 bg-white rounded-2xl border border-gray-100 animate-pulse"})))))):e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"bg-indigo-600 text-white"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},e.createElement("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(Ft,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-white/80 uppercase tracking-wide"},"Mes annonces"),e.createElement("h1",{className:"text-3xl font-bold"},"Gestion de mes produits"))),e.createElement("p",{className:"text-white/90 text-sm max-w-2xl"},"Grez vos annonces, suivez leur statut et publiez de nouveaux produits pour atteindre plus d'acheteurs.")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:ft,disabled:c,className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all disabled:opacity-50"},e.createElement(Cs,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Actualiser"),e.createElement("button",{type:"button",onClick:()=>{v(null),b(!0)},className:"inline-flex items-center gap-2 rounded-xl bg-white text-indigo-600 px-4 py-2.5 text-sm font-semibold hover:bg-white/90 transition-all shadow-lg"},e.createElement(Bo,{className:"w-4 h-4"}),"Publier une annonce"))))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 pb-12"},!c&&zt.total>0&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(Ft,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},zt.total)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total annonces"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Toutes vos annonces")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-emerald-600"},e.createElement(ar,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},zt.approved)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Approuves"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Annonces actives")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-amber-600"},e.createElement(Xt,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},zt.pending)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"En attente"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"En cours de validation")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-purple-600"},e.createElement(Ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},ei(zt.totalValue))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Valeur totale"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Valeur de vos annonces"))),!c&&(gt||Re)&&e.createElement("div",{className:"space-y-4 mb-8"},Re?.gamification?.isMostGenerousOfMonth?e.createElement("div",{className:"rounded-2xl border border-amber-200 bg-gradient-to-r from-amber-50 via-yellow-50 to-amber-50 p-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 rounded-xl bg-amber-500 flex items-center justify-center"},e.createElement(ko,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-amber-900"},"Badge vendeur"),e.createElement("p",{className:"text-base font-bold text-amber-800"},"Boutique la plus gnreuse du mois")))):Re?.gamification?.rank?e.createElement("div",{className:"rounded-2xl border border-indigo-100 bg-indigo-50/60 p-4"},e.createElement("p",{className:"text-sm font-semibold text-indigo-900"},"Classement promo du mois"),e.createElement("p",{className:"text-sm text-indigo-700"},"Position #",Re.gamification.rank," sur ",Re.gamification.totalParticipants||0," boutiques.")):null,e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(Ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},ei(Re?.metrics?.promoRevenueTotal||0))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Revenus via promo"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Chiffre daffaires des commandes promo")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-emerald-600"},e.createElement(ba,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Number(Re?.metrics?.clientsAcquiredViaPromo||0).toLocaleString("fr-FR"))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Clients acquis"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Premire commande obtenue via promo")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-rose-600"},e.createElement(Pr,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Number(Re?.metrics?.conversionRate||0).toLocaleString("fr-FR"),"%")),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Taux conversion"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Part des commandes avec code promo")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-amber-600"},e.createElement(mn,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Number(Re?.metrics?.promoOrders||0).toLocaleString("fr-FR"))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Commandes promo"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Sur ",Number(Re?.metrics?.totalOrders||0).toLocaleString("fr-FR")," commandes")))),!c&&s&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6 mb-8 space-y-5"},e.createElement("div",{className:"flex items-center justify-between gap-3 flex-wrap"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Gestion des codes promo"),e.createElement("p",{className:"text-sm text-gray-500"},"Crez des promos pour toute la boutique ou pour un produit spcifique.")),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{htmlFor:"promo-status-filter",className:"text-xs font-semibold text-gray-500"},"Filtre"),e.createElement("select",{id:"promo-status-filter",value:Qe,onChange:G=>wt(G.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm"},e.createElement("option",{value:"active"},"Actifs"),e.createElement("option",{value:"all"},"Tous"),e.createElement("option",{value:"inactive"},"Inactifs"),e.createElement("option",{value:"expired"},"Expirs"),e.createElement("option",{value:"upcoming"}," venir")))),e.createElement("form",{onSubmit:pe,className:"rounded-2xl border border-indigo-100 bg-indigo-50/40 p-4 space-y-4"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},e.createElement("input",{type:"text",value:lt.code,onChange:G=>we(Z=>({...Z,code:G.target.value.toUpperCase()})),placeholder:"Code (ex: FIRST10)",className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0}),e.createElement("select",{value:lt.appliesTo,onChange:G=>we(Z=>({...Z,appliesTo:G.target.value,productId:""})),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm"},e.createElement("option",{value:"boutique"},"Toute la boutique"),e.createElement("option",{value:"product"},"Produit spcifique")),e.createElement("select",{value:lt.discountType,onChange:G=>we(Z=>({...Z,discountType:G.target.value})),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm"},e.createElement("option",{value:"percentage"},"Pourcentage"),e.createElement("option",{value:"fixed"},"Montant fixe (FCFA)")),e.createElement("input",{type:"number",min:"1",value:lt.discountValue,onChange:G=>we(Z=>({...Z,discountValue:G.target.value})),placeholder:lt.discountType==="percentage"?"Ex: 20 (%)":"Ex: 5000 FCFA",className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0}),e.createElement("input",{type:"number",min:"1",value:lt.usageLimit,onChange:G=>we(Z=>({...Z,usageLimit:G.target.value})),placeholder:"Limite d'utilisation",className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0}),e.createElement("input",{type:"date",value:lt.startDate,onChange:G=>we(Z=>({...Z,startDate:G.target.value})),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0}),e.createElement("input",{type:"date",value:lt.endDate,onChange:G=>we(Z=>({...Z,endDate:G.target.value})),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0}),lt.appliesTo==="product"?e.createElement("select",{value:lt.productId,onChange:G=>we(Z=>({...Z,productId:G.target.value})),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",required:!0},e.createElement("option",{value:""},"Slectionner un produit"),Mr.map(G=>e.createElement("option",{key:G.id,value:G.id},G.title))):e.createElement("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-600"},e.createElement(Wa,{className:"w-4 h-4 text-indigo-600"}),"Promo applique  tous vos produits")),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700"},e.createElement("input",{type:"checkbox",checked:lt.isActive,onChange:G=>we(Z=>({...Z,isActive:G.target.checked})),className:"rounded border-gray-300"}),"Activer immdiatement"),e.createElement("button",{type:"submit",disabled:vt,className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-60"},vt?"Cration...":"Crer le code promo"))),e.createElement("div",{className:"space-y-2"},nt?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des codes promo..."):xt.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun code promo pour ce filtre."):xt.map(G=>e.createElement("div",{key:G.id,className:"rounded-xl border border-gray-200 px-4 py-3 flex items-center justify-between gap-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-bold text-gray-900 truncate"},G.code),e.createElement("p",{className:"text-xs text-gray-500"},G.appliesTo==="boutique"?"Boutique":"Produit"," "," ",G.discountType==="percentage"?`${Number(G.discountValue||0).toLocaleString("fr-FR")}%`:`${ei(G.discountValue||0)}`,"  ","Utilisation: ",G.usedCount," / ",G.usageLimit),e.createElement("p",{className:"text-xs text-gray-500"},Xc(G.startDate),"  ",Xc(G.endDate))),e.createElement("button",{type:"button",onClick:()=>Pe(G),className:`rounded-lg px-3 py-1.5 text-xs font-semibold ${G.isActive?"bg-red-50 text-red-700 border border-red-200":"bg-emerald-50 text-emerald-700 border border-emerald-200"}`},G.isActive?"Dsactiver":"Activer"))))),!c&&o.length>0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6 mb-8"},e.createElement("div",{className:"mb-6"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.createElement("input",{type:"text",value:K,onChange:G=>H(G.target.value),placeholder:"Rechercher par titre ou description...",className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),K&&e.createElement("button",{type:"button",onClick:()=>{H(""),j("")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},e.createElement(Ba,{className:"w-5 h-5"})))),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("button",{type:"button",onClick:()=>ve(!ee),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-50 hover:bg-gray-100 border border-gray-200 text-sm font-semibold text-gray-700 transition-all"},e.createElement(ls,{className:"w-4 h-4"}),"Filtres avancs",ee?e.createElement(wo,{className:"w-4 h-4"}):e.createElement(Za,{className:"w-4 h-4"})),($||V.length>0||Y||L||B||te||ue.length>0||fe!=="all"||U!=="all")&&e.createElement("button",{type:"button",onClick:Nt,className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-red-50 hover:bg-red-100 border border-red-200 text-sm font-semibold text-red-700 transition-all"},e.createElement(Ba,{className:"w-4 h-4"}),"Rinitialiser"),e.createElement("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 border border-gray-200 dark:border-gray-700"},e.createElement("button",{type:"button",onClick:()=>Tt("grid"),className:`p-2 rounded-lg transition-all ${He==="grid"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,title:"Vue grille"},e.createElement(x2,{className:"w-4 h-4"})),e.createElement("button",{type:"button",onClick:()=>Tt("list"),className:`p-2 rounded-lg transition-all ${He==="list"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,title:"Vue liste"},e.createElement(E2,{className:"w-4 h-4"})))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{className:"text-sm font-semibold text-gray-700"},"Trier par:"),e.createElement("select",{value:me,onChange:G=>ne(G.target.value),className:"px-4 py-2 rounded-xl bg-gray-50 border border-gray-200 text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"},e.createElement("option",{value:"date-desc"},"Date (rcent)"),e.createElement("option",{value:"date-asc"},"Date (ancien)"),e.createElement("option",{value:"price-desc"},"Prix (dcroissant)"),e.createElement("option",{value:"price-asc"},"Prix (croissant)"),e.createElement("option",{value:"title-asc"},"Titre (A-Z)"),e.createElement("option",{value:"title-desc"},"Titre (Z-A)"),e.createElement("option",{value:"status-asc"},"Statut (A-Z)"),e.createElement("option",{value:"status-desc"},"Statut (Z-A)")))),ee&&e.createElement("div",{className:"border-t border-gray-200 pt-6 space-y-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-3"},"Catgories"),e.createElement("div",{className:"flex flex-wrap gap-2"},mr.map(G=>{const Z=V.includes(G),le=to.flatMap(_e=>_e.options).find(_e=>_e.value===G);return e.createElement("button",{key:G,type:"button",onClick:()=>{q(Z?V.filter(_e=>_e!==G):[...V,G])},className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all ${Z?"bg-indigo-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`},le?.label||G)}))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-3"},"Plage de prix (FCFA)"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("input",{type:"number",value:Y,onChange:G=>z(G.target.value),placeholder:"Prix minimum",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})),e.createElement("div",null,e.createElement("input",{type:"number",value:L,onChange:G=>Q(G.target.value),placeholder:"Prix maximum",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-3"},"Plage de dates"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-500 mb-1"},"Du"),e.createElement("input",{type:"date",value:B,onChange:G=>ae(G.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-500 mb-1"},"Au"),e.createElement("input",{type:"date",value:te,onChange:G=>ge(G.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-3"},"Statuts (slection multiple)"),e.createElement("div",{className:"flex flex-wrap gap-2"},Object.entries(Yc).filter(([G])=>G!=="all").map(([G,Z])=>{const le=ue.includes(G),_e=Ex[G];return e.createElement("button",{key:G,type:"button",onClick:()=>{le?(Ee(ue.filter(Be=>Be!==G)),ue.length===1&&k("all")):(Ee([...ue,G]),k("custom"))},className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all ${le?"bg-indigo-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`},e.createElement(_e,{className:"w-4 h-4"}),e.createElement("span",null,Z))}))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-3"},"Paiement par tranche"),e.createElement("div",{className:"flex flex-wrap gap-2"},[{key:"all",label:"Tous les produits"},{key:"enabled",label:"Tranche active"},{key:"disabled",label:"Sans tranche"}].map(G=>{const Z=U===G.key;return e.createElement("button",{key:G.key,type:"button",onClick:()=>W(G.key),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all ${Z?"bg-indigo-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200"}`},G.label)}))),e.createElement("div",{className:"border-t border-gray-200 pt-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("input",{type:"text",value:Ge,onChange:G=>je(G.target.value),placeholder:"Nom du filtre...",className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.createElement("button",{type:"button",onClick:Lt,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-all"},e.createElement(vc,{className:"w-4 h-4"}),"Sauvegarder")),be.length>0&&e.createElement("div",{className:"mt-4"},e.createElement("label",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide"},"Filtres sauvegards"),e.createElement("div",{className:"flex flex-wrap gap-2"},be.map(G=>e.createElement("div",{key:G.id,className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-xl"},e.createElement("button",{type:"button",onClick:()=>nr(G),className:"text-sm font-semibold text-gray-700 hover:text-indigo-600 transition-colors"},G.name),e.createElement("button",{type:"button",onClick:()=>er(G.id),className:"text-gray-400 hover:text-red-600 transition-colors"},e.createElement(jt,{className:"w-4 h-4"}))))))))),!c&&o.length>0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 mb-8"},e.createElement("div",{className:"flex flex-wrap gap-2"},Object.entries(Yc).map(([G,Z])=>{const le=w===G&&ue.length===0,_e=G==="all"?zt.total:zt[G]||0,Be=G!=="all"?Ex[G]:Ft;return e.createElement("button",{key:G,type:"button",onClick:()=>{k(G),Ee([])},className:`group relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 ${le?"bg-indigo-600 text-white shadow-lg scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200"}`},G!=="all"&&e.createElement(Be,{className:"w-4 h-4"}),e.createElement("span",null,Z),_e>0&&e.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${le?"bg-white/20 text-white":"bg-indigo-100 text-indigo-700"}`},_e))}))),p&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 mb-8"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-bold text-red-800 mb-1"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},p)))),!c&&o.length===0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-indigo-100 flex items-center justify-center mb-4"},e.createElement(Ft,{className:"w-10 h-10 text-indigo-600"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucune annonce"),e.createElement("p",{className:"text-sm text-gray-500 mb-6 max-w-md mx-auto"},"Commencez  vendre en publiant votre premire annonce. C'est simple, rapide et gratuit !"),e.createElement("button",{type:"button",onClick:()=>{v(null),b(!0)},className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all"},e.createElement(Bo,{className:"w-4 h-4"}),"Publier ma premire annonce")),!c&&o.length>0&&or.length===0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-gray-100 flex items-center justify-center mb-4"},e.createElement(ls,{className:"w-10 h-10 text-gray-400"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucun rsultat trouv"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},"Aucune annonce ne correspond  vos critres de recherche et filtrage."),e.createElement("button",{type:"button",onClick:Nt,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl border-2 border-indigo-200 bg-white text-indigo-600 font-semibold hover:bg-indigo-50 transition-all"},"Rinitialiser les filtres")),!c&&Zt.length>0&&S.size>0&&e.createElement("div",{className:"bg-indigo-600 text-white rounded-2xl border border-indigo-700 shadow-lg p-4 mb-6"},e.createElement("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(k0,{className:"w-5 h-5"}),e.createElement("span",{className:"font-semibold"},S.size," produit",S.size>1?"s":""," slectionn",S.size>1?"s":"")),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("button",{type:"button",onClick:F,disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(dx,{className:"w-4 h-4"}),"Ractiver"),e.createElement("button",{type:"button",onClick:ie,disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(sf,{className:"w-4 h-4"}),"Dsactiver"),e.createElement("button",{type:"button",onClick:he,disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(is,{className:"w-4 h-4"}),"Supprimer"),e.createElement("button",{type:"button",onClick:ke,disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white font-semibold hover:bg-white/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(zo,{className:"w-4 h-4"}),"CSV"),e.createElement("button",{type:"button",onClick:mt,disabled:T,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white font-semibold hover:bg-white/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(Pn,{className:"w-4 h-4"}),"PDF"),e.createElement("button",{type:"button",onClick:De,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 text-white font-semibold hover:bg-white/20 transition-all"},e.createElement(jt,{className:"w-4 h-4"}),"Annuler")))),!c&&Zt.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 bg-white rounded-2xl border border-gray-100 shadow-sm p-4"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-gray-50 p-1"},e.createElement("button",{type:"button",onClick:()=>{D("single"),P(new Set)},className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${R==="single"?"bg-indigo-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Slection unique"},"Un seul"),e.createElement("button",{type:"button",onClick:()=>{D("multiple"),P(new Set)},className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${R==="multiple"?"bg-indigo-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Slection multiple"},"Plusieurs")),R==="multiple"&&e.createElement("button",{type:"button",onClick:de,className:"flex items-center gap-2 text-sm font-semibold text-gray-700 hover:text-indigo-600 transition-colors"},S.size===Zt.length?e.createElement(k0,{className:"w-5 h-5 text-indigo-600"}):e.createElement(ux,{className:"w-5 h-5 text-gray-400"}),e.createElement("span",null,S.size===Zt.length?"Tout dslectionner":`Tout slectionner (${Zt.length})`))),S.size>0&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-sm text-gray-600"},S.size," produit",S.size>1?"s":""," slectionn",S.size>1?"s":"",R==="multiple"&&` sur ${Zt.length}`))),e.createElement("div",{className:He==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"},Zt.map(G=>{const Z=Ex[G.status]||Xt,le=uC[G.status]||uC.pending,_e=Array.isArray(G.images)&&G.images.length>0?G.images[0]:null,Be=G._id||G.id;if(!Be)return null;const Te=S.has(Be),Se=br.includes(Be);return He==="list"?e.createElement("div",{key:Be,className:`bg-white rounded-xl border-2 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden relative ${Te?"border-indigo-500 ring-2 ring-indigo-200":Se?"border-yellow-400 ring-2 ring-yellow-200":"border-gray-100"}`},e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 p-4"},e.createElement("div",{className:"absolute top-4 left-4 z-30"},e.createElement("button",{type:"button",onClick:Je=>{Je.stopPropagation(),Je.preventDefault(),Be&&It(Be)},onMouseDown:Je=>{Je.stopPropagation(),Je.preventDefault()},className:`p-2 rounded-lg backdrop-blur-sm transition-all cursor-pointer ${Te?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg":"bg-black/60 text-white hover:bg-black/80"}`,style:{pointerEvents:"auto"},"aria-label":Te?"Dslectionner":"Slectionner"},Te?e.createElement(k0,{className:"w-4 h-4"}):e.createElement(ux,{className:"w-4 h-4"}))),Se&&e.createElement("div",{className:"absolute top-4 right-4 z-20"},e.createElement("div",{className:"px-2 py-1 rounded-lg bg-gradient-to-r from-yellow-400 to-yellow-500 text-white text-xs font-bold shadow-lg flex items-center gap-1"},e.createElement(Pr,{className:"w-3 h-3"}),"Top")),e.createElement("div",{className:"relative w-full sm:w-48 h-48 bg-gray-100 overflow-hidden rounded-lg flex-shrink-0"},_e?e.createElement("img",{src:_e,alt:G.title,className:"w-full h-full object-cover",loading:"lazy"}):e.createElement("div",{className:"w-full h-full flex items-center justify-center"},e.createElement(El,{className:"w-12 h-12 text-gray-400"})),e.createElement("div",{className:"absolute top-2 right-2 flex flex-col gap-2"},e.createElement("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-lg ${le.badge} text-white shadow-lg backdrop-blur-sm`},e.createElement(Z,{className:"w-3 h-3"}),e.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},Yc[G.status]||G.status)),G.boosted&&e.createElement("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg backdrop-blur-sm"},e.createElement(Ln,{className:"w-3 h-3"}),e.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},"Boost"))),G.images?.length>1&&e.createElement("div",{className:"absolute top-2 left-2"},e.createElement("div",{className:"px-2 py-1 rounded-lg bg-black/50 backdrop-blur-sm text-white text-xs font-bold"},G.images.length," photo",G.images.length>1?"s":""))),e.createElement("div",{className:"flex-1 flex flex-col gap-3 pt-8 sm:pt-0"},e.createElement("div",{className:"flex-1"},e.createElement("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2"},G.title),e.createElement("div",{className:"flex items-baseline gap-2 mb-3"},e.createElement("span",{className:"text-2xl font-black text-indigo-600"},ei(G.price)),G.priceBeforeDiscount&&G.priceBeforeDiscount>G.price&&e.createElement("span",{className:"text-sm text-gray-400 line-through"},ei(G.priceBeforeDiscount))),e.createElement("div",{className:`rounded-lg border p-2 mb-3 ${le.card}`},e.createElement("p",{className:"text-xs font-medium leading-relaxed"},pC[G.status]||"Statut en cours de mise  jour.")),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3"},G.category&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Ft,{className:"w-3 h-3"}),e.createElement("span",{className:"capitalize"},G.category)),G.boosted&&e.createElement("div",{className:"flex items-center gap-1 text-indigo-600 dark:text-indigo-400 font-semibold"},e.createElement(Ln,{className:"w-3 h-3"}),e.createElement("span",null,"Boost")),G.createdAt&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(dn,{className:"w-3 h-3"}),e.createElement("span",null,Xc(G.createdAt))))),e.createElement("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-100"},G.status==="approved"&&e.createElement(ye,{to:Dr(G),...a,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-indigo-200 bg-indigo-50 text-indigo-700 text-sm font-semibold hover:bg-indigo-100 transition-all"},e.createElement(Jn,{className:"w-4 h-4"}),"Voir"),e.createElement("button",{type:"button",onClick:()=>{At({id:Be,title:G.title})},className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-purple-200 bg-purple-50 text-purple-700 text-sm font-semibold hover:bg-purple-100 transition-all"},e.createElement(mn,{className:"w-4 h-4"}),"Analytics"),e.createElement("button",{type:"button",onClick:()=>{v(G),b(!0)},className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-gray-200 bg-white text-gray-700 text-sm font-semibold hover:bg-gray-50 transition-all"},e.createElement(fd,{className:"w-4 h-4"}),"Modifier"),G.status!=="disabled"?e.createElement("button",{onClick:()=>Rt(G.slug||G._id,"disable"),disabled:C===G._id,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-red-200 bg-red-50 text-red-700 text-sm font-semibold hover:bg-red-100 transition-all disabled:opacity-50",type:"button"},e.createElement(sf,{className:"w-4 h-4"}),"Dsactiver"):e.createElement("button",{onClick:()=>Rt(G.slug||G._id,"enable"),disabled:C===G._id,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold hover:bg-emerald-100 transition-all disabled:opacity-50",type:"button"},e.createElement(dx,{className:"w-4 h-4"}),"Ractiver")),G.status!=="disabled"&&e.createElement("div",{className:"pt-2 border-t border-gray-100"},e.createElement(dC,{product:G,onSubmitted:ft}))))):e.createElement("div",{key:Be,className:`bg-white rounded-2xl border-2 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden relative ${Te?"border-indigo-500 ring-2 ring-indigo-200":Se?"border-yellow-400 ring-2 ring-yellow-200":"border-gray-100"}`},Se&&e.createElement("div",{className:"absolute top-3 right-3 z-20"},e.createElement("div",{className:"px-2 py-1 rounded-lg bg-gradient-to-r from-yellow-400 to-yellow-500 text-white text-xs font-bold shadow-lg flex items-center gap-1"},e.createElement(Pr,{className:"w-3 h-3"}),"Top")),e.createElement("div",{className:"absolute top-3 left-3 z-30"},e.createElement("button",{type:"button",onClick:Je=>{Je.stopPropagation(),Je.preventDefault(),Be&&It(Be)},onMouseDown:Je=>{Je.stopPropagation(),Je.preventDefault()},className:`p-2.5 rounded-lg backdrop-blur-sm transition-all cursor-pointer ${Te?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg":"bg-black/60 text-white hover:bg-black/80"}`,style:{pointerEvents:"auto"},"aria-label":Te?"Dslectionner":"Slectionner"},Te?e.createElement(k0,{className:"w-4 h-4"}):e.createElement(ux,{className:"w-4 h-4"}))),e.createElement("div",{className:"relative aspect-square bg-gray-100 overflow-hidden"},_e?e.createElement("img",{src:_e,alt:G.title,className:"w-full h-full object-cover",loading:"lazy"}):e.createElement("div",{className:"w-full h-full flex items-center justify-center"},e.createElement(El,{className:"w-12 h-12 text-gray-400"})),e.createElement("div",{className:"absolute top-3 right-3 flex flex-col gap-2"},e.createElement("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg ${le.badge} text-white shadow-lg backdrop-blur-sm`},e.createElement(Z,{className:"w-3.5 h-3.5"}),e.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},Yc[G.status]||G.status)),G.boosted&&e.createElement("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg backdrop-blur-sm"},e.createElement(Ln,{className:"w-3.5 h-3.5"}),e.createElement("span",{className:"text-xs font-bold uppercase tracking-wide"},"Boost"))),G.images?.length>1&&e.createElement("div",{className:"absolute top-3 left-3"},e.createElement("div",{className:"px-2 py-1 rounded-lg bg-black/50 backdrop-blur-sm text-white text-xs font-bold"},G.images.length," photo",G.images.length>1?"s":""))),e.createElement("div",{className:"p-5 space-y-4"},e.createElement("div",null,e.createElement("h3",{className:"font-bold text-gray-900 line-clamp-2 mb-2 min-h-[2.5rem]"},G.title),e.createElement("div",{className:"flex items-baseline gap-2"},e.createElement("span",{className:"text-xl font-black text-indigo-600"},ei(G.price)),G.priceBeforeDiscount&&G.priceBeforeDiscount>G.price&&e.createElement("span",{className:"text-sm text-gray-400 line-through"},ei(G.priceBeforeDiscount)))),e.createElement("div",{className:`rounded-xl border p-3 ${le.card}`},e.createElement("p",{className:"text-xs font-medium leading-relaxed"},pC[G.status]||"Statut en cours de mise  jour.")),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500 pt-2 border-t border-gray-100"},G.category&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Ft,{className:"w-3 h-3"}),e.createElement("span",{className:"capitalize"},G.category)),G.boosted&&e.createElement("div",{className:"flex items-center gap-1 text-indigo-600 dark:text-indigo-400 font-semibold"},e.createElement(Ln,{className:"w-3 h-3"}),e.createElement("span",null,"Boost")),G.createdAt&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(dn,{className:"w-3 h-3"}),e.createElement("span",null,Xc(G.createdAt)))),e.createElement("div",{className:"flex flex-wrap gap-2 pt-2"},G.status==="approved"&&e.createElement(ye,{to:Dr(G),...a,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-indigo-200 bg-indigo-50 text-indigo-700 text-sm font-semibold hover:bg-indigo-100 transition-all"},e.createElement(Jn,{className:"w-4 h-4"}),"Voir"),e.createElement("button",{type:"button",onClick:()=>{At({id:Be,title:G.title})},className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-purple-200 bg-purple-50 text-purple-700 text-sm font-semibold hover:bg-purple-100 transition-all"},e.createElement(mn,{className:"w-4 h-4"}),"Analytics"),e.createElement("button",{type:"button",onClick:()=>{v(G),b(!0)},className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-gray-200 bg-white text-gray-700 text-sm font-semibold hover:bg-gray-50 transition-all"},e.createElement(fd,{className:"w-4 h-4"}),"Modifier"),G.status!=="disabled"?e.createElement("button",{onClick:()=>Rt(G.slug||G._id,"disable"),disabled:C===G._id,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-red-200 bg-red-50 text-red-700 text-sm font-semibold hover:bg-red-100 transition-all disabled:opacity-50",type:"button"},e.createElement(sf,{className:"w-4 h-4"}),"Dsactiver"):e.createElement("button",{onClick:()=>Rt(G.slug||G._id,"enable"),disabled:C===G._id,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-emerald-200 bg-emerald-50 text-emerald-700 text-sm font-semibold hover:bg-emerald-100 transition-all disabled:opacity-50",type:"button"},e.createElement(dx,{className:"w-4 h-4"}),"Ractiver")),G.status!=="disabled"&&e.createElement("div",{className:"pt-2 border-t border-gray-100"},e.createElement(dC,{product:G,onSubmitted:ft}))))})),Gt>1&&e.createElement("div",{className:"mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-between bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("p",{className:"text-sm text-gray-600"},"Affichage ",e.createElement("span",{className:"font-bold text-gray-900"},se)," -"," ",e.createElement("span",{className:"font-bold text-gray-900"},dt)," sur"," ",e.createElement("span",{className:"font-bold text-gray-900"},or.length)," annonce",or.length>1?"s":""),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>ut(E-1),disabled:E===1,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all inline-flex items-center gap-2"},e.createElement(Gr,{className:"w-4 h-4"}),"Prcdent"),e.createElement("div",{className:"flex items-center gap-2 px-4"},e.createElement("span",{className:"text-sm font-medium text-gray-700"},"Page ",e.createElement("span",{className:"font-bold text-gray-900"},E)," sur"," ",e.createElement("span",{className:"font-bold text-gray-900"},Gt))),e.createElement("button",{type:"button",onClick:()=>ut(E+1),disabled:E===Gt,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all inline-flex items-center gap-2"},"Suivant",e.createElement(dj,{className:"w-4 h-4"})))))),g&&e.createElement("div",{className:`fixed inset-0 z-50 flex ${n?"flex-col":"items-center justify-center px-4 py-6"}`},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:sr,"aria-hidden":!0}),e.createElement("div",{className:`relative flex flex-col bg-white shadow-2xl overflow-hidden ${n?"w-full h-full max-h-full rounded-none border-0":"w-full max-w-5xl rounded-3xl border border-gray-100 max-h-[90vh]"}`,onClick:G=>G.stopPropagation()},e.createElement("div",{className:`bg-indigo-600 text-white flex-shrink-0 ${n?"px-4 py-4 safe-area-top":"px-6 py-5"}`},e.createElement("div",{className:"flex items-center justify-between gap-3"},e.createElement("div",{className:"flex items-center gap-3 min-w-0"},e.createElement("div",{className:`rounded-xl bg-white/20 backdrop-blur-sm flex-shrink-0 ${n?"p-2.5":"p-3"}`},x?e.createElement(fd,{className:n?"w-5 h-5":"w-6 h-6"}):e.createElement(Bo,{className:n?"w-5 h-5":"w-6 h-6"})),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},x?"Modification":"Nouvelle annonce"),e.createElement("h3",{className:`font-bold mt-0.5 truncate ${n?"text-lg":"text-xl"}`},x?"Modifier une annonce":"Publier une annonce"))),e.createElement("button",{type:"button",onClick:sr,className:`rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center text-white hover:bg-white/20 active:bg-white/30 transition-all touch-manipulation flex-shrink-0 ${n?"min-w-[44px] min-h-[44px] w-11 h-11":"h-10 w-10"}`,"aria-label":"Fermer"},e.createElement(jt,{size:20})))),e.createElement("div",{className:`flex-1 overflow-y-auto min-h-0 ${n?"p-4":"p-6"}`},e.createElement(dH,{initialValues:x,productId:x?._id,onCreated:()=>{ft(),sr(),r("Annonce cre avec succs !",{variant:"success"})},onUpdated:()=>{ft(),sr(),r("Annonce modifie avec succs !",{variant:"success"})}})))),tt&&e.createElement(mH,{productId:tt.id,productTitle:tt.title,onClose:()=>At(null)}))}function $j(t){var r,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(a=$j(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function ta(){for(var t,r,a=0,n="",s=arguments.length;a<s;a++)(t=arguments[a])&&(r=$j(t))&&(n&&(n+=" "),n+=r);return n}var wx,gC;function As(){if(gC)return wx;gC=1;var t=Array.isArray;return wx=t,wx}var Nx,hC;function Lj(){if(hC)return Nx;hC=1;var t=typeof v0=="object"&&v0&&v0.Object===Object&&v0;return Nx=t,Nx}var kx,bC;function Zo(){if(bC)return kx;bC=1;var t=Lj(),r=typeof self=="object"&&self&&self.Object===Object&&self,a=t||r||Function("return this")();return kx=a,kx}var Sx,xC;function hp(){if(xC)return Sx;xC=1;var t=Zo(),r=t.Symbol;return Sx=r,Sx}var Cx,yC;function pH(){if(yC)return Cx;yC=1;var t=hp(),r=Object.prototype,a=r.hasOwnProperty,n=r.toString,s=t?t.toStringTag:void 0;function o(l){var c=a.call(l,s),m=l[s];try{l[s]=void 0;var p=!0}catch{}var f=n.call(l);return p&&(c?l[s]=m:delete l[s]),f}return Cx=o,Cx}var Ax,vC;function fH(){if(vC)return Ax;vC=1;var t=Object.prototype,r=t.toString;function a(n){return r.call(n)}return Ax=a,Ax}var _x,EC;function Ll(){if(EC)return _x;EC=1;var t=hp(),r=pH(),a=fH(),n="[object Null]",s="[object Undefined]",o=t?t.toStringTag:void 0;function l(c){return c==null?c===void 0?s:n:o&&o in Object(c)?r(c):a(c)}return _x=l,_x}var Px,wC;function Il(){if(wC)return Px;wC=1;function t(r){return r!=null&&typeof r=="object"}return Px=t,Px}var Tx,NC;function tm(){if(NC)return Tx;NC=1;var t=Ll(),r=Il(),a="[object Symbol]";function n(s){return typeof s=="symbol"||r(s)&&t(s)==a}return Tx=n,Tx}var Ox,kC;function C2(){if(kC)return Ox;kC=1;var t=As(),r=tm(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(o,l){if(t(o))return!1;var c=typeof o;return c=="number"||c=="symbol"||c=="boolean"||o==null||r(o)?!0:n.test(o)||!a.test(o)||l!=null&&o in Object(l)}return Ox=s,Ox}var Mx,SC;function xi(){if(SC)return Mx;SC=1;function t(r){var a=typeof r;return r!=null&&(a=="object"||a=="function")}return Mx=t,Mx}var jx,CC;function A2(){if(CC)return jx;CC=1;var t=Ll(),r=xi(),a="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",o="[object Proxy]";function l(c){if(!r(c))return!1;var m=t(c);return m==n||m==s||m==a||m==o}return jx=l,jx}var Rx,AC;function gH(){if(AC)return Rx;AC=1;var t=Zo(),r=t["__core-js_shared__"];return Rx=r,Rx}var $x,_C;function hH(){if(_C)return $x;_C=1;var t=gH(),r=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function a(n){return!!r&&r in n}return $x=a,$x}var Lx,PC;function Ij(){if(PC)return Lx;PC=1;var t=Function.prototype,r=t.toString;function a(n){if(n!=null){try{return r.call(n)}catch{}try{return n+""}catch{}}return""}return Lx=a,Lx}var Ix,TC;function bH(){if(TC)return Ix;TC=1;var t=A2(),r=hH(),a=xi(),n=Ij(),s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,m=l.toString,p=c.hasOwnProperty,f=RegExp("^"+m.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(b){if(!a(b)||r(b))return!1;var x=t(b)?f:o;return x.test(n(b))}return Ix=g,Ix}var Dx,OC;function xH(){if(OC)return Dx;OC=1;function t(r,a){return r?.[a]}return Dx=t,Dx}var Fx,MC;function wc(){if(MC)return Fx;MC=1;var t=bH(),r=xH();function a(n,s){var o=r(n,s);return t(o)?o:void 0}return Fx=a,Fx}var zx,jC;function Hg(){if(jC)return zx;jC=1;var t=wc(),r=t(Object,"create");return zx=r,zx}var Bx,RC;function yH(){if(RC)return Bx;RC=1;var t=Hg();function r(){this.__data__=t?t(null):{},this.size=0}return Bx=r,Bx}var qx,$C;function vH(){if($C)return qx;$C=1;function t(r){var a=this.has(r)&&delete this.__data__[r];return this.size-=a?1:0,a}return qx=t,qx}var Ux,LC;function EH(){if(LC)return Ux;LC=1;var t=Hg(),r="__lodash_hash_undefined__",a=Object.prototype,n=a.hasOwnProperty;function s(o){var l=this.__data__;if(t){var c=l[o];return c===r?void 0:c}return n.call(l,o)?l[o]:void 0}return Ux=s,Ux}var Vx,IC;function wH(){if(IC)return Vx;IC=1;var t=Hg(),r=Object.prototype,a=r.hasOwnProperty;function n(s){var o=this.__data__;return t?o[s]!==void 0:a.call(o,s)}return Vx=n,Vx}var Hx,DC;function NH(){if(DC)return Hx;DC=1;var t=Hg(),r="__lodash_hash_undefined__";function a(n,s){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=t&&s===void 0?r:s,this}return Hx=a,Hx}var Wx,FC;function kH(){if(FC)return Wx;FC=1;var t=yH(),r=vH(),a=EH(),n=wH(),s=NH();function o(l){var c=-1,m=l==null?0:l.length;for(this.clear();++c<m;){var p=l[c];this.set(p[0],p[1])}}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,Wx=o,Wx}var Gx,zC;function SH(){if(zC)return Gx;zC=1;function t(){this.__data__=[],this.size=0}return Gx=t,Gx}var Kx,BC;function _2(){if(BC)return Kx;BC=1;function t(r,a){return r===a||r!==r&&a!==a}return Kx=t,Kx}var Yx,qC;function Wg(){if(qC)return Yx;qC=1;var t=_2();function r(a,n){for(var s=a.length;s--;)if(t(a[s][0],n))return s;return-1}return Yx=r,Yx}var Xx,UC;function CH(){if(UC)return Xx;UC=1;var t=Wg(),r=Array.prototype,a=r.splice;function n(s){var o=this.__data__,l=t(o,s);if(l<0)return!1;var c=o.length-1;return l==c?o.pop():a.call(o,l,1),--this.size,!0}return Xx=n,Xx}var Qx,VC;function AH(){if(VC)return Qx;VC=1;var t=Wg();function r(a){var n=this.__data__,s=t(n,a);return s<0?void 0:n[s][1]}return Qx=r,Qx}var Jx,HC;function _H(){if(HC)return Jx;HC=1;var t=Wg();function r(a){return t(this.__data__,a)>-1}return Jx=r,Jx}var Zx,WC;function PH(){if(WC)return Zx;WC=1;var t=Wg();function r(a,n){var s=this.__data__,o=t(s,a);return o<0?(++this.size,s.push([a,n])):s[o][1]=n,this}return Zx=r,Zx}var ey,GC;function Gg(){if(GC)return ey;GC=1;var t=SH(),r=CH(),a=AH(),n=_H(),s=PH();function o(l){var c=-1,m=l==null?0:l.length;for(this.clear();++c<m;){var p=l[c];this.set(p[0],p[1])}}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,ey=o,ey}var ty,KC;function P2(){if(KC)return ty;KC=1;var t=wc(),r=Zo(),a=t(r,"Map");return ty=a,ty}var ry,YC;function TH(){if(YC)return ry;YC=1;var t=kH(),r=Gg(),a=P2();function n(){this.size=0,this.__data__={hash:new t,map:new(a||r),string:new t}}return ry=n,ry}var ay,XC;function OH(){if(XC)return ay;XC=1;function t(r){var a=typeof r;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?r!=="__proto__":r===null}return ay=t,ay}var ny,QC;function Kg(){if(QC)return ny;QC=1;var t=OH();function r(a,n){var s=a.__data__;return t(n)?s[typeof n=="string"?"string":"hash"]:s.map}return ny=r,ny}var sy,JC;function MH(){if(JC)return sy;JC=1;var t=Kg();function r(a){var n=t(this,a).delete(a);return this.size-=n?1:0,n}return sy=r,sy}var oy,ZC;function jH(){if(ZC)return oy;ZC=1;var t=Kg();function r(a){return t(this,a).get(a)}return oy=r,oy}var ly,e3;function RH(){if(e3)return ly;e3=1;var t=Kg();function r(a){return t(this,a).has(a)}return ly=r,ly}var iy,t3;function $H(){if(t3)return iy;t3=1;var t=Kg();function r(a,n){var s=t(this,a),o=s.size;return s.set(a,n),this.size+=s.size==o?0:1,this}return iy=r,iy}var cy,r3;function T2(){if(r3)return cy;r3=1;var t=TH(),r=MH(),a=jH(),n=RH(),s=$H();function o(l){var c=-1,m=l==null?0:l.length;for(this.clear();++c<m;){var p=l[c];this.set(p[0],p[1])}}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=n,o.prototype.set=s,cy=o,cy}var dy,a3;function Dj(){if(a3)return dy;a3=1;var t=T2(),r="Expected a function";function a(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(r);var o=function(){var l=arguments,c=s?s.apply(this,l):l[0],m=o.cache;if(m.has(c))return m.get(c);var p=n.apply(this,l);return o.cache=m.set(c,p)||m,p};return o.cache=new(a.Cache||t),o}return a.Cache=t,dy=a,dy}var my,n3;function LH(){if(n3)return my;n3=1;var t=Dj(),r=500;function a(n){var s=t(n,function(l){return o.size===r&&o.clear(),l}),o=s.cache;return s}return my=a,my}var uy,s3;function IH(){if(s3)return uy;s3=1;var t=LH(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,n=t(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(r,function(l,c,m,p){o.push(m?p.replace(a,"$1"):c||l)}),o});return uy=n,uy}var py,o3;function O2(){if(o3)return py;o3=1;function t(r,a){for(var n=-1,s=r==null?0:r.length,o=Array(s);++n<s;)o[n]=a(r[n],n,r);return o}return py=t,py}var fy,l3;function DH(){if(l3)return fy;l3=1;var t=hp(),r=O2(),a=As(),n=tm(),s=t?t.prototype:void 0,o=s?s.toString:void 0;function l(c){if(typeof c=="string")return c;if(a(c))return r(c,l)+"";if(n(c))return o?o.call(c):"";var m=c+"";return m=="0"&&1/c==-1/0?"-0":m}return fy=l,fy}var gy,i3;function Fj(){if(i3)return gy;i3=1;var t=DH();function r(a){return a==null?"":t(a)}return gy=r,gy}var hy,c3;function zj(){if(c3)return hy;c3=1;var t=As(),r=C2(),a=IH(),n=Fj();function s(o,l){return t(o)?o:r(o,l)?[o]:a(n(o))}return hy=s,hy}var by,d3;function Yg(){if(d3)return by;d3=1;var t=tm();function r(a){if(typeof a=="string"||t(a))return a;var n=a+"";return n=="0"&&1/a==-1/0?"-0":n}return by=r,by}var xy,m3;function M2(){if(m3)return xy;m3=1;var t=zj(),r=Yg();function a(n,s){s=t(s,n);for(var o=0,l=s.length;n!=null&&o<l;)n=n[r(s[o++])];return o&&o==l?n:void 0}return xy=a,xy}var yy,u3;function Bj(){if(u3)return yy;u3=1;var t=M2();function r(a,n,s){var o=a==null?void 0:t(a,n);return o===void 0?s:o}return yy=r,yy}var FH=Bj();const ro=Aa(FH);var vy,p3;function zH(){if(p3)return vy;p3=1;function t(r){return r==null}return vy=t,vy}var BH=zH();const qr=Aa(BH);var Ey,f3;function qH(){if(f3)return Ey;f3=1;var t=Ll(),r=As(),a=Il(),n="[object String]";function s(o){return typeof o=="string"||!r(o)&&a(o)&&t(o)==n}return Ey=s,Ey}var UH=qH();const uc=Aa(UH);var VH=A2();const Lr=Aa(VH);var HH=xi();const rm=Aa(HH);var wy={exports:{}},ma={};var g3;function WH(){if(g3)return ma;g3=1;var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function E(y){if(typeof y=="object"&&y!==null){var w=y.$$typeof;switch(w){case t:switch(y=y.type,y){case a:case s:case n:case p:case f:return y;default:switch(y=y&&y.$$typeof,y){case c:case l:case m:case b:case g:case o:return y;default:return w}}case r:return w}}}return ma.ContextConsumer=l,ma.ContextProvider=o,ma.Element=t,ma.ForwardRef=m,ma.Fragment=a,ma.Lazy=b,ma.Memo=g,ma.Portal=r,ma.Profiler=s,ma.StrictMode=n,ma.Suspense=p,ma.SuspenseList=f,ma.isAsyncMode=function(){return!1},ma.isConcurrentMode=function(){return!1},ma.isContextConsumer=function(y){return E(y)===l},ma.isContextProvider=function(y){return E(y)===o},ma.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},ma.isForwardRef=function(y){return E(y)===m},ma.isFragment=function(y){return E(y)===a},ma.isLazy=function(y){return E(y)===b},ma.isMemo=function(y){return E(y)===g},ma.isPortal=function(y){return E(y)===r},ma.isProfiler=function(y){return E(y)===s},ma.isStrictMode=function(y){return E(y)===n},ma.isSuspense=function(y){return E(y)===p},ma.isSuspenseList=function(y){return E(y)===f},ma.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===a||y===s||y===n||y===p||y===f||y===x||typeof y=="object"&&y!==null&&(y.$$typeof===b||y.$$typeof===g||y.$$typeof===o||y.$$typeof===l||y.$$typeof===m||y.$$typeof===v||y.getModuleId!==void 0)},ma.typeOf=E,ma}var h3;function GH(){return h3||(h3=1,wy.exports=WH()),wy.exports}var KH=GH(),Ny,b3;function qj(){if(b3)return Ny;b3=1;var t=Ll(),r=Il(),a="[object Number]";function n(s){return typeof s=="number"||r(s)&&t(s)==a}return Ny=n,Ny}var ky,x3;function YH(){if(x3)return ky;x3=1;var t=qj();function r(a){return t(a)&&a!=+a}return ky=r,ky}var XH=YH();const bp=Aa(XH);var QH=qj();const JH=Aa(QH);var No=function(r){return r===0?0:r>0?1:-1},Zi=function(r){return uc(r)&&r.indexOf("%")===r.length-1},$t=function(r){return JH(r)&&!bp(r)},ZH=function(r){return qr(r)},vn=function(r){return $t(r)||uc(r)},eW=0,xp=function(r){var a=++eW;return"".concat(r||"").concat(a)},pc=function(r,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!$t(r)&&!uc(r))return n;var o;if(Zi(r)){var l=r.indexOf("%");o=a*parseFloat(r.slice(0,l))/100}else o=+r;return bp(o)&&(o=n),s&&o>a&&(o=a),o},si=function(r){if(!r)return null;var a=Object.keys(r);return a&&a.length?r[a[0]]:null},tW=function(r){if(!Array.isArray(r))return!1;for(var a=r.length,n={},s=0;s<a;s++)if(!n[r[s]])n[r[s]]=!0;else return!0;return!1},vo=function(r,a){return $t(r)&&$t(a)?function(n){return r+n*(a-r)}:function(){return a}};function _f(t,r,a){return!t||!t.length?null:t.find(function(n){return n&&(typeof r=="function"?r(n):ro(n,r))===a})}var rW=function(r,a){return $t(r)&&$t(a)?r-a:uc(r)&&uc(a)?r.localeCompare(a):r instanceof Date&&a instanceof Date?r.getTime()-a.getTime():String(r).localeCompare(String(a))};function bd(t,r){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(r,a)||t[a]!==r[a]))return!1;for(var n in r)if({}.hasOwnProperty.call(r,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function SN(t){"@babel/helpers - typeof";return SN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},SN(t)}var aW=["viewBox","children"],nW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],y3=["points","pathLength"],Sy={svg:aW,polygon:y3,polyline:y3},j2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pf=function(r,a){if(!r||typeof r=="function"||typeof r=="boolean")return null;var n=r;if(u.isValidElement(r)&&(n=r.props),!rm(n))return null;var s={};return Object.keys(n).forEach(function(o){j2.includes(o)&&(s[o]=a||function(l){return n[o](n,l)})}),s},sW=function(r,a,n){return function(s){return r(a,n,s),null}},Tf=function(r,a,n){if(!rm(r)||SN(r)!=="object")return null;var s=null;return Object.keys(r).forEach(function(o){var l=r[o];j2.includes(o)&&typeof l=="function"&&(s||(s={}),s[o]=sW(l,a,n))}),s},oW=["children"],lW=["children"];function v3(t,r){if(t==null)return{};var a=iW(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function iW(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function CN(t){"@babel/helpers - typeof";return CN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},CN(t)}var E3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wl=function(r){return typeof r=="string"?r:r?r.displayName||r.name||"Component":""},w3=null,Cy=null,R2=function t(r){if(r===w3&&Array.isArray(Cy))return Cy;var a=[];return u.Children.forEach(r,function(n){qr(n)||(KH.isFragment(n)?a=a.concat(t(n.props.children)):a.push(n))}),Cy=a,w3=r,a};function ao(t,r){var a=[],n=[];return Array.isArray(r)?n=r.map(function(s){return wl(s)}):n=[wl(r)],R2(t).forEach(function(s){var o=ro(s,"type.displayName")||ro(s,"type.name");n.indexOf(o)!==-1&&a.push(s)}),a}function $s(t,r){var a=ao(t,r);return a&&a[0]}var N3=function(r){if(!r||!r.props)return!1;var a=r.props,n=a.width,s=a.height;return!(!$t(n)||n<=0||!$t(s)||s<=0)},cW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],dW=function(r){return r&&r.type&&uc(r.type)&&cW.indexOf(r.type)>=0},mW=function(r){return r&&CN(r)==="object"&&"clipDot"in r},uW=function(r,a,n,s){var o,l=(o=Sy?.[s])!==null&&o!==void 0?o:[];return a.startsWith("data-")||!Lr(r)&&(s&&l.includes(a)||nW.includes(a))||n&&j2.includes(a)},Xr=function(r,a,n){if(!r||typeof r=="function"||typeof r=="boolean")return null;var s=r;if(u.isValidElement(r)&&(s=r.props),!rm(s))return null;var o={};return Object.keys(s).forEach(function(l){var c;uW((c=s)===null||c===void 0?void 0:c[l],l,a,n)&&(o[l]=s[l])}),o},AN=function t(r,a){if(r===a)return!0;var n=u.Children.count(r);if(n!==u.Children.count(a))return!1;if(n===0)return!0;if(n===1)return k3(Array.isArray(r)?r[0]:r,Array.isArray(a)?a[0]:a);for(var s=0;s<n;s++){var o=r[s],l=a[s];if(Array.isArray(o)||Array.isArray(l)){if(!t(o,l))return!1}else if(!k3(o,l))return!1}return!0},k3=function(r,a){if(qr(r)&&qr(a))return!0;if(!qr(r)&&!qr(a)){var n=r.props||{},s=n.children,o=v3(n,oW),l=a.props||{},c=l.children,m=v3(l,lW);return s&&c?bd(o,m)&&AN(s,c):!s&&!c?bd(o,m):!1}return!1},S3=function(r,a){var n=[],s={};return R2(r).forEach(function(o,l){if(dW(o))n.push(o);else if(o){var c=wl(o.type),m=a[c]||{},p=m.handler,f=m.once;if(p&&(!f||!s[c])){var g=p(o,c,l);n.push(g),s[c]=!0}}}),n},pW=function(r){var a=r&&r.type;return a&&E3[a]?E3[a]:null},fW=function(r,a){return R2(a).indexOf(r)},gW=["children","width","height","viewBox","className","style","title","desc"];function _N(){return _N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},_N.apply(this,arguments)}function hW(t,r){if(t==null)return{};var a=bW(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function bW(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function PN(t){var r=t.children,a=t.width,n=t.height,s=t.viewBox,o=t.className,l=t.style,c=t.title,m=t.desc,p=hW(t,gW),f=s||{width:a,height:n,x:0,y:0},g=ta("recharts-surface",o);return e.createElement("svg",_N({},Xr(p,!0,"svg"),{className:g,width:a,height:n,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),e.createElement("title",null,c),e.createElement("desc",null,m),r)}var xW=["children","className"];function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},TN.apply(this,arguments)}function yW(t,r){if(t==null)return{};var a=vW(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function vW(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}var rn=e.forwardRef(function(t,r){var a=t.children,n=t.className,s=yW(t,xW),o=ta("recharts-layer",n);return e.createElement("g",TN({className:o},Xr(s,!0),{ref:r}),a)}),Nl=function(r,a){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o]},Ay,C3;function EW(){if(C3)return Ay;C3=1;function t(r,a,n){var s=-1,o=r.length;a<0&&(a=-a>o?0:o+a),n=n>o?o:n,n<0&&(n+=o),o=a>n?0:n-a>>>0,a>>>=0;for(var l=Array(o);++s<o;)l[s]=r[s+a];return l}return Ay=t,Ay}var _y,A3;function wW(){if(A3)return _y;A3=1;var t=EW();function r(a,n,s){var o=a.length;return s=s===void 0?o:s,!n&&s>=o?a:t(a,n,s)}return _y=r,_y}var Py,_3;function Uj(){if(_3)return Py;_3=1;var t="\\ud800-\\udfff",r="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=r+a+n,o="\\ufe0e\\ufe0f",l="\\u200d",c=RegExp("["+l+t+s+o+"]");function m(p){return c.test(p)}return Py=m,Py}var Ty,P3;function NW(){if(P3)return Ty;P3=1;function t(r){return r.split("")}return Ty=t,Ty}var Oy,T3;function kW(){if(T3)return Oy;T3=1;var t="\\ud800-\\udfff",r="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=r+a+n,o="\\ufe0e\\ufe0f",l="["+t+"]",c="["+s+"]",m="\\ud83c[\\udffb-\\udfff]",p="(?:"+c+"|"+m+")",f="[^"+t+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=p+"?",E="["+o+"]?",y="(?:"+x+"(?:"+[f,g,b].join("|")+")"+E+v+")*",w=E+v+y,k="(?:"+[f+c+"?",c,g,b,l].join("|")+")",C=RegExp(m+"(?="+m+")|"+k+w,"g");function A(S){return S.match(C)||[]}return Oy=A,Oy}var My,O3;function SW(){if(O3)return My;O3=1;var t=NW(),r=Uj(),a=kW();function n(s){return r(s)?a(s):t(s)}return My=n,My}var jy,M3;function CW(){if(M3)return jy;M3=1;var t=wW(),r=Uj(),a=SW(),n=Fj();function s(o){return function(l){l=n(l);var c=r(l)?a(l):void 0,m=c?c[0]:l.charAt(0),p=c?t(c,1).join(""):l.slice(1);return m[o]()+p}}return jy=s,jy}var Ry,j3;function AW(){if(j3)return Ry;j3=1;var t=CW(),r=t("toUpperCase");return Ry=r,Ry}var _W=AW();const Xg=Aa(_W);function Ma(t){return function(){return t}}const Vj=Math.cos,Of=Math.sin,Co=Math.sqrt,Mf=Math.PI,Qg=2*Mf,ON=Math.PI,MN=2*ON,Yi=1e-6,PW=MN-Yi;function Hj(t){this._+=t[0];for(let r=1,a=t.length;r<a;++r)this._+=arguments[r]+t[r]}function TW(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return Hj;const a=10**r;return function(n){this._+=n[0];for(let s=1,o=n.length;s<o;++s)this._+=Math.round(arguments[s]*a)/a+n[s]}}class OW{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Hj:TW(r)}moveTo(r,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,a){this._append`L${this._x1=+r},${this._y1=+a}`}quadraticCurveTo(r,a,n,s){this._append`Q${+r},${+a},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(r,a,n,s,o,l){this._append`C${+r},${+a},${+n},${+s},${this._x1=+o},${this._y1=+l}`}arcTo(r,a,n,s,o){if(r=+r,a=+a,n=+n,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,c=this._y1,m=n-r,p=s-a,f=l-r,g=c-a,b=f*f+g*g;if(this._x1===null)this._append`M${this._x1=r},${this._y1=a}`;else if(b>Yi)if(!(Math.abs(g*m-p*f)>Yi)||!o)this._append`L${this._x1=r},${this._y1=a}`;else{let x=n-l,v=s-c,E=m*m+p*p,y=x*x+v*v,w=Math.sqrt(E),k=Math.sqrt(b),C=o*Math.tan((ON-Math.acos((E+b-y)/(2*w*k)))/2),A=C/k,S=C/w;Math.abs(A-1)>Yi&&this._append`L${r+A*f},${a+A*g}`,this._append`A${o},${o},0,0,${+(g*x>f*v)},${this._x1=r+S*m},${this._y1=a+S*p}`}}arc(r,a,n,s,o,l){if(r=+r,a=+a,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(s),m=n*Math.sin(s),p=r+c,f=a+m,g=1^l,b=l?s-o:o-s;this._x1===null?this._append`M${p},${f}`:(Math.abs(this._x1-p)>Yi||Math.abs(this._y1-f)>Yi)&&this._append`L${p},${f}`,n&&(b<0&&(b=b%MN+MN),b>PW?this._append`A${n},${n},0,1,${g},${r-c},${a-m}A${n},${n},0,1,${g},${this._x1=p},${this._y1=f}`:b>Yi&&this._append`A${n},${n},0,${+(b>=ON)},${g},${this._x1=r+n*Math.cos(o)},${this._y1=a+n*Math.sin(o)}`)}rect(r,a,n,s){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function $2(t){let r=3;return t.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const n=Math.floor(a);if(!(n>=0))throw new RangeError(`invalid digits: ${a}`);r=n}return t},()=>new OW(r)}function L2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wj(t){this._context=t}Wj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function Jg(t){return new Wj(t)}function Gj(t){return t[0]}function Kj(t){return t[1]}function Yj(t,r){var a=Ma(!0),n=null,s=Jg,o=null,l=$2(c);t=typeof t=="function"?t:t===void 0?Gj:Ma(t),r=typeof r=="function"?r:r===void 0?Kj:Ma(r);function c(m){var p,f=(m=L2(m)).length,g,b=!1,x;for(n==null&&(o=s(x=l())),p=0;p<=f;++p)!(p<f&&a(g=m[p],p,m))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+t(g,p,m),+r(g,p,m));if(x)return o=null,x+""||null}return c.x=function(m){return arguments.length?(t=typeof m=="function"?m:Ma(+m),c):t},c.y=function(m){return arguments.length?(r=typeof m=="function"?m:Ma(+m),c):r},c.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Ma(!!m),c):a},c.curve=function(m){return arguments.length?(s=m,n!=null&&(o=s(n)),c):s},c.context=function(m){return arguments.length?(m==null?n=o=null:o=s(n=m),c):n},c}function A0(t,r,a){var n=null,s=Ma(!0),o=null,l=Jg,c=null,m=$2(p);t=typeof t=="function"?t:t===void 0?Gj:Ma(+t),r=typeof r=="function"?r:Ma(r===void 0?0:+r),a=typeof a=="function"?a:a===void 0?Kj:Ma(+a);function p(g){var b,x,v,E=(g=L2(g)).length,y,w=!1,k,C=new Array(E),A=new Array(E);for(o==null&&(c=l(k=m())),b=0;b<=E;++b){if(!(b<E&&s(y=g[b],b,g))===w)if(w=!w)x=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),v=b-1;v>=x;--v)c.point(C[v],A[v]);c.lineEnd(),c.areaEnd()}w&&(C[b]=+t(y,b,g),A[b]=+r(y,b,g),c.point(n?+n(y,b,g):C[b],a?+a(y,b,g):A[b]))}if(k)return c=null,k+""||null}function f(){return Yj().defined(s).curve(l).context(o)}return p.x=function(g){return arguments.length?(t=typeof g=="function"?g:Ma(+g),n=null,p):t},p.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Ma(+g),p):t},p.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ma(+g),p):n},p.y=function(g){return arguments.length?(r=typeof g=="function"?g:Ma(+g),a=null,p):r},p.y0=function(g){return arguments.length?(r=typeof g=="function"?g:Ma(+g),p):r},p.y1=function(g){return arguments.length?(a=g==null?null:typeof g=="function"?g:Ma(+g),p):a},p.lineX0=p.lineY0=function(){return f().x(t).y(r)},p.lineY1=function(){return f().x(t).y(a)},p.lineX1=function(){return f().x(n).y(r)},p.defined=function(g){return arguments.length?(s=typeof g=="function"?g:Ma(!!g),p):s},p.curve=function(g){return arguments.length?(l=g,o!=null&&(c=l(o)),p):l},p.context=function(g){return arguments.length?(g==null?o=c=null:c=l(o=g),p):o},p}class Xj{constructor(r,a){this._context=r,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,a){switch(r=+r,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,a,r,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,r,this._y0,r,a);break}}this._x0=r,this._y0=a}}function MW(t){return new Xj(t,!0)}function jW(t){return new Xj(t,!1)}const I2={draw(t,r){const a=Co(r/Mf);t.moveTo(a,0),t.arc(0,0,a,0,Qg)}},RW={draw(t,r){const a=Co(r/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},Qj=Co(1/3),$W=Qj*2,LW={draw(t,r){const a=Co(r/$W),n=a*Qj;t.moveTo(0,-a),t.lineTo(n,0),t.lineTo(0,a),t.lineTo(-n,0),t.closePath()}},IW={draw(t,r){const a=Co(r),n=-a/2;t.rect(n,n,a,a)}},DW=.8908130915292852,Jj=Of(Mf/10)/Of(7*Mf/10),FW=Of(Qg/10)*Jj,zW=-Vj(Qg/10)*Jj,BW={draw(t,r){const a=Co(r*DW),n=FW*a,s=zW*a;t.moveTo(0,-a),t.lineTo(n,s);for(let o=1;o<5;++o){const l=Qg*o/5,c=Vj(l),m=Of(l);t.lineTo(m*a,-c*a),t.lineTo(c*n-m*s,m*n+c*s)}t.closePath()}},$y=Co(3),qW={draw(t,r){const a=-Co(r/($y*3));t.moveTo(0,a*2),t.lineTo(-$y*a,-a),t.lineTo($y*a,-a),t.closePath()}},Ks=-.5,Ys=Co(3)/2,jN=1/Co(12),UW=(jN/2+1)*3,VW={draw(t,r){const a=Co(r/UW),n=a/2,s=a*jN,o=n,l=a*jN+a,c=-o,m=l;t.moveTo(n,s),t.lineTo(o,l),t.lineTo(c,m),t.lineTo(Ks*n-Ys*s,Ys*n+Ks*s),t.lineTo(Ks*o-Ys*l,Ys*o+Ks*l),t.lineTo(Ks*c-Ys*m,Ys*c+Ks*m),t.lineTo(Ks*n+Ys*s,Ks*s-Ys*n),t.lineTo(Ks*o+Ys*l,Ks*l-Ys*o),t.lineTo(Ks*c+Ys*m,Ks*m-Ys*c),t.closePath()}};function HW(t,r){let a=null,n=$2(s);t=typeof t=="function"?t:Ma(t||I2),r=typeof r=="function"?r:Ma(r===void 0?64:+r);function s(){let o;if(a||(a=o=n()),t.apply(this,arguments).draw(a,+r.apply(this,arguments)),o)return a=null,o+""||null}return s.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ma(o),s):t},s.size=function(o){return arguments.length?(r=typeof o=="function"?o:Ma(+o),s):r},s.context=function(o){return arguments.length?(a=o??null,s):a},s}function jf(){}function Rf(t,r,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+a)/6)}function Zj(t){this._context=t}Zj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rf(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function WW(t){return new Zj(t)}function e7(t){this._context=t}e7.prototype={areaStart:jf,areaEnd:jf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Rf(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function GW(t){return new e7(t)}function t7(t){this._context=t}t7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(a,n):this._context.moveTo(a,n);break;case 3:this._point=4;default:Rf(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function KW(t){return new t7(t)}function r7(t){this._context=t}r7.prototype={areaStart:jf,areaEnd:jf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function YW(t){return new r7(t)}function R3(t){return t<0?-1:1}function $3(t,r,a){var n=t._x1-t._x0,s=r-t._x1,o=(t._y1-t._y0)/(n||s<0&&-0),l=(a-t._y1)/(s||n<0&&-0),c=(o*s+l*n)/(n+s);return(R3(o)+R3(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(c))||0}function L3(t,r){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-r)/2:r}function Ly(t,r,a){var n=t._x0,s=t._y0,o=t._x1,l=t._y1,c=(o-n)/3;t._context.bezierCurveTo(n+c,s+c*r,o-c,l-c*a,o,l)}function $f(t){this._context=t}$f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ly(this,this._t0,L3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var a=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Ly(this,L3(this,a=$3(this,t,r)),a);break;default:Ly(this,this._t0,a=$3(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=a}}};function a7(t){this._context=new n7(t)}(a7.prototype=Object.create($f.prototype)).point=function(t,r){$f.prototype.point.call(this,r,t)};function n7(t){this._context=t}n7.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,a,n,s,o){this._context.bezierCurveTo(r,t,n,a,o,s)}};function XW(t){return new $f(t)}function QW(t){return new a7(t)}function s7(t){this._context=t}s7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),a===2)this._context.lineTo(t[1],r[1]);else for(var n=I3(t),s=I3(r),o=0,l=1;l<a;++o,++l)this._context.bezierCurveTo(n[0][o],s[0][o],n[1][o],s[1][o],t[l],r[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function I3(t){var r,a=t.length-1,n,s=new Array(a),o=new Array(a),l=new Array(a);for(s[0]=0,o[0]=2,l[0]=t[0]+2*t[1],r=1;r<a-1;++r)s[r]=1,o[r]=4,l[r]=4*t[r]+2*t[r+1];for(s[a-1]=2,o[a-1]=7,l[a-1]=8*t[a-1]+t[a],r=1;r<a;++r)n=s[r]/o[r-1],o[r]-=n,l[r]-=n*l[r-1];for(s[a-1]=l[a-1]/o[a-1],r=a-2;r>=0;--r)s[r]=(l[r]-s[r+1])/o[r];for(o[a-1]=(t[a]+s[a-1])/2,r=0;r<a-1;++r)o[r]=2*t[r+1]-s[r+1];return[s,o]}function JW(t){return new s7(t)}function Zg(t,r){this._context=t,this._t=r}Zg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,r)}break}}this._x=t,this._y=r}};function ZW(t){return new Zg(t,.5)}function eG(t){return new Zg(t,0)}function tG(t){return new Zg(t,1)}function Ad(t,r){if((l=t.length)>1)for(var a=1,n,s,o=t[r[0]],l,c=o.length;a<l;++a)for(s=o,o=t[r[a]],n=0;n<c;++n)o[n][1]+=o[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function RN(t){for(var r=t.length,a=new Array(r);--r>=0;)a[r]=r;return a}function rG(t,r){return t[r]}function aG(t){const r=[];return r.key=t,r}function nG(){var t=Ma([]),r=RN,a=Ad,n=rG;function s(o){var l=Array.from(t.apply(this,arguments),aG),c,m=l.length,p=-1,f;for(const g of o)for(c=0,++p;c<m;++c)(l[c][p]=[0,+n(g,l[c].key,p,o)]).data=g;for(c=0,f=L2(r(l));c<m;++c)l[f[c]].index=c;return a(l,f),l}return s.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ma(Array.from(o)),s):t},s.value=function(o){return arguments.length?(n=typeof o=="function"?o:Ma(+o),s):n},s.order=function(o){return arguments.length?(r=o==null?RN:typeof o=="function"?o:Ma(Array.from(o)),s):r},s.offset=function(o){return arguments.length?(a=o??Ad,s):a},s}function sG(t,r){if((n=t.length)>0){for(var a,n,s=0,o=t[0].length,l;s<o;++s){for(l=a=0;a<n;++a)l+=t[a][s][1]||0;if(l)for(a=0;a<n;++a)t[a][s][1]/=l}Ad(t,r)}}function oG(t,r){if((s=t.length)>0){for(var a=0,n=t[r[0]],s,o=n.length;a<o;++a){for(var l=0,c=0;l<s;++l)c+=t[l][a][1]||0;n[a][1]+=n[a][0]=-c/2}Ad(t,r)}}function lG(t,r){if(!(!((l=t.length)>0)||!((o=(s=t[r[0]]).length)>0))){for(var a=0,n=1,s,o,l;n<o;++n){for(var c=0,m=0,p=0;c<l;++c){for(var f=t[r[c]],g=f[n][1]||0,b=f[n-1][1]||0,x=(g-b)/2,v=0;v<c;++v){var E=t[r[v]],y=E[n][1]||0,w=E[n-1][1]||0;x+=y-w}m+=g,p+=x*g}s[n-1][1]+=s[n-1][0]=a,m&&(a-=p/m)}s[n-1][1]+=s[n-1][0]=a,Ad(t,r)}}function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ku(t)}var iG=["type","size","sizeType"];function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},$N.apply(this,arguments)}function D3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function F3(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?D3(Object(a),!0).forEach(function(n){cG(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D3(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function cG(t,r,a){return r=dG(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function dG(t){var r=mG(t,"string");return ku(r)=="symbol"?r:r+""}function mG(t,r){if(ku(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function uG(t,r){if(t==null)return{};var a=pG(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function pG(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}var o7={symbolCircle:I2,symbolCross:RW,symbolDiamond:LW,symbolSquare:IW,symbolStar:BW,symbolTriangle:qW,symbolWye:VW},fG=Math.PI/180,gG=function(r){var a="symbol".concat(Xg(r));return o7[a]||I2},hG=function(r,a,n){if(a==="area")return r;switch(n){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var s=18*fG;return 1.25*r*r*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},bG=function(r,a){o7["symbol".concat(Xg(r))]=a},D2=function(r){var a=r.type,n=a===void 0?"circle":a,s=r.size,o=s===void 0?64:s,l=r.sizeType,c=l===void 0?"area":l,m=uG(r,iG),p=F3(F3({},m),{},{type:n,size:o,sizeType:c}),f=function(){var y=gG(n),w=HW().type(y).size(hG(o,c,n));return w()},g=p.className,b=p.cx,x=p.cy,v=Xr(p,!0);return b===+b&&x===+x&&o===+o?e.createElement("path",$N({},v,{className:ta("recharts-symbols",g),transform:"translate(".concat(b,", ").concat(x,")"),d:f()})):null};D2.registerSymbol=bG;function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_d(t)}function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},LN.apply(this,arguments)}function z3(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function xG(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?z3(Object(a),!0).forEach(function(n){Su(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z3(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function yG(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function vG(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i7(n.key),n)}}function EG(t,r,a){return r&&vG(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wG(t,r,a){return r=Lf(r),NG(t,l7()?Reflect.construct(r,a||[],Lf(t).constructor):r.apply(t,a))}function NG(t,r){if(r&&(_d(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kG(t)}function kG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l7=function(){return!!t})()}function Lf(t){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Lf(t)}function SG(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&IN(t,r)}function IN(t,r){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},IN(t,r)}function Su(t,r,a){return r=i7(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function i7(t){var r=CG(t,"string");return _d(r)=="symbol"?r:r+""}function CG(t,r){if(_d(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xs=32,F2=(function(t){function r(){return yG(this,r),wG(this,r,arguments)}return SG(r,t),EG(r,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,o=Xs/2,l=Xs/6,c=Xs/3,m=n.inactive?s:n.color;if(n.type==="plainline")return e.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Xs,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return e.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(o,"h").concat(c,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*c,",").concat(o,`
            H`).concat(Xs,"M").concat(2*c,",").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(c,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return e.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(Xs/8,"h").concat(Xs,"v").concat(Xs*3/4,"h").concat(-Xs,"z"),className:"recharts-legend-icon"});if(e.isValidElement(n.legendIcon)){var p=xG({},n);return delete p.legendIcon,e.cloneElement(n.legendIcon,p)}return e.createElement(D2,{fill:m,cx:o,cy:o,size:Xs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,o=s.payload,l=s.iconSize,c=s.layout,m=s.formatter,p=s.inactiveColor,f={x:0,y:0,width:Xs,height:Xs},g={display:c==="horizontal"?"inline-block":"block",marginRight:10},b={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(x,v){var E=x.formatter||m,y=ta(Su(Su({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var w=Lr(x.value)?null:x.value;Nl(!Lr(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=x.inactive?p:x.color;return e.createElement("li",LN({className:y,style:g,key:"legend-item-".concat(v)},Tf(n.props,x,v)),e.createElement(PN,{width:l,height:l,viewBox:f,style:b},n.renderIcon(x)),e.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},E?E(w,x,v):w))})}},{key:"render",value:function(){var n=this.props,s=n.payload,o=n.layout,l=n.align;if(!s||!s.length)return null;var c={padding:0,margin:0,textAlign:o==="horizontal"?l:"left"};return e.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(u.PureComponent);Su(F2,"displayName","Legend");Su(F2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Iy,B3;function AG(){if(B3)return Iy;B3=1;var t=Gg();function r(){this.__data__=new t,this.size=0}return Iy=r,Iy}var Dy,q3;function _G(){if(q3)return Dy;q3=1;function t(r){var a=this.__data__,n=a.delete(r);return this.size=a.size,n}return Dy=t,Dy}var Fy,U3;function PG(){if(U3)return Fy;U3=1;function t(r){return this.__data__.get(r)}return Fy=t,Fy}var zy,V3;function TG(){if(V3)return zy;V3=1;function t(r){return this.__data__.has(r)}return zy=t,zy}var By,H3;function OG(){if(H3)return By;H3=1;var t=Gg(),r=P2(),a=T2(),n=200;function s(o,l){var c=this.__data__;if(c instanceof t){var m=c.__data__;if(!r||m.length<n-1)return m.push([o,l]),this.size=++c.size,this;c=this.__data__=new a(m)}return c.set(o,l),this.size=c.size,this}return By=s,By}var qy,W3;function c7(){if(W3)return qy;W3=1;var t=Gg(),r=AG(),a=_G(),n=PG(),s=TG(),o=OG();function l(c){var m=this.__data__=new t(c);this.size=m.size}return l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=n,l.prototype.has=s,l.prototype.set=o,qy=l,qy}var Uy,G3;function MG(){if(G3)return Uy;G3=1;var t="__lodash_hash_undefined__";function r(a){return this.__data__.set(a,t),this}return Uy=r,Uy}var Vy,K3;function jG(){if(K3)return Vy;K3=1;function t(r){return this.__data__.has(r)}return Vy=t,Vy}var Hy,Y3;function d7(){if(Y3)return Hy;Y3=1;var t=T2(),r=MG(),a=jG();function n(s){var o=-1,l=s==null?0:s.length;for(this.__data__=new t;++o<l;)this.add(s[o])}return n.prototype.add=n.prototype.push=r,n.prototype.has=a,Hy=n,Hy}var Wy,X3;function m7(){if(X3)return Wy;X3=1;function t(r,a){for(var n=-1,s=r==null?0:r.length;++n<s;)if(a(r[n],n,r))return!0;return!1}return Wy=t,Wy}var Gy,Q3;function u7(){if(Q3)return Gy;Q3=1;function t(r,a){return r.has(a)}return Gy=t,Gy}var Ky,J3;function p7(){if(J3)return Ky;J3=1;var t=d7(),r=m7(),a=u7(),n=1,s=2;function o(l,c,m,p,f,g){var b=m&n,x=l.length,v=c.length;if(x!=v&&!(b&&v>x))return!1;var E=g.get(l),y=g.get(c);if(E&&y)return E==c&&y==l;var w=-1,k=!0,C=m&s?new t:void 0;for(g.set(l,c),g.set(c,l);++w<x;){var A=l[w],S=c[w];if(p)var P=b?p(S,A,w,c,l,g):p(A,S,w,l,c,g);if(P!==void 0){if(P)continue;k=!1;break}if(C){if(!r(c,function(T,O){if(!a(C,O)&&(A===T||f(A,T,m,p,g)))return C.push(O)})){k=!1;break}}else if(!(A===S||f(A,S,m,p,g))){k=!1;break}}return g.delete(l),g.delete(c),k}return Ky=o,Ky}var Yy,Z3;function RG(){if(Z3)return Yy;Z3=1;var t=Zo(),r=t.Uint8Array;return Yy=r,Yy}var Xy,eA;function $G(){if(eA)return Xy;eA=1;function t(r){var a=-1,n=Array(r.size);return r.forEach(function(s,o){n[++a]=[o,s]}),n}return Xy=t,Xy}var Qy,tA;function z2(){if(tA)return Qy;tA=1;function t(r){var a=-1,n=Array(r.size);return r.forEach(function(s){n[++a]=s}),n}return Qy=t,Qy}var Jy,rA;function LG(){if(rA)return Jy;rA=1;var t=hp(),r=RG(),a=_2(),n=p7(),s=$G(),o=z2(),l=1,c=2,m="[object Boolean]",p="[object Date]",f="[object Error]",g="[object Map]",b="[object Number]",x="[object RegExp]",v="[object Set]",E="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",k="[object DataView]",C=t?t.prototype:void 0,A=C?C.valueOf:void 0;function S(P,T,O,R,D,$,j){switch(O){case k:if(P.byteLength!=T.byteLength||P.byteOffset!=T.byteOffset)return!1;P=P.buffer,T=T.buffer;case w:return!(P.byteLength!=T.byteLength||!$(new r(P),new r(T)));case m:case p:case b:return a(+P,+T);case f:return P.name==T.name&&P.message==T.message;case x:case E:return P==T+"";case g:var K=s;case v:var H=R&l;if(K||(K=o),P.size!=T.size&&!H)return!1;var V=j.get(P);if(V)return V==T;R|=c,j.set(P,T);var q=n(K(P),K(T),R,D,$,j);return j.delete(P),q;case y:if(A)return A.call(P)==A.call(T)}return!1}return Jy=S,Jy}var Zy,aA;function f7(){if(aA)return Zy;aA=1;function t(r,a){for(var n=-1,s=a.length,o=r.length;++n<s;)r[o+n]=a[n];return r}return Zy=t,Zy}var ev,nA;function IG(){if(nA)return ev;nA=1;var t=f7(),r=As();function a(n,s,o){var l=s(n);return r(n)?l:t(l,o(n))}return ev=a,ev}var tv,sA;function DG(){if(sA)return tv;sA=1;function t(r,a){for(var n=-1,s=r==null?0:r.length,o=0,l=[];++n<s;){var c=r[n];a(c,n,r)&&(l[o++]=c)}return l}return tv=t,tv}var rv,oA;function FG(){if(oA)return rv;oA=1;function t(){return[]}return rv=t,rv}var av,lA;function zG(){if(lA)return av;lA=1;var t=DG(),r=FG(),a=Object.prototype,n=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(l){return l==null?[]:(l=Object(l),t(s(l),function(c){return n.call(l,c)}))}:r;return av=o,av}var nv,iA;function BG(){if(iA)return nv;iA=1;function t(r,a){for(var n=-1,s=Array(r);++n<r;)s[n]=a(n);return s}return nv=t,nv}var sv,cA;function qG(){if(cA)return sv;cA=1;var t=Ll(),r=Il(),a="[object Arguments]";function n(s){return r(s)&&t(s)==a}return sv=n,sv}var ov,dA;function B2(){if(dA)return ov;dA=1;var t=qG(),r=Il(),a=Object.prototype,n=a.hasOwnProperty,s=a.propertyIsEnumerable,o=t((function(){return arguments})())?t:function(l){return r(l)&&n.call(l,"callee")&&!s.call(l,"callee")};return ov=o,ov}var ru={exports:{}},lv,mA;function UG(){if(mA)return lv;mA=1;function t(){return!1}return lv=t,lv}ru.exports;var uA;function g7(){return uA||(uA=1,(function(t,r){var a=Zo(),n=UG(),s=r&&!r.nodeType&&r,o=s&&!0&&t&&!t.nodeType&&t,l=o&&o.exports===s,c=l?a.Buffer:void 0,m=c?c.isBuffer:void 0,p=m||n;t.exports=p})(ru,ru.exports)),ru.exports}var iv,pA;function q2(){if(pA)return iv;pA=1;var t=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function a(n,s){var o=typeof n;return s=s??t,!!s&&(o=="number"||o!="symbol"&&r.test(n))&&n>-1&&n%1==0&&n<s}return iv=a,iv}var cv,fA;function U2(){if(fA)return cv;fA=1;var t=9007199254740991;function r(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return cv=r,cv}var dv,gA;function VG(){if(gA)return dv;gA=1;var t=Ll(),r=U2(),a=Il(),n="[object Arguments]",s="[object Array]",o="[object Boolean]",l="[object Date]",c="[object Error]",m="[object Function]",p="[object Map]",f="[object Number]",g="[object Object]",b="[object RegExp]",x="[object Set]",v="[object String]",E="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",P="[object Int32Array]",T="[object Uint8Array]",O="[object Uint8ClampedArray]",R="[object Uint16Array]",D="[object Uint32Array]",$={};$[k]=$[C]=$[A]=$[S]=$[P]=$[T]=$[O]=$[R]=$[D]=!0,$[n]=$[s]=$[y]=$[o]=$[w]=$[l]=$[c]=$[m]=$[p]=$[f]=$[g]=$[b]=$[x]=$[v]=$[E]=!1;function j(K){return a(K)&&r(K.length)&&!!$[t(K)]}return dv=j,dv}var mv,hA;function h7(){if(hA)return mv;hA=1;function t(r){return function(a){return r(a)}}return mv=t,mv}var au={exports:{}};au.exports;var bA;function HG(){return bA||(bA=1,(function(t,r){var a=Lj(),n=r&&!r.nodeType&&r,s=n&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===n,l=o&&a.process,c=(function(){try{var m=s&&s.require&&s.require("util").types;return m||l&&l.binding&&l.binding("util")}catch{}})();t.exports=c})(au,au.exports)),au.exports}var uv,xA;function b7(){if(xA)return uv;xA=1;var t=VG(),r=h7(),a=HG(),n=a&&a.isTypedArray,s=n?r(n):t;return uv=s,uv}var pv,yA;function WG(){if(yA)return pv;yA=1;var t=BG(),r=B2(),a=As(),n=g7(),s=q2(),o=b7(),l=Object.prototype,c=l.hasOwnProperty;function m(p,f){var g=a(p),b=!g&&r(p),x=!g&&!b&&n(p),v=!g&&!b&&!x&&o(p),E=g||b||x||v,y=E?t(p.length,String):[],w=y.length;for(var k in p)(f||c.call(p,k))&&!(E&&(k=="length"||x&&(k=="offset"||k=="parent")||v&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||s(k,w)))&&y.push(k);return y}return pv=m,pv}var fv,vA;function GG(){if(vA)return fv;vA=1;var t=Object.prototype;function r(a){var n=a&&a.constructor,s=typeof n=="function"&&n.prototype||t;return a===s}return fv=r,fv}var gv,EA;function x7(){if(EA)return gv;EA=1;function t(r,a){return function(n){return r(a(n))}}return gv=t,gv}var hv,wA;function KG(){if(wA)return hv;wA=1;var t=x7(),r=t(Object.keys,Object);return hv=r,hv}var bv,NA;function YG(){if(NA)return bv;NA=1;var t=GG(),r=KG(),a=Object.prototype,n=a.hasOwnProperty;function s(o){if(!t(o))return r(o);var l=[];for(var c in Object(o))n.call(o,c)&&c!="constructor"&&l.push(c);return l}return bv=s,bv}var xv,kA;function yp(){if(kA)return xv;kA=1;var t=A2(),r=U2();function a(n){return n!=null&&r(n.length)&&!t(n)}return xv=a,xv}var yv,SA;function eh(){if(SA)return yv;SA=1;var t=WG(),r=YG(),a=yp();function n(s){return a(s)?t(s):r(s)}return yv=n,yv}var vv,CA;function XG(){if(CA)return vv;CA=1;var t=IG(),r=zG(),a=eh();function n(s){return t(s,a,r)}return vv=n,vv}var Ev,AA;function QG(){if(AA)return Ev;AA=1;var t=XG(),r=1,a=Object.prototype,n=a.hasOwnProperty;function s(o,l,c,m,p,f){var g=c&r,b=t(o),x=b.length,v=t(l),E=v.length;if(x!=E&&!g)return!1;for(var y=x;y--;){var w=b[y];if(!(g?w in l:n.call(l,w)))return!1}var k=f.get(o),C=f.get(l);if(k&&C)return k==l&&C==o;var A=!0;f.set(o,l),f.set(l,o);for(var S=g;++y<x;){w=b[y];var P=o[w],T=l[w];if(m)var O=g?m(T,P,w,l,o,f):m(P,T,w,o,l,f);if(!(O===void 0?P===T||p(P,T,c,m,f):O)){A=!1;break}S||(S=w=="constructor")}if(A&&!S){var R=o.constructor,D=l.constructor;R!=D&&"constructor"in o&&"constructor"in l&&!(typeof R=="function"&&R instanceof R&&typeof D=="function"&&D instanceof D)&&(A=!1)}return f.delete(o),f.delete(l),A}return Ev=s,Ev}var wv,_A;function JG(){if(_A)return wv;_A=1;var t=wc(),r=Zo(),a=t(r,"DataView");return wv=a,wv}var Nv,PA;function ZG(){if(PA)return Nv;PA=1;var t=wc(),r=Zo(),a=t(r,"Promise");return Nv=a,Nv}var kv,TA;function y7(){if(TA)return kv;TA=1;var t=wc(),r=Zo(),a=t(r,"Set");return kv=a,kv}var Sv,OA;function eK(){if(OA)return Sv;OA=1;var t=wc(),r=Zo(),a=t(r,"WeakMap");return Sv=a,Sv}var Cv,MA;function tK(){if(MA)return Cv;MA=1;var t=JG(),r=P2(),a=ZG(),n=y7(),s=eK(),o=Ll(),l=Ij(),c="[object Map]",m="[object Object]",p="[object Promise]",f="[object Set]",g="[object WeakMap]",b="[object DataView]",x=l(t),v=l(r),E=l(a),y=l(n),w=l(s),k=o;return(t&&k(new t(new ArrayBuffer(1)))!=b||r&&k(new r)!=c||a&&k(a.resolve())!=p||n&&k(new n)!=f||s&&k(new s)!=g)&&(k=function(C){var A=o(C),S=A==m?C.constructor:void 0,P=S?l(S):"";if(P)switch(P){case x:return b;case v:return c;case E:return p;case y:return f;case w:return g}return A}),Cv=k,Cv}var Av,jA;function rK(){if(jA)return Av;jA=1;var t=c7(),r=p7(),a=LG(),n=QG(),s=tK(),o=As(),l=g7(),c=b7(),m=1,p="[object Arguments]",f="[object Array]",g="[object Object]",b=Object.prototype,x=b.hasOwnProperty;function v(E,y,w,k,C,A){var S=o(E),P=o(y),T=S?f:s(E),O=P?f:s(y);T=T==p?g:T,O=O==p?g:O;var R=T==g,D=O==g,$=T==O;if($&&l(E)){if(!l(y))return!1;S=!0,R=!1}if($&&!R)return A||(A=new t),S||c(E)?r(E,y,w,k,C,A):a(E,y,T,w,k,C,A);if(!(w&m)){var j=R&&x.call(E,"__wrapped__"),K=D&&x.call(y,"__wrapped__");if(j||K){var H=j?E.value():E,V=K?y.value():y;return A||(A=new t),C(H,V,w,k,A)}}return $?(A||(A=new t),n(E,y,w,k,C,A)):!1}return Av=v,Av}var _v,RA;function V2(){if(RA)return _v;RA=1;var t=rK(),r=Il();function a(n,s,o,l,c){return n===s?!0:n==null||s==null||!r(n)&&!r(s)?n!==n&&s!==s:t(n,s,o,l,a,c)}return _v=a,_v}var Pv,$A;function aK(){if($A)return Pv;$A=1;var t=c7(),r=V2(),a=1,n=2;function s(o,l,c,m){var p=c.length,f=p,g=!m;if(o==null)return!f;for(o=Object(o);p--;){var b=c[p];if(g&&b[2]?b[1]!==o[b[0]]:!(b[0]in o))return!1}for(;++p<f;){b=c[p];var x=b[0],v=o[x],E=b[1];if(g&&b[2]){if(v===void 0&&!(x in o))return!1}else{var y=new t;if(m)var w=m(v,E,x,o,l,y);if(!(w===void 0?r(E,v,a|n,m,y):w))return!1}}return!0}return Pv=s,Pv}var Tv,LA;function v7(){if(LA)return Tv;LA=1;var t=xi();function r(a){return a===a&&!t(a)}return Tv=r,Tv}var Ov,IA;function nK(){if(IA)return Ov;IA=1;var t=v7(),r=eh();function a(n){for(var s=r(n),o=s.length;o--;){var l=s[o],c=n[l];s[o]=[l,c,t(c)]}return s}return Ov=a,Ov}var Mv,DA;function E7(){if(DA)return Mv;DA=1;function t(r,a){return function(n){return n==null?!1:n[r]===a&&(a!==void 0||r in Object(n))}}return Mv=t,Mv}var jv,FA;function sK(){if(FA)return jv;FA=1;var t=aK(),r=nK(),a=E7();function n(s){var o=r(s);return o.length==1&&o[0][2]?a(o[0][0],o[0][1]):function(l){return l===s||t(l,s,o)}}return jv=n,jv}var Rv,zA;function oK(){if(zA)return Rv;zA=1;function t(r,a){return r!=null&&a in Object(r)}return Rv=t,Rv}var $v,BA;function lK(){if(BA)return $v;BA=1;var t=zj(),r=B2(),a=As(),n=q2(),s=U2(),o=Yg();function l(c,m,p){m=t(m,c);for(var f=-1,g=m.length,b=!1;++f<g;){var x=o(m[f]);if(!(b=c!=null&&p(c,x)))break;c=c[x]}return b||++f!=g?b:(g=c==null?0:c.length,!!g&&s(g)&&n(x,g)&&(a(c)||r(c)))}return $v=l,$v}var Lv,qA;function iK(){if(qA)return Lv;qA=1;var t=oK(),r=lK();function a(n,s){return n!=null&&r(n,s,t)}return Lv=a,Lv}var Iv,UA;function cK(){if(UA)return Iv;UA=1;var t=V2(),r=Bj(),a=iK(),n=C2(),s=v7(),o=E7(),l=Yg(),c=1,m=2;function p(f,g){return n(f)&&s(g)?o(l(f),g):function(b){var x=r(b,f);return x===void 0&&x===g?a(b,f):t(g,x,c|m)}}return Iv=p,Iv}var Dv,VA;function am(){if(VA)return Dv;VA=1;function t(r){return r}return Dv=t,Dv}var Fv,HA;function dK(){if(HA)return Fv;HA=1;function t(r){return function(a){return a?.[r]}}return Fv=t,Fv}var zv,WA;function mK(){if(WA)return zv;WA=1;var t=M2();function r(a){return function(n){return t(n,a)}}return zv=r,zv}var Bv,GA;function uK(){if(GA)return Bv;GA=1;var t=dK(),r=mK(),a=C2(),n=Yg();function s(o){return a(o)?t(n(o)):r(o)}return Bv=s,Bv}var qv,KA;function yi(){if(KA)return qv;KA=1;var t=sK(),r=cK(),a=am(),n=As(),s=uK();function o(l){return typeof l=="function"?l:l==null?a:typeof l=="object"?n(l)?r(l[0],l[1]):t(l):s(l)}return qv=o,qv}var Uv,YA;function w7(){if(YA)return Uv;YA=1;function t(r,a,n,s){for(var o=r.length,l=n+(s?1:-1);s?l--:++l<o;)if(a(r[l],l,r))return l;return-1}return Uv=t,Uv}var Vv,XA;function pK(){if(XA)return Vv;XA=1;function t(r){return r!==r}return Vv=t,Vv}var Hv,QA;function fK(){if(QA)return Hv;QA=1;function t(r,a,n){for(var s=n-1,o=r.length;++s<o;)if(r[s]===a)return s;return-1}return Hv=t,Hv}var Wv,JA;function gK(){if(JA)return Wv;JA=1;var t=w7(),r=pK(),a=fK();function n(s,o,l){return o===o?a(s,o,l):t(s,r,l)}return Wv=n,Wv}var Gv,ZA;function hK(){if(ZA)return Gv;ZA=1;var t=gK();function r(a,n){var s=a==null?0:a.length;return!!s&&t(a,n,0)>-1}return Gv=r,Gv}var Kv,e_;function bK(){if(e_)return Kv;e_=1;function t(r,a,n){for(var s=-1,o=r==null?0:r.length;++s<o;)if(n(a,r[s]))return!0;return!1}return Kv=t,Kv}var Yv,t_;function xK(){if(t_)return Yv;t_=1;function t(){}return Yv=t,Yv}var Xv,r_;function yK(){if(r_)return Xv;r_=1;var t=y7(),r=xK(),a=z2(),n=1/0,s=t&&1/a(new t([,-0]))[1]==n?function(o){return new t(o)}:r;return Xv=s,Xv}var Qv,a_;function vK(){if(a_)return Qv;a_=1;var t=d7(),r=hK(),a=bK(),n=u7(),s=yK(),o=z2(),l=200;function c(m,p,f){var g=-1,b=r,x=m.length,v=!0,E=[],y=E;if(f)v=!1,b=a;else if(x>=l){var w=p?null:s(m);if(w)return o(w);v=!1,b=n,y=new t}else y=p?[]:E;e:for(;++g<x;){var k=m[g],C=p?p(k):k;if(k=f||k!==0?k:0,v&&C===C){for(var A=y.length;A--;)if(y[A]===C)continue e;p&&y.push(C),E.push(k)}else b(y,C,f)||(y!==E&&y.push(C),E.push(k))}return E}return Qv=c,Qv}var Jv,n_;function EK(){if(n_)return Jv;n_=1;var t=yi(),r=vK();function a(n,s){return n&&n.length?r(n,t(s,2)):[]}return Jv=a,Jv}var wK=EK();const s_=Aa(wK);function N7(t,r,a){return r===!0?s_(t,a):Lr(r)?s_(t,r):t}function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pd(t)}var NK=["ref"];function o_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function dl(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?o_(Object(a),!0).forEach(function(n){th(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function kK(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function l_(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S7(n.key),n)}}function SK(t,r,a){return r&&l_(t.prototype,r),a&&l_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function CK(t,r,a){return r=If(r),AK(t,k7()?Reflect.construct(r,a||[],If(t).constructor):r.apply(t,a))}function AK(t,r){if(r&&(Pd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _K(t)}function _K(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!t})()}function If(t){return If=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},If(t)}function PK(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&DN(t,r)}function DN(t,r){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},DN(t,r)}function th(t,r,a){return r=S7(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function S7(t){var r=TK(t,"string");return Pd(r)=="symbol"?r:r+""}function TK(t,r){if(Pd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function OK(t,r){if(t==null)return{};var a=MK(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function MK(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function jK(t){return t.value}function RK(t,r){if(e.isValidElement(t))return e.cloneElement(t,r);if(typeof t=="function")return e.createElement(t,r);r.ref;var a=OK(r,NK);return e.createElement(F2,a)}var i_=1,sc=(function(t){function r(){var a;kK(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=CK(this,r,[].concat(s)),th(a,"lastBoundingBox",{width:-1,height:-1}),a}return PK(r,t),SK(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>i_||Math.abs(s.height-this.lastBoundingBox.height)>i_)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?dl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,o=s.layout,l=s.align,c=s.verticalAlign,m=s.margin,p=s.chartWidth,f=s.chartHeight,g,b;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(l==="center"&&o==="vertical"){var x=this.getBBoxSnapshot();g={left:((p||0)-x.width)/2}}else g=l==="right"?{right:m&&m.right||0}:{left:m&&m.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var v=this.getBBoxSnapshot();b={top:((f||0)-v.height)/2}}else b=c==="bottom"?{bottom:m&&m.bottom||0}:{top:m&&m.top||0};return dl(dl({},g),b)}},{key:"render",value:function(){var n=this,s=this.props,o=s.content,l=s.width,c=s.height,m=s.wrapperStyle,p=s.payloadUniqBy,f=s.payload,g=dl(dl({position:"absolute",width:l||"auto",height:c||"auto"},this.getDefaultPosition(m)),m);return e.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:function(x){n.wrapperNode=x}},RK(o,dl(dl({},this.props),{},{payload:N7(f,p,jK)})))}}],[{key:"getWithHeight",value:function(n,s){var o=dl(dl({},this.defaultProps),n.props),l=o.layout;return l==="vertical"&&$t(n.props.height)?{height:n.props.height}:l==="horizontal"?{width:n.props.width||s}:null}}])})(u.PureComponent);th(sc,"displayName","Legend");th(sc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Zv,c_;function $K(){if(c_)return Zv;c_=1;var t=hp(),r=B2(),a=As(),n=t?t.isConcatSpreadable:void 0;function s(o){return a(o)||r(o)||!!(n&&o&&o[n])}return Zv=s,Zv}var eE,d_;function C7(){if(d_)return eE;d_=1;var t=f7(),r=$K();function a(n,s,o,l,c){var m=-1,p=n.length;for(o||(o=r),c||(c=[]);++m<p;){var f=n[m];s>0&&o(f)?s>1?a(f,s-1,o,l,c):t(c,f):l||(c[c.length]=f)}return c}return eE=a,eE}var tE,m_;function LK(){if(m_)return tE;m_=1;function t(r){return function(a,n,s){for(var o=-1,l=Object(a),c=s(a),m=c.length;m--;){var p=c[r?m:++o];if(n(l[p],p,l)===!1)break}return a}}return tE=t,tE}var rE,u_;function IK(){if(u_)return rE;u_=1;var t=LK(),r=t();return rE=r,rE}var aE,p_;function A7(){if(p_)return aE;p_=1;var t=IK(),r=eh();function a(n,s){return n&&t(n,s,r)}return aE=a,aE}var nE,f_;function DK(){if(f_)return nE;f_=1;var t=yp();function r(a,n){return function(s,o){if(s==null)return s;if(!t(s))return a(s,o);for(var l=s.length,c=n?l:-1,m=Object(s);(n?c--:++c<l)&&o(m[c],c,m)!==!1;);return s}}return nE=r,nE}var sE,g_;function H2(){if(g_)return sE;g_=1;var t=A7(),r=DK(),a=r(t);return sE=a,sE}var oE,h_;function _7(){if(h_)return oE;h_=1;var t=H2(),r=yp();function a(n,s){var o=-1,l=r(n)?Array(n.length):[];return t(n,function(c,m,p){l[++o]=s(c,m,p)}),l}return oE=a,oE}var lE,b_;function FK(){if(b_)return lE;b_=1;function t(r,a){var n=r.length;for(r.sort(a);n--;)r[n]=r[n].value;return r}return lE=t,lE}var iE,x_;function zK(){if(x_)return iE;x_=1;var t=tm();function r(a,n){if(a!==n){var s=a!==void 0,o=a===null,l=a===a,c=t(a),m=n!==void 0,p=n===null,f=n===n,g=t(n);if(!p&&!g&&!c&&a>n||c&&m&&f&&!p&&!g||o&&m&&f||!s&&f||!l)return 1;if(!o&&!c&&!g&&a<n||g&&s&&l&&!o&&!c||p&&s&&l||!m&&l||!f)return-1}return 0}return iE=r,iE}var cE,y_;function BK(){if(y_)return cE;y_=1;var t=zK();function r(a,n,s){for(var o=-1,l=a.criteria,c=n.criteria,m=l.length,p=s.length;++o<m;){var f=t(l[o],c[o]);if(f){if(o>=p)return f;var g=s[o];return f*(g=="desc"?-1:1)}}return a.index-n.index}return cE=r,cE}var dE,v_;function qK(){if(v_)return dE;v_=1;var t=O2(),r=M2(),a=yi(),n=_7(),s=FK(),o=h7(),l=BK(),c=am(),m=As();function p(f,g,b){g.length?g=t(g,function(E){return m(E)?function(y){return r(y,E.length===1?E[0]:E)}:E}):g=[c];var x=-1;g=t(g,o(a));var v=n(f,function(E,y,w){var k=t(g,function(C){return C(E)});return{criteria:k,index:++x,value:E}});return s(v,function(E,y){return l(E,y,b)})}return dE=p,dE}var mE,E_;function UK(){if(E_)return mE;E_=1;function t(r,a,n){switch(n.length){case 0:return r.call(a);case 1:return r.call(a,n[0]);case 2:return r.call(a,n[0],n[1]);case 3:return r.call(a,n[0],n[1],n[2])}return r.apply(a,n)}return mE=t,mE}var uE,w_;function VK(){if(w_)return uE;w_=1;var t=UK(),r=Math.max;function a(n,s,o){return s=r(s===void 0?n.length-1:s,0),function(){for(var l=arguments,c=-1,m=r(l.length-s,0),p=Array(m);++c<m;)p[c]=l[s+c];c=-1;for(var f=Array(s+1);++c<s;)f[c]=l[c];return f[s]=o(p),t(n,this,f)}}return uE=a,uE}var pE,N_;function HK(){if(N_)return pE;N_=1;function t(r){return function(){return r}}return pE=t,pE}var fE,k_;function P7(){if(k_)return fE;k_=1;var t=wc(),r=(function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}})();return fE=r,fE}var gE,S_;function WK(){if(S_)return gE;S_=1;var t=HK(),r=P7(),a=am(),n=r?function(s,o){return r(s,"toString",{configurable:!0,enumerable:!1,value:t(o),writable:!0})}:a;return gE=n,gE}var hE,C_;function GK(){if(C_)return hE;C_=1;var t=800,r=16,a=Date.now;function n(s){var o=0,l=0;return function(){var c=a(),m=r-(c-l);if(l=c,m>0){if(++o>=t)return arguments[0]}else o=0;return s.apply(void 0,arguments)}}return hE=n,hE}var bE,A_;function KK(){if(A_)return bE;A_=1;var t=WK(),r=GK(),a=r(t);return bE=a,bE}var xE,__;function YK(){if(__)return xE;__=1;var t=am(),r=VK(),a=KK();function n(s,o){return a(r(s,o,t),s+"")}return xE=n,xE}var yE,P_;function rh(){if(P_)return yE;P_=1;var t=_2(),r=yp(),a=q2(),n=xi();function s(o,l,c){if(!n(c))return!1;var m=typeof l;return(m=="number"?r(c)&&a(l,c.length):m=="string"&&l in c)?t(c[l],o):!1}return yE=s,yE}var vE,T_;function XK(){if(T_)return vE;T_=1;var t=C7(),r=qK(),a=YK(),n=rh(),s=a(function(o,l){if(o==null)return[];var c=l.length;return c>1&&n(o,l[0],l[1])?l=[]:c>2&&n(l[0],l[1],l[2])&&(l=[l[0]]),r(o,t(l,1),[])});return vE=s,vE}var QK=XK();const W2=Aa(QK);function Cu(t){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cu(t)}function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},FN.apply(this,arguments)}function JK(t,r){return rY(t)||tY(t,r)||eY(t,r)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eY(t,r){if(t){if(typeof t=="string")return O_(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O_(t,r)}}function O_(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function tY(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function rY(t){if(Array.isArray(t))return t}function M_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function EE(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?M_(Object(a),!0).forEach(function(n){aY(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function aY(t,r,a){return r=nY(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function nY(t){var r=sY(t,"string");return Cu(r)=="symbol"?r:r+""}function sY(t,r){if(Cu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function oY(t){return Array.isArray(t)&&vn(t[0])&&vn(t[1])?t.join(" ~ "):t}var lY=function(r){var a=r.separator,n=a===void 0?" : ":a,s=r.contentStyle,o=s===void 0?{}:s,l=r.itemStyle,c=l===void 0?{}:l,m=r.labelStyle,p=m===void 0?{}:m,f=r.payload,g=r.formatter,b=r.itemSorter,x=r.wrapperClassName,v=r.labelClassName,E=r.label,y=r.labelFormatter,w=r.accessibilityLayer,k=w===void 0?!1:w,C=function(){if(f&&f.length){var j={padding:0,margin:0},K=(b?W2(f,b):f).map(function(H,V){if(H.type==="none")return null;var q=EE({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},c),Y=H.formatter||g||oY,z=H.value,L=H.name,Q=z,B=L;if(Y&&Q!=null&&B!=null){var ae=Y(z,L,H,V,f);if(Array.isArray(ae)){var te=JK(ae,2);Q=te[0],B=te[1]}else Q=ae}return e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:q},vn(B)?e.createElement("span",{className:"recharts-tooltip-item-name"},B):null,vn(B)?e.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,e.createElement("span",{className:"recharts-tooltip-item-value"},Q),e.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return e.createElement("ul",{className:"recharts-tooltip-item-list",style:j},K)}return null},A=EE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),S=EE({margin:0},p),P=!qr(E),T=P?E:"",O=ta("recharts-default-tooltip",x),R=ta("recharts-tooltip-label",v);P&&y&&f!==void 0&&f!==null&&(T=y(E,f));var D=k?{role:"status","aria-live":"assertive"}:{};return e.createElement("div",FN({className:O,style:A},D),e.createElement("p",{className:R,style:S},e.isValidElement(T)?T:"".concat(T)),C())};function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Au(t)}function _0(t,r,a){return r=iY(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function iY(t){var r=cY(t,"string");return Au(r)=="symbol"?r:r+""}function cY(t,r){if(Au(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Fm="recharts-tooltip-wrapper",dY={visibility:"hidden"};function mY(t){var r=t.coordinate,a=t.translateX,n=t.translateY;return ta(Fm,_0(_0(_0(_0({},"".concat(Fm,"-right"),$t(a)&&r&&$t(r.x)&&a>=r.x),"".concat(Fm,"-left"),$t(a)&&r&&$t(r.x)&&a<r.x),"".concat(Fm,"-bottom"),$t(n)&&r&&$t(r.y)&&n>=r.y),"".concat(Fm,"-top"),$t(n)&&r&&$t(r.y)&&n<r.y))}function j_(t){var r=t.allowEscapeViewBox,a=t.coordinate,n=t.key,s=t.offsetTopLeft,o=t.position,l=t.reverseDirection,c=t.tooltipDimension,m=t.viewBox,p=t.viewBoxDimension;if(o&&$t(o[n]))return o[n];var f=a[n]-c-s,g=a[n]+s;if(r[n])return l[n]?f:g;if(l[n]){var b=f,x=m[n];return b<x?Math.max(g,m[n]):Math.max(f,m[n])}var v=g+c,E=m[n]+p;return v>E?Math.max(f,m[n]):Math.max(g,m[n])}function uY(t){var r=t.translateX,a=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(r,"px, ").concat(a,"px, 0)"):"translate(".concat(r,"px, ").concat(a,"px)")}}function pY(t){var r=t.allowEscapeViewBox,a=t.coordinate,n=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipBox,c=t.useTranslate3d,m=t.viewBox,p,f,g;return l.height>0&&l.width>0&&a?(f=j_({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:m,viewBoxDimension:m.width}),g=j_({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:n,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:m,viewBoxDimension:m.height}),p=uY({translateX:f,translateY:g,useTranslate3d:c})):p=dY,{cssProperties:p,cssClasses:mY({translateX:f,translateY:g,coordinate:a})}}function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Td(t)}function R_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function $_(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?R_(Object(a),!0).forEach(function(n){BN(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function fY(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function gY(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O7(n.key),n)}}function hY(t,r,a){return r&&gY(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bY(t,r,a){return r=Df(r),xY(t,T7()?Reflect.construct(r,a||[],Df(t).constructor):r.apply(t,a))}function xY(t,r){if(r&&(Td(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yY(t)}function yY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T7=function(){return!!t})()}function Df(t){return Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Df(t)}function vY(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&zN(t,r)}function zN(t,r){return zN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zN(t,r)}function BN(t,r,a){return r=O7(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function O7(t){var r=EY(t,"string");return Td(r)=="symbol"?r:r+""}function EY(t,r){if(Td(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var L_=1,wY=(function(t){function r(){var a;fY(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=bY(this,r,[].concat(s)),BN(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),BN(a,"handleKeyDown",function(l){if(l.key==="Escape"){var c,m,p,f;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(m=a.props.coordinate)===null||m===void 0?void 0:m.x)!==null&&c!==void 0?c:0,y:(p=(f=a.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&p!==void 0?p:0}})}}),a}return vY(r,t),hY(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>L_||Math.abs(n.height-this.state.lastBoundingBox.height)>L_)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,o=s.active,l=s.allowEscapeViewBox,c=s.animationDuration,m=s.animationEasing,p=s.children,f=s.coordinate,g=s.hasPayload,b=s.isAnimationActive,x=s.offset,v=s.position,E=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,k=s.wrapperStyle,C=pY({allowEscapeViewBox:l,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:E,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),A=C.cssClasses,S=C.cssProperties,P=$_($_({transition:b&&o?"transform ".concat(c,"ms ").concat(m):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&g?"visible":"hidden",position:"absolute",top:0,left:0},k);return e.createElement("div",{tabIndex:-1,className:A,style:P,ref:function(O){n.wrapperNode=O}},p)}}])})(u.PureComponent),NY=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},nm={isSsr:NY()};function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Od(t)}function I_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function D_(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?I_(Object(a),!0).forEach(function(n){G2(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function kY(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function SY(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j7(n.key),n)}}function CY(t,r,a){return r&&SY(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function AY(t,r,a){return r=Ff(r),_Y(t,M7()?Reflect.construct(r,a||[],Ff(t).constructor):r.apply(t,a))}function _Y(t,r){if(r&&(Od(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PY(t)}function PY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M7=function(){return!!t})()}function Ff(t){return Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ff(t)}function TY(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&qN(t,r)}function qN(t,r){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qN(t,r)}function G2(t,r,a){return r=j7(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function j7(t){var r=OY(t,"string");return Od(r)=="symbol"?r:r+""}function OY(t,r){if(Od(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function MY(t){return t.dataKey}function jY(t,r){return e.isValidElement(t)?e.cloneElement(t,r):typeof t=="function"?e.createElement(t,r):e.createElement(lY,r)}var ys=(function(t){function r(){return kY(this,r),AY(this,r,arguments)}return TY(r,t),CY(r,[{key:"render",value:function(){var n=this,s=this.props,o=s.active,l=s.allowEscapeViewBox,c=s.animationDuration,m=s.animationEasing,p=s.content,f=s.coordinate,g=s.filterNull,b=s.isAnimationActive,x=s.offset,v=s.payload,E=s.payloadUniqBy,y=s.position,w=s.reverseDirection,k=s.useTranslate3d,C=s.viewBox,A=s.wrapperStyle,S=v??[];g&&S.length&&(S=N7(v.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),E,MY));var P=S.length>0;return e.createElement(wY,{allowEscapeViewBox:l,animationDuration:c,animationEasing:m,isAnimationActive:b,active:o,coordinate:f,hasPayload:P,offset:x,position:y,reverseDirection:w,useTranslate3d:k,viewBox:C,wrapperStyle:A},jY(p,D_(D_({},this.props),{},{payload:S})))}}])})(u.PureComponent);G2(ys,"displayName","Tooltip");G2(ys,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wE,F_;function RY(){if(F_)return wE;F_=1;var t=Zo(),r=function(){return t.Date.now()};return wE=r,wE}var NE,z_;function $Y(){if(z_)return NE;z_=1;var t=/\s/;function r(a){for(var n=a.length;n--&&t.test(a.charAt(n)););return n}return NE=r,NE}var kE,B_;function LY(){if(B_)return kE;B_=1;var t=$Y(),r=/^\s+/;function a(n){return n&&n.slice(0,t(n)+1).replace(r,"")}return kE=a,kE}var SE,q_;function R7(){if(q_)return SE;q_=1;var t=LY(),r=xi(),a=tm(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;function m(p){if(typeof p=="number")return p;if(a(p))return n;if(r(p)){var f=typeof p.valueOf=="function"?p.valueOf():p;p=r(f)?f+"":f}if(typeof p!="string")return p===0?p:+p;p=t(p);var g=o.test(p);return g||l.test(p)?c(p.slice(2),g?2:8):s.test(p)?n:+p}return SE=m,SE}var CE,U_;function IY(){if(U_)return CE;U_=1;var t=xi(),r=RY(),a=R7(),n="Expected a function",s=Math.max,o=Math.min;function l(c,m,p){var f,g,b,x,v,E,y=0,w=!1,k=!1,C=!0;if(typeof c!="function")throw new TypeError(n);m=a(m)||0,t(p)&&(w=!!p.leading,k="maxWait"in p,b=k?s(a(p.maxWait)||0,m):b,C="trailing"in p?!!p.trailing:C);function A(K){var H=f,V=g;return f=g=void 0,y=K,x=c.apply(V,H),x}function S(K){return y=K,v=setTimeout(O,m),w?A(K):x}function P(K){var H=K-E,V=K-y,q=m-H;return k?o(q,b-V):q}function T(K){var H=K-E,V=K-y;return E===void 0||H>=m||H<0||k&&V>=b}function O(){var K=r();if(T(K))return R(K);v=setTimeout(O,P(K))}function R(K){return v=void 0,C&&f?A(K):(f=g=void 0,x)}function D(){v!==void 0&&clearTimeout(v),y=0,f=E=g=v=void 0}function $(){return v===void 0?x:R(r())}function j(){var K=r(),H=T(K);if(f=arguments,g=this,E=K,H){if(v===void 0)return S(E);if(k)return clearTimeout(v),v=setTimeout(O,m),A(E)}return v===void 0&&(v=setTimeout(O,m)),x}return j.cancel=D,j.flush=$,j}return CE=l,CE}var AE,V_;function DY(){if(V_)return AE;V_=1;var t=IY(),r=xi(),a="Expected a function";function n(s,o,l){var c=!0,m=!0;if(typeof s!="function")throw new TypeError(a);return r(l)&&(c="leading"in l?!!l.leading:c,m="trailing"in l?!!l.trailing:m),t(s,o,{leading:c,maxWait:o,trailing:m})}return AE=n,AE}var FY=DY();const $7=Aa(FY);function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_u(t)}function H_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function P0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?H_(Object(a),!0).forEach(function(n){zY(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function zY(t,r,a){return r=BY(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function BY(t){var r=qY(t,"string");return _u(r)=="symbol"?r:r+""}function qY(t,r){if(_u(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function UY(t,r){return GY(t)||WY(t,r)||HY(t,r)||VY()}function VY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HY(t,r){if(t){if(typeof t=="string")return W_(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return W_(t,r)}}function W_(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function WY(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function GY(t){if(Array.isArray(t))return t}var du=u.forwardRef(function(t,r){var a=t.aspect,n=t.initialDimension,s=n===void 0?{width:-1,height:-1}:n,o=t.width,l=o===void 0?"100%":o,c=t.height,m=c===void 0?"100%":c,p=t.minWidth,f=p===void 0?0:p,g=t.minHeight,b=t.maxHeight,x=t.children,v=t.debounce,E=v===void 0?0:v,y=t.id,w=t.className,k=t.onResize,C=t.style,A=C===void 0?{}:C,S=u.useRef(null),P=u.useRef();P.current=k,u.useImperativeHandle(r,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var T=u.useState({containerWidth:s.width,containerHeight:s.height}),O=UY(T,2),R=O[0],D=O[1],$=u.useCallback(function(K,H){D(function(V){var q=Math.round(K),Y=Math.round(H);return V.containerWidth===q&&V.containerHeight===Y?V:{containerWidth:q,containerHeight:Y}})},[]);u.useEffect(function(){var K=function(L){var Q,B=L[0].contentRect,ae=B.width,te=B.height;$(ae,te),(Q=P.current)===null||Q===void 0||Q.call(P,ae,te)};E>0&&(K=$7(K,E,{trailing:!0,leading:!1}));var H=new ResizeObserver(K),V=S.current.getBoundingClientRect(),q=V.width,Y=V.height;return $(q,Y),H.observe(S.current),function(){H.disconnect()}},[$,E]);var j=u.useMemo(function(){var K=R.containerWidth,H=R.containerHeight;if(K<0||H<0)return null;Nl(Zi(l)||Zi(m),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,m),Nl(!a||a>0,"The aspect(%s) must be greater than zero.",a);var V=Zi(l)?K:l,q=Zi(m)?H:m;a&&a>0&&(V?q=V/a:q&&(V=q*a),b&&q>b&&(q=b)),Nl(V>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,q,l,m,f,g,a);var Y=!Array.isArray(x)&&wl(x.type).endsWith("Chart");return e.Children.map(x,function(z){return e.isValidElement(z)?u.cloneElement(z,P0({width:V,height:q},Y?{style:P0({height:"100%",width:"100%",maxHeight:q,maxWidth:V},z.props.style)}:{})):z})},[a,x,m,b,g,f,R,l]);return e.createElement("div",{id:y?"".concat(y):void 0,className:ta("recharts-responsive-container",w),style:P0(P0({},A),{},{width:l,height:m,minWidth:f,minHeight:g,maxHeight:b}),ref:S},j)}),Pu=function(r){return null};Pu.displayName="Cell";function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tu(t)}function G_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function UN(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?G_(Object(a),!0).forEach(function(n){KY(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G_(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function KY(t,r,a){return r=YY(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function YY(t){var r=XY(t,"string");return Tu(r)=="symbol"?r:r+""}function XY(t,r){if(Tu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Qc={widthCache:{},cacheCount:0},QY=2e3,JY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K_="recharts_measurement_span";function ZY(t){var r=UN({},t);return Object.keys(r).forEach(function(a){r[a]||delete r[a]}),r}var mu=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||nm.isSsr)return{width:0,height:0};var n=ZY(a),s=JSON.stringify({text:r,copyStyle:n});if(Qc.widthCache[s])return Qc.widthCache[s];try{var o=document.getElementById(K_);o||(o=document.createElement("span"),o.setAttribute("id",K_),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var l=UN(UN({},JY),n);Object.assign(o.style,l),o.textContent="".concat(r);var c=o.getBoundingClientRect(),m={width:c.width,height:c.height};return Qc.widthCache[s]=m,++Qc.cacheCount>QY&&(Qc.cacheCount=0,Qc.widthCache={}),m}catch{return{width:0,height:0}}},eX=function(r){return{top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft}};function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ou(t)}function zf(t,r){return nX(t)||aX(t,r)||rX(t,r)||tX()}function tX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rX(t,r){if(t){if(typeof t=="string")return Y_(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Y_(t,r)}}function Y_(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function aX(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;m=!1}else for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function nX(t){if(Array.isArray(t))return t}function sX(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function X_(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lX(n.key),n)}}function oX(t,r,a){return r&&X_(t.prototype,r),a&&X_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function lX(t){var r=iX(t,"string");return Ou(r)=="symbol"?r:r+""}function iX(t,r){if(Ou(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Q_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mX=Object.keys(L7),cd="NaN";function uX(t,r){return t*L7[r]}var T0=(function(){function t(r,a){sX(this,t),this.num=r,this.unit=a,this.num=r,this.unit=a,Number.isNaN(r)&&(this.unit=""),a!==""&&!cX.test(a)&&(this.num=NaN,this.unit=""),mX.includes(a)&&(this.num=uX(r,a),this.unit="px")}return oX(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var n,s=(n=dX.exec(a))!==null&&n!==void 0?n:[],o=zf(s,3),l=o[1],c=o[2];return new t(parseFloat(l),c??"")}}])})();function I7(t){if(t.includes(cd))return cd;for(var r=t;r.includes("*")||r.includes("/");){var a,n=(a=Q_.exec(r))!==null&&a!==void 0?a:[],s=zf(n,4),o=s[1],l=s[2],c=s[3],m=T0.parse(o??""),p=T0.parse(c??""),f=l==="*"?m.multiply(p):m.divide(p);if(f.isNaN())return cd;r=r.replace(Q_,f.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var g,b=(g=J_.exec(r))!==null&&g!==void 0?g:[],x=zf(b,4),v=x[1],E=x[2],y=x[3],w=T0.parse(v??""),k=T0.parse(y??""),C=E==="+"?w.add(k):w.subtract(k);if(C.isNaN())return cd;r=r.replace(J_,C.toString())}return r}var Z_=/\(([^()]*)\)/;function pX(t){for(var r=t;r.includes("(");){var a=Z_.exec(r),n=zf(a,2),s=n[1];r=r.replace(Z_,I7(s))}return r}function fX(t){var r=t.replace(/\s+/g,"");return r=pX(r),r=I7(r),r}function gX(t){try{return fX(t)}catch{return cd}}function _E(t){var r=gX(t.slice(5,-1));return r===cd?"":r}var hX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bX=["dx","dy","angle","className","breakAll"];function VN(){return VN=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},VN.apply(this,arguments)}function e6(t,r){if(t==null)return{};var a=xX(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xX(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function t6(t,r){return wX(t)||EX(t,r)||vX(t,r)||yX()}function yX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vX(t,r){if(t){if(typeof t=="string")return r6(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r6(t,r)}}function r6(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function EX(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;m=!1}else for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function wX(t){if(Array.isArray(t))return t}var D7=/[ \f\n\r\t\v\u2028\u2029]+/,F7=function(r){var a=r.children,n=r.breakAll,s=r.style;try{var o=[];qr(a)||(n?o=a.toString().split(""):o=a.toString().split(D7));var l=o.map(function(m){return{word:m,width:mu(m,s).width}}),c=n?0:mu("",s).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}},NX=function(r,a,n,s,o){var l=r.maxLines,c=r.children,m=r.style,p=r.breakAll,f=$t(l),g=c,b=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(q,Y){var z=Y.word,L=Y.width,Q=q[q.length-1];if(Q&&(s==null||o||Q.width+L+n<Number(s)))Q.words.push(z),Q.width+=L+n;else{var B={words:[z],width:L};q.push(B)}return q},[])},x=b(a),v=function(V){return V.reduce(function(q,Y){return q.width>Y.width?q:Y})};if(!f)return x;for(var E="",y=function(V){var q=g.slice(0,V),Y=F7({breakAll:p,style:m,children:q+E}).wordsWithComputedWidth,z=b(Y),L=z.length>l||v(z).width>Number(s);return[L,z]},w=0,k=g.length-1,C=0,A;w<=k&&C<=g.length-1;){var S=Math.floor((w+k)/2),P=S-1,T=y(P),O=t6(T,2),R=O[0],D=O[1],$=y(S),j=t6($,1),K=j[0];if(!R&&!K&&(w=S+1),R&&K&&(k=S-1),!R&&K){A=D;break}C++}return A||x},a6=function(r){var a=qr(r)?[]:r.toString().split(D7);return[{words:a}]},kX=function(r){var a=r.width,n=r.scaleToFit,s=r.children,o=r.style,l=r.breakAll,c=r.maxLines;if((a||n)&&!nm.isSsr){var m,p,f=F7({breakAll:l,children:s,style:o});if(f){var g=f.wordsWithComputedWidth,b=f.spaceWidth;m=g,p=b}else return a6(s);return NX({breakAll:l,children:s,maxLines:c,style:o},m,p,a,n)}return a6(s)},n6="#808080",Bf=function(r){var a=r.x,n=a===void 0?0:a,s=r.y,o=s===void 0?0:s,l=r.lineHeight,c=l===void 0?"1em":l,m=r.capHeight,p=m===void 0?"0.71em":m,f=r.scaleToFit,g=f===void 0?!1:f,b=r.textAnchor,x=b===void 0?"start":b,v=r.verticalAnchor,E=v===void 0?"end":v,y=r.fill,w=y===void 0?n6:y,k=e6(r,hX),C=u.useMemo(function(){return kX({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:g,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,g,k.style,k.width]),A=k.dx,S=k.dy,P=k.angle,T=k.className,O=k.breakAll,R=e6(k,bX);if(!vn(n)||!vn(o))return null;var D=n+($t(A)?A:0),$=o+($t(S)?S:0),j;switch(E){case"start":j=_E("calc(".concat(p,")"));break;case"middle":j=_E("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(p," / 2))"));break;default:j=_E("calc(".concat(C.length-1," * -").concat(c,")"));break}var K=[];if(g){var H=C[0].width,V=k.width;K.push("scale(".concat(($t(V)?V/H:1)/H,")"))}return P&&K.push("rotate(".concat(P,", ").concat(D,", ").concat($,")")),K.length&&(R.transform=K.join(" ")),e.createElement("text",VN({},Xr(R,!0),{x:D,y:$,className:ta("recharts-text",T),textAnchor:x,fill:w.includes("url")?n6:w}),C.map(function(q,Y){var z=q.words.join(O?"":" ");return e.createElement("tspan",{x:D,dy:Y===0?j:c,key:"".concat(z,"-").concat(Y)},z)}))};function mi(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function SX(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function K2(t){let r,a,n;t.length!==2?(r=mi,a=(c,m)=>mi(t(c),m),n=(c,m)=>t(c)-m):(r=t===mi||t===SX?t:CX,a=t,n=t);function s(c,m,p=0,f=c.length){if(p<f){if(r(m,m)!==0)return f;do{const g=p+f>>>1;a(c[g],m)<0?p=g+1:f=g}while(p<f)}return p}function o(c,m,p=0,f=c.length){if(p<f){if(r(m,m)!==0)return f;do{const g=p+f>>>1;a(c[g],m)<=0?p=g+1:f=g}while(p<f)}return p}function l(c,m,p=0,f=c.length){const g=s(c,m,p,f-1);return g>p&&n(c[g-1],m)>-n(c[g],m)?g-1:g}return{left:s,center:l,right:o}}function CX(){return 0}function z7(t){return t===null?NaN:+t}function*AX(t,r){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const _X=K2(mi),vp=_X.right;K2(z7).center;class s6 extends Map{constructor(r,a=OX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),r!=null)for(const[n,s]of r)this.set(n,s)}get(r){return super.get(o6(this,r))}has(r){return super.has(o6(this,r))}set(r,a){return super.set(PX(this,r),a)}delete(r){return super.delete(TX(this,r))}}function o6({_intern:t,_key:r},a){const n=r(a);return t.has(n)?t.get(n):a}function PX({_intern:t,_key:r},a){const n=r(a);return t.has(n)?t.get(n):(t.set(n,a),a)}function TX({_intern:t,_key:r},a){const n=r(a);return t.has(n)&&(a=t.get(n),t.delete(n)),a}function OX(t){return t!==null&&typeof t=="object"?t.valueOf():t}function MX(t=mi){if(t===mi)return B7;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,a)=>{const n=t(r,a);return n||n===0?n:(t(a,a)===0)-(t(r,r)===0)}}function B7(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const jX=Math.sqrt(50),RX=Math.sqrt(10),$X=Math.sqrt(2);function qf(t,r,a){const n=(r-t)/Math.max(0,a),s=Math.floor(Math.log10(n)),o=n/Math.pow(10,s),l=o>=jX?10:o>=RX?5:o>=$X?2:1;let c,m,p;return s<0?(p=Math.pow(10,-s)/l,c=Math.round(t*p),m=Math.round(r*p),c/p<t&&++c,m/p>r&&--m,p=-p):(p=Math.pow(10,s)*l,c=Math.round(t/p),m=Math.round(r/p),c*p<t&&++c,m*p>r&&--m),m<c&&.5<=a&&a<2?qf(t,r,a*2):[c,m,p]}function HN(t,r,a){if(r=+r,t=+t,a=+a,!(a>0))return[];if(t===r)return[t];const n=r<t,[s,o,l]=n?qf(r,t,a):qf(t,r,a);if(!(o>=s))return[];const c=o-s+1,m=new Array(c);if(n)if(l<0)for(let p=0;p<c;++p)m[p]=(o-p)/-l;else for(let p=0;p<c;++p)m[p]=(o-p)*l;else if(l<0)for(let p=0;p<c;++p)m[p]=(s+p)/-l;else for(let p=0;p<c;++p)m[p]=(s+p)*l;return m}function WN(t,r,a){return r=+r,t=+t,a=+a,qf(t,r,a)[2]}function GN(t,r,a){r=+r,t=+t,a=+a;const n=r<t,s=n?WN(r,t,a):WN(t,r,a);return(n?-1:1)*(s<0?1/-s:s)}function l6(t,r){let a;for(const n of t)n!=null&&(a<n||a===void 0&&n>=n)&&(a=n);return a}function i6(t,r){let a;for(const n of t)n!=null&&(a>n||a===void 0&&n>=n)&&(a=n);return a}function q7(t,r,a=0,n=1/0,s){if(r=Math.floor(r),a=Math.floor(Math.max(0,a)),n=Math.floor(Math.min(t.length-1,n)),!(a<=r&&r<=n))return t;for(s=s===void 0?B7:MX(s);n>a;){if(n-a>600){const m=n-a+1,p=r-a+1,f=Math.log(m),g=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*g*(m-g)/m)*(p-m/2<0?-1:1),x=Math.max(a,Math.floor(r-p*g/m+b)),v=Math.min(n,Math.floor(r+(m-p)*g/m+b));q7(t,r,x,v,s)}const o=t[r];let l=a,c=n;for(zm(t,a,r),s(t[n],o)>0&&zm(t,a,n);l<c;){for(zm(t,l,c),++l,--c;s(t[l],o)<0;)++l;for(;s(t[c],o)>0;)--c}s(t[a],o)===0?zm(t,a,c):(++c,zm(t,c,n)),c<=r&&(a=c+1),r<=c&&(n=c-1)}return t}function zm(t,r,a){const n=t[r];t[r]=t[a],t[a]=n}function LX(t,r,a){if(t=Float64Array.from(AX(t)),!(!(n=t.length)||isNaN(r=+r))){if(r<=0||n<2)return i6(t);if(r>=1)return l6(t);var n,s=(n-1)*r,o=Math.floor(s),l=l6(q7(t,o).subarray(0,o+1)),c=i6(t.subarray(o+1));return l+(c-l)*(s-o)}}function IX(t,r,a=z7){if(!(!(n=t.length)||isNaN(r=+r))){if(r<=0||n<2)return+a(t[0],0,t);if(r>=1)return+a(t[n-1],n-1,t);var n,s=(n-1)*r,o=Math.floor(s),l=+a(t[o],o,t),c=+a(t[o+1],o+1,t);return l+(c-l)*(s-o)}}function DX(t,r,a){t=+t,r=+r,a=(s=arguments.length)<2?(r=t,t=0,1):s<3?1:+a;for(var n=-1,s=Math.max(0,Math.ceil((r-t)/a))|0,o=new Array(s);++n<s;)o[n]=t+n*a;return o}function so(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Dl(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const KN=Symbol("implicit");function Y2(){var t=new s6,r=[],a=[],n=KN;function s(o){let l=t.get(o);if(l===void 0){if(n!==KN)return n;t.set(o,l=r.push(o)-1)}return a[l%a.length]}return s.domain=function(o){if(!arguments.length)return r.slice();r=[],t=new s6;for(const l of o)t.has(l)||t.set(l,r.push(l)-1);return s},s.range=function(o){return arguments.length?(a=Array.from(o),s):a.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return Y2(r,a).unknown(n)},so.apply(s,arguments),s}function Mu(){var t=Y2().unknown(void 0),r=t.domain,a=t.range,n=0,s=1,o,l,c=!1,m=0,p=0,f=.5;delete t.unknown;function g(){var b=r().length,x=s<n,v=x?s:n,E=x?n:s;o=(E-v)/Math.max(1,b-m+p*2),c&&(o=Math.floor(o)),v+=(E-v-o*(b-m))*f,l=o*(1-m),c&&(v=Math.round(v),l=Math.round(l));var y=DX(b).map(function(w){return v+o*w});return a(x?y.reverse():y)}return t.domain=function(b){return arguments.length?(r(b),g()):r()},t.range=function(b){return arguments.length?([n,s]=b,n=+n,s=+s,g()):[n,s]},t.rangeRound=function(b){return[n,s]=b,n=+n,s=+s,c=!0,g()},t.bandwidth=function(){return l},t.step=function(){return o},t.round=function(b){return arguments.length?(c=!!b,g()):c},t.padding=function(b){return arguments.length?(m=Math.min(1,p=+b),g()):m},t.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),g()):m},t.paddingOuter=function(b){return arguments.length?(p=+b,g()):p},t.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),g()):f},t.copy=function(){return Mu(r(),[n,s]).round(c).paddingInner(m).paddingOuter(p).align(f)},so.apply(g(),arguments)}function U7(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return U7(r())},t}function uu(){return U7(Mu.apply(null,arguments).paddingInner(1))}function X2(t,r,a){t.prototype=r.prototype=a,a.constructor=t}function V7(t,r){var a=Object.create(t.prototype);for(var n in r)a[n]=r[n];return a}function Ep(){}var ju=.7,Uf=1/ju,xd="\\s*([+-]?\\d+)\\s*",Ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FX=/^#([0-9a-f]{3,8})$/,zX=new RegExp(`^rgb\\(${xd},${xd},${xd}\\)$`),BX=new RegExp(`^rgb\\(${qo},${qo},${qo}\\)$`),qX=new RegExp(`^rgba\\(${xd},${xd},${xd},${Ru}\\)$`),UX=new RegExp(`^rgba\\(${qo},${qo},${qo},${Ru}\\)$`),VX=new RegExp(`^hsl\\(${Ru},${qo},${qo}\\)$`),HX=new RegExp(`^hsla\\(${Ru},${qo},${qo},${Ru}\\)$`),c6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X2(Ep,$u,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:d6,formatHex:d6,formatHex8:WX,formatHsl:GX,formatRgb:m6,toString:m6});function d6(){return this.rgb().formatHex()}function WX(){return this.rgb().formatHex8()}function GX(){return H7(this).formatHsl()}function m6(){return this.rgb().formatRgb()}function $u(t){var r,a;return t=(t+"").trim().toLowerCase(),(r=FX.exec(t))?(a=r[1].length,r=parseInt(r[1],16),a===6?u6(r):a===3?new Ns(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):a===8?O0(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):a===4?O0(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=zX.exec(t))?new Ns(r[1],r[2],r[3],1):(r=BX.exec(t))?new Ns(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=qX.exec(t))?O0(r[1],r[2],r[3],r[4]):(r=UX.exec(t))?O0(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=VX.exec(t))?g6(r[1],r[2]/100,r[3]/100,1):(r=HX.exec(t))?g6(r[1],r[2]/100,r[3]/100,r[4]):c6.hasOwnProperty(t)?u6(c6[t]):t==="transparent"?new Ns(NaN,NaN,NaN,0):null}function u6(t){return new Ns(t>>16&255,t>>8&255,t&255,1)}function O0(t,r,a,n){return n<=0&&(t=r=a=NaN),new Ns(t,r,a,n)}function KX(t){return t instanceof Ep||(t=$u(t)),t?(t=t.rgb(),new Ns(t.r,t.g,t.b,t.opacity)):new Ns}function YN(t,r,a,n){return arguments.length===1?KX(t):new Ns(t,r,a,n??1)}function Ns(t,r,a,n){this.r=+t,this.g=+r,this.b=+a,this.opacity=+n}X2(Ns,YN,V7(Ep,{brighter(t){return t=t==null?Uf:Math.pow(Uf,t),new Ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ju:Math.pow(ju,t),new Ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ns(oc(this.r),oc(this.g),oc(this.b),Vf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p6,formatHex:p6,formatHex8:YX,formatRgb:f6,toString:f6}));function p6(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}`}function YX(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}${ec((isNaN(this.opacity)?1:this.opacity)*255)}`}function f6(){const t=Vf(this.opacity);return`${t===1?"rgb(":"rgba("}${oc(this.r)}, ${oc(this.g)}, ${oc(this.b)}${t===1?")":`, ${t})`}`}function Vf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function oc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ec(t){return t=oc(t),(t<16?"0":"")+t.toString(16)}function g6(t,r,a,n){return n<=0?t=r=a=NaN:a<=0||a>=1?t=r=NaN:r<=0&&(t=NaN),new Eo(t,r,a,n)}function H7(t){if(t instanceof Eo)return new Eo(t.h,t.s,t.l,t.opacity);if(t instanceof Ep||(t=$u(t)),!t)return new Eo;if(t instanceof Eo)return t;t=t.rgb();var r=t.r/255,a=t.g/255,n=t.b/255,s=Math.min(r,a,n),o=Math.max(r,a,n),l=NaN,c=o-s,m=(o+s)/2;return c?(r===o?l=(a-n)/c+(a<n)*6:a===o?l=(n-r)/c+2:l=(r-a)/c+4,c/=m<.5?o+s:2-o-s,l*=60):c=m>0&&m<1?0:l,new Eo(l,c,m,t.opacity)}function XX(t,r,a,n){return arguments.length===1?H7(t):new Eo(t,r,a,n??1)}function Eo(t,r,a,n){this.h=+t,this.s=+r,this.l=+a,this.opacity=+n}X2(Eo,XX,V7(Ep,{brighter(t){return t=t==null?Uf:Math.pow(Uf,t),new Eo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ju:Math.pow(ju,t),new Eo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*r,s=2*a-n;return new Ns(PE(t>=240?t-240:t+120,s,n),PE(t,s,n),PE(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Eo(h6(this.h),M0(this.s),M0(this.l),Vf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vf(this.opacity);return`${t===1?"hsl(":"hsla("}${h6(this.h)}, ${M0(this.s)*100}%, ${M0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function h6(t){return t=(t||0)%360,t<0?t+360:t}function M0(t){return Math.max(0,Math.min(1,t||0))}function PE(t,r,a){return(t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r)*255}const Q2=t=>()=>t;function QX(t,r){return function(a){return t+a*r}}function JX(t,r,a){return t=Math.pow(t,a),r=Math.pow(r,a)-t,a=1/a,function(n){return Math.pow(t+n*r,a)}}function ZX(t){return(t=+t)==1?W7:function(r,a){return a-r?JX(r,a,t):Q2(isNaN(r)?a:r)}}function W7(t,r){var a=r-t;return a?QX(t,a):Q2(isNaN(t)?r:t)}const b6=(function t(r){var a=ZX(r);function n(s,o){var l=a((s=YN(s)).r,(o=YN(o)).r),c=a(s.g,o.g),m=a(s.b,o.b),p=W7(s.opacity,o.opacity);return function(f){return s.r=l(f),s.g=c(f),s.b=m(f),s.opacity=p(f),s+""}}return n.gamma=t,n})(1);function eQ(t,r){r||(r=[]);var a=t?Math.min(r.length,t.length):0,n=r.slice(),s;return function(o){for(s=0;s<a;++s)n[s]=t[s]*(1-o)+r[s]*o;return n}}function tQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rQ(t,r){var a=r?r.length:0,n=t?Math.min(a,t.length):0,s=new Array(n),o=new Array(a),l;for(l=0;l<n;++l)s[l]=sm(t[l],r[l]);for(;l<a;++l)o[l]=r[l];return function(c){for(l=0;l<n;++l)o[l]=s[l](c);return o}}function aQ(t,r){var a=new Date;return t=+t,r=+r,function(n){return a.setTime(t*(1-n)+r*n),a}}function Hf(t,r){return t=+t,r=+r,function(a){return t*(1-a)+r*a}}function nQ(t,r){var a={},n={},s;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in t?a[s]=sm(t[s],r[s]):n[s]=r[s];return function(o){for(s in a)n[s]=a[s](o);return n}}var XN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TE=new RegExp(XN.source,"g");function sQ(t){return function(){return t}}function oQ(t){return function(r){return t(r)+""}}function lQ(t,r){var a=XN.lastIndex=TE.lastIndex=0,n,s,o,l=-1,c=[],m=[];for(t=t+"",r=r+"";(n=XN.exec(t))&&(s=TE.exec(r));)(o=s.index)>a&&(o=r.slice(a,o),c[l]?c[l]+=o:c[++l]=o),(n=n[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,m.push({i:l,x:Hf(n,s)})),a=TE.lastIndex;return a<r.length&&(o=r.slice(a),c[l]?c[l]+=o:c[++l]=o),c.length<2?m[0]?oQ(m[0].x):sQ(r):(r=m.length,function(p){for(var f=0,g;f<r;++f)c[(g=m[f]).i]=g.x(p);return c.join("")})}function sm(t,r){var a=typeof r,n;return r==null||a==="boolean"?Q2(r):(a==="number"?Hf:a==="string"?(n=$u(r))?(r=n,b6):lQ:r instanceof $u?b6:r instanceof Date?aQ:tQ(r)?eQ:Array.isArray(r)?rQ:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?nQ:Hf)(t,r)}function J2(t,r){return t=+t,r=+r,function(a){return Math.round(t*(1-a)+r*a)}}function iQ(t,r){r===void 0&&(r=t,t=sm);for(var a=0,n=r.length-1,s=r[0],o=new Array(n<0?0:n);a<n;)o[a]=t(s,s=r[++a]);return function(l){var c=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return o[c](l-c)}}function cQ(t){return function(){return t}}function Wf(t){return+t}var x6=[0,1];function os(t){return t}function QN(t,r){return(r-=t=+t)?function(a){return(a-t)/r}:cQ(isNaN(r)?NaN:.5)}function dQ(t,r){var a;return t>r&&(a=t,t=r,r=a),function(n){return Math.max(t,Math.min(r,n))}}function mQ(t,r,a){var n=t[0],s=t[1],o=r[0],l=r[1];return s<n?(n=QN(s,n),o=a(l,o)):(n=QN(n,s),o=a(o,l)),function(c){return o(n(c))}}function uQ(t,r,a){var n=Math.min(t.length,r.length)-1,s=new Array(n),o=new Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++l<n;)s[l]=QN(t[l],t[l+1]),o[l]=a(r[l],r[l+1]);return function(c){var m=vp(t,c,1,n)-1;return o[m](s[m](c))}}function wp(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ah(){var t=x6,r=x6,a=sm,n,s,o,l=os,c,m,p;function f(){var b=Math.min(t.length,r.length);return l!==os&&(l=dQ(t[0],t[b-1])),c=b>2?uQ:mQ,m=p=null,g}function g(b){return b==null||isNaN(b=+b)?o:(m||(m=c(t.map(n),r,a)))(n(l(b)))}return g.invert=function(b){return l(s((p||(p=c(r,t.map(n),Hf)))(b)))},g.domain=function(b){return arguments.length?(t=Array.from(b,Wf),f()):t.slice()},g.range=function(b){return arguments.length?(r=Array.from(b),f()):r.slice()},g.rangeRound=function(b){return r=Array.from(b),a=J2,f()},g.clamp=function(b){return arguments.length?(l=b?!0:os,f()):l!==os},g.interpolate=function(b){return arguments.length?(a=b,f()):a},g.unknown=function(b){return arguments.length?(o=b,g):o},function(b,x){return n=b,s=x,f()}}function Z2(){return ah()(os,os)}function pQ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gf(t,r){if(!isFinite(t)||t===0)return null;var a=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"),n=t.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+t.slice(a+1)]}function Md(t){return t=Gf(Math.abs(t)),t?t[1]:NaN}function fQ(t,r){return function(a,n){for(var s=a.length,o=[],l=0,c=t[0],m=0;s>0&&c>0&&(m+c+1>n&&(c=Math.max(1,n-m)),o.push(a.substring(s-=c,s+c)),!((m+=c+1)>n));)c=t[l=(l+1)%t.length];return o.reverse().join(r)}}function gQ(t){return function(r){return r.replace(/[0-9]/g,function(a){return t[+a]})}}var hQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lu(t){if(!(r=hQ.exec(t)))throw new Error("invalid format: "+t);var r;return new ek({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Lu.prototype=ek.prototype;function ek(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ek.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bQ(t){e:for(var r=t.length,a=1,n=-1,s;a<r;++a)switch(t[a]){case".":n=s=a;break;case"0":n===0&&(n=a),s=a;break;default:if(!+t[a])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Kf;function xQ(t,r){var a=Gf(t,r);if(!a)return Kf=void 0,t.toPrecision(r);var n=a[0],s=a[1],o=s-(Kf=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return o===l?n:o>l?n+new Array(o-l+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Gf(t,Math.max(0,r+o-1))[0]}function y6(t,r){var a=Gf(t,r);if(!a)return t+"";var n=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const v6={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:pQ,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>y6(t*100,r),r:y6,s:xQ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function E6(t){return t}var w6=Array.prototype.map,N6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yQ(t){var r=t.grouping===void 0||t.thousands===void 0?E6:fQ(w6.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?E6:gQ(w6.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function p(g,b){g=Lu(g);var x=g.fill,v=g.align,E=g.sign,y=g.symbol,w=g.zero,k=g.width,C=g.comma,A=g.precision,S=g.trim,P=g.type;P==="n"?(C=!0,P="g"):v6[P]||(A===void 0&&(A=12),S=!0,P="g"),(w||x==="0"&&v==="=")&&(w=!0,x="0",v="=");var T=(b&&b.prefix!==void 0?b.prefix:"")+(y==="$"?a:y==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),O=(y==="$"?n:/[%p]/.test(P)?l:"")+(b&&b.suffix!==void 0?b.suffix:""),R=v6[P],D=/[defgprs%]/.test(P);A=A===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function $(j){var K=T,H=O,V,q,Y;if(P==="c")H=R(j)+H,j="";else{j=+j;var z=j<0||1/j<0;if(j=isNaN(j)?m:R(Math.abs(j),A),S&&(j=bQ(j)),z&&+j==0&&E!=="+"&&(z=!1),K=(z?E==="("?E:c:E==="-"||E==="("?"":E)+K,H=(P==="s"&&!isNaN(j)&&Kf!==void 0?N6[8+Kf/3]:"")+H+(z&&E==="("?")":""),D){for(V=-1,q=j.length;++V<q;)if(Y=j.charCodeAt(V),48>Y||Y>57){H=(Y===46?s+j.slice(V+1):j.slice(V))+H,j=j.slice(0,V);break}}}C&&!w&&(j=r(j,1/0));var L=K.length+j.length+H.length,Q=L<k?new Array(k-L+1).join(x):"";switch(C&&w&&(j=r(Q+j,Q.length?k-H.length:1/0),Q=""),v){case"<":j=K+j+H+Q;break;case"=":j=K+Q+j+H;break;case"^":j=Q.slice(0,L=Q.length>>1)+K+j+H+Q.slice(L);break;default:j=Q+K+j+H;break}return o(j)}return $.toString=function(){return g+""},$}function f(g,b){var x=Math.max(-8,Math.min(8,Math.floor(Md(b)/3)))*3,v=Math.pow(10,-x),E=p((g=Lu(g),g.type="f",g),{suffix:N6[8+x/3]});return function(y){return E(v*y)}}return{format:p,formatPrefix:f}}var j0,tk,G7;vQ({thousands:",",grouping:[3],currency:["$",""]});function vQ(t){return j0=yQ(t),tk=j0.format,G7=j0.formatPrefix,j0}function EQ(t){return Math.max(0,-Md(Math.abs(t)))}function wQ(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Md(r)/3)))*3-Md(Math.abs(t)))}function NQ(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Md(r)-Md(t))+1}function K7(t,r,a,n){var s=GN(t,r,a),o;switch(n=Lu(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(r));return n.precision==null&&!isNaN(o=wQ(s,l))&&(n.precision=o),G7(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=NQ(s,Math.max(Math.abs(t),Math.abs(r))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=EQ(s))&&(n.precision=o-(n.type==="%")*2);break}}return tk(n)}function vi(t){var r=t.domain;return t.ticks=function(a){var n=r();return HN(n[0],n[n.length-1],a??10)},t.tickFormat=function(a,n){var s=r();return K7(s[0],s[s.length-1],a??10,n)},t.nice=function(a){a==null&&(a=10);var n=r(),s=0,o=n.length-1,l=n[s],c=n[o],m,p,f=10;for(c<l&&(p=l,l=c,c=p,p=s,s=o,o=p);f-- >0;){if(p=WN(l,c,a),p===m)return n[s]=l,n[o]=c,r(n);if(p>0)l=Math.floor(l/p)*p,c=Math.ceil(c/p)*p;else if(p<0)l=Math.ceil(l*p)/p,c=Math.floor(c*p)/p;else break;m=p}return t},t}function Yf(){var t=Z2();return t.copy=function(){return wp(t,Yf())},so.apply(t,arguments),vi(t)}function Y7(t){var r;function a(n){return n==null||isNaN(n=+n)?r:n}return a.invert=a,a.domain=a.range=function(n){return arguments.length?(t=Array.from(n,Wf),a):t.slice()},a.unknown=function(n){return arguments.length?(r=n,a):r},a.copy=function(){return Y7(t).unknown(r)},t=arguments.length?Array.from(t,Wf):[0,1],vi(a)}function X7(t,r){t=t.slice();var a=0,n=t.length-1,s=t[a],o=t[n],l;return o<s&&(l=a,a=n,n=l,l=s,s=o,o=l),t[a]=r.floor(s),t[n]=r.ceil(o),t}function k6(t){return Math.log(t)}function S6(t){return Math.exp(t)}function kQ(t){return-Math.log(-t)}function SQ(t){return-Math.exp(-t)}function CQ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function AQ(t){return t===10?CQ:t===Math.E?Math.exp:r=>Math.pow(t,r)}function _Q(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function C6(t){return(r,a)=>-t(-r,a)}function rk(t){const r=t(k6,S6),a=r.domain;let n=10,s,o;function l(){return s=_Q(n),o=AQ(n),a()[0]<0?(s=C6(s),o=C6(o),t(kQ,SQ)):t(k6,S6),r}return r.base=function(c){return arguments.length?(n=+c,l()):n},r.domain=function(c){return arguments.length?(a(c),l()):a()},r.ticks=c=>{const m=a();let p=m[0],f=m[m.length-1];const g=f<p;g&&([p,f]=[f,p]);let b=s(p),x=s(f),v,E;const y=c==null?10:+c;let w=[];if(!(n%1)&&x-b<y){if(b=Math.floor(b),x=Math.ceil(x),p>0){for(;b<=x;++b)for(v=1;v<n;++v)if(E=b<0?v/o(-b):v*o(b),!(E<p)){if(E>f)break;w.push(E)}}else for(;b<=x;++b)for(v=n-1;v>=1;--v)if(E=b>0?v/o(-b):v*o(b),!(E<p)){if(E>f)break;w.push(E)}w.length*2<y&&(w=HN(p,f,y))}else w=HN(b,x,Math.min(x-b,y)).map(o);return g?w.reverse():w},r.tickFormat=(c,m)=>{if(c==null&&(c=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Lu(m)).precision==null&&(m.trim=!0),m=tk(m)),c===1/0)return m;const p=Math.max(1,n*c/r.ticks().length);return f=>{let g=f/o(Math.round(s(f)));return g*n<n-.5&&(g*=n),g<=p?m(f):""}},r.nice=()=>a(X7(a(),{floor:c=>o(Math.floor(s(c))),ceil:c=>o(Math.ceil(s(c)))})),r}function Q7(){const t=rk(ah()).domain([1,10]);return t.copy=()=>wp(t,Q7()).base(t.base()),so.apply(t,arguments),t}function A6(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function _6(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function ak(t){var r=1,a=t(A6(r),_6(r));return a.constant=function(n){return arguments.length?t(A6(r=+n),_6(r)):r},vi(a)}function J7(){var t=ak(ah());return t.copy=function(){return wp(t,J7()).constant(t.constant())},so.apply(t,arguments)}function P6(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function PQ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function TQ(t){return t<0?-t*t:t*t}function nk(t){var r=t(os,os),a=1;function n(){return a===1?t(os,os):a===.5?t(PQ,TQ):t(P6(a),P6(1/a))}return r.exponent=function(s){return arguments.length?(a=+s,n()):a},vi(r)}function sk(){var t=nk(ah());return t.copy=function(){return wp(t,sk()).exponent(t.exponent())},so.apply(t,arguments),t}function OQ(){return sk.apply(null,arguments).exponent(.5)}function T6(t){return Math.sign(t)*t*t}function MQ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Z7(){var t=Z2(),r=[0,1],a=!1,n;function s(o){var l=MQ(t(o));return isNaN(l)?n:a?Math.round(l):l}return s.invert=function(o){return t.invert(T6(o))},s.domain=function(o){return arguments.length?(t.domain(o),s):t.domain()},s.range=function(o){return arguments.length?(t.range((r=Array.from(o,Wf)).map(T6)),s):r.slice()},s.rangeRound=function(o){return s.range(o).round(!0)},s.round=function(o){return arguments.length?(a=!!o,s):a},s.clamp=function(o){return arguments.length?(t.clamp(o),s):t.clamp()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return Z7(t.domain(),r).round(a).clamp(t.clamp()).unknown(n)},so.apply(s,arguments),vi(s)}function eR(){var t=[],r=[],a=[],n;function s(){var l=0,c=Math.max(1,r.length);for(a=new Array(c-1);++l<c;)a[l-1]=IX(t,l/c);return o}function o(l){return l==null||isNaN(l=+l)?n:r[vp(a,l)]}return o.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:[c>0?a[c-1]:t[0],c<a.length?a[c]:t[t.length-1]]},o.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let c of l)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(mi),s()},o.range=function(l){return arguments.length?(r=Array.from(l),s()):r.slice()},o.unknown=function(l){return arguments.length?(n=l,o):n},o.quantiles=function(){return a.slice()},o.copy=function(){return eR().domain(t).range(r).unknown(n)},so.apply(o,arguments)}function tR(){var t=0,r=1,a=1,n=[.5],s=[0,1],o;function l(m){return m!=null&&m<=m?s[vp(n,m,0,a)]:o}function c(){var m=-1;for(n=new Array(a);++m<a;)n[m]=((m+1)*r-(m-a)*t)/(a+1);return l}return l.domain=function(m){return arguments.length?([t,r]=m,t=+t,r=+r,c()):[t,r]},l.range=function(m){return arguments.length?(a=(s=Array.from(m)).length-1,c()):s.slice()},l.invertExtent=function(m){var p=s.indexOf(m);return p<0?[NaN,NaN]:p<1?[t,n[0]]:p>=a?[n[a-1],r]:[n[p-1],n[p]]},l.unknown=function(m){return arguments.length&&(o=m),l},l.thresholds=function(){return n.slice()},l.copy=function(){return tR().domain([t,r]).range(s).unknown(o)},so.apply(vi(l),arguments)}function rR(){var t=[.5],r=[0,1],a,n=1;function s(o){return o!=null&&o<=o?r[vp(t,o,0,n)]:a}return s.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,r.length-1),s):t.slice()},s.range=function(o){return arguments.length?(r=Array.from(o),n=Math.min(t.length,r.length-1),s):r.slice()},s.invertExtent=function(o){var l=r.indexOf(o);return[t[l-1],t[l]]},s.unknown=function(o){return arguments.length?(a=o,s):a},s.copy=function(){return rR().domain(t).range(r).unknown(a)},so.apply(s,arguments)}const OE=new Date,ME=new Date;function En(t,r,a,n){function s(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(t(o=new Date(+o)),o),s.ceil=o=>(t(o=new Date(o-1)),r(o,1),t(o),o),s.round=o=>{const l=s(o),c=s.ceil(o);return o-l<c-o?l:c},s.offset=(o,l)=>(r(o=new Date(+o),l==null?1:Math.floor(l)),o),s.range=(o,l,c)=>{const m=[];if(o=s.ceil(o),c=c==null?1:Math.floor(c),!(o<l)||!(c>0))return m;let p;do m.push(p=new Date(+o)),r(o,c),t(o);while(p<o&&o<l);return m},s.filter=o=>En(l=>{if(l>=l)for(;t(l),!o(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;r(l,-1),!o(l););else for(;--c>=0;)for(;r(l,1),!o(l););}),a&&(s.count=(o,l)=>(OE.setTime(+o),ME.setTime(+l),t(OE),t(ME),Math.floor(a(OE,ME))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(n?l=>n(l)%o===0:l=>s.count(0,l)%o===0):s)),s}const Xf=En(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Xf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?En(r=>{r.setTime(Math.floor(r/t)*t)},(r,a)=>{r.setTime(+r+a*t)},(r,a)=>(a-r)/t):Xf);Xf.range;const hl=1e3,eo=hl*60,bl=eo*60,Al=bl*24,ok=Al*7,O6=Al*30,jE=Al*365,tc=En(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*hl)},(t,r)=>(r-t)/hl,t=>t.getUTCSeconds());tc.range;const lk=En(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl)},(t,r)=>{t.setTime(+t+r*eo)},(t,r)=>(r-t)/eo,t=>t.getMinutes());lk.range;const ik=En(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*eo)},(t,r)=>(r-t)/eo,t=>t.getUTCMinutes());ik.range;const ck=En(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl-t.getMinutes()*eo)},(t,r)=>{t.setTime(+t+r*bl)},(t,r)=>(r-t)/bl,t=>t.getHours());ck.range;const dk=En(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*bl)},(t,r)=>(r-t)/bl,t=>t.getUTCHours());dk.range;const Np=En(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*eo)/Al,t=>t.getDate()-1);Np.range;const nh=En(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Al,t=>t.getUTCDate()-1);nh.range;const aR=En(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Al,t=>Math.floor(t/Al));aR.range;function Nc(t){return En(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,a)=>{r.setDate(r.getDate()+a*7)},(r,a)=>(a-r-(a.getTimezoneOffset()-r.getTimezoneOffset())*eo)/ok)}const sh=Nc(0),Qf=Nc(1),jQ=Nc(2),RQ=Nc(3),jd=Nc(4),$Q=Nc(5),LQ=Nc(6);sh.range;Qf.range;jQ.range;RQ.range;jd.range;$Q.range;LQ.range;function kc(t){return En(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCDate(r.getUTCDate()+a*7)},(r,a)=>(a-r)/ok)}const oh=kc(0),Jf=kc(1),IQ=kc(2),DQ=kc(3),Rd=kc(4),FQ=kc(5),zQ=kc(6);oh.range;Jf.range;IQ.range;DQ.range;Rd.range;FQ.range;zQ.range;const mk=En(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mk.range;const uk=En(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());uk.range;const _l=En(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());_l.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:En(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,a)=>{r.setFullYear(r.getFullYear()+a*t)});_l.range;const Pl=En(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:En(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,a)=>{r.setUTCFullYear(r.getUTCFullYear()+a*t)});Pl.range;function nR(t,r,a,n,s,o){const l=[[tc,1,hl],[tc,5,5*hl],[tc,15,15*hl],[tc,30,30*hl],[o,1,eo],[o,5,5*eo],[o,15,15*eo],[o,30,30*eo],[s,1,bl],[s,3,3*bl],[s,6,6*bl],[s,12,12*bl],[n,1,Al],[n,2,2*Al],[a,1,ok],[r,1,O6],[r,3,3*O6],[t,1,jE]];function c(p,f,g){const b=f<p;b&&([p,f]=[f,p]);const x=g&&typeof g.range=="function"?g:m(p,f,g),v=x?x.range(p,+f+1):[];return b?v.reverse():v}function m(p,f,g){const b=Math.abs(f-p)/g,x=K2(([,,y])=>y).right(l,b);if(x===l.length)return t.every(GN(p/jE,f/jE,g));if(x===0)return Xf.every(Math.max(GN(p,f,g),1));const[v,E]=l[b/l[x-1][2]<l[x][2]/b?x-1:x];return v.every(E)}return[c,m]}const[BQ,qQ]=nR(Pl,uk,oh,aR,dk,ik),[UQ,VQ]=nR(_l,mk,sh,Np,ck,lk);function RE(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $E(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bm(t,r,a){return{y:t,m:r,d:a,H:0,M:0,S:0,L:0}}function HQ(t){var r=t.dateTime,a=t.date,n=t.time,s=t.periods,o=t.days,l=t.shortDays,c=t.months,m=t.shortMonths,p=qm(s),f=Um(s),g=qm(o),b=Um(o),x=qm(l),v=Um(l),E=qm(c),y=Um(c),w=qm(m),k=Um(m),C={a:Y,A:z,b:L,B:Q,c:null,d:I6,e:I6,f:fJ,g:kJ,G:CJ,H:mJ,I:uJ,j:pJ,L:sR,m:gJ,M:hJ,p:B,q:ae,Q:z6,s:B6,S:bJ,u:xJ,U:yJ,V:vJ,w:EJ,W:wJ,x:null,X:null,y:NJ,Y:SJ,Z:AJ,"%":F6},A={a:te,A:ge,b:ue,B:Ee,c:null,d:D6,e:D6,f:OJ,g:BJ,G:UJ,H:_J,I:PJ,j:TJ,L:lR,m:MJ,M:jJ,p:fe,q:re,Q:z6,s:B6,S:RJ,u:$J,U:LJ,V:IJ,w:DJ,W:FJ,x:null,X:null,y:zJ,Y:qJ,Z:VJ,"%":F6},S={a:D,A:$,b:j,B:K,c:H,d:$6,e:$6,f:lJ,g:R6,G:j6,H:L6,I:L6,j:aJ,L:oJ,m:rJ,M:nJ,p:R,q:tJ,Q:cJ,s:dJ,S:sJ,u:XQ,U:QQ,V:JQ,w:YQ,W:ZQ,x:V,X:q,y:R6,Y:j6,Z:eJ,"%":iJ};C.x=P(a,C),C.X=P(n,C),C.c=P(r,C),A.x=P(a,A),A.X=P(n,A),A.c=P(r,A);function P(U,W){return function(me){var ne=[],ee=-1,ve=0,be=U.length,J,Ge,je;for(me instanceof Date||(me=new Date(+me));++ee<be;)U.charCodeAt(ee)===37&&(ne.push(U.slice(ve,ee)),(Ge=M6[J=U.charAt(++ee)])!=null?J=U.charAt(++ee):Ge=J==="e"?" ":"0",(je=W[J])&&(J=je(me,Ge)),ne.push(J),ve=ee+1);return ne.push(U.slice(ve,ee)),ne.join("")}}function T(U,W){return function(me){var ne=Bm(1900,void 0,1),ee=O(ne,U,me+="",0),ve,be;if(ee!=me.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(W&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(ve=$E(Bm(ne.y,0,1)),be=ve.getUTCDay(),ve=be>4||be===0?Jf.ceil(ve):Jf(ve),ve=nh.offset(ve,(ne.V-1)*7),ne.y=ve.getUTCFullYear(),ne.m=ve.getUTCMonth(),ne.d=ve.getUTCDate()+(ne.w+6)%7):(ve=RE(Bm(ne.y,0,1)),be=ve.getDay(),ve=be>4||be===0?Qf.ceil(ve):Qf(ve),ve=Np.offset(ve,(ne.V-1)*7),ne.y=ve.getFullYear(),ne.m=ve.getMonth(),ne.d=ve.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),be="Z"in ne?$E(Bm(ne.y,0,1)).getUTCDay():RE(Bm(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(be+5)%7:ne.w+ne.U*7-(be+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,$E(ne)):RE(ne)}}function O(U,W,me,ne){for(var ee=0,ve=W.length,be=me.length,J,Ge;ee<ve;){if(ne>=be)return-1;if(J=W.charCodeAt(ee++),J===37){if(J=W.charAt(ee++),Ge=S[J in M6?W.charAt(ee++):J],!Ge||(ne=Ge(U,me,ne))<0)return-1}else if(J!=me.charCodeAt(ne++))return-1}return ne}function R(U,W,me){var ne=p.exec(W.slice(me));return ne?(U.p=f.get(ne[0].toLowerCase()),me+ne[0].length):-1}function D(U,W,me){var ne=x.exec(W.slice(me));return ne?(U.w=v.get(ne[0].toLowerCase()),me+ne[0].length):-1}function $(U,W,me){var ne=g.exec(W.slice(me));return ne?(U.w=b.get(ne[0].toLowerCase()),me+ne[0].length):-1}function j(U,W,me){var ne=w.exec(W.slice(me));return ne?(U.m=k.get(ne[0].toLowerCase()),me+ne[0].length):-1}function K(U,W,me){var ne=E.exec(W.slice(me));return ne?(U.m=y.get(ne[0].toLowerCase()),me+ne[0].length):-1}function H(U,W,me){return O(U,r,W,me)}function V(U,W,me){return O(U,a,W,me)}function q(U,W,me){return O(U,n,W,me)}function Y(U){return l[U.getDay()]}function z(U){return o[U.getDay()]}function L(U){return m[U.getMonth()]}function Q(U){return c[U.getMonth()]}function B(U){return s[+(U.getHours()>=12)]}function ae(U){return 1+~~(U.getMonth()/3)}function te(U){return l[U.getUTCDay()]}function ge(U){return o[U.getUTCDay()]}function ue(U){return m[U.getUTCMonth()]}function Ee(U){return c[U.getUTCMonth()]}function fe(U){return s[+(U.getUTCHours()>=12)]}function re(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var W=P(U+="",C);return W.toString=function(){return U},W},parse:function(U){var W=T(U+="",!1);return W.toString=function(){return U},W},utcFormat:function(U){var W=P(U+="",A);return W.toString=function(){return U},W},utcParse:function(U){var W=T(U+="",!0);return W.toString=function(){return U},W}}}var M6={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,WQ=/^%/,GQ=/[\\^$*+?|[\]().{}]/g;function la(t,r,a){var n=t<0?"-":"",s=(n?-t:t)+"",o=s.length;return n+(o<a?new Array(a-o+1).join(r)+s:s)}function KQ(t){return t.replace(GQ,"\\$&")}function qm(t){return new RegExp("^(?:"+t.map(KQ).join("|")+")","i")}function Um(t){return new Map(t.map((r,a)=>[r.toLowerCase(),a]))}function YQ(t,r,a){var n=Tn.exec(r.slice(a,a+1));return n?(t.w=+n[0],a+n[0].length):-1}function XQ(t,r,a){var n=Tn.exec(r.slice(a,a+1));return n?(t.u=+n[0],a+n[0].length):-1}function QQ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.U=+n[0],a+n[0].length):-1}function JQ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.V=+n[0],a+n[0].length):-1}function ZQ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.W=+n[0],a+n[0].length):-1}function j6(t,r,a){var n=Tn.exec(r.slice(a,a+4));return n?(t.y=+n[0],a+n[0].length):-1}function R6(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),a+n[0].length):-1}function eJ(t,r,a){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(a,a+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),a+n[0].length):-1}function tJ(t,r,a){var n=Tn.exec(r.slice(a,a+1));return n?(t.q=n[0]*3-3,a+n[0].length):-1}function rJ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.m=n[0]-1,a+n[0].length):-1}function $6(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.d=+n[0],a+n[0].length):-1}function aJ(t,r,a){var n=Tn.exec(r.slice(a,a+3));return n?(t.m=0,t.d=+n[0],a+n[0].length):-1}function L6(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.H=+n[0],a+n[0].length):-1}function nJ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.M=+n[0],a+n[0].length):-1}function sJ(t,r,a){var n=Tn.exec(r.slice(a,a+2));return n?(t.S=+n[0],a+n[0].length):-1}function oJ(t,r,a){var n=Tn.exec(r.slice(a,a+3));return n?(t.L=+n[0],a+n[0].length):-1}function lJ(t,r,a){var n=Tn.exec(r.slice(a,a+6));return n?(t.L=Math.floor(n[0]/1e3),a+n[0].length):-1}function iJ(t,r,a){var n=WQ.exec(r.slice(a,a+1));return n?a+n[0].length:-1}function cJ(t,r,a){var n=Tn.exec(r.slice(a));return n?(t.Q=+n[0],a+n[0].length):-1}function dJ(t,r,a){var n=Tn.exec(r.slice(a));return n?(t.s=+n[0],a+n[0].length):-1}function I6(t,r){return la(t.getDate(),r,2)}function mJ(t,r){return la(t.getHours(),r,2)}function uJ(t,r){return la(t.getHours()%12||12,r,2)}function pJ(t,r){return la(1+Np.count(_l(t),t),r,3)}function sR(t,r){return la(t.getMilliseconds(),r,3)}function fJ(t,r){return sR(t,r)+"000"}function gJ(t,r){return la(t.getMonth()+1,r,2)}function hJ(t,r){return la(t.getMinutes(),r,2)}function bJ(t,r){return la(t.getSeconds(),r,2)}function xJ(t){var r=t.getDay();return r===0?7:r}function yJ(t,r){return la(sh.count(_l(t)-1,t),r,2)}function oR(t){var r=t.getDay();return r>=4||r===0?jd(t):jd.ceil(t)}function vJ(t,r){return t=oR(t),la(jd.count(_l(t),t)+(_l(t).getDay()===4),r,2)}function EJ(t){return t.getDay()}function wJ(t,r){return la(Qf.count(_l(t)-1,t),r,2)}function NJ(t,r){return la(t.getFullYear()%100,r,2)}function kJ(t,r){return t=oR(t),la(t.getFullYear()%100,r,2)}function SJ(t,r){return la(t.getFullYear()%1e4,r,4)}function CJ(t,r){var a=t.getDay();return t=a>=4||a===0?jd(t):jd.ceil(t),la(t.getFullYear()%1e4,r,4)}function AJ(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+la(r/60|0,"0",2)+la(r%60,"0",2)}function D6(t,r){return la(t.getUTCDate(),r,2)}function _J(t,r){return la(t.getUTCHours(),r,2)}function PJ(t,r){return la(t.getUTCHours()%12||12,r,2)}function TJ(t,r){return la(1+nh.count(Pl(t),t),r,3)}function lR(t,r){return la(t.getUTCMilliseconds(),r,3)}function OJ(t,r){return lR(t,r)+"000"}function MJ(t,r){return la(t.getUTCMonth()+1,r,2)}function jJ(t,r){return la(t.getUTCMinutes(),r,2)}function RJ(t,r){return la(t.getUTCSeconds(),r,2)}function $J(t){var r=t.getUTCDay();return r===0?7:r}function LJ(t,r){return la(oh.count(Pl(t)-1,t),r,2)}function iR(t){var r=t.getUTCDay();return r>=4||r===0?Rd(t):Rd.ceil(t)}function IJ(t,r){return t=iR(t),la(Rd.count(Pl(t),t)+(Pl(t).getUTCDay()===4),r,2)}function DJ(t){return t.getUTCDay()}function FJ(t,r){return la(Jf.count(Pl(t)-1,t),r,2)}function zJ(t,r){return la(t.getUTCFullYear()%100,r,2)}function BJ(t,r){return t=iR(t),la(t.getUTCFullYear()%100,r,2)}function qJ(t,r){return la(t.getUTCFullYear()%1e4,r,4)}function UJ(t,r){var a=t.getUTCDay();return t=a>=4||a===0?Rd(t):Rd.ceil(t),la(t.getUTCFullYear()%1e4,r,4)}function VJ(){return"+0000"}function F6(){return"%"}function z6(t){return+t}function B6(t){return Math.floor(+t/1e3)}var Jc,cR,dR;HJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HJ(t){return Jc=HQ(t),cR=Jc.format,Jc.parse,dR=Jc.utcFormat,Jc.utcParse,Jc}function WJ(t){return new Date(t)}function GJ(t){return t instanceof Date?+t:+new Date(+t)}function pk(t,r,a,n,s,o,l,c,m,p){var f=Z2(),g=f.invert,b=f.domain,x=p(".%L"),v=p(":%S"),E=p("%I:%M"),y=p("%I %p"),w=p("%a %d"),k=p("%b %d"),C=p("%B"),A=p("%Y");function S(P){return(m(P)<P?x:c(P)<P?v:l(P)<P?E:o(P)<P?y:n(P)<P?s(P)<P?w:k:a(P)<P?C:A)(P)}return f.invert=function(P){return new Date(g(P))},f.domain=function(P){return arguments.length?b(Array.from(P,GJ)):b().map(WJ)},f.ticks=function(P){var T=b();return t(T[0],T[T.length-1],P??10)},f.tickFormat=function(P,T){return T==null?S:p(T)},f.nice=function(P){var T=b();return(!P||typeof P.range!="function")&&(P=r(T[0],T[T.length-1],P??10)),P?b(X7(T,P)):f},f.copy=function(){return wp(f,pk(t,r,a,n,s,o,l,c,m,p))},f}function KJ(){return so.apply(pk(UQ,VQ,_l,mk,sh,Np,ck,lk,tc,cR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function YJ(){return so.apply(pk(BQ,qQ,Pl,uk,oh,nh,dk,ik,tc,dR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lh(){var t=0,r=1,a,n,s,o,l=os,c=!1,m;function p(g){return g==null||isNaN(g=+g)?m:l(s===0?.5:(g=(o(g)-a)*s,c?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,r]=g,a=o(t=+t),n=o(r=+r),s=a===n?0:1/(n-a),p):[t,r]},p.clamp=function(g){return arguments.length?(c=!!g,p):c},p.interpolator=function(g){return arguments.length?(l=g,p):l};function f(g){return function(b){var x,v;return arguments.length?([x,v]=b,l=g(x,v),p):[l(0),l(1)]}}return p.range=f(sm),p.rangeRound=f(J2),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return o=g,a=g(t),n=g(r),s=a===n?0:1/(n-a),p}}function Ei(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mR(){var t=vi(lh()(os));return t.copy=function(){return Ei(t,mR())},Dl.apply(t,arguments)}function uR(){var t=rk(lh()).domain([1,10]);return t.copy=function(){return Ei(t,uR()).base(t.base())},Dl.apply(t,arguments)}function pR(){var t=ak(lh());return t.copy=function(){return Ei(t,pR()).constant(t.constant())},Dl.apply(t,arguments)}function fk(){var t=nk(lh());return t.copy=function(){return Ei(t,fk()).exponent(t.exponent())},Dl.apply(t,arguments)}function XJ(){return fk.apply(null,arguments).exponent(.5)}function fR(){var t=[],r=os;function a(n){if(n!=null&&!isNaN(n=+n))return r((vp(t,n,1)-1)/(t.length-1))}return a.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(mi),a},a.interpolator=function(n){return arguments.length?(r=n,a):r},a.range=function(){return t.map((n,s)=>r(s/(t.length-1)))},a.quantiles=function(n){return Array.from({length:n+1},(s,o)=>LX(t,o/n))},a.copy=function(){return fR(r).domain(t)},Dl.apply(a,arguments)}function ih(){var t=0,r=.5,a=1,n=1,s,o,l,c,m,p=os,f,g=!1,b;function x(E){return isNaN(E=+E)?b:(E=.5+((E=+f(E))-o)*(n*E<n*o?c:m),p(g?Math.max(0,Math.min(1,E)):E))}x.domain=function(E){return arguments.length?([t,r,a]=E,s=f(t=+t),o=f(r=+r),l=f(a=+a),c=s===o?0:.5/(o-s),m=o===l?0:.5/(l-o),n=o<s?-1:1,x):[t,r,a]},x.clamp=function(E){return arguments.length?(g=!!E,x):g},x.interpolator=function(E){return arguments.length?(p=E,x):p};function v(E){return function(y){var w,k,C;return arguments.length?([w,k,C]=y,p=iQ(E,[w,k,C]),x):[p(0),p(.5),p(1)]}}return x.range=v(sm),x.rangeRound=v(J2),x.unknown=function(E){return arguments.length?(b=E,x):b},function(E){return f=E,s=E(t),o=E(r),l=E(a),c=s===o?0:.5/(o-s),m=o===l?0:.5/(l-o),n=o<s?-1:1,x}}function gR(){var t=vi(ih()(os));return t.copy=function(){return Ei(t,gR())},Dl.apply(t,arguments)}function hR(){var t=rk(ih()).domain([.1,1,10]);return t.copy=function(){return Ei(t,hR()).base(t.base())},Dl.apply(t,arguments)}function bR(){var t=ak(ih());return t.copy=function(){return Ei(t,bR()).constant(t.constant())},Dl.apply(t,arguments)}function gk(){var t=nk(ih());return t.copy=function(){return Ei(t,gk()).exponent(t.exponent())},Dl.apply(t,arguments)}function QJ(){return gk.apply(null,arguments).exponent(.5)}const q6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mu,scaleDiverging:gR,scaleDivergingLog:hR,scaleDivergingPow:gk,scaleDivergingSqrt:QJ,scaleDivergingSymlog:bR,scaleIdentity:Y7,scaleImplicit:KN,scaleLinear:Yf,scaleLog:Q7,scaleOrdinal:Y2,scalePoint:uu,scalePow:sk,scaleQuantile:eR,scaleQuantize:tR,scaleRadial:Z7,scaleSequential:mR,scaleSequentialLog:uR,scaleSequentialPow:fk,scaleSequentialQuantile:fR,scaleSequentialSqrt:XJ,scaleSequentialSymlog:pR,scaleSqrt:OQ,scaleSymlog:J7,scaleThreshold:rR,scaleTime:KJ,scaleUtc:YJ,tickFormat:K7},Symbol.toStringTag,{value:"Module"}));var LE,U6;function xR(){if(U6)return LE;U6=1;var t=tm();function r(a,n,s){for(var o=-1,l=a.length;++o<l;){var c=a[o],m=n(c);if(m!=null&&(p===void 0?m===m&&!t(m):s(m,p)))var p=m,f=c}return f}return LE=r,LE}var IE,V6;function JJ(){if(V6)return IE;V6=1;function t(r,a){return r>a}return IE=t,IE}var DE,H6;function ZJ(){if(H6)return DE;H6=1;var t=xR(),r=JJ(),a=am();function n(s){return s&&s.length?t(s,a,r):void 0}return DE=n,DE}var eZ=ZJ();const ch=Aa(eZ);var FE,W6;function tZ(){if(W6)return FE;W6=1;function t(r,a){return r<a}return FE=t,FE}var zE,G6;function rZ(){if(G6)return zE;G6=1;var t=xR(),r=tZ(),a=am();function n(s){return s&&s.length?t(s,a,r):void 0}return zE=n,zE}var aZ=rZ();const dh=Aa(aZ);var BE,K6;function nZ(){if(K6)return BE;K6=1;var t=O2(),r=yi(),a=_7(),n=As();function s(o,l){var c=n(o)?t:a;return c(o,r(l,3))}return BE=s,BE}var qE,Y6;function sZ(){if(Y6)return qE;Y6=1;var t=C7(),r=nZ();function a(n,s){return t(r(n,s),1)}return qE=a,qE}var oZ=sZ();const lZ=Aa(oZ);var UE,X6;function iZ(){if(X6)return UE;X6=1;var t=V2();function r(a,n){return t(a,n)}return UE=r,UE}var cZ=iZ();const mh=Aa(cZ);var om=1e9,dZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bk,qa=!0,no="[DecimalError] ",lc=no+"Invalid argument: ",hk=no+"Exponent out of range: ",lm=Math.floor,Xi=Math.pow,mZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Is,An=1e7,La=7,yR=9007199254740991,Zf=lm(yR/La),Wt={};Wt.absoluteValue=Wt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Wt.comparedTo=Wt.cmp=function(t){var r,a,n,s,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,s=t.d.length,r=0,a=n<s?n:s;r<a;++r)if(o.d[r]!==t.d[r])return o.d[r]>t.d[r]^o.s<0?1:-1;return n===s?0:n>s^o.s<0?1:-1};Wt.decimalPlaces=Wt.dp=function(){var t=this,r=t.d.length-1,a=(r-t.e)*La;if(r=t.d[r],r)for(;r%10==0;r/=10)a--;return a<0?0:a};Wt.dividedBy=Wt.div=function(t){return kl(this,new this.constructor(t))};Wt.dividedToIntegerBy=Wt.idiv=function(t){var r=this,a=r.constructor;return Ca(kl(r,new a(t),0,1),a.precision)};Wt.equals=Wt.eq=function(t){return!this.cmp(t)};Wt.exponent=function(){return fn(this)};Wt.greaterThan=Wt.gt=function(t){return this.cmp(t)>0};Wt.greaterThanOrEqualTo=Wt.gte=function(t){return this.cmp(t)>=0};Wt.isInteger=Wt.isint=function(){return this.e>this.d.length-2};Wt.isNegative=Wt.isneg=function(){return this.s<0};Wt.isPositive=Wt.ispos=function(){return this.s>0};Wt.isZero=function(){return this.s===0};Wt.lessThan=Wt.lt=function(t){return this.cmp(t)<0};Wt.lessThanOrEqualTo=Wt.lte=function(t){return this.cmp(t)<1};Wt.logarithm=Wt.log=function(t){var r,a=this,n=a.constructor,s=n.precision,o=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Is))throw Error(no+"NaN");if(a.s<1)throw Error(no+(a.s?"NaN":"-Infinity"));return a.eq(Is)?new n(0):(qa=!1,r=kl(Iu(a,o),Iu(t,o),o),qa=!0,Ca(r,s))};Wt.minus=Wt.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?wR(r,t):vR(r,(t.s=-t.s,t))};Wt.modulo=Wt.mod=function(t){var r,a=this,n=a.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error(no+"NaN");return a.s?(qa=!1,r=kl(a,t,0,1).times(t),qa=!0,a.minus(r)):Ca(new n(a),s)};Wt.naturalExponential=Wt.exp=function(){return ER(this)};Wt.naturalLogarithm=Wt.ln=function(){return Iu(this)};Wt.negated=Wt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Wt.plus=Wt.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?vR(r,t):wR(r,(t.s=-t.s,t))};Wt.precision=Wt.sd=function(t){var r,a,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(lc+t);if(r=fn(s)+1,n=s.d.length-1,a=n*La+1,n=s.d[n],n){for(;n%10==0;n/=10)a--;for(n=s.d[0];n>=10;n/=10)a++}return t&&r>a?r:a};Wt.squareRoot=Wt.sqrt=function(){var t,r,a,n,s,o,l,c=this,m=c.constructor;if(c.s<1){if(!c.s)return new m(0);throw Error(no+"NaN")}for(t=fn(c),qa=!1,s=Math.sqrt(+c),s==0||s==1/0?(r=Fo(c.d),(r.length+t)%2==0&&(r+="0"),s=Math.sqrt(r),t=lm((t+1)/2)-(t<0||t%2),s==1/0?r="5e"+t:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new m(r)):n=new m(s.toString()),a=m.precision,s=l=a+3;;)if(o=n,n=o.plus(kl(c,o,l+2)).times(.5),Fo(o.d).slice(0,l)===(r=Fo(n.d)).slice(0,l)){if(r=r.slice(l-3,l+1),s==l&&r=="4999"){if(Ca(o,a+1,0),o.times(o).eq(c)){n=o;break}}else if(r!="9999")break;l+=4}return qa=!0,Ca(n,a)};Wt.times=Wt.mul=function(t){var r,a,n,s,o,l,c,m,p,f=this,g=f.constructor,b=f.d,x=(t=new g(t)).d;if(!f.s||!t.s)return new g(0);for(t.s*=f.s,a=f.e+t.e,m=b.length,p=x.length,m<p&&(o=b,b=x,x=o,l=m,m=p,p=l),o=[],l=m+p,n=l;n--;)o.push(0);for(n=p;--n>=0;){for(r=0,s=m+n;s>n;)c=o[s]+x[n]*b[s-n-1]+r,o[s--]=c%An|0,r=c/An|0;o[s]=(o[s]+r)%An|0}for(;!o[--l];)o.pop();return r?++a:o.shift(),t.d=o,t.e=a,qa?Ca(t,g.precision):t};Wt.toDecimalPlaces=Wt.todp=function(t,r){var a=this,n=a.constructor;return a=new n(a),t===void 0?a:(Ko(t,0,om),r===void 0?r=n.rounding:Ko(r,0,8),Ca(a,t+fn(a)+1,r))};Wt.toExponential=function(t,r){var a,n=this,s=n.constructor;return t===void 0?a=fc(n,!0):(Ko(t,0,om),r===void 0?r=s.rounding:Ko(r,0,8),n=Ca(new s(n),t+1,r),a=fc(n,!0,t+1)),a};Wt.toFixed=function(t,r){var a,n,s=this,o=s.constructor;return t===void 0?fc(s):(Ko(t,0,om),r===void 0?r=o.rounding:Ko(r,0,8),n=Ca(new o(s),t+fn(s)+1,r),a=fc(n.abs(),!1,t+fn(n)+1),s.isneg()&&!s.isZero()?"-"+a:a)};Wt.toInteger=Wt.toint=function(){var t=this,r=t.constructor;return Ca(new r(t),fn(t)+1,r.rounding)};Wt.toNumber=function(){return+this};Wt.toPower=Wt.pow=function(t){var r,a,n,s,o,l,c=this,m=c.constructor,p=12,f=+(t=new m(t));if(!t.s)return new m(Is);if(c=new m(c),!c.s){if(t.s<1)throw Error(no+"Infinity");return c}if(c.eq(Is))return c;if(n=m.precision,t.eq(Is))return Ca(c,n);if(r=t.e,a=t.d.length-1,l=r>=a,o=c.s,l){if((a=f<0?-f:f)<=yR){for(s=new m(Is),r=Math.ceil(n/La+4),qa=!1;a%2&&(s=s.times(c),J6(s.d,r)),a=lm(a/2),a!==0;)c=c.times(c),J6(c.d,r);return qa=!0,t.s<0?new m(Is).div(s):Ca(s,n)}}else if(o<0)throw Error(no+"NaN");return o=o<0&&t.d[Math.max(r,a)]&1?-1:1,c.s=1,qa=!1,s=t.times(Iu(c,n+p)),qa=!0,s=ER(s),s.s=o,s};Wt.toPrecision=function(t,r){var a,n,s=this,o=s.constructor;return t===void 0?(a=fn(s),n=fc(s,a<=o.toExpNeg||a>=o.toExpPos)):(Ko(t,1,om),r===void 0?r=o.rounding:Ko(r,0,8),s=Ca(new o(s),t,r),a=fn(s),n=fc(s,t<=a||a<=o.toExpNeg,t)),n};Wt.toSignificantDigits=Wt.tosd=function(t,r){var a=this,n=a.constructor;return t===void 0?(t=n.precision,r=n.rounding):(Ko(t,1,om),r===void 0?r=n.rounding:Ko(r,0,8)),Ca(new n(a),t,r)};Wt.toString=Wt.valueOf=Wt.val=Wt.toJSON=Wt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=fn(t),a=t.constructor;return fc(t,r<=a.toExpNeg||r>=a.toExpPos)};function vR(t,r){var a,n,s,o,l,c,m,p,f=t.constructor,g=f.precision;if(!t.s||!r.s)return r.s||(r=new f(t)),qa?Ca(r,g):r;if(m=t.d,p=r.d,l=t.e,s=r.e,m=m.slice(),o=l-s,o){for(o<0?(n=m,o=-o,c=p.length):(n=p,s=l,c=m.length),l=Math.ceil(g/La),c=l>c?l+1:c+1,o>c&&(o=c,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(c=m.length,o=p.length,c-o<0&&(o=c,n=p,p=m,m=n),a=0;o;)a=(m[--o]=m[o]+p[o]+a)/An|0,m[o]%=An;for(a&&(m.unshift(a),++s),c=m.length;m[--c]==0;)m.pop();return r.d=m,r.e=s,qa?Ca(r,g):r}function Ko(t,r,a){if(t!==~~t||t<r||t>a)throw Error(lc+t)}function Fo(t){var r,a,n,s=t.length-1,o="",l=t[0];if(s>0){for(o+=l,r=1;r<s;r++)n=t[r]+"",a=La-n.length,a&&(o+=ni(a)),o+=n;l=t[r],n=l+"",a=La-n.length,a&&(o+=ni(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}var kl=(function(){function t(n,s){var o,l=0,c=n.length;for(n=n.slice();c--;)o=n[c]*s+l,n[c]=o%An|0,l=o/An|0;return l&&n.unshift(l),n}function r(n,s,o,l){var c,m;if(o!=l)m=o>l?1:-1;else for(c=m=0;c<o;c++)if(n[c]!=s[c]){m=n[c]>s[c]?1:-1;break}return m}function a(n,s,o){for(var l=0;o--;)n[o]-=l,l=n[o]<s[o]?1:0,n[o]=l*An+n[o]-s[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,o,l){var c,m,p,f,g,b,x,v,E,y,w,k,C,A,S,P,T,O,R=n.constructor,D=n.s==s.s?1:-1,$=n.d,j=s.d;if(!n.s)return new R(n);if(!s.s)throw Error(no+"Division by zero");for(m=n.e-s.e,T=j.length,S=$.length,x=new R(D),v=x.d=[],p=0;j[p]==($[p]||0);)++p;if(j[p]>($[p]||0)&&--m,o==null?k=o=R.precision:l?k=o+(fn(n)-fn(s))+1:k=o,k<0)return new R(0);if(k=k/La+2|0,p=0,T==1)for(f=0,j=j[0],k++;(p<S||f)&&k--;p++)C=f*An+($[p]||0),v[p]=C/j|0,f=C%j|0;else{for(f=An/(j[0]+1)|0,f>1&&(j=t(j,f),$=t($,f),T=j.length,S=$.length),A=T,E=$.slice(0,T),y=E.length;y<T;)E[y++]=0;O=j.slice(),O.unshift(0),P=j[0],j[1]>=An/2&&++P;do f=0,c=r(j,E,T,y),c<0?(w=E[0],T!=y&&(w=w*An+(E[1]||0)),f=w/P|0,f>1?(f>=An&&(f=An-1),g=t(j,f),b=g.length,y=E.length,c=r(g,E,b,y),c==1&&(f--,a(g,T<b?O:j,b))):(f==0&&(c=f=1),g=j.slice()),b=g.length,b<y&&g.unshift(0),a(E,g,y),c==-1&&(y=E.length,c=r(j,E,T,y),c<1&&(f++,a(E,T<y?O:j,y))),y=E.length):c===0&&(f++,E=[0]),v[p++]=f,c&&E[0]?E[y++]=$[A]||0:(E=[$[A]],y=1);while((A++<S||E[0]!==void 0)&&k--)}return v[0]||v.shift(),x.e=m,Ca(x,l?o+fn(x)+1:o)}})();function ER(t,r){var a,n,s,o,l,c,m=0,p=0,f=t.constructor,g=f.precision;if(fn(t)>16)throw Error(hk+fn(t));if(!t.s)return new f(Is);for(qa=!1,c=g,l=new f(.03125);t.abs().gte(.1);)t=t.times(l),p+=5;for(n=Math.log(Xi(2,p))/Math.LN10*2+5|0,c+=n,a=s=o=new f(Is),f.precision=c;;){if(s=Ca(s.times(t),c),a=a.times(++m),l=o.plus(kl(s,a,c)),Fo(l.d).slice(0,c)===Fo(o.d).slice(0,c)){for(;p--;)o=Ca(o.times(o),c);return f.precision=g,r==null?(qa=!0,Ca(o,g)):o}o=l}}function fn(t){for(var r=t.e*La,a=t.d[0];a>=10;a/=10)r++;return r}function VE(t,r,a){if(r>t.LN10.sd())throw qa=!0,a&&(t.precision=a),Error(no+"LN10 precision limit exceeded");return Ca(new t(t.LN10),r)}function ni(t){for(var r="";t--;)r+="0";return r}function Iu(t,r){var a,n,s,o,l,c,m,p,f,g=1,b=10,x=t,v=x.d,E=x.constructor,y=E.precision;if(x.s<1)throw Error(no+(x.s?"NaN":"-Infinity"));if(x.eq(Is))return new E(0);if(r==null?(qa=!1,p=y):p=r,x.eq(10))return r==null&&(qa=!0),VE(E,p);if(p+=b,E.precision=p,a=Fo(v),n=a.charAt(0),o=fn(x),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&a.charAt(1)>3;)x=x.times(t),a=Fo(x.d),n=a.charAt(0),g++;o=fn(x),n>1?(x=new E("0."+a),o++):x=new E(n+"."+a.slice(1))}else return m=VE(E,p+2,y).times(o+""),x=Iu(new E(n+"."+a.slice(1)),p-b).plus(m),E.precision=y,r==null?(qa=!0,Ca(x,y)):x;for(c=l=x=kl(x.minus(Is),x.plus(Is),p),f=Ca(x.times(x),p),s=3;;){if(l=Ca(l.times(f),p),m=c.plus(kl(l,new E(s),p)),Fo(m.d).slice(0,p)===Fo(c.d).slice(0,p))return c=c.times(2),o!==0&&(c=c.plus(VE(E,p+2,y).times(o+""))),c=kl(c,new E(g),p),E.precision=y,r==null?(qa=!0,Ca(c,y)):c;c=m,s+=2}}function Q6(t,r){var a,n,s;for((a=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(a<0&&(a=n),a+=+r.slice(n+1),r=r.substring(0,n)):a<0&&(a=r.length),n=0;r.charCodeAt(n)===48;)++n;for(s=r.length;r.charCodeAt(s-1)===48;)--s;if(r=r.slice(n,s),r){if(s-=n,a=a-n-1,t.e=lm(a/La),t.d=[],n=(a+1)%La,a<0&&(n+=La),n<s){for(n&&t.d.push(+r.slice(0,n)),s-=La;n<s;)t.d.push(+r.slice(n,n+=La));r=r.slice(n),n=La-r.length}else n-=s;for(;n--;)r+="0";if(t.d.push(+r),qa&&(t.e>Zf||t.e<-Zf))throw Error(hk+a)}else t.s=0,t.e=0,t.d=[0];return t}function Ca(t,r,a){var n,s,o,l,c,m,p,f,g=t.d;for(l=1,o=g[0];o>=10;o/=10)l++;if(n=r-l,n<0)n+=La,s=r,p=g[f=0];else{if(f=Math.ceil((n+1)/La),o=g.length,f>=o)return t;for(p=o=g[f],l=1;o>=10;o/=10)l++;n%=La,s=n-La+l}if(a!==void 0&&(o=Xi(10,l-s-1),c=p/o%10|0,m=r<0||g[f+1]!==void 0||p%o,m=a<4?(c||m)&&(a==0||a==(t.s<0?3:2)):c>5||c==5&&(a==4||m||a==6&&(n>0?s>0?p/Xi(10,l-s):0:g[f-1])%10&1||a==(t.s<0?8:7))),r<1||!g[0])return m?(o=fn(t),g.length=1,r=r-o-1,g[0]=Xi(10,(La-r%La)%La),t.e=lm(-r/La)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(n==0?(g.length=f,o=1,f--):(g.length=f+1,o=Xi(10,La-n),g[f]=s>0?(p/Xi(10,l-s)%Xi(10,s)|0)*o:0),m)for(;;)if(f==0){(g[0]+=o)==An&&(g[0]=1,++t.e);break}else{if(g[f]+=o,g[f]!=An)break;g[f--]=0,o=1}for(n=g.length;g[--n]===0;)g.pop();if(qa&&(t.e>Zf||t.e<-Zf))throw Error(hk+fn(t));return t}function wR(t,r){var a,n,s,o,l,c,m,p,f,g,b=t.constructor,x=b.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new b(t),qa?Ca(r,x):r;if(m=t.d,g=r.d,n=r.e,p=t.e,m=m.slice(),l=p-n,l){for(f=l<0,f?(a=m,l=-l,c=g.length):(a=g,n=p,c=m.length),s=Math.max(Math.ceil(x/La),c)+2,l>s&&(l=s,a.length=1),a.reverse(),s=l;s--;)a.push(0);a.reverse()}else{for(s=m.length,c=g.length,f=s<c,f&&(c=s),s=0;s<c;s++)if(m[s]!=g[s]){f=m[s]<g[s];break}l=0}for(f&&(a=m,m=g,g=a,r.s=-r.s),c=m.length,s=g.length-c;s>0;--s)m[c++]=0;for(s=g.length;s>l;){if(m[--s]<g[s]){for(o=s;o&&m[--o]===0;)m[o]=An-1;--m[o],m[s]+=An}m[s]-=g[s]}for(;m[--c]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(r.d=m,r.e=n,qa?Ca(r,x):r):new b(0)}function fc(t,r,a){var n,s=fn(t),o=Fo(t.d),l=o.length;return r?(a&&(n=a-l)>0?o=o.charAt(0)+"."+o.slice(1)+ni(n):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+ni(-s-1)+o,a&&(n=a-l)>0&&(o+=ni(n))):s>=l?(o+=ni(s+1-l),a&&(n=a-s-1)>0&&(o=o+"."+ni(n))):((n=s+1)<l&&(o=o.slice(0,n)+"."+o.slice(n)),a&&(n=a-l)>0&&(s+1===l&&(o+="."),o+=ni(n))),t.s<0?"-"+o:o}function J6(t,r){if(t.length>r)return t.length=r,!0}function NR(t){var r,a,n;function s(o){var l=this;if(!(l instanceof s))return new s(o);if(l.constructor=s,o instanceof s){l.s=o.s,l.e=o.e,l.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(lc+o);if(o>0)l.s=1;else if(o<0)o=-o,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(o===~~o&&o<1e7){l.e=0,l.d=[o];return}return Q6(l,o.toString())}else if(typeof o!="string")throw Error(lc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),l.s=-1):l.s=1,mZ.test(o))Q6(l,o);else throw Error(lc+o)}if(s.prototype=Wt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=NR,s.config=s.set=uZ,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<n.length;)t.hasOwnProperty(a=n[r++])||(t[a]=this[a]);return s.config(t),s}function uZ(t){if(!t||typeof t!="object")throw Error(no+"Object expected");var r,a,n,s=["precision",1,om,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<s.length;r+=3)if((n=t[a=s[r]])!==void 0)if(lm(n)===n&&n>=s[r+1]&&n<=s[r+2])this[a]=n;else throw Error(lc+a+": "+n);if((n=t[a="LN10"])!==void 0)if(n==Math.LN10)this[a]=new this(n);else throw Error(lc+a+": "+n);return this}var bk=NR(dZ);Is=new bk(1);const va=bk;function pZ(t){return bZ(t)||hZ(t)||gZ(t)||fZ()}function fZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gZ(t,r){if(t){if(typeof t=="string")return JN(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return JN(t,r)}}function hZ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function bZ(t){if(Array.isArray(t))return JN(t)}function JN(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}var xZ=function(r){return r},kR={},SR=function(r){return r===kR},Z6=function(r){return function a(){return arguments.length===0||arguments.length===1&&SR(arguments.length<=0?void 0:arguments[0])?a:r.apply(void 0,arguments)}},yZ=function t(r,a){return r===1?a:Z6(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.filter(function(c){return c!==kR}).length;return l>=r?a.apply(void 0,s):t(r-l,Z6(function(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];var f=s.map(function(g){return SR(g)?m.shift():g});return a.apply(void 0,pZ(f).concat(m))}))})},uh=function(r){return yZ(r.length,r)},ZN=function(r,a){for(var n=[],s=r;s<a;++s)n[s-r]=s;return n},vZ=uh(function(t,r){return Array.isArray(r)?r.map(t):Object.keys(r).map(function(a){return r[a]}).map(t)}),EZ=function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];if(!a.length)return xZ;var s=a.reverse(),o=s[0],l=s.slice(1);return function(){return l.reduce(function(c,m){return m(c)},o.apply(void 0,arguments))}},e1=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},CR=function(r){var a=null,n=null;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return a&&o.every(function(c,m){return c===a[m]})||(a=o,n=r.apply(void 0,o)),n}};function wZ(t){var r;return t===0?r=1:r=Math.floor(new va(t).abs().log(10).toNumber())+1,r}function NZ(t,r,a){for(var n=new va(t),s=0,o=[];n.lt(r)&&s<1e5;)o.push(n.toNumber()),n=n.add(a),s++;return o}var kZ=uh(function(t,r,a){var n=+t,s=+r;return n+a*(s-n)}),SZ=uh(function(t,r,a){var n=r-+t;return n=n||1/0,(a-t)/n}),CZ=uh(function(t,r,a){var n=r-+t;return n=n||1/0,Math.max(0,Math.min(1,(a-t)/n))});const ph={rangeStep:NZ,getDigitCount:wZ,interpolateNumber:kZ,uninterpolateNumber:SZ,uninterpolateTruncation:CZ};function t1(t){return PZ(t)||_Z(t)||AR(t)||AZ()}function AZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Z(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function PZ(t){if(Array.isArray(t))return r1(t)}function Du(t,r){return MZ(t)||OZ(t,r)||AR(t,r)||TZ()}function TZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AR(t,r){if(t){if(typeof t=="string")return r1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r1(t,r)}}function r1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function OZ(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],n=!0,s=!1,o=void 0;try{for(var l=t[Symbol.iterator](),c;!(n=(c=l.next()).done)&&(a.push(c.value),!(r&&a.length===r));n=!0);}catch(m){s=!0,o=m}finally{try{!n&&l.return!=null&&l.return()}finally{if(s)throw o}}return a}}function MZ(t){if(Array.isArray(t))return t}function _R(t){var r=Du(t,2),a=r[0],n=r[1],s=a,o=n;return a>n&&(s=n,o=a),[s,o]}function PR(t,r,a){if(t.lte(0))return new va(0);var n=ph.getDigitCount(t.toNumber()),s=new va(10).pow(n),o=t.div(s),l=n!==1?.05:.1,c=new va(Math.ceil(o.div(l).toNumber())).add(a).mul(l),m=c.mul(s);return r?m:new va(Math.ceil(m))}function jZ(t,r,a){var n=1,s=new va(t);if(!s.isint()&&a){var o=Math.abs(t);o<1?(n=new va(10).pow(ph.getDigitCount(t)-1),s=new va(Math.floor(s.div(n).toNumber())).mul(n)):o>1&&(s=new va(Math.floor(t)))}else t===0?s=new va(Math.floor((r-1)/2)):a||(s=new va(Math.floor(t)));var l=Math.floor((r-1)/2),c=EZ(vZ(function(m){return s.add(new va(m-l).mul(n)).toNumber()}),ZN);return c(0,r)}function TR(t,r,a,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new va(0),tickMin:new va(0),tickMax:new va(0)};var o=PR(new va(r).sub(t).div(a-1),n,s),l;t<=0&&r>=0?l=new va(0):(l=new va(t).add(r).div(2),l=l.sub(new va(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),m=Math.ceil(new va(r).sub(l).div(o).toNumber()),p=c+m+1;return p>a?TR(t,r,a,n,s+1):(p<a&&(m=r>0?m+(a-p):m,c=r>0?c:c+(a-p)),{step:o,tickMin:l.sub(new va(c).mul(o)),tickMax:l.add(new va(m).mul(o))})}function RZ(t){var r=Du(t,2),a=r[0],n=r[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),c=_R([a,n]),m=Du(c,2),p=m[0],f=m[1];if(p===-1/0||f===1/0){var g=f===1/0?[p].concat(t1(ZN(0,s-1).map(function(){return 1/0}))):[].concat(t1(ZN(0,s-1).map(function(){return-1/0})),[f]);return a>n?e1(g):g}if(p===f)return jZ(p,s,o);var b=TR(p,f,l,o),x=b.step,v=b.tickMin,E=b.tickMax,y=ph.rangeStep(v,E.add(new va(.1).mul(x)),x);return a>n?e1(y):y}function $Z(t,r){var a=Du(t,2),n=a[0],s=a[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=_R([n,s]),c=Du(l,2),m=c[0],p=c[1];if(m===-1/0||p===1/0)return[n,s];if(m===p)return[m];var f=Math.max(r,2),g=PR(new va(p).sub(m).div(f-1),o,0),b=[].concat(t1(ph.rangeStep(new va(m),new va(p).sub(new va(.99).mul(g)),g)),[p]);return n>s?e1(b):b}var LZ=CR(RZ),IZ=CR($Z),DZ="Invariant failed";function gc(t,r){throw new Error(DZ)}var FZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$d(t)}function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},eg.apply(this,arguments)}function zZ(t,r){return VZ(t)||UZ(t,r)||qZ(t,r)||BZ()}function BZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qZ(t,r){if(t){if(typeof t=="string")return eP(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return eP(t,r)}}function eP(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function UZ(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function VZ(t){if(Array.isArray(t))return t}function HZ(t,r){if(t==null)return{};var a=WZ(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function WZ(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function GZ(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function KZ(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jR(n.key),n)}}function YZ(t,r,a){return r&&KZ(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XZ(t,r,a){return r=tg(r),QZ(t,OR()?Reflect.construct(r,a||[],tg(t).constructor):r.apply(t,a))}function QZ(t,r){if(r&&($d(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JZ(t)}function JZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OR=function(){return!!t})()}function tg(t){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},tg(t)}function ZZ(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&a1(t,r)}function a1(t,r){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},a1(t,r)}function MR(t,r,a){return r=jR(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function jR(t){var r=eee(t,"string");return $d(r)=="symbol"?r:r+""}function eee(t,r){if($d(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if($d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kp=(function(t){function r(){return GZ(this,r),XZ(this,r,arguments)}return ZZ(r,t),YZ(r,[{key:"render",value:function(){var n=this.props,s=n.offset,o=n.layout,l=n.width,c=n.dataKey,m=n.data,p=n.dataPointFormatter,f=n.xAxis,g=n.yAxis,b=HZ(n,FZ),x=Xr(b,!1);this.props.direction==="x"&&f.type!=="number"&&gc();var v=m.map(function(E){var y=p(E,c),w=y.x,k=y.y,C=y.value,A=y.errorVal;if(!A)return null;var S=[],P,T;if(Array.isArray(A)){var O=zZ(A,2);P=O[0],T=O[1]}else P=T=A;if(o==="vertical"){var R=f.scale,D=k+s,$=D+l,j=D-l,K=R(C-P),H=R(C+T);S.push({x1:H,y1:$,x2:H,y2:j}),S.push({x1:K,y1:D,x2:H,y2:D}),S.push({x1:K,y1:$,x2:K,y2:j})}else if(o==="horizontal"){var V=g.scale,q=w+s,Y=q-l,z=q+l,L=V(C-P),Q=V(C+T);S.push({x1:Y,y1:Q,x2:z,y2:Q}),S.push({x1:q,y1:L,x2:q,y2:Q}),S.push({x1:Y,y1:L,x2:z,y2:L})}return e.createElement(rn,eg({className:"recharts-errorBar",key:"bar-".concat(S.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},x),S.map(function(B){return e.createElement("line",eg({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return e.createElement(rn,{className:"recharts-errorBars"},v)}}])})(e.Component);MR(kp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});MR(kp,"displayName","ErrorBar");function Fu(t){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fu(t)}function tP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function zi(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?tP(Object(a),!0).forEach(function(n){tee(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function tee(t,r,a){return r=ree(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ree(t){var r=aee(t,"string");return Fu(r)=="symbol"?r:r+""}function aee(t,r){if(Fu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var RR=function(r){var a=r.children,n=r.formattedGraphicalItems,s=r.legendWidth,o=r.legendContent,l=$s(a,sc);if(!l)return null;var c=sc.defaultProps,m=c!==void 0?zi(zi({},c),l.props):{},p;return l.props&&l.props.payload?p=l.props&&l.props.payload:o==="children"?p=(n||[]).reduce(function(f,g){var b=g.item,x=g.props,v=x.sectors||x.data||[];return f.concat(v.map(function(E){return{type:l.props.iconType||b.props.legendType,value:E.name,color:E.fill,payload:E}}))},[]):p=(n||[]).map(function(f){var g=f.item,b=g.type.defaultProps,x=b!==void 0?zi(zi({},b),g.props):{},v=x.dataKey,E=x.name,y=x.legendType,w=x.hide;return{inactive:w,dataKey:v,type:m.iconType||y||"square",color:xk(g),value:E||v,payload:x}}),zi(zi(zi({},m),sc.getWithHeight(l,s)),{},{payload:p,item:l})};function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zu(t)}function rP(t){return lee(t)||oee(t)||see(t)||nee()}function nee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function see(t,r){if(t){if(typeof t=="string")return n1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n1(t,r)}}function oee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lee(t){if(Array.isArray(t))return n1(t)}function n1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function aP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function Qa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?aP(Object(a),!0).forEach(function(n){yd(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):aP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function yd(t,r,a){return r=iee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function iee(t){var r=cee(t,"string");return zu(r)=="symbol"?r:r+""}function cee(t,r){if(zu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Fs(t,r,a){return qr(t)||qr(r)?a:vn(r)?ro(t,r,a):Lr(r)?r(t):a}function pu(t,r,a,n){var s=lZ(t,function(c){return Fs(c,r)});if(a==="number"){var o=s.filter(function(c){return $t(c)||parseFloat(c)});return o.length?[dh(o),ch(o)]:[1/0,-1/0]}var l=n?s.filter(function(c){return!qr(c)}):s;return l.map(function(c){return vn(c)||c instanceof Date?c:""})}var dee=function(r){var a,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=-1,c=(a=n?.length)!==null&&a!==void 0?a:0;if(c<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var m=o.range,p=0;p<c;p++){var f=p>0?s[p-1].coordinate:s[c-1].coordinate,g=s[p].coordinate,b=p>=c-1?s[0].coordinate:s[p+1].coordinate,x=void 0;if(No(g-f)!==No(b-g)){var v=[];if(No(b-g)===No(m[1]-m[0])){x=b;var E=g+m[1]-m[0];v[0]=Math.min(E,(E+f)/2),v[1]=Math.max(E,(E+f)/2)}else{x=f;var y=b+m[1]-m[0];v[0]=Math.min(g,(y+g)/2),v[1]=Math.max(g,(y+g)/2)}var w=[Math.min(g,(x+g)/2),Math.max(g,(x+g)/2)];if(r>w[0]&&r<=w[1]||r>=v[0]&&r<=v[1]){l=s[p].index;break}}else{var k=Math.min(f,b),C=Math.max(f,b);if(r>(k+g)/2&&r<=(C+g)/2){l=s[p].index;break}}}else for(var A=0;A<c;A++)if(A===0&&r<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<c-1&&r>(n[A].coordinate+n[A-1].coordinate)/2&&r<=(n[A].coordinate+n[A+1].coordinate)/2||A===c-1&&r>(n[A].coordinate+n[A-1].coordinate)/2){l=n[A].index;break}return l},xk=function(r){var a,n=r,s=n.type.displayName,o=(a=r.type)!==null&&a!==void 0&&a.defaultProps?Qa(Qa({},r.type.defaultProps),r.props):r.props,l=o.stroke,c=o.fill,m;switch(s){case"Line":m=l;break;case"Area":case"Radar":m=l&&l!=="none"?l:c;break;default:m=c;break}return m},mee=function(r){var a=r.barSize,n=r.totalSize,s=r.stackGroups,o=s===void 0?{}:s;if(!o)return{};for(var l={},c=Object.keys(o),m=0,p=c.length;m<p;m++)for(var f=o[c[m]].stackGroups,g=Object.keys(f),b=0,x=g.length;b<x;b++){var v=f[g[b]],E=v.items,y=v.cateAxisId,w=E.filter(function(T){return wl(T.type).indexOf("Bar")>=0});if(w&&w.length){var k=w[0].type.defaultProps,C=k!==void 0?Qa(Qa({},k),w[0].props):w[0].props,A=C.barSize,S=C[y];l[S]||(l[S]=[]);var P=qr(A)?a:A;l[S].push({item:w[0],stackList:w.slice(1),barSize:qr(P)?void 0:pc(P,n,0)})}}return l},uee=function(r){var a=r.barGap,n=r.barCategoryGap,s=r.bandSize,o=r.sizeList,l=o===void 0?[]:o,c=r.maxBarSize,m=l.length;if(m<1)return null;var p=pc(a,s,0,!0),f,g=[];if(l[0].barSize===+l[0].barSize){var b=!1,x=s/m,v=l.reduce(function(A,S){return A+S.barSize||0},0);v+=(m-1)*p,v>=s&&(v-=(m-1)*p,p=0),v>=s&&x>0&&(b=!0,x*=.9,v=m*x);var E=(s-v)/2>>0,y={offset:E-p,size:0};f=l.reduce(function(A,S){var P={item:S.item,position:{offset:y.offset+y.size+p,size:b?x:S.barSize}},T=[].concat(rP(A),[P]);return y=T[T.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(O){T.push({item:O,position:y})}),T},g)}else{var w=pc(n,s,0,!0);s-2*w-(m-1)*p<=0&&(p=0);var k=(s-2*w-(m-1)*p)/m;k>1&&(k>>=0);var C=c===+c?Math.min(k,c):k;f=l.reduce(function(A,S,P){var T=[].concat(rP(A),[{item:S.item,position:{offset:w+(k+p)*P+(k-C)/2,size:C}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(O){T.push({item:O,position:T[T.length-1].position})}),T},g)}return f},pee=function(r,a,n,s){var o=n.children,l=n.width,c=n.margin,m=l-(c.left||0)-(c.right||0),p=RR({children:o,legendWidth:m});if(p){var f=s||{},g=f.width,b=f.height,x=p.align,v=p.verticalAlign,E=p.layout;if((E==="vertical"||E==="horizontal"&&v==="middle")&&x!=="center"&&$t(r[x]))return Qa(Qa({},r),{},yd({},x,r[x]+(g||0)));if((E==="horizontal"||E==="vertical"&&x==="center")&&v!=="middle"&&$t(r[v]))return Qa(Qa({},r),{},yd({},v,r[v]+(b||0)))}return r},fee=function(r,a,n){return qr(a)?!0:r==="horizontal"?a==="yAxis":r==="vertical"||n==="x"?a==="xAxis":n==="y"?a==="yAxis":!0},$R=function(r,a,n,s,o){var l=a.props.children,c=ao(l,kp).filter(function(p){return fee(s,o,p.props.direction)});if(c&&c.length){var m=c.map(function(p){return p.props.dataKey});return r.reduce(function(p,f){var g=Fs(f,n);if(qr(g))return p;var b=Array.isArray(g)?[dh(g),ch(g)]:[g,g],x=m.reduce(function(v,E){var y=Fs(f,E,0),w=b[0]-Math.abs(Array.isArray(y)?y[0]:y),k=b[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,v[0]),Math.max(k,v[1])]},[1/0,-1/0]);return[Math.min(x[0],p[0]),Math.max(x[1],p[1])]},[1/0,-1/0])}return null},gee=function(r,a,n,s,o){var l=a.map(function(c){return $R(r,c,n,o,s)}).filter(function(c){return!qr(c)});return l&&l.length?l.reduce(function(c,m){return[Math.min(c[0],m[0]),Math.max(c[1],m[1])]},[1/0,-1/0]):null},LR=function(r,a,n,s,o){var l=a.map(function(m){var p=m.props.dataKey;return n==="number"&&p&&$R(r,m,p,s)||pu(r,p,n,o)});if(n==="number")return l.reduce(function(m,p){return[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);var c={};return l.reduce(function(m,p){for(var f=0,g=p.length;f<g;f++)c[p[f]]||(c[p[f]]=!0,m.push(p[f]));return m},[])},IR=function(r,a){return r==="horizontal"&&a==="xAxis"||r==="vertical"&&a==="yAxis"||r==="centric"&&a==="angleAxis"||r==="radial"&&a==="radiusAxis"},DR=function(r,a,n,s){if(s)return r.map(function(m){return m.coordinate});var o,l,c=r.map(function(m){return m.coordinate===a&&(o=!0),m.coordinate===n&&(l=!0),m.coordinate});return o||c.push(a),l||c.push(n),c},xl=function(r,a,n){if(!r)return null;var s=r.scale,o=r.duplicateDomain,l=r.type,c=r.range,m=r.realScaleType==="scaleBand"?s.bandwidth()/2:2,p=(a||n)&&l==="category"&&s.bandwidth?s.bandwidth()/m:0;if(p=r.axisType==="angleAxis"&&c?.length>=2?No(c[0]-c[1])*2*p:p,a&&(r.ticks||r.niceTicks)){var f=(r.ticks||r.niceTicks).map(function(g){var b=o?o.indexOf(g):g;return{coordinate:s(b)+p,value:g,offset:p}});return f.filter(function(g){return!bp(g.coordinate)})}return r.isCategorical&&r.categoricalDomain?r.categoricalDomain.map(function(g,b){return{coordinate:s(g)+p,value:g,index:b,offset:p}}):s.ticks&&!n?s.ticks(r.tickCount).map(function(g){return{coordinate:s(g)+p,value:g,offset:p}}):s.domain().map(function(g,b){return{coordinate:s(g)+p,value:o?o[g]:g,index:b,offset:p}})},HE=new WeakMap,R0=function(r,a){if(typeof a!="function")return r;HE.has(r)||HE.set(r,new WeakMap);var n=HE.get(r);if(n.has(a))return n.get(a);var s=function(){r.apply(void 0,arguments),a.apply(void 0,arguments)};return n.set(a,s),s},hee=function(r,a,n){var s=r.scale,o=r.type,l=r.layout,c=r.axisType;if(s==="auto")return l==="radial"&&c==="radiusAxis"?{scale:Mu(),realScaleType:"band"}:l==="radial"&&c==="angleAxis"?{scale:Yf(),realScaleType:"linear"}:o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?{scale:uu(),realScaleType:"point"}:o==="category"?{scale:Mu(),realScaleType:"band"}:{scale:Yf(),realScaleType:"linear"};if(uc(s)){var m="scale".concat(Xg(s));return{scale:(q6[m]||uu)(),realScaleType:q6[m]?m:"point"}}return Lr(s)?{scale:s}:{scale:uu(),realScaleType:"point"}},nP=1e-4,bee=function(r){var a=r.domain();if(!(!a||a.length<=2)){var n=a.length,s=r.range(),o=Math.min(s[0],s[1])-nP,l=Math.max(s[0],s[1])+nP,c=r(a[0]),m=r(a[n-1]);(c<o||c>l||m<o||m>l)&&r.domain([a[0],a[n-1]])}},xee=function(r,a){if(!r)return null;for(var n=0,s=r.length;n<s;n++)if(r[n].item===a)return r[n].position;return null},yee=function(r,a){if(!a||a.length!==2||!$t(a[0])||!$t(a[1]))return r;var n=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),o=[r[0],r[1]];return(!$t(r[0])||r[0]<n)&&(o[0]=n),(!$t(r[1])||r[1]>s)&&(o[1]=s),o[0]>s&&(o[0]=s),o[1]<n&&(o[1]=n),o},vee=function(r){var a=r.length;if(!(a<=0))for(var n=0,s=r[0].length;n<s;++n)for(var o=0,l=0,c=0;c<a;++c){var m=bp(r[c][n][1])?r[c][n][0]:r[c][n][1];m>=0?(r[c][n][0]=o,r[c][n][1]=o+m,o=r[c][n][1]):(r[c][n][0]=l,r[c][n][1]=l+m,l=r[c][n][1])}},Eee=function(r){var a=r.length;if(!(a<=0))for(var n=0,s=r[0].length;n<s;++n)for(var o=0,l=0;l<a;++l){var c=bp(r[l][n][1])?r[l][n][0]:r[l][n][1];c>=0?(r[l][n][0]=o,r[l][n][1]=o+c,o=r[l][n][1]):(r[l][n][0]=0,r[l][n][1]=0)}},wee={sign:vee,expand:sG,none:Ad,silhouette:oG,wiggle:lG,positive:Eee},Nee=function(r,a,n){var s=a.map(function(c){return c.props.dataKey}),o=wee[n],l=nG().keys(s).value(function(c,m){return+Fs(c,m,0)}).order(RN).offset(o);return l(r)},kee=function(r,a,n,s,o,l){if(!r)return null;var c=l?a.reverse():a,m={},p=c.reduce(function(g,b){var x,v=(x=b.type)!==null&&x!==void 0&&x.defaultProps?Qa(Qa({},b.type.defaultProps),b.props):b.props,E=v.stackId,y=v.hide;if(y)return g;var w=v[n],k=g[w]||{hasStack:!1,stackGroups:{}};if(vn(E)){var C=k.stackGroups[E]||{numericAxisId:n,cateAxisId:s,items:[]};C.items.push(b),k.hasStack=!0,k.stackGroups[E]=C}else k.stackGroups[xp("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[b]};return Qa(Qa({},g),{},yd({},w,k))},m),f={};return Object.keys(p).reduce(function(g,b){var x=p[b];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(E,y){var w=x.stackGroups[y];return Qa(Qa({},E),{},yd({},y,{numericAxisId:n,cateAxisId:s,items:w.items,stackedData:Nee(r,w.items,o)}))},v)}return Qa(Qa({},g),{},yd({},b,x))},f)},See=function(r,a){var n=a.realScaleType,s=a.type,o=a.tickCount,l=a.originalDomain,c=a.allowDecimals,m=n||a.scale;if(m!=="auto"&&m!=="linear")return null;if(o&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var p=r.domain();if(!p.length)return null;var f=LZ(p,o,c);return r.domain([dh(f),ch(f)]),{niceTicks:f}}if(o&&s==="number"){var g=r.domain(),b=IZ(g,o,c);return{niceTicks:b}}return null};function sP(t){var r=t.axis,a=t.ticks,n=t.bandSize,s=t.entry,o=t.index,l=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!qr(s[r.dataKey])){var c=_f(a,"value",s[r.dataKey]);if(c)return c.coordinate+n/2}return a[o]?a[o].coordinate+n/2:null}var m=Fs(s,qr(l)?r.dataKey:l);return qr(m)?null:r.scale(m)}var oP=function(r){var a=r.axis,n=r.ticks,s=r.offset,o=r.bandSize,l=r.entry,c=r.index;if(a.type==="category")return n[c]?n[c].coordinate+s:null;var m=Fs(l,a.dataKey,a.domain[c]);return qr(m)?null:a.scale(m)-o/2+s},Cee=function(r){var a=r.numericAxis,n=a.scale.domain();if(a.type==="number"){var s=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return s<=0&&o>=0?0:o<0?o:s}return n[0]},Aee=function(r,a){var n,s=(n=r.type)!==null&&n!==void 0&&n.defaultProps?Qa(Qa({},r.type.defaultProps),r.props):r.props,o=s.stackId;if(vn(o)){var l=a[o];if(l){var c=l.items.indexOf(r);return c>=0?l.stackedData[c]:null}}return null},_ee=function(r){return r.reduce(function(a,n){return[dh(n.concat([a[0]]).filter($t)),ch(n.concat([a[1]]).filter($t))]},[1/0,-1/0])},FR=function(r,a,n){return Object.keys(r).reduce(function(s,o){var l=r[o],c=l.stackedData,m=c.reduce(function(p,f){var g=_ee(f.slice(a,n+1));return[Math.min(p[0],g[0]),Math.max(p[1],g[1])]},[1/0,-1/0]);return[Math.min(m[0],s[0]),Math.max(m[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},lP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,s1=function(r,a,n){if(Lr(r))return r(a,n);if(!Array.isArray(r))return a;var s=[];if($t(r[0]))s[0]=n?r[0]:Math.min(r[0],a[0]);else if(lP.test(r[0])){var o=+lP.exec(r[0])[1];s[0]=a[0]-o}else Lr(r[0])?s[0]=r[0](a[0]):s[0]=a[0];if($t(r[1]))s[1]=n?r[1]:Math.max(r[1],a[1]);else if(iP.test(r[1])){var l=+iP.exec(r[1])[1];s[1]=a[1]+l}else Lr(r[1])?s[1]=r[1](a[1]):s[1]=a[1];return s},rg=function(r,a,n){if(r&&r.scale&&r.scale.bandwidth){var s=r.scale.bandwidth();if(!n||s>0)return s}if(r&&a&&a.length>=2){for(var o=W2(a,function(g){return g.coordinate}),l=1/0,c=1,m=o.length;c<m;c++){var p=o[c],f=o[c-1];l=Math.min((p.coordinate||0)-(f.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0},cP=function(r,a,n){return!r||!r.length||mh(r,ro(n,"type.defaultProps.domain"))?a:r},zR=function(r,a){var n=r.type.defaultProps?Qa(Qa({},r.type.defaultProps),r.props):r.props,s=n.dataKey,o=n.name,l=n.unit,c=n.formatter,m=n.tooltipType,p=n.chartType,f=n.hide;return Qa(Qa({},Xr(r,!1)),{},{dataKey:s,unit:l,formatter:c,name:o||s,color:xk(r),value:Fs(a,s),type:m,payload:a,chartType:p,hide:f})};function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bu(t)}function dP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function mP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?dP(Object(a),!0).forEach(function(n){Pee(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Pee(t,r,a){return r=Tee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Tee(t){var r=Oee(t,"string");return Bu(r)=="symbol"?r:r+""}function Oee(t,r){if(Bu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ag=Math.PI/180,Mee=function(r){return r*180/Math.PI},In=function(r,a,n,s){return{x:r+Math.cos(-ag*s)*n,y:a+Math.sin(-ag*s)*n}},jee=function(r,a){var n=r.x,s=r.y,o=a.x,l=a.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(s-l,2))},Ree=function(r,a){var n=r.x,s=r.y,o=a.cx,l=a.cy,c=jee({x:n,y:s},{x:o,y:l});if(c<=0)return{radius:c};var m=(n-o)/c,p=Math.acos(m);return s>l&&(p=2*Math.PI-p),{radius:c,angle:Mee(p),angleInRadian:p}},$ee=function(r){var a=r.startAngle,n=r.endAngle,s=Math.floor(a/360),o=Math.floor(n/360),l=Math.min(s,o);return{startAngle:a-l*360,endAngle:n-l*360}},Lee=function(r,a){var n=a.startAngle,s=a.endAngle,o=Math.floor(n/360),l=Math.floor(s/360),c=Math.min(o,l);return r+c*360},uP=function(r,a){var n=r.x,s=r.y,o=Ree({x:n,y:s},a),l=o.radius,c=o.angle,m=a.innerRadius,p=a.outerRadius;if(l<m||l>p)return!1;if(l===0)return!0;var f=$ee(a),g=f.startAngle,b=f.endAngle,x=c,v;if(g<=b){for(;x>b;)x-=360;for(;x<g;)x+=360;v=x>=g&&x<=b}else{for(;x>g;)x-=360;for(;x<b;)x+=360;v=x>=b&&x<=g}return v?mP(mP({},a),{},{radius:l,angle:Lee(x,a)}):null};function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qu(t)}var Iee=["offset"];function Dee(t){return qee(t)||Bee(t)||zee(t)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zee(t,r){if(t){if(typeof t=="string")return o1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o1(t,r)}}function Bee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qee(t){if(Array.isArray(t))return o1(t)}function o1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function Uee(t,r){if(t==null)return{};var a=Vee(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Vee(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function pP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function yn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?pP(Object(a),!0).forEach(function(n){Hee(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Hee(t,r,a){return r=Wee(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Wee(t){var r=Gee(t,"string");return qu(r)=="symbol"?r:r+""}function Gee(t,r){if(qu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Uu.apply(this,arguments)}var Kee=function(r){var a=r.value,n=r.formatter,s=qr(r.children)?a:r.children;return Lr(n)?n(s):s},Yee=function(r,a){var n=No(a-r),s=Math.min(Math.abs(a-r),360);return n*s},Xee=function(r,a,n){var s=r.position,o=r.viewBox,l=r.offset,c=r.className,m=o,p=m.cx,f=m.cy,g=m.innerRadius,b=m.outerRadius,x=m.startAngle,v=m.endAngle,E=m.clockWise,y=(g+b)/2,w=Yee(x,v),k=w>=0?1:-1,C,A;s==="insideStart"?(C=x+k*l,A=E):s==="insideEnd"?(C=v-k*l,A=!E):s==="end"&&(C=v+k*l,A=E),A=w<=0?A:!A;var S=In(p,f,y,C),P=In(p,f,y,C+(A?1:-1)*359),T="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(P.x,",").concat(P.y),O=qr(r.id)?xp("recharts-radial-line-"):r.id;return e.createElement("text",Uu({},n,{dominantBaseline:"central",className:ta("recharts-radial-bar-label",c)}),e.createElement("defs",null,e.createElement("path",{id:O,d:T})),e.createElement("textPath",{xlinkHref:"#".concat(O)},a))},Qee=function(r){var a=r.viewBox,n=r.offset,s=r.position,o=a,l=o.cx,c=o.cy,m=o.innerRadius,p=o.outerRadius,f=o.startAngle,g=o.endAngle,b=(f+g)/2;if(s==="outside"){var x=In(l,c,p+n,b),v=x.x,E=x.y;return{x:v,y:E,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"end"};var y=(m+p)/2,w=In(l,c,y,b),k=w.x,C=w.y;return{x:k,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Jee=function(r){var a=r.viewBox,n=r.parentViewBox,s=r.offset,o=r.position,l=a,c=l.x,m=l.y,p=l.width,f=l.height,g=f>=0?1:-1,b=g*s,x=g>0?"end":"start",v=g>0?"start":"end",E=p>=0?1:-1,y=E*s,w=E>0?"end":"start",k=E>0?"start":"end";if(o==="top"){var C={x:c+p/2,y:m-g*s,textAnchor:"middle",verticalAnchor:x};return yn(yn({},C),n?{height:Math.max(m-n.y,0),width:p}:{})}if(o==="bottom"){var A={x:c+p/2,y:m+f+b,textAnchor:"middle",verticalAnchor:v};return yn(yn({},A),n?{height:Math.max(n.y+n.height-(m+f),0),width:p}:{})}if(o==="left"){var S={x:c-y,y:m+f/2,textAnchor:w,verticalAnchor:"middle"};return yn(yn({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(o==="right"){var P={x:c+p+y,y:m+f/2,textAnchor:k,verticalAnchor:"middle"};return yn(yn({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:f}:{})}var T=n?{width:p,height:f}:{};return o==="insideLeft"?yn({x:c+y,y:m+f/2,textAnchor:k,verticalAnchor:"middle"},T):o==="insideRight"?yn({x:c+p-y,y:m+f/2,textAnchor:w,verticalAnchor:"middle"},T):o==="insideTop"?yn({x:c+p/2,y:m+b,textAnchor:"middle",verticalAnchor:v},T):o==="insideBottom"?yn({x:c+p/2,y:m+f-b,textAnchor:"middle",verticalAnchor:x},T):o==="insideTopLeft"?yn({x:c+y,y:m+b,textAnchor:k,verticalAnchor:v},T):o==="insideTopRight"?yn({x:c+p-y,y:m+b,textAnchor:w,verticalAnchor:v},T):o==="insideBottomLeft"?yn({x:c+y,y:m+f-b,textAnchor:k,verticalAnchor:x},T):o==="insideBottomRight"?yn({x:c+p-y,y:m+f-b,textAnchor:w,verticalAnchor:x},T):rm(o)&&($t(o.x)||Zi(o.x))&&($t(o.y)||Zi(o.y))?yn({x:c+pc(o.x,p),y:m+pc(o.y,f),textAnchor:"end",verticalAnchor:"end"},T):yn({x:c+p/2,y:m+f/2,textAnchor:"middle",verticalAnchor:"middle"},T)},Zee=function(r){return"cx"in r&&$t(r.cx)};function Yn(t){var r=t.offset,a=r===void 0?5:r,n=Uee(t,Iee),s=yn({offset:a},n),o=s.viewBox,l=s.position,c=s.value,m=s.children,p=s.content,f=s.className,g=f===void 0?"":f,b=s.textBreakAll;if(!o||qr(c)&&qr(m)&&!u.isValidElement(p)&&!Lr(p))return null;if(u.isValidElement(p))return u.cloneElement(p,s);var x;if(Lr(p)){if(x=u.createElement(p,s),u.isValidElement(x))return x}else x=Kee(s);var v=Zee(o),E=Xr(s,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return Xee(s,x,E);var y=v?Qee(s):Jee(s);return e.createElement(Bf,Uu({className:ta("recharts-label",g)},E,y,{breakAll:b}),x)}Yn.displayName="Label";var BR=function(r){var a=r.cx,n=r.cy,s=r.angle,o=r.startAngle,l=r.endAngle,c=r.r,m=r.radius,p=r.innerRadius,f=r.outerRadius,g=r.x,b=r.y,x=r.top,v=r.left,E=r.width,y=r.height,w=r.clockWise,k=r.labelViewBox;if(k)return k;if($t(E)&&$t(y)){if($t(g)&&$t(b))return{x:g,y:b,width:E,height:y};if($t(x)&&$t(v))return{x,y:v,width:E,height:y}}return $t(g)&&$t(b)?{x:g,y:b,width:0,height:0}:$t(a)&&$t(n)?{cx:a,cy:n,startAngle:o||s||0,endAngle:l||s||0,innerRadius:p||0,outerRadius:f||m||c||0,clockWise:w}:r.viewBox?r.viewBox:{}},ete=function(r,a){return r?r===!0?e.createElement(Yn,{key:"label-implicit",viewBox:a}):vn(r)?e.createElement(Yn,{key:"label-implicit",viewBox:a,value:r}):u.isValidElement(r)?r.type===Yn?u.cloneElement(r,{key:"label-implicit",viewBox:a}):e.createElement(Yn,{key:"label-implicit",content:r,viewBox:a}):Lr(r)?e.createElement(Yn,{key:"label-implicit",content:r,viewBox:a}):rm(r)?e.createElement(Yn,Uu({viewBox:a},r,{key:"label-implicit"})):null:null},tte=function(r,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&n&&!r.label)return null;var s=r.children,o=BR(r),l=ao(s,Yn).map(function(m,p){return u.cloneElement(m,{viewBox:a||o,key:"label-".concat(p)})});if(!n)return l;var c=ete(r.label,a||o);return[c].concat(Dee(l))};Yn.parseViewBox=BR;Yn.renderCallByParent=tte;var WE,fP;function rte(){if(fP)return WE;fP=1;function t(r){var a=r==null?0:r.length;return a?r[a-1]:void 0}return WE=t,WE}var ate=rte();const nte=Aa(ate);function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vu(t)}var ste=["valueAccessor"],ote=["data","dataKey","clockWise","id","textBreakAll"];function lte(t){return mte(t)||dte(t)||cte(t)||ite()}function ite(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cte(t,r){if(t){if(typeof t=="string")return l1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l1(t,r)}}function dte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mte(t){if(Array.isArray(t))return l1(t)}function l1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function ng(){return ng=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ng.apply(this,arguments)}function gP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function hP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?gP(Object(a),!0).forEach(function(n){ute(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ute(t,r,a){return r=pte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function pte(t){var r=fte(t,"string");return Vu(r)=="symbol"?r:r+""}function fte(t,r){if(Vu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function bP(t,r){if(t==null)return{};var a=gte(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function gte(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}var hte=function(r){return Array.isArray(r.value)?nte(r.value):r.value};function ui(t){var r=t.valueAccessor,a=r===void 0?hte:r,n=bP(t,ste),s=n.data,o=n.dataKey,l=n.clockWise,c=n.id,m=n.textBreakAll,p=bP(n,ote);return!s||!s.length?null:e.createElement(rn,{className:"recharts-label-list"},s.map(function(f,g){var b=qr(o)?a(f,g):Fs(f&&f.payload,o),x=qr(c)?{}:{id:"".concat(c,"-").concat(g)};return e.createElement(Yn,ng({},Xr(f,!0),p,x,{parentViewBox:f.parentViewBox,value:b,textBreakAll:m,viewBox:Yn.parseViewBox(qr(l)?f:hP(hP({},f),{},{clockWise:l})),key:"label-".concat(g),index:g}))}))}ui.displayName="LabelList";function bte(t,r){return t?t===!0?e.createElement(ui,{key:"labelList-implicit",data:r}):e.isValidElement(t)||Lr(t)?e.createElement(ui,{key:"labelList-implicit",data:r,content:t}):rm(t)?e.createElement(ui,ng({data:r},t,{key:"labelList-implicit"})):null:null}function xte(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var n=t.children,s=ao(n,ui).map(function(l,c){return u.cloneElement(l,{data:r,key:"labelList-".concat(c)})});if(!a)return s;var o=bte(t.label,r);return[o].concat(lte(s))}ui.renderCallByParent=xte;function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hu(t)}function i1(){return i1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i1.apply(this,arguments)}function xP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function yP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xP(Object(a),!0).forEach(function(n){yte(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function yte(t,r,a){return r=vte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function vte(t){var r=Ete(t,"string");return Hu(r)=="symbol"?r:r+""}function Ete(t,r){if(Hu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var wte=function(r,a){var n=No(a-r),s=Math.min(Math.abs(a-r),359.999);return n*s},$0=function(r){var a=r.cx,n=r.cy,s=r.radius,o=r.angle,l=r.sign,c=r.isExternal,m=r.cornerRadius,p=r.cornerIsExternal,f=m*(c?1:-1)+s,g=Math.asin(m/f)/ag,b=p?o:o+l*g,x=In(a,n,f,b),v=In(a,n,s,b),E=p?o-l*g:o,y=In(a,n,f*Math.cos(g*ag),E);return{center:x,circleTangency:v,lineTangency:y,theta:g}},qR=function(r){var a=r.cx,n=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.startAngle,c=r.endAngle,m=wte(l,c),p=l+m,f=In(a,n,o,l),g=In(a,n,o,p),b="M ".concat(f.x,",").concat(f.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(l>p),`,
    `).concat(g.x,",").concat(g.y,`
  `);if(s>0){var x=In(a,n,s,l),v=In(a,n,s,p);b+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(l<=p),`,
            `).concat(x.x,",").concat(x.y," Z")}else b+="L ".concat(a,",").concat(n," Z");return b},Nte=function(r){var a=r.cx,n=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,m=r.cornerIsExternal,p=r.startAngle,f=r.endAngle,g=No(f-p),b=$0({cx:a,cy:n,radius:o,angle:p,sign:g,cornerRadius:l,cornerIsExternal:m}),x=b.circleTangency,v=b.lineTangency,E=b.theta,y=$0({cx:a,cy:n,radius:o,angle:f,sign:-g,cornerRadius:l,cornerIsExternal:m}),w=y.circleTangency,k=y.lineTangency,C=y.theta,A=m?Math.abs(p-f):Math.abs(p-f)-E-C;if(A<0)return c?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):qR({cx:a,cy:n,innerRadius:s,outerRadius:o,startAngle:p,endAngle:f});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(g<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(A>180),",").concat(+(g<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(g<0),",").concat(k.x,",").concat(k.y,`
  `);if(s>0){var P=$0({cx:a,cy:n,radius:s,angle:p,sign:g,isExternal:!0,cornerRadius:l,cornerIsExternal:m}),T=P.circleTangency,O=P.lineTangency,R=P.theta,D=$0({cx:a,cy:n,radius:s,angle:f,sign:-g,isExternal:!0,cornerRadius:l,cornerIsExternal:m}),$=D.circleTangency,j=D.lineTangency,K=D.theta,H=m?Math.abs(p-f):Math.abs(p-f)-R-K;if(H<0&&l===0)return"".concat(S,"L").concat(a,",").concat(n,"Z");S+="L".concat(j.x,",").concat(j.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(g<0),",").concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(H>180),",").concat(+(g>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(g<0),",").concat(O.x,",").concat(O.y,"Z")}else S+="L".concat(a,",").concat(n,"Z");return S},kte={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UR=function(r){var a=yP(yP({},kte),r),n=a.cx,s=a.cy,o=a.innerRadius,l=a.outerRadius,c=a.cornerRadius,m=a.forceCornerRadius,p=a.cornerIsExternal,f=a.startAngle,g=a.endAngle,b=a.className;if(l<o||f===g)return null;var x=ta("recharts-sector",b),v=l-o,E=pc(c,v,0,!0),y;return E>0&&Math.abs(f-g)<360?y=Nte({cx:n,cy:s,innerRadius:o,outerRadius:l,cornerRadius:Math.min(E,v/2),forceCornerRadius:m,cornerIsExternal:p,startAngle:f,endAngle:g}):y=qR({cx:n,cy:s,innerRadius:o,outerRadius:l,startAngle:f,endAngle:g}),e.createElement("path",i1({},Xr(a,!0),{className:x,d:y,role:"img"}))};function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wu(t)}function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},c1.apply(this,arguments)}function vP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function EP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?vP(Object(a),!0).forEach(function(n){Ste(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Ste(t,r,a){return r=Cte(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Cte(t){var r=Ate(t,"string");return Wu(r)=="symbol"?r:r+""}function Ate(t,r){if(Wu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var wP={curveBasisClosed:GW,curveBasisOpen:KW,curveBasis:WW,curveBumpX:MW,curveBumpY:jW,curveLinearClosed:YW,curveLinear:Jg,curveMonotoneX:XW,curveMonotoneY:QW,curveNatural:JW,curveStep:ZW,curveStepAfter:tG,curveStepBefore:eG},L0=function(r){return r.x===+r.x&&r.y===+r.y},Vm=function(r){return r.x},Hm=function(r){return r.y},_te=function(r,a){if(Lr(r))return r;var n="curve".concat(Xg(r));return(n==="curveMonotone"||n==="curveBump")&&a?wP["".concat(n).concat(a==="vertical"?"Y":"X")]:wP[n]||Jg},Pte=function(r){var a=r.type,n=a===void 0?"linear":a,s=r.points,o=s===void 0?[]:s,l=r.baseLine,c=r.layout,m=r.connectNulls,p=m===void 0?!1:m,f=_te(n,c),g=p?o.filter(function(E){return L0(E)}):o,b;if(Array.isArray(l)){var x=p?l.filter(function(E){return L0(E)}):l,v=g.map(function(E,y){return EP(EP({},E),{},{base:x[y]})});return c==="vertical"?b=A0().y(Hm).x1(Vm).x0(function(E){return E.base.x}):b=A0().x(Vm).y1(Hm).y0(function(E){return E.base.y}),b.defined(L0).curve(f),b(v)}return c==="vertical"&&$t(l)?b=A0().y(Hm).x1(Vm).x0(l):$t(l)?b=A0().x(Vm).y1(Hm).y0(l):b=Yj().x(Vm).y(Hm),b.defined(L0).curve(f),b(g)},d1=function(r){var a=r.className,n=r.points,s=r.path,o=r.pathRef;if((!n||!n.length)&&!s)return null;var l=n&&n.length?Pte(r):s;return u.createElement("path",c1({},Xr(r,!1),Pf(r),{className:ta("recharts-curve",a),d:l,ref:o}))},GE={exports:{}},KE,NP;function Tte(){if(NP)return KE;NP=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return KE=t,KE}var YE,kP;function Ote(){if(kP)return YE;kP=1;var t=Tte();function r(){}function a(){}return a.resetWarningCache=r,YE=function(){function n(l,c,m,p,f,g){if(g!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:r};return o.PropTypes=o,o},YE}var SP;function Mte(){return SP||(SP=1,GE.exports=Ote()()),GE.exports}var jte=Mte();const ua=Aa(jte),{getOwnPropertyNames:Rte,getOwnPropertySymbols:$te}=Object,{hasOwnProperty:Lte}=Object.prototype;function XE(t,r){return function(n,s,o){return t(n,s,o)&&r(n,s,o)}}function I0(t){return function(a,n,s){if(!a||!n||typeof a!="object"||typeof n!="object")return t(a,n,s);const{cache:o}=s,l=o.get(a),c=o.get(n);if(l&&c)return l===n&&c===a;o.set(a,n),o.set(n,a);const m=t(a,n,s);return o.delete(a),o.delete(n),m}}function Ite(t){return t?.[Symbol.toStringTag]}function CP(t){return Rte(t).concat($te(t))}const Dte=Object.hasOwn||((t,r)=>Lte.call(t,r));function Sc(t,r){return t===r||!t&&!r&&t!==t&&r!==r}const Fte="__v",zte="__o",Bte="_owner",{getOwnPropertyDescriptor:AP,keys:_P}=Object;function qte(t,r){return t.byteLength===r.byteLength&&sg(new Uint8Array(t),new Uint8Array(r))}function Ute(t,r,a){let n=t.length;if(r.length!==n)return!1;for(;n-- >0;)if(!a.equals(t[n],r[n],n,n,t,r,a))return!1;return!0}function Vte(t,r){return t.byteLength===r.byteLength&&sg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}function Hte(t,r){return Sc(t.getTime(),r.getTime())}function Wte(t,r){return t.name===r.name&&t.message===r.message&&t.cause===r.cause&&t.stack===r.stack}function Gte(t,r){return t===r}function PP(t,r,a){const n=t.size;if(n!==r.size)return!1;if(!n)return!0;const s=new Array(n),o=t.entries();let l,c,m=0;for(;(l=o.next())&&!l.done;){const p=r.entries();let f=!1,g=0;for(;(c=p.next())&&!c.done;){if(s[g]){g++;continue}const b=l.value,x=c.value;if(a.equals(b[0],x[0],m,g,t,r,a)&&a.equals(b[1],x[1],b[0],x[0],t,r,a)){f=s[g]=!0;break}g++}if(!f)return!1;m++}return!0}const Kte=Sc;function Yte(t,r,a){const n=_P(t);let s=n.length;if(_P(r).length!==s)return!1;for(;s-- >0;)if(!VR(t,r,a,n[s]))return!1;return!0}function Wm(t,r,a){const n=CP(t);let s=n.length;if(CP(r).length!==s)return!1;let o,l,c;for(;s-- >0;)if(o=n[s],!VR(t,r,a,o)||(l=AP(t,o),c=AP(r,o),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function Xte(t,r){return Sc(t.valueOf(),r.valueOf())}function Qte(t,r){return t.source===r.source&&t.flags===r.flags}function TP(t,r,a){const n=t.size;if(n!==r.size)return!1;if(!n)return!0;const s=new Array(n),o=t.values();let l,c;for(;(l=o.next())&&!l.done;){const m=r.values();let p=!1,f=0;for(;(c=m.next())&&!c.done;){if(!s[f]&&a.equals(l.value,c.value,l.value,c.value,t,r,a)){p=s[f]=!0;break}f++}if(!p)return!1}return!0}function sg(t,r){let a=t.byteLength;if(r.byteLength!==a||t.byteOffset!==r.byteOffset)return!1;for(;a-- >0;)if(t[a]!==r[a])return!1;return!0}function Jte(t,r){return t.hostname===r.hostname&&t.pathname===r.pathname&&t.protocol===r.protocol&&t.port===r.port&&t.hash===r.hash&&t.username===r.username&&t.password===r.password}function VR(t,r,a,n){return(n===Bte||n===zte||n===Fte)&&(t.$$typeof||r.$$typeof)?!0:Dte(r,n)&&a.equals(t[n],r[n],n,n,t,r,a)}const Zte="[object ArrayBuffer]",ere="[object Arguments]",tre="[object Boolean]",rre="[object DataView]",are="[object Date]",nre="[object Error]",sre="[object Map]",ore="[object Number]",lre="[object Object]",ire="[object RegExp]",cre="[object Set]",dre="[object String]",mre={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ure="[object URL]",pre=Object.prototype.toString;function fre({areArrayBuffersEqual:t,areArraysEqual:r,areDataViewsEqual:a,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:c,areObjectsEqual:m,arePrimitiveWrappersEqual:p,areRegExpsEqual:f,areSetsEqual:g,areTypedArraysEqual:b,areUrlsEqual:x,unknownTagComparators:v}){return function(y,w,k){if(y===w)return!0;if(y==null||w==null)return!1;const C=typeof y;if(C!==typeof w)return!1;if(C!=="object")return C==="number"?c(y,w,k):C==="function"?o(y,w,k):!1;const A=y.constructor;if(A!==w.constructor)return!1;if(A===Object)return m(y,w,k);if(Array.isArray(y))return r(y,w,k);if(A===Date)return n(y,w,k);if(A===RegExp)return f(y,w,k);if(A===Map)return l(y,w,k);if(A===Set)return g(y,w,k);const S=pre.call(y);if(S===are)return n(y,w,k);if(S===ire)return f(y,w,k);if(S===sre)return l(y,w,k);if(S===cre)return g(y,w,k);if(S===lre)return typeof y.then!="function"&&typeof w.then!="function"&&m(y,w,k);if(S===ure)return x(y,w,k);if(S===nre)return s(y,w,k);if(S===ere)return m(y,w,k);if(mre[S])return b(y,w,k);if(S===Zte)return t(y,w,k);if(S===rre)return a(y,w,k);if(S===tre||S===ore||S===dre)return p(y,w,k);if(v){let P=v[S];if(!P){const T=Ite(y);T&&(P=v[T])}if(P)return P(y,w,k)}return!1}}function gre({circular:t,createCustomConfig:r,strict:a}){let n={areArrayBuffersEqual:qte,areArraysEqual:a?Wm:Ute,areDataViewsEqual:Vte,areDatesEqual:Hte,areErrorsEqual:Wte,areFunctionsEqual:Gte,areMapsEqual:a?XE(PP,Wm):PP,areNumbersEqual:Kte,areObjectsEqual:a?Wm:Yte,arePrimitiveWrappersEqual:Xte,areRegExpsEqual:Qte,areSetsEqual:a?XE(TP,Wm):TP,areTypedArraysEqual:a?XE(sg,Wm):sg,areUrlsEqual:Jte,unknownTagComparators:void 0};if(r&&(n=Object.assign({},n,r(n))),t){const s=I0(n.areArraysEqual),o=I0(n.areMapsEqual),l=I0(n.areObjectsEqual),c=I0(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return n}function hre(t){return function(r,a,n,s,o,l,c){return t(r,a,c)}}function bre({circular:t,comparator:r,createState:a,equals:n,strict:s}){if(a)return function(c,m){const{cache:p=t?new WeakMap:void 0,meta:f}=a();return r(c,m,{cache:p,equals:n,meta:f,strict:s})};if(t)return function(c,m){return r(c,m,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const o={cache:void 0,equals:n,meta:void 0,strict:s};return function(c,m){return r(c,m,o)}}const xre=wi();wi({strict:!0});wi({circular:!0});wi({circular:!0,strict:!0});wi({createInternalComparator:()=>Sc});wi({strict:!0,createInternalComparator:()=>Sc});wi({circular:!0,createInternalComparator:()=>Sc});wi({circular:!0,createInternalComparator:()=>Sc,strict:!0});function wi(t={}){const{circular:r=!1,createInternalComparator:a,createState:n,strict:s=!1}=t,o=gre(t),l=fre(o),c=a?a(l):hre(l);return bre({circular:r,comparator:l,createState:n,equals:c,strict:s})}function yre(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function OP(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,n=function s(o){a<0&&(a=o),o-a>r?(t(o),a=-1):yre(s)};requestAnimationFrame(n)}function m1(t){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m1(t)}function vre(t){return kre(t)||Nre(t)||wre(t)||Ere()}function Ere(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wre(t,r){if(t){if(typeof t=="string")return MP(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return MP(t,r)}}function MP(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function Nre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kre(t){if(Array.isArray(t))return t}function Sre(){var t={},r=function(){return null},a=!1,n=function s(o){if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,c=vre(l),m=c[0],p=c.slice(1);if(typeof m=="number"){OP(s.bind(null,p),m);return}s(m),OP(s.bind(null,p));return}m1(o)==="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:function(){a=!0},start:function(o){a=!1,n(o)},subscribe:function(o){return r=o,function(){r=function(){return null}}}}}function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gu(t)}function jP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function RP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?jP(Object(a),!0).forEach(function(n){HR(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function HR(t,r,a){return r=Cre(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Cre(t){var r=Are(t,"string");return Gu(r)==="symbol"?r:String(r)}function Are(t,r){if(Gu(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Gu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var _re=function(r,a){return[Object.keys(r),Object.keys(a)].reduce(function(n,s){return n.filter(function(o){return s.includes(o)})})},Pre=function(r){return r},Tre=function(r){return r.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},fu=function(r,a){return Object.keys(a).reduce(function(n,s){return RP(RP({},n),{},HR({},s,r(s,a[s])))},{})},$P=function(r,a,n){return r.map(function(s){return"".concat(Tre(s)," ").concat(a,"ms ").concat(n)}).join(",")};function Ore(t,r){return Rre(t)||jre(t,r)||WR(t,r)||Mre()}function Mre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jre(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function Rre(t){if(Array.isArray(t))return t}function $re(t){return Dre(t)||Ire(t)||WR(t)||Lre()}function Lre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(t,r){if(t){if(typeof t=="string")return u1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u1(t,r)}}function Ire(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dre(t){if(Array.isArray(t))return u1(t)}function u1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}var og=1e-4,GR=function(r,a){return[0,3*r,3*a-6*r,3*r-3*a+1]},KR=function(r,a){return r.map(function(n,s){return n*Math.pow(a,s)}).reduce(function(n,s){return n+s})},LP=function(r,a){return function(n){var s=GR(r,a);return KR(s,n)}},Fre=function(r,a){return function(n){var s=GR(r,a),o=[].concat($re(s.map(function(l,c){return l*c}).slice(1)),[0]);return KR(o,n)}},IP=function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=a[0],o=a[1],l=a[2],c=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,o=0,l=1,c=1;break;case"ease":s=.25,o=.1,l=.25,c=1;break;case"ease-in":s=.42,o=0,l=1,c=1;break;case"ease-out":s=.42,o=0,l=.58,c=1;break;case"ease-in-out":s=0,o=0,l=.58,c=1;break;default:{var m=a[0].split("(");if(m[0]==="cubic-bezier"&&m[1].split(")")[0].split(",").length===4){var p=m[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),f=Ore(p,4);s=f[0],o=f[1],l=f[2],c=f[3]}}}var g=LP(s,l),b=LP(o,c),x=Fre(s,l),v=function(w){return w>1?1:w<0?0:w},E=function(w){for(var k=w>1?1:w,C=k,A=0;A<8;++A){var S=g(C)-k,P=x(C);if(Math.abs(S-k)<og||P<og)return b(C);C=v(C-S/P)}return b(C)};return E.isStepper=!1,E},zre=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.stiff,n=a===void 0?100:a,s=r.damping,o=s===void 0?8:s,l=r.dt,c=l===void 0?17:l,m=function(f,g,b){var x=-(f-g)*n,v=b*o,E=b+(x-v)*c/1e3,y=b*c/1e3+f;return Math.abs(y-g)<og&&Math.abs(E)<og?[g,0]:[y,E]};return m.isStepper=!0,m.dt=c,m},Bre=function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return IP(s);case"spring":return zre();default:if(s.split("(")[0]==="cubic-bezier")return IP(s)}return typeof s=="function"?s:null};function Ku(t){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ku(t)}function DP(t){return Vre(t)||Ure(t)||YR(t)||qre()}function qre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ure(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vre(t){if(Array.isArray(t))return f1(t)}function FP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function $n(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?FP(Object(a),!0).forEach(function(n){p1(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):FP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function p1(t,r,a){return r=Hre(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Hre(t){var r=Wre(t,"string");return Ku(r)==="symbol"?r:String(r)}function Wre(t,r){if(Ku(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Ku(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Gre(t,r){return Xre(t)||Yre(t,r)||YR(t,r)||Kre()}function Kre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YR(t,r){if(t){if(typeof t=="string")return f1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f1(t,r)}}function f1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function Yre(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function Xre(t){if(Array.isArray(t))return t}var lg=function(r,a,n){return r+(a-r)*n},g1=function(r){var a=r.from,n=r.to;return a!==n},Qre=function t(r,a,n){var s=fu(function(o,l){if(g1(l)){var c=r(l.from,l.to,l.velocity),m=Gre(c,2),p=m[0],f=m[1];return $n($n({},l),{},{from:p,velocity:f})}return l},a);return n<1?fu(function(o,l){return g1(l)?$n($n({},l),{},{velocity:lg(l.velocity,s[o].velocity,n),from:lg(l.from,s[o].from,n)}):l},a):t(r,s,n-1)};const Jre=(function(t,r,a,n,s){var o=_re(t,r),l=o.reduce(function(y,w){return $n($n({},y),{},p1({},w,[t[w],r[w]]))},{}),c=o.reduce(function(y,w){return $n($n({},y),{},p1({},w,{from:t[w],velocity:0,to:r[w]}))},{}),m=-1,p,f,g=function(){return null},b=function(){return fu(function(w,k){return k.from},c)},x=function(){return!Object.values(c).filter(g1).length},v=function(w){p||(p=w);var k=w-p,C=k/a.dt;c=Qre(a,c,C),s($n($n($n({},t),r),b())),p=w,x()||(m=requestAnimationFrame(g))},E=function(w){f||(f=w);var k=(w-f)/n,C=fu(function(S,P){return lg.apply(void 0,DP(P).concat([a(k)]))},l);if(s($n($n($n({},t),r),C)),k<1)m=requestAnimationFrame(g);else{var A=fu(function(S,P){return lg.apply(void 0,DP(P).concat([a(1)]))},l);s($n($n($n({},t),r),A))}};return g=a.isStepper?v:E,function(){return requestAnimationFrame(g),function(){cancelAnimationFrame(m)}}});function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ld(t)}var Zre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function eae(t,r){if(t==null)return{};var a=tae(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function tae(t,r){if(t==null)return{};var a={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(r.indexOf(s)>=0)&&(a[s]=t[s]);return a}function QE(t){return sae(t)||nae(t)||aae(t)||rae()}function rae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aae(t,r){if(t){if(typeof t=="string")return h1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h1(t,r)}}function nae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sae(t){if(Array.isArray(t))return h1(t)}function h1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function zP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function go(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?zP(Object(a),!0).forEach(function(n){nu(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function nu(t,r,a){return r=XR(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function oae(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function lae(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XR(n.key),n)}}function iae(t,r,a){return r&&lae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function XR(t){var r=cae(t,"string");return Ld(r)==="symbol"?r:String(r)}function cae(t,r){if(Ld(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Ld(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function dae(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&b1(t,r)}function b1(t,r){return b1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},b1(t,r)}function mae(t){var r=uae();return function(){var n=ig(t),s;if(r){var o=ig(this).constructor;s=Reflect.construct(n,arguments,o)}else s=n.apply(this,arguments);return x1(this,s)}}function x1(t,r){if(r&&(Ld(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y1(t)}function y1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ig(t){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ig(t)}var Tl=(function(t){dae(a,t);var r=mae(a);function a(n,s){var o;oae(this,a),o=r.call(this,n,s);var l=o.props,c=l.isActive,m=l.attributeName,p=l.from,f=l.to,g=l.steps,b=l.children,x=l.duration;if(o.handleStyleChange=o.handleStyleChange.bind(y1(o)),o.changeStyle=o.changeStyle.bind(y1(o)),!c||x<=0)return o.state={style:{}},typeof b=="function"&&(o.state={style:f}),x1(o);if(g&&g.length)o.state={style:g[0].style};else if(p){if(typeof b=="function")return o.state={style:p},x1(o);o.state={style:m?nu({},m,p):p}}else o.state={style:{}};return o}return iae(a,[{key:"componentDidMount",value:function(){var s=this.props,o=s.isActive,l=s.canBegin;this.mounted=!0,!(!o||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var o=this.props,l=o.isActive,c=o.canBegin,m=o.attributeName,p=o.shouldReAnimate,f=o.to,g=o.from,b=this.state.style;if(c){if(!l){var x={style:m?nu({},m,f):f};this.state&&b&&(m&&b[m]!==f||!m&&b!==f)&&this.setState(x);return}if(!(xre(s.to,f)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var E=v||p?g:s.to;if(this.state&&b){var y={style:m?nu({},m,E):E};(m&&b[m]!==E||!m&&b!==E)&&this.setState(y)}this.runAnimation(go(go({},this.props),{},{from:E,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var o=this,l=s.from,c=s.to,m=s.duration,p=s.easing,f=s.begin,g=s.onAnimationEnd,b=s.onAnimationStart,x=Jre(l,c,Bre(p),m,this.changeStyle),v=function(){o.stopJSAnimation=x()};this.manager.start([b,f,v,m,g])}},{key:"runStepAnimation",value:function(s){var o=this,l=s.steps,c=s.begin,m=s.onAnimationStart,p=l[0],f=p.style,g=p.duration,b=g===void 0?0:g,x=function(E,y,w){if(w===0)return E;var k=y.duration,C=y.easing,A=C===void 0?"ease":C,S=y.style,P=y.properties,T=y.onAnimationEnd,O=w>0?l[w-1]:y,R=P||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(QE(E),[o.runJSAnimation.bind(o,{from:O.style,to:S,duration:k,easing:A}),k]);var D=$P(R,k,A),$=go(go(go({},O.style),S),{},{transition:D});return[].concat(QE(E),[$,k,T]).filter(Pre)};return this.manager.start([m].concat(QE(l.reduce(x,[f,Math.max(b,c)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Sre());var o=s.begin,l=s.duration,c=s.attributeName,m=s.to,p=s.easing,f=s.onAnimationStart,g=s.onAnimationEnd,b=s.steps,x=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof p=="function"||typeof x=="function"||p==="spring"){this.runJSAnimation(s);return}if(b.length>1){this.runStepAnimation(s);return}var E=c?nu({},c,m):m,y=$P(Object.keys(E),l,p);v.start([f,o,go(go({},E),{},{transition:y}),l,g])}},{key:"render",value:function(){var s=this.props,o=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var c=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var m=eae(s,Zre),p=u.Children.count(o),f=this.state.style;if(typeof o=="function")return o(f);if(!c||p===0||l<=0)return o;var g=function(x){var v=x.props,E=v.style,y=E===void 0?{}:E,w=v.className,k=u.cloneElement(x,go(go({},m),{},{style:go(go({},y),f),className:w}));return k};return p===1?g(u.Children.only(o)):e.createElement("div",null,u.Children.map(o,function(b){return g(b)}))}}]),a})(u.PureComponent);Tl.displayName="Animate";Tl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Tl.propTypes={from:ua.oneOfType([ua.object,ua.string]),to:ua.oneOfType([ua.object,ua.string]),attributeName:ua.string,duration:ua.number,begin:ua.number,easing:ua.oneOfType([ua.string,ua.func]),steps:ua.arrayOf(ua.shape({duration:ua.number.isRequired,style:ua.object.isRequired,easing:ua.oneOfType([ua.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ua.func]),properties:ua.arrayOf("string"),onAnimationEnd:ua.func})),children:ua.oneOfType([ua.node,ua.func]),isActive:ua.bool,canBegin:ua.bool,onAnimationEnd:ua.func,shouldReAnimate:ua.bool,onAnimationStart:ua.func,onAnimationReStart:ua.func};function Yu(t){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yu(t)}function cg(){return cg=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},cg.apply(this,arguments)}function pae(t,r){return bae(t)||hae(t,r)||gae(t,r)||fae()}function fae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gae(t,r){if(t){if(typeof t=="string")return BP(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return BP(t,r)}}function BP(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function hae(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function bae(t){if(Array.isArray(t))return t}function qP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function UP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?qP(Object(a),!0).forEach(function(n){xae(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function xae(t,r,a){return r=yae(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function yae(t){var r=vae(t,"string");return Yu(r)=="symbol"?r:r+""}function vae(t,r){if(Yu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var VP=function(r,a,n,s,o){var l=Math.min(Math.abs(n)/2,Math.abs(s)/2),c=s>=0?1:-1,m=n>=0?1:-1,p=s>=0&&n>=0||s<0&&n<0?1:0,f;if(l>0&&o instanceof Array){for(var g=[0,0,0,0],b=0,x=4;b<x;b++)g[b]=o[b]>l?l:o[b];f="M".concat(r,",").concat(a+c*g[0]),g[0]>0&&(f+="A ".concat(g[0],",").concat(g[0],",0,0,").concat(p,",").concat(r+m*g[0],",").concat(a)),f+="L ".concat(r+n-m*g[1],",").concat(a),g[1]>0&&(f+="A ".concat(g[1],",").concat(g[1],",0,0,").concat(p,`,
        `).concat(r+n,",").concat(a+c*g[1])),f+="L ".concat(r+n,",").concat(a+s-c*g[2]),g[2]>0&&(f+="A ".concat(g[2],",").concat(g[2],",0,0,").concat(p,`,
        `).concat(r+n-m*g[2],",").concat(a+s)),f+="L ".concat(r+m*g[3],",").concat(a+s),g[3]>0&&(f+="A ".concat(g[3],",").concat(g[3],",0,0,").concat(p,`,
        `).concat(r,",").concat(a+s-c*g[3])),f+="Z"}else if(l>0&&o===+o&&o>0){var v=Math.min(l,o);f="M ".concat(r,",").concat(a+c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(r+m*v,",").concat(a,`
            L `).concat(r+n-m*v,",").concat(a,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(r+n,",").concat(a+c*v,`
            L `).concat(r+n,",").concat(a+s-c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(r+n-m*v,",").concat(a+s,`
            L `).concat(r+m*v,",").concat(a+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(r,",").concat(a+s-c*v," Z")}else f="M ".concat(r,",").concat(a," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Eae=function(r,a){if(!r||!a)return!1;var n=r.x,s=r.y,o=a.x,l=a.y,c=a.width,m=a.height;if(Math.abs(c)>0&&Math.abs(m)>0){var p=Math.min(o,o+c),f=Math.max(o,o+c),g=Math.min(l,l+m),b=Math.max(l,l+m);return n>=p&&n<=f&&s>=g&&s<=b}return!1},wae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yk=function(r){var a=UP(UP({},wae),r),n=u.useRef(),s=u.useState(-1),o=pae(s,2),l=o[0],c=o[1];u.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&c(A)}catch{}},[]);var m=a.x,p=a.y,f=a.width,g=a.height,b=a.radius,x=a.className,v=a.animationEasing,E=a.animationDuration,y=a.animationBegin,w=a.isAnimationActive,k=a.isUpdateAnimationActive;if(m!==+m||p!==+p||f!==+f||g!==+g||f===0||g===0)return null;var C=ta("recharts-rectangle",x);return k?e.createElement(Tl,{canBegin:l>0,from:{width:f,height:g,x:m,y:p},to:{width:f,height:g,x:m,y:p},duration:E,animationEasing:v,isActive:k},function(A){var S=A.width,P=A.height,T=A.x,O=A.y;return e.createElement(Tl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:E,isActive:w,easing:v},e.createElement("path",cg({},Xr(a,!0),{className:C,d:VP(T,O,S,P,b),ref:n})))}):e.createElement("path",cg({},Xr(a,!0),{className:C,d:VP(m,p,f,g,b)}))};function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},v1.apply(this,arguments)}var vk=function(r){var a=r.cx,n=r.cy,s=r.r,o=r.className,l=ta("recharts-dot",o);return a===+a&&n===+n&&s===+s?u.createElement("circle",v1({},Xr(r,!1),Pf(r),{className:l,cx:a,cy:n,r:s})):null};function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xu(t)}var Nae=["x","y","top","left","width","height","className"];function E1(){return E1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},E1.apply(this,arguments)}function HP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function kae(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?HP(Object(a),!0).forEach(function(n){Sae(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):HP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Sae(t,r,a){return r=Cae(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Cae(t){var r=Aae(t,"string");return Xu(r)=="symbol"?r:r+""}function Aae(t,r){if(Xu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function _ae(t,r){if(t==null)return{};var a=Pae(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Pae(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}var Tae=function(r,a,n,s,o,l){return"M".concat(r,",").concat(o,"v").concat(s,"M").concat(l,",").concat(a,"h").concat(n)},Oae=function(r){var a=r.x,n=a===void 0?0:a,s=r.y,o=s===void 0?0:s,l=r.top,c=l===void 0?0:l,m=r.left,p=m===void 0?0:m,f=r.width,g=f===void 0?0:f,b=r.height,x=b===void 0?0:b,v=r.className,E=_ae(r,Nae),y=kae({x:n,y:o,top:c,left:p,width:g,height:x},E);return!$t(n)||!$t(o)||!$t(g)||!$t(x)||!$t(c)||!$t(p)?null:e.createElement("path",E1({},Xr(y,!0),{className:ta("recharts-cross",v),d:Tae(n,o,g,x,c,p)}))},JE,WP;function Mae(){if(WP)return JE;WP=1;var t=x7(),r=t(Object.getPrototypeOf,Object);return JE=r,JE}var ZE,GP;function jae(){if(GP)return ZE;GP=1;var t=Ll(),r=Mae(),a=Il(),n="[object Object]",s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,m=l.call(Object);function p(f){if(!a(f)||t(f)!=n)return!1;var g=r(f);if(g===null)return!0;var b=c.call(g,"constructor")&&g.constructor;return typeof b=="function"&&b instanceof b&&l.call(b)==m}return ZE=p,ZE}var Rae=jae();const $ae=Aa(Rae);var ew,KP;function Lae(){if(KP)return ew;KP=1;var t=Ll(),r=Il(),a="[object Boolean]";function n(s){return s===!0||s===!1||r(s)&&t(s)==a}return ew=n,ew}var Iae=Lae();const Dae=Aa(Iae);function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qu(t)}function dg(){return dg=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},dg.apply(this,arguments)}function Fae(t,r){return Uae(t)||qae(t,r)||Bae(t,r)||zae()}function zae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bae(t,r){if(t){if(typeof t=="string")return YP(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return YP(t,r)}}function YP(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function qae(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function Uae(t){if(Array.isArray(t))return t}function XP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function QP(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?XP(Object(a),!0).forEach(function(n){Vae(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):XP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Vae(t,r,a){return r=Hae(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Hae(t){var r=Wae(t,"string");return Qu(r)=="symbol"?r:r+""}function Wae(t,r){if(Qu(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var JP=function(r,a,n,s,o){var l=n-s,c;return c="M ".concat(r,",").concat(a),c+="L ".concat(r+n,",").concat(a),c+="L ".concat(r+n-l/2,",").concat(a+o),c+="L ".concat(r+n-l/2-s,",").concat(a+o),c+="L ".concat(r,",").concat(a," Z"),c},Gae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kae=function(r){var a=QP(QP({},Gae),r),n=u.useRef(),s=u.useState(-1),o=Fae(s,2),l=o[0],c=o[1];u.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var m=a.x,p=a.y,f=a.upperWidth,g=a.lowerWidth,b=a.height,x=a.className,v=a.animationEasing,E=a.animationDuration,y=a.animationBegin,w=a.isUpdateAnimationActive;if(m!==+m||p!==+p||f!==+f||g!==+g||b!==+b||f===0&&g===0||b===0)return null;var k=ta("recharts-trapezoid",x);return w?e.createElement(Tl,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:b,x:m,y:p},to:{upperWidth:f,lowerWidth:g,height:b,x:m,y:p},duration:E,animationEasing:v,isActive:w},function(C){var A=C.upperWidth,S=C.lowerWidth,P=C.height,T=C.x,O=C.y;return e.createElement(Tl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:E,easing:v},e.createElement("path",dg({},Xr(a,!0),{className:k,d:JP(T,O,A,S,P),ref:n})))}):e.createElement("g",null,e.createElement("path",dg({},Xr(a,!0),{className:k,d:JP(m,p,f,g,b)})))},Yae=["option","shapeType","propTransformer","activeClassName","isActive"];function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ju(t)}function Xae(t,r){if(t==null)return{};var a=Qae(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Qae(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function ZP(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function mg(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ZP(Object(a),!0).forEach(function(n){Jae(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ZP(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Jae(t,r,a){return r=Zae(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Zae(t){var r=ene(t,"string");return Ju(r)=="symbol"?r:r+""}function ene(t,r){if(Ju(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function tne(t,r){return mg(mg({},r),t)}function rne(t,r){return t==="symbols"}function eT(t){var r=t.shapeType,a=t.elementProps;switch(r){case"rectangle":return e.createElement(yk,a);case"trapezoid":return e.createElement(Kae,a);case"sector":return e.createElement(UR,a);case"symbols":if(rne(r))return e.createElement(D2,a);break;default:return null}}function ane(t){return u.isValidElement(t)?t.props:t}function nne(t){var r=t.option,a=t.shapeType,n=t.propTransformer,s=n===void 0?tne:n,o=t.activeClassName,l=o===void 0?"recharts-active-shape":o,c=t.isActive,m=Xae(t,Yae),p;if(u.isValidElement(r))p=u.cloneElement(r,mg(mg({},m),ane(r)));else if(Lr(r))p=r(m);else if($ae(r)&&!Dae(r)){var f=s(r,m);p=e.createElement(eT,{shapeType:a,elementProps:f})}else{var g=m;p=e.createElement(eT,{shapeType:a,elementProps:g})}return c?e.createElement(rn,{className:l},p):p}function fh(t,r){return r!=null&&"trapezoids"in t.props}function gh(t,r){return r!=null&&"sectors"in t.props}function Zu(t,r){return r!=null&&"points"in t.props}function sne(t,r){var a,n,s=t.x===(r==null||(a=r.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===r.x,o=t.y===(r==null||(n=r.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===r.y;return s&&o}function one(t,r){var a=t.endAngle===r.endAngle,n=t.startAngle===r.startAngle;return a&&n}function lne(t,r){var a=t.x===r.x,n=t.y===r.y,s=t.z===r.z;return a&&n&&s}function ine(t,r){var a;return fh(t,r)?a=sne:gh(t,r)?a=one:Zu(t,r)&&(a=lne),a}function cne(t,r){var a;return fh(t,r)?a="trapezoids":gh(t,r)?a="sectors":Zu(t,r)&&(a="points"),a}function dne(t,r){if(fh(t,r)){var a;return(a=r.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(gh(t,r)){var n;return(n=r.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Zu(t,r)?r.payload:{}}function mne(t){var r=t.activeTooltipItem,a=t.graphicalItem,n=t.itemData,s=cne(a,r),o=dne(a,r),l=n.filter(function(m,p){var f=mh(o,m),g=a.props[s].filter(function(v){var E=ine(a,r);return E(v,r)}),b=a.props[s].indexOf(g[g.length-1]),x=p===b;return f&&x}),c=n.indexOf(l[l.length-1]);return c}var tw,tT;function une(){if(tT)return tw;tT=1;var t=Math.ceil,r=Math.max;function a(n,s,o,l){for(var c=-1,m=r(t((s-n)/(o||1)),0),p=Array(m);m--;)p[l?m:++c]=n,n+=o;return p}return tw=a,tw}var rw,rT;function QR(){if(rT)return rw;rT=1;var t=R7(),r=1/0,a=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=t(s),s===r||s===-r){var o=s<0?-1:1;return o*a}return s===s?s:0}return rw=n,rw}var aw,aT;function pne(){if(aT)return aw;aT=1;var t=une(),r=rh(),a=QR();function n(s){return function(o,l,c){return c&&typeof c!="number"&&r(o,l,c)&&(l=c=void 0),o=a(o),l===void 0?(l=o,o=0):l=a(l),c=c===void 0?o<l?1:-1:a(c),t(o,l,c,s)}}return aw=n,aw}var nw,nT;function fne(){if(nT)return nw;nT=1;var t=pne(),r=t();return nw=r,nw}var gne=fne();const ug=Aa(gne);function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ep(t)}function sT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function oT(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?sT(Object(a),!0).forEach(function(n){JR(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):sT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function JR(t,r,a){return r=hne(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function hne(t){var r=bne(t,"string");return ep(r)=="symbol"?r:r+""}function bne(t,r){if(ep(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var xne=["Webkit","Moz","O","ms"],yne=function(r,a){var n=r.replace(/(\w)/,function(o){return o.toUpperCase()}),s=xne.reduce(function(o,l){return oT(oT({},o),{},JR({},l+n,a))},{});return s[r]=a,s};function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Id(t)}function pg(){return pg=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},pg.apply(this,arguments)}function lT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function sw(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?lT(Object(a),!0).forEach(function(n){Rs(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function vne(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function iT(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e$(n.key),n)}}function Ene(t,r,a){return r&&iT(t.prototype,r),a&&iT(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function wne(t,r,a){return r=fg(r),Nne(t,ZR()?Reflect.construct(r,a||[],fg(t).constructor):r.apply(t,a))}function Nne(t,r){if(r&&(Id(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kne(t)}function kne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZR=function(){return!!t})()}function fg(t){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},fg(t)}function Sne(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&w1(t,r)}function w1(t,r){return w1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},w1(t,r)}function Rs(t,r,a){return r=e$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function e$(t){var r=Cne(t,"string");return Id(r)=="symbol"?r:r+""}function Cne(t,r){if(Id(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ane=function(r){var a=r.data,n=r.startIndex,s=r.endIndex,o=r.x,l=r.width,c=r.travellerWidth;if(!a||!a.length)return{};var m=a.length,p=uu().domain(ug(0,m)).range([o,o+l-c]),f=p.domain().map(function(g){return p(g)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:p(n),endX:p(s),scale:p,scaleValues:f}},cT=function(r){return r.changedTouches&&!!r.changedTouches.length},Dd=(function(t){function r(a){var n;return vne(this,r),n=wne(this,r,[a]),Rs(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Rs(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Rs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,o=s.endIndex,l=s.onDragEnd,c=s.startIndex;l?.({endIndex:o,startIndex:c})}),n.detachDragEndListener()}),Rs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Rs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Rs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Rs(n,"handleSlideDragStart",function(s){var o=cT(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Sne(r,t),Ene(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,o=n.endX,l=this.state.scaleValues,c=this.props,m=c.gap,p=c.data,f=p.length-1,g=Math.min(s,o),b=Math.max(s,o),x=r.getIndexInRange(l,g),v=r.getIndexInRange(l,b);return{startIndex:x-x%m,endIndex:v===f?f:v-v%m}}},{key:"getTextOfTick",value:function(n){var s=this.props,o=s.data,l=s.tickFormatter,c=s.dataKey,m=Fs(o[n],c,n);return Lr(l)?l(m,n):m}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,o=s.slideMoveStartX,l=s.startX,c=s.endX,m=this.props,p=m.x,f=m.width,g=m.travellerWidth,b=m.startIndex,x=m.endIndex,v=m.onChange,E=n.pageX-o;E>0?E=Math.min(E,p+f-g-c,p+f-g-l):E<0&&(E=Math.max(E,p-l,p-c));var y=this.getIndex({startX:l+E,endX:c+E});(y.startIndex!==b||y.endIndex!==x)&&v&&v(y),this.setState({startX:l+E,endX:c+E,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var o=cT(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,o=s.brushMoveStartX,l=s.movingTravellerId,c=s.endX,m=s.startX,p=this.state[l],f=this.props,g=f.x,b=f.width,x=f.travellerWidth,v=f.onChange,E=f.gap,y=f.data,w={startX:this.state.startX,endX:this.state.endX},k=n.pageX-o;k>0?k=Math.min(k,g+b-x-p):k<0&&(k=Math.max(k,g-p)),w[l]=p+k;var C=this.getIndex(w),A=C.startIndex,S=C.endIndex,P=function(){var O=y.length-1;return l==="startX"&&(c>m?A%E===0:S%E===0)||c<m&&S===O||l==="endX"&&(c>m?S%E===0:A%E===0)||c>m&&S===O};this.setState(Rs(Rs({},l,p+k),"brushMoveStartX",n.pageX),function(){v&&P()&&v(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var o=this,l=this.state,c=l.scaleValues,m=l.startX,p=l.endX,f=this.state[s],g=c.indexOf(f);if(g!==-1){var b=g+n;if(!(b===-1||b>=c.length)){var x=c[b];s==="startX"&&x>=p||s==="endX"&&x<=m||this.setState(Rs({},s,x),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,c=n.height,m=n.fill,p=n.stroke;return e.createElement("rect",{stroke:p,fill:m,x:s,y:o,width:l,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,c=n.height,m=n.data,p=n.children,f=n.padding,g=u.Children.only(p);return g?e.cloneElement(g,{x:s,y:o,width:l,height:c,margin:f,compact:!0,data:m}):null}},{key:"renderTravellerLayer",value:function(n,s){var o,l,c=this,m=this.props,p=m.y,f=m.travellerWidth,g=m.height,b=m.traveller,x=m.ariaLabel,v=m.data,E=m.startIndex,y=m.endIndex,w=Math.max(n,this.props.x),k=sw(sw({},Xr(this.props,!1)),{},{x:w,y:p,width:f,height:g}),C=x||"Min value: ".concat((o=v[E])===null||o===void 0?void 0:o.name,", Max value: ").concat((l=v[y])===null||l===void 0?void 0:l.name);return e.createElement(rn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),c.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(b,k))}},{key:"renderSlide",value:function(n,s){var o=this.props,l=o.y,c=o.height,m=o.stroke,p=o.travellerWidth,f=Math.min(n,s)+p,g=Math.max(Math.abs(s-n)-p,0);return e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:m,fillOpacity:.2,x:f,y:l,width:g,height:c})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,o=n.endIndex,l=n.y,c=n.height,m=n.travellerWidth,p=n.stroke,f=this.state,g=f.startX,b=f.endX,x=5,v={pointerEvents:"none",fill:p};return e.createElement(rn,{className:"recharts-brush-texts"},e.createElement(Bf,pg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(g,b)-x,y:l+c/2},v),this.getTextOfTick(s)),e.createElement(Bf,pg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(g,b)+m+x,y:l+c/2},v),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,s=n.data,o=n.className,l=n.children,c=n.x,m=n.y,p=n.width,f=n.height,g=n.alwaysShowText,b=this.state,x=b.startX,v=b.endX,E=b.isTextActive,y=b.isSlideMoving,w=b.isTravellerMoving,k=b.isTravellerFocused;if(!s||!s.length||!$t(c)||!$t(m)||!$t(p)||!$t(f)||p<=0||f<=0)return null;var C=ta("recharts-brush",o),A=e.Children.count(l)===1,S=yne("userSelect","none");return e.createElement(rn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(E||y||w||k||g)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,o=n.y,l=n.width,c=n.height,m=n.stroke,p=Math.floor(o+c/2)-1;return e.createElement(e.Fragment,null,e.createElement("rect",{x:s,y:o,width:l,height:c,fill:m,stroke:"none"}),e.createElement("line",{x1:s+1,y1:p,x2:s+l-1,y2:p,fill:"none",stroke:"#fff"}),e.createElement("line",{x1:s+1,y1:p+2,x2:s+l-1,y2:p+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var o;return e.isValidElement(n)?o=e.cloneElement(n,s):Lr(n)?o=n(s):o=r.renderDefaultTraveller(s),o}},{key:"getDerivedStateFromProps",value:function(n,s){var o=n.data,l=n.width,c=n.x,m=n.travellerWidth,p=n.updateId,f=n.startIndex,g=n.endIndex;if(o!==s.prevData||p!==s.prevUpdateId)return sw({prevData:o,prevTravellerWidth:m,prevUpdateId:p,prevX:c,prevWidth:l},o&&o.length?Ane({data:o,width:l,x:c,travellerWidth:m,startIndex:f,endIndex:g}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||c!==s.prevX||m!==s.prevTravellerWidth)){s.scale.range([c,c+l-m]);var b=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:o,prevTravellerWidth:m,prevUpdateId:p,prevX:c,prevWidth:l,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:b}}return null}},{key:"getIndexInRange",value:function(n,s){for(var o=n.length,l=0,c=o-1;c-l>1;){var m=Math.floor((l+c)/2);n[m]>s?c=m:l=m}return s>=n[c]?c:l}}])})(u.PureComponent);Rs(Dd,"displayName","Brush");Rs(Dd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ow,dT;function _ne(){if(dT)return ow;dT=1;var t=H2();function r(a,n){var s;return t(a,function(o,l,c){return s=n(o,l,c),!s}),!!s}return ow=r,ow}var lw,mT;function Pne(){if(mT)return lw;mT=1;var t=m7(),r=yi(),a=_ne(),n=As(),s=rh();function o(l,c,m){var p=n(l)?t:a;return m&&s(l,c,m)&&(c=void 0),p(l,r(c,3))}return lw=o,lw}var Tne=Pne();const One=Aa(Tne);var Uo=function(r,a){var n=r.alwaysShow,s=r.ifOverflow;return n&&(s="extendDomain"),s===a},iw,uT;function Mne(){if(uT)return iw;uT=1;var t=P7();function r(a,n,s){n=="__proto__"&&t?t(a,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):a[n]=s}return iw=r,iw}var cw,pT;function jne(){if(pT)return cw;pT=1;var t=Mne(),r=A7(),a=yi();function n(s,o){var l={};return o=a(o,3),r(s,function(c,m,p){t(l,m,o(c,m,p))}),l}return cw=n,cw}var Rne=jne();const $ne=Aa(Rne);var dw,fT;function Lne(){if(fT)return dw;fT=1;function t(r,a){for(var n=-1,s=r==null?0:r.length;++n<s;)if(!a(r[n],n,r))return!1;return!0}return dw=t,dw}var mw,gT;function Ine(){if(gT)return mw;gT=1;var t=H2();function r(a,n){var s=!0;return t(a,function(o,l,c){return s=!!n(o,l,c),s}),s}return mw=r,mw}var uw,hT;function Dne(){if(hT)return uw;hT=1;var t=Lne(),r=Ine(),a=yi(),n=As(),s=rh();function o(l,c,m){var p=n(l)?t:r;return m&&s(l,c,m)&&(c=void 0),p(l,a(c,3))}return uw=o,uw}var Fne=Dne();const t$=Aa(Fne);var zne=["x","y"];function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tp(t)}function N1(){return N1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},N1.apply(this,arguments)}function bT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function Gm(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?bT(Object(a),!0).forEach(function(n){Bne(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Bne(t,r,a){return r=qne(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function qne(t){var r=Une(t,"string");return tp(r)=="symbol"?r:r+""}function Une(t,r){if(tp(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Vne(t,r){if(t==null)return{};var a=Hne(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hne(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function Wne(t,r){var a=t.x,n=t.y,s=Vne(t,zne),o="".concat(a),l=parseInt(o,10),c="".concat(n),m=parseInt(c,10),p="".concat(r.height||s.height),f=parseInt(p,10),g="".concat(r.width||s.width),b=parseInt(g,10);return Gm(Gm(Gm(Gm(Gm({},r),s),l?{x:l}:{}),m?{y:m}:{}),{},{height:f,width:b,name:r.name,radius:r.radius})}function xT(t){return e.createElement(nne,N1({shapeType:"rectangle",propTransformer:Wne,activeClassName:"recharts-active-bar"},t))}var Gne=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof r=="number")return r;var o=$t(n)||ZH(n);return o?r(n,s):(o||gc(),a)}},Kne=["value","background"],r$;function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fd(t)}function Yne(t,r){if(t==null)return{};var a=Xne(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Xne(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function gg(){return gg=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},gg.apply(this,arguments)}function yT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function ln(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?yT(Object(a),!0).forEach(function(n){ci(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Qne(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function vT(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n$(n.key),n)}}function Jne(t,r,a){return r&&vT(t.prototype,r),a&&vT(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zne(t,r,a){return r=hg(r),ese(t,a$()?Reflect.construct(r,a||[],hg(t).constructor):r.apply(t,a))}function ese(t,r){if(r&&(Fd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tse(t)}function tse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a$=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},hg(t)}function rse(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&k1(t,r)}function k1(t,r){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},k1(t,r)}function ci(t,r,a){return r=n$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function n$(t){var r=ase(t,"string");return Fd(r)=="symbol"?r:r+""}function ase(t,r){if(Fd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ol=(function(t){function r(){var a;Qne(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Zne(this,r,[].concat(s)),ci(a,"state",{isAnimationFinished:!1}),ci(a,"id",xp("recharts-bar-")),ci(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),l&&l()}),ci(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),l&&l()}),a}return rse(r,t),Jne(r,[{key:"renderRectanglesStatically",value:function(n){var s=this,o=this.props,l=o.shape,c=o.dataKey,m=o.activeIndex,p=o.activeBar,f=Xr(this.props,!1);return n&&n.map(function(g,b){var x=b===m,v=x?p:l,E=ln(ln(ln({},f),g),{},{isActive:x,option:v,index:b,dataKey:c,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return e.createElement(rn,gg({className:"recharts-bar-rectangle"},Tf(s.props,g,b),{key:"rectangle-".concat(g?.x,"-").concat(g?.y,"-").concat(g?.value,"-").concat(b)}),e.createElement(xT,E))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,o=s.data,l=s.layout,c=s.isAnimationActive,m=s.animationBegin,p=s.animationDuration,f=s.animationEasing,g=s.animationId,b=this.state.prevData;return e.createElement(Tl,{begin:m,duration:p,isActive:c,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,E=o.map(function(y,w){var k=b&&b[w];if(k){var C=vo(k.x,y.x),A=vo(k.y,y.y),S=vo(k.width,y.width),P=vo(k.height,y.height);return ln(ln({},y),{},{x:C(v),y:A(v),width:S(v),height:P(v)})}if(l==="horizontal"){var T=vo(0,y.height),O=T(v);return ln(ln({},y),{},{y:y.y+y.height-O,height:O})}var R=vo(0,y.width),D=R(v);return ln(ln({},y),{},{width:D})});return e.createElement(rn,null,n.renderRectanglesStatically(E))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,o=n.isAnimationActive,l=this.state.prevData;return o&&s&&s.length&&(!l||!mh(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,o=s.data,l=s.dataKey,c=s.activeIndex,m=Xr(this.props.background,!1);return o.map(function(p,f){p.value;var g=p.background,b=Yne(p,Kne);if(!g)return null;var x=ln(ln(ln(ln(ln({},b),{},{fill:"#eee"},g),m),Tf(n.props,p,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:l,index:f,className:"recharts-bar-background-rectangle"});return e.createElement(xT,gg({key:"background-bar-".concat(f),option:n.props.background,isActive:f===c},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.data,c=o.xAxis,m=o.yAxis,p=o.layout,f=o.children,g=ao(f,kp);if(!g)return null;var b=p==="vertical"?l[0].height/2:l[0].width/2,x=function(y,w){var k=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:k,errorVal:Fs(y,w)}},v={clipPath:n?"url(#clipPath-".concat(s,")"):null};return e.createElement(rn,v,g.map(function(E){return e.cloneElement(E,{key:"error-bar-".concat(s,"-").concat(E.props.dataKey),data:l,xAxis:c,yAxis:m,layout:p,offset:b,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,o=n.data,l=n.className,c=n.xAxis,m=n.yAxis,p=n.left,f=n.top,g=n.width,b=n.height,x=n.isAnimationActive,v=n.background,E=n.id;if(s||!o||!o.length)return null;var y=this.state.isAnimationFinished,w=ta("recharts-bar",l),k=c&&c.allowDataOverflow,C=m&&m.allowDataOverflow,A=k||C,S=qr(E)?this.id:E;return e.createElement(rn,{className:w},k||C?e.createElement("defs",null,e.createElement("clipPath",{id:"clipPath-".concat(S)},e.createElement("rect",{x:k?p:p-g/2,y:C?f:f-b/2,width:k?g:g*2,height:C?b:b*2}))):null,e.createElement(rn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!x||y)&&ui.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(u.PureComponent);r$=Ol;ci(Ol,"displayName","Bar");ci(Ol,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ci(Ol,"getComposedData",function(t){var r=t.props,a=t.item,n=t.barPosition,s=t.bandSize,o=t.xAxis,l=t.yAxis,c=t.xAxisTicks,m=t.yAxisTicks,p=t.stackedData,f=t.dataStartIndex,g=t.displayedData,b=t.offset,x=xee(n,a);if(!x)return null;var v=r.layout,E=a.type.defaultProps,y=E!==void 0?ln(ln({},E),a.props):a.props,w=y.dataKey,k=y.children,C=y.minPointSize,A=v==="horizontal"?l:o,S=p?A.scale.domain():null,P=Cee({numericAxis:A}),T=ao(k,Pu),O=g.map(function(R,D){var $,j,K,H,V,q;p?$=yee(p[f+D],S):($=Fs(R,w),Array.isArray($)||($=[P,$]));var Y=Gne(C,r$.defaultProps.minPointSize)($[1],D);if(v==="horizontal"){var z,L=[l.scale($[0]),l.scale($[1])],Q=L[0],B=L[1];j=oP({axis:o,ticks:c,bandSize:s,offset:x.offset,entry:R,index:D}),K=(z=B??Q)!==null&&z!==void 0?z:void 0,H=x.size;var ae=Q-B;if(V=Number.isNaN(ae)?0:ae,q={x:j,y:l.y,width:H,height:l.height},Math.abs(Y)>0&&Math.abs(V)<Math.abs(Y)){var te=No(V||Y)*(Math.abs(Y)-Math.abs(V));K-=te,V+=te}}else{var ge=[o.scale($[0]),o.scale($[1])],ue=ge[0],Ee=ge[1];if(j=ue,K=oP({axis:l,ticks:m,bandSize:s,offset:x.offset,entry:R,index:D}),H=Ee-ue,V=x.size,q={x:o.x,y:K,width:o.width,height:V},Math.abs(Y)>0&&Math.abs(H)<Math.abs(Y)){var fe=No(H||Y)*(Math.abs(Y)-Math.abs(H));H+=fe}}return ln(ln(ln({},R),{},{x:j,y:K,width:H,height:V,value:p?$:$[1],payload:R,background:q},T&&T[D]&&T[D].props),{},{tooltipPayload:[zR(a,R)],tooltipPosition:{x:j+H/2,y:K+V/2}})});return ln({data:O,layout:v},b)});function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rp(t)}function nse(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ET(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s$(n.key),n)}}function sse(t,r,a){return r&&ET(t.prototype,r),a&&ET(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function wT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function bo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?wT(Object(a),!0).forEach(function(n){hh(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function hh(t,r,a){return r=s$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function s$(t){var r=ose(t,"string");return rp(r)=="symbol"?r:r+""}function ose(t,r){if(rp(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var o$=function(r,a,n,s,o){var l=r.width,c=r.height,m=r.layout,p=r.children,f=Object.keys(a),g={left:n.left,leftMirror:n.left,right:l-n.right,rightMirror:l-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},b=!!$s(p,Ol);return f.reduce(function(x,v){var E=a[v],y=E.orientation,w=E.domain,k=E.padding,C=k===void 0?{}:k,A=E.mirror,S=E.reversed,P="".concat(y).concat(A?"Mirror":""),T,O,R,D,$;if(E.type==="number"&&(E.padding==="gap"||E.padding==="no-gap")){var j=w[1]-w[0],K=1/0,H=E.categoricalDomain.sort(rW);if(H.forEach(function(ge,ue){ue>0&&(K=Math.min((ge||0)-(H[ue-1]||0),K))}),Number.isFinite(K)){var V=K/j,q=E.layout==="vertical"?n.height:n.width;if(E.padding==="gap"&&(T=V*q/2),E.padding==="no-gap"){var Y=pc(r.barCategoryGap,V*q),z=V*q/2;T=z-Y-(z-Y)/q*Y}}}s==="xAxis"?O=[n.left+(C.left||0)+(T||0),n.left+n.width-(C.right||0)-(T||0)]:s==="yAxis"?O=m==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(T||0),n.top+n.height-(C.bottom||0)-(T||0)]:O=E.range,S&&(O=[O[1],O[0]]);var L=hee(E,o,b),Q=L.scale,B=L.realScaleType;Q.domain(w).range(O),bee(Q);var ae=See(Q,bo(bo({},E),{},{realScaleType:B}));s==="xAxis"?($=y==="top"&&!A||y==="bottom"&&A,R=n.left,D=g[P]-$*E.height):s==="yAxis"&&($=y==="left"&&!A||y==="right"&&A,R=g[P]-$*E.width,D=n.top);var te=bo(bo(bo({},E),ae),{},{realScaleType:B,x:R,y:D,scale:Q,width:s==="xAxis"?n.width:E.width,height:s==="yAxis"?n.height:E.height});return te.bandSize=rg(te,ae),!E.hide&&s==="xAxis"?g[P]+=($?-1:1)*te.height:E.hide||(g[P]+=($?-1:1)*te.width),bo(bo({},x),{},hh({},v,te))},{})},l$=function(r,a){var n=r.x,s=r.y,o=a.x,l=a.y;return{x:Math.min(n,o),y:Math.min(s,l),width:Math.abs(o-n),height:Math.abs(l-s)}},lse=function(r){var a=r.x1,n=r.y1,s=r.x2,o=r.y2;return l$({x:a,y:n},{x:s,y:o})},i$=(function(){function t(r){nse(this,t),this.scale=r}return sse(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,o=n.position;if(a!==void 0){if(o)switch(o){case"start":return this.scale(a);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+l}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(a)+c}default:return this.scale(a)}if(s){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+m}return this.scale(a)}}},{key:"isInRange",value:function(a){var n=this.range(),s=n[0],o=n[n.length-1];return s<=o?a>=s&&a<=o:a>=o&&a<=s}}],[{key:"create",value:function(a){return new t(a)}}])})();hh(i$,"EPS",1e-4);var Ek=function(r){var a=Object.keys(r).reduce(function(n,s){return bo(bo({},n),{},hh({},s,i$.create(r[s])))},{});return bo(bo({},a),{},{apply:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=o.bandAware,c=o.position;return $ne(s,function(m,p){return a[p].apply(m,{bandAware:l,position:c})})},isInRange:function(s){return t$(s,function(o,l){return a[l].isInRange(o)})}})};function ise(t){return(t%180+180)%180}var cse=function(r){var a=r.width,n=r.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=ise(s),l=o*Math.PI/180,c=Math.atan(n/a),m=l>c&&l<Math.PI-c?n/Math.sin(l):a/Math.cos(l);return Math.abs(m)},pw,NT;function dse(){if(NT)return pw;NT=1;var t=yi(),r=yp(),a=eh();function n(s){return function(o,l,c){var m=Object(o);if(!r(o)){var p=t(l,3);o=a(o),l=function(g){return p(m[g],g,m)}}var f=s(o,l,c);return f>-1?m[p?o[f]:f]:void 0}}return pw=n,pw}var fw,kT;function mse(){if(kT)return fw;kT=1;var t=QR();function r(a){var n=t(a),s=n%1;return n===n?s?n-s:n:0}return fw=r,fw}var gw,ST;function use(){if(ST)return gw;ST=1;var t=w7(),r=yi(),a=mse(),n=Math.max;function s(o,l,c){var m=o==null?0:o.length;if(!m)return-1;var p=c==null?0:a(c);return p<0&&(p=n(m+p,0)),t(o,r(l,3),p)}return gw=s,gw}var hw,CT;function pse(){if(CT)return hw;CT=1;var t=dse(),r=use(),a=t(r);return hw=a,hw}var fse=pse();const gse=Aa(fse);var hse=Dj();const bse=Aa(hse);var xse=bse(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),wk=u.createContext(void 0),Nk=u.createContext(void 0),c$=u.createContext(void 0),d$=u.createContext({}),m$=u.createContext(void 0),u$=u.createContext(0),p$=u.createContext(0),AT=function(r){var a=r.state,n=a.xAxisMap,s=a.yAxisMap,o=a.offset,l=r.clipPathId,c=r.children,m=r.width,p=r.height,f=xse(o);return e.createElement(wk.Provider,{value:n},e.createElement(Nk.Provider,{value:s},e.createElement(d$.Provider,{value:o},e.createElement(c$.Provider,{value:f},e.createElement(m$.Provider,{value:l},e.createElement(u$.Provider,{value:p},e.createElement(p$.Provider,{value:m},c)))))))},yse=function(){return u.useContext(m$)},f$=function(r){var a=u.useContext(wk);a==null&&gc();var n=a[r];return n==null&&gc(),n},vse=function(){var r=u.useContext(wk);return si(r)},Ese=function(){var r=u.useContext(Nk),a=gse(r,function(n){return t$(n.domain,Number.isFinite)});return a||si(r)},g$=function(r){var a=u.useContext(Nk);a==null&&gc();var n=a[r];return n==null&&gc(),n},wse=function(){var r=u.useContext(c$);return r},Nse=function(){return u.useContext(d$)},kk=function(){return u.useContext(p$)},Sk=function(){return u.useContext(u$)};function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zd(t)}function kse(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Sse(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b$(n.key),n)}}function Cse(t,r,a){return r&&Sse(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ase(t,r,a){return r=bg(r),_se(t,h$()?Reflect.construct(r,a||[],bg(t).constructor):r.apply(t,a))}function _se(t,r){if(r&&(zd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pse(t)}function Pse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h$=function(){return!!t})()}function bg(t){return bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},bg(t)}function Tse(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&S1(t,r)}function S1(t,r){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},S1(t,r)}function _T(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function PT(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?_T(Object(a),!0).forEach(function(n){Ck(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_T(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Ck(t,r,a){return r=b$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function b$(t){var r=Ose(t,"string");return zd(r)=="symbol"?r:r+""}function Ose(t,r){if(zd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Mse(t,r){return Lse(t)||$se(t,r)||Rse(t,r)||jse()}function jse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rse(t,r){if(t){if(typeof t=="string")return TT(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return TT(t,r)}}function TT(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function $se(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function Lse(t){if(Array.isArray(t))return t}function C1(){return C1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},C1.apply(this,arguments)}var Ise=function(r,a){var n;return e.isValidElement(r)?n=e.cloneElement(r,a):Lr(r)?n=r(a):n=e.createElement("line",C1({},a,{className:"recharts-reference-line-line"})),n},Dse=function(r,a,n,s,o,l,c,m,p){var f=o.x,g=o.y,b=o.width,x=o.height;if(n){var v=p.y,E=r.y.apply(v,{position:l});if(Uo(p,"discard")&&!r.y.isInRange(E))return null;var y=[{x:f+b,y:E},{x:f,y:E}];return m==="left"?y.reverse():y}if(a){var w=p.x,k=r.x.apply(w,{position:l});if(Uo(p,"discard")&&!r.x.isInRange(k))return null;var C=[{x:k,y:g+x},{x:k,y:g}];return c==="top"?C.reverse():C}if(s){var A=p.segment,S=A.map(function(P){return r.apply(P,{position:l})});return Uo(p,"discard")&&One(S,function(P){return!r.isInRange(P)})?null:S}return null};function Fse(t){var r=t.x,a=t.y,n=t.segment,s=t.xAxisId,o=t.yAxisId,l=t.shape,c=t.className,m=t.alwaysShow,p=yse(),f=f$(s),g=g$(o),b=wse();if(!p||!b)return null;Nl(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=Ek({x:f.scale,y:g.scale}),v=vn(r),E=vn(a),y=n&&n.length===2,w=Dse(x,v,E,y,b,t.position,f.orientation,g.orientation,t);if(!w)return null;var k=Mse(w,2),C=k[0],A=C.x,S=C.y,P=k[1],T=P.x,O=P.y,R=Uo(t,"hidden")?"url(#".concat(p,")"):void 0,D=PT(PT({clipPath:R},Xr(t,!0)),{},{x1:A,y1:S,x2:T,y2:O});return e.createElement(rn,{className:ta("recharts-reference-line",c)},Ise(l,D),Yn.renderCallByParent(t,lse({x1:A,y1:S,x2:T,y2:O})))}var Ak=(function(t){function r(){return kse(this,r),Ase(this,r,arguments)}return Tse(r,t),Cse(r,[{key:"render",value:function(){return e.createElement(Fse,this.props)}}])})(e.Component);Ck(Ak,"displayName","ReferenceLine");Ck(Ak,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function A1(){return A1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},A1.apply(this,arguments)}function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bd(t)}function OT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function MT(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?OT(Object(a),!0).forEach(function(n){bh(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):OT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function zse(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Bse(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y$(n.key),n)}}function qse(t,r,a){return r&&Bse(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Use(t,r,a){return r=xg(r),Vse(t,x$()?Reflect.construct(r,a||[],xg(t).constructor):r.apply(t,a))}function Vse(t,r){if(r&&(Bd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hse(t)}function Hse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x$=function(){return!!t})()}function xg(t){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},xg(t)}function Wse(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_1(t,r)}function _1(t,r){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_1(t,r)}function bh(t,r,a){return r=y$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function y$(t){var r=Gse(t,"string");return Bd(r)=="symbol"?r:r+""}function Gse(t,r){if(Bd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kse=function(r){var a=r.x,n=r.y,s=r.xAxis,o=r.yAxis,l=Ek({x:s.scale,y:o.scale}),c=l.apply({x:a,y:n},{bandAware:!0});return Uo(r,"discard")&&!l.isInRange(c)?null:c},xh=(function(t){function r(){return zse(this,r),Use(this,r,arguments)}return Wse(r,t),qse(r,[{key:"render",value:function(){var n=this.props,s=n.x,o=n.y,l=n.r,c=n.alwaysShow,m=n.clipPathId,p=vn(s),f=vn(o);if(Nl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!p||!f)return null;var g=Kse(this.props);if(!g)return null;var b=g.x,x=g.y,v=this.props,E=v.shape,y=v.className,w=Uo(this.props,"hidden")?"url(#".concat(m,")"):void 0,k=MT(MT({clipPath:w},Xr(this.props,!0)),{},{cx:b,cy:x});return e.createElement(rn,{className:ta("recharts-reference-dot",y)},r.renderDot(E,k),Yn.renderCallByParent(this.props,{x:b-l,y:x-l,width:2*l,height:2*l}))}}])})(e.Component);bh(xh,"displayName","ReferenceDot");bh(xh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});bh(xh,"renderDot",function(t,r){var a;return e.isValidElement(t)?a=e.cloneElement(t,r):Lr(t)?a=t(r):a=e.createElement(vk,A1({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),a});function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},P1.apply(this,arguments)}function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qd(t)}function jT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function RT(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?jT(Object(a),!0).forEach(function(n){yh(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Yse(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xse(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E$(n.key),n)}}function Qse(t,r,a){return r&&Xse(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jse(t,r,a){return r=yg(r),Zse(t,v$()?Reflect.construct(r,a||[],yg(t).constructor):r.apply(t,a))}function Zse(t,r){if(r&&(qd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eoe(t)}function eoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v$=function(){return!!t})()}function yg(t){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},yg(t)}function toe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&T1(t,r)}function T1(t,r){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},T1(t,r)}function yh(t,r,a){return r=E$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function E$(t){var r=roe(t,"string");return qd(r)=="symbol"?r:r+""}function roe(t,r){if(qd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aoe=function(r,a,n,s,o){var l=o.x1,c=o.x2,m=o.y1,p=o.y2,f=o.xAxis,g=o.yAxis;if(!f||!g)return null;var b=Ek({x:f.scale,y:g.scale}),x={x:r?b.x.apply(l,{position:"start"}):b.x.rangeMin,y:n?b.y.apply(m,{position:"start"}):b.y.rangeMin},v={x:a?b.x.apply(c,{position:"end"}):b.x.rangeMax,y:s?b.y.apply(p,{position:"end"}):b.y.rangeMax};return Uo(o,"discard")&&(!b.isInRange(x)||!b.isInRange(v))?null:l$(x,v)},vh=(function(t){function r(){return Yse(this,r),Jse(this,r,arguments)}return toe(r,t),Qse(r,[{key:"render",value:function(){var n=this.props,s=n.x1,o=n.x2,l=n.y1,c=n.y2,m=n.className,p=n.alwaysShow,f=n.clipPathId;Nl(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=vn(s),b=vn(o),x=vn(l),v=vn(c),E=this.props.shape;if(!g&&!b&&!x&&!v&&!E)return null;var y=aoe(g,b,x,v,this.props);if(!y&&!E)return null;var w=Uo(this.props,"hidden")?"url(#".concat(f,")"):void 0;return e.createElement(rn,{className:ta("recharts-reference-area",m)},r.renderRect(E,RT(RT({clipPath:w},Xr(this.props,!0)),y)),Yn.renderCallByParent(this.props,y))}}])})(e.Component);yh(vh,"displayName","ReferenceArea");yh(vh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});yh(vh,"renderRect",function(t,r){var a;return e.isValidElement(t)?a=e.cloneElement(t,r):Lr(t)?a=t(r):a=e.createElement(yk,P1({},r,{className:"recharts-reference-area-rect"})),a});function w$(t,r,a){if(r<1)return[];if(r===1&&a===void 0)return t;for(var n=[],s=0;s<t.length;s+=r)n.push(t[s]);return n}function noe(t,r,a){var n={width:t.width+r.width,height:t.height+r.height};return cse(n,a)}function soe(t,r,a){var n=a==="width",s=t.x,o=t.y,l=t.width,c=t.height;return r===1?{start:n?s:o,end:n?s+l:o+c}:{start:n?s+l:o+c,end:n?s:o}}function vg(t,r,a,n,s){if(t*r<t*n||t*r>t*s)return!1;var o=a();return t*(r-t*o/2-n)>=0&&t*(r+t*o/2-s)<=0}function ooe(t,r){return w$(t,r+1)}function loe(t,r,a,n,s){for(var o=(n||[]).slice(),l=r.start,c=r.end,m=0,p=1,f=l,g=function(){var v=n?.[m];if(v===void 0)return{v:w$(n,p)};var E=m,y,w=function(){return y===void 0&&(y=a(v,E)),y},k=v.coordinate,C=m===0||vg(t,k,w,f,c);C||(m=0,f=l,p+=1),C&&(f=k+t*(w()/2+s),m+=p)},b;p<=o.length;)if(b=g(),b)return b.v;return[]}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ap(t)}function $T(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function Wn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?$T(Object(a),!0).forEach(function(n){ioe(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$T(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ioe(t,r,a){return r=coe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function coe(t){var r=doe(t,"string");return ap(r)=="symbol"?r:r+""}function doe(t,r){if(ap(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function moe(t,r,a,n,s){for(var o=(n||[]).slice(),l=o.length,c=r.start,m=r.end,p=function(b){var x=o[b],v,E=function(){return v===void 0&&(v=a(x,b)),v};if(b===l-1){var y=t*(x.coordinate+t*E()/2-m);o[b]=x=Wn(Wn({},x),{},{tickCoord:y>0?x.coordinate-y*t:x.coordinate})}else o[b]=x=Wn(Wn({},x),{},{tickCoord:x.coordinate});var w=vg(t,x.tickCoord,E,c,m);w&&(m=x.tickCoord-t*(E()/2+s),o[b]=Wn(Wn({},x),{},{isShow:!0}))},f=l-1;f>=0;f--)p(f);return o}function uoe(t,r,a,n,s,o){var l=(n||[]).slice(),c=l.length,m=r.start,p=r.end;if(o){var f=n[c-1],g=a(f,c-1),b=t*(f.coordinate+t*g/2-p);l[c-1]=f=Wn(Wn({},f),{},{tickCoord:b>0?f.coordinate-b*t:f.coordinate});var x=vg(t,f.tickCoord,function(){return g},m,p);x&&(p=f.tickCoord-t*(g/2+s),l[c-1]=Wn(Wn({},f),{},{isShow:!0}))}for(var v=o?c-1:c,E=function(k){var C=l[k],A,S=function(){return A===void 0&&(A=a(C,k)),A};if(k===0){var P=t*(C.coordinate-t*S()/2-m);l[k]=C=Wn(Wn({},C),{},{tickCoord:P<0?C.coordinate-P*t:C.coordinate})}else l[k]=C=Wn(Wn({},C),{},{tickCoord:C.coordinate});var T=vg(t,C.tickCoord,S,m,p);T&&(m=C.tickCoord+t*(S()/2+s),l[k]=Wn(Wn({},C),{},{isShow:!0}))},y=0;y<v;y++)E(y);return l}function _k(t,r,a){var n=t.tick,s=t.ticks,o=t.viewBox,l=t.minTickGap,c=t.orientation,m=t.interval,p=t.tickFormatter,f=t.unit,g=t.angle;if(!s||!s.length||!n)return[];if($t(m)||nm.isSsr)return ooe(s,typeof m=="number"&&$t(m)?m:0);var b=[],x=c==="top"||c==="bottom"?"width":"height",v=f&&x==="width"?mu(f,{fontSize:r,letterSpacing:a}):{width:0,height:0},E=function(C,A){var S=Lr(p)?p(C.value,A):C.value;return x==="width"?noe(mu(S,{fontSize:r,letterSpacing:a}),v,g):mu(S,{fontSize:r,letterSpacing:a})[x]},y=s.length>=2?No(s[1].coordinate-s[0].coordinate):1,w=soe(o,y,x);return m==="equidistantPreserveStart"?loe(y,w,E,s,l):(m==="preserveStart"||m==="preserveStartEnd"?b=uoe(y,w,E,s,l,m==="preserveStartEnd"):b=moe(y,w,E,s,l),b.filter(function(k){return k.isShow}))}var poe=["viewBox"],foe=["viewBox"],goe=["ticks"];function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ud(t)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},dd.apply(this,arguments)}function LT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function xn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?LT(Object(a),!0).forEach(function(n){Pk(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):LT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function bw(t,r){if(t==null)return{};var a=hoe(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function hoe(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function boe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function IT(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k$(n.key),n)}}function xoe(t,r,a){return r&&IT(t.prototype,r),a&&IT(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function yoe(t,r,a){return r=Eg(r),voe(t,N$()?Reflect.construct(r,a||[],Eg(t).constructor):r.apply(t,a))}function voe(t,r){if(r&&(Ud(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eoe(t)}function Eoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N$=function(){return!!t})()}function Eg(t){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Eg(t)}function woe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&O1(t,r)}function O1(t,r){return O1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O1(t,r)}function Pk(t,r,a){return r=k$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function k$(t){var r=Noe(t,"string");return Ud(r)=="symbol"?r:r+""}function Noe(t,r){if(Ud(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var im=(function(t){function r(a){var n;return boe(this,r),n=yoe(this,r,[a]),n.state={fontSize:"",letterSpacing:""},n}return woe(r,t),xoe(r,[{key:"shouldComponentUpdate",value:function(n,s){var o=n.viewBox,l=bw(n,poe),c=this.props,m=c.viewBox,p=bw(c,foe);return!bd(o,m)||!bd(l,p)||!bd(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,o=s.x,l=s.y,c=s.width,m=s.height,p=s.orientation,f=s.tickSize,g=s.mirror,b=s.tickMargin,x,v,E,y,w,k,C=g?-1:1,A=n.tickSize||f,S=$t(n.tickCoord)?n.tickCoord:n.coordinate;switch(p){case"top":x=v=n.coordinate,y=l+ +!g*m,E=y-C*A,k=E-C*b,w=S;break;case"left":E=y=n.coordinate,v=o+ +!g*c,x=v-C*A,w=x-C*b,k=S;break;case"right":E=y=n.coordinate,v=o+ +g*c,x=v+C*A,w=x+C*b,k=S;break;default:x=v=n.coordinate,y=l+ +g*m,E=y+C*A,k=E+C*b,w=S;break}return{line:{x1:x,y1:E,x2:v,y2:y},tick:{x:w,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,l;switch(s){case"left":l=o?"start":"end";break;case"right":l=o?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,o=n.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=o?"start":"end";break;default:l=o?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,o=n.y,l=n.width,c=n.height,m=n.orientation,p=n.mirror,f=n.axisLine,g=xn(xn(xn({},Xr(this.props,!1)),Xr(f,!1)),{},{fill:"none"});if(m==="top"||m==="bottom"){var b=+(m==="top"&&!p||m==="bottom"&&p);g=xn(xn({},g),{},{x1:s,y1:o+b*c,x2:s+l,y2:o+b*c})}else{var x=+(m==="left"&&!p||m==="right"&&p);g=xn(xn({},g),{},{x1:s+x*l,y1:o,x2:s+x*l,y2:o+c})}return e.createElement("line",dd({},g,{className:ta("recharts-cartesian-axis-line",ro(f,"className"))}))}},{key:"renderTicks",value:function(n,s,o){var l=this,c=this.props,m=c.tickLine,p=c.stroke,f=c.tick,g=c.tickFormatter,b=c.unit,x=_k(xn(xn({},this.props),{},{ticks:n}),s,o),v=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),y=Xr(this.props,!1),w=Xr(f,!1),k=xn(xn({},y),{},{fill:"none"},Xr(m,!1)),C=x.map(function(A,S){var P=l.getTickLineCoord(A),T=P.line,O=P.tick,R=xn(xn(xn(xn({textAnchor:v,verticalAnchor:E},y),{},{stroke:"none",fill:p},w),O),{},{index:S,payload:A,visibleTicksCount:x.length,tickFormatter:g});return e.createElement(rn,dd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Tf(l.props,A,S)),m&&e.createElement("line",dd({},k,T,{className:ta("recharts-cartesian-axis-tick-line",ro(m,"className"))})),f&&r.renderTickItem(f,R,"".concat(Lr(g)?g(A.value,S):A.value).concat(b||"")))});return e.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,s=this.props,o=s.axisLine,l=s.width,c=s.height,m=s.ticksGenerator,p=s.className,f=s.hide;if(f)return null;var g=this.props,b=g.ticks,x=bw(g,goe),v=b;return Lr(m)&&(v=b&&b.length>0?m(this.props):m(x)),l<=0||c<=0||!v||!v.length?null:e.createElement(rn,{className:ta("recharts-cartesian-axis",p),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Yn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,o){var l,c=ta(s.className,"recharts-cartesian-axis-tick-value");return e.isValidElement(n)?l=e.cloneElement(n,xn(xn({},s),{},{className:c})):Lr(n)?l=n(xn(xn({},s),{},{className:c})):l=e.createElement(Bf,dd({},s,{className:"recharts-cartesian-axis-tick-value"}),o),l}}])})(u.Component);Pk(im,"displayName","CartesianAxis");Pk(im,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var koe=["x1","y1","x2","y2","key"],Soe=["offset"];function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hc(t)}function DT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function Xn(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?DT(Object(a),!0).forEach(function(n){Coe(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):DT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Coe(t,r,a){return r=Aoe(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Aoe(t){var r=_oe(t,"string");return hc(r)=="symbol"?r:r+""}function _oe(t,r){if(hc(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},rc.apply(this,arguments)}function FT(t,r){if(t==null)return{};var a=Poe(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Poe(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}var Toe=function(r){var a=r.fill;if(!a||a==="none")return null;var n=r.fillOpacity,s=r.x,o=r.y,l=r.width,c=r.height,m=r.ry;return e.createElement("rect",{x:s,y:o,ry:m,width:l,height:c,stroke:"none",fill:a,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function S$(t,r){var a;if(e.isValidElement(t))a=e.cloneElement(t,r);else if(Lr(t))a=t(r);else{var n=r.x1,s=r.y1,o=r.x2,l=r.y2,c=r.key,m=FT(r,koe),p=Xr(m,!1);p.offset;var f=FT(p,Soe);a=e.createElement("line",rc({},f,{x1:n,y1:s,x2:o,y2:l,fill:"none",key:c}))}return a}function Ooe(t){var r=t.x,a=t.width,n=t.horizontal,s=n===void 0?!0:n,o=t.horizontalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(c,m){var p=Xn(Xn({},t),{},{x1:r,y1:c,x2:r+a,y2:c,key:"line-".concat(m),index:m});return S$(s,p)});return e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Moe(t){var r=t.y,a=t.height,n=t.vertical,s=n===void 0?!0:n,o=t.verticalPoints;if(!s||!o||!o.length)return null;var l=o.map(function(c,m){var p=Xn(Xn({},t),{},{x1:c,y1:r,x2:c,y2:r+a,key:"line-".concat(m),index:m});return S$(s,p)});return e.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function joe(t){var r=t.horizontalFill,a=t.fillOpacity,n=t.x,s=t.y,o=t.width,l=t.height,c=t.horizontalPoints,m=t.horizontal,p=m===void 0?!0:m;if(!p||!r||!r.length)return null;var f=c.map(function(b){return Math.round(b+s-s)}).sort(function(b,x){return b-x});s!==f[0]&&f.unshift(0);var g=f.map(function(b,x){var v=!f[x+1],E=v?s+l-b:f[x+1]-b;if(E<=0)return null;var y=x%r.length;return e.createElement("rect",{key:"react-".concat(x),y:b,x:n,height:E,width:o,stroke:"none",fill:r[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function Roe(t){var r=t.vertical,a=r===void 0?!0:r,n=t.verticalFill,s=t.fillOpacity,o=t.x,l=t.y,c=t.width,m=t.height,p=t.verticalPoints;if(!a||!n||!n.length)return null;var f=p.map(function(b){return Math.round(b+o-o)}).sort(function(b,x){return b-x});o!==f[0]&&f.unshift(0);var g=f.map(function(b,x){var v=!f[x+1],E=v?o+c-b:f[x+1]-b;if(E<=0)return null;var y=x%n.length;return e.createElement("rect",{key:"react-".concat(x),x:b,y:l,width:E,height:m,stroke:"none",fill:n[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var $oe=function(r,a){var n=r.xAxis,s=r.width,o=r.height,l=r.offset;return DR(_k(Xn(Xn(Xn({},im.defaultProps),n),{},{ticks:xl(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.left,l.left+l.width,a)},Loe=function(r,a){var n=r.yAxis,s=r.width,o=r.height,l=r.offset;return DR(_k(Xn(Xn(Xn({},im.defaultProps),n),{},{ticks:xl(n,!0),viewBox:{x:0,y:0,width:s,height:o}})),l.top,l.top+l.height,a)},Zc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function vd(t){var r,a,n,s,o,l,c=kk(),m=Sk(),p=Nse(),f=Xn(Xn({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:Zc.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:Zc.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Zc.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Zc.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:Zc.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Zc.verticalFill,x:$t(t.x)?t.x:p.left,y:$t(t.y)?t.y:p.top,width:$t(t.width)?t.width:p.width,height:$t(t.height)?t.height:p.height}),g=f.x,b=f.y,x=f.width,v=f.height,E=f.syncWithTicks,y=f.horizontalValues,w=f.verticalValues,k=vse(),C=Ese();if(!$t(x)||x<=0||!$t(v)||v<=0||!$t(g)||g!==+g||!$t(b)||b!==+b)return null;var A=f.verticalCoordinatesGenerator||$oe,S=f.horizontalCoordinatesGenerator||Loe,P=f.horizontalPoints,T=f.verticalPoints;if((!P||!P.length)&&Lr(S)){var O=y&&y.length,R=S({yAxis:C?Xn(Xn({},C),{},{ticks:O?y:C.ticks}):void 0,width:c,height:m,offset:p},O?!0:E);Nl(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(hc(R),"]")),Array.isArray(R)&&(P=R)}if((!T||!T.length)&&Lr(A)){var D=w&&w.length,$=A({xAxis:k?Xn(Xn({},k),{},{ticks:D?w:k.ticks}):void 0,width:c,height:m,offset:p},D?!0:E);Nl(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(hc($),"]")),Array.isArray($)&&(T=$)}return e.createElement("g",{className:"recharts-cartesian-grid"},e.createElement(Toe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),e.createElement(Ooe,rc({},f,{offset:p,horizontalPoints:P,xAxis:k,yAxis:C})),e.createElement(Moe,rc({},f,{offset:p,verticalPoints:T,xAxis:k,yAxis:C})),e.createElement(joe,rc({},f,{horizontalPoints:P})),e.createElement(Roe,rc({},f,{verticalPoints:T})))}vd.displayName="CartesianGrid";var Ioe=["type","layout","connectNulls","ref"],Doe=["key"];function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vd(t)}function zT(t,r){if(t==null)return{};var a=Foe(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Foe(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},gu.apply(this,arguments)}function BT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function js(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?BT(Object(a),!0).forEach(function(n){xo(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):BT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ed(t){return Uoe(t)||qoe(t)||Boe(t)||zoe()}function zoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Boe(t,r){if(t){if(typeof t=="string")return M1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M1(t,r)}}function qoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uoe(t){if(Array.isArray(t))return M1(t)}function M1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function Voe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function qT(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A$(n.key),n)}}function Hoe(t,r,a){return r&&qT(t.prototype,r),a&&qT(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Woe(t,r,a){return r=wg(r),Goe(t,C$()?Reflect.construct(r,a||[],wg(t).constructor):r.apply(t,a))}function Goe(t,r){if(r&&(Vd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Koe(t)}function Koe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C$=function(){return!!t})()}function wg(t){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wg(t)}function Yoe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&j1(t,r)}function j1(t,r){return j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},j1(t,r)}function xo(t,r,a){return r=A$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function A$(t){var r=Xoe(t,"string");return Vd(r)=="symbol"?r:r+""}function Xoe(t,r){if(Vd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bc=(function(t){function r(){var a;Voe(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=Woe(this,r,[].concat(s)),xo(a,"state",{isAnimationFinished:!0,totalLength:0}),xo(a,"generateSimpleStrokeDasharray",function(l,c){return"".concat(c,"px ").concat(l-c,"px")}),xo(a,"getStrokeDasharray",function(l,c,m){var p=m.reduce(function(w,k){return w+k});if(!p)return a.generateSimpleStrokeDasharray(c,l);for(var f=Math.floor(l/p),g=l%p,b=c-l,x=[],v=0,E=0;v<m.length;E+=m[v],++v)if(E+m[v]>g){x=[].concat(ed(m.slice(0,v)),[g-E]);break}var y=x.length%2===0?[0,b]:[b];return[].concat(ed(r.repeat(m,f)),ed(x),y).map(function(w){return"".concat(w,"px")}).join(", ")}),xo(a,"id",xp("recharts-line-")),xo(a,"pathRef",function(l){a.mainCurve=l}),xo(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),xo(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return Yoe(r,t),Hoe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.points,c=o.xAxis,m=o.yAxis,p=o.layout,f=o.children,g=ao(f,kp);if(!g)return null;var b=function(E,y){return{x:E.x,y:E.y,value:E.value,errorVal:Fs(E.payload,y)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return e.createElement(rn,x,g.map(function(v){return e.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:l,xAxis:c,yAxis:m,layout:p,dataPointFormatter:b})}))}},{key:"renderDots",value:function(n,s,o){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var c=this.props,m=c.dot,p=c.points,f=c.dataKey,g=Xr(this.props,!1),b=Xr(m,!0),x=p.map(function(E,y){var w=js(js(js({key:"dot-".concat(y),r:3},g),b),{},{index:y,cx:E.x,cy:E.y,value:E.value,dataKey:f,payload:E.payload,points:p});return r.renderDotItem(m,w)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return e.createElement(rn,gu({className:"recharts-line-dots",key:"dots"},v),x)}},{key:"renderCurveStatically",value:function(n,s,o,l){var c=this.props,m=c.type,p=c.layout,f=c.connectNulls;c.ref;var g=zT(c,Ioe),b=js(js(js({},Xr(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(o,")"):null,points:n},l),{},{type:m,layout:p,connectNulls:f});return e.createElement(d1,gu({},b,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var o=this,l=this.props,c=l.points,m=l.strokeDasharray,p=l.isAnimationActive,f=l.animationBegin,g=l.animationDuration,b=l.animationEasing,x=l.animationId,v=l.animateNewValues,E=l.width,y=l.height,w=this.state,k=w.prevPoints,C=w.totalLength;return e.createElement(Tl,{begin:f,duration:g,isActive:p,easing:b,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(k){var P=k.length/c.length,T=c.map(function(j,K){var H=Math.floor(K*P);if(k[H]){var V=k[H],q=vo(V.x,j.x),Y=vo(V.y,j.y);return js(js({},j),{},{x:q(S),y:Y(S)})}if(v){var z=vo(E*2,j.x),L=vo(y/2,j.y);return js(js({},j),{},{x:z(S),y:L(S)})}return js(js({},j),{},{x:j.x,y:j.y})});return o.renderCurveStatically(T,n,s)}var O=vo(0,C),R=O(S),D;if(m){var $="".concat(m).split(/[,\s]+/gim).map(function(j){return parseFloat(j)});D=o.getStrokeDasharray(R,C,$)}else D=o.generateSimpleStrokeDasharray(C,R);return o.renderCurveStatically(c,n,s,{strokeDasharray:D})})}},{key:"renderCurve",value:function(n,s){var o=this.props,l=o.points,c=o.isAnimationActive,m=this.state,p=m.prevPoints,f=m.totalLength;return c&&l&&l.length&&(!p&&f>0||!mh(p,l))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(l,n,s)}},{key:"render",value:function(){var n,s=this.props,o=s.hide,l=s.dot,c=s.points,m=s.className,p=s.xAxis,f=s.yAxis,g=s.top,b=s.left,x=s.width,v=s.height,E=s.isAnimationActive,y=s.id;if(o||!c||!c.length)return null;var w=this.state.isAnimationFinished,k=c.length===1,C=ta("recharts-line",m),A=p&&p.allowDataOverflow,S=f&&f.allowDataOverflow,P=A||S,T=qr(y)?this.id:y,O=(n=Xr(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},R=O.r,D=R===void 0?3:R,$=O.strokeWidth,j=$===void 0?2:$,K=mW(l)?l:{},H=K.clipDot,V=H===void 0?!0:H,q=D*2+j;return e.createElement(rn,{className:C},A||S?e.createElement("defs",null,e.createElement("clipPath",{id:"clipPath-".concat(T)},e.createElement("rect",{x:A?b:b-x/2,y:S?g:g-v/2,width:A?x:x*2,height:S?v:v*2})),!V&&e.createElement("clipPath",{id:"clipPath-dots-".concat(T)},e.createElement("rect",{x:b-q/2,y:g-q/2,width:x+q,height:v+q}))):null,!k&&this.renderCurve(P,T),this.renderErrorBar(P,T),(k||l)&&this.renderDots(P,V,T),(!E||w)&&ui.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var o=n.length%2!==0?[].concat(ed(n),[0]):n,l=[],c=0;c<s;++c)l=[].concat(ed(l),ed(o));return l}},{key:"renderDotItem",value:function(n,s){var o;if(e.isValidElement(n))o=e.cloneElement(n,s);else if(Lr(n))o=n(s);else{var l=s.key,c=zT(s,Doe),m=ta("recharts-line-dot",typeof n!="boolean"?n.className:"");o=e.createElement(vk,gu({key:l},c,{className:m}))}return o}}])})(u.PureComponent);xo(bc,"displayName","Line");xo(bc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!nm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});xo(bc,"getComposedData",function(t){var r=t.props,a=t.xAxis,n=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.dataKey,c=t.bandSize,m=t.displayedData,p=t.offset,f=r.layout,g=m.map(function(b,x){var v=Fs(b,l);return f==="horizontal"?{x:sP({axis:a,ticks:s,bandSize:c,entry:b,index:x}),y:qr(v)?null:n.scale(v),value:v,payload:b}:{x:qr(v)?null:a.scale(v),y:sP({axis:n,ticks:o,bandSize:c,entry:b,index:x}),value:v,payload:b}});return js({points:g,layout:f},p)});function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hd(t)}function Qoe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Joe(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T$(n.key),n)}}function Zoe(t,r,a){return r&&Joe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ele(t,r,a){return r=Ng(r),tle(t,_$()?Reflect.construct(r,a||[],Ng(t).constructor):r.apply(t,a))}function tle(t,r){if(r&&(Hd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rle(t)}function rle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_$=function(){return!!t})()}function Ng(t){return Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ng(t)}function ale(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&R1(t,r)}function R1(t,r){return R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},R1(t,r)}function P$(t,r,a){return r=T$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function T$(t){var r=nle(t,"string");return Hd(r)=="symbol"?r:r+""}function nle(t,r){if(Hd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},$1.apply(this,arguments)}function sle(t){var r=t.xAxisId,a=kk(),n=Sk(),s=f$(r);return s==null?null:u.createElement(im,$1({},s,{className:ta("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:n},ticksGenerator:function(l){return xl(l,!0)}}))}var Sl=(function(t){function r(){return Qoe(this,r),ele(this,r,arguments)}return ale(r,t),Zoe(r,[{key:"render",value:function(){return u.createElement(sle,this.props)}}])})(u.Component);P$(Sl,"displayName","XAxis");P$(Sl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wd(t)}function ole(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function lle(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j$(n.key),n)}}function ile(t,r,a){return r&&lle(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cle(t,r,a){return r=kg(r),dle(t,O$()?Reflect.construct(r,a||[],kg(t).constructor):r.apply(t,a))}function dle(t,r){if(r&&(Wd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mle(t)}function mle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O$=function(){return!!t})()}function kg(t){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},kg(t)}function ule(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&L1(t,r)}function L1(t,r){return L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},L1(t,r)}function M$(t,r,a){return r=j$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function j$(t){var r=ple(t,"string");return Wd(r)=="symbol"?r:r+""}function ple(t,r){if(Wd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function I1(){return I1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},I1.apply(this,arguments)}var fle=function(r){var a=r.yAxisId,n=kk(),s=Sk(),o=g$(a);return o==null?null:u.createElement(im,I1({},o,{className:ta("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(c){return xl(c,!0)}}))},Vo=(function(t){function r(){return ole(this,r),cle(this,r,arguments)}return ule(r,t),ile(r,[{key:"render",value:function(){return u.createElement(fle,this.props)}}])})(u.Component);M$(Vo,"displayName","YAxis");M$(Vo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function UT(t){return xle(t)||ble(t)||hle(t)||gle()}function gle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hle(t,r){if(t){if(typeof t=="string")return D1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D1(t,r)}}function ble(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xle(t){if(Array.isArray(t))return D1(t)}function D1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}var F1=function(r,a,n,s,o){var l=ao(r,Ak),c=ao(r,xh),m=[].concat(UT(l),UT(c)),p=ao(r,vh),f="".concat(s,"Id"),g=s[0],b=a;if(m.length&&(b=m.reduce(function(E,y){if(y.props[f]===n&&Uo(y.props,"extendDomain")&&$t(y.props[g])){var w=y.props[g];return[Math.min(E[0],w),Math.max(E[1],w)]}return E},b)),p.length){var x="".concat(g,"1"),v="".concat(g,"2");b=p.reduce(function(E,y){if(y.props[f]===n&&Uo(y.props,"extendDomain")&&$t(y.props[x])&&$t(y.props[v])){var w=y.props[x],k=y.props[v];return[Math.min(E[0],w,k),Math.max(E[1],w,k)]}return E},b)}return o&&o.length&&(b=o.reduce(function(E,y){return $t(y)?[Math.min(E[0],y),Math.max(E[1],y)]:E},b)),b},xw={exports:{}},VT;function yle(){return VT||(VT=1,(function(t){var r=Object.prototype.hasOwnProperty,a="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(a=!1));function s(m,p,f){this.fn=m,this.context=p,this.once=f||!1}function o(m,p,f,g,b){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,g||m,b),v=a?a+p:p;return m._events[v]?m._events[v].fn?m._events[v]=[m._events[v],x]:m._events[v].push(x):(m._events[v]=x,m._eventsCount++),m}function l(m,p){--m._eventsCount===0?m._events=new n:delete m._events[p]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],f,g;if(this._eventsCount===0)return p;for(g in f=this._events)r.call(f,g)&&p.push(a?g.slice(1):g);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(f)):p},c.prototype.listeners=function(p){var f=a?a+p:p,g=this._events[f];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,x=g.length,v=new Array(x);b<x;b++)v[b]=g[b].fn;return v},c.prototype.listenerCount=function(p){var f=a?a+p:p,g=this._events[f];return g?g.fn?1:g.length:0},c.prototype.emit=function(p,f,g,b,x,v){var E=a?a+p:p;if(!this._events[E])return!1;var y=this._events[E],w=arguments.length,k,C;if(y.fn){switch(y.once&&this.removeListener(p,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,g),!0;case 4:return y.fn.call(y.context,f,g,b),!0;case 5:return y.fn.call(y.context,f,g,b,x),!0;case 6:return y.fn.call(y.context,f,g,b,x,v),!0}for(C=1,k=new Array(w-1);C<w;C++)k[C-1]=arguments[C];y.fn.apply(y.context,k)}else{var A=y.length,S;for(C=0;C<A;C++)switch(y[C].once&&this.removeListener(p,y[C].fn,void 0,!0),w){case 1:y[C].fn.call(y[C].context);break;case 2:y[C].fn.call(y[C].context,f);break;case 3:y[C].fn.call(y[C].context,f,g);break;case 4:y[C].fn.call(y[C].context,f,g,b);break;default:if(!k)for(S=1,k=new Array(w-1);S<w;S++)k[S-1]=arguments[S];y[C].fn.apply(y[C].context,k)}}return!0},c.prototype.on=function(p,f,g){return o(this,p,f,g,!1)},c.prototype.once=function(p,f,g){return o(this,p,f,g,!0)},c.prototype.removeListener=function(p,f,g,b){var x=a?a+p:p;if(!this._events[x])return this;if(!f)return l(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!b||v.once)&&(!g||v.context===g)&&l(this,x);else{for(var E=0,y=[],w=v.length;E<w;E++)(v[E].fn!==f||b&&!v[E].once||g&&v[E].context!==g)&&y.push(v[E]);y.length?this._events[x]=y.length===1?y[0]:y:l(this,x)}return this},c.prototype.removeAllListeners=function(p){var f;return p?(f=a?a+p:p,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,t.exports=c})(xw)),xw.exports}var vle=yle();const Ele=Aa(vle);var yw=new Ele,vw="recharts.syncMouseEvents";function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},np(t)}function wle(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Nle(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R$(n.key),n)}}function kle(t,r,a){return r&&Nle(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ew(t,r,a){return r=R$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function R$(t){var r=Sle(t,"string");return np(r)=="symbol"?r:r+""}function Sle(t,r){if(np(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cle=(function(){function t(){wle(this,t),Ew(this,"activeIndex",0),Ew(this,"coordinateList",[]),Ew(this,"layout","horizontal")}return kle(t,[{key:"setDetails",value:function(a){var n,s=a.coordinateList,o=s===void 0?null:s,l=a.container,c=l===void 0?null:l,m=a.layout,p=m===void 0?null:m,f=a.offset,g=f===void 0?null:f,b=a.mouseHandlerCallback,x=b===void 0?null:b;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=p??this.layout,this.offset=g??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),o=s.x,l=s.y,c=s.height,m=this.coordinateList[this.activeIndex].coordinate,p=((a=window)===null||a===void 0?void 0:a.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,g=o+m+p,b=l+this.offset.top+c/2+f;this.mouseHandlerCallback({pageX:g,pageY:b})}}}])})();function Ale(t,r,a){if(a==="number"&&r===!0&&Array.isArray(t)){var n=t?.[0],s=t?.[1];if(n&&s&&$t(n)&&$t(s))return!0}return!1}function _le(t,r,a,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-s:a.left+.5,y:t==="horizontal"?a.top+.5:r.y-s,width:t==="horizontal"?n:a.width-1,height:t==="horizontal"?a.height-1:n}}function $$(t){var r=t.cx,a=t.cy,n=t.radius,s=t.startAngle,o=t.endAngle,l=In(r,a,n,s),c=In(r,a,n,o);return{points:[l,c],cx:r,cy:a,radius:n,startAngle:s,endAngle:o}}function Ple(t,r,a){var n,s,o,l;if(t==="horizontal")n=r.x,o=n,s=a.top,l=a.top+a.height;else if(t==="vertical")s=r.y,l=s,n=a.left,o=a.left+a.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var c=r.cx,m=r.cy,p=r.innerRadius,f=r.outerRadius,g=r.angle,b=In(c,m,p,g),x=In(c,m,f,g);n=b.x,s=b.y,o=x.x,l=x.y}else return $$(r);return[{x:n,y:s},{x:o,y:l}]}function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sp(t)}function HT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function D0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?HT(Object(a),!0).forEach(function(n){Tle(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):HT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Tle(t,r,a){return r=Ole(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ole(t){var r=Mle(t,"string");return sp(r)=="symbol"?r:r+""}function Mle(t,r){if(sp(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function jle(t){var r,a,n=t.element,s=t.tooltipEventType,o=t.isActive,l=t.activeCoordinate,c=t.activePayload,m=t.offset,p=t.activeTooltipIndex,f=t.tooltipAxisBandSize,g=t.layout,b=t.chartName,x=(r=n.props.cursor)!==null&&r!==void 0?r:(a=n.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!n||!x||!o||!l||b!=="ScatterChart"&&s!=="axis")return null;var v,E=d1;if(b==="ScatterChart")v=l,E=Oae;else if(b==="BarChart")v=_le(g,l,m,f),E=yk;else if(g==="radial"){var y=$$(l),w=y.cx,k=y.cy,C=y.radius,A=y.startAngle,S=y.endAngle;v={cx:w,cy:k,startAngle:A,endAngle:S,innerRadius:C,outerRadius:C},E=UR}else v={points:Ple(g,l,m)},E=d1;var P=D0(D0(D0(D0({stroke:"#ccc",pointerEvents:"none"},m),v),Xr(x,!1)),{},{payload:c,payloadIndex:p,className:ta("recharts-tooltip-cursor",x.className)});return u.isValidElement(x)?u.cloneElement(x,P):u.createElement(E,P)}var Rle=["item"],$le=["children","className","width","height","style","compact","title","desc"];function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gd(t)}function md(){return md=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},md.apply(this,arguments)}function WT(t,r){return Dle(t)||Ile(t,r)||I$(t,r)||Lle()}function Lle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ile(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n,s,o,l,c=[],m=!0,p=!1;try{if(o=(a=a.call(t)).next,r!==0)for(;!(m=(n=o.call(a)).done)&&(c.push(n.value),c.length!==r);m=!0);}catch(f){p=!0,s=f}finally{try{if(!m&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(p)throw s}}return c}}function Dle(t){if(Array.isArray(t))return t}function GT(t,r){if(t==null)return{};var a=Fle(t,r),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Fle(t,r){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;a[n]=t[n]}return a}function zle(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ble(t,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D$(n.key),n)}}function qle(t,r,a){return r&&Ble(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ule(t,r,a){return r=Sg(r),Vle(t,L$()?Reflect.construct(r,a||[],Sg(t).constructor):r.apply(t,a))}function Vle(t,r){if(r&&(Gd(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hle(t)}function Hle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L$=function(){return!!t})()}function Sg(t){return Sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Sg(t)}function Wle(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&z1(t,r)}function z1(t,r){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},z1(t,r)}function Kd(t){return Yle(t)||Kle(t)||I$(t)||Gle()}function Gle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I$(t,r){if(t){if(typeof t=="string")return B1(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B1(t,r)}}function Kle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yle(t){if(Array.isArray(t))return B1(t)}function B1(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=t[a];return n}function KT(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,n)}return a}function at(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?KT(Object(a),!0).forEach(function(n){fr(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):KT(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function fr(t,r,a){return r=D$(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function D$(t){var r=Xle(t,"string");return Gd(r)=="symbol"?r:r+""}function Xle(t,r){if(Gd(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,r);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Qle={xAxis:["bottom","top"],yAxis:["left","right"]},Jle={width:"100%",height:"100%"},F$={x:0,y:0};function F0(t){return t}var Zle=function(r,a){return a==="horizontal"?r.x:a==="vertical"?r.y:a==="centric"?r.angle:r.radius},eie=function(r,a,n,s){var o=a.find(function(f){return f&&f.index===n});if(o){if(r==="horizontal")return{x:o.coordinate,y:s.y};if(r==="vertical")return{x:s.x,y:o.coordinate};if(r==="centric"){var l=o.coordinate,c=s.radius;return at(at(at({},s),In(s.cx,s.cy,c,l)),{},{angle:l,radius:c})}var m=o.coordinate,p=s.angle;return at(at(at({},s),In(s.cx,s.cy,m,p)),{},{angle:p,radius:m})}return F$},Eh=function(r,a){var n=a.graphicalItems,s=a.dataStartIndex,o=a.dataEndIndex,l=(n??[]).reduce(function(c,m){var p=m.props.data;return p&&p.length?[].concat(Kd(c),Kd(p)):c},[]);return l.length>0?l:r&&r.length&&$t(s)&&$t(o)?r.slice(s,o+1):[]};function z$(t){return t==="number"?[0,"auto"]:void 0}var q1=function(r,a,n,s){var o=r.graphicalItems,l=r.tooltipAxis,c=Eh(a,r);return n<0||!o||!o.length||n>=c.length?null:o.reduce(function(m,p){var f,g=(f=p.props.data)!==null&&f!==void 0?f:a;g&&r.dataStartIndex+r.dataEndIndex!==0&&r.dataEndIndex-r.dataStartIndex>=n&&(g=g.slice(r.dataStartIndex,r.dataEndIndex+1));var b;if(l.dataKey&&!l.allowDuplicatedCategory){var x=g===void 0?c:g;b=_f(x,l.dataKey,s)}else b=g&&g[n]||c[n];return b?[].concat(Kd(m),[zR(p,b)]):m},[])},YT=function(r,a,n,s){var o=s||{x:r.chartX,y:r.chartY},l=Zle(o,n),c=r.orderedTooltipTicks,m=r.tooltipAxis,p=r.tooltipTicks,f=dee(l,c,p,m);if(f>=0&&p){var g=p[f]&&p[f].value,b=q1(r,a,f,g),x=eie(n,c,f,o);return{activeTooltipIndex:f,activeLabel:g,activePayload:b,activeCoordinate:x}}return null},tie=function(r,a){var n=a.axes,s=a.graphicalItems,o=a.axisType,l=a.axisIdKey,c=a.stackGroups,m=a.dataStartIndex,p=a.dataEndIndex,f=r.layout,g=r.children,b=r.stackOffset,x=IR(f,o);return n.reduce(function(v,E){var y,w=E.type.defaultProps!==void 0?at(at({},E.type.defaultProps),E.props):E.props,k=w.type,C=w.dataKey,A=w.allowDataOverflow,S=w.allowDuplicatedCategory,P=w.scale,T=w.ticks,O=w.includeHidden,R=w[l];if(v[R])return v;var D=Eh(r.data,{graphicalItems:s.filter(function(ae){var te,ge=l in ae.props?ae.props[l]:(te=ae.type.defaultProps)===null||te===void 0?void 0:te[l];return ge===R}),dataStartIndex:m,dataEndIndex:p}),$=D.length,j,K,H;Ale(w.domain,A,k)&&(j=s1(w.domain,null,A),x&&(k==="number"||P!=="auto")&&(H=pu(D,C,"category")));var V=z$(k);if(!j||j.length===0){var q,Y=(q=w.domain)!==null&&q!==void 0?q:V;if(C){if(j=pu(D,C,k),k==="category"&&x){var z=tW(j);S&&z?(K=j,j=ug(0,$)):S||(j=cP(Y,j,E).reduce(function(ae,te){return ae.indexOf(te)>=0?ae:[].concat(Kd(ae),[te])},[]))}else if(k==="category")S?j=j.filter(function(ae){return ae!==""&&!qr(ae)}):j=cP(Y,j,E).reduce(function(ae,te){return ae.indexOf(te)>=0||te===""||qr(te)?ae:[].concat(Kd(ae),[te])},[]);else if(k==="number"){var L=gee(D,s.filter(function(ae){var te,ge,ue=l in ae.props?ae.props[l]:(te=ae.type.defaultProps)===null||te===void 0?void 0:te[l],Ee="hide"in ae.props?ae.props.hide:(ge=ae.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return ue===R&&(O||!Ee)}),C,o,f);L&&(j=L)}x&&(k==="number"||P!=="auto")&&(H=pu(D,C,"category"))}else x?j=ug(0,$):c&&c[R]&&c[R].hasStack&&k==="number"?j=b==="expand"?[0,1]:FR(c[R].stackGroups,m,p):j=LR(D,s.filter(function(ae){var te=l in ae.props?ae.props[l]:ae.type.defaultProps[l],ge="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return te===R&&(O||!ge)}),k,f,!0);if(k==="number")j=F1(g,j,R,o,T),Y&&(j=s1(Y,j,A));else if(k==="category"&&Y){var Q=Y,B=j.every(function(ae){return Q.indexOf(ae)>=0});B&&(j=Q)}}return at(at({},v),{},fr({},R,at(at({},w),{},{axisType:o,domain:j,categoricalDomain:H,duplicateDomain:K,originalDomain:(y=w.domain)!==null&&y!==void 0?y:V,isCategorical:x,layout:f})))},{})},rie=function(r,a){var n=a.graphicalItems,s=a.Axis,o=a.axisType,l=a.axisIdKey,c=a.stackGroups,m=a.dataStartIndex,p=a.dataEndIndex,f=r.layout,g=r.children,b=Eh(r.data,{graphicalItems:n,dataStartIndex:m,dataEndIndex:p}),x=b.length,v=IR(f,o),E=-1;return n.reduce(function(y,w){var k=w.type.defaultProps!==void 0?at(at({},w.type.defaultProps),w.props):w.props,C=k[l],A=z$("number");if(!y[C]){E++;var S;return v?S=ug(0,x):c&&c[C]&&c[C].hasStack?(S=FR(c[C].stackGroups,m,p),S=F1(g,S,C,o)):(S=s1(A,LR(b,n.filter(function(P){var T,O,R=l in P.props?P.props[l]:(T=P.type.defaultProps)===null||T===void 0?void 0:T[l],D="hide"in P.props?P.props.hide:(O=P.type.defaultProps)===null||O===void 0?void 0:O.hide;return R===C&&!D}),"number",f),s.defaultProps.allowDataOverflow),S=F1(g,S,C,o)),at(at({},y),{},fr({},C,at(at({axisType:o},s.defaultProps),{},{hide:!0,orientation:ro(Qle,"".concat(o,".").concat(E%2),null),domain:S,originalDomain:A,isCategorical:v,layout:f})))}return y},{})},aie=function(r,a){var n=a.axisType,s=n===void 0?"xAxis":n,o=a.AxisComp,l=a.graphicalItems,c=a.stackGroups,m=a.dataStartIndex,p=a.dataEndIndex,f=r.children,g="".concat(s,"Id"),b=ao(f,o),x={};return b&&b.length?x=tie(r,{axes:b,graphicalItems:l,axisType:s,axisIdKey:g,stackGroups:c,dataStartIndex:m,dataEndIndex:p}):l&&l.length&&(x=rie(r,{Axis:o,graphicalItems:l,axisType:s,axisIdKey:g,stackGroups:c,dataStartIndex:m,dataEndIndex:p})),x},nie=function(r){var a=si(r),n=xl(a,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:W2(n,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:rg(a,n)}},XT=function(r){var a=r.children,n=r.defaultShowTooltip,s=$s(a,Dd),o=0,l=0;return r.data&&r.data.length!==0&&(l=r.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(o=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!n}},sie=function(r){return!r||!r.length?!1:r.some(function(a){var n=wl(a&&a.type);return n&&n.indexOf("Bar")>=0})},QT=function(r){return r==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:r==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:r==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},oie=function(r,a){var n=r.props,s=r.graphicalItems,o=r.xAxisMap,l=o===void 0?{}:o,c=r.yAxisMap,m=c===void 0?{}:c,p=n.width,f=n.height,g=n.children,b=n.margin||{},x=$s(g,Dd),v=$s(g,sc),E=Object.keys(m).reduce(function(S,P){var T=m[P],O=T.orientation;return!T.mirror&&!T.hide?at(at({},S),{},fr({},O,S[O]+T.width)):S},{left:b.left||0,right:b.right||0}),y=Object.keys(l).reduce(function(S,P){var T=l[P],O=T.orientation;return!T.mirror&&!T.hide?at(at({},S),{},fr({},O,ro(S,"".concat(O))+T.height)):S},{top:b.top||0,bottom:b.bottom||0}),w=at(at({},y),E),k=w.bottom;x&&(w.bottom+=x.props.height||Dd.defaultProps.height),v&&a&&(w=pee(w,s,n,a));var C=p-w.left-w.right,A=f-w.top-w.bottom;return at(at({brushBottom:k},w),{},{width:Math.max(C,0),height:Math.max(A,0)})},lie=function(r,a){if(a==="xAxis")return r[a].width;if(a==="yAxis")return r[a].height},B$=function(r){var a=r.chartName,n=r.GraphicalChild,s=r.defaultTooltipEventType,o=s===void 0?"axis":s,l=r.validateTooltipEventTypes,c=l===void 0?["axis"]:l,m=r.axisComponents,p=r.legendContent,f=r.formatAxisMap,g=r.defaultProps,b=function(w,k){var C=k.graphicalItems,A=k.stackGroups,S=k.offset,P=k.updateId,T=k.dataStartIndex,O=k.dataEndIndex,R=w.barSize,D=w.layout,$=w.barGap,j=w.barCategoryGap,K=w.maxBarSize,H=QT(D),V=H.numericAxisName,q=H.cateAxisName,Y=sie(C),z=[];return C.forEach(function(L,Q){var B=Eh(w.data,{graphicalItems:[L],dataStartIndex:T,dataEndIndex:O}),ae=L.type.defaultProps!==void 0?at(at({},L.type.defaultProps),L.props):L.props,te=ae.dataKey,ge=ae.maxBarSize,ue=ae["".concat(V,"Id")],Ee=ae["".concat(q,"Id")],fe={},re=m.reduce(function(He,Tt){var Re=k["".concat(Tt.axisType,"Map")],et=ae["".concat(Tt.axisType,"Id")];Re&&Re[et]||Tt.axisType==="zAxis"||gc();var gt=Re[et];return at(at({},He),{},fr(fr({},Tt.axisType,gt),"".concat(Tt.axisType,"Ticks"),xl(gt)))},fe),U=re[q],W=re["".concat(q,"Ticks")],me=A&&A[ue]&&A[ue].hasStack&&Aee(L,A[ue].stackGroups),ne=wl(L.type).indexOf("Bar")>=0,ee=rg(U,W),ve=[],be=Y&&mee({barSize:R,stackGroups:A,totalSize:lie(re,q)});if(ne){var J,Ge,je=qr(ge)?K:ge,tt=(J=(Ge=rg(U,W,!0))!==null&&Ge!==void 0?Ge:je)!==null&&J!==void 0?J:0;ve=uee({barGap:$,barCategoryGap:j,bandSize:tt!==ee?tt:ee,sizeList:be[Ee],maxBarSize:je}),tt!==ee&&(ve=ve.map(function(He){return at(at({},He),{},{position:at(at({},He.position),{},{offset:He.position.offset-tt/2})})}))}var At=L&&L.type&&L.type.getComposedData;At&&z.push({props:at(at({},At(at(at({},re),{},{displayedData:B,props:w,dataKey:te,item:L,bandSize:ee,barPosition:ve,offset:S,stackedData:me,layout:D,dataStartIndex:T,dataEndIndex:O}))),{},fr(fr(fr({key:L.key||"item-".concat(Q)},V,re[V]),q,re[q]),"animationId",P)),childIndex:fW(L,w.children),item:L})}),z},x=function(w,k){var C=w.props,A=w.dataStartIndex,S=w.dataEndIndex,P=w.updateId;if(!N3({props:C}))return null;var T=C.children,O=C.layout,R=C.stackOffset,D=C.data,$=C.reverseStackOrder,j=QT(O),K=j.numericAxisName,H=j.cateAxisName,V=ao(T,n),q=kee(D,V,"".concat(K,"Id"),"".concat(H,"Id"),R,$),Y=m.reduce(function(ae,te){var ge="".concat(te.axisType,"Map");return at(at({},ae),{},fr({},ge,aie(C,at(at({},te),{},{graphicalItems:V,stackGroups:te.axisType===K&&q,dataStartIndex:A,dataEndIndex:S}))))},{}),z=oie(at(at({},Y),{},{props:C,graphicalItems:V}),k?.legendBBox);Object.keys(Y).forEach(function(ae){Y[ae]=f(C,Y[ae],z,ae.replace("Map",""),a)});var L=Y["".concat(H,"Map")],Q=nie(L),B=b(C,at(at({},Y),{},{dataStartIndex:A,dataEndIndex:S,updateId:P,graphicalItems:V,stackGroups:q,offset:z}));return at(at({formattedGraphicalItems:B,graphicalItems:V,offset:z,stackGroups:q},Q),Y)},v=(function(y){function w(k){var C,A,S;return zle(this,w),S=Ule(this,w,[k]),fr(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),fr(S,"accessibilityManager",new Cle),fr(S,"handleLegendBBoxUpdate",function(P){if(P){var T=S.state,O=T.dataStartIndex,R=T.dataEndIndex,D=T.updateId;S.setState(at({legendBBox:P},x({props:S.props,dataStartIndex:O,dataEndIndex:R,updateId:D},at(at({},S.state),{},{legendBBox:P}))))}}),fr(S,"handleReceiveSyncEvent",function(P,T,O){if(S.props.syncId===P){if(O===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(T)}}),fr(S,"handleBrushChange",function(P){var T=P.startIndex,O=P.endIndex;if(T!==S.state.dataStartIndex||O!==S.state.dataEndIndex){var R=S.state.updateId;S.setState(function(){return at({dataStartIndex:T,dataEndIndex:O},x({props:S.props,dataStartIndex:T,dataEndIndex:O,updateId:R},S.state))}),S.triggerSyncEvent({dataStartIndex:T,dataEndIndex:O})}}),fr(S,"handleMouseEnter",function(P){var T=S.getMouseInfo(P);if(T){var O=at(at({},T),{},{isTooltipActive:!0});S.setState(O),S.triggerSyncEvent(O);var R=S.props.onMouseEnter;Lr(R)&&R(O,P)}}),fr(S,"triggeredAfterMouseMove",function(P){var T=S.getMouseInfo(P),O=T?at(at({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(O),S.triggerSyncEvent(O);var R=S.props.onMouseMove;Lr(R)&&R(O,P)}),fr(S,"handleItemMouseEnter",function(P){S.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),fr(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),fr(S,"handleMouseMove",function(P){P.persist(),S.throttleTriggeredAfterMouseMove(P)}),fr(S,"handleMouseLeave",function(P){S.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};S.setState(T),S.triggerSyncEvent(T);var O=S.props.onMouseLeave;Lr(O)&&O(T,P)}),fr(S,"handleOuterEvent",function(P){var T=pW(P),O=ro(S.props,"".concat(T));if(T&&Lr(O)){var R,D;/.*touch.*/i.test(T)?D=S.getMouseInfo(P.changedTouches[0]):D=S.getMouseInfo(P),O((R=D)!==null&&R!==void 0?R:{},P)}}),fr(S,"handleClick",function(P){var T=S.getMouseInfo(P);if(T){var O=at(at({},T),{},{isTooltipActive:!0});S.setState(O),S.triggerSyncEvent(O);var R=S.props.onClick;Lr(R)&&R(O,P)}}),fr(S,"handleMouseDown",function(P){var T=S.props.onMouseDown;if(Lr(T)){var O=S.getMouseInfo(P);T(O,P)}}),fr(S,"handleMouseUp",function(P){var T=S.props.onMouseUp;if(Lr(T)){var O=S.getMouseInfo(P);T(O,P)}}),fr(S,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),fr(S,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseDown(P.changedTouches[0])}),fr(S,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseUp(P.changedTouches[0])}),fr(S,"handleDoubleClick",function(P){var T=S.props.onDoubleClick;if(Lr(T)){var O=S.getMouseInfo(P);T(O,P)}}),fr(S,"handleContextMenu",function(P){var T=S.props.onContextMenu;if(Lr(T)){var O=S.getMouseInfo(P);T(O,P)}}),fr(S,"triggerSyncEvent",function(P){S.props.syncId!==void 0&&yw.emit(vw,S.props.syncId,P,S.eventEmitterSymbol)}),fr(S,"applySyncEvent",function(P){var T=S.props,O=T.layout,R=T.syncMethod,D=S.state.updateId,$=P.dataStartIndex,j=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)S.setState(at({dataStartIndex:$,dataEndIndex:j},x({props:S.props,dataStartIndex:$,dataEndIndex:j,updateId:D},S.state)));else if(P.activeTooltipIndex!==void 0){var K=P.chartX,H=P.chartY,V=P.activeTooltipIndex,q=S.state,Y=q.offset,z=q.tooltipTicks;if(!Y)return;if(typeof R=="function")V=R(z,P);else if(R==="value"){V=-1;for(var L=0;L<z.length;L++)if(z[L].value===P.activeLabel){V=L;break}}var Q=at(at({},Y),{},{x:Y.left,y:Y.top}),B=Math.min(K,Q.x+Q.width),ae=Math.min(H,Q.y+Q.height),te=z[V]&&z[V].value,ge=q1(S.state,S.props.data,V),ue=z[V]?{x:O==="horizontal"?z[V].coordinate:B,y:O==="horizontal"?ae:z[V].coordinate}:F$;S.setState(at(at({},P),{},{activeLabel:te,activeCoordinate:ue,activePayload:ge,activeTooltipIndex:V}))}else S.setState(P)}),fr(S,"renderCursor",function(P){var T,O=S.state,R=O.isTooltipActive,D=O.activeCoordinate,$=O.activePayload,j=O.offset,K=O.activeTooltipIndex,H=O.tooltipAxisBandSize,V=S.getTooltipEventType(),q=(T=P.props.active)!==null&&T!==void 0?T:R,Y=S.props.layout,z=P.key||"_recharts-cursor";return e.createElement(jle,{key:z,activeCoordinate:D,activePayload:$,activeTooltipIndex:K,chartName:a,element:P,isActive:q,layout:Y,offset:j,tooltipAxisBandSize:H,tooltipEventType:V})}),fr(S,"renderPolarAxis",function(P,T,O){var R=ro(P,"type.axisType"),D=ro(S.state,"".concat(R,"Map")),$=P.type.defaultProps,j=$!==void 0?at(at({},$),P.props):P.props,K=D&&D[j["".concat(R,"Id")]];return u.cloneElement(P,at(at({},K),{},{className:ta(R,K.className),key:P.key||"".concat(T,"-").concat(O),ticks:xl(K,!0)}))}),fr(S,"renderPolarGrid",function(P){var T=P.props,O=T.radialLines,R=T.polarAngles,D=T.polarRadius,$=S.state,j=$.radiusAxisMap,K=$.angleAxisMap,H=si(j),V=si(K),q=V.cx,Y=V.cy,z=V.innerRadius,L=V.outerRadius;return u.cloneElement(P,{polarAngles:Array.isArray(R)?R:xl(V,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(D)?D:xl(H,!0).map(function(Q){return Q.coordinate}),cx:q,cy:Y,innerRadius:z,outerRadius:L,key:P.key||"polar-grid",radialLines:O})}),fr(S,"renderLegend",function(){var P=S.state.formattedGraphicalItems,T=S.props,O=T.children,R=T.width,D=T.height,$=S.props.margin||{},j=R-($.left||0)-($.right||0),K=RR({children:O,formattedGraphicalItems:P,legendWidth:j,legendContent:p});if(!K)return null;var H=K.item,V=GT(K,Rle);return u.cloneElement(H,at(at({},V),{},{chartWidth:R,chartHeight:D,margin:$,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),fr(S,"renderTooltip",function(){var P,T=S.props,O=T.children,R=T.accessibilityLayer,D=$s(O,ys);if(!D)return null;var $=S.state,j=$.isTooltipActive,K=$.activeCoordinate,H=$.activePayload,V=$.activeLabel,q=$.offset,Y=(P=D.props.active)!==null&&P!==void 0?P:j;return u.cloneElement(D,{viewBox:at(at({},q),{},{x:q.left,y:q.top}),active:Y,label:V,payload:Y?H:[],coordinate:K,accessibilityLayer:R})}),fr(S,"renderBrush",function(P){var T=S.props,O=T.margin,R=T.data,D=S.state,$=D.offset,j=D.dataStartIndex,K=D.dataEndIndex,H=D.updateId;return u.cloneElement(P,{key:P.key||"_recharts-brush",onChange:R0(S.handleBrushChange,P.props.onChange),data:R,x:$t(P.props.x)?P.props.x:$.left,y:$t(P.props.y)?P.props.y:$.top+$.height+$.brushBottom-(O.bottom||0),width:$t(P.props.width)?P.props.width:$.width,startIndex:j,endIndex:K,updateId:"brush-".concat(H)})}),fr(S,"renderReferenceElement",function(P,T,O){if(!P)return null;var R=S,D=R.clipPathId,$=S.state,j=$.xAxisMap,K=$.yAxisMap,H=$.offset,V=P.type.defaultProps||{},q=P.props,Y=q.xAxisId,z=Y===void 0?V.xAxisId:Y,L=q.yAxisId,Q=L===void 0?V.yAxisId:L;return u.cloneElement(P,{key:P.key||"".concat(T,"-").concat(O),xAxis:j[z],yAxis:K[Q],viewBox:{x:H.left,y:H.top,width:H.width,height:H.height},clipPathId:D})}),fr(S,"renderActivePoints",function(P){var T=P.item,O=P.activePoint,R=P.basePoint,D=P.childIndex,$=P.isRange,j=[],K=T.props.key,H=T.item.type.defaultProps!==void 0?at(at({},T.item.type.defaultProps),T.item.props):T.item.props,V=H.activeDot,q=H.dataKey,Y=at(at({index:D,dataKey:q,cx:O.x,cy:O.y,r:4,fill:xk(T.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Xr(V,!1)),Pf(V));return j.push(w.renderActiveDot(V,Y,"".concat(K,"-activePoint-").concat(D))),R?j.push(w.renderActiveDot(V,at(at({},Y),{},{cx:R.x,cy:R.y}),"".concat(K,"-basePoint-").concat(D))):$&&j.push(null),j}),fr(S,"renderGraphicChild",function(P,T,O){var R=S.filterFormatItem(P,T,O);if(!R)return null;var D=S.getTooltipEventType(),$=S.state,j=$.isTooltipActive,K=$.tooltipAxis,H=$.activeTooltipIndex,V=$.activeLabel,q=S.props.children,Y=$s(q,ys),z=R.props,L=z.points,Q=z.isRange,B=z.baseLine,ae=R.item.type.defaultProps!==void 0?at(at({},R.item.type.defaultProps),R.item.props):R.item.props,te=ae.activeDot,ge=ae.hide,ue=ae.activeBar,Ee=ae.activeShape,fe=!!(!ge&&j&&Y&&(te||ue||Ee)),re={};D!=="axis"&&Y&&Y.props.trigger==="click"?re={onClick:R0(S.handleItemMouseEnter,P.props.onClick)}:D!=="axis"&&(re={onMouseLeave:R0(S.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:R0(S.handleItemMouseEnter,P.props.onMouseEnter)});var U=u.cloneElement(P,at(at({},R.props),re));function W(Tt){return typeof K.dataKey=="function"?K.dataKey(Tt.payload):null}if(fe)if(H>=0){var me,ne;if(K.dataKey&&!K.allowDuplicatedCategory){var ee=typeof K.dataKey=="function"?W:"payload.".concat(K.dataKey.toString());me=_f(L,ee,V),ne=Q&&B&&_f(B,ee,V)}else me=L?.[H],ne=Q&&B&&B[H];if(Ee||ue){var ve=P.props.activeIndex!==void 0?P.props.activeIndex:H;return[u.cloneElement(P,at(at(at({},R.props),re),{},{activeIndex:ve})),null,null]}if(!qr(me))return[U].concat(Kd(S.renderActivePoints({item:R,activePoint:me,basePoint:ne,childIndex:H,isRange:Q})))}else{var be,J=(be=S.getItemByXY(S.state.activeCoordinate))!==null&&be!==void 0?be:{graphicalItem:U},Ge=J.graphicalItem,je=Ge.item,tt=je===void 0?P:je,At=Ge.childIndex,He=at(at(at({},R.props),re),{},{activeIndex:At});return[u.cloneElement(tt,He),null,null]}return Q?[U,null,null]:[U,null]}),fr(S,"renderCustomized",function(P,T,O){return u.cloneElement(P,at(at({key:"recharts-customized-".concat(O)},S.props),S.state))}),fr(S,"renderMap",{CartesianGrid:{handler:F0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:F0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:F0},YAxis:{handler:F0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((C=k.id)!==null&&C!==void 0?C:xp("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=$7(S.triggeredAfterMouseMove,(A=k.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return Wle(w,y),qle(w,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,S=C.data,P=C.height,T=C.layout,O=$s(A,ys);if(O){var R=O.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,$=q1(this.state,S,R,D),j=this.state.tooltipTicks[R].coordinate,K=(this.state.offset.top+P)/2,H=T==="horizontal",V=H?{x:j,y:K}:{y:j,x:K},q=this.state.formattedGraphicalItems.find(function(z){var L=z.item;return L.type.name==="Scatter"});q&&(V=at(at({},V),q.props.points[R].tooltipPosition),$=q.props.points[R].tooltipPayload);var Y={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:D,activePayload:$,activeCoordinate:V};this.setState(Y),this.renderCursor(O),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var S,P;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){AN([$s(C.children,ys)],[$s(this.props.children,ys)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=$s(this.props.children,ys);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return c.indexOf(A)>=0?A:o}return o}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),P=eX(S),T={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},O=S.width/A.offsetWidth||1,R=this.inRange(T.chartX,T.chartY,O);if(!R)return null;var D=this.state,$=D.xAxisMap,j=D.yAxisMap,K=this.getTooltipEventType(),H=YT(this.state,this.props.data,this.props.layout,R);if(K!=="axis"&&$&&j){var V=si($).scale,q=si(j).scale,Y=V&&V.invert?V.invert(T.chartX):null,z=q&&q.invert?q.invert(T.chartY):null;return at(at({},T),{},{xValue:Y,yValue:z},H)}return H?at(at({},T),H):null}},{key:"inRange",value:function(C,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,T=C/S,O=A/S;if(P==="horizontal"||P==="vertical"){var R=this.state.offset,D=T>=R.left&&T<=R.left+R.width&&O>=R.top&&O<=R.top+R.height;return D?{x:T,y:O}:null}var $=this.state,j=$.angleAxisMap,K=$.radiusAxisMap;if(j&&K){var H=si(j);return uP({x:T,y:O},H)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),S=$s(C,ys),P={};S&&A==="axis"&&(S.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=Pf(this.props,this.handleOuterEvent);return at(at({},T),P)}},{key:"addListener",value:function(){yw.on(vw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){yw.removeListener(vw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,S){for(var P=this.state.formattedGraphicalItems,T=0,O=P.length;T<O;T++){var R=P[T];if(R.item===C||R.props.key===C.key||A===wl(R.item.type)&&S===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,S=A.left,P=A.top,T=A.height,O=A.width;return e.createElement("defs",null,e.createElement("clipPath",{id:C},e.createElement("rect",{x:S,y:P,height:T,width:O})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,S){var P=WT(S,2),T=P[0],O=P[1];return at(at({},A),{},fr({},T,O.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,S){var P=WT(S,2),T=P[0],O=P[1];return at(at({},A),{},fr({},T,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,S=A.formattedGraphicalItems,P=A.activeItem;if(S&&S.length)for(var T=0,O=S.length;T<O;T++){var R=S[T],D=R.props,$=R.item,j=$.type.defaultProps!==void 0?at(at({},$.type.defaultProps),$.props):$.props,K=wl($.type);if(K==="Bar"){var H=(D.data||[]).find(function(z){return Eae(C,z)});if(H)return{graphicalItem:R,payload:H}}else if(K==="RadialBar"){var V=(D.data||[]).find(function(z){return uP(C,z)});if(V)return{graphicalItem:R,payload:V}}else if(fh(R,P)||gh(R,P)||Zu(R,P)){var q=mne({graphicalItem:R,activeTooltipItem:P,itemData:j.data}),Y=j.activeIndex===void 0?q:j.activeIndex;return{graphicalItem:at(at({},R),{},{childIndex:Y}),payload:Zu(R,P)?j.data[q]:R.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!N3(this))return null;var A=this.props,S=A.children,P=A.className,T=A.width,O=A.height,R=A.style,D=A.compact,$=A.title,j=A.desc,K=GT(A,$le),H=Xr(K,!1);if(D)return e.createElement(AT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},e.createElement(PN,md({},H,{width:T,height:O,title:$,desc:j}),this.renderClipPath(),S3(S,this.renderMap)));if(this.props.accessibilityLayer){var V,q;H.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,H.role=(q=this.props.role)!==null&&q!==void 0?q:"application",H.onKeyDown=function(z){C.accessibilityManager.keyboardEvent(z)},H.onFocus=function(){C.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return e.createElement(AT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},e.createElement("div",md({className:ta("recharts-wrapper",P),style:at({position:"relative",cursor:"default",width:T,height:O},R)},Y,{ref:function(L){C.container=L}}),e.createElement(PN,md({},H,{width:T,height:O,title:$,desc:j,style:Jle}),this.renderClipPath(),S3(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(u.Component);fr(v,"displayName",a),fr(v,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},g)),fr(v,"getDerivedStateFromProps",function(y,w){var k=y.dataKey,C=y.data,A=y.children,S=y.width,P=y.height,T=y.layout,O=y.stackOffset,R=y.margin,D=w.dataStartIndex,$=w.dataEndIndex;if(w.updateId===void 0){var j=XT(y);return at(at(at({},j),{},{updateId:0},x(at(at({props:y},j),{},{updateId:0}),w)),{},{prevDataKey:k,prevData:C,prevWidth:S,prevHeight:P,prevLayout:T,prevStackOffset:O,prevMargin:R,prevChildren:A})}if(k!==w.prevDataKey||C!==w.prevData||S!==w.prevWidth||P!==w.prevHeight||T!==w.prevLayout||O!==w.prevStackOffset||!bd(R,w.prevMargin)){var K=XT(y),H={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},V=at(at({},YT(w,C,T)),{},{updateId:w.updateId+1}),q=at(at(at({},K),H),V);return at(at(at({},q),x(at({props:y},q),w)),{},{prevDataKey:k,prevData:C,prevWidth:S,prevHeight:P,prevLayout:T,prevStackOffset:O,prevMargin:R,prevChildren:A})}if(!AN(A,w.prevChildren)){var Y,z,L,Q,B=$s(A,Dd),ae=B&&(Y=(z=B.props)===null||z===void 0?void 0:z.startIndex)!==null&&Y!==void 0?Y:D,te=B&&(L=(Q=B.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&L!==void 0?L:$,ge=ae!==D||te!==$,ue=!qr(C),Ee=ue&&!ge?w.updateId:w.updateId+1;return at(at({updateId:Ee},x(at(at({props:y},w),{},{updateId:Ee,dataStartIndex:ae,dataEndIndex:te}),w)),{},{prevChildren:A,dataStartIndex:ae,dataEndIndex:te})}return null}),fr(v,"renderActiveDot",function(y,w,k){var C;return u.isValidElement(y)?C=u.cloneElement(y,w):Lr(y)?C=y(w):C=e.createElement(vk,w),e.createElement(rn,{className:"recharts-active-dot",key:k},C)});var E=u.forwardRef(function(w,k){return e.createElement(v,md({},w,{ref:k}))});return E.displayName=v.displayName,E},q$=B$({chartName:"LineChart",GraphicalChild:bc,axisComponents:[{axisType:"xAxis",AxisComp:Sl},{axisType:"yAxis",AxisComp:Vo}],formatAxisMap:o$}),U1=B$({chartName:"BarChart",GraphicalChild:Ol,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Sl},{axisType:"yAxis",AxisComp:Vo}],formatAxisMap:o$});const Qr=t=>Number(t||0).toLocaleString("fr-FR"),ss=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Km=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",ww=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",z0=(t,r)=>{if(!r||!t)return"";const a=Number(t)/Number(r)*100,n=a>=1?a.toFixed(1):a.toFixed(2);return`${Number(n).toLocaleString("fr-FR")} %`},iie=t=>{if(!t)return"";const[r,a]=t.split("-").map(Number);return new Date(r,(a||1)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})};function ml({label:t,value:r,helper:a,icon:n}){return e.createElement("div",{className:"group relative overflow-hidden rounded-2xl border border-gray-200/60 bg-gradient-to-br from-white to-gray-50/50 px-5 py-4 shadow-sm transition-all duration-300 hover:shadow-md hover:border-indigo-200/60"},e.createElement("div",{className:"flex items-start justify-between"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2"},t),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mb-1"},r),a?e.createElement("p",{className:"text-xs text-gray-500 mt-1"},a):null),n&&e.createElement("div",{className:"ml-3 flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100 text-indigo-600 transition-transform duration-300 group-hover:scale-110"},e.createElement(n,{size:20,strokeWidth:2}))),e.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/0 to-purple-500/0 transition-opacity duration-300 group-hover:from-indigo-500/5 group-hover:to-purple-500/5"}))}const cie={pending:"En attente",approved:"Publie",rejected:"Rejete",disabled:"Dsactive"},Nw={waiting:"En attente",verified:"Valid",rejected:"Rejet"},kw={waiting:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},JT=(t,r=!1)=>{const a=r?[t?.updatedAt,t?.createdAt,t?.product?.updatedAt,t?.product?.createdAt]:[t?.createdAt,t?.updatedAt,t?.product?.createdAt,t?.product?.updatedAt];for(const n of a){if(!n)continue;const s=Date.parse(n);if(!Number.isNaN(s))return s}return 0},td=10,rd=10;function Vn({title:t,value:r,subtitle:a,highlight:n,icon:s,trend:o}){const l=n?"from-indigo-500 to-purple-600":"from-gray-400 to-gray-500";return e.createElement("div",{className:`group relative overflow-hidden rounded-2xl border transition-all duration-300 ${n?"border-indigo-200/60 bg-gradient-to-br from-indigo-50/50 via-white to-purple-50/30 shadow-md hover:shadow-lg":"border-gray-200/60 bg-gradient-to-br from-white to-gray-50/50 shadow-sm hover:shadow-md hover:border-indigo-200/40"}`},e.createElement("div",{className:"p-5"},e.createElement("div",{className:"flex items-start justify-between mb-3"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:`text-sm font-semibold mb-1 ${n?"text-indigo-700":"text-gray-600"}`},t),e.createElement("p",{className:`text-3xl font-bold mb-1 ${n?"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent":"text-gray-900"}`},r),a&&e.createElement("p",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-1"},o&&e.createElement(Pr,{size:12,className:o>0?"text-green-500":"text-red-500"}),a)),s&&e.createElement("div",{className:`ml-3 flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ${l} text-white shadow-sm transition-transform duration-300 group-hover:scale-110 group-hover:shadow-md`},e.createElement(s,{size:22,strokeWidth:2.5})))),n&&e.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/0 via-purple-500/0 to-pink-500/0 transition-opacity duration-300 group-hover:from-indigo-500/5 group-hover:via-purple-500/5 group-hover:to-pink-500/5"}))}function die(){const[t,r]=u.useState([]),[a,n]=u.useState("waiting"),[s,o]=u.useState(1),[l,c]=u.useState(""),[m,p]=u.useState(""),[f,g]=u.useState(null),[b,x]=u.useState(!1),[v,E]=u.useState(""),[y,w]=u.useState(null),[k,C]=u.useState(!1),[A,S]=u.useState(30),[P,T]=u.useState(null),[O,R]=u.useState(!1),[D,$]=u.useState(null),[j,K]=u.useState(!1),[H,V]=u.useState(null),[q,Y]=u.useState(!1),[z,L]=u.useState(null),[Q,B]=u.useState([]),[ae,te]=u.useState(!1),[ge,ue]=u.useState(""),[Ee,fe]=u.useState(""),[re,U]=u.useState(""),[W,me]=u.useState("person"),[ne,ee]=u.useState([]),[ve,be]=u.useState(1),[J,Ge]=u.useState(!1),[je,tt]=u.useState(""),[At,He]=u.useState(""),[Tt,Re]=u.useState(""),[et,gt]=u.useState(""),[Ze,xt]=u.useState(null),[Dt,nt]=u.useState([]),[Me,Qe]=u.useState(!1),[wt,lt]=u.useState(""),[we,vt]=u.useState("pending"),[pt,Le]=u.useState(""),[pe,Pe]=u.useState(""),[ft,ht]=u.useState(""),[Lt,nr]=u.useState(""),[er,Nt]=u.useState(""),[sr,Rt]=u.useState(""),[zt,mr]=u.useState(()=>typeof window>"u"?!0:window.innerWidth<1024),[Mr,br]=u.useState("overview"),or=cs(),[Gt,Zt]=u.useState(!1),[se,dt]=u.useState([]),[ut,It]=u.useState(!1),[de,De]=u.useState(""),[F,ie]=u.useState(""),[he,ke]=u.useState(""),[mt,G]=u.useState(""),[Z,le]=u.useState("all"),[_e,Be]=u.useState(!1),[Te,Se]=u.useState(""),[Je,qt]=u.useState(""),[lr,Nr]=u.useState("all"),[ra,Oe]=u.useState(!1),[it,gr]=u.useState(""),[wr,xa]=u.useState(!1),{showToast:fa}=ms(),{user:Ua}=u.useContext(Sr),Na=Ua?.role==="admin",nn=Ua?.role==="manager",Fr=Na,ka=Na,_a=Na||nn,Pa=Na||nn,oo=nn?"Espace gestionnaire":"Tableau de bord administrateur",Fe=nn?"Validez les preuves de paiement et contrlez la mise en ligne des annonces.":"Visualisez les indicateurs cls de la plateforme et grez la validation des paiements.",$e=u.useMemo(()=>{const I=[];return Fr&&I.push({key:"overview",label:"Statistiques"}),ka&&I.push({key:"users",label:"Utilisateurs"}),_a&&I.push({key:"payments",label:"Paiements"}),Pa&&I.push({key:"complaints",label:"Rclamations"}),I},[Fr,ka,_a,Pa]),Ke={pending:"En attente",in_review:"En cours",resolved:"Rsolue"},st={pending:"bg-orange-100 text-orange-800",in_review:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"},St=[{value:"",label:"Toutes"},{value:"pending",label:"En attente"},{value:"in_review",label:"En cours"},{value:"resolved",label:"Rsolues"}],rt=u.useMemo(()=>"https://hdmarket-backend.onrender.com/api".replace(/\/api\/?$/,""),[]),_t=u.useCallback(I=>{if(!I)return I;const ot=I.replace(/\\/g,"/");return/^https?:\/\//i.test(ot)?ot:`${rt}/${ot.replace(/^\/+/,"")}`},[rt]),Mt=u.useCallback(async()=>{x(!0);try{const{data:I}=await oe.get("/admin/stats");g(I),E("")}catch(I){E(I.response?.data?.message||I.message||"Erreur lors du chargement des statistiques.")}finally{x(!1)}},[]),hr=u.useCallback(async()=>{C(!0);try{const{data:I}=await oe.get(`/admin/analytics/sales-trends?days=${A}`);w(I)}catch(I){console.error("Error loading sales trends:",I)}finally{C(!1)}},[A]),Pt=u.useCallback(async()=>{R(!0);try{const{data:I}=await oe.get("/admin/analytics/order-heatmap");T(I)}catch(I){console.error("Error loading order heatmap:",I)}finally{R(!1)}},[]),ur=u.useCallback(async()=>{K(!0);try{const{data:I}=await oe.get("/admin/analytics/conversion");$(I)}catch(I){console.error("Error loading conversion metrics:",I)}finally{K(!1)}},[]),aa=u.useCallback(async()=>{Y(!0);try{const{data:I}=await oe.get("/admin/analytics/cohorts");V(I)}catch(I){console.error("Error loading cohort analysis:",I)}finally{Y(!1)}},[]),sn=u.useCallback(async I=>{te(!0),ue("");try{const{data:ot}=await oe.get(`/admin/analytics/orders-by-hour?hour=${I}`);B(ot.orders||[]),L(I)}catch(ot){ue(ot.response?.data?.message||"Erreur lors du chargement des commandes."),B([])}finally{te(!1)}},[]),Ta=u.useCallback(async()=>{It(!0),De("");try{const[I,ot,Vt]=await Promise.all([oe.get("/orders/admin",{params:{status:"pending",limit:30}}),oe.get("/orders/admin",{params:{status:"confirmed",limit:30}}),oe.get("/orders/admin",{params:{status:"delivering",limit:30}})]),kr=Array.isArray(I.data)?I.data:I.data?.items||[],yr=Array.isArray(ot.data)?ot.data:ot.data?.items||[],Rr=Array.isArray(Vt.data)?Vt.data:Vt.data?.items||[],Jr=[...kr,...yr,...Rr].sort((ia,wn)=>new Date(wn.createdAt).getTime()-new Date(ia.createdAt).getTime());dt(Jr)}catch(I){De(I.response?.data?.message||"Impossible de charger les commandes en attente de relance."),dt([])}finally{It(!1)}},[]),gn=u.useCallback(async I=>{if(I){ie(I);try{const{data:ot}=await oe.post(`/orders/admin/${I}/reminder`);fa(ot?.message||"Rappel envoy aux vendeurs.",{variant:"success"})}catch(ot){const Vt=ot.response?.data?.message||"Impossible d'envoyer le rappel.";fa(Vt,{variant:"error"})}finally{ie("")}}},[fa]),pr=u.useCallback(async()=>{const I=new URLSearchParams;["waiting","verified","rejected"].includes(a)&&I.append("status",a),m&&I.append("search",m);let ot="/payments/admin";const Vt=I.toString();Vt&&(ot+=`?${Vt}`);const{data:kr}=await oe.get(ot);let yr=Array.isArray(kr)?kr.map(ia=>({...ia,product:ia.product?{...ia.product,images:Array.isArray(ia.product.images)?ia.product.images.map(_t):void 0}:ia.product})):[];const Rr=yr.filter(ia=>ia.product?._id&&(!ia.product.images||ia.product.images.length===0));if(Rr.length){const ia=await Promise.all(Rr.map(async Nn=>{try{const Fl=await oe.get(`/products/${Nn.product._id}`);return{id:Nn.product._id,images:Fl.data?.images||[]}}catch{return{id:Nn.product._id,images:[]}}})),wn=new Map(ia.map(({id:Nn,images:Fl})=>[Nn,Fl.map(_t)]));yr=yr.map(Nn=>{const Fl=Nn.product?._id;if(!Fl)return Nn;const Ap=wn.get(Fl);return Ap?{...Nn,product:{...Nn.product,images:Ap}}:Nn})}a==="disabled_products"&&(yr=yr.filter(ia=>ia.product?.status==="disabled"));const Jr=a==="verified";yr=yr.slice().sort((ia,wn)=>JT(wn,Jr)-JT(ia,Jr)),r(yr),o(ia=>{const wn=Math.max(1,Math.ceil(yr.length/td));return Math.min(ia,wn)})},[a,m,_t]),na=u.useCallback(async()=>{Ge(!0),tt("");try{const I=new URLSearchParams;re&&I.append("search",re),W&&W!=="all"&&I.append("accountType",W);const ot=I.toString(),{data:Vt}=await oe.get(ot?`/admin/users?${ot}`:"/admin/users");ee(Array.isArray(Vt)?Vt:[])}catch(I){tt(I.response?.data?.message||I.message||"Erreur lors du chargement des utilisateurs.")}finally{Ge(!1)}},[W,re]),ya=u.useCallback(async()=>{if(!Pa){nt([]);return}Qe(!0),lt("");try{const I={};we&&(I.status=we);const{data:ot}=await oe.get("/admin/complaints",{params:I}),Vt=Array.isArray(ot)?ot.map(kr=>({...kr,attachments:(Array.isArray(kr.attachments)?kr.attachments:[]).map(yr=>({...yr,url:_t(yr.path||yr.url||"")}))})):[];nt(Vt)}catch(I){lt(I.response?.data?.message||I.message||"Erreur lors du chargement des rclamations.")}finally{Qe(!1)}},[Pa,we,_t]),_s=u.useCallback(async()=>{const I=he.trim();if(!I){Se("Veuillez saisir un message.");return}Be(!0),Se(""),qt("");try{const{data:ot}=await oe.post("/admin/notifications/broadcast",{message:I,title:mt.trim()||void 0,target:Z});qt(ot?.message||`Envoy  ${ot?.sent??0} utilisateur(s).`),ke(""),G(""),fa(ot?.message||"Notification envoye",{variant:"success"})}catch(ot){const Vt=ot.response?.data?.message||ot.message||"Erreur lors de l'envoi.";Se(Vt),fa(Vt,{variant:"error"})}finally{Be(!1)}},[he,mt,Z,fa]),Ne=u.useCallback(async()=>{Oe(!0),gr("");try{const{data:I}=await oe.get("/admin/users/export-phones",{params:{target:lr}}),ot=I?.users||[];if(!ot.length){gr("Aucun numro  exporter pour ce filtre.");return}const Vt=["Tlphone","Nom","Email","Type compte"],kr=ot.map(wn=>[wn.phone||"",wn.name||"",wn.email||"",wn.accountType==="shop"?"Boutique":"Particulier"]),yr=[Vt.join(";"),...kr.map(wn=>wn.map(Nn=>`"${String(Nn).replace(/"/g,'""')}"`).join(";"))].join(`
`),Rr=new Blob(["\uFEFF"+yr],{type:"text/csv;charset=utf-8"}),Jr=URL.createObjectURL(Rr),ia=document.createElement("a");ia.href=Jr,ia.download=`numeros_${lr}_${new Date().toISOString().slice(0,10)}.csv`,ia.click(),URL.revokeObjectURL(Jr),fa(`${ot.length} numro(s) export(s)`,{variant:"success"})}catch(I){const ot=I.response?.data?.message||I.message||"Erreur lors de l'export.";gr(ot),fa(ot,{variant:"error"})}finally{Oe(!1)}},[lr,fa]);u.useEffect(()=>{Fr&&(Mt(),hr(),Pt(),ur(),aa())},[Mt,hr,Pt,ur,aa,Fr]),u.useEffect(()=>{_a&&pr()},[pr,_a]),u.useEffect(()=>{_a&&o(1)},[a,m,_a]),u.useEffect(()=>{_a||(c(""),p(""))},[_a]),u.useEffect(()=>{const I=setTimeout(()=>{p(l.trim())},400);return()=>clearTimeout(I)},[l]),u.useEffect(()=>{if(!ka){ee([]),Ge(!1);return}na()},[na,ka]),u.useEffect(()=>{const I=setTimeout(()=>{U(Ee.trim())},400);return()=>clearTimeout(I)},[Ee]),u.useEffect(()=>{ka&&be(1)},[W,re,ka]),u.useEffect(()=>{ka&&be(I=>{const ot=Math.max(1,Math.ceil(ne.length/rd));return Math.min(I,ot)})},[ne.length,ka]),u.useEffect(()=>{Pa||(nt([]),Qe(!1),lt(""))},[Pa]),u.useEffect(()=>{const I=()=>{typeof window>"u"||mr(window.innerWidth<1024)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),u.useEffect(()=>{$e.length&&br(I=>$e.some(Vt=>Vt.key===I)?I:$e[0].key)},[$e]),u.useEffect(()=>{Pa&&ya()},[ya,Pa]);const Ye=u.useCallback(async(I,ot)=>{try{nr(""),Nt(""),ot==="verify"?await oe.put(`/payments/admin/${I}/verify`):await oe.put(`/payments/admin/${I}/reject`),await pr(),Na&&await Mt(),nr(ot==="verify"?"Paiement valid avec succs.":"Paiement rejet avec succs.")}catch(Vt){Nt(Vt.response?.data?.message||Vt.message||"Action impossible.")}},[Na,pr,Mt]),Ot=u.useCallback(async I=>{if(!I){Nt("Annonce introuvable.");return}try{nr(""),Nt(""),await oe.patch(`/products/${I}/disable`),await pr(),Na&&await Mt(),nr("Annonce dsactive avec succs.")}catch(ot){Nt(ot.response?.data?.message||ot.message||"Impossible de dsactiver cette annonce.")}},[Na,pr,Mt]),xr=u.useCallback(async I=>{if(!I){Nt("Annonce introuvable.");return}try{nr(""),Nt(""),await oe.patch(`/products/${I}/enable`),await pr(),Na&&await Mt(),nr("Annonce ractive avec succs.")}catch(ot){Nt(ot.response?.data?.message||ot.message||"Impossible de ractiver cette annonce.")}},[Na,pr,Mt]),sa=u.useCallback(async(I,ot)=>{if(!(!I||!ot)){Pe(""),Le(""),ht(I);try{await oe.patch(`/admin/complaints/${I}/status`,{status:ot}),Le("Statut de la rclamation mis  jour."),fa("Statut de la rclamation mis  jour.",{variant:"success"}),await ya()}catch(Vt){const kr=Vt.response?.data?.message||Vt.message||"Impossible de mettre  jour le statut.";Pe(kr),fa(kr,{variant:"error"})}finally{ht("")}}},[ya,fa]),jr=u.useCallback(async I=>{if(!I){Nt("Rfrence de transaction introuvable.");return}try{if(!navigator.clipboard)throw new Error("Clipboard API non disponible");await navigator.clipboard.writeText(I),nr("Rfrence copie dans le presse-papiers."),Nt("")}catch(ot){Nt("Impossible de copier la rfrence de transaction."),nr(""),console.error(ot)}},[]),da=u.useCallback(async(I,ot,Vt={})=>{gt(I),tt(""),He("");try{const{data:kr}=await oe.patch(`/admin/users/${I}/account-type`,{accountType:ot,...Vt});ee(yr=>!Array.isArray(yr)||!yr.length?yr:ot==="shop"&&W==="person"?yr.filter(Rr=>Rr.id!==kr.id):ot==="person"&&W==="shop"?yr.filter(Rr=>Rr.id!==kr.id):yr.map(Rr=>Rr.id===kr.id?kr:Rr)),xt(null),He(ot==="shop"?"Le compte a t converti en boutique.":"Le compte a t converti en particulier."),await Mt()}catch(kr){tt(kr.response?.data?.message||kr.message||"Impossible de mettre  jour le compte utilisateur.")}finally{gt("")}},[Mt,W]),Ps=u.useCallback(async(I,ot)=>{Re(I),tt(""),He("");try{const{data:Vt}=await oe.patch(`/admin/users/${I}/shop-verification`,{verified:ot});ee(kr=>kr.map(yr=>yr.id===Vt.id?Vt:yr)),He(ot?"La boutique est dsormais vrifie.":"Le badge a t retir.")}catch(Vt){tt(Vt.response?.data?.message||Vt.message||"Impossible de mettre  jour ltat de vrification.")}finally{Re("")}},[]),lo=u.useCallback(async(I,ot)=>{Rt(I),tt(""),He("");try{const{data:Vt}=await oe.patch(`/admin/users/${I}/role`,{role:ot});ee(kr=>kr.map(yr=>yr.id===Vt.id?Vt:yr)),He(ot==="manager"?"Utilisateur promu gestionnaire de ventes.":"Le rle gestionnaire a t retir."),Fr&&await Mt()}catch(Vt){tt(Vt.response?.data?.message||Vt.message||"Impossible de mettre  jour le rle utilisateur.")}finally{Rt("")}},[Fr,Mt]),Dn=u.useCallback(async()=>{xa(!0);try{const I=[];Fr&&I.push(Mt(),hr(),Pt(),ur(),aa()),_a&&I.push(pr()),ka&&I.push(na()),Pa&&I.push(ya()),I.push(Ta()),await Promise.all(I),fa("Donnes actualises.",{variant:"success"})}catch(I){fa(I?.message||"Erreur lors de lactualisation.",{variant:"error"})}finally{xa(!1)}},[Mt,hr,Pt,ur,aa,pr,na,ya,Ta,_a,ka,Fr,Pa,fa]);u.useEffect(()=>{if(!Lt&&!er)return;const I=setTimeout(()=>{nr(""),Nt("")},4e3);return()=>clearTimeout(I)},[Lt,er]),u.useEffect(()=>{if(!pt&&!pe)return;const I=setTimeout(()=>{Le(""),Pe("")},4e3);return()=>clearTimeout(I)},[pt,pe]),u.useEffect(()=>{Gt&&Ta()},[Gt,Ta]);const Ao=f?.users?.total||0,zs=f?.products?.total||0,On=f?.orders||{},_o=On.byStatus||{},Ni=Array.isArray(f?.demographics?.cities)?f.demographics.cities:[],el=Array.isArray(f?.demographics?.genders)?f.demographics.genders:[],Po=Array.isArray(f?.demographics?.productCities)?f.demographics.productCities:[],ce=Array.isArray(f?.demographics?.productGenders)?f.demographics.productGenders:[],qe=Math.max(1,Math.ceil(ne.length/rd)),Ue=u.useMemo(()=>{const I=(ve-1)*rd;return ne.slice(I,I+rd)},[ne,ve]),ct=ne.length?(ve-1)*rd+1:0,kt=ne.length?Math.min(ve*rd,ne.length):0,Cr=[{value:"person",label:"Particuliers"},{value:"shop",label:"Boutiques"},{value:"all",label:"Tous"}],ga=Math.max(1,Math.ceil(t.length/td)),us=u.useMemo(()=>{const I=(s-1)*td;return t.slice(I,I+td)},[t,s]),To=t.length?(s-1)*td+1:0,Ur=t.length?Math.min(s*td,t.length):0,{overdueReminderOrders:tr,regularReminderOrders:Fn}=u.useMemo(()=>{if(!se.length)return{overdueReminderOrders:[],regularReminderOrders:[]};const I=Date.now(),ot=2880*60*1e3,Vt=[],kr=[];return se.forEach(yr=>{if(yr?.status==="delivered")return;const Rr=yr?.createdAt?new Date(yr.createdAt).getTime():0;Rr&&I-Rr>=ot?Vt.push(yr):kr.push(yr)}),{overdueReminderOrders:Vt,regularReminderOrders:kr}},[se]),Ut=I=>{const ot=Array.isArray(I.items)?I.items:[],Vt=I.status==="pending"?"En attente":I.status==="confirmed"?"Confirme":I.status==="delivering"?"En cours de livraison":"Livre",kr=new Map;ot.forEach(Rr=>{const Jr=Rr.snapshot?.shopId||Rr.product?.user?._id||Rr.product?.user||"",ia=Rr.snapshot?.shopName||Rr.product?.user?.shopName||Rr.product?.user?.name||"Boutique",wn=Rr.product?.user?.phone||"",Nn=Jr?String(Jr):ia;kr.has(Nn)||kr.set(Nn,{name:ia,phone:wn})});const yr=Array.from(kr.values());return e.createElement("div",{key:I._id,className:"rounded-2xl border border-gray-100 p-4 flex flex-col gap-3"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},"Commande #",I._id.slice(-6)),e.createElement("p",{className:"text-xs text-gray-500"},I.customer?.name||"Client","  ",I.deliveryCity)),e.createElement("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-1 text-xs font-semibold text-indigo-700"},Vt)),yr.length>0&&e.createElement("div",{className:"text-xs text-gray-600 space-y-1"},yr.map(Rr=>e.createElement("p",{key:`${I._id}-${Rr.name}`},"Vendeur: ",Rr.name,Rr.phone?`  ${Rr.phone}`:""))),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>gn(I._id),disabled:F===I._id,className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-700 hover:bg-amber-100 disabled:opacity-50"},"Rappel"),e.createElement(ye,{to:`/admin/orders?orderId=${I._id}`,className:"text-xs font-semibold text-indigo-600 hover:underline"},"Voir dans commandes")))},Bs=I=>!zt||Mr===I,_c=[{value:"waiting",label:"En attente"},{value:"verified",label:"Valids"},{value:"rejected",label:"Rejets"},{value:"disabled_products",label:"Annonces dsactives"}];return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20 lg:min-h-0 lg:bg-transparent"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8 sm:px-6 lg:px-8"},e.createElement("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between pb-6 border-b border-gray-200/60"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 shadow-lg"},e.createElement(wu,{size:24,className:"text-white",strokeWidth:2.5})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent"},oo),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},Fe)))),e.createElement("div",{className:"flex flex-wrap gap-3"},e.createElement("button",{type:"button",onClick:Dn,disabled:wr,className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:border-indigo-300 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-60 disabled:pointer-events-none"},e.createElement(Cs,{size:16,className:wr?"animate-spin":"transition-transform duration-300 hover:rotate-180"}),wr?"Actualisation":"Actualiser"),e.createElement(ye,{to:"/admin/settings",className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:border-indigo-300 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},e.createElement(wu,{size:16}),"App Settings"),e.createElement(ye,{to:"/admin/products",className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition-all duration-200 hover:from-indigo-700 hover:to-purple-700 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},e.createElement(mn,{size:16}),"Produits & statistiques"))),zt&&$e.length>1&&e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},$e.map(I=>e.createElement("button",{key:I.key,type:"button",onClick:()=>br(I.key),className:`flex-shrink-0 rounded-xl px-5 py-2.5 text-sm font-semibold transition-all duration-200 ${Mr===I.key?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg scale-105":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50"}`},I.label))),Fr&&Bs("overview")&&e.createElement(e.Fragment,null,e.createElement("section",{className:"space-y-6"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(cj,{size:20,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Vue d'ensemble"),f?.generatedAt&&e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Dernire mise  jour: ",ww(f.generatedAt))))),v?e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 flex items-center gap-3"},e.createElement(Yt,{size:20,className:"text-red-600 flex-shrink-0"}),e.createElement("p",{className:"text-sm font-medium text-red-800"},v)):null,b&&!f?e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"flex flex-col items-center gap-3"},e.createElement("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Chargement des statistiques"))):e.createElement("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-4"},e.createElement(Vn,{title:"Utilisateurs inscrits",value:Qr(f?.users?.total),subtitle:`${Qr(f?.users?.newLast30Days)} nouveaux sur 30 jours`,icon:tn,trend:f?.users?.newLast30Days>0?1:-1}),e.createElement(Vn,{title:"Boutiques actives",value:Qr(f?.users?.shops),subtitle:`${Qr(f?.users?.admins)} administrateurs`,icon:Er}),e.createElement(Vn,{title:"Annonces actives",value:Qr(f?.products?.total),subtitle:`${Qr(f?.products?.approved)} publies`,icon:Ft}),e.createElement(Vn,{title:"Annonces en attente",value:Qr(f?.products?.pending),subtitle:`${Qr(f?.products?.rejected)} rejetes`,icon:Xt}),e.createElement(Vn,{title:"Paiements en attente",value:Qr(f?.payments?.waiting),subtitle:`${Qr(f?.payments?.verified)} valids`,icon:Ea}),e.createElement(Vn,{title:"Commentaires",value:Qr(f?.engagement?.comments),subtitle:`${Qr(f?.engagement?.ratings)} valuations`,icon:ca}),e.createElement(Vn,{title:"CA total",value:ss(f?.payments?.revenue),subtitle:`${ss(f?.payments?.revenueLast30Days)} sur 30 jours`,highlight:!0,icon:Pr,trend:f?.payments?.revenueLast30Days>0?1:-1}),e.createElement(Vn,{title:"Favoris enregistrs",value:Qr(f?.engagement?.favorites),subtitle:"Total cumul",icon:en}))),e.createElement("section",{className:"space-y-6"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100"},e.createElement(en,{size:20,className:"text-emerald-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Commandes globales"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Suivi des commandes et livraisons"))),e.createElement("button",{type:"button",onClick:()=>Zt(!0),className:"inline-flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-4 py-2 text-sm font-semibold text-indigo-700 transition-all duration-200 hover:bg-indigo-100 hover:border-indigo-300"},e.createElement(Xt,{size:16}),"Relances commandes")),v?e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 flex items-center gap-3"},e.createElement(Yt,{size:20,className:"text-red-600 flex-shrink-0"}),e.createElement("p",{className:"text-sm font-medium text-red-800"},v)):null,b&&!f?e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"flex flex-col items-center gap-3"},e.createElement("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Chargement des statistiques"))):e.createElement("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-4"},e.createElement(Vn,{title:"Commandes totales",value:Qr(On.total||0),subtitle:"Toutes les commandes",icon:Pn}),e.createElement(Vn,{title:"En attente",value:Qr(_o.pending?.count||0),subtitle:" valider",icon:Xt}),e.createElement(Vn,{title:"Confirmes",value:Qr(_o.confirmed?.count||0),subtitle:" prparer",icon:ar}),e.createElement(Vn,{title:"En cours de livraison",value:Qr(_o.delivering?.count||0),subtitle:"Expdies",icon:Ft}),e.createElement(Vn,{title:"Livres",value:Qr(_o.delivered?.count||0),subtitle:"Termines",icon:ar}),e.createElement(Vn,{title:"Montant total",value:ss(On.totalAmount||0),subtitle:"Volume commandes",highlight:!0,icon:Pr}),e.createElement(Vn,{title:"Acomptes encaisss",value:ss(On.paidAmount||0),subtitle:"Paiements reus",icon:Ea}),e.createElement(Vn,{title:"Reste  payer",value:ss(On.remainingAmount||0),subtitle:"Soldes ouverts",icon:Yt}))),Na&&e.createElement(e.Fragment,null,e.createElement("section",{className:"space-y-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-violet-100 to-purple-100"},e.createElement(ca,{size:20,className:"text-violet-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Notification globale"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Envoyer une notification  tous les utilisateurs ou filtrer par type de compte"))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},Te&&e.createElement("p",{className:"text-sm text-red-600 mb-3"},Te),Je&&e.createElement("p",{className:"text-sm text-emerald-600 mb-3"},Je),e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Destinataires"),e.createElement("select",{value:Z,onChange:I=>le(I.target.value),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e.createElement("option",{value:"all"},"Tous les utilisateurs"),e.createElement("option",{value:"person"},"Particuliers uniquement"),e.createElement("option",{value:"shop"},"Boutiques uniquement"))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Titre (optionnel)"),e.createElement("input",{type:"text",value:mt,onChange:I=>G(I.target.value),placeholder:"Ex : Actualits",maxLength:200,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Message *"),e.createElement("textarea",{value:he,onChange:I=>ke(I.target.value),placeholder:"Contenu de la notification...",rows:4,maxLength:2e3,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},he.length," / 2000")),e.createElement("button",{type:"button",onClick:_s,disabled:_e||!he.trim(),className:"inline-flex items-center gap-2 rounded-xl bg-violet-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed"},_e?e.createElement(e.Fragment,null,e.createElement(Cs,{size:16,className:"animate-spin"}),"Envoi en cours"):e.createElement(e.Fragment,null,e.createElement(ca,{size:16}),"Envoyer la notification"))))),e.createElement("section",{className:"space-y-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-100 to-blue-100"},e.createElement(Es,{size:20,className:"text-sky-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Export des numros de tlphone"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Tlcharger la liste des numros au format CSV (particuliers, boutiques ou tous)"))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},it&&e.createElement("p",{className:"text-sm text-red-600 mb-3"},it),e.createElement("div",{className:"flex flex-wrap items-center gap-3"},e.createElement("select",{value:lr,onChange:I=>Nr(I.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e.createElement("option",{value:"all"},"Tous les utilisateurs"),e.createElement("option",{value:"person"},"Particuliers uniquement"),e.createElement("option",{value:"shop"},"Boutiques uniquement")),e.createElement("button",{type:"button",onClick:Ne,disabled:ra,className:"inline-flex items-center gap-2 rounded-xl bg-sky-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-sky-700 disabled:opacity-50 disabled:cursor-not-allowed"},ra?e.createElement(e.Fragment,null,e.createElement(Cs,{size:16,className:"animate-spin"}),"Export"):e.createElement(e.Fragment,null,e.createElement(Pn,{size:16}),"Exporter en CSV")))))),Gt&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>Zt(!1)}),e.createElement("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-xl border border-gray-100 p-6",onClick:I=>I.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Relances commandes"),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Commandes en attente, confirmes & en cours de livraison")),e.createElement("button",{type:"button",onClick:()=>Zt(!1),className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Fermer"},"X")),ut?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des commandes"):de?e.createElement("p",{className:"text-sm text-red-600"},de):se.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune commande  relancer."):e.createElement("div",{className:"space-y-4 max-h-[60vh] overflow-auto pr-1"},e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-rose-600"},"Commandes +48h non livres"),e.createElement("span",{className:"text-xs font-semibold text-rose-600"},tr.length)),tr.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune commande en retard pour le moment."):tr.map(Ut)),e.createElement("div",{className:"space-y-3"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Autres commandes  relancer"),Fn.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune autre commande  relancer."):Fn.map(Ut))))),Fr&&e.createElement("section",{className:"space-y-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(mn,{size:20,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Analytics en Temps Rel"),e.createElement("p",{className:"text-xs text-gray-600 mt-0.5"},"Graphiques interactifs et analyses dtailles de l'activit"))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h4",{className:"text-base font-semibold text-gray-900"},"Tendances de Vente"),e.createElement("div",{className:"flex gap-2"},[7,30,90].map(I=>e.createElement("button",{key:I,type:"button",onClick:()=>{S(I),hr()},className:`px-3 py-1 rounded-lg text-xs font-semibold transition-all ${A===I?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},I,"j")))),k?e.createElement("div",{className:"h-64 flex items-center justify-center"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):y?.trends?.length?e.createElement(du,{width:"100%",height:300},e.createElement(q$,{data:y.trends},e.createElement(vd,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.createElement(Sl,{dataKey:"label",stroke:"#6b7280",fontSize:12}),e.createElement(Vo,{yAxisId:"left",stroke:"#6b7280",fontSize:12}),e.createElement(Vo,{yAxisId:"right",orientation:"right",stroke:"#10b981",fontSize:12}),e.createElement(ys,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:(I,ot)=>ot==="Revenus (FCFA)"?`${Number(I).toLocaleString("fr-FR")} FCFA`:I}),e.createElement(sc,null),e.createElement(bc,{yAxisId:"left",type:"monotone",dataKey:"orders",stroke:"#4f46e5",strokeWidth:2,name:"Commandes",dot:{r:4}}),e.createElement(bc,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Revenus (FCFA)",dot:{r:4}}))):e.createElement("p",{className:"text-sm text-gray-500 text-center py-12"},"Aucune donne disponible")),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("h4",{className:"text-base font-semibold text-gray-900 mb-4"},"Heatmap des Heures de Pointe"),O?e.createElement("div",{className:"h-64 flex items-center justify-center"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):P?.heatmap?.length?e.createElement(du,{width:"100%",height:300},e.createElement(U1,{data:P.heatmap},e.createElement(vd,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.createElement(Sl,{dataKey:"label",stroke:"#6b7280",fontSize:12}),e.createElement(Vo,{stroke:"#6b7280",fontSize:12}),e.createElement(ys,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:(I,ot)=>ot==="Commandes"?[`${I} commandes`,ot]:[I,ot]}),e.createElement(Ol,{dataKey:"count",name:"Commandes",fill:"#4f46e5",radius:[8,8,0,0],onClick:I=>{I&&typeof I.hour=="number"&&sn(I.hour)},style:{cursor:"pointer"}},P.heatmap.map((I,ot)=>{const Vt=I.count/Math.max(...P.heatmap.map(yr=>yr.count)),kr=z===I.hour;return e.createElement(Pu,{key:`cell-${ot}`,fill:kr?"rgba(79, 70, 229, 1)":`rgba(79, 70, 229, ${Math.max(.3,Vt)})`,stroke:kr?"#1e1b4b":"none",strokeWidth:kr?2:0})})))):e.createElement("p",{className:"text-sm text-gray-500 text-center py-12"},"Aucune donne disponible")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("h4",{className:"text-base font-semibold text-gray-900 mb-4"},"Mtriques de Conversion"),j?e.createElement("div",{className:"h-48 flex items-center justify-center"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):D?e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg"},e.createElement("span",{className:"text-sm text-gray-700"},"Visiteurs uniques"),e.createElement("span",{className:"text-lg font-bold text-indigo-600"},D.metrics.uniqueVisitors.toLocaleString())),e.createElement("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},e.createElement("span",{className:"text-sm text-gray-700"},"Clients uniques"),e.createElement("span",{className:"text-lg font-bold text-green-600"},D.metrics.uniqueCustomers.toLocaleString())),e.createElement("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg"},e.createElement("span",{className:"text-sm text-gray-700"},"Taux de conversion"),e.createElement("span",{className:"text-lg font-bold text-purple-600"},D.metrics.visitorToOrderRate,"%")),e.createElement("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg"},e.createElement("span",{className:"text-sm text-gray-700"},"Vues totales"),e.createElement("span",{className:"text-lg font-bold text-amber-600"},D.metrics.totalViews.toLocaleString()))):e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Aucune donne disponible")),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("h4",{className:"text-base font-semibold text-gray-900 mb-4"},"Analyse de Cohort"),q?e.createElement("div",{className:"h-48 flex items-center justify-center"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):H?.cohorts?.length?e.createElement("div",{className:"space-y-3 max-h-64 overflow-y-auto"},H.cohorts.slice(-6).map(I=>e.createElement("div",{key:I.cohort,className:"p-3 bg-gray-50 rounded-lg"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("span",{className:"text-sm font-semibold text-gray-900"},I.label),e.createElement("span",{className:"text-xs text-gray-500"},I.retentionRate,"% rtention")),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-600"},e.createElement("span",null,I.totalUsers," utilisateurs"),e.createElement("span",null,I.activeUsers," actifs"))))):e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Aucune donne disponible")))),z!==null&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>{L(null),B([])}}),e.createElement("div",{className:"relative w-full max-w-4xl max-h-[90vh] rounded-3xl bg-white shadow-xl border border-gray-100 p-6 flex flex-col",onClick:I=>I.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Commandes par heure"),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Commandes cres  ",String(z).padStart(2,"0"),":00"),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Derniers 30 jours  ",Q.length," commande",Q.length>1?"s":"")),e.createElement("button",{type:"button",onClick:()=>{L(null),B([])},className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-colors","aria-label":"Fermer"},e.createElement(jt,{size:18}))),e.createElement("div",{className:"flex-1 overflow-y-auto pr-2"},ae?e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):ge?e.createElement("p",{className:"text-sm text-red-600 text-center py-8"},ge):Q.length===0?e.createElement("p",{className:"text-sm text-gray-500 text-center py-12"},"Aucune commande trouve pour cette heure."):e.createElement("div",{className:"space-y-4"},Q.map(I=>e.createElement("div",{key:I.id,className:"rounded-xl border border-gray-200 bg-gray-50 p-4 hover:bg-gray-100 transition-colors"},e.createElement("div",{className:"flex items-start justify-between mb-3"},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement("span",{className:"text-sm font-semibold text-gray-900"},I.customer?.name||"Client inconnu"),e.createElement("span",{className:`text-xs font-semibold px-2 py-0.5 rounded ${I.status==="delivered"?"bg-green-100 text-green-800":I.status==="cancelled"?"bg-red-100 text-red-800":I.status==="delivering"?"bg-blue-100 text-blue-800":I.status==="confirmed"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`},I.status==="pending"?"En attente":I.status==="confirmed"?"Confirme":I.status==="delivering"?"En livraison":I.status==="delivered"?"Livre":"Annule")),I.customer?.email&&e.createElement("p",{className:"text-xs text-gray-600"},I.customer.email),I.customer?.phone&&e.createElement("p",{className:"text-xs text-gray-600"},I.customer.phone)),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-sm font-bold text-gray-900"},ss(I.totalAmount||0)),e.createElement("p",{className:"text-xs text-gray-500"},ww(I.createdAt)))),I.items?.length>0&&e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},e.createElement("p",{className:"text-xs font-semibold text-gray-700 mb-2"},"Articles:"),e.createElement("div",{className:"space-y-1"},I.items.slice(0,3).map((ot,Vt)=>e.createElement("div",{key:Vt,className:"flex items-center justify-between text-xs"},e.createElement("span",{className:"text-gray-700"},ot.product?.title||ot.snapshot?.title||"Produit","  ",ot.quantity||1),ot.product?.price&&e.createElement("span",{className:"text-gray-600"},ss(ot.product.price*(ot.quantity||1))))),I.items.length>3&&e.createElement("p",{className:"text-xs text-gray-500"},"+",I.items.length-3," autre",I.items.length-3>1?"s":""))),I.deliveryAddress&&e.createElement("div",{className:"mt-2 pt-2 border-t border-gray-200"},e.createElement("p",{className:"text-xs text-gray-600"},e.createElement(Wr,{size:12,className:"inline mr-1"}),I.deliveryAddress,I.deliveryCity&&`, ${I.deliveryCity}`)),I.deliveryCode&&e.createElement("div",{className:"mt-2"},e.createElement("span",{className:"text-xs font-semibold text-indigo-600"},"Code: ",I.deliveryCode)))))))),(Ni.length>0||el.length>0||Po.length>0||ce.length>0)&&e.createElement("section",{className:"grid grid-cols-1 gap-4 2xl:grid-cols-2"},Ni.length>0&&e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Rpartition des utilisateurs par ville"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Principales localisations des membres enregistrs."),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-left text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Ville"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Utilisateurs"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Part"))),e.createElement("tbody",null,Ni.slice(0,8).map(I=>e.createElement("tr",{key:I.city,className:"border-b last:border-b-0"},e.createElement("td",{className:"p-2 text-gray-700"},I.city),e.createElement("td",{className:"p-2 text-gray-900 text-right"},Qr(I.count)),e.createElement("td",{className:"p-2 text-gray-500 text-right"},z0(I.count,Ao)))))))),el.length>0&&e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Rpartition des utilisateurs par genre"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Dclaration lors de linscription."),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-left text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Genre"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Utilisateurs"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Part"))),e.createElement("tbody",null,el.map(I=>e.createElement("tr",{key:I.gender,className:"border-b last:border-b-0"},e.createElement("td",{className:"p-2 text-gray-700"},I.gender),e.createElement("td",{className:"p-2 text-gray-900 text-right"},Qr(I.count)),e.createElement("td",{className:"p-2 text-gray-500 text-right"},z0(I.count,Ao)))))))),Po.length>0&&e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Annonces par ville"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Localisation dclare des vendeurs au moment de la publication."),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-left text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Ville"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Annonces"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Part"))),e.createElement("tbody",null,Po.slice(0,8).map(I=>e.createElement("tr",{key:I.city,className:"border-b last:border-b-0"},e.createElement("td",{className:"p-2 text-gray-700"},I.city),e.createElement("td",{className:"p-2 text-gray-900 text-right"},Qr(I.count)),e.createElement("td",{className:"p-2 text-gray-500 text-right"},z0(I.count,zs)))))))),ce.length>0&&e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Annonces par genre"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Rpartition selon le genre des vendeurs."),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-left text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Genre"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Annonces"),e.createElement("th",{className:"p-2 font-medium text-gray-600 text-right"},"Part"))),e.createElement("tbody",null,ce.map(I=>e.createElement("tr",{key:I.gender,className:"border-b last:border-b-0"},e.createElement("td",{className:"p-2 text-gray-700"},I.gender),e.createElement("td",{className:"p-2 text-gray-900 text-right"},Qr(I.count)),e.createElement("td",{className:"p-2 text-gray-500 text-right"},z0(I.count,zs))))))))),e.createElement("section",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2"},e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Tendances des 6 derniers mois"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Nouveaux utilisateurs, annonces cres et revenus vrifis par mois."),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-left text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Mois"),e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Utilisateurs"),e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Annonces"),e.createElement("th",{className:"p-2 font-medium text-gray-600"},"Revenus"))),e.createElement("tbody",null,f?.monthly?.length?f.monthly.map(I=>e.createElement("tr",{key:I.month,className:"border-t"},e.createElement("td",{className:"p-2 capitalize"},iie(I.month)),e.createElement("td",{className:"p-2"},Qr(I.newUsers)),e.createElement("td",{className:"p-2"},Qr(I.newProducts)),e.createElement("td",{className:"p-2"},ss(I.revenue)))):e.createElement("tr",null,e.createElement("td",{className:"p-2 text-sm text-gray-500",colSpan:4},"Aucune donne disponible pour le moment.")))))),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm space-y-4"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Catgories les plus actives"),e.createElement("p",{className:"text-xs text-gray-500"},"Top 5 des catgories par nombre d'annonces approuves.")),f?.topCategories?.length?e.createElement("ul",{className:"space-y-3"},f.topCategories.map(I=>e.createElement("li",{key:I.category,className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-gray-900"},I.category),e.createElement("p",{className:"text-xs text-gray-500"},"Prix moyen: ",ss(I.avgPrice))),e.createElement("span",{className:"text-sm font-semibold text-indigo-600"},Qr(I.listings)," annonces")))):e.createElement("p",{className:"text-sm text-gray-500"},"Pas encore assez de donnes."))),e.createElement("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3"},e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h3",{className:"text-base font-semibold text-gray-900"},"Nouveaux utilisateurs"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"5 derniers inscrits sur la plateforme."),e.createElement("ul",{className:"space-y-3"},f?.recent?.users?.length?f.recent.users.map(I=>e.createElement("li",{key:I.id,className:"border-b pb-3 last:border-b-0 last:pb-0"},e.createElement("p",{className:"text-sm font-medium text-gray-900"},I.name),e.createElement("p",{className:"text-xs text-gray-500"},I.email),e.createElement("p",{className:"text-xs text-gray-400"},I.role==="admin"?"Admin  ":"",I.accountType==="shop"?"Boutique":"Particulier","  ",Km(I.createdAt)))):e.createElement("li",{className:"text-sm text-gray-500"},"Aucun utilisateur rcent."))),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("h3",{className:"text-base font-semibold text-gray-900"},"Dernires annonces"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"5 annonces rcemment cres."),e.createElement("ul",{className:"space-y-3"},f?.recent?.products?.length?f.recent.products.map(I=>e.createElement("li",{key:I.id,className:"border-b pb-3 last:border-b-0 last:pb-0"},e.createElement("p",{className:"text-sm font-medium text-gray-900"},I.title),e.createElement("p",{className:"text-xs text-gray-500"},ss(I.price),"  ",I.owner||"Auteur inconnu"),e.createElement("p",{className:"text-xs text-gray-400"},cie[I.status]||I.status,"  ",Km(I.createdAt)))):e.createElement("li",{className:"text-sm text-gray-500"},"Aucune annonce rcente."))),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between gap-2 mb-3"},e.createElement("div",null,e.createElement("h3",{className:"text-base font-semibold text-gray-900"},"Paiements rcents"),e.createElement("p",{className:"text-xs text-gray-500"},"5 derniers paiements reus.")),e.createElement(ye,{to:"/admin/payments",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700"},"Voir tous ")),e.createElement("ul",{className:"space-y-3"},f?.recent?.payments?.length?f.recent.payments.map(I=>e.createElement("li",{key:I.id,className:"border-b pb-3 last:border-b-0 last:pb-0"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-sm font-medium text-gray-900"},I.payerName),e.createElement("span",{className:`text-xs font-semibold px-2 py-1 rounded ${kw[I.status]||"bg-gray-100 text-gray-600"}`},Nw[I.status]||I.status)),e.createElement("p",{className:"text-xs text-gray-500"},ss(I.amount),"  ",I.operator),e.createElement("p",{className:"text-xs text-gray-400"},I.product||"Produit inconnu","  ",Km(I.createdAt)),I.status==="verified"&&I.validator&&e.createElement("p",{className:"text-xs text-green-600 font-medium"},"Valid par ",I.validator))):e.createElement("li",{className:"text-sm text-gray-500"},"Aucun paiement rcent."))))),ka&&Bs("users")&&e.createElement("section",{className:"rounded-lg border bg-white p-4 shadow-sm space-y-4"},e.createElement("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-end lg:justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Gestion des utilisateurs"),e.createElement("p",{className:"text-xs text-gray-500"},"Recherchez un compte particulier et convertissez-le en boutique si ncessaire."),e.createElement(ye,{to:"/admin/users",className:"mt-2 inline-flex items-center text-xs font-medium text-indigo-600 hover:underline"},"Ouvrir la gestion des suspensions ")),e.createElement("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3"},e.createElement(ml,{label:"Utilisateurs",value:Qr(f?.users?.total),helper:`Boutiques : ${Qr(f?.users?.shops)}`}),e.createElement(ml,{label:"Utilisateurs bloqus",value:Qr(f?.users?.blocked||0),helper:" surveiller"}),e.createElement(ml,{label:"Nouveaux (30j)",value:Qr(f?.users?.newLast30Days),helper:"Indicateur 30 jours"})),e.createElement("form",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",onSubmit:I=>{I.preventDefault(),xt(null),tt(""),He("")}},e.createElement("input",{type:"search",className:"w-full rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:w-60",placeholder:"Nom, email ou tlphone",value:Ee,onChange:I=>fe(I.target.value)}),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center"},zt?e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},Cr.map(I=>e.createElement("button",{key:I.value,type:"button",onClick:()=>{xt(null),tt(""),He(""),me(I.value)},className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${W===I.value?"bg-indigo-600 text-white shadow":"bg-white text-gray-600 border border-gray-200"}`},I.label))):e.createElement("select",{className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",value:W,onChange:I=>{xt(null),tt(""),He(""),me(I.target.value)}},Cr.map(I=>e.createElement("option",{key:I.value,value:I.value},I.label))),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"submit",className:"rounded bg-indigo-600 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-60",disabled:J},"Rechercher"),e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>{xt(null),tt(""),He(""),fe(""),U(""),me("person")}},"Rinitialiser"))))),je?e.createElement("p",{className:"text-sm text-red-600"},je):null,At?e.createElement("p",{className:"text-sm text-green-600"},At):null,zt?e.createElement("div",{className:"space-y-4"},J?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des utilisateurs"):Ue.length?Ue.map(I=>{const ot=I.role==="manager",Vt=I.role==="admin",kr=Ua?.id===I.id,yr=ot?"user":"manager";return e.createElement("div",{key:I.id,className:"space-y-3 rounded-2xl border border-gray-100 p-4 shadow-sm"},e.createElement("div",{className:"flex items-start justify-between gap-3"},e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900"},I.name),e.createElement("p",{className:"break-all text-xs text-gray-500"},I.email),e.createElement("p",{className:"text-xs text-gray-400"},"Inscrit le ",Km(I.createdAt))),e.createElement("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-[11px] font-semibold text-gray-700"},I.role)),e.createElement("div",{className:"space-y-1 text-xs text-gray-600"},e.createElement("p",null,"Tlphone : ",I.phone||""),I.accountType==="shop"?e.createElement("div",{className:"space-y-1"},e.createElement("span",{className:"inline-flex items-center rounded bg-green-100 px-2 py-1 text-[11px] font-semibold text-green-700"},"Boutique"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(_n,{verified:!!I.shopVerified}),I.shopName?e.createElement("span",{className:"truncate"},I.shopName):null)):e.createElement("span",{className:"inline-flex items-center rounded bg-gray-100 px-2 py-1 text-[11px] font-semibold text-gray-700"},"Particulier")),e.createElement("div",{className:"space-y-3"},I.accountType==="shop"?e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("button",{type:"button",className:"w-full rounded border border-gray-300 px-3 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-60",onClick:()=>da(I.id,"person"),disabled:et===I.id},"Convertir en particulier"),e.createElement("button",{type:"button",className:`w-full rounded px-3 py-2 text-xs font-medium text-white ${I.shopVerified?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"} disabled:opacity-60`,onClick:()=>Ps(I.id,!I.shopVerified),disabled:Tt===I.id},I.shopVerified?"Retirer le badge":"Vrifier la boutique")):Ze?.id===I.id?e.createElement("div",{className:"space-y-2 rounded border border-gray-200 bg-gray-50 p-3 text-xs"},e.createElement("p",{className:"font-semibold text-gray-700"},"Conversion en boutique"),e.createElement("label",{className:"space-y-1 text-gray-600"},e.createElement("span",null,"Nom de la boutique"),e.createElement("input",{type:"text",className:"w-full rounded border px-2 py-1 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",value:Ze.shopName,onChange:Rr=>xt(Jr=>Jr&&Jr.id===I.id?{...Jr,shopName:Rr.target.value}:Jr),disabled:et===I.id})),e.createElement("label",{className:"space-y-1 text-gray-600"},e.createElement("span",null,"Adresse de la boutique"),e.createElement("input",{type:"text",className:"w-full rounded border px-2 py-1 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",value:Ze.shopAddress,onChange:Rr=>xt(Jr=>Jr&&Jr.id===I.id?{...Jr,shopAddress:Rr.target.value}:Jr),disabled:et===I.id})),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",className:"flex-1 rounded bg-indigo-600 px-3 py-2 text-xs font-semibold text-white hover:bg-indigo-700 disabled:opacity-60",disabled:et===I.id,onClick:()=>{if(!Ze?.shopName?.trim()||!Ze?.shopAddress?.trim()){tt("Veuillez renseigner le nom et l'adresse de la boutique."),He("");return}da(I.id,"shop",{shopName:Ze.shopName.trim(),shopAddress:Ze.shopAddress.trim()})}},"Valider"),e.createElement("button",{type:"button",className:"flex-1 rounded border border-gray-300 px-3 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-60",onClick:()=>xt(null),disabled:et===I.id},"Annuler"))):e.createElement("button",{type:"button",className:"w-full rounded bg-indigo-50 px-3 py-2 text-xs font-semibold text-indigo-700 hover:bg-indigo-100",onClick:()=>{xt({id:I.id,shopName:I.shopName||"",shopAddress:I.shopAddress||""}),tt(""),He("")}},"Convertir en boutique"),e.createElement("div",{className:"border-t border-gray-100 pt-3"},Vt?e.createElement("p",{className:"text-xs text-gray-500"},"Rle administrateur non modifiable."):e.createElement("div",{className:"space-y-2"},e.createElement("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500"},"Rle actuel:"," ",ot?"Gestionnaire de ventes":"Utilisateur"),e.createElement("button",{type:"button",className:`w-full rounded px-3 py-2 text-xs font-semibold ${ot?"border border-amber-400 text-amber-700 hover:bg-amber-50":"bg-amber-500 text-white hover:bg-amber-600"} disabled:opacity-60`,onClick:()=>lo(I.id,yr),disabled:sr===I.id||kr},sr===I.id?"Mise  jour...":ot?"Retirer le rle gestionnaire":"Nommer gestionnaire de ventes"),kr?e.createElement("p",{className:"text-[11px] text-gray-500"},"Vous ne pouvez pas modifier votre propre rle."):null)),e.createElement(ye,{to:`/admin/users/${I.id}/stats`,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800"},"Voir ses statistiques ")))}):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun utilisateur ne correspond  la recherche actuelle.")):e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border text-sm"},e.createElement("thead",{className:"bg-gray-100"},e.createElement("tr",null,e.createElement("th",{className:"p-2 border text-left"},"Nom"),e.createElement("th",{className:"p-2 border text-left"},"Email"),e.createElement("th",{className:"p-2 border text-left"},"Statut"),e.createElement("th",{className:"p-2 border text-left"},"Tlphone"),e.createElement("th",{className:"p-2 border text-left"},"Inscription"),e.createElement("th",{className:"p-2 border text-left"},"Action"))),e.createElement("tbody",null,J?e.createElement("tr",null,e.createElement("td",{className:"p-3 text-sm text-gray-500",colSpan:6},"Chargement des utilisateurs")):Ue.length?Ue.map(I=>{const ot=I.role==="manager",Vt=I.role==="admin",kr=Ua?.id===I.id,yr=ot?"user":"manager";return e.createElement("tr",{key:I.id,className:"align-top"},e.createElement("td",{className:"p-2 border"},e.createElement("p",{className:"font-medium text-gray-900"},I.name),e.createElement("p",{className:"text-xs text-gray-500"},"Rle: ",I.role)),e.createElement("td",{className:"p-2 border"},I.email),e.createElement("td",{className:"p-2 border"},I.accountType==="shop"?e.createElement("div",{className:"space-y-2"},e.createElement("span",{className:"inline-flex items-center rounded bg-green-100 px-2 py-1 text-xs font-semibold text-green-700"},"Boutique"),e.createElement(_n,{verified:!!I.shopVerified}),I.shopName?e.createElement("p",{className:"text-xs text-gray-600 truncate"},I.shopName):null):e.createElement("span",{className:"inline-flex items-center rounded bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-700"},"Particulier")),e.createElement("td",{className:"p-2 border"},I.phone||""),e.createElement("td",{className:"p-2 border"},Km(I.createdAt)),e.createElement("td",{className:"p-2 border"},e.createElement("div",{className:"space-y-3"},I.accountType==="shop"?e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 text-xs font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-60",onClick:()=>da(I.id,"person"),disabled:et===I.id},"Convertir en particulier"),e.createElement("button",{type:"button",className:`rounded px-3 py-1 text-xs font-medium text-white ${I.shopVerified?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"} disabled:opacity-60`,onClick:()=>Ps(I.id,!I.shopVerified),disabled:Tt===I.id},I.shopVerified?"Retirer le badge":"Vrifier la boutique")):Ze?.id===I.id?e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex flex-col gap-1 text-xs font-medium text-gray-600"},"Nom de la boutique",e.createElement("input",{className:"w-full rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",value:Ze.shopName,onChange:Rr=>xt(Jr=>Jr&&Jr.id===I.id?{...Jr,shopName:Rr.target.value}:Jr),disabled:et===I.id})),e.createElement("label",{className:"flex flex-col gap-1 text-xs font-medium text-gray-600"},"Adresse de la boutique",e.createElement("textarea",{className:"w-full rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",rows:2,value:Ze.shopAddress,onChange:Rr=>xt(Jr=>Jr&&Jr.id===I.id?{...Jr,shopAddress:Rr.target.value}:Jr),disabled:et===I.id})),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",className:"flex-1 rounded bg-indigo-600 px-3 py-2 text-xs font-semibold text-white hover:bg-indigo-700 disabled:opacity-60",disabled:et===I.id,onClick:()=>{if(!Ze?.shopName?.trim()||!Ze?.shopAddress?.trim()){tt("Veuillez renseigner le nom et l'adresse de la boutique."),He("");return}da(I.id,"shop",{shopName:Ze.shopName.trim(),shopAddress:Ze.shopAddress.trim()})}},"Valider"),e.createElement("button",{type:"button",className:"flex-1 rounded border border-gray-300 px-3 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-60",onClick:()=>xt(null),disabled:et===I.id},"Annuler"))):e.createElement("button",{type:"button",className:"rounded bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-100",onClick:()=>{xt({id:I.id,shopName:I.shopName||"",shopAddress:I.shopAddress||""}),tt(""),He("")}},"Convertir en boutique"),e.createElement("div",{className:"border-t border-gray-100 pt-3"},Vt?e.createElement("p",{className:"text-xs text-gray-500"},"Rle administrateur non modifiable."):e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500"},"Rle actuel:"," ",ot?"Gestionnaire de ventes":"Utilisateur"),e.createElement("button",{type:"button",className:`rounded px-3 py-1 text-xs font-semibold ${ot?"border border-amber-400 text-amber-700 hover:bg-amber-50":"bg-amber-500 text-white hover:bg-amber-600"} disabled:opacity-60`,onClick:()=>lo(I.id,yr),disabled:sr===I.id||kr},sr===I.id?"Mise  jour...":ot?"Retirer le rle gestionnaire":"Nommer gestionnaire de ventes"),kr?e.createElement("p",{className:"text-[11px] text-gray-500"},"Vous ne pouvez pas modifier votre propre rle."):null)),e.createElement(ye,{to:`/admin/users/${I.id}/stats`,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800"},"Voir ses statistiques "))))}):e.createElement("tr",null,e.createElement("td",{className:"p-3 text-sm text-gray-500",colSpan:6},"Aucun utilisateur ne correspond  la recherche actuelle."))))),!J&&e.createElement("div",{className:"flex flex-col gap-3 border-t border-gray-100 pt-4 text-xs text-gray-600 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null,ne.length?`Affichage ${ct}-${kt} sur ${ne.length} utilisateurs`:"Aucun utilisateur pour ces critres."),ne.length?e.createElement("div",{className:"flex items-center gap-2 text-sm"},e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>be(I=>Math.max(1,I-1)),disabled:ve<=1},"Prcdent"),e.createElement("span",{className:"font-medium text-gray-700"},"Page ",ve," / ",qe),e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>be(I=>Math.min(qe,I+1)),disabled:ve>=qe},"Suivant")):null)),_a&&Bs("payments")&&e.createElement("section",{className:"rounded-lg border bg-white p-4 shadow-sm space-y-4"},e.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Vrification des paiements"),e.createElement("p",{className:"text-xs text-gray-500"},"Validez ou rejetez les preuves de paiement envoyes par les vendeurs.")),e.createElement("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3"},e.createElement(ml,{label:"En attente",value:Qr(f?.payments?.waiting),helper:"Paiements non vrifis"}),e.createElement(ml,{label:"Valids",value:Qr(f?.payments?.verified),helper:"Paiements accepts"}),e.createElement(ml,{label:"CA valid",value:ss(f?.payments?.revenue),helper:"Total confirm"})),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3"},zt?e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},_c.map(I=>e.createElement("button",{key:I.value,type:"button",onClick:()=>n(I.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${a===I.value?"bg-indigo-600 text-white shadow":"bg-white text-gray-600 border border-gray-200"}`},I.label))):e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{className:"text-sm text-gray-600",htmlFor:"admin-payments-filter"},"Statut:"),e.createElement("select",{id:"admin-payments-filter",value:a,onChange:I=>n(I.target.value),className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},_c.map(I=>e.createElement("option",{key:I.value,value:I.value},I.label)))),e.createElement("div",{className:"w-full sm:w-64"},e.createElement("input",{type:"search",value:l,onChange:I=>c(I.target.value),placeholder:"Rechercher un produit",className:"w-full rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})))),Lt?e.createElement("p",{className:"text-sm text-green-600"},Lt):null,er?e.createElement("p",{className:"text-sm text-red-600"},er):null,zt?e.createElement("div",{className:"space-y-4"},us.map(I=>e.createElement("div",{key:I._id,className:"rounded-2xl border border-gray-100 p-4 shadow-sm space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},I.product?.title||"Annonce"),e.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-[11px] font-semibold ${kw[I.status]||"bg-gray-100 text-gray-600"}`},Nw[I.status]||I.status)),e.createElement("div",{className:"flex flex-wrap items-center gap-2 text-xs text-gray-500"},e.createElement("span",null,"Payeur : ",e.createElement("strong",{className:"text-gray-800"},I.payerName)),e.createElement("span",{className:"hidden xs:inline-block text-gray-400"},""),e.createElement("span",null,"Oprateur : ",e.createElement("strong",{className:"text-gray-800"},I.operator)),e.createElement("span",{className:"hidden xs:inline-block text-gray-400"},""),e.createElement("span",null,"Montant : ",e.createElement("strong",{className:"text-gray-800"},ss(I.amount)))),I.product?.images?.length?e.createElement("div",{className:"flex items-center gap-2 overflow-x-auto rounded-xl border border-gray-100 p-2"},I.product.images.slice(0,4).map((ot,Vt)=>e.createElement("a",{key:ot||Vt,href:ot,target:"_blank",rel:"noopener noreferrer",className:"shrink-0"},e.createElement("img",{src:ot,alt:`${I.product?.title||"Produit"} ${Vt+1}`,className:"h-16 w-20 rounded-lg border object-cover shadow-sm",loading:"lazy"}))),I.product.images.length>4&&e.createElement("span",{className:"text-xs text-gray-600 whitespace-nowrap"},"+",I.product.images.length-4," autres")):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune image pour cette annonce."),e.createElement("div",{className:"flex flex-wrap gap-2"},I.product?._id&&e.createElement(ye,{to:Dr(I.product),...or,className:"flex-1 min-w-[140px] rounded-lg border border-indigo-200 px-3 py-2 text-center text-xs font-semibold text-indigo-700 hover:bg-indigo-50"},"Voir l'annonce"),I.transactionNumber&&e.createElement("button",{type:"button",className:"flex-1 min-w-[140px] rounded-lg border border-gray-200 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-50",onClick:()=>jr(I.transactionNumber)},"Copier la rfrence")),e.createElement("div",{className:"flex flex-wrap gap-2"},I.product?.status!=="disabled"&&I.product?._id&&e.createElement("button",{type:"button",className:"flex-1 min-w-[140px] rounded-lg border border-red-300 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-50",onClick:()=>Ot(I.product._id)},"Dsactiver l'annonce"),I.product?.status==="disabled"&&I.product?._id&&e.createElement("button",{type:"button",className:"flex-1 min-w-[140px] rounded-lg border border-green-300 px-3 py-2 text-xs font-semibold text-green-700 hover:bg-green-50",onClick:()=>xr(I.product._id)},"Activer l'annonce")),e.createElement("div",{className:"flex flex-wrap gap-2"},I.status==="waiting"?e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>Ye(I._id,"verify"),className:"flex-1 min-w-[140px] rounded-lg bg-green-600 px-3 py-2 text-xs font-semibold text-white hover:bg-green-700"},"Valider"),e.createElement("button",{onClick:()=>Ye(I._id,"reject"),className:"flex-1 min-w-[140px] rounded-lg bg-red-600 px-3 py-2 text-xs font-semibold text-white hover:bg-red-700"},"Refuser")):e.createElement("span",{className:"text-xs text-gray-500"},"Action non disponible pour ce paiement.")))),!t.length&&e.createElement("p",{className:"text-sm text-gray-500"},"Aucun paiement ne correspond  la recherche actuelle.")):e.createElement(e.Fragment,null,e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border text-sm"},e.createElement("thead",{className:"bg-gray-100"},e.createElement("tr",null,e.createElement("th",{className:"p-2 border"},"Image"),e.createElement("th",{className:"p-2 border"},"Annonce"),e.createElement("th",{className:"p-2 border"},"Prix"),e.createElement("th",{className:"p-2 border"},"Payeur"),e.createElement("th",{className:"p-2 border"},"Oprateur"),e.createElement("th",{className:"p-2 border"},"Montant"),e.createElement("th",{className:"p-2 border"},"Statut"),e.createElement("th",{className:"p-2 border"},"Action"))),e.createElement("tbody",null,us.map(I=>e.createElement("tr",{key:I._id},e.createElement("td",{className:"p-2 border align-top"},I.product?.images?.length?e.createElement("div",{className:"flex items-center gap-2 max-w-[220px] overflow-x-auto"},I.product.images.slice(0,3).map((ot,Vt)=>e.createElement("a",{key:ot||Vt,href:ot,target:"_blank",rel:"noopener noreferrer",className:"shrink-0",title:"Ouvrir l'image dans un nouvel onglet"},e.createElement("img",{src:ot,alt:`${I.product?.title||"Produit"} ${Vt+1}`,className:"h-16 w-20 object-cover rounded border shadow-sm",loading:"lazy"}))),I.product.images.length>3&&e.createElement("span",{className:"text-xs text-gray-600 whitespace-nowrap"},"+",I.product.images.length-3," autres")):e.createElement("span",{className:"text-xs text-gray-500"},"Aucune image")),e.createElement("td",{className:"p-2 border"},I.product?.title),e.createElement("td",{className:"p-2 border"},ss(I.product?.price)),e.createElement("td",{className:"p-2 border"},I.payerName),e.createElement("td",{className:"p-2 border"},I.operator),e.createElement("td",{className:"p-2 border"},ss(I.amount)),e.createElement("td",{className:"p-2 border"},e.createElement("span",{className:`inline-block rounded px-2 py-1 text-xs font-semibold ${kw[I.status]||"bg-gray-100 text-gray-600"}`},Nw[I.status]||I.status)),e.createElement("td",{className:"p-2 border"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap"},I.product?._id?e.createElement(ye,{to:Dr(I.product),...or,className:"rounded border border-indigo-200 px-3 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-50"},"Voir l'annonce"):null,I.transactionNumber?e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-50",onClick:()=>jr(I.transactionNumber)},"Copier la rfrence"):null,I.product?.status!=="disabled"&&I.product?._id?e.createElement("button",{type:"button",className:"rounded border border-red-300 px-3 py-1 text-xs font-semibold text-red-700 hover:bg-red-50",onClick:()=>Ot(I.product._id)},"Dsactiver"):null,I.product?.status==="disabled"&&I.product?._id?e.createElement("button",{type:"button",className:"rounded border border-green-300 px-3 py-1 text-xs font-semibold text-green-700 hover:bg-green-50",onClick:()=>xr(I.product._id)},"Activer"):null,I.status==="waiting"?e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>Ye(I._id,"verify"),className:"rounded bg-green-600 px-3 py-1 text-xs font-semibold text-white hover:bg-green-700"},"Valider"),e.createElement("button",{onClick:()=>Ye(I._id,"reject"),className:"rounded bg-red-600 px-3 py-1 text-xs font-semibold text-white hover:bg-red-700"},"Refuser")):e.createElement("span",{className:"self-center text-xs text-gray-500"},"Action non disponible"))))),!t.length&&e.createElement("tr",null,e.createElement("td",{className:"p-4 text-sm text-gray-500",colSpan:8},"Aucun paiement  afficher pour ce filtre."))))),e.createElement("div",{className:"flex flex-col gap-3 border-t border-gray-100 pt-4 text-xs text-gray-600 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null,t.length?`Affichage ${To}-${Ur} sur ${t.length} paiements`:"Aucun paiement  afficher."),t.length?e.createElement("div",{className:"flex items-center gap-2 text-sm"},e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>o(I=>Math.max(1,I-1)),disabled:s<=1},"Prcdent"),e.createElement("span",{className:"font-medium text-gray-700"},"Page ",s," / ",ga),e.createElement("button",{type:"button",className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>o(I=>Math.min(ga,I+1)),disabled:s>=ga},"Suivant")):null))),Pa&&Bs("complaints")&&e.createElement("section",{className:"rounded-lg border bg-white p-4 shadow-sm space-y-4"},e.createElement("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Rclamations"),e.createElement("p",{className:"text-xs text-gray-500"},"Consultez les plaintes dposes par les utilisateurs et attribuez un statut adapt.")),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3"},e.createElement("select",{value:we,onChange:I=>vt(I.target.value),className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},St.map(I=>e.createElement("option",{key:I.value,value:I.value},I.label))),e.createElement("button",{type:"button",onClick:ya,className:"rounded border border-gray-300 px-3 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-60"},"Actualiser"))),e.createElement("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3"},e.createElement(ml,{label:"Total",value:Qr(Dt.length),helper:"Rclamations enregistres"}),e.createElement(ml,{label:"En attente",value:Qr(Dt.filter(I=>I.status==="pending").length),helper:"Nouveau et non trait"}),e.createElement(ml,{label:"Rsolues",value:Qr(Dt.filter(I=>I.status==="resolved").length),helper:"Confirmes"})),(pt||pe)&&e.createElement("div",{className:`rounded-lg px-3 py-2 text-sm ${pe?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`},pe||pt),Me?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des rclamations"):wt?e.createElement("p",{className:"text-sm text-red-600"},wt):e.createElement("ul",{className:"space-y-4"},Dt.length?Dt.map(I=>e.createElement("li",{key:I._id,className:"space-y-3 rounded-2xl border border-gray-100 p-4"},e.createElement("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between"},e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},I.subject||"Sans objet"),e.createElement("p",{className:"text-xs text-gray-500 flex flex-wrap gap-2"},e.createElement("span",null,I.user?.name||"Utilisateur anonyme"),e.createElement("span",{className:"text-[11px] text-gray-400"},I.user?.email||"Email introuvable"),e.createElement("span",{className:"text-[11px] text-gray-400"},I.user?.phone||"Tlphone non renseign")),e.createElement("p",{className:"text-xs text-gray-400"},ww(I.createdAt))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:`rounded-full px-3 py-1 text-[11px] font-semibold ${st[I.status]||"bg-gray-100 text-gray-600"}`},Ke[I.status]||I.status),e.createElement("select",{value:I.status,onChange:ot=>sa(I._id,ot.target.value),disabled:ft===I._id,className:"rounded border border-gray-200 px-3 py-1 text-xs text-gray-600 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},Object.keys(Ke).map(ot=>e.createElement("option",{key:ot,value:ot},Ke[ot]))))),e.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-line break-words"},I.message),I.attachments?.length?e.createElement("div",{className:"flex flex-wrap gap-2"},I.attachments.filter(ot=>ot.url).map((ot,Vt)=>e.createElement("a",{key:`${ot.filename}-${Vt}`,href:ot.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-xs font-medium text-gray-600 hover:border-rose-200"},e.createElement(pd,{className:"w-3 h-3"}),ot.originalName||ot.filename))):null,I.adminNote?e.createElement("p",{className:"text-xs text-gray-500"},e.createElement("span",{className:"font-semibold text-gray-700"},"Note admin :")," ",I.adminNote):null)):e.createElement("li",{className:"text-sm text-gray-500"},"Aucune rclamation pour ce filtre.")))))}const ad=t=>Number(t||0).toLocaleString("fr-FR"),Lo=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,ZT=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",eO={waiting:"En attente",verified:"Valid",rejected:"Rejet"},tO={waiting:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},Bi=12,rO=t=>{const r=[t?.updatedAt,t?.createdAt,t?.product?.updatedAt,t?.product?.createdAt];for(const a of r){if(!a)continue;const n=Date.parse(a);if(!Number.isNaN(n))return n}return 0},aO=[{value:"waiting",label:"En attente"},{value:"verified",label:"Valids"},{value:"rejected",label:"Rejets"},{value:"disabled_products",label:"Annonces dsactives"}];function mie(){const{user:t}=u.useContext(Sr),r=t?.role==="manager",[a,n]=u.useState(null),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState([]),[f,g]=u.useState(!1),[b,x]=u.useState(""),[v,E]=u.useState("waiting"),[y,w]=u.useState(""),[k,C]=u.useState(""),[A,S]=u.useState(""),[P,T]=u.useState(""),[O,R]=u.useState(1),[D,$]=u.useState(""),[j,K]=u.useState(""),[H,V]=u.useState(!1),q=cs(),Y=rs(1023),z=u.useMemo(()=>"https://hdmarket-backend.onrender.com/api".replace(/\/api\/?$/,""),[]),L=u.useCallback(ee=>{if(!ee)return ee;const ve=ee.replace(/\\/g,"/");return/^https?:\/\//i.test(ve)?ve:`${z}/${ve.replace(/^\/+/,"")}`},[z]),Q=u.useCallback(async()=>{o(!0);try{const{data:ee}=await oe.get("/admin/stats");n(ee),c("")}catch(ee){c(ee.response?.data?.message||ee.message||"Impossible de charger les statistiques.")}finally{o(!1)}},[]),B=u.useCallback(async()=>{g(!0),x("");try{const ee=new URLSearchParams;["waiting","verified","rejected"].includes(v)&&ee.append("status",v),k&&ee.append("search",k),A&&ee.append("startDate",A),P&&ee.append("endDate",P);const{data:ve}=await oe.get(ee.toString()?`/payments/admin?${ee}`:"/payments/admin");let be=Array.isArray(ve)?ve.map(J=>({...J,product:J.product?{...J.product,images:Array.isArray(J.product.images)?J.product.images.map(L):void 0}:J.product})):[];v==="disabled_products"&&(be=be.filter(J=>J.product?.status==="disabled")),be=be.slice().sort((J,Ge)=>rO(Ge)-rO(J)),p(be),R(J=>{const Ge=Math.max(1,Math.ceil(be.length/Bi));return Math.min(J,Ge)})}catch(ee){x(ee.response?.data?.message||ee.message||"Impossible de charger les paiements.")}finally{g(!1)}},[v,L,k,A,P]);u.useEffect(()=>{Q()},[Q]),u.useEffect(()=>{B()},[B]),u.useEffect(()=>{const ee=()=>{B(),Q()},ve=()=>{document.visibilityState==="visible"&&(B(),Q())};return window.addEventListener("paymentStatusChanged",ee),document.addEventListener("visibilitychange",ve),window.addEventListener("focus",ee),()=>{window.removeEventListener("paymentStatusChanged",ee),document.removeEventListener("visibilitychange",ve),window.removeEventListener("focus",ee)}},[B,Q]),u.useEffect(()=>{const ee=setTimeout(()=>{C(y.trim())},400);return()=>clearTimeout(ee)},[y]),u.useEffect(()=>{R(1)},[v,k,A,P]);const ae=u.useMemo(()=>{const ee=(O-1)*Bi;return m.slice(ee,ee+Bi)},[m,O]),te=Math.max(1,Math.ceil(m.length/Bi)),ge=u.useCallback(async(ee,ve)=>{if(ee){V(!0),$(""),K("");try{await oe.put(`/payments/admin/${ee}/${ve==="verify"?"verify":"reject"}`),await Promise.all([B(),Q()]),$(ve==="verify"?"Paiement valid avec succs.":"Paiement rejet."),window.dispatchEvent(new CustomEvent("paymentStatusChanged",{detail:{paymentId:ee,status:ve==="verify"?"verified":"rejected"}}))}catch(be){K(be.response?.data?.message||be.message||"Action impossible sur ce paiement.")}finally{V(!1)}}},[B,Q]),ue=u.useCallback(async ee=>{if(ee){V(!0),$(""),K("");try{await oe.patch(`/products/${ee}/disable`),await B(),$("Annonce dsactive avec succs.")}catch(ve){K(ve.response?.data?.message||ve.message||"Impossible de dsactiver l'annonce.")}finally{V(!1)}}},[B]),Ee=u.useCallback(async ee=>{if(ee){V(!0),$(""),K("");try{await oe.patch(`/products/${ee}/enable`),await B(),$("Annonce ractive avec succs.")}catch(ve){K(ve.response?.data?.message||ve.message||"Impossible de ractiver l'annonce.")}finally{V(!1)}}},[B]),fe=u.useCallback(async ee=>{if(ee)try{if(!navigator.clipboard)throw new Error("Clipboard API indisponible.");await navigator.clipboard.writeText(ee),$("Rfrence copie dans le presse-papiers."),K("")}catch{K("Impossible de copier la rfrence."),$("")}},[]);u.useEffect(()=>{if(!D&&!j)return;const ee=setTimeout(()=>{$(""),K("")},4e3);return()=>clearTimeout(ee)},[D,j]);const re=a?.payments||{},U=u.useCallback(ee=>{const be=Date.now()-ee*24*60*60*1e3;let J=0,Ge=0;return m.forEach(je=>{const tt=Date.parse(je.createdAt);!Number.isNaN(tt)&&tt>=be&&(J+=1,Ge+=Number(je.amount||0))}),{count:J,amount:Ge}},[m]),W=u.useMemo(()=>U(1),[U]),me=u.useMemo(()=>U(7),[U]),ne=u.useMemo(()=>U(30),[U]);return e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6"},e.createElement("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},r?"Gestionnaire  Paiements":"Administration  Paiements"),e.createElement("p",{className:"text-sm text-gray-600"},"Suivez ltat des transactions et traitez les preuves de paiement.")),e.createElement(ye,{to:"/admin",className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50"}," Retour au tableau de bord")),e.createElement("section",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"Total"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},ad(re.total)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Paiements enregistrs")),e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"En attente"),e.createElement("p",{className:"text-2xl font-bold text-yellow-600 mt-1"},ad(re.waiting)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"}," vrifier")),e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"Valids"),e.createElement("p",{className:"text-2xl font-bold text-green-600 mt-1"},ad(re.verified)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Mises en ligne confirmes")),e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"Revenus cumuls"),e.createElement("p",{className:"text-2xl font-bold text-indigo-600 mt-1"},Lo(re.revenue)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Toutes commissions"))),e.createElement("section",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3"},e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"24 heures"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},ad(W.count)," paiements"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant : ",Lo(W.amount))),e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"7 jours"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},ad(me.count)," paiements"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant : ",Lo(me.amount))),e.createElement("div",{className:"rounded-xl border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase"},"30 jours"),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},ad(ne.count)," paiements"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant : ",Lo(ne.amount)))),l&&e.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700"},l),s&&e.createElement("div",{className:"rounded-lg border border-gray-200 bg-white p-4 text-sm text-gray-500"},"Chargement des statistiques"),e.createElement("section",{className:"rounded-xl border bg-white p-5 shadow-sm space-y-4"},e.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Liste des paiements"),e.createElement("p",{className:"text-xs text-gray-500"},"Utilisez les filtres pour trouver rapidement un produit ou une transaction.")),e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-3 w-full md:w-auto"},Y?e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},aO.map(ee=>e.createElement("button",{key:ee.value,type:"button",onClick:()=>E(ee.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${v===ee.value?"bg-indigo-600 text-white shadow":"border border-gray-200 bg-white text-gray-600"}`},ee.label))):e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{htmlFor:"payments-status-filter",className:"text-sm text-gray-600"},"Statut:"),e.createElement("select",{id:"payments-status-filter",value:v,onChange:ee=>E(ee.target.value),className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"},aO.map(ee=>e.createElement("option",{key:ee.value,value:ee.value},ee.label)))),e.createElement("div",{className:"w-full sm:w-64"},e.createElement("input",{type:"search",value:y,onChange:ee=>w(ee.target.value),placeholder:"Rechercher un produit",className:"w-full rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})),e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{htmlFor:"start-date",className:"text-sm text-gray-600"},"Du"),e.createElement("input",{id:"start-date",type:"date",value:A,onChange:ee=>S(ee.target.value),className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{htmlFor:"end-date",className:"text-sm text-gray-600"},"Au"),e.createElement("input",{id:"end-date",type:"date",value:P,onChange:ee=>T(ee.target.value),className:"rounded border px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"})),(A||P)&&e.createElement("button",{type:"button",onClick:()=>{S(""),T("")},className:"text-xs font-semibold text-gray-600 hover:text-gray-900"},"Rinitialiser")))),b&&e.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700"},b),D&&e.createElement("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3 text-sm text-green-700"},D),j&&e.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700"},j),Y?e.createElement("div",{className:"space-y-4"},f?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des paiements"):ae.length?ae.map(ee=>e.createElement("article",{key:ee._id||ee.id,className:"space-y-3 rounded-2xl border border-gray-100 p-4 shadow-sm"},e.createElement("div",{className:"flex items-start justify-between gap-3"},e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900"},ee.product?.title||"Produit inconnu"),e.createElement("p",{className:"text-xs text-gray-500"},"#",ee.product?._id||"")),e.createElement("span",{className:`inline-flex rounded-full px-2 py-1 text-[11px] font-semibold ${tO[ee.status]||"bg-gray-100 text-gray-600"}`},eO[ee.status]||ee.status)),e.createElement("div",{className:"space-y-1 text-xs text-gray-600"},e.createElement("p",null,"Prix de lannonce : ",ee.product?.price?Lo(ee.product.price):""),e.createElement("p",null,"Payeur : ",e.createElement("span",{className:"font-semibold text-gray-900"},ee.payerName||"")),e.createElement("p",null,"Email : ",ee.user?.email||""),e.createElement("p",null,"Oprateur : ",ee.operator||""),ee.promoCodeValue?e.createElement("p",{className:"text-emerald-700"},"Code promo : ",ee.promoCodeValue):null,e.createElement("p",{className:"font-semibold text-gray-900"},"Montant reu : ",Lo(ee.amount)),e.createElement("p",null,"Commission due : ",Lo(ee.commissionDueAmount??ee.amount)),ee.status==="verified"&&ee.validatedBy?e.createElement("p",{className:"text-xs text-green-600"},"Valid par ",ee.validatedBy.name,ee.validatedAt?`  ${ZT(ee.validatedAt)}`:""):null),ee.product?.images?.length?e.createElement("div",{className:"flex items-center gap-2 overflow-x-auto rounded-xl border border-gray-100 p-2"},ee.product.images.slice(0,4).map((ve,be)=>e.createElement("a",{key:ve||be,href:ve,target:"_blank",rel:"noopener noreferrer",className:"shrink-0"},e.createElement("img",{src:ve,alt:`${ee.product?.title||"Produit"} ${be+1}`,className:"h-16 w-20 rounded-lg border object-cover shadow-sm",loading:"lazy"}))),ee.product.images.length>4&&e.createElement("span",{className:"text-xs text-gray-600 whitespace-nowrap"},"+",ee.product.images.length-4," autres")):null,e.createElement("div",{className:"flex flex-wrap gap-2"},ee.product&&e.createElement(ye,{to:Dr(ee.product),...q,className:"flex-1 min-w-[150px] rounded-lg border border-indigo-200 px-3 py-2 text-center text-xs font-semibold text-indigo-700 hover:bg-indigo-50"},"Voir l'annonce"),ee.transactionNumber?e.createElement("button",{type:"button",onClick:()=>fe(ee.transactionNumber),className:"flex-1 min-w-[150px] rounded-lg border border-gray-200 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-50"},"Copier la rfrence"):null),e.createElement("div",{className:"flex flex-wrap gap-2"},ee.product?._id&&ee.product?.status!=="disabled"&&e.createElement("button",{type:"button",onClick:()=>ue(ee.product?.slug||ee.product?._id),className:"flex-1 min-w-[150px] rounded-lg border border-red-200 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-50 disabled:opacity-60",disabled:H},"Dsactiver l'annonce"),ee.product?._id&&ee.product?.status==="disabled"&&e.createElement("button",{type:"button",onClick:()=>Ee(ee.product?.slug||ee.product?._id),className:"flex-1 min-w-[150px] rounded-lg border border-green-200 px-3 py-2 text-xs font-semibold text-green-700 hover:bg-green-50 disabled:opacity-60",disabled:H},"Activer l'annonce")),e.createElement("div",{className:"flex flex-wrap gap-2"},ee.status==="waiting"?e.createElement(e.Fragment,null,e.createElement("button",{type:"button",onClick:()=>ge(ee._id||ee.id,"verify"),className:"flex-1 min-w-[150px] rounded-lg bg-green-600 px-3 py-2 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-60",disabled:H},"Valider"),e.createElement("button",{type:"button",onClick:()=>ge(ee._id||ee.id,"reject"),className:"flex-1 min-w-[150px] rounded-lg bg-red-600 px-3 py-2 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-60",disabled:H},"Refuser")):e.createElement("span",{className:"text-xs text-gray-500"},"Action non disponible pour ce paiement.")))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun paiement  afficher avec ces critres.")):e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full border text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"p-2 border text-left"},"Annonce"),e.createElement("th",{className:"p-2 border text-left"},"Prix"),e.createElement("th",{className:"p-2 border text-left"},"Payeur"),e.createElement("th",{className:"p-2 border text-left"},"Oprateur"),e.createElement("th",{className:"p-2 border text-left"},"Montant"),e.createElement("th",{className:"p-2 border text-left"},"Valid par"),e.createElement("th",{className:"p-2 border text-left"},"Statut"),e.createElement("th",{className:"p-2 border text-left"},"Actions"))),e.createElement("tbody",null,f?e.createElement("tr",null,e.createElement("td",{colSpan:8,className:"p-4 text-center text-sm text-gray-500"},"Chargement des paiements")):ae.length?ae.map(ee=>e.createElement("tr",{key:ee._id||ee.id},e.createElement("td",{className:"p-2 border align-top"},e.createElement("p",{className:"font-semibold text-gray-900"},ee.product?.title||"Produit inconnu"),e.createElement("p",{className:"text-xs text-gray-500"},"#",ee.product?._id||"")),e.createElement("td",{className:"p-2 border align-top"},ee.product?.price?Lo(ee.product.price):""),e.createElement("td",{className:"p-2 border align-top"},e.createElement("p",{className:"font-medium text-gray-900"},ee.payerName||""),e.createElement("p",{className:"text-xs text-gray-500"},ee.user?.email),ee.promoCodeValue?e.createElement("p",{className:"text-xs text-emerald-700 font-semibold"},ee.promoCodeValue):null),e.createElement("td",{className:"p-2 border align-top"},ee.operator||""),e.createElement("td",{className:"p-2 border align-top"},e.createElement("p",{className:"font-medium"},Lo(ee.amount)),e.createElement("p",{className:"text-xs text-gray-500"},"Due: ",Lo(ee.commissionDueAmount??ee.amount))),e.createElement("td",{className:"p-2 border align-top"},ee.status==="verified"&&ee.validatedBy?e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},ee.validatedBy.name),ee.validatedAt&&e.createElement("p",{className:"text-xs text-gray-500"},ZT(ee.validatedAt))):e.createElement("span",{className:"text-xs text-gray-500"},"")),e.createElement("td",{className:"p-2 border align-top"},e.createElement("span",{className:`inline-flex items-center rounded px-2 py-1 text-xs font-semibold ${tO[ee.status]||"bg-gray-100 text-gray-600"}`},eO[ee.status]||ee.status)),e.createElement("td",{className:"p-2 border align-top"},e.createElement("div",{className:"flex flex-wrap gap-2"},ee.product&&e.createElement(ye,{to:Dr(ee.product),...q,className:"rounded border border-indigo-200 px-3 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-50"},"Voir l'annonce"),ee.transactionNumber?e.createElement("button",{type:"button",onClick:()=>fe(ee.transactionNumber),className:"rounded border border-gray-200 px-3 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-50"},"Copier la rfrence"):null,ee.product?.status!=="disabled"&&ee.product&&e.createElement("button",{type:"button",onClick:()=>ue(ee.product?.slug||ee.product?._id),className:"rounded border border-red-200 px-3 py-1 text-xs font-semibold text-red-700 hover:bg-red-50 disabled:opacity-60",disabled:H},"Dsactiver"),ee.product?.status==="disabled"&&ee.product&&e.createElement("button",{type:"button",onClick:()=>Ee(ee.product?.slug||ee.product?._id),className:"rounded border border-green-200 px-3 py-1 text-xs font-semibold text-green-700 hover:bg-green-50 disabled:opacity-60",disabled:H},"Activer"),ee.status==="waiting"?e.createElement(e.Fragment,null,e.createElement("button",{type:"button",onClick:()=>ge(ee._id||ee.id,"verify"),className:"rounded bg-green-600 px-3 py-1 text-xs font-semibold text-white hover:bg-green-700 disabled:opacity-60",disabled:H},"Valider"),e.createElement("button",{type:"button",onClick:()=>ge(ee._id||ee.id,"reject"),className:"rounded bg-red-600 px-3 py-1 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-60",disabled:H},"Refuser")):e.createElement("span",{className:"text-xs text-gray-500 self-center"},"Action indisponible"))))):e.createElement("tr",null,e.createElement("td",{colSpan:8,className:"p-4 text-center text-sm text-gray-500"},"Aucun paiement  afficher avec ces critres."))))),m.length>Bi&&e.createElement("div",{className:"flex flex-col gap-3 border-t border-gray-100 pt-4 text-xs text-gray-600 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null,"Affichage ",(O-1)*Bi+1,"-",Math.min(O*Bi,m.length)," sur ",m.length," paiements"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>R(ee=>Math.max(1,ee-1)),disabled:O<=1,className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("span",{className:"font-medium text-gray-700"},"Page ",O," / ",te),e.createElement("button",{type:"button",onClick:()=>R(ee=>Math.min(te,ee+1)),disabled:O>=te,className:"rounded border border-gray-300 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))))}const ti=[{key:"canComment",label:"Commentaires",icon:J4,color:"orange",shopOnly:!1},{key:"canOrder",label:"Commandes",icon:en,color:"red",shopOnly:!1},{key:"canMessage",label:"Messages",icon:J4,color:"purple",shopOnly:!1},{key:"canAddFavorites",label:"Favoris",icon:mB,color:"pink",shopOnly:!1},{key:"canUploadImages",label:"Images",icon:xB,color:"blue",shopOnly:!1},{key:"canBeViewed",label:"Visibilit boutique",icon:dc,color:"gray",shopOnly:!0}],nO={person:"Particulier",shop:"Boutique"},sO={user:"Utilisateur",admin:"Administrateur"},Sw=t=>{const r=Number(t);return Number.isFinite(r)?r.toLocaleString("fr-FR"):"0"},ri=t=>{if(!t)return"";const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toLocaleDateString()},nd=15,oO=[{value:"all",label:"Tous les types"},{value:"person",label:"Particuliers"},{value:"shop",label:"Boutiques"}],lO=[{value:"all",label:"Tous les statuts"},{value:"active",label:"Actifs"},{value:"blocked",label:"Suspendus"}],iO=[{value:"all",label:"Toutes restrictions"},{value:"any_active",label:"Avec restriction(s)"},{value:"none",label:"Sans restriction"},{value:"canComment",label:"Commentaires"},{value:"canOrder",label:"Commandes"},{value:"canMessage",label:"Messages"},{value:"canAddFavorites",label:"Favoris"},{value:"canUploadImages",label:"Images"},{value:"canBeViewed",label:"Visibilit"}],cO=[{value:"all",label:"Tous"},{value:"pending_conversion",label:"Demande boutique en attente"}];function uie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(""),[m,p]=u.useState(""),[f,g]=u.useState(""),[b,x]=u.useState("all"),[v,E]=u.useState("all"),[y,w]=u.useState("all"),[k,C]=u.useState("all"),[A,S]=u.useState(1),[P,T]=u.useState(""),[O,R]=u.useState(""),[D,$]=u.useState(0),j=rs(1023),[K,H]=u.useState({open:!1,user:null}),[V,q]=u.useState(null),[Y,z]=u.useState(!1),[L,Q]=u.useState({type:"",restricted:!1,startDate:"",endDate:"",reason:""}),[B,ae]=u.useState({open:!1,user:null}),[te,ge]=u.useState([]),[ue,Ee]=u.useState(!1),[fe,re]=u.useState(1),[U,W]=u.useState(0),[me,ne]=u.useState({open:!1,user:null}),[ee,ve]=u.useState([]),[be,J]=u.useState(!1),[Ge,je]=u.useState(1),[tt,At]=u.useState(0),[He,Tt]=u.useState({open:!1,user:null,request:null}),[Re,et]=u.useState([]),[gt,Ze]=u.useState(!1),[xt,Dt]=u.useState("");u.useEffect(()=>{const F=new AbortController;let ie=!0;return(async()=>{n(!0),o("");try{const ke={limit:100};f&&(ke.search=f),b!=="all"&&(ke.accountType=b);const{data:mt}=await oe.get("/admin/users",{params:ke,signal:F.signal});ie&&r(Array.isArray(mt)?mt:[])}catch(ke){if(!ie||ke.name==="CanceledError"||ke.name==="AbortError")return;o(ke.response?.data?.message||ke.message||"Impossible de charger la liste des utilisateurs.")}finally{ie&&n(!1)}})(),()=>{ie=!1,F.abort()}},[b,f,D]),u.useEffect(()=>{(async()=>{try{const{data:ie}=await oe.get("/admin/shop-conversion-requests?status=pending");et(ie||[])}catch(ie){console.error("Error loading conversion requests:",ie)}})()},[D]);const nt=u.useMemo(()=>{let F=t;if(v==="blocked"?F=F.filter(ie=>ie.isBlocked):v==="active"&&(F=F.filter(ie=>!ie.isBlocked)),y==="any_active"?F=F.filter(ie=>ti.some(he=>ie.restrictions?.[he.key]?.isActive)):y==="none"?F=F.filter(ie=>!ti.some(he=>ie.restrictions?.[he.key]?.isActive)):y!=="all"&&(F=F.filter(ie=>ie.restrictions?.[y]?.isActive)),k==="pending_conversion"){const ie=new Set((Re||[]).map(he=>(he.user?._id||he.user)?.toString()).filter(Boolean));F=F.filter(he=>ie.has(he.id))}return F},[v,y,k,t,Re]),Me=u.useMemo(()=>{const F=t.length,ie=t.filter(G=>G.isBlocked).length,he=t.filter(G=>G.accountType==="shop").length,ke=t.filter(G=>ti.some(Z=>G.restrictions?.[Z.key]?.isActive)).length,mt=Re.length;return{total:F,blocked:ie,shops:he,restricted:ke,pendingConversion:mt}},[t,Re]);u.useEffect(()=>{S(1)},[b,v,y,k,f]),u.useEffect(()=>{const F=Math.max(1,Math.ceil(nt.length/nd));S(ie=>Math.min(ie,F))},[nt.length]);const Qe=Math.max(1,Math.ceil(nt.length/nd)),wt=u.useMemo(()=>{const F=(A-1)*nd;return nt.slice(F,F+nd)},[nt,A]),lt=nt.length?(A-1)*nd+1:0,we=nt.length?Math.min(A*nd,nt.length):0;u.useEffect(()=>{const F=setTimeout(()=>{g(m.trim())},400);return()=>clearTimeout(F)},[m]);const vt=F=>{F.preventDefault(),g(m.trim())},pt=()=>{p(""),g("")},Le=F=>{r(ie=>ie.some(ke=>ke.id===F.id)?ie.map(ke=>ke.id===F.id?F:ke):[F,...ie])},pe=async F=>{const ie=F.blockedReason||"",he=window.prompt("Raison de la suspension (facultatif, visible uniquement par les administrateurs) :",ie);if(he!==null){c(""),T(F.id);try{const{data:ke}=await oe.patch(`/admin/users/${F.id}/block`,{reason:he||""});Le(ke)}catch(ke){c(ke.response?.data?.message||ke.message||"Impossible de suspendre cet utilisateur pour le moment.")}finally{T("")}}},Pe=async F=>{c(""),T(F.id);try{const{data:ie}=await oe.patch(`/admin/users/${F.id}/unblock`);Le(ie)}catch(ie){c(ie.response?.data?.message||ie.message||"Impossible de rtablir cet utilisateur pour le moment.")}finally{T("")}},ft=F=>{const ie=Re.find(he=>he.user?._id===F.id||he.user===F.id);Tt({open:!0,user:F,request:ie})},ht=()=>{Tt({open:!1,user:null,request:null})},Lt=async F=>{Ze(!0),c("");try{await oe.patch(`/admin/shop-conversion-requests/${F}/approve`),et(ie=>ie.filter(he=>he._id!==F)),ht(),$(ie=>ie+1)}catch(ie){c(ie.response?.data?.message||ie.message||"Impossible d'approuver la demande pour le moment.")}finally{Ze(!1)}},nr=async F=>{const ie=window.prompt("Raison du rejet (facultatif) :","");if(ie!==null){Ze(!0),c("");try{await oe.patch(`/admin/shop-conversion-requests/${F}/reject`,{rejectionReason:ie||""}),et(he=>he.filter(ke=>ke._id!==F)),ht(),$(he=>he+1)}catch(he){c(he.response?.data?.message||he.message||"Impossible de rejeter la demande pour le moment.")}finally{Ze(!1)}}},er=async F=>{const ie=window.prompt("Nom de la boutique :",F.shopName||"");if(ie===null)return;if(!ie.trim()){c("Le nom de la boutique est requis.");return}const he=window.prompt("Adresse de la boutique :",F.shopAddress||"");if(he!==null){if(!he.trim()){c("L'adresse de la boutique est requise.");return}Dt(F.id),c("");try{const{data:ke}=await oe.patch(`/admin/users/${F.id}/account-type`,{accountType:"shop",shopName:ie.trim(),shopAddress:he.trim(),reason:"Conversion manuelle en boutique par l'administrateur"});Le(ke),$(mt=>mt+1)}catch(ke){c(ke.response?.data?.message||ke.message||"Impossible de convertir le compte en boutique pour le moment.")}finally{Dt("")}}},Nt=async F=>{if(window.confirm(`tes-vous sr de vouloir reconvertir "${F.name}" (${F.shopName||"Boutique"}) en compte particulier ?

Cette action supprimera les informations de la boutique.`)){Dt(F.id),c("");try{const{data:he}=await oe.patch(`/admin/users/${F.id}/account-type`,{accountType:"person",reason:"Reconversion en particulier par l'administrateur"});Le(he),$(ke=>ke+1)}catch(he){c(he.response?.data?.message||he.message||"Impossible de reconvertir le compte en particulier pour le moment.")}finally{Dt("")}}},sr=u.useCallback(async(F,ie)=>{R(F),c("");try{const{data:he}=await oe.patch(`/admin/users/${F}/shop-verification`,{verified:ie});Le(he),$(ke=>ke+1)}catch(he){c(he.response?.data?.message||he.message||"Impossible de mettre  jour ltat de vrification de la boutique.")}finally{R("")}},[]),Rt=F=>Re.find(ie=>ie.user?._id===F||ie.user===F),zt=()=>{$(F=>F+1)},mr=u.useCallback((F,ie)=>{const he=F.restrictions?.[ie]||{};Q({type:ie,restricted:he.restricted||!1,startDate:he.startDate?new Date(he.startDate).toISOString().slice(0,16):"",endDate:he.endDate?new Date(he.endDate).toISOString().slice(0,16):"",reason:he.reason||""}),c(""),H({open:!0,user:F}),q(null)},[]),Mr=u.useCallback(()=>{H({open:!1,user:null}),Q({type:"",restricted:!1,startDate:"",endDate:"",reason:""})},[]),br=async()=>{if(!(!K.user||!L.type)){z(!0),c("");try{await oe.patch(`/admin/users/${K.user.id}/restrictions/${L.type}`,{restricted:L.restricted,startDate:L.startDate||null,endDate:L.endDate||null,reason:L.reason});const{data:F}=await oe.get("/admin/users",{params:{limit:100,search:f||void 0,accountType:b!=="all"?b:void 0}});r(Array.isArray(F)?F:[]),Mr()}catch(F){c(F.response?.data?.message||F.message||"Erreur lors de l'application de la restriction.")}finally{z(!1)}}},or=u.useCallback(async F=>{ae({open:!0,user:F}),Ee(!0),re(1);try{const{data:ie}=await oe.get(`/admin/users/${F.id}/received-orders`,{params:{page:1,limit:10}});ge(ie.orders||[]),W(ie.totalPages||0)}catch(ie){c(ie.response?.data?.message||"Erreur lors du chargement des commandes.")}finally{Ee(!1)}},[]),Gt=u.useCallback(()=>{ae({open:!1,user:null}),ge([])},[]),Zt=async F=>{if(B.user){Ee(!0);try{const{data:ie}=await oe.get(`/admin/users/${B.user.id}/received-orders`,{params:{page:F,limit:10}});ge(ie.orders||[]),re(F),W(ie.totalPages||0)}catch(ie){c(ie.response?.data?.message||"Erreur lors du chargement des commandes.")}finally{Ee(!1)}}},se=u.useCallback(async F=>{ne({open:!0,user:F}),J(!0),je(1);try{const{data:ie}=await oe.get(`/admin/users/${F.id}/audit-logs`,{params:{page:1,limit:10}});ve(ie.logs||[]),At(ie.totalPages||0)}catch(ie){c(ie.response?.data?.message||"Erreur lors du chargement de l'historique.")}finally{J(!1)}},[]),dt=u.useCallback(()=>{ne({open:!1,user:null}),ve([])},[]),ut=async F=>{if(me.user){J(!0);try{const{data:ie}=await oe.get(`/admin/users/${me.user.id}/audit-logs`,{params:{page:F,limit:10}});ve(ie.logs||[]),je(F),At(ie.totalPages||0)}catch(ie){c(ie.response?.data?.message||"Erreur lors du chargement de l'historique.")}finally{J(!1)}}},It=F=>({restriction_applied:"Restriction applique",restriction_removed:"Restriction leve",user_blocked:"Compte suspendu",user_unblocked:"Compte ractiv",shop_verified:"Boutique vrifie",shop_unverified:"Vrification retire",role_changed:"Rle modifi",account_type_changed:"Type de compte modifi",account_type_changed_to_shop:"Converti en boutique",account_type_changed_to_person:"Reconverti en particulier"})[F]||F,de=F=>F.includes("blocked")||F.includes("applied")||F==="shop_unverified"?"bg-red-100 text-red-700":F.includes("unblocked")||F.includes("removed")||F==="shop_verified"?"bg-green-100 text-green-700":F.includes("account_type_changed")?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700",De=F=>F.restrictions?ti.filter(ie=>F.restrictions[ie.key]?.isActive).length:0;return e.createElement("div",{className:"max-w-7xl mx-auto px-4 md:px-6 lg:px-8 py-6 space-y-6"},e.createElement("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Gestion des utilisateurs"),e.createElement("p",{className:"text-sm text-gray-500"},"Administrez les comptes, suspendez ou ractivez un utilisateur en cas d'abuse.")),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},e.createElement(ye,{to:"/admin",className:"inline-flex items-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm font-medium text-indigo-700 hover:bg-indigo-100"},e.createElement(Gr,{size:16}),"Retour au tableau de bord"),e.createElement("button",{type:"button",onClick:zt,className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},e.createElement(Cs,{size:16,className:a?"animate-spin":""}),"Actualiser"))),e.createElement("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4"},e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide"},"Utilisateurs totaux"),e.createElement("p",{className:"text-2xl font-semibold text-gray-900"},Me.total)),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide"},"Boutiques"),e.createElement("p",{className:"text-2xl font-semibold text-gray-900"},Me.shops)),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide"},"Bloqus"),e.createElement("p",{className:"text-2xl font-semibold text-red-600"},Me.blocked)),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide"},"Avec restrictions"),e.createElement("p",{className:"text-2xl font-semibold text-amber-600"},Me.restricted)),e.createElement("div",{className:"rounded-lg border bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs text-gray-500 uppercase tracking-wide"},"Demandes boutique"),e.createElement("p",{className:"text-2xl font-semibold text-teal-600"},Me.pendingConversion))),e.createElement("section",{className:"rounded-lg border bg-white p-4 shadow-sm space-y-4"},e.createElement("form",{onSubmit:vt,className:"flex flex-col md:flex-row gap-3 md:items-center md:justify-between"},e.createElement("div",{className:"flex flex-1 flex-col gap-2 sm:flex-row sm:items-center"},e.createElement("div",{className:"relative flex-1"},e.createElement(Tr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.createElement("input",{type:"search",placeholder:"Rechercher un nom, email ou tlphone",className:"w-full rounded-lg border border-gray-200 bg-gray-50 py-2 pl-9 pr-3 text-sm focus:border-indigo-400 focus:outline-none focus:ring-1 focus:ring-indigo-400",value:m,onChange:F=>p(F.target.value)})),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"submit",className:"rounded-lg bg-indigo-600 px-3 py-2 text-sm font-medium text-white hover:bg-indigo-700 transition"},"Rechercher"),f&&e.createElement("button",{type:"button",onClick:pt,className:"rounded-lg border border-gray-200 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50"},"Effacer"))),j?e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},oO.map(F=>e.createElement("button",{key:F.value,type:"button",onClick:()=>x(F.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${b===F.value?"bg-indigo-600 text-white shadow":"border border-gray-200 bg-white text-gray-600"}`},F.label))),e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},lO.map(F=>e.createElement("button",{key:F.value,type:"button",onClick:()=>E(F.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${v===F.value?"bg-gray-900 text-white shadow":"border border-gray-200 bg-white text-gray-600"}`},F.label))),e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},iO.map(F=>e.createElement("button",{key:F.value,type:"button",onClick:()=>w(F.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${y===F.value?"bg-amber-500 text-white shadow":"border border-gray-200 bg-white text-gray-600"}`},F.label))),e.createElement("div",{className:"-mx-1 flex gap-2 overflow-x-auto pb-1"},cO.map(F=>e.createElement("button",{key:F.value,type:"button",onClick:()=>C(F.value),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition ${k===F.value?"bg-teal-600 text-white shadow":"border border-gray-200 bg-white text-gray-600"}`},F.label)))):e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("select",{value:b,onChange:F=>x(F.target.value),className:"rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 focus:border-indigo-400 focus:outline-none focus:ring-1 focus:ring-indigo-400"},oO.map(F=>e.createElement("option",{key:F.value,value:F.value},F.label))),e.createElement("select",{value:v,onChange:F=>E(F.target.value),className:"rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 focus:border-indigo-400 focus:outline-none focus:ring-1 focus:ring-indigo-400"},lO.map(F=>e.createElement("option",{key:F.value,value:F.value},F.label))),e.createElement("select",{value:y,onChange:F=>w(F.target.value),className:`rounded-lg border px-3 py-2 text-sm focus:border-indigo-400 focus:outline-none focus:ring-1 focus:ring-indigo-400 ${y!=="all"?"border-amber-400 bg-amber-50 text-amber-700":"border-gray-200 text-gray-700"}`},iO.map(F=>e.createElement("option",{key:F.value,value:F.value},F.label))),e.createElement("select",{value:k,onChange:F=>C(F.target.value),className:`rounded-lg border px-3 py-2 text-sm focus:border-indigo-400 focus:outline-none focus:ring-1 focus:ring-indigo-400 ${k!=="all"?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-200 text-gray-700"}`},cO.map(F=>e.createElement("option",{key:F.value,value:F.value},F.label))))),s&&e.createElement("p",{className:"text-sm text-red-600"},s),l&&e.createElement("p",{className:"text-sm text-red-600"},l),j?e.createElement("div",{className:"space-y-4"},a?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des utilisateurs"):wt.length?wt.map(F=>{const ie=!!F.isBlocked;return e.createElement("article",{key:F.id,className:"space-y-3 rounded-2xl border border-gray-100 p-4 shadow-sm"},e.createElement("div",{className:"flex items-start justify-between gap-3"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},F.name),e.createElement("p",{className:"text-xs text-gray-500 break-all"},F.email),e.createElement("p",{className:"text-xs text-gray-400"},F.phone||""),F.accountType==="shop"&&F.shopName?e.createElement("div",{className:"text-xs space-y-1"},e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("span",{className:"font-semibold text-indigo-600"},"Boutique : ",F.shopName),e.createElement(_n,{verified:!!F.shopVerified})),e.createElement("p",{className:"text-gray-500"},"Abonns : ",Sw(F.followersCount))):null),e.createElement("span",{className:"rounded-full bg-indigo-50 px-2 py-1 text-[11px] font-semibold text-indigo-700"},nO[F.accountType]||F.accountType)),e.createElement("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600"},e.createElement("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 font-semibold text-gray-700"},sO[F.role]||F.role),ie?e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 px-2 py-0.5 font-semibold text-red-600"},e.createElement(ix,{size:12}),"Suspendu"):e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-0.5 font-semibold text-green-600"},e.createElement(za,{size:12}),"Actif")),ie?e.createElement("div",{className:"text-xs text-gray-500 space-y-1"},e.createElement("p",null,"Depuis le ",ri(F.blockedAt)),F.blockedReason?e.createElement("p",{className:"italic"},"Motif : ",F.blockedReason):null):null,De(F)>0&&e.createElement("div",{className:"flex flex-wrap gap-1 mb-2"},ti.filter(he=>F.restrictions?.[he.key]?.isActive).map(he=>{const ke=he.icon;return e.createElement("span",{key:he.key,className:"inline-flex items-center gap-1 rounded-full bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-700"},e.createElement(ke,{size:10}),he.label)})),e.createElement("div",{className:"flex flex-wrap gap-2"},ie?e.createElement("button",{type:"button",onClick:()=>Pe(F),disabled:P===F.id,className:"flex-1 min-w-[100px] rounded-lg border border-green-500 px-3 py-2 text-xs font-semibold text-green-600 hover:bg-green-50 disabled:opacity-50"},"Ractiver"):e.createElement("button",{type:"button",onClick:()=>pe(F),disabled:P===F.id,className:"flex-1 min-w-[100px] rounded-lg border border-red-500 px-3 py-2 text-xs font-semibold text-red-600 hover:bg-red-50 disabled:opacity-50"},"Suspendre"),e.createElement("div",{className:"relative"},e.createElement("button",{type:"button",onClick:()=>q(V===F.id?null:F.id),className:"inline-flex items-center gap-1 rounded-lg border border-amber-500 px-3 py-2 text-xs font-semibold text-amber-600 hover:bg-amber-50"},e.createElement($m,{size:14}),"Restrictions",e.createElement(Za,{size:12})),V===F.id&&e.createElement("div",{className:"absolute right-0 mt-1 w-48 rounded-lg border bg-white shadow-lg z-20"},ti.filter(he=>!he.shopOnly||F.accountType==="shop").map(he=>{const ke=F.restrictions?.[he.key]?.isActive,mt=he.icon;return e.createElement("button",{key:he.key,type:"button",onClick:()=>mr(F,he.key),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg"},e.createElement(mt,{size:14,className:ke?"text-red-500":"text-gray-400"}),e.createElement("span",{className:ke?"text-red-600 font-semibold":"text-gray-700"},he.label),ke&&e.createElement("span",{className:"ml-auto text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded"},"Actif"))}))),F.accountType!=="shop"&&Rt(F.id)&&e.createElement("button",{type:"button",onClick:()=>ft(F),className:"inline-flex items-center gap-1 rounded-lg border border-purple-500 px-3 py-2 text-xs font-semibold text-purple-600 hover:bg-purple-50 bg-purple-50"},e.createElement(Er,{size:14}),"Demande boutique"),F.accountType!=="shop"&&!Rt(F.id)&&e.createElement("button",{type:"button",onClick:()=>er(F),disabled:xt===F.id,className:"inline-flex items-center gap-1 rounded-lg border border-teal-500 px-3 py-2 text-xs font-semibold text-teal-700 hover:bg-teal-50 disabled:opacity-50"},e.createElement(Er,{size:14}),"Convertir en boutique"),F.accountType==="shop"&&e.createElement("button",{type:"button",onClick:()=>sr(F.id,!F.shopVerified),disabled:O===F.id,className:`inline-flex items-center gap-1 rounded-lg px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 ${F.shopVerified?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"}`},e.createElement(ar,{size:14}),F.shopVerified?"Retirer le badge":"Vrifier la boutique"),F.accountType==="shop"&&e.createElement("button",{type:"button",onClick:()=>or(F),className:"inline-flex items-center gap-1 rounded-lg border border-indigo-500 px-3 py-2 text-xs font-semibold text-indigo-600 hover:bg-indigo-50"},e.createElement(Ft,{size:14}),"Commandes"),e.createElement("button",{type:"button",onClick:()=>se(F),className:"inline-flex items-center gap-1 rounded-lg border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-600 hover:bg-gray-50"},e.createElement(Y4,{size:14}),"Historique")))}):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun utilisateur  afficher.")):e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full divide-y divide-gray-200 text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Utilisateur"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Type"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Rle"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Statut"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Actions"))),e.createElement("tbody",{className:"divide-y divide-gray-100"},a?e.createElement("tr",null,e.createElement("td",{colSpan:5,className:"px-3 py-6 text-center text-gray-500"},"Chargement des utilisateurs")):nt.length===0?e.createElement("tr",null,e.createElement("td",{colSpan:5,className:"px-3 py-6 text-center text-gray-500"},"Aucun utilisateur  afficher.")):wt.map(F=>{const ie=!!F.isBlocked;return e.createElement("tr",{key:F.id,className:"hover:bg-gray-50"},e.createElement("td",{className:"px-3 py-3"},e.createElement("div",{className:"flex flex-col"},e.createElement("span",{className:"font-medium text-gray-900"},F.name),e.createElement("span",{className:"text-gray-500"},F.email),e.createElement("span",{className:"text-gray-400 text-xs"},F.phone),F.accountType==="shop"&&F.shopName?e.createElement("div",{className:"text-xs text-gray-500 mt-1 space-y-1"},e.createElement("span",{className:"text-indigo-600 font-semibold"},"Boutique : ",F.shopName),e.createElement("p",null,"Abonns : ",Sw(F.followersCount)),e.createElement(ye,{to:Da(F),className:"text-indigo-500 underline text-xs font-semibold"},"Voir la boutique")):null)),e.createElement("td",{className:"px-3 py-3"},e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700"},nO[F.accountType]||F.accountType),F.accountType==="shop"&&e.createElement(_n,{verified:!!F.shopVerified}))),e.createElement("td",{className:"px-3 py-3"},e.createElement("span",{className:"text-sm text-gray-700"},sO[F.role]||F.role)),e.createElement("td",{className:"px-3 py-3"},ie?e.createElement("div",{className:"flex flex-col gap-1"},e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 px-2 py-0.5 text-xs font-semibold text-red-600"},e.createElement(ix,{size:12}),"Suspendu"),e.createElement("span",{className:"text-xs text-gray-500"},"Depuis le ",ri(F.blockedAt)),F.blockedReason?e.createElement("span",{className:"text-xs text-gray-500 italic"},"Motif : ",F.blockedReason):null):e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-50 px-2 py-0.5 text-xs font-semibold text-green-600"},e.createElement(za,{size:12}),"Actif")),e.createElement("td",{className:"px-3 py-3"},e.createElement("div",{className:"flex flex-wrap items-center gap-2"},ie?e.createElement("button",{type:"button",onClick:()=>Pe(F),disabled:P===F.id,className:"rounded-lg border border-green-500 px-3 py-1.5 text-xs font-semibold text-green-600 hover:bg-green-50 disabled:opacity-50"},"Ractiver"):e.createElement("button",{type:"button",onClick:()=>pe(F),disabled:P===F.id,className:"rounded-lg border border-red-500 px-3 py-1.5 text-xs font-semibold text-red-600 hover:bg-red-50 disabled:opacity-50"},"Suspendre"),F.accountType!=="shop"&&Rt(F.id)&&e.createElement("button",{type:"button",onClick:()=>ft(F),className:"rounded-lg border border-purple-500 px-3 py-1.5 text-xs font-semibold text-purple-600 hover:bg-purple-50 bg-purple-50"},e.createElement(Er,{size:14,className:"inline mr-1"}),"Demande boutique"),F.accountType!=="shop"&&!Rt(F.id)&&e.createElement("button",{type:"button",onClick:()=>er(F),disabled:xt===F.id,className:"rounded-lg border border-teal-500 px-3 py-1.5 text-xs font-semibold text-teal-700 hover:bg-teal-50 disabled:opacity-50"},e.createElement(Er,{size:14,className:"inline mr-1"}),"Convertir"),F.accountType==="shop"&&e.createElement("button",{type:"button",onClick:()=>Nt(F),disabled:xt===F.id,className:"rounded-lg border border-orange-500 px-3 py-1.5 text-xs font-semibold text-orange-600 hover:bg-orange-50 disabled:opacity-50"},e.createElement(Ia,{size:14,className:"inline mr-1"}),"Reconvertir"),F.accountType==="shop"&&e.createElement("button",{type:"button",onClick:()=>sr(F.id,!F.shopVerified),disabled:O===F.id,className:`rounded-lg px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50 ${F.shopVerified?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"}`,title:F.shopVerified?"Retirer le badge certifi":"Vrifier la boutique"},F.shopVerified?"Retirer le badge":"Vrifier la boutique"),e.createElement("div",{className:"relative"},e.createElement("button",{type:"button",onClick:()=>q(V===F.id?null:F.id),className:`inline-flex items-center gap-1 rounded-lg border px-2 py-1.5 text-xs font-semibold hover:bg-amber-50 ${De(F)>0?"border-amber-500 text-amber-600 bg-amber-50":"border-gray-300 text-gray-600"}`},e.createElement($m,{size:12}),De(F)>0&&e.createElement("span",null,De(F)),e.createElement(Za,{size:10})),V===F.id&&e.createElement("div",{className:"absolute right-0 mt-1 w-52 rounded-lg border bg-white shadow-lg z-20"},e.createElement("div",{className:"px-3 py-2 border-b text-xs font-semibold text-gray-500"},"Restrictions"),ti.filter(he=>!he.shopOnly||F.accountType==="shop").map(he=>{const ke=F.restrictions?.[he.key]?.isActive,mt=he.icon;return e.createElement("button",{key:he.key,type:"button",onClick:()=>mr(F,he.key),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-left hover:bg-gray-50"},e.createElement(mt,{size:14,className:ke?"text-red-500":"text-gray-400"}),e.createElement("span",{className:ke?"text-red-600 font-semibold":"text-gray-700"},he.label),ke&&e.createElement("span",{className:"ml-auto text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded"},"Actif"))}))),F.accountType==="shop"&&e.createElement("button",{type:"button",onClick:()=>or(F),className:"inline-flex items-center gap-1 rounded-lg border border-indigo-400 px-2 py-1.5 text-xs font-semibold text-indigo-600 hover:bg-indigo-50",title:"Commandes reues"},e.createElement(Ft,{size:12})),e.createElement("button",{type:"button",onClick:()=>se(F),className:"inline-flex items-center gap-1 rounded-lg border border-gray-300 px-2 py-1.5 text-xs font-semibold text-gray-600 hover:bg-gray-50",title:"Historique des actions"},e.createElement(Y4,{size:12})),e.createElement(ye,{to:`/admin/users/${F.id}/stats`,className:"inline-flex items-center gap-1 rounded-lg border border-gray-300 px-2 py-1.5 text-xs font-semibold text-gray-600 hover:bg-gray-50",title:"Statistiques"},"Stats"))))})))),nt.length>0&&!a?e.createElement("div",{className:"flex flex-col gap-3 border-t border-gray-100 pt-4 text-xs text-gray-600 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null,"Affichage ",lt,"-",we," sur ",nt.length," utilisateurs"),e.createElement("div",{className:"flex items-center gap-2 text-sm"},e.createElement("button",{type:"button",className:"rounded-lg border border-gray-300 px-3 py-1.5 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>S(F=>Math.max(1,F-1)),disabled:A<=1},"Prcdent"),e.createElement("span",{className:"font-medium text-gray-700"},"Page ",A," / ",Qe),e.createElement("button",{type:"button",className:"rounded-lg border border-gray-300 px-3 py-1.5 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>S(F=>Math.min(Qe,F+1)),disabled:A>=Qe},"Suivant"))):null),K.open&&K.user&&(()=>{const F=ti.find(ke=>ke.key===L.type),ie=F?.icon||$m,he=L.restricted;return e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:Mr},e.createElement("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:ke=>ke.stopPropagation()},e.createElement("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 px-6 py-4"},e.createElement("div",{className:"flex items-start justify-between"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement("div",{className:`p-2.5 rounded-xl ${he?"bg-red-100":"bg-gray-100"}`},e.createElement(ie,{size:24,className:he?"text-red-600":"text-gray-500"})),e.createElement("div",null,e.createElement("h3",{className:"text-xl font-black text-gray-900 mb-1"},F?.label||"Restriction"),e.createElement("p",{className:"text-sm text-gray-600"},K.user.name),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},K.user.email))),e.createElement("button",{type:"button",onClick:Mr,className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-white/60 transition-colors"},e.createElement(jt,{size:20})))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6 space-y-6"},e.createElement("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border-2 border-dashed border-gray-200"},e.createElement("label",{className:"flex items-center justify-between cursor-pointer group"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`relative w-14 h-8 rounded-full transition-all duration-300 ${he?"bg-red-500":"bg-gray-300"}`},e.createElement("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-lg transform transition-transform duration-300 ${he?"translate-x-6":"translate-x-0"}`})),e.createElement("div",null,e.createElement("span",{className:`text-base font-bold block ${he?"text-red-700":"text-gray-600"}`},he?"Restriction Active":"Restriction Inactive"),e.createElement("span",{className:"text-xs text-gray-500"},he?"L'utilisateur est actuellement restreint":"Aucune restriction en cours"))),e.createElement("input",{type:"checkbox",checked:he,onChange:ke=>Q(mt=>({...mt,restricted:ke.target.checked})),className:"sr-only"}))),he&&e.createElement("div",{className:"space-y-5 animate-in fade-in slide-in-from-top-2 duration-300"},e.createElement("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-100"},e.createElement("h4",{className:"text-sm font-bold text-blue-900 mb-3 flex items-center gap-2"},e.createElement(dn,{size:16}),"Priode de restriction"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 mb-2"},"Date de dbut"),e.createElement("input",{type:"datetime-local",value:L.startDate,onChange:ke=>Q(mt=>({...mt,startDate:ke.target.value})),className:"w-full rounded-lg border-2 border-gray-200 bg-white px-4 py-2.5 text-sm font-medium focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1.5"},"Optionnel - Laissez vide pour commencer immdiatement")),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-700 mb-2"},"Date de fin"),e.createElement("input",{type:"datetime-local",value:L.endDate,onChange:ke=>Q(mt=>({...mt,endDate:ke.target.value})),className:"w-full rounded-lg border-2 border-gray-200 bg-white px-4 py-2.5 text-sm font-medium focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1.5"},"Optionnel - Laissez vide pour une restriction permanente")))),e.createElement("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-100"},e.createElement("label",{className:"block text-sm font-bold text-gray-900 mb-2 flex items-center gap-2"},e.createElement($m,{size:16,className:"text-amber-600"}),"Raison de la restriction",e.createElement("span",{className:"text-xs font-normal text-gray-500"},"(interne, visible uniquement par les administrateurs)")),e.createElement("textarea",{value:L.reason,onChange:ke=>Q(mt=>({...mt,reason:ke.target.value})),placeholder:"Ex: Spam dtect, comportement abusif, violation des rgles...",rows:3,className:"w-full rounded-lg border-2 border-gray-200 bg-white px-4 py-3 text-sm focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-200 resize-none transition-all"}),e.createElement("p",{className:"text-xs text-gray-500 mt-2"},"Cette raison sera enregistre dans l'historique des actions pour rfrence future.")),e.createElement("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-100"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement("div",{className:"p-1.5 bg-indigo-100 rounded-lg"},e.createElement($m,{size:16,className:"text-indigo-600"})),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-xs font-semibold text-indigo-900 mb-1"},"Information importante"),e.createElement("p",{className:"text-xs text-indigo-700 leading-relaxed"},"Cette restriction sera applique immdiatement aprs validation. L'utilisateur sera notifi si ncessaire. Les restrictions peuvent tre modifies ou supprimes  tout moment depuis cette page."))))),!he&&e.createElement("div",{className:"bg-green-50 rounded-xl p-5 border border-green-100 text-center"},e.createElement(za,{size:48,className:"text-green-500 mx-auto mb-3"}),e.createElement("p",{className:"text-sm font-semibold text-green-900 mb-1"},"Aucune restriction active"),e.createElement("p",{className:"text-xs text-green-700"},"L'utilisateur peut utiliser toutes les fonctionnalits normalement.")),l&&e.createElement("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 animate-in fade-in slide-in-from-top-2"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement(Yt,{size:20,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-red-900 mb-1"},"Erreur"),e.createElement("p",{className:"text-sm text-red-700"},l))))),e.createElement("div",{className:"border-t bg-gray-50 px-6 py-4 flex-shrink-0"},e.createElement("div",{className:"flex gap-3"},e.createElement("button",{type:"button",onClick:Mr,className:"flex-1 rounded-xl border-2 border-gray-300 bg-white px-4 py-3 text-sm font-bold text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all"},"Annuler"),e.createElement("button",{type:"button",onClick:br,disabled:Y,className:`flex-1 rounded-xl px-4 py-3 text-sm font-bold text-white shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${he?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"}`},Y?e.createElement("span",{className:"flex items-center justify-center gap-2"},e.createElement(Cs,{size:16,className:"animate-spin"}),"Traitement..."):he?e.createElement("span",{className:"flex items-center justify-center gap-2"},e.createElement(ix,{size:16}),"Appliquer la restriction"):e.createElement("span",{className:"flex items-center justify-center gap-2"},e.createElement(za,{size:16}),"Dsactiver la restriction"))))))})(),B.open&&B.user&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:Gt},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Commandes reues"),e.createElement("p",{className:"text-xs text-gray-500"},B.user.shopName||B.user.name)),e.createElement("button",{type:"button",onClick:Gt,className:"text-gray-400 hover:text-gray-600"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"flex-1 overflow-y-auto p-4"},ue?e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Chargement..."):te.length===0?e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Aucune commande trouve."):e.createElement("div",{className:"space-y-3"},te.map(F=>e.createElement("div",{key:F.id,className:"rounded-xl border border-gray-100 p-3 hover:bg-gray-50"},e.createElement("div",{className:"flex items-start justify-between gap-2 mb-2"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-bold text-gray-900"},"#",F.orderNumber),e.createElement("p",{className:"text-xs text-gray-500"},ri(F.createdAt))),e.createElement("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${F.status==="delivered"?"bg-green-100 text-green-700":F.status==="cancelled"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`},F.status)),e.createElement("div",{className:"text-xs text-gray-600 mb-2"},e.createElement("p",null,e.createElement("strong",null,"Acheteur:")," ",F.buyer?.name||""," (",F.buyer?.phone||"",")")),e.createElement("div",{className:"flex flex-wrap gap-2"},F.items.map((ie,he)=>e.createElement("div",{key:he,className:"flex items-center gap-2 bg-gray-100 rounded-lg px-2 py-1"},ie.product?.image&&e.createElement("img",{src:ie.product.image,alt:"",className:"w-8 h-8 rounded object-cover"}),e.createElement("div",{className:"text-xs"},e.createElement("p",{className:"font-medium text-gray-800 line-clamp-1"},ie.product?.title||"Produit"),e.createElement("p",{className:"text-gray-500"},"x",ie.quantity,"  ",Sw(ie.price)," FCFA"))))))))),U>1&&e.createElement("div",{className:"flex items-center justify-center gap-2 border-t px-4 py-3 flex-shrink-0"},e.createElement("button",{type:"button",onClick:()=>Zt(fe-1),disabled:fe<=1||ue,className:"rounded-lg border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Prcdent"),e.createElement("span",{className:"text-xs text-gray-600"},"Page ",fe," / ",U),e.createElement("button",{type:"button",onClick:()=>Zt(fe+1),disabled:fe>=U||ue,className:"rounded-lg border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Suivant")))),He.open&&He.user&&He.request&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:ht},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:F=>F.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between border-b px-6 py-4 flex-shrink-0"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Demande de conversion en boutique"),e.createElement("p",{className:"text-xs text-gray-500"},He.user.name," (",He.user.email,")")),e.createElement("button",{type:"button",onClick:ht,className:"text-gray-400 hover:text-gray-600"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6"},gt?e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Traitement en cours..."):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3"},e.createElement("h4",{className:"font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Er,{size:18,className:"text-indigo-600"}),"Informations de la boutique"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Nom de la boutique"),e.createElement("p",{className:"text-sm text-gray-900 mt-1"},He.request.shopName)),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Adresse"),e.createElement("p",{className:"text-sm text-gray-900 mt-1"},He.request.shopAddress)),He.request.shopDescription&&e.createElement("div",{className:"md:col-span-2"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Description"),e.createElement("p",{className:"text-sm text-gray-900 mt-1"},He.request.shopDescription)),He.request.shopLogo&&e.createElement("div",{className:"md:col-span-2"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Logo"),e.createElement("div",{className:"mt-2"},e.createElement("img",{src:He.request.shopLogo,alt:"Logo boutique",className:"w-24 h-24 object-cover rounded-lg border border-gray-200"}))))),e.createElement("div",{className:"bg-blue-50 rounded-xl p-4 space-y-3"},e.createElement("h4",{className:"font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Ea,{size:18,className:"text-blue-600"}),"Informations de paiement"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Oprateur"),e.createElement("p",{className:"text-sm text-gray-900 mt-1 font-semibold"},He.request.operator||"MTN")),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Montant"),e.createElement("p",{className:"text-sm text-gray-900 mt-1 font-semibold"},Number(He.request.paymentAmount||5e4).toLocaleString("fr-FR")," FCFA")),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600 flex items-center gap-1"},e.createElement(Sa,{size:14}),"Nom de la transaction"),e.createElement("p",{className:"text-sm text-gray-900 mt-1"},He.request.transactionName)),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold text-gray-600 flex items-center gap-1"},e.createElement(y2,{size:14}),"Numro de transaction"),e.createElement("p",{className:"text-sm text-gray-900 mt-1 font-mono"},He.request.transactionNumber)))),e.createElement("div",{className:"bg-green-50 rounded-xl p-4 space-y-3"},e.createElement("h4",{className:"font-semibold text-gray-900 flex items-center gap-2"},e.createElement(b2,{size:18,className:"text-green-600"}),"Preuve de paiement"),He.request.paymentProof&&e.createElement("div",{className:"mt-2"},e.createElement("img",{src:He.request.paymentProof,alt:"Preuve de paiement",className:"max-w-full h-auto rounded-lg border-2 border-gray-200 shadow-sm",onError:F=>{F.target.src="/api/placeholder/400/300"}}))),e.createElement("div",{className:"text-xs text-gray-500 space-y-1"},e.createElement("p",null,"Demande soumise le : ",ri(He.request.createdAt)),He.request.processedAt&&e.createElement("p",null,"Traite le : ",ri(He.request.processedAt))))),!gt&&e.createElement("div",{className:"flex items-center justify-end gap-3 border-t px-6 py-4 flex-shrink-0"},e.createElement("button",{type:"button",onClick:ht,className:"px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},"Fermer"),e.createElement("button",{type:"button",onClick:()=>nr(He.request._id),disabled:gt,className:"px-4 py-2 text-sm font-semibold text-red-600 border border-red-500 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50"},e.createElement(Ba,{size:16,className:"inline mr-1"}),"Rejeter"),e.createElement("button",{type:"button",onClick:()=>Lt(He.request._id),disabled:gt,className:"px-4 py-2 text-sm font-semibold text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50"},e.createElement(ar,{size:16,className:"inline mr-1"}),"Approuver")))),me.open&&me.user&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:dt},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:F=>F.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between border-b px-4 py-3 flex-shrink-0"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Historique des actions"),e.createElement("p",{className:"text-xs text-gray-500"},me.user.name," (",me.user.email,")")),e.createElement("button",{type:"button",onClick:dt,className:"text-gray-400 hover:text-gray-600"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"flex-1 overflow-y-auto p-4"},be?e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Chargement..."):ee.length===0?e.createElement("p",{className:"text-sm text-gray-500 text-center py-8"},"Aucune action enregistre."):e.createElement("div",{className:"space-y-3"},ee.map(F=>e.createElement("div",{key:F.id,className:"rounded-xl border border-gray-100 p-3 hover:bg-gray-50"},e.createElement("div",{className:"flex items-start justify-between gap-2 mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${de(F.action)}`},It(F.action))),e.createElement("span",{className:"text-xs text-gray-400"},ri(F.createdAt))),e.createElement("div",{className:"text-xs text-gray-600 space-y-1"},F.performedBy&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Par:")," ",F.performedBy.name," (",F.performedBy.email,")"),F.details?.restrictionType&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Restriction:")," ",F.details.restrictionLabel||F.details.restrictionType),F.details?.reason&&e.createElement("p",{className:"italic text-gray-500"},e.createElement("span",{className:"font-semibold not-italic"},"Raison:")," ",F.details.reason),F.details?.previousRole&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Rle:")," ",F.details.previousRole,"  ",F.details.newRole),F.details?.previousType&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Type de compte:")," ",F.details.previousType==="shop"?"Boutique":"Particulier","  ",F.details.newType==="shop"?"Boutique":"Particulier"),F.details?.shopName&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Nom boutique:")," ",F.details.shopName),F.details?.shopAddress&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Adresse boutique:")," ",F.details.shopAddress),F.details?.startDate&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Dbut:")," ",ri(F.details.startDate)),F.details?.endDate&&e.createElement("p",null,e.createElement("span",{className:"font-semibold"},"Fin:")," ",ri(F.details.endDate)),F.ipAddress&&e.createElement("p",{className:"text-gray-400"},e.createElement("span",{className:"font-semibold"},"IP:")," ",F.ipAddress)))))),tt>1&&e.createElement("div",{className:"flex items-center justify-center gap-2 border-t px-4 py-3 flex-shrink-0"},e.createElement("button",{type:"button",onClick:()=>ut(Ge-1),disabled:Ge<=1||be,className:"rounded-lg border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Prcdent"),e.createElement("span",{className:"text-xs text-gray-600"},"Page ",Ge," / ",tt),e.createElement("button",{type:"button",onClick:()=>ut(Ge+1),disabled:Ge>=tt||be,className:"rounded-lg border border-gray-300 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Suivant")))),V&&e.createElement("div",{className:"fixed inset-0 z-10",onClick:()=>q(null)}))}const wh="AES-GCM",U$=256,pie=12,fie=async()=>await crypto.subtle.generateKey({name:wh,length:U$},!0,["encrypt","decrypt"]),gie=async t=>{const r=await crypto.subtle.exportKey("raw",t),a=new Uint8Array(r);return btoa(String.fromCharCode(...a))},hie=async t=>{const r=atob(t),a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return await crypto.subtle.importKey("raw",a,{name:wh,length:U$},!0,["encrypt","decrypt"])},bie=async(t,r)=>{if(!t)return null;const n=new TextEncoder().encode(t),s=crypto.getRandomValues(new Uint8Array(pie)),o=await crypto.subtle.encrypt({name:wh,iv:s},r,n),l=new Uint8Array(o),c=l.slice(-16),m=l.slice(0,-16);return{encrypted:btoa(String.fromCharCode(...m)),iv:btoa(String.fromCharCode(...s)),tag:btoa(String.fromCharCode(...c))}},xie=async(t,r)=>{if(!t||!t.encrypted)return null;try{const a=Uint8Array.from(atob(t.encrypted),m=>m.charCodeAt(0)),n=Uint8Array.from(atob(t.iv),m=>m.charCodeAt(0)),s=Uint8Array.from(atob(t.tag),m=>m.charCodeAt(0)),o=new Uint8Array(a.length+s.length);o.set(a),o.set(s,a.length);const l=await crypto.subtle.decrypt({name:wh,iv:n},r,o);return new TextDecoder().decode(l)}catch(a){return console.error("Decryption error:",a),null}},yie=async t=>{const r=`hdmarket_chat_key_${t}`;try{const s=localStorage.getItem(r);if(s)return{key:await hie(s),keyString:s}}catch(s){console.error("Error loading stored key:",s)}const a=await fie(),n=await gie(a);try{localStorage.setItem(r,n)}catch(s){console.error("Error storing key:",s)}return{key:a,keyString:n}},vie=t=>{const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},Eie=t=>{const r=new Date(t);if(Number.isNaN(r.getTime()))return"";const a=new Date,n=new Date(a);return n.setDate(n.getDate()-1),r.toDateString()===a.toDateString()?"Aujourd'hui":r.toDateString()===n.toDateString()?"Hier":r.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})},B0=t=>t&&{...t,_id:t._id??t.id,sender:t.sender?{...t.sender,_id:t.sender._id??t.sender.id??t.sender}:t.sender,recipient:t.recipient?{...t.recipient,_id:t.recipient._id??t.recipient.id??t.recipient}:t.recipient,createdAt:t.createdAt??t.created_at},wie=t=>{const r={};return t.forEach(a=>{const n=new Date(a.createdAt||0).toDateString();r[n]||(r[n]=[]),r[n].push(a)}),r},dO=["Bonjour, je souhaite avoir des informations","Quand sera livr ma commande ?","Merci pour votre rponse","Pouvez-vous me rappeler ?"];function Yd({order:t,onClose:r,unreadCount:a=0,buttonText:n="Contacter le vendeur",defaultOpen:s=!1,onArchive:o,onDelete:l}){const{user:c}=u.useContext(Sr),[m,p]=u.useState(s),[f,g]=u.useState([]),[b,x]=u.useState(!1),[v,E]=u.useState(!1),[y,w]=u.useState(""),[k,C]=u.useState(""),[A,S]=u.useState(!1),[P,T]=u.useState(!1),[O,R]=u.useState(!1),[D,$]=u.useState([]),[j,K]=u.useState(null),[H,V]=u.useState(""),[q,Y]=u.useState(!1),[z,L]=u.useState(0),[Q,B]=u.useState(()=>{try{return localStorage.getItem("hdmarket_order_chat_encryption")==="true"}catch{return!1}}),[ae,te]=u.useState(null),[ge,ue]=u.useState(null),[Ee,fe]=u.useState(""),[re,U]=u.useState(!1),[W,me]=u.useState(!1),[ne,ee]=u.useState(!1),[ve,be]=u.useState(!1),J=u.useRef(null),Ge=u.useRef(null),je=u.useRef(null),tt=u.useRef(null),At=u.useRef(null),He=u.useRef(null),Tt=u.useRef([]),Re=u.useRef(!1),et=t?.items?.[0]?.snapshot?.shopId?{_id:t.items[0].snapshot.shopId,name:t.items[0].snapshot.shopName}:null,gt=t?.items?.[0],Ze=gt?.snapshot?.title||"Produit",xt=gt?.snapshot?.image||null,Dt=u.useMemo(()=>{const ie=gt?.snapshot?.slug,he=gt?.product;return ie?Dr({slug:ie}):he?`/product/${he}`:""},[gt?.snapshot?.slug,gt?.product]),nt=!!Dt,Me=c?._id&&t?.customer?._id&&String(c._id)===String(t.customer._id),Qe=et&&c?._id&&String(c._id)===String(et._id),wt=c?.role==="admin"||c?.role==="manager",lt=t?._id!=null?String(t._id):t?.id!=null?String(t.id):null;u.useEffect(()=>{if(m&&lt){Re.current=!1,vt();const ie=setInterval(vt,2500);return()=>clearInterval(ie)}},[m,lt]),u.useEffect(()=>{Q&&ae&&f.length>0&&(async()=>{const he=await Promise.all(f.map(async ke=>{if(ke.encryptedText&&!ke.isDecrypted&&ke.metadata?.iv&&ke.metadata?.tag)try{const mt=await xie({encrypted:ke.encryptedText,iv:ke.metadata.iv,tag:ke.metadata.tag},ae);if(mt)return{...ke,text:mt,isDecrypted:!0}}catch(mt){console.error("Decryption error:",mt)}return ke}));g(he)})()},[Q,ae,f.length]),u.useEffect(()=>{dt()},[f]),u.useEffect(()=>{m&&je.current&&je.current.focus()},[m]),u.useEffect(()=>{Q&&c?._id&&!ae&&yie(c._id).then(({key:ie})=>{te(ie)}).catch(ie=>{console.error("Error initializing encryption key:",ie)})},[Q,c?._id,ae]);const we=u.useMemo(()=>{if(!Ee.trim())return f;const ie=Ee.toLowerCase().trim();return f.filter(he=>{const ke=(he.text||"").toLowerCase(),mt=(he.sender?.name||he.sender?.shopName||"").toLowerCase();return ke.includes(ie)||mt.includes(ie)})},[f,Ee]),vt=async()=>{if(!lt)return;const ie=!Re.current;try{ie&&x(!0);const{data:he}=await oe.get(`/orders/${lt}/messages`),mt=(Array.isArray(he)?he:[]).map(B0);g(G=>{const Z=G.filter(Te=>Te.pending);if(Z.length===0)return mt;const le=new Set(mt.map(Te=>String(Te._id))),_e=Z.filter(Te=>!le.has(String(Te._id))),Be=[...mt,..._e];return Be.sort((Te,Se)=>new Date(Te.createdAt||0)-new Date(Se.createdAt||0)),Be}),w("")}catch(he){w(he.response?.data?.message||"Impossible de charger les messages.")}finally{ie&&(x(!1),Re.current=!0)}},pt=async(ie,he=null,ke=null)=>{ie?.preventDefault();const mt=k.trim(),G=he?.length||D.length;if(!mt&&!G&&!ke||v)return;let le=k.trim(),_e=null,Be=null;if(Q&&ae&&le)try{const Je=await bie(le,ae);_e=Je.encrypted,Be={iv:Je.iv,tag:Je.tag,salt:Je.salt,key:await(async()=>{const qt=await crypto.subtle.exportKey("raw",ae),lr=new Uint8Array(qt);return btoa(String.fromCharCode(...lr))})()},le="[Message chiffr]"}catch(Je){console.error("Encryption error:",Je)}C(""),E(!0),w(""),S(!1);const Te=`pending-${Date.now()}`,Se={_id:Te,text:Q&&_e?"[Message chiffr]":le,sender:{_id:c?._id,name:c?.name,shopName:c?.shopName},recipient:null,createdAt:new Date().toISOString(),pending:!0,isDecrypted:!Q};he?.length?Se.attachments=he:D.length&&(Se.attachments=[...D]),ke&&(Se.voiceMessage=ke),g(Je=>[...Je,B0(Se)]),dt();try{const Je=Oe=>Oe==null?null:typeof Oe=="string"?Oe:typeof Oe=="object"&&Oe?._id?String(Oe._id):String(Oe);let qt=null;if(wt){const Oe=Je(t?.customer?._id??t?.customer);Oe&&Oe===String(c?._id)?qt=Je(et?._id):qt=Oe}else Me?qt=Je(et?._id):Qe&&(qt=Je(t?.customer?._id??t?.customer));const lr={text:Q&&_e?null:le,encryptedText:Q&&_e?_e:null,encryptionData:Q&&Be?Be:null,attachments:he?.length?he:D.length?D:null,voiceMessage:ke||null,recipientId:qt};lr.text==null&&!lr.encryptedText&&!lr.attachments&&!lr.voiceMessage&&(lr.text=le?.trim()||"[Message chiffr]");const{data:Nr}=await oe.post(`/orders/${lt}/messages`,lr),ra=Nr&&B0({...Nr,createdAt:Nr.createdAt??new Date().toISOString()});g(Oe=>[...Oe.filter(gr=>gr._id!==Te&&!gr.pending),ra]),$([]),dt()}catch(Je){g(Oe=>Oe.filter(it=>it._id!==Te&&!it.pending));const qt=Je.response?.data,lr=qt?.message||"Impossible d'envoyer le message.",Nr=qt?.details,ra=Nr?.length?`${lr} (${Nr.join("; ")})`:lr;w(ra),C(le)}finally{E(!1)}},Le=async ie=>{const he=Array.from(ie.target.files||[]);if(he.length!==0){K(0),V(he.length>1?`1/${he.length}`:he[0].name||""),w("");try{const ke=[],mt=he.length;for(let G=0;G<he.length;G++){const Z=he[G];V(mt>1?`${G+1}/${mt}`:Z.name||"");const le=new FormData;le.append("file",Z);const{data:_e}=await oe.post("/orders/messages/upload",le,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Be=>{if(Be.total&&Be.total>0){const Te=Math.round(Be.loaded/Be.total*100),Se=mt>1?Math.round((G+Te/100)/mt*100):Te;K(Math.min(100,Se))}else K(mt>1?Math.round((G+.5)/mt*100):50)}});ke.push({type:_e.type,url:_e.url,filename:_e.filename,size:_e.size,mimeType:_e.mimeType})}K(100),$(G=>[...G,...ke])}catch(ke){console.error("File upload error:",ke),w("Erreur lors de l'upload du fichier.")}finally{K(null),V(""),tt.current&&(tt.current.value="")}}},pe=async()=>{try{const ie=await navigator.mediaDevices.getUserMedia({audio:!0}),he=new MediaRecorder(ie),ke=[];he.ondataavailable=G=>{G.data.size>0&&ke.push(G.data)},he.onstop=async()=>{const G=new Blob(ke,{type:"audio/webm"}),Z=new FormData;Z.append("file",G,"voice-message.webm");try{const{data:le}=await oe.post("/orders/messages/upload",Z,{headers:{"Content-Type":"multipart/form-data"}}),_e={url:le.url,duration:z,type:"audio"};await pt(null,null,_e)}catch(le){console.error("Voice message upload error:",le),w("Erreur lors de l'envoi du message vocal.")}ie.getTracks().forEach(le=>le.stop()),Tt.current=[],L(0)},At.current=he,Tt.current=ke,Y(!0),L(0),he.start();const mt=setInterval(()=>{L(G=>G+1)},1e3);He.current=mt}catch(ie){console.error("Error starting recording:",ie),w("Impossible d'accder au microphone.")}},Pe=()=>{At.current&&At.current.state!=="inactive"&&(At.current.stop(),Y(!1),He.current&&(clearInterval(He.current),He.current=null))},ft=async(ie,he)=>{if(!(!ie||!he))try{await oe.post(`/orders/messages/${ie}/reactions`,{emoji:he}),vt()}catch(ke){console.error("Error adding reaction:",ke)}},ht=async ie=>{if(ie)try{await oe.delete(`/orders/messages/${ie}/reactions`),vt()}catch(he){console.error("Error removing reaction:",he)}},[Lt,nr]=u.useState(null),[er,Nt]=u.useState(null),[sr,Rt]=u.useState(""),[zt,mr]=u.useState(null),Mr=async ie=>{if(!(!ie||!lt)&&window.confirm("Supprimer ce message pour tout le monde ?")){nr(ie),w("");try{await oe.delete(`/orders/${lt}/messages/${ie}`),g(he=>he.filter(ke=>String(ke._id)!==String(ie)))}catch(he){const ke=he.response?.data?.message||"Impossible de supprimer le message.";w(ke)}finally{nr(null)}}},br=ie=>{if(!ie)return!1;const he=String(ie.sender?._id)===String(c?._id),ke=!(ie.attachments?.length>0)&&!ie.voiceMessage?.url;return he&&ke},or=ie=>{const he=ie.isDecrypted?ie.text||"":ie.text||"[Message chiffr]";Nt(ie._id),Rt(he),w("")},Gt=()=>{Nt(null),Rt("")},Zt=async()=>{if(er==null)return;const ie=sr.trim();if(!ie){w("Le message ne peut pas tre vide.");return}mr(er),w("");try{const{data:he}=await oe.patch(`/orders/${lt}/messages/${er}`,{text:ie}),ke=B0(he);g(mt=>mt.map(G=>String(G._id)===String(er)?ke:G)),Gt()}catch(he){const ke=he.response?.data?.message||"Impossible de modifier le message.";w(ke)}finally{mr(null)}},se=ie=>{C(ie),S(!1),setTimeout(()=>{pt()},100)},dt=()=>{J.current&&J.current.scrollIntoView({behavior:"smooth"})};if(!m)return e.createElement("button",{type:"button",onClick:()=>p(!0),className:"relative inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]"},e.createElement(Hr,{className:"w-4 h-4"}),e.createElement("span",null,n),a>0&&e.createElement("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full min-w-[22px] text-center animate-pulse shadow-lg"},a>99?"99+":a));const ut=t?.customer?.name||t?.customer?.email||null,It=wt?ut||"Client":Me?et?.name||"Vendeur":ut||"Client",de=wt||Qe,De=wie(we),F=t?.deliveryCode||t?._id?.slice(-6)||"";return e.createElement("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm"},e.createElement("div",{className:"bg-white dark:bg-gray-900 w-full sm:rounded-2xl sm:max-w-lg sm:mx-4 h-full sm:h-[85vh] sm:max-h-[700px] flex flex-col shadow-2xl overflow-hidden animate-in slide-in-from-bottom-4 duration-300 border border-gray-200/50 dark:border-gray-700/50"},e.createElement("header",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",style:{paddingTop:"max(0.75rem, env(safe-area-inset-top, 0px))"}},e.createElement("div",{className:"flex items-center justify-between gap-3 px-4 py-3"},e.createElement("div",{className:"flex items-center gap-3 flex-1 min-w-0"},e.createElement("button",{type:"button",onClick:()=>{p(!1),r&&r()},className:"flex-shrink-0 p-2 -ml-1 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200 transition-colors sm:hidden","aria-label":"Retour"},e.createElement(Gr,{className:"w-5 h-5"})),e.createElement("div",{className:"relative flex-shrink-0"},xt?e.createElement("img",{src:xt,alt:Ze,className:"w-12 h-12 rounded-xl object-cover ring-2 ring-gray-100 dark:ring-gray-700"}):e.createElement("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-400 dark:text-gray-500"},Me?e.createElement(Er,{className:"w-6 h-6"}):e.createElement(Ia,{className:"w-6 h-6"})),e.createElement("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-gray-900 rounded-full",title:"En ligne"})),e.createElement("div",{className:"flex-1 min-w-0"},de&&e.createElement("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide truncate"},"Client"),e.createElement("h2",{className:"font-semibold text-gray-900 dark:text-white truncate"},de?ut||"":It),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5"},e.createElement("span",{className:"truncate"},"#",F),e.createElement("span",{className:"flex-shrink-0"},""),e.createElement("span",{className:"flex items-center gap-1 flex-shrink-0"},e.createElement(cn,{className:"w-3 h-3"}),"Scuris")))),e.createElement("div",{className:"flex items-center gap-0.5 flex-shrink-0"},e.createElement("button",{type:"button",onClick:()=>U(!re),className:`p-2.5 rounded-lg transition-colors ${re?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200"}`,title:"Rechercher dans les messages"},e.createElement(Tr,{className:"w-5 h-5"})),e.createElement("button",{type:"button",onClick:()=>T(!P),className:`p-2.5 rounded-lg transition-colors ${P?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200"}`,title:"Informations commande"},e.createElement(v2,{className:"w-5 h-5"})),e.createElement("div",{className:"relative"},e.createElement("button",{type:"button",onClick:()=>me(!W),className:"p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200 transition-colors",title:"Options"},e.createElement(uj,{className:"w-5 h-5"})),W&&e.createElement(e.Fragment,null,e.createElement("div",{className:"fixed inset-0 z-40",onClick:()=>me(!1),"aria-hidden":"true"}),e.createElement("div",{className:"absolute right-0 top-full mt-1 py-1 w-52 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg z-50"},nt&&e.createElement(ye,{to:Dt,onClick:()=>{me(!1),p(!1),r?.()},className:"flex items-center gap-2 px-3 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-xl"},e.createElement(fN,{className:"w-4 h-4"}),"Voir le produit"),typeof o=="function"&&e.createElement("button",{type:"button",disabled:ne,onClick:async()=>{if(lt){ee(!0);try{await oe.post(`/orders/${lt}/archive`),me(!1),p(!1),o(),r?.()}catch(ie){w(ie.response?.data?.message||"Impossible d'archiver.")}finally{ee(!1)}}},className:"flex w-full items-center gap-2 px-3 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50"},ne?e.createElement(vs,{className:"w-4 h-4 animate-spin"}):e.createElement(h2,{className:"w-4 h-4"}),"Archiver la conversation"),typeof l=="function"&&e.createElement("button",{type:"button",disabled:ve,onClick:async()=>{if(lt){be(!0);try{await oe.post(`/orders/${lt}/delete`),me(!1),p(!1),l(),r?.()}catch(ie){w(ie.response?.data?.message||"Impossible de supprimer.")}finally{be(!1)}}},className:"flex w-full items-center gap-2 px-3 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 disabled:opacity-50 rounded-b-xl"},ve?e.createElement(vs,{className:"w-4 h-4 animate-spin"}):e.createElement(is,{className:"w-4 h-4"}),"Supprimer la conversation")))),e.createElement("button",{type:"button",onClick:()=>{p(!1),r&&r()},className:"hidden sm:flex p-2.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200 transition-colors","aria-label":"Fermer"},e.createElement(jt,{className:"w-5 h-5"}))))),re&&e.createElement("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 px-4 py-3"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),e.createElement("input",{type:"text",value:Ee,onChange:ie=>fe(ie.target.value),placeholder:"Rechercher dans les messages...",className:"w-full pl-10 pr-10 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",autoFocus:!0}),Ee&&e.createElement("button",{type:"button",onClick:()=>fe(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg text-gray-400 hover:bg-gray-200 hover:text-gray-600 dark:hover:bg-gray-700 dark:hover:text-gray-300 transition-colors"},e.createElement(jt,{className:"w-4 h-4"}))),Ee&&e.createElement("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400"},we.length," message",we.length!==1?"s":""," trouv",we.length!==1?"s":"")),P&&e.createElement("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 px-4 py-4 space-y-4"},e.createElement("div",{className:"flex items-center gap-4"},xt&&e.createElement("img",{src:xt,alt:Ze,className:"w-16 h-16 rounded-xl object-cover flex-shrink-0 ring-1 ring-gray-200 dark:ring-gray-600"}),e.createElement("div",{className:"flex-1 min-w-0"},nt?e.createElement(ye,{to:Dt,onClick:()=>{T(!1),p(!1),r?.()},className:"font-semibold text-gray-900 dark:text-white truncate block hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors"},Ze):e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white truncate"},Ze),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},"Commande #",F),nt&&e.createElement(ye,{to:Dt,onClick:()=>{T(!1),p(!1),r?.()},className:"inline-flex items-center gap-1.5 mt-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline"},e.createElement(fN,{className:"w-4 h-4"}),"Voir le produit"))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-600 dark:text-gray-400"},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Ga,{className:"w-4 h-4 text-emerald-500"}),"Transaction protge"),e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(pa,{className:"w-4 h-4 text-indigo-500"}),"Donnes scurises"))),e.createElement("div",{ref:Ge,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/80 dark:bg-gray-900/80 min-h-0"},de&&ut&&e.createElement("div",{className:"flex justify-center mb-2"},e.createElement("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-xs font-medium text-gray-600 dark:text-gray-400 shadow-sm"},e.createElement(Ia,{className:"w-3.5 h-3.5 text-indigo-500 dark:text-indigo-400"}),"Client : ",ut)),Ee&&we.length===0&&!b?e.createElement("div",{className:"flex flex-col items-center justify-center min-h-[200px] text-center px-6 py-8"},e.createElement("div",{className:"w-14 h-14 rounded-2xl bg-gray-200 dark:bg-gray-700 flex items-center justify-center mb-4"},e.createElement(Tr,{className:"w-7 h-7 text-gray-500 dark:text-gray-400"})),e.createElement("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1"},"Aucun rsultat"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Aucun message ne correspond   ",Ee," ")):b&&f.length===0?e.createElement("div",{className:"flex flex-col items-center justify-center min-h-[200px] gap-4 py-8"},e.createElement("div",{className:"w-10 h-10 rounded-full border-2 border-gray-200 border-t-indigo-600 dark:border-gray-700 dark:border-t-indigo-500 animate-spin"}),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Chargement des messages...")):f.length===0?e.createElement("div",{className:"flex flex-col items-center justify-center min-h-[200px] text-center px-6 py-8"},e.createElement("div",{className:"w-14 h-14 rounded-2xl bg-indigo-100 dark:bg-indigo-900/40 flex items-center justify-center mb-4"},e.createElement(Hr,{className:"w-7 h-7 text-indigo-600 dark:text-indigo-400"})),e.createElement("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1"},"Dmarrez la conversation"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-5 max-w-xs"},"Posez vos questions concernant cette commande. Vos messages sont scuriss."),e.createElement("div",{className:"flex flex-wrap justify-center gap-2"},dO.slice(0,2).map((ie,he)=>e.createElement("button",{key:he,type:"button",onClick:()=>se(ie),className:"px-4 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors"},ie)))):Object.entries(De).map(([ie,he])=>e.createElement("div",{key:ie},e.createElement("div",{className:"flex items-center justify-center my-4"},e.createElement("span",{className:"px-3 py-1.5 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-xs font-medium text-gray-600 dark:text-gray-400 shadow-sm"},Eie(he[0].createdAt))),e.createElement("div",{className:"space-y-3"},he.map((ke,mt)=>{const G=String(ke.sender?._id)===String(c?._id),Z=!G&&(mt===0||String(he[mt-1]?.sender?._id)!==String(ke.sender?._id)),le=ke.pending===!0;return e.createElement("div",{key:ke._id??ke.id??`msg-${mt}`,className:`flex items-end gap-2 ${G?"justify-end":"justify-start"}`},!G&&e.createElement("div",{className:`w-8 h-8 flex-shrink-0 ${Z?"":"invisible"}`},ke.sender?.shopName?e.createElement("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-400 to-indigo-600 flex items-center justify-center text-white text-xs font-bold"},ke.sender.shopName.charAt(0).toUpperCase()):e.createElement("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-gray-300 to-gray-400 flex items-center justify-center"},e.createElement(Ia,{className:"w-4 h-4 text-white"}))),e.createElement("div",{className:`max-w-[80%] sm:max-w-[75%] group ${G?"bg-indigo-600 text-white rounded-2xl rounded-br-md shadow-sm":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-2xl rounded-bl-md shadow-sm"} px-4 py-2.5 relative ${le?"opacity-80":""}`},!G&&Z&&e.createElement("p",{className:"text-xs font-semibold mb-1 text-indigo-600 dark:text-indigo-400"},ke.sender?.shopName||ke.sender?.name||"Utilisateur"),er===ke._id?e.createElement("div",{className:"space-y-2"},e.createElement("textarea",{value:sr,onChange:_e=>Rt(_e.target.value),onKeyDown:_e=>{_e.key==="Escape"&&Gt()},className:"w-full min-h-[80px] px-3 py-2 rounded-lg text-sm bg-white/10 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/40 resize-none",placeholder:"Modifier le message...",rows:3,autoFocus:!0}),e.createElement("div",{className:"flex items-center gap-2 justify-end"},e.createElement("button",{type:"button",onClick:Gt,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/20 hover:bg-white/30 text-white text-sm transition-colors"},e.createElement(jt,{className:"w-3.5 h-3.5"}),"Annuler"),e.createElement("button",{type:"button",onClick:Zt,disabled:zt===ke._id||!sr.trim(),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white text-indigo-600 hover:bg-indigo-50 text-sm font-medium transition-colors disabled:opacity-50"},zt===ke._id?e.createElement(vs,{className:"w-3.5 h-3.5 animate-spin"}):e.createElement(li,{className:"w-3.5 h-3.5"}),"Enregistrer"))):e.createElement(e.Fragment,null,ke.attachments&&ke.attachments.length>0&&e.createElement("div",{className:"mb-1.5 flex flex-wrap gap-2"},ke.attachments.map((_e,Be)=>e.createElement("div",{key:_e.url||_e.filename||`att-${Be}`,className:"relative"},_e.type==="image"?e.createElement("img",{src:_e.url,alt:_e.filename,className:"max-h-28 max-w-[200px] rounded-lg object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>ue(_e.url)}):_e.type==="audio"?e.createElement("div",{className:`flex items-center gap-2 rounded-lg px-3 py-2 ${G?"bg-white/20":"bg-gray-100 dark:bg-gray-700"}`},e.createElement("span",{className:"text-xs"},_e.filename),ke.voiceMessage?.duration&&e.createElement("span",{className:"text-[11px] opacity-80"},Math.round(ke.voiceMessage.duration),"s")):e.createElement("a",{href:_e.url,download:_e.filename,className:`flex items-center gap-2 rounded-lg px-3 py-2 ${G?"bg-white/20 hover:bg-white/30":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`},e.createElement(K4,{className:"h-4 w-4"}),e.createElement("span",{className:"text-xs"},_e.filename),e.createElement(zo,{className:"h-3 w-3"}))))),e.createElement("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed"},Ee?(()=>{const _e=ke.isDecrypted?ke.text:ke.text||"[Message chiffr]";if(!_e)return _e;const Be=new RegExp(`(${Ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return _e.split(Be).map((Se,Je)=>Be.test(Se)?e.createElement("mark",{key:Je,className:"bg-yellow-200 dark:bg-yellow-800 text-gray-900 dark:text-yellow-100 rounded px-0.5"},Se):Se)})():ke.isDecrypted?ke.text:ke.text||"[Message chiffr]"),ke.reactions&&ke.reactions.length>0&&e.createElement("div",{className:"mt-1 flex flex-wrap gap-1"},Object.entries(ke.reactions.reduce((_e,Be)=>(_e[Be.emoji]=(_e[Be.emoji]||0)+1,_e),{})).map(([_e,Be])=>e.createElement("button",{key:_e,type:"button",onClick:()=>{ke.reactions?.some(Se=>Se.userId===c?._id&&Se.emoji===_e)?ht(ke._id):ft(ke._id,_e)},className:"flex items-center gap-1 rounded-full bg-white/20 px-2 py-0.5 text-xs hover:bg-white/30 dark:bg-gray-700/50"},e.createElement("span",null,_e),Be>1&&e.createElement("span",null,Be)))),e.createElement("div",{className:`flex items-center gap-1 mt-0.5 ${G?"justify-end":"justify-start"}`},e.createElement("span",{className:`text-[10px] ${G?"text-indigo-200":"text-gray-400 dark:text-gray-500"}`},vie(ke.createdAt)),G&&!le&&e.createElement("span",{className:"text-indigo-200"},ke.readAt?e.createElement(mj,{className:"w-3.5 h-3.5"}):e.createElement(li,{className:"w-3.5 h-3.5"})),G&&br(ke)&&!le&&e.createElement("button",{type:"button",onClick:()=>or(ke),title:"Modifier le message",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity p-0.5 rounded hover:bg-white/20 text-indigo-200 hover:text-white"},e.createElement(QB,{className:"w-3.5 h-3.5"})),G&&!le&&e.createElement("button",{type:"button",onClick:()=>Mr(ke._id),disabled:Lt===ke._id,title:"Supprimer le message",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity p-0.5 rounded hover:bg-white/20 disabled:opacity-50 text-indigo-200 hover:text-white"},Lt===ke._id?e.createElement(vs,{className:"w-3.5 h-3.5 animate-spin"}):e.createElement(is,{className:"w-3.5 h-3.5"}))))))})))),O&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},e.createElement(Ia,{className:"w-4 h-4 text-gray-500"})),e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl rounded-bl-md px-4 py-2.5 border border-gray-200 dark:border-gray-600 shadow-sm"},e.createElement("div",{className:"flex gap-1"},e.createElement("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),e.createElement("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"150ms"}}),e.createElement("div",{className:"w-2 h-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"300ms"}})))),e.createElement("div",{ref:J})),ge&&e.createElement("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-sm",onClick:()=>ue(null)},e.createElement("button",{type:"button",onClick:()=>ue(null),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors","aria-label":"Fermer"},e.createElement(jt,{className:"w-6 h-6"})),e.createElement("div",{className:"relative max-w-[90vw] max-h-[90vh] p-4"},e.createElement("img",{src:ge,alt:"Image agrandie",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:ie=>ie.stopPropagation()}))),A&&e.createElement("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 px-4 py-3"},e.createElement("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"},"Rponses rapides"),e.createElement("div",{className:"flex flex-wrap gap-2"},dO.map((ie,he)=>e.createElement("button",{key:he,type:"button",onClick:()=>se(ie),className:"px-3 py-2 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-sm text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors"},ie)))),y&&e.createElement("div",{className:"flex-shrink-0 px-4 py-2.5 bg-red-50 dark:bg-red-900/20 border-t border-red-200 dark:border-red-800 flex items-center gap-2"},e.createElement(yN,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),e.createElement("p",{className:"text-sm text-red-700 dark:text-red-300 flex-1 min-w-0"},y),e.createElement("button",{type:"button",onClick:()=>w(""),className:"flex-shrink-0 p-1 rounded-lg text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors","aria-label":"Fermer"},e.createElement(jt,{className:"w-4 h-4"}))),j!=null&&e.createElement("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-3"},e.createElement("div",{className:"flex items-center justify-between gap-3 mb-2"},e.createElement("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300"},"Envoi en cours"),e.createElement("span",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400 tabular-nums"},j,"%")),e.createElement("div",{className:"h-2 w-full rounded-full bg-indigo-200 dark:bg-indigo-800 overflow-hidden"},e.createElement("div",{className:"h-full bg-indigo-600 dark:bg-indigo-500 rounded-full transition-all duration-300 ease-out",style:{width:`${j}%`}})),H&&e.createElement("p",{className:"mt-1.5 text-xs text-indigo-600 dark:text-indigo-400 truncate"},H)),D.length>0&&e.createElement("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 px-4 py-2"},e.createElement("div",{className:"flex flex-wrap gap-2"},D.map((ie,he)=>e.createElement("div",{key:ie.url||ie.filename||`preview-att-${he}`,className:"relative"},ie.type==="image"?e.createElement("div",{className:"relative"},e.createElement("img",{src:ie.url,alt:ie.filename,className:"h-16 w-16 rounded-lg object-cover"}),e.createElement("button",{type:"button",onClick:()=>$(ke=>ke.filter((mt,G)=>G!==he)),className:"absolute -right-1 -top-1 rounded-full bg-red-500 p-0.5 text-white"},e.createElement(jt,{className:"h-3 w-3"}))):e.createElement("div",{className:"flex items-center gap-2 rounded-lg bg-white dark:bg-gray-700 px-2 py-1"},e.createElement(K4,{className:"h-4 w-4"}),e.createElement("span",{className:"text-xs"},ie.filename),e.createElement("button",{type:"button",onClick:()=>$(ke=>ke.filter((mt,G)=>G!==he)),className:"text-red-500"},e.createElement(jt,{className:"h-3 w-3"}))))))),e.createElement("form",{onSubmit:pt,className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))"}},e.createElement("div",{className:"flex items-end gap-2"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement("input",{ref:tt,type:"file",multiple:!0,accept:"image/*,video/*,application/pdf,.doc,.docx,.txt,audio/*",onChange:Le,className:"hidden"}),e.createElement("button",{type:"button",onClick:()=>tt.current?.click(),disabled:j!=null,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Joindre un fichier"},e.createElement(pd,{className:"h-5 w-5"})),q?e.createElement("button",{type:"button",onClick:Pe,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-red-500 text-white transition-colors hover:bg-red-600",title:"Arrter l'enregistrement"},e.createElement(FB,{className:"h-5 w-5"})):e.createElement("button",{type:"button",onMouseDown:pe,onMouseUp:Pe,onTouchStart:pe,onTouchEnd:Pe,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-300",title:"Enregistrer un message vocal"},e.createElement(BB,{className:"h-5 w-5"}))),e.createElement("div",{className:"flex-1 relative"},e.createElement("textarea",{ref:je,value:k,onChange:ie=>C(ie.target.value),placeholder:q?`Enregistrement... ${z}s`:"Tapez votre message...",rows:1,maxLength:1e3,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none text-sm transition-all",style:{minHeight:"44px",maxHeight:"120px"},disabled:q,onKeyDown:ie=>{ie.key==="Enter"&&!ie.shiftKey&&!q&&(ie.preventDefault(),pt(ie))},onInput:ie=>{ie.target.style.height="auto",ie.target.style.height=Math.min(ie.target.scrollHeight,120)+"px"}})),e.createElement("button",{type:"button",onClick:()=>{const ie=["","","","","",""],he=ie[Math.floor(Math.random()*ie.length)],ke=f[f.length-1];ke&&!ke.pending&&ft(ke._id,he)},className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-300",title:"Ajouter une raction"},e.createElement(_q,{className:"h-5 w-5"})),e.createElement("button",{type:"submit",disabled:!k.trim()&&D.length===0||v||q,className:"flex-shrink-0 p-2.5 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow"},v?e.createElement(vs,{className:"w-5 h-5 animate-spin"}):e.createElement(Eu,{className:"w-5 h-5"}))),e.createElement("div",{className:"flex items-center justify-between mt-2 px-1 text-xs text-gray-400 dark:text-gray-500"},e.createElement("span",{className:"flex items-center gap-1 truncate min-w-0"},e.createElement(cn,{className:"w-3 h-3 flex-shrink-0"}),e.createElement("span",{className:"truncate"},Q?"Messages chiffrs":"Messages scuriss")),e.createElement("span",{className:`flex-shrink-0 ${k.length>900?"text-amber-500 dark:text-amber-400":""}`},k.length,"/1000")))))}const ul={pending:"En attente",confirmed:"Confirme",delivering:"En cours de livraison",delivered:"Livre",cancelled:"Annule"},q0={pending:"bg-gray-100 text-gray-700",confirmed:"bg-yellow-100 text-yellow-800",delivering:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},Nie=["Brazzaville","Pointe-Noire","Ouesso","Oyo"],Cw=12;function kie(){const{user:t}=u.useContext(Sr),[r,a]=bi(),n=r.get("orderId")||"",s=cs(),[o,l]=u.useState(null),[c,m]=u.useState(!1),[p,f]=u.useState([]),[g,b]=u.useState(!1),[x,v]=u.useState(""),[E,y]=u.useState("all"),[w,k]=u.useState(""),[C,A]=u.useState(""),[S,P]=u.useState(1),[T,O]=u.useState({total:0,totalPages:1}),[R,D]=u.useState(!1),[$,j]=u.useState(""),[K,H]=u.useState(""),[V,q]=u.useState(!1),[Y,z]=u.useState(null),[L,Q]=u.useState(!1),[B,ae]=u.useState(null),[te,ge]=u.useState(""),[ue,Ee]=u.useState(!1),[fe,re]=u.useState(""),[U,W]=u.useState(null),[me,ne]=u.useState(!1),[ee,ve]=u.useState([]),[be,J]=u.useState(!1),[Ge,je]=u.useState(""),[tt,At]=u.useState({}),[He,Tt]=u.useState(""),[Re,et]=u.useState(""),[gt,Ze]=u.useState([]),[xt,Dt]=u.useState([]),[nt,Me]=u.useState(null),[Qe,wt]=u.useState([]),[lt,we]=u.useState({deliveryAddress:"",deliveryCity:"Brazzaville",trackingNote:""}),vt=u.useCallback(()=>{z(null),Q(!1),q(!0)},[]),pt=u.useCallback(se=>{se&&(z(null),q(!1),ae(se),ge(se.deliveryGuy?._id||""),re(""),Q(!0))},[]),Le=u.useCallback(()=>{Q(!1),ae(null),ge(""),re("")},[]),pe=se=>Number(se||0).toLocaleString("fr-FR"),Pe=se=>String(se??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),ft=se=>se.items&&se.items.length?se.items:se.productSnapshot?[{snapshot:se.productSnapshot,quantity:1,product:se.product?._id}]:[],ht=se=>{const dt=ft(se),ut=Pe(se.deliveryGuy?.name||""),It=Pe(se.deliveryGuy?.phone||""),de=dt.reduce((Te,Se)=>{const Je=Number(Se.snapshot?.price||Se.product?.price||0),qt=Number(Se.quantity||1);return Te+Je*qt},0),De=Number(se.totalAmount??de),F=Number(se.paidAmount||0),ie=se.remainingAmount!=null?Number(se.remainingAmount):Math.max(0,De-F),he=Pe(se.paymentName||"Non renseign"),ke=Pe(se.paymentTransactionCode||"Non renseign"),mt=dt.map((Te,Se)=>{const Je=Pe(Te.snapshot?.title||"Produit"),qt=Pe(Te.snapshot?.shopName||""),lr=Pe(Te.snapshot?.confirmationNumber||""),Nr=Number(Te.quantity||1),ra=pe(Te.snapshot?.price||0),Oe=pe((Te.snapshot?.price||0)*Nr);return`
          <tr>
            <td>${Se+1}</td>
            <td>
              <div class="title">${Je}</div>
              ${qt?`<div class="meta">Boutique: ${qt}</div>`:""}
              ${lr?`<div class="meta">Code: ${lr}</div>`:""}
            </td>
            <td class="right">x${Nr}</td>
            <td class="right">${ra} FCFA</td>
            <td class="right">${Oe} FCFA</td>
          </tr>
        `}).join(""),G=Pe(se._id||""),Z=Pe(se._id?.slice(-6)||""),_e=`
      <!doctype html>
      <html lang="fr">
        <head>
          <meta charset="utf-8" />
          <title>Bon de commande et de livraison</title>
          <style>
            :root { color-scheme: light; }
            * { box-sizing: border-box; }
            body { font-family: "Helvetica Neue", Arial, sans-serif; margin: 32px; color: #111827; }
            .page { position: relative; z-index: 1; }
            .watermark {
              position: fixed;
              top: 45%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-18deg);
              font-size: 40px;
              letter-spacing: 0.4em;
              text-transform: uppercase;
              color: rgba(15, 23, 42, 0.08);
              white-space: nowrap;
              pointer-events: none;
              z-index: 0;
            }
            .header { display: flex; align-items: center; justify-content: space-between; border-bottom: 2px solid #e5e7eb; padding-bottom: 16px; }
            .brand { display: flex; align-items: center; gap: 12px; }
            .logo { width: 40px; height: 40px; border-radius: 10px; border: 1px solid #e5e7eb; padding: 6px; }
            .title { font-size: 22px; font-weight: 700; }
            .badge { font-size: 11px; letter-spacing: 0.2em; text-transform: uppercase; color: #6b7280; }
            .meta-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; margin-top: 20px; }
            .meta-box { border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px 14px; }
            .meta-box h4 { margin: 0 0 8px; font-size: 12px; text-transform: uppercase; letter-spacing: 0.2em; color: #6b7280; }
            .meta-box p { margin: 4px 0; font-size: 14px; }
            table { width: 100%; border-collapse: collapse; margin-top: 24px; }
            th, td { border-bottom: 1px solid #e5e7eb; padding: 10px; text-align: left; font-size: 13px; vertical-align: top; }
            th { background: #f9fafb; font-size: 12px; text-transform: uppercase; letter-spacing: 0.15em; color: #6b7280; }
            .right { text-align: right; }
            .total-row td { font-weight: 700; border-top: 2px solid #111827; }
            .signature { margin-top: 32px; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }
            .signature-box { border: 1px dashed #cbd5f5; border-radius: 12px; padding: 16px; min-height: 90px; }
            .signature-box h4 { margin: 0 0 8px; font-size: 12px; text-transform: uppercase; letter-spacing: 0.2em; color: #6b7280; }
            .signature-line { margin-top: 24px; border-bottom: 1px solid #9ca3af; height: 1px; }
            .notes { margin-top: 20px; font-size: 12px; color: #6b7280; }
            .print-actions { margin-top: 24px; display: flex; justify-content: flex-end; }
            .print-btn { padding: 10px 16px; border-radius: 999px; border: 1px solid #111827; background: #111827; color: #fff; font-weight: 600; cursor: pointer; }
            .security { margin-top: 12px; font-size: 11px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.2em; }
            @media print {
              body { margin: 0; }
              .print-actions { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="watermark">HDMarket  Document Officiel</div>
          <div class="page">
            <div class="header">
              <div class="brand">
                <img src="${`${window.location.origin}/favicon.svg`}" alt="HDMarket" class="logo" />
                <div>
                  <div class="title">Bon de commande et de livraison</div>
                  <div class="badge">HDMarket</div>
                </div>
              </div>
              <div class="right">
                <div class="badge">Commande #${Z}</div>
                <div>${Pe(new Date(se.createdAt).toLocaleDateString("fr-FR"))}</div>
                <div class="security">Rf: ${G}</div>
              </div>
            </div>

            <div class="meta-grid">
              <div class="meta-box">
                <h4>Client</h4>
                <p>${Pe(se.customer?.name||"Client")}</p>
                <p>${Pe(se.customer?.phone||"")}</p>
                <p>${Pe(se.customer?.email||"")}</p>
              </div>
            <div class="meta-box">
              <h4>Livraison</h4>
              <p>${Pe(se.deliveryAddress||"")}</p>
              <p>${Pe(se.deliveryCity||"")}</p>
              ${se.trackingNote?`<p>${Pe(se.trackingNote)}</p>`:""}
              ${ut?`<p>Livreur: ${ut}${It?`  ${It}`:""}</p>`:""}
            </div>
            <div class="meta-box">
              <h4>Paiement</h4>
              <p>Acompte vers: ${pe(F)} FCFA</p>
              <p>Reste  payer: ${pe(ie)} FCFA</p>
              <p>Nom du payeur: ${he}</p>
              <p>Transaction: ${ke}</p>
            </div>
            </div>

            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Article</th>
                  <th class="right">Qt</th>
                  <th class="right">Prix</th>
                  <th class="right">Total</th>
                </tr>
              </thead>
              <tbody>
                ${mt}
                <tr class="total-row">
                  <td colspan="4" class="right">Total commande</td>
                  <td class="right">${pe(De)} FCFA</td>
                </tr>
              </tbody>
            </table>

            <div class="signature">
              <div class="signature-box">
                <h4>Signature client</h4>
                <div class="signature-line"></div>
                <p class="notes">Nom & signature  la livraison.</p>
              </div>
              <div class="signature-box">
                <h4>Signature livreur</h4>
                <div class="signature-line"></div>
                <p class="notes">Nom & signature.</p>
              </div>
            </div>

            <p class="notes">
              Ce document fait foi de bon de commande et de livraison. Merci de vrifier les articles avant signature.
              Toute copie doit comporter la rfrence unique ${G}.
            </p>

            <div class="print-actions">
              <button class="print-btn" id="print-btn">Imprimer / PDF</button>
            </div>

            <script>
              document.getElementById('print-btn').addEventListener('click', () => window.print());
            <\/script>
          </div>
        </body>
      </html>
    `,Be=window.open("","_blank");if(!Be){const Te=new Blob([_e],{type:"text/html"}),Se=URL.createObjectURL(Te);window.location.href=Se,setTimeout(()=>URL.revokeObjectURL(Se),1500);return}Be.document.open(),Be.document.write(_e),Be.document.close(),Be.focus()},Lt=se=>{wt(dt=>dt.some(ut=>ut.product._id===se._id)?dt:[...dt,{product:se,quantity:1}])},nr=se=>{wt(dt=>dt.filter(ut=>ut.product._id!==se))},er=(se,dt)=>{const ut=Math.max(1,Number(dt)||1);wt(It=>It.map(de=>de.product._id===se?{...de,quantity:ut}:de))},Nt=u.useCallback(async()=>{m(!0);try{const se=C?{search:C}:{},{data:dt}=await oe.get("/orders/admin/stats",{params:se});l(dt)}catch(se){console.error("Erreur stats commandes:",se)}finally{m(!1)}},[C]),sr=u.useCallback(async()=>{J(!0),je("");try{const{data:se}=await oe.get("/admin/delivery-guys?limit=100"),dt=Array.isArray(se)?se:se?.items||[];ve(dt)}catch(se){je(se.response?.data?.message||"Impossible de charger les livreurs."),ve([])}finally{J(!1)}},[]),Rt=u.useCallback(async se=>{if(!se||se.length===0||!t?._id)return{};try{return(await Promise.all(se.map(async ut=>{try{const{data:It}=await oe.get(`/orders/${ut}/messages`),de=Array.isArray(It)?It.filter(De=>String(De.recipient?._id)===String(t._id)&&!De.readAt):[];return{orderId:ut,count:de.length}}catch{return{orderId:ut,count:0}}}))).reduce((ut,{orderId:It,count:de})=>(ut[It]=de,ut),{})}catch{return{}}},[t?._id]),zt=u.useCallback(async()=>{b(!0),v("");try{const se=new URLSearchParams;se.set("page",S),se.set("limit",Cw),E!=="all"&&se.append("status",E),C&&se.append("search",C),n&&se.set("orderId",n);const{data:dt}=await oe.get(`/orders/admin?${se.toString()}`),ut=Array.isArray(dt)?dt:dt?.items||[],It=new Set,de=ut.filter(ie=>!ie?._id||It.has(ie._id)?!1:(It.add(ie._id),!0));f(de);const De=ut.map(ie=>ie._id),F=await Rt(De);At(F),O({total:dt?.total??ut.length,totalPages:dt?.totalPages??1}),dt?.page&&dt.page!==S&&P(dt.page)}catch(se){v(se.response?.data?.message||se.message||"Impossible de charger les commandes."),f([]),O({total:0,totalPages:1})}finally{b(!1)}},[E,C,S,n]),mr=u.useCallback(async(se="")=>{try{const{data:dt}=await oe.get(se.trim()?`/orders/admin/customers?search=${encodeURIComponent(se.trim())}`:"/orders/admin/customers");Ze(Array.isArray(dt)?dt:[])}catch(dt){console.error("Erreur chargement clients",dt)}},[]),Mr=u.useCallback(async(se="")=>{try{const{data:dt}=await oe.get(se.trim()?`/orders/admin/products?search=${encodeURIComponent(se.trim())}`:"/orders/admin/products");Dt(Array.isArray(dt)?dt:[])}catch(dt){console.error("Erreur chargement produits",dt)}},[]);u.useEffect(()=>{Nt()},[Nt]),u.useEffect(()=>{mr(),Mr(),sr()},[mr,Mr,sr]),u.useEffect(()=>{zt()},[zt]),u.useEffect(()=>{if(g||!n||!p.some(ut=>ut._id===n))return;const dt=document.getElementById(`order-${n}`);dt&&(dt.scrollIntoView({behavior:"smooth",block:"start"}),a(ut=>{const It=new URLSearchParams(ut);return It.delete("orderId"),It},{replace:!0}))},[g,n,p,a]),u.useEffect(()=>{const se=setTimeout(()=>{A(w.trim())},400);return()=>clearTimeout(se)},[w]),u.useEffect(()=>{P(1)},[E,C]);const br=async(se,dt)=>{const ut=p.find(It=>It._id===se);try{const{data:It}=await oe.patch(`/orders/admin/${se}`,dt),de=It,De=ut?.status,F=de?.status||De,ie=E!=="all"&&F&&E!==F;if(f(he=>{if(!Array.isArray(he))return he;if(ie)return he.filter(G=>G._id!==se);const ke=he.map(G=>G._id===se?de:G),mt=new Set;return ke.filter(G=>!G?._id||mt.has(G._id)?!1:(mt.add(G._id),!0))}),ie){const he=Math.max(0,(T.total||0)-1),ke=Math.max(1,Math.ceil(he/Cw));O(mt=>({...mt,total:he,totalPages:ke})),S>ke&&P(ke)}return De&&F&&De!==F&&(l(he=>he?.statusCounts?{...he,statusCounts:{...he.statusCounts,[De]:Math.max(0,(he.statusCounts[De]||0)-1),[F]:(he.statusCounts[F]||0)+1}}:he),z({orderId:se,status:F})),de}catch(It){return alert(It.response?.data?.message||"Impossible de mettre  jour la commande."),null}},or=async se=>{if(se){ne(!0);try{await oe.delete(`/orders/admin/${se}`),f(ut=>ut.filter(It=>It._id!==se)),O(ut=>({...ut,total:Math.max(0,(ut.total||0)-1),totalPages:Math.max(1,Math.ceil(Math.max(0,(ut.total||0)-1)/Cw))}));const dt=p.find(ut=>ut._id===se);dt?.status&&o?.statusCounts&&l(ut=>({...ut,statusCounts:{...ut?.statusCounts,[dt.status]:Math.max(0,(ut?.statusCounts?.[dt.status]||0)-1)}})),W(null),await Nt()}catch(dt){alert(dt.response?.data?.message||"Impossible de supprimer la commande.")}finally{ne(!1)}}},Gt=async se=>{if(se.preventDefault(),!(!nt||Qe.length===0)){D(!0),j(""),H("");try{await oe.post("/orders/admin",{customerId:nt._id,deliveryAddress:lt.deliveryAddress.trim(),deliveryCity:lt.deliveryCity,trackingNote:lt.trackingNote.trim(),items:Qe.map(({product:dt,quantity:ut})=>({productId:dt._id,quantity:ut}))}),H("Commande cre avec succs."),Me(null),wt([]),we({deliveryAddress:"",deliveryCity:"Brazzaville",trackingNote:""}),q(!1),await Promise.all([zt(),Nt()])}catch(dt){j(dt.response?.data?.message||"Impossible de crer la commande.")}finally{D(!1)}}};u.useEffect(()=>{nt&&we(se=>({...se,deliveryAddress:nt.address||se.deliveryAddress||"",deliveryCity:nt.city||se.deliveryCity||"Brazzaville"}))},[nt]),u.useEffect(()=>{V||(j(""),H(""))},[V]),u.useEffect(()=>{L||(re(""),Ee(!1))},[L]),u.useEffect(()=>{},[U]);const Zt=()=>e.createElement("div",{className:"flex flex-wrap gap-2"},["all","pending","confirmed","delivering","delivered","cancelled"].map(se=>{const dt=se==="pending"&&o?.statusCounts?.pending||0,ut=o?.statusCounts?.[se]||0,It=E===se;return e.createElement("button",{key:se,type:"button",onClick:()=>y(se),className:`px-4 py-2 text-xs font-semibold rounded-3xl border-2 transition-all duration-200 active:scale-95 flex items-center gap-2 shadow-sm ${It?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white border-indigo-600 shadow-lg":"bg-white text-gray-700 border-gray-200 hover:border-indigo-300 hover:bg-indigo-50"}`},e.createElement("span",null,se==="all"?"Toutes":ul[se]),se==="pending"&&dt>0&&e.createElement("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${It?"bg-white/30 text-white":"bg-indigo-600 text-white"}`},dt),se!=="all"&&se!=="pending"&&ut>0&&e.createElement("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${It?"bg-white/30 text-white":"bg-indigo-600 text-white"}`},ut))}));return e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 py-6 space-y-6"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2"},e.createElement(ea,{className:"w-6 h-6 text-indigo-600"}),"Gestion des commandes"),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("button",{type:"button",onClick:vt,className:"inline-flex items-center gap-2 rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700"},e.createElement(Bo,{className:"h-4 w-4"}),"Crer une commande"),e.createElement(ye,{to:"/admin",className:"text-sm text-indigo-600 hover:text-indigo-500 flex items-center gap-1"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour au tableau de bord"))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},["pending","confirmed","delivering","delivered","cancelled"].map(se=>{const dt=c?0:o?.statusCounts?.[se]||0,ut={pending:"bg-gradient-to-br from-gray-50 to-gray-100",confirmed:"bg-gradient-to-br from-amber-50 to-yellow-100",delivering:"bg-gradient-to-br from-blue-50 to-indigo-100",delivered:"bg-gradient-to-br from-emerald-50 to-green-100",cancelled:"bg-gradient-to-br from-red-50 to-pink-100"},It={pending:"text-gray-600",confirmed:"text-amber-600",delivering:"text-blue-600",delivered:"text-emerald-600",cancelled:"text-red-600"};return e.createElement("div",{key:se,className:`${ut[se]} border-2 border-transparent rounded-3xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105`},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:`w-12 h-12 rounded-2xl ${ut[se]} flex items-center justify-center shadow-md`},se==="pending"&&e.createElement(Xt,{className:`w-6 h-6 ${It[se]}`}),se==="confirmed"&&e.createElement(Ft,{className:`w-6 h-6 ${It[se]}`}),se==="delivering"&&e.createElement(Kr,{className:`w-6 h-6 ${It[se]}`}),se==="delivered"&&e.createElement(ar,{className:`w-6 h-6 ${It[se]}`}),se==="cancelled"&&e.createElement(jt,{className:`w-6 h-6 ${It[se]}`}))),e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase font-bold text-gray-600 mb-1 tracking-wide"},ul[se]),e.createElement("p",{className:`text-3xl font-black ${It[se]}`},c?"...":dt.toLocaleString("fr-FR"))))})),V&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>q(!1)}),e.createElement("div",{className:"relative w-full max-w-5xl rounded-3xl bg-white shadow-xl border border-gray-100 p-4 sm:p-6 max-h-[85vh] overflow-auto",onClick:se=>se.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between gap-3 mb-4"},e.createElement("div",{className:"flex items-center gap-2 text-gray-900 font-semibold text-lg"},e.createElement(Bo,{className:"w-5 h-5 text-green-600"}),"Crer une commande"),e.createElement("button",{type:"button",onClick:()=>q(!1),className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Fermer"},"X")),e.createElement("form",{className:"space-y-4",onSubmit:Gt},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-600 flex items-center gap-2"},e.createElement(Ia,{size:16}),"Client"),e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.createElement("input",{type:"text",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Recherche client",value:He,onChange:se=>{Tt(se.target.value),mr(se.target.value)}})),e.createElement("div",{className:"max-h-40 overflow-auto border border-gray-100 rounded-xl divide-y divide-gray-100"},gt.map(se=>e.createElement("button",{type:"button",key:se._id,onClick:()=>Me(se),className:`w-full text-left px-3 py-2 text-sm flex flex-col ${nt?._id===se._id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50"}`},e.createElement("span",{className:"font-semibold"},se.name),e.createElement("span",{className:"text-xs text-gray-500"},se.email),e.createElement("span",{className:"text-xs text-gray-500"},se.phone))))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-600 flex items-center gap-2"},e.createElement(Ft,{size:16}),"Produit"),e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.createElement("input",{type:"text",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Recherche produit",value:Re,onChange:se=>{et(se.target.value),Mr(se.target.value)}})),e.createElement("div",{className:"max-h-40 overflow-auto border border-gray-100 rounded-xl divide-y divide-gray-100"},xt.map(se=>{const dt=Qe.some(ut=>ut.product._id===se._id);return e.createElement("div",{key:se._id,className:"px-3 py-2 text-sm flex flex-col gap-1 hover:bg-gray-50"},e.createElement("div",{className:"flex items-center justify-between gap-2"},e.createElement("div",null,e.createElement("span",{className:"font-semibold text-gray-900"},se.title),e.createElement("span",{className:"block text-xs text-gray-500"},Number(se.price||0).toLocaleString()," FCFA "," ",se.user?.shopName||se.user?.name||"Boutique")),e.createElement("button",{type:"button",onClick:()=>Lt(se),disabled:dt,className:`px-2 py-1 text-xs rounded-full border ${dt?"border-gray-200 text-gray-400 cursor-not-allowed":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`},dt?"Ajout":"Ajouter")))})),Qe.length>0&&e.createElement("div",{className:"mt-4 bg-gray-50 rounded-2xl border border-gray-100 p-3 space-y-2"},e.createElement("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide"},"Produits slectionns"),Qe.map(({product:se,quantity:dt})=>e.createElement("div",{key:se._id,className:"flex items-center gap-3 text-sm bg-white rounded-xl border border-gray-100 px-3 py-2"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"font-medium text-gray-900"},se.title),e.createElement("p",{className:"text-xs text-gray-500"},Number(se.price||0).toLocaleString()," FCFA")),e.createElement("input",{type:"number",min:1,value:dt,onChange:ut=>er(se._id,ut.target.value),className:"w-16 border border-gray-200 rounded-lg px-2 py-1 text-sm text-center"}),e.createElement("button",{type:"button",onClick:()=>nr(se._id),className:"text-xs text-red-600 hover:text-red-500"},"Retirer")))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},e.createElement(Wr,{size:16}),"Adresse de livraison *"),e.createElement("textarea",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,value:lt.deliveryAddress,onChange:se=>we(dt=>({...dt,deliveryAddress:se.target.value})),required:!0})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},e.createElement(Kr,{size:16}),"Ville de livraison *"),e.createElement("select",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:lt.deliveryCity,onChange:se=>we(dt=>({...dt,deliveryCity:se.target.value}))},Nie.map(se=>e.createElement("option",{key:se,value:se},se))),e.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},e.createElement(Cd,{size:16}),"Note de suivi"),e.createElement("textarea",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,value:lt.trackingNote,onChange:se=>we(dt=>({...dt,trackingNote:se.target.value}))}))),$&&e.createElement("p",{className:"text-sm text-red-600"},$),K&&e.createElement("p",{className:"text-sm text-green-600"},K),e.createElement("button",{type:"submit",disabled:R||!nt||Qe.length===0||!lt.deliveryAddress.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 text-white px-4 py-2 text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50"},e.createElement(Bo,{size:16}),"Ajouter la commande")))),L&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:Le}),e.createElement("div",{className:"relative w-full max-w-md rounded-3xl bg-white shadow-xl border border-gray-100 p-6",onClick:se=>se.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between gap-3 mb-4"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Assigner un livreur"),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Commande #",B?._id?.slice(-6))),e.createElement("button",{type:"button",onClick:Le,className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Fermer"},"X")),e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},e.createElement(Kr,{size:16}),"Livreur"),e.createElement("select",{value:te,onChange:se=>ge(se.target.value),className:"mt-2 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:be||ue},e.createElement("option",{value:""},"Assigner un livreur"),ee.map(se=>e.createElement("option",{key:se._id,value:se._id},se.name))),Ge&&e.createElement("p",{className:"mt-2 text-xs text-red-500"},Ge),fe&&e.createElement("p",{className:"mt-2 text-xs text-red-500"},fe)),e.createElement("button",{type:"button",onClick:async()=>{if(!B?._id)return;Ee(!0),re(""),await br(B._id,{deliveryGuyId:te})?Le():(re("Impossible de mettre  jour le livreur."),Ee(!1))},disabled:ue,className:"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 text-white px-4 py-2 text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50"},ue?"Mise  jour...":"Enregistrer")))),Y&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>z(null)}),e.createElement("div",{className:"relative w-full max-w-sm rounded-3xl bg-white shadow-xl border border-gray-100 p-6 text-center",onClick:se=>se.stopPropagation()},e.createElement("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-green-100 text-green-600"},e.createElement(ar,{className:"h-6 w-6"})),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Statut mis  jour"),e.createElement("p",{className:"mt-1 text-sm text-gray-600"},"Commande #",Y.orderId.slice(-6),"  ",ul[Y.status]),e.createElement("button",{type:"button",onClick:()=>z(null),className:"mt-4 inline-flex items-center justify-center rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 hover:border-gray-300"},"OK"))),U&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>!me&&W(null)}),e.createElement("div",{className:"relative w-full max-w-sm rounded-3xl bg-white shadow-xl border border-gray-100 p-6",onClick:se=>se.stopPropagation()},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full bg-red-100 text-red-600"},e.createElement(is,{className:"h-6 w-6"})),e.createElement("div",{className:"text-left"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Supprimer la commande"),e.createElement("p",{className:"text-sm text-gray-600"},"Commande #",U._id?.slice(-6),"  ",U.customer?.name||"Client"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},"Cette action est irrversible. La commande et ses messages seront dfinitivement supprims."),e.createElement("div",{className:"flex gap-3"},e.createElement("button",{type:"button",onClick:()=>!me&&W(null),disabled:me,className:"flex-1 rounded-xl border border-gray-200 px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Annuler"),e.createElement("button",{type:"button",onClick:()=>or(U._id),disabled:me,className:"flex-1 rounded-xl bg-red-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-red-700 disabled:opacity-50"},me?"Suppression...":"Supprimer")))),e.createElement("section",{className:"bg-gradient-to-br from-white to-gray-50 rounded-3xl border-2 border-gray-200 shadow-xl p-5 sm:p-6 space-y-5"},e.createElement("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"flex flex-wrap items-center gap-3"},Zt()),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"relative flex-1 sm:flex-initial sm:min-w-[300px]"},e.createElement(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("input",{type:"text",placeholder:"Rechercher par produit, client, adresse...",value:w,onChange:se=>k(se.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-3xl border-2 border-gray-200 bg-white text-sm font-medium text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",title:"Rechercher par nom de produit, nom du client, email, tlphone, adresse de livraison ou note de suivi"})),e.createElement("button",{type:"button",onClick:zt,disabled:g,className:"inline-flex items-center justify-center gap-2 rounded-3xl bg-gray-100 border-2 border-gray-200 px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-200 transition-all duration-200 active:scale-95 shadow-sm disabled:opacity-60"},e.createElement(Cd,{className:`w-4 h-4 ${g?"animate-spin":""}`}),e.createElement("span",{className:"hidden sm:inline"},"Actualiser")))),x&&e.createElement("p",{className:"text-sm text-red-600"},x),g?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des commandes"):p.length===0?e.createElement("p",{className:"text-sm text-gray-500 text-center py-6"},"Aucune commande  afficher."):e.createElement(e.Fragment,null,e.createElement("div",{className:"space-y-3 md:hidden"},p.map(se=>{const dt=se.items&&se.items.length?se.items:se.productSnapshot?[{snapshot:se.productSnapshot,quantity:1,product:se.product?._id}]:[],ut=dt.reduce((F,ie)=>{const he=Number(ie.snapshot?.price||ie.product?.price||0),ke=Number(ie.quantity||1);return F+he*ke},0),It=Number(se.totalAmount??ut),de=Number(se.paidAmount||0),De=se.remainingAmount!=null?Number(se.remainingAmount):Math.max(0,It-de);return e.createElement("div",{id:`order-${se._id}`,key:se._id,className:"bg-white border border-gray-100 rounded-2xl p-4 shadow-sm space-y-3 scroll-mt-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"text-sm font-semibold text-gray-900"},"Commande #",se._id.slice(-6)),e.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-[11px] font-semibold ${q0[se.status]||q0.pending}`},ul[se.status]||"Inconnu")),e.createElement("div",{className:"text-xs text-gray-500 flex items-center gap-1"},e.createElement(Xt,{size:12}),new Date(se.createdAt).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})),e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Ia,{size:14}),se.customer?.name||"Client"),e.createElement("p",{className:"text-xs text-gray-500"},se.customer?.phone),e.createElement("p",{className:"text-xs text-gray-500"},se.customer?.email)),e.createElement("div",{className:"space-y-2 text-sm text-gray-700"},dt.map(F=>e.createElement("div",{key:`${se._id}-${F.product}-${F.snapshot?.title}`,className:"space-y-0.5"},e.createElement("div",{className:"flex items-center justify-between gap-2"},e.createElement("span",{className:"font-medium truncate"},F.snapshot?.title||"Produit"),e.createElement("span",{className:"text-xs text-gray-500"},"x",F.quantity,"  ",Number(F.snapshot?.price||0).toLocaleString()," FCFA")),F.snapshot?.confirmationNumber&&e.createElement("span",{className:"text-[11px] text-indigo-600 font-semibold uppercase tracking-wide"},"Code produit : ",F.snapshot.confirmationNumber)))),se.deliveryCode&&e.createElement("div",{className:"rounded-xl border-2 border-indigo-200 bg-indigo-50 p-3 mb-3"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(Ga,{size:14,className:"text-indigo-600"}),e.createElement("p",{className:"text-[11px] font-semibold text-indigo-700 uppercase tracking-wide"},"Code de livraison")),e.createElement("div",{className:"text-center"},e.createElement("span",{className:"text-2xl font-black text-indigo-900 tracking-wider font-mono"},se.deliveryCode))),e.createElement("div",{className:"space-y-1 text-sm text-gray-700"},e.createElement("p",{className:"flex items-center gap-1"},e.createElement(Wr,{size:14,className:"text-gray-500"}),se.deliveryCity),e.createElement("p",{className:"text-xs text-gray-500"},se.deliveryAddress),se.trackingNote&&e.createElement("p",{className:"text-xs text-gray-500 italic"},se.trackingNote)),e.createElement("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3 text-xs text-slate-600 space-y-1"},e.createElement("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-500"},"Paiement"),e.createElement("p",null,"Acompte vers:"," ",e.createElement("span",{className:"font-semibold text-slate-900"},pe(de)," FCFA")),e.createElement("p",null,"Reste  payer:"," ",e.createElement("span",{className:"font-semibold text-slate-900"},pe(De)," FCFA")),e.createElement("p",null,"Nom du payeur: ",se.paymentName||"Non renseign"),e.createElement("p",null,"Transaction: ",se.paymentTransactionCode||"Non renseign")),e.createElement("div",{className:"space-y-2"},e.createElement("select",{value:se.status,onChange:F=>br(se._id,{status:F.target.value}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},Object.keys(ul).map(F=>e.createElement("option",{key:F,value:F},ul[F]))),e.createElement("div",{className:"rounded-xl border border-gray-100 bg-gray-50 px-3 py-2"},e.createElement("p",{className:"text-[11px] uppercase tracking-wide text-gray-500"},"Livreur"),e.createElement("p",{className:"text-xs text-gray-700"},se.deliveryGuy?.name||"Non assign"),e.createElement("button",{type:"button",onClick:()=>pt(se),className:"mt-2 text-xs font-semibold text-indigo-600 hover:underline"},"Assigner un livreur")),e.createElement("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,value:se.trackingNote||"",onChange:F=>br(se._id,{trackingNote:F.target.value})}),e.createElement("div",{className:"rounded-xl border border-indigo-100 bg-indigo-50 p-3"},e.createElement(Yd,{order:se,buttonText:"Contacte l'acheteur",unreadCount:tt[se._id]||0})),se.status==="confirmed"&&e.createElement("button",{type:"button",onClick:()=>ht(se),className:"w-full inline-flex items-center justify-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-3 py-2 text-xs font-semibold text-indigo-700 hover:bg-indigo-100"},e.createElement(ea,{size:14}),"Bon de commande (PDF)"),se.status==="cancelled"&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 space-y-1"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(jt,{className:"w-4 h-4 text-red-600"}),e.createElement("p",{className:"text-xs font-bold text-red-800"},"Commande annule")),se.cancellationReason&&e.createElement("p",{className:"text-xs text-red-700"},"Raison: ",se.cancellationReason),se.cancelledAt&&e.createElement("p",{className:"text-xs text-red-600"},"Annule le ",new Date(se.cancelledAt).toLocaleString("fr-FR"))),e.createElement("button",{type:"button",onClick:()=>W(se),className:"w-full inline-flex items-center justify-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-100"},e.createElement(is,{size:14}),"Supprimer")))})),e.createElement("div",{className:"hidden md:block overflow-x-auto"},e.createElement("table",{className:"min-w-full divide-y divide-gray-200 text-sm"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Commande"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Client"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Livraison"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Statut"),e.createElement("th",{className:"px-3 py-2 text-left font-semibold text-gray-600"},"Actions"))),e.createElement("tbody",{className:"divide-y divide-gray-100"},p.map(se=>{const dt=se.items&&se.items.length?se.items:se.productSnapshot?[{snapshot:se.productSnapshot,quantity:1,product:se.product?._id}]:[],ut=dt.reduce((F,ie)=>{const he=Number(ie.snapshot?.price||ie.product?.price||0),ke=Number(ie.quantity||1);return F+he*ke},0),It=Number(se.totalAmount??ut),de=Number(se.paidAmount||0),De=se.remainingAmount!=null?Number(se.remainingAmount):Math.max(0,It-de);return e.createElement("tr",{id:`order-${se._id}`,key:se._id,className:"hover:bg-gray-50 scroll-mt-4"},e.createElement("td",{className:"px-3 py-3 space-y-2"},e.createElement("div",{className:"font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Ft,{size:14,className:"text-gray-400"}),"Commande #",se._id.slice(-6)),e.createElement("div",{className:"space-y-2 text-xs text-gray-600"},dt.map(F=>e.createElement("div",{key:`${se._id}-${F.product}-${F.snapshot?.title}`,className:"space-y-0.5"},e.createElement("div",null,e.createElement("span",{className:"font-semibold text-gray-900"},F.snapshot?.title||"Produit")," ",e.createElement("span",{className:"text-gray-500"},"x",F.quantity,"  ",Number(F.snapshot?.price||0).toLocaleString()," FCFA")),F.snapshot?.confirmationNumber&&e.createElement("span",{className:"block text-[11px] text-indigo-600 font-semibold uppercase tracking-wide"},"Code produit : ",F.snapshot.confirmationNumber)))),e.createElement("div",{className:"text-xs text-gray-400 flex items-center gap-1"},e.createElement(Xt,{size:12}),"Cre le"," ",new Date(se.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}))),e.createElement("td",{className:"px-3 py-3"},e.createElement("div",{className:"font-medium text-gray-900"},se.customer?.name),e.createElement("div",{className:"text-xs text-gray-500"},se.customer?.email),e.createElement("div",{className:"text-xs text-gray-500"},se.customer?.phone),e.createElement("div",{className:"mt-2 space-y-1 text-[11px] text-gray-500"},e.createElement("div",null,"Acompte vers:"," ",e.createElement("span",{className:"font-semibold text-gray-700"},pe(de)," FCFA")),e.createElement("div",null,"Reste  payer:"," ",e.createElement("span",{className:"font-semibold text-gray-700"},pe(De)," FCFA")),e.createElement("div",null,"Nom du payeur: ",se.paymentName||"Non renseign"),e.createElement("div",null,"Transaction: ",se.paymentTransactionCode||"Non renseign"))),e.createElement("td",{className:"px-3 py-3 text-xs text-gray-600"},se.deliveryCode&&e.createElement("div",{className:"mb-2 p-2 rounded-lg border border-indigo-200 bg-indigo-50"},e.createElement("div",{className:"flex items-center gap-1 mb-1"},e.createElement(Ga,{size:12,className:"text-indigo-600"}),e.createElement("span",{className:"font-semibold text-indigo-700"},"Code:")),e.createElement("span",{className:"text-lg font-black text-indigo-900 tracking-wider font-mono"},se.deliveryCode)),e.createElement("div",null,se.deliveryAddress),e.createElement("div",{className:"text-gray-500"},se.deliveryCity),se.trackingNote&&e.createElement("div",{className:"mt-1 italic text-gray-500"},se.trackingNote)),e.createElement("td",{className:"px-3 py-3"},e.createElement("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${q0[se.status]||q0.pending}`},ul[se.status]||"Inconnu")),e.createElement("td",{className:"px-3 py-3 space-y-2"},e.createElement("select",{value:se.status,onChange:F=>br(se._id,{status:F.target.value}),className:"w-full rounded-lg border border-gray-200 px-2 py-1 text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},Object.keys(ul).map(F=>e.createElement("option",{key:F,value:F},ul[F]))),e.createElement("div",{className:"rounded-lg border border-gray-100 bg-gray-50 px-2 py-2"},e.createElement("div",{className:"text-[11px] uppercase tracking-wide text-gray-500"},"Livreur"),e.createElement("div",{className:"text-xs text-gray-700"},se.deliveryGuy?.name||"Non assign"),e.createElement("button",{type:"button",onClick:()=>pt(se),className:"mt-1 text-[11px] font-semibold text-indigo-600 hover:underline"},"Assigner un livreur")),e.createElement("textarea",{className:"w-full rounded-lg border border-gray-200 px-2 py-1 text-xs text-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:2,value:se.trackingNote||"",onChange:F=>br(se._id,{trackingNote:F.target.value})}),e.createElement("div",{className:"rounded-lg border border-indigo-100 bg-indigo-50 p-2"},e.createElement(Yd,{order:se,buttonText:"Contacte l'acheteur",unreadCount:tt[se._id]||0})),se.status==="confirmed"&&e.createElement("button",{type:"button",onClick:()=>ht(se),className:"inline-flex w-full items-center justify-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-2 py-1 text-[11px] font-semibold text-indigo-700 hover:bg-indigo-100"},e.createElement(ea,{size:12}),"Bon de commande (PDF)"),se.status==="cancelled"&&e.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-2 space-y-1"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(jt,{className:"w-3 h-3 text-red-600"}),e.createElement("p",{className:"text-[11px] font-bold text-red-800"},"Annule")),se.cancellationReason&&e.createElement("p",{className:"text-[10px] text-red-700"},"Raison: ",se.cancellationReason),se.cancelledAt&&e.createElement("p",{className:"text-[10px] text-red-600"},"Le ",new Date(se.cancelledAt).toLocaleDateString("fr-FR"))),e.createElement("button",{type:"button",onClick:()=>W(se),className:"inline-flex w-full items-center justify-center gap-1 rounded-lg border border-red-200 bg-red-50 px-2 py-1 text-[11px] font-semibold text-red-700 hover:bg-red-100"},e.createElement(is,{size:12}),"Supprimer"),e.createElement("div",{className:"text-xs text-indigo-600 space-y-1"},dt.map(F=>F.product?e.createElement(ye,{key:`${se._id}-${F.product}-${F.snapshot?.title}-link`,to:Dr(F.product),...s,className:"block hover:text-indigo-500"},"Voir ",F.snapshot?.title||"Produit",""):e.createElement("span",{key:`${se._id}-${F.snapshot?.title}-text`,className:"block text-gray-500"},F.snapshot?.title||"Produit indisponible")))))})))),e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between border-t border-gray-100 pt-4"},e.createElement("p",{className:"text-sm text-gray-500"},"Page ",S," sur ",T.totalPages,"  ",T.total," commande",T.total>1?"s":""),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>P(se=>Math.max(1,se-1)),disabled:S<=1,className:"px-4 py-2 rounded-xl border text-sm font-semibold text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>P(se=>Math.min(T.totalPages,se+1)),disabled:S>=T.totalPages,className:"px-4 py-2 rounded-xl border text-sm font-semibold text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Suivant"))))))}function Sie(){const{user:t}=u.useContext(Sr),r=t?.role==="admin",[a,n]=u.useState([]),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState(!1),[f,g]=u.useState({name:"",phone:"",active:!0}),[b,x]=u.useState(null),[v,E]=u.useState(""),[y,w]=u.useState(""),[k,C]=u.useState(1),[A,S]=u.useState({total:0,totalPages:1}),[P,T]=u.useState([]),[O,R]=u.useState(!1),[D,$]=u.useState(""),[j,K]=u.useState(!1),[H,V]=u.useState([]),[q,Y]=u.useState(""),[z,L]=u.useState(""),Q=a.reduce((W,me)=>{W.total+=1,me.active&&(W.active+=1);const ne=me.stats||{};return W.assigned+=Number(ne.totalAssigned||0),W.delivering+=Number(ne.delivering||0),W.delivered+=Number(ne.delivered||0),W},{total:0,active:0,assigned:0,delivering:0,delivered:0});Q.inactive=Math.max(0,Q.total-Q.active);const B=async()=>{o(!0),c("");try{const W=new URLSearchParams;W.set("page",k),W.set("limit",12),y&&W.set("search",y);const{data:me}=await oe.get(`/admin/delivery-guys?${W.toString()}`),ne=Array.isArray(me)?me:me?.items||[];n(ne),S({total:me?.total??ne.length,totalPages:me?.totalPages??1}),me?.page&&me.page!==k&&C(me.page)}catch(W){c(W.response?.data?.message||"Impossible de charger les livreurs."),S({total:0,totalPages:1})}finally{o(!1)}};u.useEffect(()=>{B()},[k,y]),u.useEffect(()=>{const W=setTimeout(()=>{w(v.trim())},300);return()=>clearTimeout(W)},[v]),u.useEffect(()=>{C(1)},[y]),u.useEffect(()=>{if(!q)return;const W=setTimeout(()=>Y(""),3e3);return()=>clearTimeout(W)},[q]);const ae=u.useMemo(()=>new Set(P.map(W=>String(W.id||W._id))),[P]),te=u.useCallback(async()=>{if(r){R(!0);try{const{data:W}=await oe.get("/admin/delivery-managers");T(Array.isArray(W?.managers)?W.managers:[])}catch(W){console.error("Load delivery managers error:",W),T([])}finally{R(!1)}}},[r]);u.useEffect(()=>{te()},[te]);const ge=()=>{g({name:"",phone:"",active:!0}),x(null)},ue=async W=>{if(W.preventDefault(),!!f.name.trim()){p(!0),c("");try{b?await oe.patch(`/admin/delivery-guys/${b}`,{name:f.name.trim(),phone:f.phone.trim(),active:f.active}):await oe.post("/admin/delivery-guys",{name:f.name.trim(),phone:f.phone.trim(),active:f.active}),await B(),ge()}catch(me){c(me.response?.data?.message||"Impossible d'enregistrer le livreur.")}finally{p(!1)}}},Ee=W=>{x(W._id),g({name:W.name||"",phone:W.phone||"",active:!!W.active})},fe=async W=>{if(W){p(!0),c("");try{await oe.delete(`/admin/delivery-guys/${W}`),await B(),b===W&&ge()}catch(me){c(me.response?.data?.message||"Impossible de supprimer le livreur.")}finally{p(!1)}}},re=async()=>{if(D.trim()){K(!0);try{const{data:W}=await oe.get(`/admin/users?search=${encodeURIComponent(D.trim())}&limit=10`),me=Array.isArray(W)?W.filter(ne=>ne.role!=="admin"):[];V(me)}catch(W){console.error("Search users error:",W),V([])}finally{K(!1)}}},U=async W=>{if(!(!W||typeof W!="string")){if(!/^[0-9a-fA-F]{24}$/.test(W)){Y("Identifiant utilisateur invalide.");return}L(W);try{const{data:me}=await oe.patch(`/admin/delivery-managers/${W}/toggle`);Y(me?.message||"Statut mis  jour."),await te(),V([]),$("")}catch(me){Y(me.response?.data?.message||"Erreur lors de la mise  jour.")}finally{L("")}}};return e.createElement("div",{className:"max-w-5xl mx-auto p-6 space-y-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-12 h-12 rounded-2xl bg-indigo-100 flex items-center justify-center text-indigo-600"},e.createElement(Kr,{size:22})),e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Gestion des livreurs"),e.createElement("p",{className:"text-sm text-gray-500"},"Ajoutez, modifiez et activez les livreurs disponibles."))),l&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"},l),e.createElement("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs font-semibold uppercase text-gray-400"},"Livreurs"),e.createElement("p",{className:"mt-2 text-2xl font-semibold text-gray-900"},Q.total),e.createElement("p",{className:"text-xs text-gray-500"},"Total enregistrs")),e.createElement("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/40 p-4"},e.createElement("p",{className:"text-xs font-semibold uppercase text-emerald-500"},"Actifs"),e.createElement("p",{className:"mt-2 text-2xl font-semibold text-emerald-800"},Q.active),e.createElement("p",{className:"text-xs text-emerald-700"},Q.inactive," inactif(s)")),e.createElement("div",{className:"rounded-2xl border border-indigo-100 bg-indigo-50/40 p-4"},e.createElement("p",{className:"text-xs font-semibold uppercase text-indigo-500"},"Commandes assignes"),e.createElement("p",{className:"mt-2 text-2xl font-semibold text-indigo-800"},Q.assigned),e.createElement("p",{className:"text-xs text-indigo-700"},"Toutes priodes")),e.createElement("div",{className:"rounded-2xl border border-amber-100 bg-amber-50/40 p-4"},e.createElement("p",{className:"text-xs font-semibold uppercase text-amber-500"},"En livraison"),e.createElement("p",{className:"mt-2 text-2xl font-semibold text-amber-800"},Q.delivering),e.createElement("p",{className:"text-xs text-amber-700"},Q.delivered," livre(s)"))),r&&e.createElement("section",{className:"rounded-2xl border border-amber-100 bg-white p-5 shadow-sm space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center text-amber-600"},e.createElement(tn,{size:18})),e.createElement("div",null,e.createElement("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Accs gestion des livreurs"),e.createElement("p",{className:"text-xs text-gray-500"},"Autorisez un utilisateur  grer la page des livreurs."))),q&&e.createElement("div",{className:"flex items-center gap-2 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800"},e.createElement(Yt,{size:16}),q),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, tlphone)...",value:D,onChange:W=>$(W.target.value),onKeyDown:W=>W.key==="Enter"&&re(),className:"flex-1 rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-transparent"}),e.createElement("button",{type:"button",onClick:re,disabled:j||!D.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-amber-600 px-4 py-2 text-sm font-semibold text-white hover:bg-amber-700 disabled:opacity-60"},e.createElement(Tr,{size:14}),"Rechercher")),H.length>0&&e.createElement("div",{className:"space-y-2"},H.map(W=>{const me=W._id||W.id,ne=ae.has(String(me)),ee=z===String(me);return e.createElement("div",{key:me,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-gray-50 p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},W.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},W.email,"  ",W.phone)),e.createElement("button",{type:"button",onClick:()=>U(String(me)),disabled:ee,className:`inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-xs font-semibold disabled:opacity-70 ${ne?"bg-red-600 text-white hover:bg-red-700":"bg-amber-600 text-white hover:bg-amber-700"}`},ee?e.createElement(vs,{size:14,className:"animate-spin"}):ne?e.createElement(Go,{size:14}):e.createElement(hi,{size:14}),ee?"Traitement...":ne?"Retirer":"Ajouter"))})),e.createElement("div",{className:"border-t border-gray-100 pt-4"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 mb-2"},"Gestionnaires actuels (",P.length,")"),O?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement"):P.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun gestionnaire pour le moment."):e.createElement("div",{className:"space-y-2"},P.map(W=>e.createElement("div",{key:W.id||W._id,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-white p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},W.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},W.email,"  ",W.phone)),e.createElement("button",{type:"button",onClick:()=>U(String(W.id||W._id)),disabled:z===String(W.id||W._id),className:"inline-flex items-center gap-1 rounded-lg bg-red-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-70"},z===String(W.id||W._id)?e.createElement(vs,{size:14,className:"animate-spin"}):e.createElement(Go,{size:14}),z===String(W.id||W._id)?"Traitement...":"Retirer")))))),e.createElement("section",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm"},e.createElement("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},b?"Modifier un livreur":"Ajouter un livreur"),e.createElement("form",{className:"mt-4 grid gap-4 md:grid-cols-[1.2fr_1fr_auto]",onSubmit:ue},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Nom"),e.createElement("input",{type:"text",value:f.name,onChange:W=>g(me=>({...me,name:W.target.value})),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ex: Jean K."})),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Tlphone"),e.createElement("div",{className:"mt-1 flex items-center gap-2 rounded-xl border border-gray-200 px-3 py-2 text-sm focus-within:ring-2 focus-within:ring-indigo-500"},e.createElement(Es,{size:14,className:"text-gray-400"}),e.createElement("input",{type:"text",value:f.phone,onChange:W=>g(me=>({...me,phone:W.target.value})),className:"w-full border-none p-0 text-sm focus:outline-none",placeholder:"06 000 00 00"}))),e.createElement("div",{className:"flex flex-col justify-end gap-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm text-gray-600"},e.createElement("input",{type:"checkbox",checked:f.active,onChange:W=>g(me=>({...me,active:W.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Actif"),e.createElement("button",{type:"submit",disabled:m||!f.name.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50"},b?e.createElement(vc,{size:16}):e.createElement(Bo,{size:16}),b?"Mettre  jour":"Ajouter")))),e.createElement("section",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3"},e.createElement("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Livreurs"),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"relative"},e.createElement(Tr,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.createElement("input",{type:"search",value:v,onChange:W=>E(W.target.value),className:"w-56 rounded-xl border border-gray-200 py-2 pl-9 pr-3 text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Rechercher un livreur"})),e.createElement("span",{className:"text-xs text-gray-400"},A.total," enregistr(s)"))),s?e.createElement("p",{className:"mt-4 text-sm text-gray-500"},"Chargement des livreurs"):a.length===0?e.createElement("p",{className:"mt-4 text-sm text-gray-500"},"Aucun livreur enregistr pour le moment."):e.createElement("div",{className:"mt-4 divide-y divide-gray-100"},a.map(W=>e.createElement("div",{key:W._id,className:"flex flex-wrap items-center justify-between gap-3 py-3"},e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},W.name),e.createElement("p",{className:"text-xs text-gray-500"},W.phone||"Tlphone non renseign"),e.createElement("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-gray-500"},e.createElement("span",{className:"rounded-full bg-gray-100 px-2 py-0.5"},"Assignes: ",W.stats?.totalAssigned||0),e.createElement("span",{className:"rounded-full bg-blue-100/70 px-2 py-0.5 text-blue-700"},"En cours: ",W.stats?.delivering||0),e.createElement("span",{className:"rounded-full bg-emerald-100/70 px-2 py-0.5 text-emerald-700"},"Livres: ",W.stats?.delivered||0))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:`rounded-full px-3 py-1 text-[11px] font-semibold ${W.active?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-500"}`},W.active?"Actif":"Inactif"),e.createElement("button",{type:"button",onClick:()=>Ee(W),className:"inline-flex items-center gap-1 rounded-lg border border-gray-200 px-2 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-50"},e.createElement(vu,{size:14}),"Modifier"),e.createElement("button",{type:"button",onClick:()=>fe(W._id),className:"inline-flex items-center gap-1 rounded-lg border border-red-200 px-2 py-1 text-xs font-semibold text-red-600 hover:bg-red-50"},e.createElement(is,{size:14}),"Supprimer"))))),A.totalPages>1&&e.createElement("div",{className:"mt-4 flex flex-col gap-3 border-t border-gray-100 pt-4 text-xs text-gray-500 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",null,"Page ",k," sur ",A.totalPages,"  ",A.total," livreur",A.total>1?"s":""),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>C(W=>Math.max(1,W-1)),disabled:k<=1,className:"rounded-full border border-gray-300 px-3 py-1 font-semibold text-gray-700 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>C(W=>Math.min(A.totalPages,W+1)),disabled:k>=A.totalPages,className:"rounded-full border border-gray-300 px-3 py-1 font-semibold text-gray-700 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))))}const Cie=12;function Aie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(1),[m,p]=u.useState(1),f=async()=>{n(!0),o("");try{const{data:g}=await oe.get("/products/public",{params:{sort:"discount",limit:Cie,page:l}}),x=(Array.isArray(g?.items)?g.items:Array.isArray(g)?g:[]).filter(v=>Number(v.discount)>0);r(x),p(g?.pagination?.pages||1)}catch(g){o(g.response?.data?.message||g.message||"Impossible de charger les bonnes affaires.")}finally{n(!1)}};return u.useEffect(()=>{f()},[l]),e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Bonnes affaires"),e.createElement("p",{className:"text-sm text-gray-500"},"Dcouvrez les produits au prix le plus bas actuellement approuvs sur la plateforme.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((g,b)=>e.createElement("div",{key:b,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},t.map(g=>e.createElement(un,{key:g._id,p:g}))),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-gray-100 bg-white px-4 py-3 text-xs text-gray-500"},e.createElement("span",null,"Page ",l," / ",m),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>c(g=>Math.max(1,g-1)),disabled:l<=1,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>c(g=>Math.min(m,g+1)),disabled:l>=m,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune bonne affaire disponible pour le moment. Revenez plus tard !"))}const _ie=60,Ym=12;function Pie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(1),[m,p]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767);u.useEffect(()=>{let x=!0;const v=new AbortController;return(async()=>{n(!0),o("");try{const{data:y}=await oe.get("/products/public/highlights",{params:{limit:_ie},signal:v.signal});if(!x)return;const w=Array.isArray(y?.topRated)?y.topRated:[];r(w)}catch(y){if(v.signal.aborted)return;o(y.response?.data?.message||y.message||"Impossible de charger les produits mieux nots.")}finally{x&&n(!1)}})(),()=>{x=!1,v.abort()}},[]),u.useEffect(()=>{const x=()=>{typeof window>"u"||p(window.innerWidth<=767)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),u.useEffect(()=>{c(1)},[t.length]),u.useEffect(()=>{if(!m||l>=Math.max(1,Math.ceil(t.length/Ym)))return;const x=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&c(E=>Math.min(E+1,Math.max(1,Math.ceil(t.length/Ym))))};return window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)},[m,t.length,l]);const f=Math.max(1,Math.ceil(t.length/Ym));u.useEffect(()=>{l>f&&c(f)},[l,f]);const g=u.useMemo(()=>{const x=l*Ym;return t.slice(0,x)},[t,l]),b=()=>{if(m||t.length<=Ym)return null;const x=Math.min(5,f),v=Math.floor(x/2);let E=Math.max(1,l-v),y=Math.min(f,E+x-1);E=Math.max(1,y-x+1);const w=Array.from({length:y-E+1},(k,C)=>E+C);return e.createElement("div",{className:"flex justify-center items-center space-x-2 mt-8 pb-[88px] md:pb-0"},e.createElement("button",{onClick:()=>c(k=>Math.max(1,k-1)),disabled:l<=1,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""),E>1&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>c(1),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===1?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},"1"),E>2&&e.createElement("span",{className:"px-1 text-gray-500"},"...")),w.map(k=>e.createElement("button",{key:k,onClick:()=>c(k),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===k?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},k)),y<f&&e.createElement(e.Fragment,null,y<f-1&&e.createElement("span",{className:"px-1 text-gray-500"},"..."),e.createElement("button",{onClick:()=>c(f),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===f?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},f)),e.createElement("button",{onClick:()=>c(k=>Math.min(f,k+1)),disabled:l>=f,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""))};return e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8 pb-12 md:pb-16"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Top des valuations"),e.createElement("p",{className:"text-sm text-gray-500"},"Les produits les mieux nots par la communaut, classs par moyenne des avis.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((x,v)=>e.createElement("div",{key:v,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},g.map(x=>e.createElement(un,{key:x._id,p:x}))),b()):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun produit n'a encore reu d'valuations suffisantes. Revenez un peu plus tard !"))}const Tie=60,Xm=12;function Oie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(1),[m,p]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767);u.useEffect(()=>{let x=!0;const v=new AbortController;return(async()=>{n(!0),o("");try{const{data:y}=await oe.get("/products/public/highlights",{params:{limit:Tie},signal:v.signal});if(!x)return;const w=Array.isArray(y?.favorites)?y.favorites:[];r(w)}catch(y){if(v.signal.aborted)return;o(y.response?.data?.message||y.message||"Impossible de charger les produits favoris.")}finally{x&&n(!1)}})(),()=>{x=!1,v.abort()}},[]),u.useEffect(()=>{c(1)},[t.length]),u.useEffect(()=>{if(!m||l>=Math.max(1,Math.ceil(t.length/Xm)))return;const x=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&c(E=>Math.min(E+1,Math.max(1,Math.ceil(t.length/Xm))))};return window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)},[m,t.length,l]),u.useEffect(()=>{const x=()=>{typeof window>"u"||p(window.innerWidth<=767)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const f=Math.max(1,Math.ceil(t.length/Xm));u.useEffect(()=>{l>f&&c(f)},[l,f]);const g=u.useMemo(()=>{const x=l*Xm;return t.slice(0,x)},[t,l]),b=()=>{if(m||t.length<=Xm)return null;const x=Math.min(5,f),v=Math.floor(x/2);let E=Math.max(1,l-v),y=Math.min(f,E+x-1);E=Math.max(1,y-x+1);const w=Array.from({length:y-E+1},(k,C)=>E+C);return e.createElement("div",{className:"flex justify-center items-center space-x-2 mt-8 pb-[88px] md:pb-0"},e.createElement("button",{onClick:()=>c(k=>Math.max(1,k-1)),disabled:l<=1,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""),E>1&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>c(1),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===1?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},"1"),E>2&&e.createElement("span",{className:"px-1 text-gray-500"},"...")),w.map(k=>e.createElement("button",{key:k,onClick:()=>c(k),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===k?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},k)),y<f&&e.createElement(e.Fragment,null,y<f-1&&e.createElement("span",{className:"px-1 text-gray-500"},"..."),e.createElement("button",{onClick:()=>c(f),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${l===f?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},f)),e.createElement("button",{onClick:()=>c(k=>Math.min(f,k+1)),disabled:l>=f,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""))};return e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8 pb-12 md:pb-16"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Favoris de la communaut"),e.createElement("p",{className:"text-sm text-gray-500"},"Les annonces les plus sauvegardes par les acheteurs sur HDMarket.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((x,v)=>e.createElement("div",{key:v,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},g.map(x=>e.createElement(un,{key:x._id,p:x}))),b()):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun favori pour le moment. Ajoutez des produits  vos favoris pour les voir ici !"))}const Mie=12;function jie(){const t=wa(),[r,a]=u.useState([]),[n,s]=u.useState(!1),[o,l]=u.useState(""),[c,m]=u.useState(1),[p,f]=u.useState(1),[g,b]=bi(),x=Number(g.get("page"));u.useEffect(()=>{Number.isInteger(x)&&x>0&&m(x)},[x]);const v=async()=>{s(!0),l("");try{const{data:E}=await oe.get("/products/public/top-sales",{params:{limit:Mie,page:c}}),y=Array.isArray(E?.items)?E.items:Array.isArray(E)?E:[];a(y),f(E?.pagination?.pages||1)}catch(E){l(E.response?.data?.message||E.message||"Impossible de charger les produits les plus vendus.")}finally{s(!1)}};return u.useEffect(()=>{v()},[c]),u.useEffect(()=>{b(E=>{const y=new URLSearchParams(E);return c===1?y.delete("page"):y.set("page",String(c)),y},{replace:!0})},[c,b]),e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6"},e.createElement("header",{className:"bg-gradient-to-br from-orange-50 via-white to-red-50 dark:from-gray-900 dark:via-gray-800 dark:to-orange-950/20 rounded-3xl p-4 sm:p-6 lg:p-8 border border-gray-200/60 dark:border-gray-700/50 shadow-lg"},e.createElement("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 mb-4 text-sm font-semibold text-gray-600 hover:text-indigo-600 transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour"),e.createElement("div",{className:"flex items-center gap-3 sm:gap-4 mb-4"},e.createElement("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(Pr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-xl sm:text-3xl lg:text-4xl font-black text-gray-900 dark:text-white"},"Produits les plus vendus"),e.createElement("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1"},"Les best-sellers de HDMarket bass sur les ventes relles")))),n?e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},Array.from({length:6}).map((E,y)=>e.createElement("div",{key:y,className:"animate-pulse bg-white rounded-xl border border-gray-200 h-96"}))):o?e.createElement("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 sm:p-6 text-center"},e.createElement("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3"},e.createElement(ko,{className:"w-6 h-6 text-red-600"})),e.createElement("p",{className:"text-sm sm:text-base text-red-700 font-semibold"},o)):r.length>0?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},r.map((E,y)=>e.createElement("div",{key:E._id,className:"relative"},y<3&&e.createElement("div",{className:"absolute -top-2 -left-2 z-30"},e.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg ${y===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":y===1?"bg-gradient-to-br from-gray-300 to-gray-500":"bg-gradient-to-br from-amber-600 to-amber-800"}`},e.createElement(ko,{className:"w-6 h-6 text-white"})),e.createElement("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-white border-2 border-gray-200 flex items-center justify-center"},e.createElement("span",{className:"text-xs font-black text-gray-900"},"#",y+1))),e.createElement(un,{p:E,productLink:Dr(E)})))),p>1&&e.createElement("div",{className:"flex justify-center items-center space-x-2 mt-8"},e.createElement("button",{onClick:()=>m(E=>Math.max(1,E-1)),disabled:c<=1,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""),Array.from({length:Math.min(5,p)},(E,y)=>{const w=y+1;return e.createElement("button",{key:w,onClick:()=>m(w),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${c===w?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},w)}),p>5&&e.createElement("span",{className:"px-2 text-gray-500"},"..."),e.createElement("button",{onClick:()=>m(E=>Math.min(p,E+1)),disabled:c>=p,className:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors"},""))):e.createElement("div",{className:"text-center py-16 bg-white rounded-2xl border border-gray-200"},e.createElement("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},e.createElement(en,{className:"w-8 h-8 text-gray-400"})),e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},"Aucun produit vendu"),e.createElement("p",{className:"text-gray-600 text-sm"},"Les produits les plus vendus apparatront ici une fois que des commandes seront confirmes."))))}const Rie=12;function $ie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(1),[m,p]=u.useState(1),f=async()=>{n(!0),o("");try{const{data:g}=await oe.get("/products/public",{params:{sort:"discount",limit:Rie,page:l}}),x=(Array.isArray(g?.items)?g.items:Array.isArray(g)?g:[]).filter(v=>Number(v.discount)>0);r(x),p(g?.pagination?.pages||1)}catch(g){o(g.response?.data?.message||g.message||"Impossible de charger les produits en promotion.")}finally{n(!1)}};return u.useEffect(()=>{f()},[l]),e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Promotions"),e.createElement("p",{className:"text-sm text-gray-500"},"Retrouvez ici les annonces bnficiant des plus fortes rductions actuellement actives.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((g,b)=>e.createElement("div",{key:b,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},t.map(g=>e.createElement(un,{key:g._id,p:g}))),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-gray-100 bg-white px-4 py-3 text-xs text-gray-500"},e.createElement("span",null,"Page ",l," / ",m),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>c(g=>Math.max(1,g-1)),disabled:l<=1,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>c(g=>Math.min(m,g+1)),disabled:l>=m,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune promotion n'est active pour le moment. Revenez prochainement pour profiter de nouvelles offres."))}const Lie=60;function Iie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState("");return u.useEffect(()=>{let l=!0;const c=new AbortController;return(async()=>{n(!0),o("");try{const{data:p}=await oe.get("/products/public/highlights",{params:{limit:Lie},signal:c.signal});if(!l)return;const f=Array.isArray(p?.newProducts)?p.newProducts:[];r(f)}catch(p){if(c.signal.aborted)return;o(p.response?.data?.message||p.message||"Impossible de charger les produits neufs.")}finally{l&&n(!1)}})(),()=>{l=!1,c.abort()}},[]),e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Produits Neufs"),e.createElement("p",{className:"text-sm text-gray-500"},"Retrouvez toutes les nouveauts rcemment ajoutes sur HDMarket.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((l,c)=>e.createElement("div",{key:c,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},t.map(l=>e.createElement(un,{key:l._id,p:l}))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun produit neuf n'est disponible pour le moment. Revenez bientt pour dcouvrir les nouveauts."))}const Die=60;function Fie(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState("");return u.useEffect(()=>{let l=!0;const c=new AbortController;return(async()=>{n(!0),o("");try{const{data:p}=await oe.get("/products/public/highlights",{params:{limit:Die},signal:c.signal});if(!l)return;const f=Array.isArray(p?.usedProducts)?p.usedProducts:[];r(f)}catch(p){if(c.signal.aborted)return;o(p.response?.data?.message||p.message||"Impossible de charger les produits d'occasion.")}finally{l&&n(!1)}})(),()=>{l=!1,c.abort()}},[]),e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 space-y-8"},e.createElement("header",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},"Produits d'occasion"),e.createElement("p",{className:"text-sm text-gray-500"},"Les meilleures affaires d'occasion slectionnes pour vous.")),s&&e.createElement("p",{className:"text-sm text-red-600"},s),a?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Array.from({length:8}).map((l,c)=>e.createElement("div",{key:c,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):t.length?e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},t.map(l=>e.createElement(un,{key:l._id,p:l}))):e.createElement("p",{className:"text-sm text-gray-500"},"Pas encore d'annonces d'occasion disponibles. Revenez plus tard pour dnicher la bonne affaire."))}const zie=[{value:"new",label:"Plus rcents"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix dcroissant"},{value:"discount",label:"Meilleures remises"}];function Bie(){const{categoryId:t}=Jo(),r=u.useMemo(()=>Ug(t),[t]),a=r?.group??null,[n,s]=bi(),o=Number(n.get("page")),l=u.useRef(Number.isInteger(o)&&o>0?o:1),[c,m]=u.useState([]),[p,f]=u.useState(!1),[g,b]=u.useState(""),[x,v]=u.useState("new"),[E,y]=u.useState(l.current),[w,k]=u.useState(1),[C,A]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767);u.useEffect(()=>{l.current=1,y(1)},[t]),u.useEffect(()=>{l.current=1,y(1)},[x]),u.useEffect(()=>{if(E===l.current){s(P=>{const T=new URLSearchParams(P);return E===1?T.delete("page"):T.set("page",String(E)),T},{replace:!0});return}s(P=>{const T=new URLSearchParams(P);return E===1?T.delete("page"):T.set("page",String(E)),T},{replace:!1})},[E,s]),u.useEffect(()=>{const P=()=>{typeof window>"u"||A(window.innerWidth<=767)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),u.useEffect(()=>{if(!r){m([]),k(1);return}let P=!0;const T=new AbortController;return(async()=>{f(!0),b("");try{const{data:R}=await oe.get("/products/public",{params:{category:r.value,sort:x,page:E,limit:12},signal:T.signal});if(!P)return;const D=Array.isArray(R)?R:R?.items??[],$=Array.isArray(R)?{pages:1}:R?.pagination??{};m(j=>C&&E>1?[...j,...D]:D),k(Math.max(1,Number($.pages)||1))}catch(R){if(T.signal.aborted)return;b(R.response?.data?.message||R.message||"Impossible de charger les produits de cette catgorie.")}finally{P&&f(!1)}})(),()=>{P=!1,T.abort()}},[r,x,E,C]),u.useEffect(()=>{m([]),k(1)},[r,x]),u.useEffect(()=>{if(!C||p||E>=w)return;const P=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&y(O=>Math.min(O+1,w))};return window.addEventListener("scroll",P,{passive:!0}),()=>window.removeEventListener("scroll",P)},[C,p,E,w]);const S=()=>{if(w<=1)return null;const P=Math.min(5,w),T=[];for(let O=1;O<=P;O+=1)T.push(e.createElement("button",{key:O,onClick:()=>y(O),className:`flex h-10 w-10 items-center justify-center rounded-lg border text-sm transition-colors ${E===O?"border-indigo-600 bg-indigo-600 text-white":"border-gray-200 hover:bg-gray-50"}`},O));return C?null:e.createElement("div",{className:"flex items-center justify-center gap-2 pt-6 pb-[88px] md:pb-0"},e.createElement("button",{onClick:()=>y(O=>Math.max(1,O-1)),disabled:E<=1,className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-200 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40"},""),T,e.createElement("button",{onClick:()=>y(O=>Math.min(w,O+1)),disabled:E>=w,className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-200 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40"},""))};return r?e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 py-6 space-y-6 sm:py-8 sm:space-y-8 pb-24 md:pb-16"},e.createElement("header",{className:"space-y-4"},e.createElement("nav",{className:"flex items-center gap-1 text-xs text-gray-500"},e.createElement(ye,{to:"/",className:"hover:text-indigo-600 font-medium"},"Accueil"),e.createElement(Ar,{className:"w-3 h-3"}),a?e.createElement(e.Fragment,null,e.createElement("span",null,a.label),e.createElement(Ar,{className:"w-3 h-3"})):null,e.createElement("span",{className:"text-gray-900 font-semibold"},r.label)),e.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900"},r.label),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Produits approuvs rcemment ajouts dans cette sous-catgorie.")),e.createElement("div",{className:"w-full md:w-auto flex items-center gap-3"},e.createElement("label",{htmlFor:"category-sort",className:"text-xs font-semibold text-gray-600 uppercase tracking-wide"},"Trier"),e.createElement("select",{id:"category-sort",value:x,onChange:P=>v(P.target.value),className:"flex-1 md:flex-none rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"},zie.map(P=>e.createElement("option",{key:P.value,value:P.value},P.label))))),a&&e.createElement("div",{className:"flex gap-2 overflow-x-auto no-scrollbar py-1"},a.options.map(P=>{const T=P.value===r.value;return e.createElement(ye,{key:P.value,to:`/categories/${P.value}`,className:`inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs font-medium transition-colors ${T?"border-indigo-600 bg-indigo-600 text-white":"border-gray-200 bg-white text-gray-600 hover:border-indigo-200 hover:text-indigo-600"}`},P.label,T?null:e.createElement(Ar,{className:"w-3 h-3"}))}))),g&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"},g),p?e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-5"},Array.from({length:8}).map((P,T)=>e.createElement("div",{key:T,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):c.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-5"},c.map(P=>e.createElement(un,{key:P._id,p:P}))),S()):e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-white p-6 text-center text-sm text-gray-500"},"Aucun produit disponible dans cette catgorie pour le moment. Revenez plus tard ou explorez dautres sous-catgories.")):e.createElement("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 md:px-8 py-8 space-y-8"},e.createElement("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm"},e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Catgorie introuvable"),e.createElement("p",{className:"text-sm text-gray-600"},"Cette catgorie nexiste pas ou nest plus disponible. Parcourez nos catgories populaires ci-dessous."),e.createElement("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},to.map(P=>e.createElement("div",{key:P.id,className:"rounded-2xl border border-gray-100 p-4 bg-white shadow-sm"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3"},P.label),e.createElement("div",{className:"flex flex-wrap gap-2"},P.options.map(T=>e.createElement(ye,{key:T.value,to:`/categories/${T.value}`,className:"inline-flex items-center gap-1 rounded-full border border-indigo-100 bg-indigo-50 px-3 py-1 text-xs font-medium text-indigo-600 hover:bg-indigo-100 transition-colors"},T.label,e.createElement(Ar,{className:"w-3 h-3"}))))))),e.createElement("div",{className:"mt-6"},e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 text-sm font-semibold text-indigo-600 hover:text-indigo-500"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour  laccueil"))))}const qie=[{value:"new",label:"Plus rcents"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix dcroissant"},{value:"popular",label:"Tendances"},{value:"discount",label:"Meilleures remises"}],Uie=12;function Vie(){const[t,r]=bi(),a=(t.get("category")||"").trim(),n=t.get("sort")||"",s=t.get("shopVerified")==="true",o=t.get("installmentOnly")==="true",[l,c]=u.useState([]),[m,p]=u.useState(!1),[f,g]=u.useState(""),[b,x]=u.useState(()=>{const ge=n||"new";return ge==="newest"?"new":ge}),[v,E]=u.useState(s),[y,w]=u.useState(o),k=Number(t.get("page")),C=u.useRef(Number.isInteger(k)&&k>0?k:1),[A,S]=u.useState(C.current),[P,T]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767),[O,R]=u.useState(1),[D,$]=u.useState(""),[j,K]=u.useState(""),[H,V]=u.useState(a);u.useEffect(()=>{V(a)},[a]),u.useEffect(()=>{const ge=n||"new";x(ge==="newest"?"new":ge),E(s),w(o)},[n,s,o]);const q=t.get("search")||"";u.useEffect(()=>{q&&($(q),K(q))},[q]);const Y=u.useCallback(async()=>{p(!0),g("");try{const ge={sort:b,page:A,limit:Uie};j&&(ge.q=j),H&&(ge.category=H),v&&(ge.shopVerified="true"),y&&(ge.installmentOnly="true");const{data:ue}=await oe.get("/products/public",{params:ge}),Ee=Array.isArray(ue)?ue:ue?.items||[],fe=Array.isArray(ue)?{pages:1}:ue?.pagination||{};c(re=>P&&A>1?[...re,...Ee]:Ee),R(Math.max(1,Number(fe.pages)||1))}catch(ge){g(ge.response?.data?.message||ge.message||"Impossible de charger les produits.")}finally{p(!1)}},[A,b,j,H,v,y]);u.useEffect(()=>{C.current=1,S(1),c([]),R(1)},[b,j,H,v,y]),u.useEffect(()=>{if(!P||m||A>=O)return;const ge=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&S(Ee=>Math.min(Ee+1,O))};return window.addEventListener("scroll",ge,{passive:!0}),()=>window.removeEventListener("scroll",ge)},[P,m,A,O]),u.useEffect(()=>{const ge=()=>{typeof window>"u"||T(window.innerWidth<=767)};return ge(),window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge)},[]),u.useEffect(()=>{A===C.current?r(ge=>{const ue=new URLSearchParams(ge);return A===1?ue.delete("page"):ue.set("page",String(A)),ue},{replace:!0}):r(ge=>{const ue=new URLSearchParams(ge);return A===1?ue.delete("page"):ue.set("page",String(A)),ue},{replace:!1})},[A,r]),u.useEffect(()=>{Y()},[Y]);const z=ge=>{ge.preventDefault();const ue=D.trim();K(ue),r(Ee=>{const fe=new URLSearchParams(Ee);return ue?fe.set("search",ue):fe.delete("search"),fe.delete("page"),fe},{replace:!0})},L=()=>{$(""),K(""),r(ge=>{const ue=new URLSearchParams(ge);return ue.delete("search"),ue.delete("page"),ue},{replace:!0})},Q=u.useMemo(()=>{const ge=[],ue=Math.min(5,O);for(let Ee=1;Ee<=ue;Ee+=1)ge.push(e.createElement("button",{key:Ee,type:"button",onClick:()=>S(Ee),className:`flex h-10 w-10 items-center justify-center rounded-lg border text-sm transition-colors ${A===Ee?"border-indigo-600 bg-indigo-600 text-white":"border-gray-200 hover:bg-gray-50"}`},Ee));return ge},[A,O]),B=u.useMemo(()=>Ug(H),[H]),ae=u.useCallback(()=>{V("");const ge=new URLSearchParams(t);ge.delete("category"),r(ge,{replace:!0})},[t,r]),te=u.useCallback(ge=>{w(ge),r(ue=>{const Ee=new URLSearchParams(ue);return ge?Ee.set("installmentOnly","true"):Ee.delete("installmentOnly"),Ee.delete("page"),Ee},{replace:!0})},[r]);return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8 space-y-4 sm:space-y-6"},e.createElement("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 sm:gap-4"},e.createElement("div",{className:"flex-1"},e.createElement("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900"},"Tous les produits"),e.createElement("p",{className:"text-xs sm:text-sm text-gray-500"},"Parcourez les annonces disponibles sur HDMarket et dcouvrez les nouveauts.")),e.createElement(ye,{to:"/search",className:"inline-flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-4 py-2.5 text-sm font-semibold text-indigo-700 hover:bg-indigo-100 transition-colors"},e.createElement(Nu,{className:"w-4 h-4"}),"Recherche avance"),e.createElement("form",{onSubmit:z,className:"w-full md:w-auto flex flex-col sm:flex-row gap-2 sm:items-center"},e.createElement("div",{className:"relative flex-1 sm:min-w-[280px]"},e.createElement("input",{type:"search",value:D,onChange:ge=>$(ge.target.value),placeholder:"Rechercher un produit...",className:"w-full rounded-xl border border-gray-200 bg-white px-4 py-3 text-base sm:text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"})),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700"},"Rechercher"),j&&e.createElement("button",{type:"button",onClick:L,className:"rounded-xl border border-gray-200 px-4 py-2.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-100"},"Effacer")))),e.createElement("section",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 sm:gap-3"},e.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-gray-500 flex-wrap"},e.createElement("span",null,l.length," rsultat",l.length>1?"s":""," affich",l.length>1?"s":""),j&&e.createElement("span",{className:"rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700"},"Filtre:",j),H&&e.createElement("button",{type:"button",onClick:ae,className:"inline-flex items-center gap-2 rounded-full bg-purple-100 px-3 py-1 text-xs font-semibold text-purple-700 hover:bg-purple-200 transition-colors"},"Catgorie:",B?.label||H,e.createElement("span",{"aria-hidden":"true"},"")),y&&e.createElement("button",{type:"button",onClick:()=>te(!1),className:"inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700 hover:bg-indigo-200 transition-colors"},"Paiement par tranche",e.createElement("span",{"aria-hidden":"true"},""))),e.createElement("div",{className:"flex items-center gap-1.5 sm:gap-2"},e.createElement("label",{className:"inline-flex items-center gap-2 text-xs sm:text-sm text-gray-600"},e.createElement("input",{type:"checkbox",checked:y,onChange:ge=>te(ge.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Tranche uniquement"),e.createElement("label",{htmlFor:"sort-options",className:"text-xs sm:text-sm text-gray-600"},"Trier par"),e.createElement("select",{id:"sort-options",value:b,onChange:ge=>x(ge.target.value),className:"rounded-lg sm:rounded-xl border border-gray-200 bg-white px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"},qie.map(ge=>e.createElement("option",{key:ge.value,value:ge.value},ge.label))))),f&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"},f),m?e.createElement("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3"},Array.from({length:6}).map((ge,ue)=>e.createElement("div",{key:ue,className:"rounded-xl border border-gray-200 bg-white p-2 sm:p-4 shadow-sm"},e.createElement("div",{className:"mb-2 sm:mb-3 aspect-square rounded-lg bg-gray-100 animate-pulse"}),e.createElement("div",{className:"space-y-1.5 sm:space-y-2"},e.createElement("div",{className:"h-3 sm:h-4 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 sm:h-4 w-2/3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 sm:h-4 w-1/3 rounded bg-gray-100 animate-pulse"}))))):l.length?e.createElement("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3"},l.map(ge=>e.createElement(un,{key:ge._id,p:ge,onProductClick:gp}))):e.createElement("div",{className:"rounded-xl border border-gray-200 bg-white p-8 text-center text-sm text-gray-500"},"Aucun produit ne correspond  votre recherche pour le moment."),O>1&&e.createElement("div",{className:"flex items-center justify-center gap-2 pt-4"},e.createElement("button",{type:"button",onClick:()=>S(ge=>Math.max(1,ge-1)),disabled:A<=1,className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-200 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40"},""),Q,e.createElement("button",{type:"button",onClick:()=>S(ge=>Math.min(O,ge+1)),disabled:A>=O,className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-200 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-40"},"")),e.createElement("section",{className:"rounded-xl border border-indigo-100 bg-white px-4 py-4 text-sm text-indigo-700 sm:px-6 sm:py-5"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("p",{className:"font-semibold text-indigo-800"},"Besoin d'une catgorie spcifique?"),e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 text-sm font-semibold text-indigo-600 hover:text-indigo-500"},"Retour  la page d'accueil")))))}const Aw=["Brazzaville","Pointe-Noire","Ouesso","Oyo"];function Hie(){const t=wa(),[r,a]=bi(),[n,s]=u.useState([]),[o,l]=u.useState(!1),[c,m]=u.useState(""),[p,f]=u.useState({}),g=u.useRef(new Map),b=cs(),[x,v]=u.useState(()=>{const y=r.get("city");return Aw.includes(y)?y:Aw[0]});u.useEffect(()=>{const y=new AbortController;return(async()=>{try{const{data:k}=await oe.get("/products/public/highlights",{params:{limit:12},signal:y.signal});k?.cityHighlights&&typeof k.cityHighlights=="object"&&f(k.cityHighlights)}catch{}})(),()=>y.abort()},[]),u.useEffect(()=>{if(!x)return;const y=g.current.get(x);if(y&&(s(y.items),m(y.error||""),l(!1),y.nextRetry&&Date.now()<y.nextRetry))return;const w=new AbortController;return(async()=>{l(!0),m("");try{const{data:C}=await oe.get("/products/public",{params:{city:x},signal:w.signal}),A=Array.isArray(C)?C:C?.items||[];if(A.length)s(A),g.current.set(x,{items:A,error:"",nextRetry:0});else if(p[x]){const S=p[x];s(S),g.current.set(x,{items:S,error:"",nextRetry:0})}else s([]),g.current.set(x,{items:[],error:"",nextRetry:0})}catch(C){if(w.signal.aborted)return;const A=C.response?.data?.message||C.message||"Impossible de charger les produits.";m(A);const S=g.current.get(x)?.items||p[x]||[];S.length&&s(S),g.current.set(x,{items:S,error:A,nextRetry:Date.now()+60*1e3})}finally{l(!1)}})(),()=>w.abort()},[x,p]),u.useEffect(()=>{if(!n.length&&p[x]?.length){const y=p[x];s(y),g.current.set(x,{items:y,error:"",nextRetry:0})}},[p,x,n.length]),u.useEffect(()=>{x&&a({city:x})},[x,a]);const E=u.useMemo(()=>x?`Produits disponibles  ${x}`:"Produits par ville",[x]);return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8 space-y-4 sm:space-y-6"},e.createElement("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 sm:gap-4"},e.createElement("div",null,e.createElement("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 mb-3 sm:mb-4 text-sm font-semibold text-gray-600 hover:text-indigo-600 transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour"),e.createElement("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900"},E),e.createElement("p",{className:"text-xs sm:text-sm text-gray-500"},"Consultez les annonces publies depuis nos principales villes de la Rpublique du Congo.")),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{htmlFor:"city-select",className:"text-sm text-gray-600"},"Choisir une ville"),e.createElement("select",{id:"city-select",value:x,onChange:y=>v(y.target.value),className:"rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"},Aw.map(y=>e.createElement("option",{key:y,value:y},y))))),c&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"},c),o?e.createElement("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3"},Array.from({length:6}).map((y,w)=>e.createElement("div",{key:w,className:"rounded-2xl border border-gray-200 bg-white p-2 sm:p-4 shadow-sm"},e.createElement("div",{className:"mb-2 sm:mb-3 aspect-square rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"space-y-1.5 sm:space-y-2"},e.createElement("div",{className:"h-3 sm:h-4 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 sm:h-4 w-2/3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 sm:h-4 w-1/3 rounded bg-gray-100 animate-pulse"}))))):n.length?e.createElement("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 sm:grid-cols-2 lg:grid-cols-3"},n.map(y=>e.createElement(un,{key:y._id,p:y}))):e.createElement("div",{className:"rounded-xl border border-gray-200 bg-white p-8 text-center text-sm text-gray-500"},"Aucune annonce disponible pour cette ville pour le moment."),e.createElement("section",{className:"rounded-xl border border-indigo-100 bg-white px-4 py-4 text-sm text-indigo-700 sm:px-6 sm:py-5"},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},e.createElement("p",{className:"font-semibold text-indigo-800"},"Besoin d'accder aux annonces d'une catgorie spcifique?"),e.createElement("div",{className:"flex flex-col sm:flex-row gap-2"},e.createElement(ye,{to:"/products",...b,className:"inline-flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm font-semibold text-indigo-700 hover:bg-indigo-100"},"Parcourir tous les produits"),e.createElement(ye,{to:"/#categories",className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm font-semibold text-indigo-600 hover:bg-gray-50"},"Voir les catgories"))))))}function ha({children:t,role:r,roles:a,allowAccess:n}){const s=ts(),{user:o,loading:l}=u.useContext(Sr);if(l)return e.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50"},e.createElement("div",{className:"text-sm font-semibold text-gray-500"},"Chargement..."));if(!o)return e.createElement(lu,{to:"/login",state:{from:s},replace:!0});if(n&&typeof n=="function")return n(o)?t:e.createElement(lu,{to:"/",replace:!0});const c=(Array.isArray(a)&&a.length?a:null)||(r?[r]:null);return c&&!c.includes(o.role)?e.createElement(lu,{to:"/",replace:!0}):t}function Wie({isOpen:t,onClose:r,type:a,commentId:n,productId:s,photoUrl:o,productTitle:l}){const{showToast:c}=ms(),[m,p]=u.useState(""),[f,g]=u.useState(!1),[b,x]=u.useState(""),v=async E=>{if(E.preventDefault(),!s){x("ID du produit requis.");return}if(a==="comment"&&!n){x("ID du commentaire requis.");return}if(a==="photo"&&!o){x("URL de la photo requise.");return}g(!0),x("");try{await oe.post("/users/reports",{type:a,commentId:a==="comment"?n:null,productId:s,photoUrl:a==="photo"?o:null,reason:m.trim()||void 0}),c("Signalement envoy avec succs. Merci pour votre vigilance.",{variant:"success"}),p(""),r()}catch(y){const w=y.response?.data?.message||y.message||"Erreur lors de l'envoi du signalement.";x(w),c(w,{variant:"error"})}finally{g(!1)}};return t?e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:r},e.createElement("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation()},e.createElement("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center"},e.createElement(yu,{className:"w-5 h-5 text-red-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Signaler du contenu"),e.createElement("p",{className:"text-xs text-gray-500"},a==="comment"?"Signaler un commentaire":"Signaler une photo"))),e.createElement("button",{type:"button",onClick:r,className:"w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-colors"},e.createElement(jt,{size:20,className:"text-gray-500"}))),e.createElement("form",{onSubmit:v,className:"p-6 space-y-4"},l&&e.createElement("div",{className:"p-3 bg-gray-50 rounded-xl border border-gray-200"},e.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Produit concern"),e.createElement("p",{className:"text-sm font-semibold text-gray-900"},l)),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-2"},"Raison du signalement ",e.createElement("span",{className:"text-gray-400"},"(optionnel)")),e.createElement("textarea",{value:m,onChange:E=>p(E.target.value),placeholder:"Dcrivez pourquoi vous signalez ce contenu...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm resize-none",rows:4,maxLength:500,disabled:f}),e.createElement("p",{className:"text-xs text-gray-400 mt-1"},m.length,"/500 caractres")),b&&e.createElement("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl flex items-start gap-2"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-red-700"},b)),e.createElement("div",{className:"flex gap-3 pt-2"},e.createElement("button",{type:"button",onClick:r,disabled:f,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 disabled:opacity-50 transition-colors"},"Annuler"),e.createElement("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},f?"Envoi...":"Signaler"))))):null}function Gie(){const{slug:t}=Jo(),r=wa(),a=u.useContext(Sr),n=a?.user,s=a?.updateUser,{addItem:o,cart:l}=u.useContext($l),{toggleFavorite:c,isFavorite:m}=u.useContext(em),{showToast:p}=ms(),[f,g]=u.useState(null),[b,x]=u.useState(!0),[v,E]=u.useState(""),[y,w]=u.useState(!1),[k,C]=u.useState(""),[A,S]=u.useState(0),[P,T]=u.useState(0),[O,R]=u.useState(0),[D,$]=u.useState([]),[j,K]=u.useState([]),[H,V]=u.useState(!1),[q,Y]=u.useState(!1),[z,L]=u.useState("description"),[Q,B]=u.useState([]),[ae,te]=u.useState(""),[ge,ue]=u.useState(0),[Ee,fe]=u.useState(0),[re,U]=u.useState(!1),[W,me]=u.useState(!1),[ne,ee]=u.useState(""),[ve,be]=u.useState(null),[J,Ge]=u.useState(""),[je,tt]=u.useState(!1),[At,He]=u.useState(""),[Tt,Re]=u.useState(!1),[et,gt]=u.useState(""),[Ze,xt]=u.useState(""),[Dt,nt]=u.useState(!1),[Me,Qe]=u.useState(1),[wt,lt]=u.useState(!1),we=rs(),vt=cs(),pt=n?.role==="admin",[Le,pe]=u.useState(!1),[Pe,ft]=u.useState({description:!1,specifications:!1,shipping:!1}),[ht,Lt]=u.useState(null),[nr,er]=u.useState(!1),[Nt,sr]=u.useState(""),[Rt,zt]=u.useState({isOpen:!1,type:null,commentId:null,photoUrl:null}),[mr,Mr]=u.useState(null),br=u.useCallback(()=>{typeof a?.logout=="function"&&a.logout(),r("/",{replace:!0})},[a,r]),or=f?m(f._id):!1,Gt=f&&n&&l?.items?.some(Ne=>Ne.product?._id===f._id),Zt=f?N2(f,f?.user?.phone):"",se=f?.user?.phone,dt=se&&n,ut=f?.user?.accountType==="shop",It=f?.user?.shopName,de=f?.user?.shopLogo,De=f?.user?.shopAddress,F=f?.user&&(f.user.slug||f.user._id)?{slug:f.user.slug,_id:f.user._id}:null,ie=f?.user?.city||f?.city||"",he=f?.user?.country||f?.country||"Rpublique du Congo",ke=f?.user!=null?f.user._id??f.user.id??f.user:null,mt=ke&&n&&String(ke)===String(n._id||n.id);u.useEffect(()=>{if(!n||!f?.user?._id){V(!1);return}const Ye=(Array.isArray(n.followingShops)?n.followingShops:[]).some(Ot=>String(Ot)===String(f.user._id));V(Ye)},[f?.user?._id,n?.followingShops,n]);const G=async()=>{if(f?.user?._id){if(!n){gd({type:"followShop",payload:{shopId:f.user._id}}),r("/login",{state:{from:`/product/${t}`}});return}if(!(!ut||!rt||mt)){Y(!0);try{const Ne=H?await oe.delete(`/users/shops/${f.user._id}/follow`):await oe.post(`/users/shops/${f.user._id}/follow`);if(V(!H),typeof s=="function"){const Ot=(Array.isArray(n.followingShops)?n.followingShops:[]).map(sa=>String(sa)),xr=H?Ot.filter(sa=>sa!==String(f.user._id)):Array.from(new Set([...Ot,String(f.user._id)]));s({followingShops:xr})}Ne?.data?.followersCount!==void 0&&g(Ye=>Ye&&{...Ye,user:{...Ye.user,followersCount:Ne.data.followersCount}})}catch(Ne){console.error("Erreur suivi boutique:",Ne)}finally{Y(!1)}}}};u.useEffect(()=>{(async()=>{try{x(!0),E("");let Ye;console.debug("Loading product",{slug:t});try{Ye=(await oe.get(`/products/public/${t}`)).data}catch(Ot){const xr=Ot?.response?.status;if(xr===404&&n)try{Ye=(await oe.get(`/products/${t}`)).data}catch(sa){if(sa?.response?.status===401){br();return}throw sa}else{if(xr===401){br();return}throw Ot}}if(!Ye)throw new Error("Produit non trouv");if(g(Ye),T(Ye.whatsappClicks||0),R(Ye.favoritesCount||0),Ye.status==="approved"?await Promise.all([Z(Ye.slug||Ye._id),Se(Ye._id)]):(B([]),fe(0),ue(0)),Ye.category)try{const Ot=await oe.get(`/products/public?category=${Ye.category}&limit=4`),sa=(Array.isArray(Ot.data?.items)?Ot.data.items:[]).filter(jr=>!(!jr||Ye?._id&&jr._id&&jr._id===Ye._id||Ye?.slug&&jr.slug&&jr.slug===Ye.slug));$(sa.slice(0,4))}catch(Ot){console.error("Erreur chargement produits similaires:",Ot),$([])}}catch(Ye){if(Ye.response?.status===401){br();return}E(Ye.response?.data?.message||"Produit non trouv ou indisponible"),console.error("Erreur chargement produit:",Ye)}finally{x(!1)}})()},[t]),u.useEffect(()=>{f?._id&&gp(f)},[f?._id,f?.category]),u.useEffect(()=>{window.scrollTo(0,0),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},0),pe(!1),ft({description:!1,specifications:!1,shipping:!1})},[t]),u.useEffect(()=>{if(!we||!f||!ut){K([]);return}const Ne=f.user?.slug||f.user?._id;if(!Ne){K([]);return}let Ye=!0;return(async()=>{try{const{data:xr}=await oe.get(`/shops/${Ne}`,{params:{limit:12}}),jr=(Array.isArray(xr?.products)?xr.products:[]).filter(da=>!(!da||f?._id&&da._id&&da._id===f._id||f?.slug&&da.slug&&da.slug===f.slug));Ye&&K(jr)}catch{Ye&&K([])}})(),()=>{Ye=!1}},[we,ut,f?._id,f?.slug,f?.user?._id,f?.user?.slug]),u.useEffect(()=>{gt(""),xt("")},[f?._id]);const Z=async Ne=>{const Ye=Ne||t;try{const{data:Ot}=await oe.get(`/products/public/${Ye}/comments`,{skipCache:!0});B(le(Array.isArray(Ot)?Ot:[]));return}catch(Ot){if(Ot.response?.status===404){B([]);return}console.error("Erreur chargement commentaires:",Ot),B([])}},le=Ne=>{const Ye=new Map,Ot=[];Ne.forEach(jr=>{const da=String(jr._id);Ye.set(da,{...jr,replies:[]})}),Ne.forEach(jr=>{const da=String(jr._id),Ps=Ye.get(da);if(!Ps)return;const lo=typeof jr.parent=="string"?jr.parent:jr.parent&&jr.parent._id?String(jr.parent._id):null;if(lo){const Dn=Ye.get(lo);if(Dn){Dn.replies.push(Ps);return}}Ot.push(Ps)});const xr=(jr,da)=>new Date(da.createdAt||0).getTime()-new Date(jr.createdAt||0).getTime(),sa=(jr,da)=>new Date(jr.createdAt||0).getTime()-new Date(da.createdAt||0).getTime();return Ot.sort(xr),Ot.forEach(jr=>{Array.isArray(jr.replies)&&jr.replies.sort(sa)}),Ot},_e=Ne=>{if(!Ne||!Ne._id)return;const Ye=typeof Ne.parent=="string"&&Ne.parent||Ne.parent?._id||null;B(Ot=>Array.isArray(Ot)?Ye?Ot.map(xr=>{if(String(xr._id)!==String(Ye))return xr;const sa=Array.isArray(xr.replies)?xr.replies:[];return sa.some(jr=>String(jr._id)===String(Ne._id))?xr:{...xr,replies:[...sa,Ne]}}):Ot.some(xr=>String(xr._id)===String(Ne._id))?Ot:[Ne,...Ot]:Ot)},Be=()=>{g(Ne=>Ne&&{...Ne,commentCount:Number(Ne.commentCount||0)+1})},Te=(Ne,Ye)=>{g(Ot=>{if(!Ot)return Ot;const xr=Number(Ot.ratingCount||0),sa=Number(Ot.ratingAverage||0);let jr=xr,da=sa;return Ye&&xr>0?da=(sa*xr-Ye+Ne)/xr:(jr=xr+1,da=(sa*xr+Ne)/jr),{...Ot,ratingAverage:Number(da.toFixed(2)),ratingCount:jr}})},Se=async Ne=>{if(n)try{const Ye=Ne;if(!Ye)return;const{data:Ot}=await oe.get(`/products/${Ye}/rating`,{params:{productId:Ye}});fe(Ot?.value||0),ue(Ot?.value||0)}catch(Ye){console.error("Erreur chargement note utilisateur:",Ye),fe(0),ue(0)}},Je=async()=>{if(!(!f||Tt)){gt(""),xt(""),Re(!0);try{const Ne=!f.certified,{data:Ye}=await oe.patch(`/admin/products/${f._id}/certify`,{certified:Ne});g(Ot=>Ot&&{...Ot,certified:Ye.certified,certifiedBy:Ye.certifiedBy,certifiedAt:Ye.certifiedAt}),gt(Ne?"Produit certifi.":"Certification retire.")}catch(Ne){console.error("Erreur certification produit:",Ne),xt(Ne?.response?.data?.message||"Une erreur est survenue.")}finally{Re(!1)}}},qt=async Ne=>{if(Ne.preventDefault(),!(!n||!ae.trim())){U(!0),ee("");try{const Ye={productId:f?._id,message:ae.trim()},Ot=await oe.post(`/products/${t}/comments`,Ye);te(""),_e(Ot?.data),Be()}catch(Ye){if(Ye.response?.status===401){br();return}console.error("Erreur soumission commentaire:",Ye),Ye.response?ee(Ye.response.data?.message||`Erreur ${Ye.response.status}`):Ye.request?ee("Erreur rseau - impossible de contacter le serveur"):ee("Erreur inattendue: "+Ye.message)}finally{U(!1)}}},lr=async Ne=>{if(!(!n||n.role!=="admin")&&window.confirm("tes-vous sr de vouloir supprimer ce commentaire ? Cette action supprimera galement toutes les rponses associes.")){Mr(Ne);try{await oe.delete(`/admin/comments/${Ne}`),await Z(f?.slug||f?._id);const{data:Ye}=await oe.get(`/products/public/${t}`,{skipCache:!0});g(Ye),p("Commentaire supprim avec succs.",{variant:"success"})}catch(Ye){console.error("Erreur suppression commentaire:",Ye);const Ot=Ye.response?.data?.message||"Erreur lors de la suppression.";p(Ot,{variant:"error"})}finally{Mr(null)}}},Nr=async Ne=>{if(!(!n||!J.trim())){U(!0),ee("");try{const Ye={productId:f?._id,message:J.trim(),parentId:Ne._id},Ot=await oe.post(`/products/${t}/comments`,Ye);Ge(""),be(null),_e(Ot?.data),Be()}catch(Ye){if(Ye.response?.status===401){br();return}console.error("Erreur soumission rponse:",Ye),Ye.response&&ee(Ye.response.data?.message||`Erreur ${Ye.response.status}`)}finally{U(!1)}}},ra=async Ne=>{if(!n){r("/login",{state:{from:`/product/${t}`}});return}const Ye=Ee||0;me(!0);try{await oe.put(`/products/${t}/rating`,{value:Ne,productId:f?._id}),fe(Ne),ue(Ne),Te(Ne,Ye)}catch(Ot){if(Ot.response?.status===401){br();return}console.error("Erreur soumission note:",Ot);const xr=Ot.response?.data?.message||Ot.message||"Une erreur est survenue lors de lenvoi de votre note.";alert(`Erreur lors de l'ajout de la note : ${xr}`)}finally{me(!1)}},Oe=async()=>{if(f){if(!n){gd({type:"addToCart",payload:{productId:f._id,quantity:1}}),r("/login",{state:{from:`/product/${t}`}});return}if(!Gt){w(!0),C("");try{await o(f._id,1),C(" Ajout au panier !"),setTimeout(()=>C(""),3e3)}catch(Ne){if(Ne.response?.status===401){br();return}C(" Erreur lors de l'ajout")}finally{w(!1)}}}},it=async()=>{if(f){if(!n){gd({type:"addFavorite",payload:{product:f}}),r("/login",{state:{from:`/product/${t}`}});return}try{const Ne=await c(f);Ne===!0?R(Ye=>Ye+1):Ne===!1&&R(Ye=>Math.max(0,Ye-1))}catch(Ne){if(Ne.response?.status===401){br();return}console.error("Erreur favori:",Ne)}}},gr=async Ne=>{if(f){if(!n){Ne?.preventDefault&&Ne.preventDefault(),alert("Veuillez vous connecter pour contacter le vendeur via WhatsApp."),r("/login",{state:{from:`/product/${t}`}});return}try{const Ye=f.slug||f._id,{data:Ot}=await oe.post(`/products/public/${Ye}/whatsapp-click`);T(Ot?.whatsappClicks||P+1)}catch(Ye){if(Ye.response?.status===401){br();return}console.error("Erreur comptage WhatsApp:",Ye)}}},wr=u.useCallback(Ne=>{ft(Ye=>({...Ye,[Ne]:!Ye[Ne]}))},[]),xa=f?.discount>0,fa=xa?f?.priceBeforeDiscount:f?.price,Ua=f?.price||0,Na=f?.discount||0,nn=u.useMemo(()=>{if(!f?.installmentEnabled)return{available:!1,minAmount:0,duration:0,endDate:null};const Ne=f.installmentStartDate?new Date(f.installmentStartDate):null,Ye=f.installmentEndDate?new Date(f.installmentEndDate):null;if(!Ne||Number.isNaN(Ne.getTime())||!Ye||Number.isNaN(Ye.getTime()))return{available:!1,minAmount:0,duration:0,endDate:null};const Ot=new Date;return{available:Ot>=Ne&&Ot<=Ye,minAmount:Number(f.installmentMinAmount||0),duration:Number(f.installmentDuration||0),endDate:Ye}},[f?.installmentEnabled,f?.installmentStartDate,f?.installmentEndDate,f?.installmentMinAmount,f?.installmentDuration]),Fr=Number(f?.ratingAverage||0).toFixed(1),ka=f?.ratingCount||0,_a=f?.commentCount||0,Pa=f?.condition==="new"?"Neuf":"Occasion",oo=f?.condition==="new"?"from-emerald-500 to-green-500":"from-amber-500 to-orange-500",Fe=f?.createdAt?new Date(f.createdAt):null,$e=Fe?Math.floor((Date.now()-Fe.getTime())/(1e3*60*60*24)):0,Ke=$e<=7,st=Array.isArray(f?.images)?f.images.slice(0,3):[],St=u.useMemo(()=>{const Ne=[];j.forEach(Ot=>{(Array.isArray(Ot?.images)?Ot.images:[]).forEach(sa=>{sa&&Ne.push({src:sa,product:Ot})})});const Ye=[...Ne];for(let Ot=Ye.length-1;Ot>0;Ot-=1){const xr=Math.floor(Math.random()*(Ot+1));[Ye[Ot],Ye[xr]]=[Ye[xr],Ye[Ot]]}return Ye.slice(0,6)},[j]),rt=!!f?.user?.shopVerified,_t=u.useMemo(()=>f?lj(f):window.location.href,[f]);u.useCallback(async()=>{if(typeof navigator<"u"&&navigator.share)try{await navigator.share({title:f?.title||"Produit HDMarket",text:`${f?.title} - ${Number(f?.price||0).toLocaleString()} FCFA`,url:_t})}catch{}else try{await navigator.clipboard.writeText(_t),He("Lien copi !"),setTimeout(()=>He(""),2500)}catch{tt(!0)}},[f?.title,f?.price,_t]),u.useEffect(()=>{if(!st.length){A!==0&&S(0);return}A>=st.length&&S(0)},[st.length,A]);const Mt=st[A]||"https://via.placeholder.com/600x600",hr=we?"cursor-pointer":"cursor-zoom-in",Pt=u.useCallback((Ne=A)=>{S(Ne),nt(!0)},[A]),ur=u.useCallback(()=>{nt(!1)},[]),aa=u.useCallback(()=>{Pt(A)},[Pt,A]),sn=u.useCallback(Ne=>{Ne.stopPropagation(),Pt(A)},[Pt,A]),Ta=u.useCallback(Ne=>{S(Ne),Pt(Ne)},[Pt]),gn=u.useCallback(()=>{st.length&&S(Ne=>(Ne-1+st.length)%st.length)},[st.length]),pr=u.useCallback(()=>{st.length&&S(Ne=>(Ne+1)%st.length)},[st.length]);u.useEffect(()=>{Dt&&Qe(1)},[Dt,A]);const na=u.useCallback(Ne=>{if(we)return;Ne.preventDefault();const Ye=Ne.deltaY<0?1:-1,Ot=Ne.ctrlKey?.1:.2;Qe(xr=>{const sa=xr+Ye*Ot;return Math.max(1,Math.min(3,Number(sa.toFixed(2))))})},[we]);if(u.useEffect(()=>{if(!Dt||typeof document>"u")return;const{style:Ne}=document.body,Ye=Ne.overflow;return Ne.overflow="hidden",()=>{Ne.overflow=Ye}},[Dt]),b)return we?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"animate-pulse"},e.createElement("div",{className:"w-full aspect-[4/5] bg-gray-200"}),e.createElement("div",{className:"p-4 space-y-3"},e.createElement("div",{className:"h-7 bg-gray-200 rounded w-2/5"}),e.createElement("div",{className:"h-5 bg-gray-200 rounded w-4/5"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded w-3/5"}),e.createElement("div",{className:"flex gap-2"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-full w-16"}),e.createElement("div",{className:"h-8 bg-gray-200 rounded-full w-24"}),e.createElement("div",{className:"h-8 bg-gray-200 rounded-full w-14"})),e.createElement("div",{className:"h-16 bg-gray-200 rounded-2xl"}),e.createElement("div",{className:"h-12 bg-gray-200 rounded-2xl"}),e.createElement("div",{className:"h-12 bg-gray-200 rounded-2xl"})))):e.createElement("div",{className:"min-h-screen bg-gray-50 pt-20"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8"},e.createElement("div",{className:"animate-pulse"},e.createElement("div",{className:"flex items-center space-x-2 mb-6"},e.createElement("div",{className:"h-4 bg-gray-300 rounded w-24"}),e.createElement(Ar,{size:16,className:"text-gray-400"}),e.createElement("div",{className:"h-4 bg-gray-300 rounded w-32"})),e.createElement("div",{className:"grid lg:grid-cols-2 gap-8"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"aspect-square bg-gray-300 rounded-2xl"}),e.createElement("div",{className:"grid grid-cols-4 gap-2"},[1,2,3,4].map(Ne=>e.createElement("div",{key:Ne,className:"aspect-square bg-gray-300 rounded-xl"})))),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"h-8 bg-gray-300 rounded w-3/4"}),e.createElement("div",{className:"h-6 bg-gray-300 rounded w-1/2"}),e.createElement("div",{className:"h-12 bg-gray-300 rounded w-1/3"}),e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"h-4 bg-gray-300 rounded"}),e.createElement("div",{className:"h-4 bg-gray-300 rounded w-5/6"})))))));if(v||!f)return e.createElement("div",{className:"min-h-screen bg-gray-50 pt-20 flex items-center justify-center"},e.createElement("div",{className:"text-center max-w-md mx-auto px-4"},e.createElement(Yt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},"Produit non trouv"),e.createElement("p",{className:"text-gray-600 mb-6"},v||"Le produit que vous recherchez n'existe pas ou a t supprim."),e.createElement(ye,{to:"/",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-indigo-700 hover:to-purple-700 transition-all"},e.createElement(Gr,{size:20,className:"mr-2"}),"Retour  l'accueil")));const ya=()=>e.createElement("div",{className:"min-h-screen bg-gray-50 pb-28 safe-area-bottom"},e.createElement("div",{className:"relative"},st.length>1?e.createElement(Mj,{modules:[rH],pagination:{clickable:!0},spaceBetween:0,slidesPerView:1,onSlideChange:Ne=>S(Ne.activeIndex),className:"w-full aspect-[4/5]"},st.map((Ne,Ye)=>e.createElement(jj,{key:Ye},e.createElement("img",{src:Ne,alt:`${f.title} - ${Ye+1}`,className:"w-full h-full object-cover",onClick:()=>Pt(Ye)})))):e.createElement("div",{className:"w-full aspect-[4/5]",onClick:()=>Pt(0)},e.createElement("img",{src:st[0]||"https://via.placeholder.com/600x750",alt:f.title,className:"w-full h-full object-cover"})),e.createElement("button",{type:"button",onClick:()=>window.history.length>1?r(-1):r("/products"),className:"absolute top-4 left-4 z-20 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center text-white active:scale-90 transition-transform",style:{top:"calc(env(safe-area-inset-top, 0px) + 16px)"}},e.createElement(Gr,{size:20})),e.createElement("div",{className:"absolute top-4 right-4 z-20 flex gap-2",style:{top:"calc(env(safe-area-inset-top, 0px) + 16px)"}},e.createElement("button",{type:"button",onClick:it,className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center active:scale-90 transition-transform"},e.createElement(Yr,{size:20,fill:or?"currentColor":"none",className:or?"text-red-400":"text-white"}))),e.createElement("div",{className:"absolute bottom-4 left-4 z-20 flex gap-2"},xa&&e.createElement("span",{className:"bg-red-500 text-white px-3 py-1.5 rounded-full text-xs font-black shadow-lg"},"-",Na,"%"),f.certified&&e.createElement("span",{className:"inline-flex items-center gap-1 bg-emerald-500 text-white px-3 py-1.5 rounded-full text-xs font-black shadow-lg"},e.createElement(pa,{className:"w-3 h-3"})," Certifi"))),e.createElement("div",{className:"px-4 pt-3 pb-1"},xa?e.createElement("div",{className:"flex items-baseline gap-2 flex-wrap"},e.createElement("span",{className:"text-2xl font-black text-gray-900"},Number(Ua).toLocaleString()," FCFA"),e.createElement("span",{className:"text-sm text-gray-400 line-through font-bold"},Number(fa).toLocaleString()," FCFA"),e.createElement("span",{className:"bg-red-500 text-white px-2 py-0.5 rounded-full text-xs font-black"},"-",Na,"%")):e.createElement("span",{className:"text-2xl font-black text-gray-900"},Number(Ua).toLocaleString()," FCFA")),nn.available&&e.createElement("div",{className:"px-4 pb-2"},e.createElement("div",{className:"rounded-xl border border-indigo-200 bg-indigo-50 px-3 py-2.5"},e.createElement("p",{className:"text-xs font-black text-indigo-700"},"Achetez maintenant en plusieurs tranches et payez plus facilement."),e.createElement("p",{className:"text-[11px] text-indigo-700 mt-0.5"},"Premier paiement min: ",Number(nn.minAmount||0).toLocaleString()," FCFA  Dure: ",nn.duration||0," jours"))),e.createElement("div",{className:"px-4 pb-1"},e.createElement("h1",{className:"text-lg font-bold text-gray-900 leading-tight"},f.title)),e.createElement("div",{className:"px-4 pb-2 flex items-center gap-3 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(zr,{size:14,className:"text-amber-500",fill:"currentColor"}),e.createElement("span",{className:"font-semibold text-gray-700"},Fr),e.createElement("span",null,"(",ka,")")),e.createElement("span",{className:"text-gray-300"},"|"),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Jn,{size:14})," ",f.views||0),e.createElement("span",{className:"text-gray-300"},"|"),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{size:14})," ",O)),e.createElement("div",{className:"px-4 pb-3 flex flex-wrap gap-2"},e.createElement("span",{className:`py-1.5 px-3 rounded-full text-xs font-bold ${f.condition==="new"?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-amber-50 text-amber-700 border border-amber-200"}`},Pa),ie&&e.createElement("span",{className:"py-1.5 px-3 rounded-full text-xs font-bold bg-gray-100 text-gray-700 border border-gray-200 flex items-center gap-1"},e.createElement(Wr,{size:12})," ",ie),e.createElement("span",{className:"py-1.5 px-3 rounded-full text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200 flex items-center gap-1"},e.createElement(Xt,{size:12}),$e===0?"Aujourd'hui":$e===1?"Hier":`${$e}j`)),f.certified&&e.createElement("div",{className:"px-4 pb-3"},e.createElement("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1.5 text-xs font-semibold text-emerald-700 border border-emerald-200"},e.createElement(pa,{className:"w-4 h-4 text-emerald-500"}),"Produit certifi HDMarket")),f.user&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden"},e.createElement("button",{type:"button",onClick:()=>pe(Ne=>!Ne),className:"w-full flex items-center gap-3 p-3 text-left"},de?e.createElement("img",{src:de,alt:It||f.user.name,className:"w-10 h-10 rounded-xl object-cover border border-gray-200"}):e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center"},e.createElement(Er,{className:"w-5 h-5 text-white"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-1.5"},e.createElement("span",{className:"font-bold text-sm text-gray-900 truncate"},It||f.user.name),ut&&e.createElement(_n,{verified:rt,showLabel:!1})),e.createElement("span",{className:"text-xs text-gray-500"},ut?"Professionnel":"Particulier",ie?`  ${ie}`:"")),Le?e.createElement(wo,{size:18,className:"text-gray-400 flex-shrink-0"}):e.createElement(Za,{size:18,className:"text-gray-400 flex-shrink-0"})),Le&&e.createElement("div",{className:"px-3 pb-3 space-y-2 border-t border-gray-100 pt-2"},(ie||De)&&e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-600"},e.createElement(Wr,{size:14,className:"text-indigo-500 flex-shrink-0"}),e.createElement("span",null,ie?`${ie}, ${he}`:"",De?`  ${De}`:"")),dt&&e.createElement("a",{href:`tel:${(se||"").replace(/\s+/g,"")}`,className:"flex items-center gap-2 text-xs text-gray-700"},e.createElement(Es,{size:14,className:"text-green-600 flex-shrink-0"}),e.createElement("span",{className:"font-bold"},se)),e.createElement("div",{className:"flex gap-2 pt-1"},ut&&F&&e.createElement(ye,{to:Da(F),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-blue-600 text-white rounded-xl text-xs font-semibold active:scale-95 transition-transform"},e.createElement(Er,{size:14})," Voir boutique"),ut&&!mt&&rt&&e.createElement("button",{type:"button",onClick:G,disabled:q,className:`flex-1 flex items-center justify-center px-3 py-2 rounded-xl text-xs font-semibold active:scale-95 transition-transform border ${H?"border-gray-300 bg-white text-gray-700":"border-gray-200 bg-gray-100 text-gray-700"}`},q?"...":H?"Abonn":"Suivre")))),!mt&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4 space-y-3"},e.createElement("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-stretch"},e.createElement("button",{type:"button",onClick:Oe,disabled:y||Gt,className:`flex items-center justify-center gap-2 px-4 py-3.5 min-h-[52px] rounded-2xl font-semibold text-base transition-all tap-feedback ${Gt?"bg-gray-200 text-gray-500 cursor-default":"bg-indigo-600 text-white hover:bg-indigo-700"}`},e.createElement(en,{size:20}),e.createElement("span",{className:"truncate"},Gt?"Dj au panier":y?"Ajout...":"Ajouter au panier")),Zt&&e.createElement("a",{href:Zt,target:"_blank",rel:"noopener noreferrer",onClick:gr,className:"flex items-center justify-center gap-2 px-4 py-3.5 min-h-[52px] min-w-[120px] rounded-2xl bg-[#25D366] text-white font-semibold text-sm active:scale-[0.98] transition-transform shadow-sm flex-shrink-0",title:"Contacter le vendeur sur WhatsApp"},e.createElement(Hr,{size:22}),e.createElement("span",null,"WhatsApp"))),Gt&&e.createElement(ye,{to:"/orders/checkout",className:"flex items-center justify-center gap-2 w-full px-4 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700 active:scale-[0.98] transition-transform"},e.createElement(en,{size:18}),"Passer la commande")),e.createElement("div",{className:"mx-4 mb-2 rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden"},e.createElement("button",{type:"button",onClick:()=>wr("description"),className:"w-full flex items-center justify-between p-4 min-h-[52px] text-left tap-feedback"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Description"),Pe.description?e.createElement(wo,{size:18,className:"text-gray-400"}):e.createElement(Za,{size:18,className:"text-gray-400"})),Pe.description&&e.createElement("div",{className:"px-4 pb-4"},e.createElement("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line"},f.description))),e.createElement("div",{className:"mx-4 mb-2 rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden"},e.createElement("button",{type:"button",onClick:()=>wr("specifications"),className:"w-full flex items-center justify-between p-4 min-h-[52px] text-left tap-feedback"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Spcifications"),Pe.specifications?e.createElement(wo,{size:18,className:"text-gray-400"}):e.createElement(Za,{size:18,className:"text-gray-400"})),Pe.specifications&&e.createElement("div",{className:"px-4 pb-4 space-y-2"},e.createElement("div",{className:"flex justify-between py-2 border-b border-gray-50 text-sm"},e.createElement("span",{className:"text-gray-500"},"Condition"),e.createElement("span",{className:"font-semibold text-gray-900"},Pa)),e.createElement("div",{className:"flex justify-between py-2 border-b border-gray-50 text-sm"},e.createElement("span",{className:"text-gray-500"},"Catgorie"),e.createElement("span",{className:"font-semibold text-gray-900 capitalize"},f.category)),ie&&e.createElement("div",{className:"flex justify-between py-2 text-sm"},e.createElement("span",{className:"text-gray-500"},"Localisation"),e.createElement("span",{className:"font-semibold text-gray-900"},ie,", ",he)))),e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden"},e.createElement("button",{type:"button",onClick:()=>wr("shipping"),className:"w-full flex items-center justify-between p-4 min-h-[52px] text-left tap-feedback"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Livraison"),Pe.shipping?e.createElement(wo,{size:18,className:"text-gray-400"}):e.createElement(Za,{size:18,className:"text-gray-400"})),Pe.shipping&&e.createElement("div",{className:"px-4 pb-4 space-y-3"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(Kr,{size:16,className:"text-blue-500 flex-shrink-0"}),e.createElement("span",{className:"text-sm text-gray-700"},"Contactez le vendeur pour les dtails de livraison")),e.createElement("div",{className:"flex items-center gap-3"},e.createElement(pa,{size:16,className:"text-green-500 flex-shrink-0"}),e.createElement("span",{className:"text-sm text-gray-700"},"Politique de retour  discuter avec le vendeur")))),e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Avis clients"),e.createElement("button",{type:"button",onClick:()=>lt(!0),className:"text-xs font-semibold text-indigo-600"},"Voir tout")),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3"},e.createElement("div",{className:"flex items-center gap-0.5"},[1,2,3,4,5].map(Ne=>e.createElement(zr,{key:Ne,size:14,className:Ne<=Math.floor(Fr)?"text-amber-500 fill-amber-500":"text-gray-300"}))),e.createElement("span",{className:"font-semibold text-gray-700"},Fr),e.createElement("span",null," ",ka," avis  ",_a," commentaires")),n&&!mt&&e.createElement("div",{className:"flex items-center gap-1 mb-3 pb-3 border-b border-gray-100"},e.createElement("span",{className:"text-xs text-gray-500 mr-2"},"Votre note :"),[1,2,3,4,5].map(Ne=>e.createElement("button",{key:Ne,type:"button",onClick:()=>ra(Ne),disabled:W,className:"focus:outline-none"},e.createElement(zr,{size:20,className:Ne<=Ee?"text-amber-500 fill-amber-500":"text-gray-300"}))),W&&e.createElement("span",{className:"text-xs text-gray-500 ml-2"},"...")),n&&!mt&&e.createElement("form",{onSubmit:qt,className:"mb-3"},e.createElement("div",{className:"flex gap-2"},e.createElement("input",{type:"text",value:ae,onChange:Ne=>te(Ne.target.value),placeholder:"crire un commentaire...",className:"flex-1 min-w-0 px-3 py-2.5 rounded-xl border border-gray-200 bg-gray-50 text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:re}),e.createElement("button",{type:"submit",disabled:re||!ae.trim(),className:"px-4 py-2.5 rounded-xl bg-indigo-600 text-white text-sm font-semibold disabled:opacity-50 active:scale-95 transition-transform"},re?"...":"Envoyer")),ne&&e.createElement("p",{className:"mt-1.5 text-xs text-red-500"},ne)),!n&&e.createElement("p",{className:"text-xs text-gray-400 mb-3"},e.createElement(ye,{to:"/login",className:"text-indigo-600 font-semibold"},"Connectez-vous")," pour laisser un commentaire"),Q.length>0&&e.createElement("div",{className:"rounded-xl bg-gray-50 border border-gray-100 p-3"},e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1"},e.createElement("span",{className:"font-semibold text-gray-800"},Q[0].user?.name||"Utilisateur"),e.createElement("span",null,new Date(Q[0].createdAt).toLocaleDateString("fr-FR"))),e.createElement("p",{className:"text-sm text-gray-700 line-clamp-2"},Q[0].message))),ut&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Photos de la boutique")),St.length>0?e.createElement("div",{className:"grid grid-cols-3 gap-2"},St.map(Ne=>e.createElement(ye,{key:`${Ne.product?._id||"shop"}-${Ne.src}`,to:Dr(Ne.product),...vt,className:"aspect-square overflow-hidden rounded-xl border border-gray-100"},e.createElement("img",{src:Ne.src,alt:Ne.product?.title||"Photo boutique",className:"w-full h-full object-cover"})))):e.createElement("div",{className:"grid grid-cols-3 gap-2"},Array.from({length:3}).map((Ne,Ye)=>e.createElement("div",{key:`shop-skel-${Ye}`,className:"aspect-square rounded-xl border border-gray-100 bg-gray-100 animate-pulse"})))),D.length>0&&e.createElement("div",{className:"mb-3"},e.createElement("div",{className:"flex items-center justify-between px-4 mb-2"},e.createElement("span",{className:"text-sm font-bold text-gray-900"},"Produits similaires"),e.createElement(ye,{to:`/products?category=${f.category}`,className:"text-xs font-semibold text-indigo-600"},"Voir tout")),e.createElement("div",{className:"flex gap-3 overflow-x-auto px-4 pb-2",style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"none"}},D.map(Ne=>e.createElement(ye,{key:Ne._id,to:Dr(Ne),...vt,className:"flex-shrink-0 w-36 rounded-2xl border border-gray-200 bg-white overflow-hidden shadow-sm active:scale-[0.97] transition-transform"},e.createElement("div",{className:"aspect-square bg-gray-100 overflow-hidden"},e.createElement("img",{src:Ne.images?.[0]||"https://via.placeholder.com/300x300",alt:Ne.title,className:"w-full h-full object-cover",loading:"lazy"})),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-xs font-bold text-gray-900 line-clamp-2 mb-1"},Ne.title),e.createElement("p",{className:"text-xs font-black text-indigo-600"},Number(Ne.price).toLocaleString()," FCFA")))))),f.video&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800 mb-3"},e.createElement(vN,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Vido de prsentation")),e.createElement("div",{className:"rounded-xl overflow-hidden border border-gray-100 bg-black"},e.createElement("video",{src:f.video,controls:!0,poster:st[0],className:"w-full h-full object-contain"}))),f?.pdf&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3"},"Fiche produit"),e.createElement("div",{className:"overflow-hidden rounded-xl border border-gray-100 bg-gray-50"},e.createElement("img",{src:f.pdf,alt:`Fiche produit ${f.title||""}`,className:"w-full h-auto object-contain bg-white",loading:"lazy"}))),!mt&&e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},n?e.createElement(e.Fragment,null,e.createElement("button",{type:"button",disabled:nr,onClick:async()=>{if(f?._id){sr(""),er(!0);try{const{data:Ne}=await oe.post("/orders/inquiry",{productId:f._id});Lt(Ne)}catch(Ne){sr(Ne.response?.data?.message||"Impossible d'ouvrir la conversation.")}finally{er(!1)}}},className:"flex items-center justify-center gap-2 w-full px-4 py-3 rounded-xl bg-indigo-50 border border-indigo-100 text-indigo-700 hover:bg-indigo-100 active:scale-[0.98] transition-all text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed"},e.createElement(Hr,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",null,nr?"Ouverture...":"Des questions sur ce produit ? Contacter le vendeur")),Nt&&e.createElement("p",{className:"text-xs text-red-600 mt-2"},Nt)):e.createElement(ye,{to:"/login",state:{from:{pathname:`/product/${f?.slug||f?._id}`}},className:"flex items-center justify-center gap-2 w-full px-4 py-3 rounded-xl bg-indigo-50 border border-indigo-100 text-indigo-700 hover:bg-indigo-100 active:scale-[0.98] transition-all text-sm font-medium"},e.createElement(Hr,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",null,"Des questions sur ce produit ? Connectez-vous pour contacter le vendeur"))),e.createElement("div",{className:"mx-4 mb-3 rounded-2xl border border-gray-100 bg-white shadow-sm p-4"},e.createElement("p",{className:"text-sm font-bold text-gray-900 mb-3 flex items-center gap-2"},e.createElement(mx,{size:16,className:"text-indigo-600"}),"Partager ce produit"),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(_t)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-[#1877F2] text-white text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})),"Facebook"),e.createElement("a",{href:`https://wa.me/?text=${encodeURIComponent(`${f?.title||"Produit"} - ${_t}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-[#25D366] text-white text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),"WhatsApp"),e.createElement("a",{href:`https://t.me/share/url?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-[#0088CC] text-white text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})),"Telegram"),e.createElement("a",{href:`https://www.tiktok.com/share?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-black text-white text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})),"TikTok"),e.createElement("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-black text-white text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})),"X"),e.createElement("button",{type:"button",onClick:async()=>{try{await navigator.clipboard.writeText(_t),He("Lien copi !"),setTimeout(()=>He(""),2500)}catch{He("Impossible de copier."),setTimeout(()=>He(""),2500)}},className:"flex items-center gap-1.5 px-3 py-2 rounded-xl bg-gray-200 text-gray-700 text-xs font-semibold active:scale-95 transition-transform"},e.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),"Copier")),At&&e.createElement("p",{className:"mt-2 text-xs font-semibold text-green-600"},At)),At&&e.createElement("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-gray-900 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg"},At),!mt&&e.createElement("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white/95 backdrop-blur-xl border-t border-gray-200 shadow-2xl",style:{paddingBottom:"env(safe-area-inset-bottom)"}},e.createElement("div",{className:"px-4 py-3 flex items-center gap-2"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("span",{className:"text-lg font-black text-gray-900 block truncate"},Number(Ua).toLocaleString()," FCFA")),e.createElement("button",{onClick:Oe,disabled:y||Gt,className:`flex items-center gap-1.5 px-4 py-2.5 rounded-2xl font-semibold text-sm transition-all active:scale-95 ${Gt?"bg-gray-200 text-gray-500":"bg-indigo-600 text-white"}`},e.createElement(en,{size:18}),e.createElement("span",null,Gt?"Au panier":y?"...":"Ajouter au panier")),Zt&&e.createElement("a",{href:Zt,target:"_blank",rel:"noopener noreferrer",onClick:gr,className:"flex items-center justify-center w-11 h-11 rounded-full bg-emerald-500 text-white active:scale-90 transition-transform shadow-sm"},e.createElement(Hr,{size:20})),e.createElement("button",{type:"button",onClick:it,className:"flex items-center justify-center w-11 h-11 rounded-full border border-gray-200 bg-white active:scale-90 transition-transform"},e.createElement(Yr,{size:20,className:or?"text-red-500":"text-gray-400",fill:or?"currentColor":"none"})))),k&&e.createElement("div",{className:`fixed top-20 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-full text-sm font-semibold shadow-lg ${k.includes("")?"bg-green-600 text-white":"bg-red-600 text-white"}`},k)),_s=()=>e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50"},e.createElement("nav",{className:"bg-white/95 backdrop-blur-xl shadow-lg border-b border-gray-200/50 sticky top-0 z-10 sm:z-40"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("button",{onClick:()=>r("/products"),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-3xl bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium transition-all duration-200 active:scale-95"},e.createElement(Gr,{size:18}),e.createElement("span",null,"Retour")),e.createElement("div",{className:"flex items-center justify-end gap-3 w-full sm:w-auto"},e.createElement("div",{className:"relative"},e.createElement("button",{type:"button",onClick:()=>tt(Ne=>!Ne),className:"p-2 rounded-full hover:bg-gray-100 transition-colors"},e.createElement(mx,{size:20,className:"text-gray-400"})),je&&e.createElement("div",{className:"absolute right-0 mt-2 w-56 rounded-2xl border border-gray-100 bg-white shadow-xl z-20"},e.createElement("div",{className:"p-3 border-b border-gray-100"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},"Partager ce produit"),e.createElement("p",{className:"text-xs text-gray-500"},"Diffusez lannonce en un clic.")),e.createElement("div",{className:"p-2 flex flex-col gap-1"},e.createElement("button",{type:"button",onClick:async()=>{try{await navigator.clipboard.writeText(_t),He("Lien copi !"),setTimeout(()=>He(""),2500)}catch{He("Impossible de copier."),setTimeout(()=>He(""),2500)}finally{tt(!1)}},className:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors"},"Copier le lien"),e.createElement("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(_t)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 transition-colors",onClick:()=>tt(!1)},"Partager sur Facebook"),e.createElement("a",{href:`https://wa.me/?text=${encodeURIComponent(`${f?.title||"Produit"} - ${_t}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm text-gray-700 hover:bg-green-50 transition-colors",onClick:()=>tt(!1)},"Envoyer sur WhatsApp"),e.createElement("a",{href:`https://t.me/share/url?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm text-gray-700 hover:bg-sky-50 transition-colors",onClick:()=>tt(!1)},"Partager sur Telegram"),e.createElement("a",{href:`https://www.tiktok.com/share?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-xl px-3 py-2 text-sm text-gray-700 hover:bg-black/5 transition-colors",onClick:()=>tt(!1)},"Partager sur TikTok")),At&&e.createElement("div",{className:"px-3 pb-3 text-xs text-green-600"},At))))))),e.createElement("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 pb-24 md:pb-8"},e.createElement("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-600 mb-6 sm:mb-8"},e.createElement(ye,{to:"/",className:"hover:text-indigo-600 transition-colors font-medium"},"Accueil"),e.createElement(Ar,{size:14,className:"text-gray-400"}),e.createElement(ye,{to:`/products?category=${f.category}`,className:"hover:text-indigo-600 transition-colors capitalize font-medium"},f.category),e.createElement(Ar,{size:14,className:"text-gray-400"}),e.createElement("span",{className:"text-gray-900 font-bold truncate"},f.title)),e.createElement("div",{className:"grid gap-6 sm:gap-8 lg:grid-cols-[1.2fr_1fr] lg:gap-12"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"relative group"},e.createElement("div",{className:`relative aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl border-2 border-gray-200 overflow-hidden shadow-xl ${hr}`,onClick:aa},e.createElement("img",{src:Mt,alt:f?.title||"Produit",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.createElement("button",{type:"button",onClick:Ne=>{Ne.stopPropagation(),it()},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-md w-11 h-11 rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200 active:scale-90 group/fav z-20 border border-gray-200"},e.createElement(Yr,{size:20,className:`transition-all duration-200 ${or?"text-red-500":"text-gray-600 group-hover/fav:text-red-400"}`,strokeWidth:2,fill:or?"currentColor":"none"})),e.createElement("div",{className:"absolute top-4 left-4 flex flex-col space-y-2 z-20"},xa&&e.createElement("span",{className:"bg-gradient-to-r from-red-500 via-pink-500 to-red-600 text-white px-4 py-2.5 rounded-2xl text-sm font-black shadow-2xl ring-2 ring-white/50"},"-",Na,"%"),Ke&&e.createElement("span",{className:"bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-600 text-white px-4 py-2.5 rounded-2xl text-sm font-black shadow-2xl ring-2 ring-white/50"},"Nouveau"),e.createElement("span",{className:`bg-gradient-to-r ${oo} text-white px-4 py-2.5 rounded-2xl text-sm font-black shadow-2xl ring-2 ring-white/50`},Pa),f.certified&&e.createElement("span",{className:"inline-flex items-center gap-1.5 rounded-2xl bg-gradient-to-r from-emerald-500 to-green-600 px-4 py-2.5 text-xs font-black text-white shadow-2xl ring-2 ring-white/50"},e.createElement(pa,{className:"w-4 h-4"}),"Certifi HDMarket")),st.length>1&&e.createElement("div",{className:"absolute bottom-4 left-4 bg-black/70 backdrop-blur-md text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-lg z-20"},A+1," / ",st.length),e.createElement("button",{type:"button",onClick:sn,className:"absolute bottom-4 right-4 bg-white/95 backdrop-blur-md w-11 h-11 rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200 active:scale-90 z-20 border border-gray-200"},e.createElement(fj,{size:20,className:"text-gray-700"})))),st.length>1&&e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},st.map((Ne,Ye)=>e.createElement("button",{key:Ye,type:"button",onClick:()=>Ta(Ye),className:`flex-shrink-0 w-16 h-16 sm:w-20 sm:h-20 rounded-xl border-2 overflow-hidden transition-all transform hover:scale-110 ${A===Ye?"border-indigo-500 ring-2 ring-indigo-200 shadow-md scale-110":"border-gray-200 hover:border-indigo-300"}`},e.createElement("img",{src:Ne,alt:`${f.title} - Image ${Ye+1}`,className:"w-full h-full object-cover"})))),f.video&&e.createElement("div",{className:"space-y-3 rounded-2xl border border-gray-200 bg-white p-4"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800"},e.createElement(vN,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Vido de prsentation")),e.createElement("div",{className:"rounded-xl overflow-hidden border border-gray-100 bg-black"},e.createElement("video",{src:f.video,controls:!0,poster:st[0],className:"w-full h-full object-contain"})))),e.createElement("div",{className:"lg:sticky lg:top-24 space-y-6 h-fit"},e.createElement("div",{className:"bg-white rounded-3xl border-2 border-gray-100 shadow-xl p-6 sm:p-8 space-y-6"},e.createElement("div",{className:"space-y-4"},e.createElement("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-black text-gray-900 leading-tight"},f.title),e.createElement("div",{className:"flex flex-wrap items-center gap-3"},e.createElement("span",{className:"inline-flex items-center bg-gradient-to-r from-indigo-100 to-purple-100 px-4 py-2 rounded-full text-sm font-bold text-indigo-700 border border-indigo-200"},f.category),e.createElement("div",{className:"flex items-center space-x-1.5 text-sm text-gray-600 bg-gray-50 px-3 py-1.5 rounded-full"},e.createElement(Xt,{size:14}),e.createElement("span",{className:"font-medium"},$e===0?"Aujourd'hui":$e===1?"Hier":`Il y a ${$e} jours`)))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 py-5 border-y-2 border-gray-100"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"flex items-center gap-2 bg-gradient-to-r from-amber-50 to-orange-50 px-4 py-2.5 rounded-2xl border-2 border-amber-200"},e.createElement(zr,{className:"w-6 h-6 text-amber-500",fill:"currentColor"}),e.createElement("span",{className:"text-2xl font-black text-gray-900"},Fr),e.createElement("span",{className:"text-gray-600 font-semibold"},"(",ka,")"))),e.createElement("div",{className:"flex flex-wrap items-center gap-4 text-sm"},e.createElement("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-2 rounded-xl border border-blue-100"},e.createElement(Hr,{size:16,className:"text-blue-600"}),e.createElement("span",{className:"font-semibold text-gray-700"},_a),e.createElement("span",{className:"text-gray-500"},"commentaires")),e.createElement("div",{className:"flex items-center gap-2 bg-purple-50 px-3 py-2 rounded-xl border border-purple-100"},e.createElement(Jn,{size:16,className:"text-purple-600"}),e.createElement("span",{className:"font-semibold text-gray-700"},f.views||0),e.createElement("span",{className:"text-gray-500"},"vues")),e.createElement("div",{className:"flex items-center gap-2 bg-pink-50 px-3 py-2 rounded-xl border border-pink-100"},e.createElement(Yr,{size:16,className:"text-pink-500",fill:"currentColor"}),e.createElement("span",{className:"font-semibold text-gray-700"},O),e.createElement("span",{className:"text-gray-500"},"favoris")))),e.createElement("div",{className:"space-y-3"},xa?e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-wrap items-baseline gap-3"},e.createElement("span",{className:"text-4xl sm:text-5xl font-black text-gray-900"},Number(Ua).toLocaleString()," FCFA"),e.createElement("span",{className:"text-xl sm:text-2xl text-gray-400 line-through font-bold"},Number(fa).toLocaleString()," FCFA")),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("span",{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-xl text-sm font-black shadow-lg"},"conomisez ",Number(fa-Ua).toLocaleString()," FCFA"))):e.createElement("span",{className:"text-4xl sm:text-5xl font-black text-gray-900"},Number(Ua).toLocaleString()," FCFA")),nn.available&&e.createElement("div",{className:"rounded-2xl border border-indigo-200 bg-gradient-to-r from-indigo-50 to-blue-50 px-4 py-3"},e.createElement("p",{className:"text-sm font-black text-indigo-700"},"Paiement par tranche disponible: profitez de ce produit ds aujourdhui."),e.createElement("p",{className:"text-xs text-indigo-700 mt-1"},"Premier paiement min: ",Number(nn.minAmount||0).toLocaleString()," FCFA  Dure: ",nn.duration||0," jours")),f.confirmationNumber&&e.createElement("p",{className:"text-xs text-gray-500"},"Code produit :",e.createElement("span",{className:"font-semibold text-gray-900 ml-1"},f.confirmationNumber),e.createElement("span",{className:"block text-[11px] text-gray-400"},"Mentionnez ce code  ladministrateur lorsque vous validez votre commande.")),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"flex flex-wrap items-center gap-2 text-[11px] sm:text-xs"},f.certified&&e.createElement("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700"},e.createElement(pa,{className:"w-4 h-4 text-emerald-500"}),"Produit certifi HDMarket"),f.certifiedBy&&e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-gray-700"},"Certifi par ",f.certifiedBy?.name||"HDMarket"),f.certifiedAt&&e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-gray-600"},new Date(f.certifiedAt).toLocaleDateString("fr-FR"))),pt&&e.createElement("button",{type:"button",onClick:Je,disabled:Tt,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-3xl border border-gray-300 bg-white px-5 py-2.5 text-sm font-semibold text-gray-700 transition-all duration-200 hover:bg-gray-50 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed"},f.certified?"Retirer la certification":"Certifier ce produit")),(et||Ze)&&e.createElement("p",{className:`text-xs ${Ze?"text-red-600":"text-green-600"}`},Ze||et)),f.user&&e.createElement("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-3xl p-6 border-2 border-indigo-200 shadow-lg"},e.createElement("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center"},e.createElement("div",{className:"flex-shrink-0"},de?e.createElement("img",{src:de,alt:It||f.user.name,className:"w-16 h-16 rounded-2xl object-cover border-2 border-white shadow-lg"}):e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(Er,{className:"w-8 h-8 text-white"}))),e.createElement("div",{className:"flex-1 space-y-2"},e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("h3",{className:"text-lg font-black text-gray-900"},ut&&F?e.createElement(ye,{to:Da(F),className:"hover:text-indigo-600 transition-colors"},It||f.user.name):It||f.user.name),ut&&e.createElement(_n,{verified:rt,showLabel:!1})),(ie||De)&&e.createElement("div",{className:"flex items-center gap-2 text-sm text-gray-700 bg-white/60 px-3 py-1.5 rounded-xl"},e.createElement(Wr,{size:16,className:"text-indigo-600"}),e.createElement("span",{className:"font-medium"},ie?`${ie}, ${he}`:"",De?`${ie?"  ":""}${De}`:"")),e.createElement("p",{className:"text-xs text-gray-600 font-semibold flex items-center gap-2 flex-wrap"},e.createElement("span",{className:"bg-white/60 px-3 py-1 rounded-lg"},"Vendeur ",ut?"Professionnel":"Particulier"),ut&&e.createElement(_n,{verified:rt}))),ut&&F&&e.createElement("div",{className:"flex w-full flex-col gap-3 sm:w-auto"},e.createElement(ye,{to:Da(F),className:"flex w-full items-center justify-center gap-2 px-5 py-3 bg-blue-600 text-white rounded-3xl font-semibold hover:bg-blue-700 transition-all duration-200 active:scale-95 shadow-sm text-sm"},e.createElement(Er,{size:18}),e.createElement("span",null,"Voir la boutique")),!mt&&e.createElement("button",{type:"button",onClick:G,disabled:q||!rt,className:`flex w-full items-center justify-center gap-2 px-5 py-3 rounded-3xl text-sm font-semibold transition-all duration-200 active:scale-95 ${H?"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${!rt||q?"opacity-60 cursor-not-allowed":""}`},q?"Traitement":H?"Se dsabonner":"Suivre la boutique "))),dt&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-indigo-200"},e.createElement("a",{href:`tel:${(se||"").replace(/\s+/g,"")}`,className:"flex flex-wrap items-center gap-2 text-sm bg-white/80 px-4 py-3 rounded-xl hover:bg-green-50 transition-colors border border-green-200"},e.createElement(Es,{size:18,className:"text-green-600"}),e.createElement("span",{className:"text-gray-900 font-black"},se),e.createElement("span",{className:"text-xs text-gray-600 font-semibold"}," Contact direct")))),!mt&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.createElement("button",{onClick:Oe,disabled:y||Gt,className:`flex items-center justify-center space-x-2 px-6 py-3.5 rounded-3xl font-semibold text-base transition-all duration-200 active:scale-95 shadow-sm ${Gt?"bg-gray-300 text-gray-500 cursor-not-allowed opacity-60":"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-md"}`},e.createElement(en,{size:20}),e.createElement("span",null,Gt?"Dj au panier":y?"Ajout...":"Ajouter au panier")),Zt&&e.createElement("a",{href:Zt,target:"_blank",rel:"noopener noreferrer",onClick:gr,className:"flex items-center justify-center space-x-2 px-6 py-3.5 rounded-3xl border border-gray-300 bg-white text-gray-900 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(Hr,{size:20}),e.createElement("span",null,"WhatsApp"))),Gt&&e.createElement(ye,{to:"/orders/checkout",className:"flex items-center justify-center space-x-2 px-6 py-3.5 rounded-3xl bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(en,{size:20}),e.createElement("span",null,"Passer la commande")),k&&e.createElement("div",{className:`rounded-2xl p-4 text-center font-semibold ${k.includes("")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`},k),Zt&&e.createElement("p",{className:"text-center text-sm text-gray-500"},P>0?` Contact ${P} fois via WhatsApp`:" Soyez le premier  contacter ce vendeur")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},e.createElement("div",{className:"flex items-center space-x-2 bg-green-50 px-4 py-3 rounded-xl border border-green-100"},e.createElement(pa,{className:"w-5 h-5 text-green-600"}),e.createElement("span",{className:"text-sm font-semibold text-gray-700"},"Paiement scuris")),e.createElement("div",{className:"flex items-center space-x-2 bg-blue-50 px-4 py-3 rounded-xl border border-blue-100"},e.createElement(Kr,{className:"w-5 h-5 text-blue-600"}),e.createElement("span",{className:"text-sm font-semibold text-gray-700"},"Livraison disponible"))),!mt&&e.createElement(e.Fragment,null,n?e.createElement("button",{type:"button",disabled:nr,onClick:async()=>{if(f?._id){sr(""),er(!0);try{const{data:Ne}=await oe.post("/orders/inquiry",{productId:f._id});Lt(Ne)}catch(Ne){sr(Ne.response?.data?.message||"Impossible d'ouvrir la conversation.")}finally{er(!1)}}},className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-indigo-50 border border-indigo-100 text-indigo-700 hover:bg-indigo-100 hover:border-indigo-200 transition-colors text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed w-full"},e.createElement(Hr,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",null,nr?"Ouverture...":"Des questions sur ce produit ? Contacter le vendeur")):e.createElement(ye,{to:"/login",state:{from:{pathname:`/product/${f?.slug||f?._id}`}},className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-indigo-50 border border-indigo-100 text-indigo-700 hover:bg-indigo-100 hover:border-indigo-200 transition-colors text-sm font-medium w-full"},e.createElement(Hr,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",null,"Des questions sur ce produit ? Connectez-vous pour contacter le vendeur")),Nt&&e.createElement("p",{className:"text-sm text-red-600 mt-1"},Nt)),e.createElement("div",{className:"bg-gradient-to-r from-gray-50 to-indigo-50 rounded-2xl p-4 border border-gray-200"},e.createElement("p",{className:"text-sm font-bold text-gray-700 mb-3 flex items-center gap-2"},e.createElement(mx,{size:16,className:"text-indigo-600"}),"Partager ce produit"),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(_t)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-[#1877F2] text-white font-semibold text-sm hover:bg-[#166FE5] transition-all duration-200 active:scale-95 shadow-sm",title:"Partager sur Facebook"},e.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})),e.createElement("span",{className:"hidden sm:inline"},"Facebook")),e.createElement("a",{href:`https://wa.me/?text=${encodeURIComponent(`${f?.title||"Produit"} - ${_t}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-[#25D366] text-white font-semibold text-sm hover:bg-[#20BD5A] transition-all duration-200 active:scale-95 shadow-sm",title:"Partager sur WhatsApp"},e.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),e.createElement("span",{className:"hidden sm:inline"},"WhatsApp")),e.createElement("a",{href:`https://t.me/share/url?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-[#0088CC] text-white font-semibold text-sm hover:bg-[#007AB8] transition-all duration-200 active:scale-95 shadow-sm",title:"Partager sur Telegram"},e.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})),e.createElement("span",{className:"hidden sm:inline"},"Telegram")),e.createElement("a",{href:`https://www.tiktok.com/share?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-black text-white font-semibold text-sm hover:bg-gray-800 transition-all duration-200 active:scale-95 shadow-sm",title:"Partager sur TikTok"},e.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})),e.createElement("span",{className:"hidden sm:inline"},"TikTok")),e.createElement("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(_t)}&text=${encodeURIComponent(f?.title||"Produit")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-black text-white font-semibold text-sm hover:bg-gray-800 transition-all duration-200 active:scale-95 shadow-sm",title:"Partager sur X (Twitter)"},e.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})),e.createElement("span",{className:"hidden sm:inline"},"X")),e.createElement("button",{type:"button",onClick:async()=>{try{await navigator.clipboard.writeText(_t),He("Lien copi !"),setTimeout(()=>He(""),2500)}catch{He("Impossible de copier."),setTimeout(()=>He(""),2500)}},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gray-200 text-gray-700 font-semibold text-sm hover:bg-gray-300 transition-all duration-200 active:scale-95",title:"Copier le lien"},e.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),e.createElement("span",{className:"hidden sm:inline"},"Copier"))),At&&e.createElement("p",{className:"mt-2 text-sm font-semibold text-green-600"},At))))),e.createElement("div",{className:"mt-12 sm:mt-16"},e.createElement("div",{className:"bg-white rounded-3xl border-2 border-gray-100 shadow-xl overflow-hidden"},e.createElement("div",{className:"border-b-2 border-gray-100 overflow-x-auto"},e.createElement("nav",{className:"flex flex-wrap gap-2 sm:gap-4 min-w-full px-4 sm:px-6 pt-4"},[{id:"description",label:"Description",icon:Jn},{id:"specifications",label:"Spcifications",icon:pa},{id:"reviews",label:`Avis (${_a})`,icon:zr},{id:"shipping",label:"Livraison",icon:Kr}].map(Ne=>{const Ye=Ne.icon;return e.createElement("button",{key:Ne.id,onClick:()=>L(Ne.id),className:`flex items-center gap-2 py-2.5 px-5 font-semibold text-sm rounded-3xl transition-all duration-200 active:scale-95 ${z===Ne.id?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`},e.createElement(Ye,{size:18}),e.createElement("span",null,Ne.label))}))),e.createElement("div",{className:"p-6 sm:p-8"},z==="description"&&e.createElement("div",{className:"prose max-w-none"},e.createElement("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-100"},e.createElement("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-base sm:text-lg"},f.description))),z==="specifications"&&e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-4 px-4 bg-gradient-to-r from-gray-50 to-indigo-50 rounded-xl border border-gray-100"},e.createElement("span",{className:"font-bold text-gray-700"},"Condition"),e.createElement("span",{className:"text-gray-900 font-semibold text-lg"},Pa)),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-4 px-4 bg-gradient-to-r from-gray-50 to-indigo-50 rounded-xl border border-gray-100"},e.createElement("span",{className:"font-bold text-gray-700"},"Catgorie"),e.createElement("span",{className:"text-gray-900 font-semibold text-lg capitalize"},f.category)),(ie||f.user?.shopAddress)&&e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between py-4 px-4 bg-gradient-to-r from-gray-50 to-indigo-50 rounded-xl border border-gray-100 text-sm"},e.createElement("span",{className:"font-bold text-gray-700"},"Localisation"),e.createElement("span",{className:"text-gray-900 font-semibold text-right"},ie?`${ie}, ${he}`:"",f.user?.shopAddress?`${ie?"  ":""}${f.user.shopAddress}`:""))),z==="reviews"&&e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 rounded-3xl p-6 sm:p-8 border-2 border-amber-200 shadow-xl"},e.createElement("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"},e.createElement("div",{className:"text-center lg:text-left"},e.createElement("div",{className:"text-5xl sm:text-6xl font-black text-gray-900 mb-2"},Fr),e.createElement("div",{className:"flex items-center justify-center lg:justify-start gap-1 mb-2"},[1,2,3,4,5].map(Ne=>e.createElement(zr,{key:Ne,size:24,className:`${Ne<=Math.floor(Fr)?"text-amber-500 fill-amber-500":"text-gray-300"}`}))),e.createElement("div",{className:"text-sm text-gray-700 font-bold"},ka," avis  ",_a," commentaires")),e.createElement("div",{className:"flex-1 w-full max-w-md"},e.createElement("h4",{className:"font-black text-gray-900 mb-4 text-lg"},Ee>0?"Votre note":"Notez ce produit"),n?mt?e.createElement("p",{className:"text-sm text-gray-500"},"Vous ne pouvez pas noter votre propre produit."):e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-wrap items-center gap-2"},[1,2,3,4,5].map(Ne=>e.createElement("button",{key:Ne,type:"button",onClick:()=>ra(Ne),disabled:W,className:"focus:outline-none disabled:opacity-50 hover:scale-110 transition-transform"},e.createElement(zr,{size:28,className:`${Ne<=Ee?"text-amber-500 fill-amber-500":"text-gray-300"} hover:text-amber-400 transition-colors`}))),W&&e.createElement("span",{className:"text-sm text-gray-600 font-semibold ml-2"},"Envoi...")),Ee>0&&e.createElement("p",{className:"text-sm text-green-600 font-bold mt-3 bg-green-50 px-3 py-2 rounded-xl inline-block"}," Vous avez not ",Ee,"/5")):e.createElement(ye,{to:"/login",state:{from:`/product/${t}`},className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 font-semibold rounded-xl hover:bg-indigo-100 transition-colors text-sm border border-indigo-200"},"Connectez-vous pour noter")))),e.createElement("div",{className:"bg-gradient-to-br from-blue-50 via-cyan-50 to-indigo-50 rounded-3xl p-6 sm:p-8 border-2 border-blue-200 shadow-lg"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(Hr,{className:"w-6 h-6 text-white"})),e.createElement("div",null,e.createElement("h4",{className:"text-xl font-black text-gray-900"},"Commentaires"),e.createElement("p",{className:"text-sm text-gray-600"},Q.length," commentaire",Q.length>1?"s":""))),ne&&e.createElement("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},e.createElement("p",{className:"text-red-700 text-sm"},ne)),n&&e.createElement("form",{onSubmit:qt,className:"mb-6"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row"},e.createElement("input",{type:"text",value:ae,onChange:Ne=>te(Ne.target.value),placeholder:"Laissez un commentaire...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:re}),e.createElement("button",{type:"submit",disabled:!ae.trim()||re,className:"px-5 py-2.5 bg-blue-600 text-white rounded-3xl font-semibold hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed transition-all duration-200 active:scale-95 shadow-sm w-full sm:w-auto"},re?"Envoi...":"Commenter"))),e.createElement("div",{className:"space-y-4"},Q.length===0?e.createElement("div",{className:"text-center py-8 text-gray-500"},e.createElement(Hr,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.createElement("p",null,"Aucun commentaire pour le moment."),!n&&e.createElement("p",{className:"text-sm mt-2"},e.createElement("button",{onClick:()=>r("/login"),className:"text-indigo-600 hover:text-indigo-700"},"Connectez-vous")," ","pour laisser le premier commentaire.")):Q.map(Ne=>e.createElement(mO,{key:Ne._id,comment:Ne,user:n,replyingTo:ve,setReplyingTo:be,replyText:J,setReplyText:Ge,onSubmitReply:Nr,submittingComment:re,onReport:Ye=>zt({isOpen:!0,type:"comment",commentId:Ye||Ne._id,photoUrl:null}),productId:f?._id,onDelete:lr,deletingCommentId:mr}))))),z==="shipping"&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl border-2 border-blue-200 text-center sm:text-left shadow-md"},e.createElement("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0"},e.createElement(Kr,{className:"w-7 h-7 text-white"})),e.createElement("div",null,e.createElement("h4",{className:"font-black text-gray-900 text-lg mb-1"},"Options de livraison"),e.createElement("p",{className:"text-sm text-gray-700 font-medium"},"Contactez le vendeur pour les dtails de livraison"))),e.createElement("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border-2 border-green-200 text-center sm:text-left shadow-md"},e.createElement("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0"},e.createElement(pa,{className:"w-7 h-7 text-white"})),e.createElement("div",null,e.createElement("h4",{className:"font-black text-gray-900 text-lg mb-1"},"Retour et change"),e.createElement("p",{className:"text-sm text-gray-700 font-medium"},"Politique de retour  discuter avec le vendeur"))))))),f?.pdf&&e.createElement("section",{className:"mt-6 rounded-2xl border border-gray-200 bg-white p-4 sm:p-6"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},e.createElement("h3",{className:"text-base font-semibold text-gray-900"},"Fiche produit (JPEG)")),e.createElement("div",{className:"mt-4 relative overflow-hidden rounded-xl border border-gray-100 bg-gray-50"},e.createElement("img",{src:f.pdf,alt:`Fiche produit ${f.title||""}`,className:"w-full h-auto object-contain bg-white",loading:"lazy"}))),we&&ut&&e.createElement("section",{className:"mt-8 rounded-2xl border border-gray-200 bg-white p-4"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900"},"Photos de la boutique"),e.createElement("span",{className:"text-xs text-gray-500"},"Slection alatoire")),St.length>0?e.createElement("div",{className:"grid grid-cols-3 gap-2"},St.map(Ne=>e.createElement(ye,{key:`${Ne.product?._id||"shop"}-${Ne.src}`,to:Dr(Ne.product),...vt,className:"aspect-square overflow-hidden rounded-xl border border-gray-100"},e.createElement("img",{src:Ne.src,alt:Ne.product?.title||"Photo boutique",className:"w-full h-full object-cover"})))):e.createElement("div",{className:"grid grid-cols-3 gap-2"},Array.from({length:3}).map((Ne,Ye)=>e.createElement("div",{key:`shop-photo-skeleton-${Ye}`,className:"aspect-square rounded-xl border border-gray-100 bg-gray-100 animate-pulse"})))),we&&D.length>0&&e.createElement("section",{className:"mt-8 rounded-3xl border-2 border-gray-200 bg-white p-4 sm:p-6 shadow-xl"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",null,e.createElement("h3",{className:"text-lg font-black text-gray-900"},"Produits similaires"),e.createElement("p",{className:"text-xs text-gray-600"},"Dcouvrez d'autres produits")),e.createElement(ye,{to:`/products?category=${f.category}`,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700"},"Voir tout ")),e.createElement("div",{className:"grid grid-cols-2 gap-3"},D.map(Ne=>e.createElement(ye,{key:Ne._id,to:Dr(Ne),...vt,className:"group overflow-hidden rounded-2xl border-2 border-gray-200 bg-white transition-all hover:shadow-lg hover:border-indigo-300"},e.createElement("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden"},e.createElement("img",{src:Ne.images?.[0]||"https://via.placeholder.com/300x300",alt:Ne.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})),e.createElement("div",{className:"p-3"},e.createElement("p",{className:"text-xs font-bold text-gray-900 line-clamp-2 mb-2 min-h-[2rem] group-hover:text-indigo-600 transition-colors"},Ne.title),e.createElement("p",{className:"text-sm font-black text-indigo-600"},Number(Ne.price).toLocaleString()," FCFA")))))),we&&e.createElement("section",{className:"mt-8 rounded-2xl border border-gray-200 bg-white p-4"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900"},"Avis & notes"),e.createElement("button",{type:"button",onClick:()=>lt(!0),className:"text-xs font-semibold text-indigo-600"},"Voir tout")),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-600"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(zr,{className:"h-4 w-4 text-amber-400"}),e.createElement("span",{className:"font-semibold text-gray-900"},Fr),e.createElement("span",null,"(",ka,")")),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Hr,{className:"h-4 w-4"}),e.createElement("span",null,_a," commentaires"))),Q.length>0?e.createElement("div",{className:"mt-4 space-y-3"},Q.slice(0,2).map(Ne=>e.createElement("div",{key:Ne._id,className:"rounded-xl border border-gray-100 bg-gray-50 p-3"},e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},e.createElement("span",{className:"font-semibold text-gray-800"},Ne.user?.name||"Utilisateur"),e.createElement("span",null,new Date(Ne.createdAt).toLocaleDateString("fr-FR"))),e.createElement("p",{className:"mt-2 text-sm text-gray-700 line-clamp-3"},Ne.message)))):e.createElement("p",{className:"mt-4 text-xs text-gray-500"},"Aucun avis pour le moment.")),!we&&D.length>0&&e.createElement("section",{className:"mt-16 sm:mt-20"},e.createElement("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-8"},e.createElement("div",null,e.createElement("h2",{className:"text-2xl sm:text-3xl font-black text-gray-900 mb-2"},"Produits similaires"),e.createElement("p",{className:"text-gray-600 text-sm"},"Dcouvrez d'autres produits de la mme catgorie")),e.createElement(ye,{to:`/products?category=${f.category}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-md hover:shadow-lg text-sm"},"Voir tout ",e.createElement(Ar,{size:18}))),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5"},D.map(Ne=>e.createElement(ye,{key:Ne._id,to:Dr(Ne),...vt,className:"group block bg-white rounded-2xl border-2 border-gray-200 overflow-hidden hover:shadow-2xl hover:border-indigo-300 transition-all hover:-translate-y-1"},e.createElement("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden"},e.createElement("img",{src:Ne.images?.[0]||"https://via.placeholder.com/300x300",alt:Ne.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})),e.createElement("div",{className:"p-4"},e.createElement("h3",{className:"font-bold text-sm text-gray-900 line-clamp-2 mb-2 min-h-[2.5rem] group-hover:text-indigo-600 transition-colors"},Ne.title),e.createElement("p",{className:"text-lg font-black text-indigo-600"},Number(Ne.price).toLocaleString()," FCFA"))))))));return e.createElement(e.Fragment,null,we?ya():_s(),wt&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 px-4 py-6 sm:items-center",onClick:()=>lt(!1)},e.createElement("div",{className:"w-full max-w-lg rounded-2xl bg-white p-4 shadow-xl max-h-[85vh] overflow-y-auto",onClick:Ne=>Ne.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900"},"Avis & notes"),e.createElement("button",{type:"button",onClick:()=>lt(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200","aria-label":"Fermer"},e.createElement(jt,{className:"h-4 w-4"}))),e.createElement("div",{className:"mt-3 flex items-center gap-4 text-xs text-gray-600"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(zr,{className:"h-4 w-4 text-amber-400"}),e.createElement("span",{className:"font-semibold text-gray-900"},Fr),e.createElement("span",null,"(",ka,")")),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Hr,{className:"h-4 w-4"}),e.createElement("span",null,_a," commentaires"))),e.createElement("div",{className:"mt-4 space-y-4"},n&&!mt&&e.createElement("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-3 space-y-3"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-xs text-gray-500"},"Votre note :"),[1,2,3,4,5].map(Ne=>e.createElement("button",{key:`modal-rating-${Ne}`,type:"button",onClick:()=>ra(Ne),disabled:W,className:"focus:outline-none disabled:opacity-50"},e.createElement(zr,{size:18,className:Ne<=Ee?"text-amber-500 fill-amber-500":"text-gray-300"}))),W&&e.createElement("span",{className:"text-xs text-gray-500 ml-1"},"...")),e.createElement("form",{onSubmit:qt,className:"flex gap-2"},e.createElement("input",{type:"text",value:ae,onChange:Ne=>te(Ne.target.value),placeholder:"Laisser un commentaire...",className:"flex-1 min-w-0 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm",disabled:re}),e.createElement("button",{type:"submit",disabled:re||!ae.trim(),className:"rounded-lg bg-indigo-600 px-3 py-2 text-xs font-semibold text-white disabled:opacity-60"},re?"...":"Envoyer")),ne&&e.createElement("p",{className:"text-xs text-red-600"},ne)),!n&&e.createElement("p",{className:"text-xs text-gray-500"},e.createElement(ye,{to:"/login",className:"text-indigo-600 font-semibold"},"Connectez-vous")," pour noter ou commenter."),n&&mt&&e.createElement("p",{className:"text-xs text-gray-500"},"Vous ne pouvez pas noter votre propre produit.")),e.createElement("div",{className:"mt-4 space-y-4"},Q.length===0?e.createElement("p",{className:"text-xs text-gray-500"},"Aucun avis pour le moment."):Q.map(Ne=>e.createElement(mO,{key:Ne._id,comment:Ne,user:n,replyingTo:ve,setReplyingTo:be,replyText:J,setReplyText:Ge,onSubmitReply:Nr,submittingComment:re,onReport:Ye=>zt({isOpen:!0,type:"comment",commentId:Ye||Ne._id,photoUrl:null}),productId:f?._id,onDelete:lr,deletingCommentId:mr}))))),Dt&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm px-4 py-6",onClick:ur},e.createElement("div",{className:"relative w-full max-w-5xl",onClick:Ne=>Ne.stopPropagation()},e.createElement("div",{className:"max-h-[85vh] overflow-auto rounded-3xl bg-black shadow-2xl",onWheel:na},e.createElement("img",{src:Mt,alt:f?.title||"Produit",className:"block max-w-none object-contain",style:{width:`${Me*100}%`,height:"auto"}})),e.createElement("div",{className:"absolute right-4 top-4 flex gap-2 z-10"},n&&e.createElement("button",{type:"button",onClick:Ne=>{Ne.stopPropagation(),zt({isOpen:!0,type:"photo",commentId:null,photoUrl:Mt})},className:"rounded-full bg-white/95 backdrop-blur-md w-10 h-10 flex items-center justify-center text-red-600 shadow-md hover:bg-white transition-all duration-200 active:scale-90 border border-gray-200",title:"Signaler cette photo"},e.createElement(yu,{size:18})),e.createElement("button",{type:"button",onClick:ur,className:"rounded-full bg-white/95 backdrop-blur-md w-10 h-10 flex items-center justify-center text-gray-700 shadow-md hover:bg-white transition-all duration-200 active:scale-90 border border-gray-200"},e.createElement(jt,{size:20}))),st.length>1&&e.createElement(e.Fragment,null,e.createElement("button",{type:"button",onClick:gn,className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full bg-white/95 backdrop-blur-md w-10 h-10 flex items-center justify-center text-gray-700 shadow-md hover:bg-white transition-all duration-200 active:scale-90 z-10 border border-gray-200"},e.createElement(xu,{size:20})),e.createElement("button",{type:"button",onClick:pr,className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/95 backdrop-blur-md w-10 h-10 flex items-center justify-center text-gray-700 shadow-md hover:bg-white transition-all duration-200 active:scale-90 z-10 border border-gray-200"},e.createElement(Ar,{size:20})),e.createElement("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 backdrop-blur-md text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg"},e.createElement("span",null,A+1," / ",st.length))))),ht&&e.createElement(Yd,{order:ht,onClose:()=>Lt(null),defaultOpen:!0,buttonText:"Contacter le vendeur"}),e.createElement(Wie,{isOpen:Rt.isOpen,onClose:()=>zt({isOpen:!1,type:null,commentId:null,photoUrl:null}),type:Rt.type,commentId:Rt.commentId,productId:f?._id,photoUrl:Rt.photoUrl,productTitle:f?.title}))}function mO({comment:t,user:r,replyingTo:a,setReplyingTo:n,replyText:s,setReplyText:o,onSubmitReply:l,submittingComment:c,onReport:m,productId:p,onDelete:f,deletingCommentId:g}){const b=r?.role==="admin";return e.createElement("div",{className:"bg-white rounded-3xl border-2 border-gray-200 overflow-hidden shadow-lg hover:shadow-xl transition-shadow"},e.createElement("div",{className:"p-5 sm:p-6"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-3"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg ring-2 ring-white"},e.createElement("span",{className:"text-white text-base font-black"},t.user?.name?.charAt(0)||"U")),e.createElement("div",null,e.createElement("span",{className:"font-black text-gray-900 text-base"},t.user?.name||"Utilisateur"),e.createElement("div",{className:"text-xs text-gray-600 font-medium mt-0.5"},new Date(t.createdAt).toLocaleDateString("fr-FR")))),r&&e.createElement("div",{className:"flex items-center gap-2"},b&&f&&e.createElement("button",{onClick:()=>f(t._id),disabled:g===t._id,className:"inline-flex items-center gap-2 px-3 py-2 bg-red-50 text-red-600 rounded-3xl hover:bg-red-100 transition-all duration-200 active:scale-95 text-sm font-medium disabled:opacity-50",title:"Supprimer ce commentaire"},g===t._id?e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):e.createElement(is,{size:14})),m&&r&&r._id!==t.user?._id&&e.createElement("button",{onClick:()=>m(t._id),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-red-50 text-red-600 rounded-3xl hover:bg-red-100 transition-all duration-200 active:scale-95 text-sm font-medium",title:"Signaler ce commentaire"},e.createElement(yu,{size:14}),e.createElement("span",{className:"hidden sm:inline"},"Signaler")),e.createElement("button",{onClick:()=>n(a===t._id?null:t._id),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-3xl hover:bg-gray-200 transition-all duration-200 active:scale-95 text-sm font-medium"},e.createElement(cq,{size:16}),e.createElement("span",null,"Rpondre")))),e.createElement("p",{className:"text-gray-700 leading-relaxed text-base"},t.message),a===t._id&&e.createElement("div",{className:"mt-4 pl-4 border-l-4 border-indigo-400 bg-indigo-50/50 rounded-r-xl p-4"},e.createElement("div",{className:"flex items-center gap-2 mb-3"},e.createElement(W4,{size:16,className:"text-indigo-600"}),e.createElement("span",{className:"text-sm font-bold text-indigo-700"},"Rponse  ",t.user?.name)),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row"},e.createElement("input",{type:"text",value:s,onChange:x=>o(x.target.value),placeholder:`Rpondre  ${t.user?.name}...`,className:"flex-1 px-4 py-2.5 border-2 border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm font-medium",disabled:c}),e.createElement("button",{onClick:()=>l(t),disabled:!s.trim()||c,className:"px-5 py-2.5 bg-blue-600 text-white rounded-3xl font-semibold hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed text-sm shadow-sm transition-all duration-200 active:scale-95"},c?"Envoi...":"Envoyer"),e.createElement("button",{onClick:()=>{n(null),o("")},className:"px-5 py-2.5 border border-gray-300 bg-white text-gray-700 rounded-3xl hover:bg-gray-50 text-sm font-medium transition-all duration-200 active:scale-95"},"Annuler")))),t.replies&&t.replies.length>0&&e.createElement("div",{className:"bg-gradient-to-br from-gray-50 to-indigo-50/30 border-t-2 border-gray-200"},t.replies.map(x=>e.createElement("div",{key:x._id,className:"p-4 sm:p-5 border-b border-gray-200 last:border-b-0"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement(W4,{size:16,className:"text-indigo-500"}),e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-md ring-2 ring-white"},e.createElement("span",{className:"text-white text-sm font-black"},x.user?.name?.charAt(0)||"U")),e.createElement("div",{className:"flex-1"},e.createElement("span",{className:"font-black text-gray-900 text-sm"},x.user?.name||"Utilisateur"),e.createElement("div",{className:"text-xs text-gray-600 font-medium"},new Date(x.createdAt).toLocaleDateString("fr-FR"))),e.createElement("div",{className:"flex items-center gap-1"},b&&f&&e.createElement("button",{onClick:()=>f(x._id),disabled:g===x._id,className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Supprimer cette rponse"},g===x._id?e.createElement("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-red-600 border-t-transparent"}):e.createElement(is,{size:14})),r&&m&&r._id!==x.user?._id&&e.createElement("button",{onClick:()=>{typeof m=="function"&&m(x._id)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Signaler cette rponse","aria-label":"Signaler cette rponse"},e.createElement(yu,{size:14})))),e.createElement("p",{className:"text-gray-700 text-sm ml-14 leading-relaxed"},x.message)))))}const Kie=(t=[])=>{if(!t.length)return null;const r=Math.floor(Math.random()*t.length);return t[r]||null},Yie=(t=[])=>{const r=Array.isArray(t)?t.filter(Boolean):[];return Kie(r)||null},su=t=>t?.slug||t?._id||"",uO=(t=[],r=new Set)=>{const a=[];return t.forEach(n=>{const s=su(n);!s||r.has(s)||(r.add(s),a.push(n))}),a},V$=(t=[])=>{const r=[...t];for(let a=r.length-1;a>0;a-=1){const n=Math.floor(Math.random()*(a+1));[r[a],r[n]]=[r[n],r[a]]}return r},pO=(t=[],r=6)=>{const a=t.map(n=>{const s=Yie(n?.images);return s?{image:s,product:n}:null}).filter(Boolean);return V$(a).slice(0,r)},Xie=(t,r=6)=>{const a=Array.isArray(t?.images)?t.images.filter(Boolean):[];return V$(a).slice(0,r).map(n=>({image:n,product:t}))},U0=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,V0=t=>Number(t||0).toLocaleString("fr-FR");function Qie(){const{slug:t}=Jo(),r=wa(),a=rs(),[n,s]=u.useState(null),[o,l]=u.useState([]),[c,m]=u.useState(!0),[p,f]=u.useState("");u.useEffect(()=>{if(a)return;const v=t?Dr({slug:t}):"/";r(v,{replace:!0})},[a,r,t]),u.useEffect(()=>{let v=!0;return t?(async()=>{try{m(!0),f(""),l([]);const y=new Set,{data:w}=await oe.get(`/products/public/${t}`);if(!v)return;s(w);const k=su(w);k&&y.add(k);let C=[];if(w?.category)try{const{data:A}=await oe.get("/products/public",{params:{category:w.category,limit:12}}),P=(Array.isArray(A?.items)?A.items:[]).filter(R=>!(!R||w?._id&&R._id&&R._id===w._id||w?.slug&&R.slug&&R.slug===w.slug)),T=P.filter(R=>Array.isArray(R.images)&&R.images.length>0),O=uO(T.length?T:P,y);C=pO(O,6)}catch{}C.length||(C=Xie(w,6)),C.forEach(A=>{const S=su(A?.product);S&&y.add(S)});try{const{data:A}=await oe.get("/products/public",{params:{boosted:!0,limit:8}}),P=(Array.isArray(A?.items)?A.items:[]).filter(D=>Array.isArray(D?.images)&&D.images.length>0),T=uO(P,y),O=T.length?T:P,R=pO(O,3);R.length&&(C=[...C,...R])}catch{}v&&l(C)}catch(y){if(!v)return;s(null),l([]),f(y.response?.data?.message||"Produit indisponible.")}finally{v&&m(!1)}})():(m(!1),f("Produit indisponible.")),()=>{v=!1}},[t]),u.useEffect(()=>{n?._id&&gp(n)},[n?._id,n?.category]);const g=u.useMemo(()=>n?.slug?Dr(n):t?Dr({slug:t}):"/",[n,t]),b=v=>Dr(v),x=u.useMemo(()=>{if(!n)return o;const v=su(n);return o.filter(E=>{const y=su(E?.product);return y&&y!==v})},[o,n]);return e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-indigo-50/30"},e.createElement("div",{className:"mx-auto w-full max-w-2xl px-3 sm:px-4 pb-20 pt-4 sm:pt-6 space-y-5 sm:space-y-6"},e.createElement("button",{type:"button",onClick:()=>r(-1),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-3xl bg-white border border-gray-300 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(Gr,{className:"h-5 w-5"}),"Retour"),c?e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"animate-pulse rounded-3xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("div",{className:"flex gap-5"},e.createElement("div",{className:"h-32 w-32 rounded-2xl bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"flex-1 space-y-4"},e.createElement("div",{className:"h-5 w-3/4 rounded-lg bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"h-6 w-1/2 rounded-lg bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"h-4 w-2/3 rounded-lg bg-gray-200 dark:bg-gray-700"}),e.createElement("div",{className:"h-10 w-40 rounded-xl bg-gray-200 dark:bg-gray-700"})))),e.createElement("div",{className:"animate-pulse rounded-3xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("div",{className:"h-5 w-32 rounded-lg bg-gray-200 dark:bg-gray-700 mb-4"}),e.createElement("div",{className:"grid grid-cols-2 gap-4"},[1,2,3,4].map(v=>e.createElement("div",{key:v,className:"aspect-[4/5] rounded-2xl bg-gray-200 dark:bg-gray-700"}))))):p?e.createElement("div",{className:"rounded-3xl border-2 border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 p-8 text-center shadow-lg"},e.createElement("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ln,{className:"w-8 h-8 text-red-600 dark:text-red-400"})),e.createElement("p",{className:"text-red-700 dark:text-red-400 font-semibold text-base"},p)):n?e.createElement("div",{className:"space-y-6"},e.createElement("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-white via-indigo-50/40 to-purple-50/40 dark:from-gray-800 dark:via-gray-800 dark:to-indigo-950/20 border-2 border-indigo-300/60 dark:border-indigo-800/50 shadow-2xl"},e.createElement("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),e.createElement("div",{className:"p-6 sm:p-8"},e.createElement("div",{className:"flex gap-5 sm:gap-6"},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("div",{className:"h-32 w-32 sm:h-40 sm:w-40 overflow-hidden rounded-3xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 shadow-2xl ring-4 ring-white dark:ring-gray-700"},e.createElement("img",{src:n.images?.[0]||"https://via.placeholder.com/128x128",alt:n.title,className:"h-full w-full object-cover"})),n.discount>0&&e.createElement("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-red-500 via-pink-500 to-red-600 text-white text-xs font-black px-3 py-1.5 rounded-full shadow-2xl ring-2 ring-white"},"-",n.discount,"%")),e.createElement("div",{className:"flex-1 min-w-0 space-y-3 sm:space-y-4"},e.createElement("div",null,e.createElement("h1",{className:"text-lg sm:text-xl font-black text-gray-900 dark:text-white line-clamp-2 leading-tight mb-3"},n.title),e.createElement("div",{className:"flex items-baseline gap-3"},e.createElement("p",{className:"text-2xl sm:text-3xl font-black text-indigo-600 dark:text-indigo-400"},U0(n.price)),n.priceBeforeDiscount&&n.priceBeforeDiscount>n.price&&e.createElement("p",{className:"text-base sm:text-lg text-gray-500 dark:text-gray-400 line-through font-bold"},U0(n.priceBeforeDiscount)))),n?.user?.shopName&&e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},e.createElement(Er,{className:"w-3.5 h-3.5 text-white"})),e.createElement("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 truncate"},n.user.shopName)),(n.ratingAverage||n.commentCount)&&e.createElement("div",{className:"flex items-center gap-3 text-xs"},n.ratingAverage>0&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(zr,{className:"h-3.5 w-3.5 text-amber-500 fill-amber-500"}),e.createElement("span",{className:"font-bold text-gray-700 dark:text-gray-300"},Number(n.ratingAverage).toFixed(1)),n.ratingCount>0&&e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"(",V0(n.ratingCount),")")),n.commentCount>0&&e.createElement("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400"},e.createElement(Hr,{className:"h-3.5 w-3.5"}),e.createElement("span",null,V0(n.commentCount)))),e.createElement(ye,{to:g,className:"inline-flex items-center justify-center gap-2 w-full rounded-3xl bg-blue-600 px-6 py-3.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 hover:shadow-md transition-all duration-200 active:scale-95"},e.createElement(Jn,{className:"w-5 h-5"}),"Voir le produit",e.createElement(Ar,{className:"w-5 h-5"})))))),e.createElement("section",{className:"rounded-3xl border-2 border-gray-200/60 dark:border-gray-700/50 bg-white dark:bg-gray-800 shadow-2xl overflow-hidden"},e.createElement("div",{className:"bg-gradient-to-r from-amber-50 via-orange-50 to-yellow-50 dark:from-amber-900/20 dark:to-orange-900/20 px-6 py-5 border-b-2 border-amber-200 dark:border-gray-700"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-400 via-orange-500 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg ring-2 ring-white"},e.createElement(ba,{className:"h-6 w-6 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-black text-gray-900 dark:text-white"},"Inspiration"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Produits similaires pour vous")))),e.createElement("div",{className:"p-5 sm:p-6"},x.length?e.createElement("div",{className:"grid grid-cols-2 gap-3 sm:gap-4"},x.map((v,E)=>{const y=Number(v.product?.ratingAverage||0).toFixed(1),w=V0(v.product?.ratingCount||0),k=V0(v.product?.commentCount||0),C=v.product?.discount>0&&v.product?.priceBeforeDiscount>v.product?.price;return e.createElement(ye,{key:`${v.product?._id||"product"}-${v.image}-${E}`,to:b(v.product),className:"group relative overflow-hidden rounded-3xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-[1.03] active:scale-95"},e.createElement("div",{className:"relative aspect-[4/5] w-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 overflow-hidden"},e.createElement("img",{src:v.image,alt:v.product?.title||"Produit",className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"}),C&&e.createElement("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-red-500 via-pink-500 to-red-600 text-white text-[11px] font-black px-2.5 py-1.5 rounded-full shadow-2xl ring-2 ring-white"},"-",v.product.discount,"%"),e.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})),e.createElement("div",{className:"p-3 sm:p-4 space-y-2.5"},e.createElement("p",{className:"text-xs sm:text-sm font-black text-gray-900 dark:text-white line-clamp-2 leading-tight min-h-[2.5rem] group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"},v.product?.title),e.createElement("div",{className:"flex items-baseline gap-2"},e.createElement("p",{className:"text-base sm:text-lg font-black text-indigo-600 dark:text-indigo-400"},U0(v.product?.price)),C&&e.createElement("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 line-through font-bold"},U0(v.product.priceBeforeDiscount))),e.createElement("div",{className:"flex items-center gap-2.5 text-[10px] sm:text-[11px]"},y>0&&e.createElement("span",{className:"inline-flex items-center gap-1 bg-amber-50 px-2 py-1 rounded-lg"},e.createElement(zr,{className:"h-3.5 w-3.5 text-amber-500 fill-amber-500"}),e.createElement("span",{className:"font-black text-gray-700 dark:text-gray-300"},y),w>0&&e.createElement("span",{className:"text-gray-500"},"(",w,")")),k>0&&e.createElement("span",{className:"inline-flex items-center gap-1 bg-blue-50 px-2 py-1 rounded-lg"},e.createElement(Hr,{className:"h-3.5 w-3.5 text-blue-600"}),e.createElement("span",{className:"font-semibold text-gray-700"},k)))))})):e.createElement("div",{className:"rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 p-12 text-center"},e.createElement("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(ba,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})),e.createElement("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1"},"Aucune inspiration pour le moment"),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-500"},"D'autres produits similaires apparatront ici"))))):null))}function Jie(){const{slug:t}=Jo(),r=wa(),{user:a}=u.useContext(Sr),{showToast:n}=ms(),[s,o]=u.useState(!0),[l,c]=u.useState(!1),[m,p]=u.useState(null),[f,g]=u.useState({title:"",description:"",category:"",discount:0,condition:"used",images:[]}),[b,x]=u.useState(""),v=u.useMemo(()=>{if(!m)return{current:"",before:""};const w=Number(m.price).toLocaleString(),k=m.priceBeforeDiscount?Number(m.priceBeforeDiscount).toLocaleString():m.discount>0?Number((m.price/(1-m.discount/100)).toFixed(0)).toLocaleString():"";return{current:w,before:k}},[m]);u.useEffect(()=>{let w=!0;return(async()=>{try{o(!0);const{data:C}=await oe.get(`/products/${t}`);if(!w)return;const A=C.user?._id||C.user;if(a?.role!=="admin"&&A&&String(A)!==a?.id){x("Vous n'tes pas autoris  modifier cette annonce.");return}p(C);const S=Ug(C.category);g({title:C.title||"",description:C.description||"",category:S?.value||C.category||"",discount:C.discount??0,condition:C.condition||"used",images:C.images||[]}),x("")}catch(C){if(!w)return;const A=C.response?.status===403?"Accs refus. Cette annonce ne vous appartient pas.":C.response?.status===404?"Annonce introuvable.":C.response?.data?.message||C.message||"Erreur lors du chargement.";x(A)}finally{w&&o(!1)}})(),()=>{w=!1}},[id]);const E=(w,k)=>{g(C=>({...C,[w]:k}))},y=async w=>{w.preventDefault(),c(!0);try{const k={title:f.title,description:f.description,category:f.category,discount:f.discount,condition:f.condition};await oe.put(`/products/${t}`,k),n("Annonce mise  jour avec succs !",{variant:"success"}),r("/my")}catch(k){const C=k.response?.data?.message||k.message||"Erreur lors de la mise  jour.";n(C,{variant:"error"})}finally{c(!1)}};return s?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse"},e.createElement(fd,{className:"w-8 h-8 text-white"})),e.createElement("p",{className:"text-gray-500"},"Chargement de l'annonce"))):b?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"max-w-md mx-auto text-center"},e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Yt,{className:"w-8 h-8 text-white"})),e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-2"},"Erreur"),e.createElement("p",{className:"text-gray-600 mb-6"},b),e.createElement("button",{onClick:()=>r(-1),className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour"))):e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-2xl mx-auto px-4 py-6"},e.createElement("div",{className:"flex items-center justify-between mb-8"},e.createElement("button",{onClick:()=>r(-1),className:"inline-flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors"},e.createElement(Gr,{className:"w-5 h-5"}),e.createElement("span",{className:"font-medium"},"Retour"))),e.createElement("div",{className:"text-center mb-8"},e.createElement("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(fd,{className:"w-8 h-8 text-white"})),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Modifier l'annonce"),e.createElement("p",{className:"text-gray-500"},"Mettez  jour les informations de votre produit")),e.createElement("form",{onSubmit:y,className:"space-y-6 bg-white rounded-2xl p-6 shadow-sm border border-gray-100"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-indigo-500 to-purple-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Informations du produit")),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Titre de l'annonce *")),e.createElement("input",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",placeholder:"Ex: iPhone 13 Pro Max 256GB - tat neuf",value:f.title,onChange:w=>E("title",w.target.value),required:!0})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Description dtaille *")),e.createElement("textarea",{rows:4,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400 resize-none",placeholder:"Dcrivez votre produit en dtail : caractristiques, tat, accessoires inclus...",value:f.description,onChange:w=>E("description",w.target.value),required:!0})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wa,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Catgorie *")),e.createElement("select",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",value:f.category,onChange:w=>E("category",w.target.value),required:!0},e.createElement("option",{value:""},"Slectionnez une catgorie"),to.map((w,k)=>e.createElement("optgroup",{key:k,label:w.label},w.options.map(C=>e.createElement("option",{key:C.value,value:C.value},C.label)))))),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"block text-sm font-medium text-gray-700"},"tat du produit"),e.createElement("div",{className:"flex space-x-4"},e.createElement("label",{className:"flex items-center space-x-2 cursor-pointer"},e.createElement("div",{className:"relative"},e.createElement("input",{type:"radio",name:"condition",value:"new",checked:f.condition==="new",onChange:w=>E("condition",w.target.value),className:"sr-only"}),e.createElement("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center transition-all ${f.condition==="new"?"border-indigo-500 bg-indigo-500":"border-gray-300"}`},f.condition==="new"&&e.createElement("div",{className:"w-2 h-2 bg-white rounded-full"}))),e.createElement("span",{className:"text-sm text-gray-700"},"Neuf")),e.createElement("label",{className:"flex items-center space-x-2 cursor-pointer"},e.createElement("div",{className:"relative"},e.createElement("input",{type:"radio",name:"condition",value:"used",checked:f.condition==="used",onChange:w=>E("condition",w.target.value),className:"sr-only"}),e.createElement("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center transition-all ${f.condition==="used"?"border-indigo-500 bg-indigo-500":"border-gray-300"}`},f.condition==="used"&&e.createElement("div",{className:"w-2 h-2 bg-white rounded-full"}))),e.createElement("span",{className:"text-sm text-gray-700"},"Occasion")))))),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-green-500 to-emerald-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Prix et Promotion")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",{className:"rounded-2xl bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-100 p-4"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center space-x-2"},e.createElement(Ea,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",{className:"text-sm font-medium text-indigo-900"},"Prix actuel")),e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-2xl font-bold text-indigo-600"},v.current," FCFA"),v.before&&e.createElement("p",{className:"text-sm text-gray-500 line-through"},v.before," FCFA")),e.createElement("p",{className:"text-xs text-indigo-700"},"Le prix de vente ne peut pas tre modifi aprs cration"))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wa,{className:"w-4 h-4 text-green-500"}),e.createElement("span",null,"Remise promotionnelle (%)")),e.createElement("input",{type:"number",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",min:"0",max:"99",step:"1",value:f.discount,onChange:w=>E("discount",Number(w.target.value))}),e.createElement("p",{className:"text-xs text-gray-500"},"Appliquez une remise pour mettre en avant votre annonce"),f.discount>0&&e.createElement("div",{className:"text-xs text-green-600 font-medium"},"Nouveau prix: ",Math.round(m.price*(1-f.discount/100)).toLocaleString()," FCFA")))),f.images?.length>0&&e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center space-x-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-gradient-to-b from-blue-500 to-cyan-500 rounded-full"}),e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Images du produit")),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(El,{className:"w-4 h-4 text-blue-500"}),e.createElement("span",null,"Images actuelles (",f.images.length,")")),e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},f.images.map((w,k)=>e.createElement("div",{key:k,className:"relative group"},e.createElement("img",{src:w,alt:`${f.title} ${k+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),e.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all rounded-lg flex items-center justify-center"},e.createElement("span",{className:"text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity"},"Vue ",k+1))))),e.createElement("p",{className:"text-xs text-gray-500"},"Les images ne peuvent pas tre modifies aprs cration"))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-100"},e.createElement("button",{type:"button",onClick:()=>r("/my"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors"},"Annuler"),e.createElement("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2"},l?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,"Enregistrement...")):e.createElement(e.Fragment,null,e.createElement(vc,{className:"w-5 h-5"}),e.createElement("span",null,"Enregistrer les modifications")))))))}const _w=({className:t})=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t},e.createElement("path",{d:"M4 7h16"}),e.createElement("path",{d:"M10 11v6"}),e.createElement("path",{d:"M14 11v6"}),e.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"}),e.createElement("path",{d:"M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"})),Zie=({className:t})=>e.createElement("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),fO=({className:t})=>e.createElement("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})),qi=t=>Number(t||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});function ece(){const t=wa(),{cart:r,loading:a,error:n,updateItem:s,removeItem:o,clearCart:l}=u.useContext($l),{user:c}=u.useContext(Sr),[m,p]=u.useState({}),[f,g]=u.useState(!1),[b,x]=u.useState(!1),[v,E]=u.useState({}),y=cs(),w=r.items||[],k=r.totals||{quantity:0,subtotal:0},C=u.useMemo(()=>(c?.city||"").trim(),[c?.city]),A=u.useMemo(()=>{const H=z=>z?.toString().trim().toLowerCase(),V=H(C),q=new Map,Y=new Set;return w.forEach(({product:z})=>{const L=(z?.user?.city||z?.city||"").toString().trim();if(!L)return;const Q=H(L);q.has(Q)||q.set(Q,L),V&&Q!==V&&Y.add(Q)}),{buyer:V,buyerDisplay:C?.toString().trim()||"",uniqueCities:Array.from(q.values()),mismatchedCities:Array.from(Y).map(z=>q.get(z)||z)}},[w,C]),S=async(H,V)=>{const q=Math.max(0,Number.isNaN(Number(V))?0:Number(V));p(Y=>({...Y,[H]:!0}));try{await s(H,q)}catch(Y){console.error(Y)}finally{p(Y=>({...Y,[H]:!1}))}},P=async H=>{p(V=>({...V,[H]:!0}));try{await o(H)}catch(V){console.error(V)}finally{p(V=>({...V,[H]:!1}))}},T=async()=>{p({all:!0});try{await l(),g(!1)}catch(H){console.error(H)}finally{p({})}},O=()=>{if(A.buyer&&A.mismatchedCities.length>0){x(!0);return}t("/orders/checkout")},R=()=>{x(!1),t("/orders/checkout")},D=async()=>{p({all:!0});try{await l()}catch(H){console.error(H)}finally{p({}),x(!1),t("/products")}},$=a||m.all,j=w.reduce((H,V)=>{const q=V.product.discount||0,Y=V.product.priceBeforeDiscount||V.product.price,z=q>0?(Y-V.product.price)*V.quantity:0;return H+z},0);u.useEffect(()=>{const H={};w.forEach(({product:V})=>{H[V._id]=V.whatsappClicks??0}),E(H)},[w]);const K=async(H,V)=>{if(!V)return;const q=H._id;try{await oe.post(`/products/public/${q}/whatsapp-click`),E(Y=>({...Y,[q]:(Y?.[q]??H.whatsappClicks??0)+1}))}catch(Y){console.error("Failed to record WhatsApp click:",Y)}finally{typeof window<"u"&&window.open(V,"_blank","noopener,noreferrer")}};return e.createElement("main",{className:"min-h-screen bg-[#F2F2F7] dark:bg-black"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 space-y-6 sm:space-y-8"},e.createElement("header",{className:"apple-card rounded-[16px] p-6 sm:p-8"},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("h1",{className:"text-2xl sm:text-4xl font-black text-gray-900"},"Mon Panier"),e.createElement("p",{className:"text-gray-600 font-medium"},w.length>0?`${w.length} article${w.length>1?"s":""} dans votre panier`:"Votre panier est vide")),w.length>0&&e.createElement("div",{className:"flex items-center gap-3"},e.createElement("button",{onClick:()=>g(!0),disabled:$,className:"inline-flex items-center gap-2 px-5 py-2.5 text-sm font-semibold text-[#FF3B30] bg-white border border-[#FF3B30]/30 rounded-full hover:bg-[#FF3B30]/8 tap-feedback transition-all shadow-[0_1px_3px_rgba(0,0,0,0.04)] disabled:opacity-60"},e.createElement(_w,{className:"w-4 h-4"}),"Vider le panier")))),f&&e.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},e.createElement("div",{className:"bg-white rounded-3xl p-6 sm:p-8 max-w-md w-full space-y-6 shadow-2xl border-2 border-gray-100"},e.createElement("div",{className:"w-16 h-16 bg-red-100 rounded-3xl flex items-center justify-center mx-auto"},e.createElement(_w,{className:"w-8 h-8 text-red-600"})),e.createElement("div",{className:"text-center space-y-2"},e.createElement("h3",{className:"text-xl font-black text-gray-900"},"Vider le panier"),e.createElement("p",{className:"text-gray-600 text-sm font-medium"},"tes-vous sr de vouloir supprimer tous les articles de votre panier ? Cette action est irrversible.")),e.createElement("div",{className:"flex gap-3 pt-2"},e.createElement("button",{onClick:()=>g(!1),className:"flex-1 px-5 py-3 text-sm font-semibold text-[#8E8E93] bg-[rgba(120,120,128,0.12)] rounded-full hover:bg-[rgba(120,120,128,0.18)] tap-feedback transition-all"},"Annuler"),e.createElement("button",{onClick:T,disabled:m.all,className:"flex-1 px-5 py-3 text-sm font-semibold text-white bg-red-600 rounded-3xl hover:bg-red-700 transition-all duration-200 active:scale-95 shadow-sm disabled:opacity-60"},m.all?"Suppression...":"Vider le panier")))),b&&e.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},e.createElement("div",{className:"bg-white rounded-3xl p-6 sm:p-8 max-w-lg w-full space-y-5 shadow-2xl border-2 border-amber-200"},e.createElement("div",{className:"w-16 h-16 bg-amber-100 rounded-3xl flex items-center justify-center mx-auto"},e.createElement("span",{className:"text-3xl"},"")),e.createElement("div",{className:"text-center space-y-2"},e.createElement("h3",{className:"text-xl font-black text-gray-900"},"Attention  la distance"),e.createElement("p",{className:"text-sm text-gray-700 font-medium"},"Certains vendeurs sont dans une autre ville que la vtre. Votre commande peut subir des retards lis  la distance ou  la logistique. Les articles peuvent aussi tre endommags pendant le transport et le vendeur ne pourra pas en tre tenu responsable."),A.mismatchedCities.length>0&&e.createElement("p",{className:"text-xs text-gray-600"},"Vendeurs :"," ",e.createElement("span",{className:"font-semibold text-gray-900"},A.mismatchedCities.join(", "))),A.buyerDisplay&&e.createElement("p",{className:"text-xs text-gray-600"},"Votre ville :"," ",e.createElement("span",{className:"font-semibold text-gray-900"},A.buyerDisplay))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-3 pt-2"},e.createElement("button",{type:"button",onClick:D,disabled:m.all,className:"flex-1 px-5 py-3 text-sm font-semibold text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 transition-all disabled:opacity-60"},m.all?"Annulation":"Annuler"),e.createElement("button",{type:"button",onClick:R,disabled:m.all,className:"flex-1 px-5 py-3 text-sm font-semibold text-white bg-amber-600 rounded-3xl hover:bg-amber-700 transition-all duration-200 active:scale-95 shadow-sm disabled:opacity-60"},"Continuer quand mme")))),n&&e.createElement("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-4 sm:p-6 shadow-sm"},e.createElement("p",{className:"text-red-700 text-sm font-semibold"},n)),a&&w.length===0?e.createElement("div",{className:"flex items-center justify-center py-16"},e.createElement("div",{className:"flex items-center gap-3 text-gray-600"},e.createElement("div",{className:"w-6 h-6 border-2 border-[#007AFF] border-t-transparent rounded-full animate-spin"}),e.createElement("span",{className:"font-medium"},"Chargement du panier..."))):w.length===0?e.createElement("div",{className:"text-center py-16 sm:py-20"},e.createElement("div",{className:"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg"},e.createElement(fO,{className:"w-16 h-16 text-gray-400"})),e.createElement("h2",{className:"text-2xl sm:text-3xl font-black text-gray-900 mb-3"},"Panier vide"),e.createElement("p",{className:"text-gray-600 mb-8 max-w-sm mx-auto font-medium"},"Votre panier est vide. Dcouvrez nos produits et ajoutez vos articles prfrs."),e.createElement(ye,{to:"/products",className:"inline-flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3.5 min-h-[48px] rounded-3xl hover:bg-blue-700 transition-all duration-200 tap-feedback font-semibold shadow-sm"},e.createElement(fO,{className:"w-5 h-5"}),"Dcouvrir les produits")):e.createElement("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr_420px] gap-6 sm:gap-8"},e.createElement("div",{className:"space-y-4 sm:space-y-5"},w.map(({product:H,quantity:V,lineTotal:q})=>{const Y=H.user?.phone||H?.contactPhone,z=N2(H,Y),L=H.discount||0,Q=H.priceBeforeDiscount||H.price,B=v[H._id]??H.whatsappClicks??0;return e.createElement("div",{key:H._id,className:"group bg-white rounded-xl sm:rounded-3xl border-2 border-gray-200 p-2 sm:p-5 lg:p-6 hover:shadow-xl transition-all duration-300 hover:border-blue-200"},e.createElement("div",{className:"flex flex-col md:flex-row gap-2 sm:gap-5 lg:gap-6"},e.createElement("div",{className:"w-20 sm:w-full md:w-36 lg:w-44 flex-shrink-0"},e.createElement(ye,{to:Dr(H),...y,className:"block relative overflow-hidden rounded-lg sm:rounded-2xl aspect-square bg-gradient-to-br from-gray-100 to-gray-200 group-hover:shadow-lg transition-all duration-300"},e.createElement("img",{src:H.images?.[0]||"https://via.placeholder.com/300",alt:H.title,className:"absolute inset-0 h-full w-full object-cover group-hover:scale-110 transition-transform duration-500",loading:"lazy"}),L>0&&e.createElement("div",{className:"absolute top-1 left-1 sm:top-3 sm:left-3 bg-gradient-to-r from-red-500 via-pink-500 to-red-600 text-white text-[9px] sm:text-xs font-black px-1.5 py-0.5 sm:px-3 sm:py-1.5 rounded-full shadow-lg ring-1 sm:ring-2 ring-white"},"-",L,"%"))),e.createElement("div",{className:"flex-1 space-y-1.5 sm:space-y-4 min-w-0"},e.createElement("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-2 sm:gap-4"},e.createElement("div",{className:"space-y-1.5 sm:space-y-3 flex-1 min-w-0"},e.createElement(ye,{to:Dr(H),...y,className:"text-sm sm:text-xl lg:text-2xl font-black text-gray-900 hover:text-blue-600 transition-colors line-clamp-2"},H.title),e.createElement("p",{className:"text-[10px] sm:text-sm text-gray-600 font-medium"},"Catgorie : ",e.createElement("span",{className:"text-gray-900"},H.category)),e.createElement("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-wrap"},e.createElement("span",{className:"text-sm sm:text-2xl lg:text-3xl font-black text-blue-600"},qi(H.price)," FCFA"),L>0&&e.createElement(e.Fragment,null,e.createElement("span",{className:"text-xs sm:text-lg text-gray-400 line-through font-bold"},qi(Q)," FCFA"),e.createElement("span",{className:"text-[9px] sm:text-xs bg-gradient-to-r from-green-500 to-emerald-600 text-white px-1.5 py-0.5 sm:px-3 sm:py-1.5 rounded-full font-black shadow-sm"},"co: ",qi((Q-H.price)*V)," FCFA")))),e.createElement("div",{className:"flex flex-col items-end gap-1.5 sm:gap-4"},e.createElement("div",{className:"flex items-center gap-1 sm:gap-2 bg-gray-50 rounded-xl sm:rounded-3xl p-0.5 sm:p-1 border border-gray-200"},e.createElement("button",{type:"button",className:"min-w-[44px] min-h-[44px] w-10 h-10 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-gray-700 hover:bg-white disabled:opacity-40 transition-all duration-200 tap-feedback shadow-sm",onClick:()=>S(H._id,V-1),disabled:$||m[H._id]||V<=1},e.createElement("span",{className:"text-base sm:text-xl font-semibold"},"")),e.createElement("div",{className:"w-10 sm:w-14 text-center"},e.createElement("input",{type:"number",min:"1",className:"w-full bg-transparent border-0 text-center h-7 sm:h-10 font-black text-gray-900 text-xs sm:text-base focus:outline-none",value:V,onChange:ae=>S(H._id,ae.target.value),disabled:$||m[H._id]})),e.createElement("button",{type:"button",className:"min-w-[44px] min-h-[44px] w-10 h-10 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-gray-700 hover:bg-white disabled:opacity-40 transition-all duration-200 tap-feedback shadow-sm",onClick:()=>S(H._id,V+1),disabled:$||m[H._id]},e.createElement("span",{className:"text-base sm:text-xl font-semibold"},"+"))),e.createElement("div",{className:"text-right bg-blue-50 px-2 py-1 sm:px-4 sm:py-2 rounded-lg sm:rounded-2xl border border-blue-100"},e.createElement("span",{className:"text-[9px] sm:text-xs text-gray-600 font-medium block mb-0.5 sm:mb-1"},"Sous-total"),e.createElement("div",{className:"text-sm sm:text-xl lg:text-2xl font-black text-blue-600"},qi(q)," FCFA")))),e.createElement("div",{className:"flex items-center gap-2 sm:gap-3 pt-2 sm:pt-4 border-t-2 border-gray-100 w-full"},z&&e.createElement("button",{type:"button",onClick:()=>K(H,z),className:"flex-1 min-w-0 inline-flex items-center gap-1.5 sm:gap-2 bg-green-50 border border-green-200 text-green-700 px-2.5 py-2 sm:px-5 sm:py-3 rounded-xl sm:rounded-3xl hover:bg-green-100 transition-all duration-200 active:scale-95 font-semibold text-xs sm:text-sm shadow-sm overflow-hidden"},e.createElement(Zie,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.createElement("div",{className:"flex flex-col items-start leading-tight text-left min-w-0 flex-1 overflow-hidden"},e.createElement("span",{className:"text-xs sm:text-sm font-bold truncate w-full"},"Commander"),Y&&e.createElement("span",{className:"text-[10px] sm:text-xs text-green-600 font-medium truncate w-full"},Y),e.createElement("span",{className:"text-[10px] text-green-500 whitespace-nowrap"},B," clic",B>1?"s":""))),e.createElement("button",{type:"button",onClick:()=>P(H._id),disabled:$||m[H._id],className:"flex-shrink-0 inline-flex items-center justify-center gap-1.5 sm:gap-2 text-red-600 bg-white border border-red-300 px-3 py-2 sm:px-5 sm:py-3 rounded-xl sm:rounded-3xl hover:bg-red-50 transition-all duration-200 active:scale-95 disabled:opacity-60 font-semibold text-xs sm:text-sm shadow-sm"},e.createElement(_w,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"hidden sm:inline"},"Supprimer"),e.createElement("span",{className:"sm:hidden"},"Suppr."))))))})),e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-6 sm:p-8 sticky top-6 shadow-xl"},e.createElement("h2",{className:"text-2xl font-black text-gray-900 mb-6"},"Rsum de la commande"),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 rounded-2xl"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Articles (",k.quantity,")"),e.createElement("span",{className:"font-black text-gray-900 text-lg"},qi(k.subtotal)," FCFA")),j>0&&e.createElement("div",{className:"flex justify-between items-center py-3 px-4 bg-green-50 rounded-2xl border border-green-200"},e.createElement("span",{className:"text-green-700 font-semibold"},"conomies"),e.createElement("span",{className:"font-black text-green-600 text-lg"},"-",qi(j)," FCFA")),e.createElement("div",{className:"flex justify-between items-center py-3 px-4 bg-blue-50 rounded-2xl border border-blue-200"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Livraison estime"),e.createElement("span",{className:"font-black text-blue-600"},"Gratuite")),e.createElement("div",{className:"border-t-2 border-gray-200 pt-5"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("span",{className:"text-xl font-black text-gray-900"},"Total"),e.createElement("span",{className:"text-3xl font-black text-blue-600"},qi(k.subtotal)," FCFA"))),e.createElement("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-4"},e.createElement("p",{className:"text-xs text-blue-800 text-center font-medium leading-relaxed"}," Les paiements sont scuriss et grs aprs validation des annonces. Contactez directement les vendeurs pour finaliser vos achats.")),e.createElement("div",{className:"space-y-3 pt-2"},e.createElement("button",{type:"button",onClick:O,className:"apple-btn-primary block w-full text-center py-4 min-h-[52px]"},"Continuer mes achats")))),e.createElement("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-3xl p-6 text-center border-2 border-gray-200"},e.createElement("h3",{className:"font-black text-gray-900 mb-4"},"Paiement scuris"),e.createElement("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 text-gray-600"},e.createElement("div",{className:"text-xs font-semibold"}," Paiement scuris"),e.createElement("div",{className:"text-xs font-semibold"}," Livraison garantie"),e.createElement("div",{className:"text-xs font-semibold"}," Support 24/7")))))))}const tce=[{value:"7",label:"7j"},{value:"30",label:"30j"},{value:"90",label:"90j"},{value:"365",label:"1an"},{value:"all",label:"Tout"}],rce={name:"",email:"",phone:"",password:"",confirmPassword:"",accountType:"person",shopName:"",shopAddress:"",shopDescription:"",address:"",country:"Rpublique du Congo",city:"",gender:""},ace=(t={})=>({pending:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0,...t},confirmed:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0,...t},delivering:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0,...t},delivered:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0,...t},cancelled:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0,...t}}),nce=()=>({pending:{count:0,totalAmount:0},confirmed:{count:0,totalAmount:0},delivering:{count:0,totalAmount:0},delivered:{count:0,totalAmount:0},cancelled:{count:0,totalAmount:0}}),Pw=()=>({listings:{total:0,approved:0,pending:0,rejected:0,disabled:0},engagement:{favoritesReceived:0,commentsReceived:0,favoritesSaved:0},performance:{views:0,clicks:0,conversion:0},orders:{purchases:{totalCount:0,totalAmount:0,paidAmount:0,remainingAmount:0,totalItems:0,byStatus:ace()},sales:{totalCount:0,totalAmount:0,byStatus:nce()}}}),Ui={pending:"En attente",confirmed:"Commande confirme",delivering:"En cours de livraison",delivered:"Commande termine",cancelled:"Commande annule"},Tw={pending:"border-gray-200 bg-gray-50 text-gray-700",confirmed:"border-yellow-200 bg-yellow-50 text-yellow-800",delivering:"border-blue-200 bg-blue-50 text-blue-800",delivered:"border-green-200 bg-green-50 text-green-800",cancelled:"border-red-200 bg-red-50 text-red-800"},gO=[{id:"pending",label:"Commande en attente",description:"Votre commande est enregistre et en attente de validation.",icon:Xt},{id:"confirmed",label:"Commande confirme",description:"Votre commande a t valide et sera prpare pour la livraison.",icon:Ft},{id:"delivering",label:"En cours de livraison",description:"Le livreur est en route avec votre colis.",icon:Kr},{id:"delivered",label:"Commande termine",description:"La commande est livre et archive par nos quipes.",icon:ar}],sce=({status:t})=>{const r=gO.findIndex(n=>n.id===t),a=r>=0?r:0;return e.createElement("div",{className:"mt-4 border border-gray-100 rounded-2xl p-3 bg-gray-50"},e.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-3"},"Suivi de lavancement"),e.createElement("div",{className:"space-y-4"},gO.map((n,s)=>{const o=n.icon,l=a>=s,c=a===s;return e.createElement("div",{key:n.id,className:"flex items-start gap-3"},e.createElement("div",{className:`mt-0.5 w-9 h-9 rounded-full border-2 flex items-center justify-center ${l?"border-indigo-600 text-indigo-600 bg-white":"border-gray-200 text-gray-400 bg-white"}`},e.createElement(o,{size:16})),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:`text-sm font-semibold ${l?"text-gray-900":"text-gray-500"}`},n.label,c&&e.createElement("span",{className:"ml-2 text-[11px] px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700"},n.id==="pending"?"En attente":n.id==="delivered"?"Termine":"En cours"),!c&&l&&e.createElement("span",{className:"ml-2 text-[11px] px-2 py-0.5 rounded-full bg-green-100 text-green-700"},"Termine")),e.createElement("p",{className:"text-xs text-gray-500"},n.description)))})))},oce=new Intl.NumberFormat("fr-FR"),Hn=t=>{const r=Number(t);return!Number.isFinite(r)||r<0?"0":oce.format(r)},Ow=t=>`${Hn(t)} FCFA`,V1=[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}],lf=()=>V1.map(t=>({day:t.key,label:t.label,open:"",close:"",closed:!0})),lce=t=>{if(!Array.isArray(t)||!t.length)return lf();const r=new Map;return t.forEach(a=>{if(!a||typeof a!="object")return;const n=typeof a.day=="string"?a.day:"",s=V1.find(l=>l.key===n);if(!s)return;const o=typeof a.closed=="boolean"?a.closed:a.closed==="true"||a.closed==="1"||a.closed===1;r.set(n,{day:n,label:s.label,open:typeof a.open=="string"?a.open:"",close:typeof a.close=="string"?a.close:"",closed:o})}),V1.map(a=>{const n=r.get(a.key);return n?{...n,label:a.label}:{day:a.key,label:a.label,open:"",close:"",closed:!0}})};function ice(){const{user:t,updateUser:r}=u.useContext(Sr),{showToast:a}=ms(),n=wa(),[s,o]=u.useState(rce),[l,c]=u.useState(!1),[m,p]=u.useState(""),[f,g]=u.useState(""),[b,x]=u.useState(null),[v,E]=u.useState(""),[y,w]=u.useState(null),[k,C]=u.useState(""),[A,S]=u.useState(()=>lf()),[P,T]=u.useState(()=>Pw()),[O,R]=u.useState(!1),[D,$]=u.useState(""),[j,K]=u.useState("all"),[H,V]=u.useState(!1),[q,Y]=u.useState(""),[z,L]=u.useState(!1),[Q,B]=u.useState(!1),[ae,te]=u.useState(""),[ge,ue]=u.useState(""),[Ee,fe]=u.useState("profile"),[re,U]=u.useState([]),[W,me]=u.useState(!1),[ne,ee]=u.useState(""),[ve,be]=u.useState(!1),[J,Ge]=u.useState(!1),[je,tt]=u.useState(""),[At,He]=u.useState("all"),[Tt,Re]=u.useState("date_desc"),[et,gt]=u.useState("list"),[Ze,xt]=u.useState(null),[Dt,nt]=u.useState(""),[Me,Qe]=u.useState(""),[wt,lt]=u.useState(""),[we,vt]=u.useState(""),[pt,Le]=u.useState(!1),pe=t?.accountType==="shop"?Da(t):null,Pe=rs(768),ft=u.useMemo(()=>{const de=[{id:"profile",label:"Profil",icon:Ia},{id:"stats",label:"Statistiques",icon:mn},{id:"performance",label:"Performance",icon:Pr},{id:"orders",label:"Commandes",icon:ea}];return t?.accountType==="shop"&&de.push({id:"shop",label:"Boutique",icon:Er}),de.push({id:"notifications",label:"Notifications",icon:Kn},{id:"security",label:"Scurit",icon:cn}),de},[t?.accountType]),ht=u.useMemo(()=>{let de=0,De=4;return s.name?.trim()&&de++,s.email?.trim()&&de++,s.phone?.trim()&&de++,t?.accountType==="shop"?(De=5,s.shopName?.trim()&&de++):de++,De>0?Math.round(de/De*100):0},[s.name,s.email,s.phone,s.shopName,t?.accountType]),Lt=[{label:"Annonces",value:P.listings?.total||0},{label:"Favoris reus",value:P.engagement?.favoritesReceived||0},{label:"Vues",value:P.performance?.views||0},{label:"WhatsApp",value:P.performance?.clicks||0}];u.useEffect(()=>()=>{v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),k&&k.startsWith("blob:")&&URL.revokeObjectURL(k)},[v,k]),u.useEffect(()=>{if(!t){S(lf());return}o(de=>({...de,name:t.name||"",email:t.email||"",phone:t.phone||"",accountType:t.accountType||"person",shopName:t.shopName||"",shopAddress:t.shopAddress||"",shopDescription:t.shopDescription||"",address:t.address||"",country:t.country||"Rpublique du Congo",city:t.city||"",gender:t.gender||""})),E(t.shopLogo||""),C(t.shopBanner||""),S(lce(t.shopHours))},[t]),u.useEffect(()=>{if(!t){T(Pw()),$(""),R(!1),U([]),be(!1),ee("");return}let de=!0;return(async()=>{R(!0),$("");try{const{data:F}=await oe.get("/users/profile/stats");if(!de)return;const ie=Pw(),he=F?.orders?.purchases||{},ke=F?.orders?.sales||{};T({listings:{...ie.listings,...F?.listings||{}},engagement:{...ie.engagement,...F?.engagement||{}},performance:{...ie.performance,...F?.performance||{}},orders:{purchases:{...ie.orders.purchases,...he,byStatus:{...ie.orders.purchases.byStatus,...he.byStatus||{}}},sales:{...ie.orders.sales,...ke,byStatus:{...ie.orders.sales.byStatus,...ke.byStatus||{}}}}})}catch(F){if(!de)return;$(F.response?.data?.message||F.message||"Impossible de charger les statistiques.")}finally{de&&R(!1)}})(),()=>{de=!1}},[t]);const nr=u.useCallback(async()=>{if(t){me(!0),ee("");try{const{data:de}=await oe.get("/orders?limit=200"),De=Array.isArray(de)?de:de?.items||[];U(De),be(!0)}catch(de){ee(de.response?.data?.message||de.message||"Impossible de charger vos commandes.")}finally{me(!1)}}},[t]);u.useEffect(()=>{Ee==="orders"&&t&&!ve&&!W&&nr()},[Ee,t,ve,W,nr]),u.useEffect(()=>{if(!J)return;const de=De=>{De.key==="Escape"&&Ge(!1)};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[J]),u.useEffect(()=>{if(!Ze)return;const de=De=>{De.key==="Escape"&&xt(null)};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[Ze]);const er=u.useMemo(()=>{let de=[...re];const De=(je||"").trim().toLowerCase();if(De&&(de=de.filter(he=>{const ke=String(he._id||"").toLowerCase(),mt=String(he.deliveryAddress||"").toLowerCase(),G=String(he.deliveryCity||"").toLowerCase(),Z=String(he.createdBy?.name||"").toLowerCase(),le=String(he.createdBy?.email||"").toLowerCase(),Be=(he.items||(he.productSnapshot?[{snapshot:he.productSnapshot}]:[])).map(Te=>String(Te.snapshot?.title||"").toLowerCase()).join(" ");return ke.includes(De)||mt.includes(De)||G.includes(De)||Z.includes(De)||le.includes(De)||Be.includes(De)})),At&&At!=="all"&&(de=de.filter(he=>(he.status||"pending")===At)),Dt){const he=new Date(Dt);he.setHours(0,0,0,0),de=de.filter(ke=>new Date(ke.createdAt)>=he)}if(Me){const he=new Date(Me);he.setHours(23,59,59,999),de=de.filter(ke=>new Date(ke.createdAt)<=he)}const F=Number(wt),ie=Number(we);if(!Number.isNaN(F)&&F>0&&(de=de.filter(he=>(he.totalAmount??(he.items||[]).reduce((mt,G)=>mt+Number(G.snapshot?.price||0)*Number(G.quantity||1),0))>=F)),!Number.isNaN(ie)&&ie>0&&(de=de.filter(he=>(he.totalAmount??(he.items||[]).reduce((mt,G)=>mt+Number(G.snapshot?.price||0)*Number(G.quantity||1),0))<=ie)),Tt==="date_desc")de.sort((he,ke)=>new Date(ke.createdAt)-new Date(he.createdAt));else if(Tt==="date_asc")de.sort((he,ke)=>new Date(he.createdAt)-new Date(ke.createdAt));else if(Tt==="amount_desc")de.sort((he,ke)=>{const mt=he.totalAmount??(he.items||[]).reduce((Z,le)=>Z+Number(le.snapshot?.price||0)*Number(le.quantity||1),0);return(ke.totalAmount??(ke.items||[]).reduce((Z,le)=>Z+Number(le.snapshot?.price||0)*Number(le.quantity||1),0))-mt});else if(Tt==="amount_asc")de.sort((he,ke)=>{const mt=he.totalAmount??(he.items||[]).reduce((Z,le)=>Z+Number(le.snapshot?.price||0)*Number(le.quantity||1),0),G=ke.totalAmount??(ke.items||[]).reduce((Z,le)=>Z+Number(le.snapshot?.price||0)*Number(le.quantity||1),0);return mt-G});else if(Tt==="status"){const he=["pending","confirmed","delivering","delivered","cancelled"];de.sort((ke,mt)=>he.indexOf(ke.status||"pending")-he.indexOf(mt.status||"pending"))}return de},[re,je,At,Tt,Dt,Me,wt,we]),Nt=u.useCallback(()=>{const de=er;if(de.length===0){a?.("Aucune commande  exporter.",{variant:"warning"});return}const De=["N","Date","Statut","Montant (FCFA)","Adresse","Ville","Produits"],F=de.map((G,Z)=>{const le=G.totalAmount??(G.items||[]).reduce((Te,Se)=>Te+Number(Se.snapshot?.price||0)*Number(Se.quantity||1),0),Be=(G.items||(G.productSnapshot?[{snapshot:G.productSnapshot,quantity:1}]:[])).map(Te=>`${Te.snapshot?.title||"Produit"} x${Te.quantity||1}`).join("; ");return[Z+1,new Date(G.createdAt).toLocaleDateString("fr-FR"),Ui[G.status]||G.status,le,G.deliveryAddress||"",G.deliveryCity||"",Be]}),ie=[De.join(","),...F.map(G=>G.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(","))].join(`
`),he=new Blob(["\uFEFF"+ie],{type:"text/csv;charset=utf-8"}),ke=URL.createObjectURL(he),mt=document.createElement("a");mt.href=ke,mt.download=`commandes_${new Date().toISOString().split("T")[0]}.csv`,mt.click(),URL.revokeObjectURL(ke),a?.("Export CSV russi.",{variant:"success"})},[er,a]),sr=u.useCallback(async()=>{const de=er;if(de.length===0){a?.("Aucune commande  exporter.",{variant:"warning"});return}try{const{jsPDF:De}=await yl(async()=>{const{jsPDF:ke}=await import("./jspdf.es.min-Bc-3z7PL.js").then(mt=>mt.j);return{jsPDF:ke}},[]),{default:F}=await yl(async()=>{const{default:ke}=await import("./jspdf.plugin.autotable-CBbcTuFj.js");return{default:ke}},[]),ie=new De;ie.setFontSize(16),ie.text("Mes commandes",14,20),ie.setFontSize(10),ie.text(`Export du ${new Date().toLocaleDateString("fr-FR")}`,14,28);const he=de.map(ke=>{const mt=ke.totalAmount??(ke.items||[]).reduce((G,Z)=>G+Number(Z.snapshot?.price||0)*Number(Z.quantity||1),0);return[String(ke._id).slice(-6),new Date(ke.createdAt).toLocaleDateString("fr-FR"),Ui[ke.status]||ke.status,`${Number(mt).toLocaleString()} FCFA`,ke.deliveryCity||""]});F(ie,{startY:34,head:[["N","Date","Statut","Montant","Ville"]],body:he,theme:"striped",headStyles:{fillColor:[99,102,241]}}),ie.save(`commandes_${new Date().toISOString().split("T")[0]}.pdf`),a?.("Export PDF russi.",{variant:"success"})}catch(De){console.error(De),a?.("Erreur lors de l'export PDF.",{variant:"error"})}},[er,a]),Rt=de=>{const{name:De,value:F}=de.target;if(De==="accountType"){o(ie=>({...ie,accountType:F,shopName:F==="shop"?ie.shopName:"",shopAddress:F==="shop"?ie.shopAddress:"",shopDescription:F==="shop"?ie.shopDescription:""})),F!=="shop"&&(x(null),E(""),w(null),C(""));return}o(ie=>({...ie,[De]:F}))},zt=de=>{const De=de.target.files&&de.target.files[0]?de.target.files[0]:null;x(De),De&&(v&&v.startsWith("blob:")&&URL.revokeObjectURL(v),E(URL.createObjectURL(De)))},mr=()=>{x(null),E("")},Mr=de=>{const De=de.target.files&&de.target.files[0]?de.target.files[0]:null;w(De),De&&(k&&k.startsWith("blob:")&&URL.revokeObjectURL(k),C(URL.createObjectURL(De)))},br=()=>{w(null),C("")},or=()=>{S(lf())},Gt=(de,De)=>{S(F=>F.map(ie=>ie.day===de?{...ie,...De}:ie))},Zt=(de,De)=>F=>{Gt(de,{[De]:F.target.value})},se=(de,De)=>{Gt(de,{closed:De})},dt=async()=>{B(!0),te(""),ue("");try{await oe.post("/users/password/send-code"),L(!0),ue("Code envoy par email."),a("Code envoy par email.",{variant:"success"})}catch(de){const De=de.response?.data?.message||de.message||"Impossible denvoyer le code.";te(De),a(De,{variant:"error"})}finally{B(!1)}},ut=async()=>{if(!s.password)return!0;if(!q.trim()){const de="Veuillez saisir le code reu par email avant de modifier le mot de passe.";return te(de),a(de,{variant:"error"}),!1}try{return await oe.post("/users/password/change",{verificationCode:q.trim(),newPassword:s.password}),Y(""),L(!1),te(""),ue("Mot de passe mis  jour."),a("Mot de passe mis  jour.",{variant:"success"}),!0}catch(de){const De=de.response?.data?.message||de.message||"Impossible de modifier le mot de passe.";return te(De),a(De,{variant:"error"}),!1}},It=async de=>{if(de.preventDefault(),s.password&&s.password!==s.confirmPassword){const De="Les mots de passe ne correspondent pas.";g(De),a(De,{variant:"error"});return}if(!s.city||!s.gender){const De="Veuillez slectionner votre ville et votre genre.";g(De),a(De,{variant:"error"});return}if(!s.address.trim()){const De="Veuillez renseigner votre adresse complte.";g(De),a(De,{variant:"error"});return}c(!0),g(""),p("");try{if(s.password&&!await ut())return;if(s.accountType==="shop"&&(!s.shopName||!s.shopAddress||!s.shopDescription.trim())){const he="Veuillez renseigner le nom, ladresse et la description de votre boutique.";g(he),a(he,{variant:"error"});return}const De=new FormData,F=A.map(he=>({day:he.day,closed:!!he.closed,open:he.closed?"":he.open||"",close:he.closed?"":he.close||""}));De.append("name",s.name),De.append("email",s.email),De.append("accountType",s.accountType),De.append("city",s.city),De.append("gender",s.gender),De.append("address",s.address.trim()),s.accountType==="shop"&&(De.append("shopName",s.shopName),De.append("shopAddress",s.shopAddress),De.append("shopDescription",s.shopDescription.trim()),b&&De.append("shopLogo",b),t?.shopVerified&&y&&De.append("shopBanner",y),De.append("shopHours",JSON.stringify(F)));const{data:ie}=await oe.put("/users/profile",De,{headers:{"Content-Type":"multipart/form-data"}});r(ie),p("Profil mis  jour avec succs !"),a("Profil mis  jour avec succs !",{variant:"success"}),o(he=>({...he,password:"",confirmPassword:"",accountType:ie.accountType||"person",shopName:ie.shopName||"",shopAddress:ie.shopAddress||"",shopDescription:ie.shopDescription||"",address:ie.address||"",country:ie.country||"Rpublique du Congo",city:ie.city||"",gender:ie.gender||""})),E(ie.shopLogo||""),x(null),C(ie.shopBanner||""),w(null),Y(""),L(!1),te(""),ue(""),setTimeout(()=>{n("/")},2e3)}catch(De){const F=De.response?.data?.message||De.message||"Une erreur est survenue.";g(F),a(F,{variant:"error"})}finally{c(!1)}};return t?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-6"},e.createElement("div",{className:"text-center mb-8"},e.createElement("div",{className:"w-20 h-20 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ia,{className:"w-10 h-10 text-white"})),e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Mon Profil"),e.createElement("p",{className:"text-gray-500"},"Grez vos informations et consultez vos statistiques"),t?.address?e.createElement("p",{className:"mt-2 flex items-center justify-center text-sm text-gray-600 gap-2"},e.createElement(Wr,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,t.address)):null,pe&&e.createElement(ye,{to:pe,className:"inline-flex items-center gap-2 mt-4 px-4 py-2 rounded-xl border border-indigo-200 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 transition-colors"},e.createElement(Er,{className:"w-4 h-4"}),"Voir ma boutique publique"),e.createElement("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:hidden"},Lt.map(({label:de,value:De})=>e.createElement("div",{key:de,className:"bg-white border border-gray-100 rounded-2xl p-3 shadow-sm flex flex-col"},e.createElement("span",{className:"text-[11px] uppercase tracking-wide text-gray-400"},de),e.createElement("span",{className:"text-lg font-bold text-gray-900"},Hn(De)))))),Pe?e.createElement("div",{className:"sticky top-0 z-30 -mx-4 px-4 pt-2 pb-3 mb-4 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200/80 dark:border-gray-800/80 shadow-sm"},e.createElement("div",{className:"mb-3"},e.createElement("div",{className:"flex items-center justify-between text-xs mb-1.5"},e.createElement("span",{className:"font-medium text-gray-500 dark:text-gray-400"},"Profil complt"),e.createElement("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400 tabular-nums"},ht,"%")),e.createElement("div",{className:"h-1.5 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},e.createElement("div",{className:"h-full rounded-full bg-indigo-500 transition-all duration-300 ease-out",style:{width:`${ht}%`}}))),e.createElement("div",{className:"flex gap-1 overflow-x-auto hide-scrollbar pb-1 -mx-1"},ft.map(de=>{const De=de.icon,F=Ee===de.id;return e.createElement("button",{key:de.id,type:"button",onClick:()=>fe(de.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium text-sm transition-all touch-manipulation min-h-[44px] ${F?"bg-indigo-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`},e.createElement(De,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"whitespace-nowrap"},de.label))}))):e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-1 bg-white rounded-2xl p-2 sm:p-1 shadow-sm border border-gray-100 mb-6"},[{id:"profile",label:"Profil",icon:Ia},{id:"stats",label:"Statistiques",icon:mn},{id:"performance",label:"Performance",icon:Pr},{id:"orders",label:"Mes commandes",icon:ea}].map(de=>{const De=de.icon;return e.createElement("button",{key:de.id,onClick:()=>fe(de.id),className:`flex items-center space-x-2 px-4 py-3 rounded-xl font-medium transition-all flex-1 w-full text-left sm:text-center ${Ee===de.id?"bg-indigo-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`},e.createElement(De,{className:"w-4 h-4"}),e.createElement("span",null,de.label))})),Ee==="profile"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3 mb-6"},e.createElement("div",{className:"w-2 h-6 bg-indigo-600 rounded-full"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Informations personnelles")),e.createElement("form",{onSubmit:It,className:"space-y-6"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Ia,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Nom complet *")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"name",value:s.name,onChange:Rt,disabled:l,required:!0}),e.createElement(Ia,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(gi,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Adresse email *")),e.createElement("div",{className:"relative"},e.createElement("input",{type:"email",className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"email",value:s.email,onChange:Rt,disabled:l,required:!0}),e.createElement(gi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Es,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Tlphone")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-100 border border-gray-200 rounded-xl text-gray-600",value:s.phone,readOnly:!0,disabled:!0}),e.createElement("span",{className:"absolute top-2 right-3 text-[11px] text-gray-500"},"Non modifiable"),e.createElement(Es,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wr,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Pays *")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-100 border border-gray-200 rounded-xl text-gray-500",value:"Rpublique du Congo",readOnly:!0,disabled:!0}),e.createElement(Wr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wr,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Ville *")),e.createElement("div",{className:"relative"},e.createElement("select",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"city",value:s.city,onChange:Rt,disabled:l,required:!0},e.createElement("option",{value:""},"Choisissez votre ville"),["Brazzaville","Pointe-Noire","Ouesso","Oyo"].map(de=>e.createElement("option",{key:de,value:de},de))),e.createElement(Wr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2 md:col-span-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wr,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Adresse complte *")),e.createElement("div",{className:"relative"},e.createElement("textarea",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400",rows:2,name:"address",value:s.address,onChange:Rt,disabled:l,placeholder:"Quartier, rue, numro de parcelle...",required:!0}),e.createElement(Wr,{className:"absolute left-4 top-4 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2 md:col-span-2"},e.createElement("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2"},e.createElement(tn,{className:"w-4 h-4 text-indigo-500"}),"Genre *",e.createElement("span",{className:"text-[11px] text-gray-500"},"Non modifiable")),e.createElement("div",{className:"grid grid-cols-2 gap-3"},[{value:"homme",label:"Homme"},{value:"femme",label:"Femme"}].map(de=>e.createElement("label",{key:de.value,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-xl border transition-colors ${s.gender===de.value?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-gray-50 text-gray-600"}`},e.createElement("input",{type:"radio",name:"gender",value:de.value,checked:s.gender===de.value,className:"sr-only",disabled:!0}),de.label)))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(pa,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Type de compte")),t?.accountType==="shop"?e.createElement("select",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"accountType",value:s.accountType,onChange:Rt,disabled:l},e.createElement("option",{value:"shop"},"Boutique"),e.createElement("option",{value:"person"},"Particulier")):e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 bg-gray-100 border border-gray-200 rounded-xl text-gray-600",value:"Particulier",disabled:!0,readOnly:!0}),e.createElement("div",{className:"absolute right-4 top-1/2 -translate-y-1/2"},e.createElement("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full"},"Basique"))))),s.accountType==="shop"&&e.createElement("div",{className:"space-y-6 pt-6 border-t border-gray-100"},e.createElement("div",{className:"flex items-center space-x-3 flex-wrap gap-y-2"},e.createElement("div",{className:"w-2 h-6 bg-amber-600 rounded-full"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Informations de la boutique"),e.createElement(_n,{verified:!!t?.shopVerified}),e.createElement("span",{className:"text-xs text-gray-500"},t?.shopVerified?"Boutique vrifie par lquipe HDMarket.":"Contactez un administrateur pour faire vrifier votre boutique.")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Er,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null,"Nom de la boutique *")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"shopName",value:s.shopName,onChange:Rt,disabled:l,required:!0}),e.createElement(Er,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(Wr,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null,"Adresse *")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"shopAddress",value:s.shopAddress,onChange:Rt,disabled:l,required:!0}),e.createElement(Wr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(vu,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null," propos de la boutique *")),e.createElement("textarea",{className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder-gray-400 text-sm",rows:4,name:"shopDescription",value:s.shopDescription,onChange:Rt,placeholder:"Dcrivez vos engagements, types de produits, services...",disabled:l,required:!0}),e.createElement("p",{className:"text-xs text-gray-500"},"Ce texte saffiche sur votre page publique pour rassurer vos clients.")),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900"},e.createElement(Xt,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null,"Horaires d'ouverture")),e.createElement("button",{type:"button",onClick:or,disabled:l,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-500 disabled:opacity-50 transition-colors"},"Rinitialiser")),e.createElement("p",{className:"text-xs text-gray-500"},"Ces horaires sont indiqus aux acheteurs sur votre boutique publique."),e.createElement("div",{className:"space-y-2"},A.map(de=>e.createElement("div",{key:de.day,className:"flex flex-col gap-3 rounded-2xl border border-gray-100 bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},de.label),e.createElement("p",{className:"text-xs text-gray-500"},de.closed?"Ferm":de.open&&de.close?`${de.open}  ${de.close}`:"Horaires partiels")),e.createElement("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3"},e.createElement("input",{type:"time",value:de.open,onChange:Zt(de.day,"open"),disabled:de.closed||l,className:"h-10 w-24 rounded-xl border border-gray-200 bg-gray-50 px-3 text-sm outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"}),e.createElement("span",{className:"text-xs text-gray-400"},""),e.createElement("input",{type:"time",value:de.close,onChange:Zt(de.day,"close"),disabled:de.closed||l,className:"h-10 w-24 rounded-xl border border-gray-200 bg-gray-50 px-3 text-sm outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"}),e.createElement("label",{className:"flex items-center gap-1 text-xs text-gray-500"},e.createElement("input",{type:"checkbox",checked:de.closed,onChange:De=>se(de.day,De.target.checked),disabled:l,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.createElement("span",null,"Ferm")))))),e.createElement("p",{className:"text-xs text-gray-500"},"Laissez un jour en ferme si vous ntes pas disponible ou si aucun horaire nest dfini.")),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(yf,{className:"w-4 h-4 text-amber-500"}),e.createElement("span",null,"Logo de la boutique")),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors group p-6"},v?e.createElement("div",{className:"text-center"},e.createElement("img",{src:v,alt:"Logo boutique",className:"w-24 h-24 rounded-2xl object-cover mx-auto mb-3 border-2 border-amber-200"}),e.createElement("p",{className:"text-sm text-gray-600 mb-2"},"Logo actuel"),e.createElement("button",{type:"button",onClick:mr,className:"text-sm text-red-600 hover:text-red-500"},"Supprimer")):e.createElement("label",{className:"text-center cursor-pointer"},e.createElement(gl,{className:"w-8 h-8 text-gray-400 group-hover:text-amber-500 transition-colors mb-2 mx-auto"}),e.createElement("span",{className:"text-sm text-gray-500"},e.createElement("span",{className:"text-amber-600 font-medium"},"Cliquez pour uploader"),e.createElement("br",null),e.createElement("span",{className:"text-xs"},"PNG, JPG - 200x200px recommand")),e.createElement("input",{type:"file",accept:"image/*",onChange:zt,className:"hidden"})))),t?.shopVerified?e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(El,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",null,"Bannire de la boutique")),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors group p-6"},k?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:k,alt:"Bannire boutique",className:"h-32 w-full rounded-2xl object-cover mx-auto mb-3 border-2 border-indigo-200"}),e.createElement("p",{className:"text-sm text-gray-600 mb-2"},"Bannire actuelle"),e.createElement("button",{type:"button",onClick:br,className:"text-sm text-red-600 hover:text-red-500"},"Supprimer")):e.createElement("label",{className:"text-center cursor-pointer"},e.createElement(gl,{className:"w-8 h-8 text-gray-400 group-hover:text-indigo-500 transition-colors mb-2 mx-auto"}),e.createElement("span",{className:"text-sm text-gray-500"},e.createElement("span",{className:"text-indigo-600 font-medium"},"Cliquez pour uploader"),e.createElement("br",null),e.createElement("span",{className:"text-xs"},"PNG, JPG - 1200x400px recommand")),e.createElement("input",{type:"file",accept:"image/*",onChange:Mr,className:"hidden"})))):e.createElement("div",{className:"rounded-2xl border border-indigo-100 bg-indigo-50/50 p-4 text-xs text-indigo-700"},"La bannire est disponible uniquement pour les boutiques certifies.")),e.createElement("div",{className:"space-y-6 pt-6 border-t border-gray-100"},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("div",{className:"w-2 h-6 bg-emerald-600 rounded-full"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Scurit")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-green-500"}),e.createElement("span",null,"Nouveau mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:H?"text":"password",className:"w-full px-4 py-3 pl-11 pr-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"password",value:s.password,onChange:Rt,disabled:l,placeholder:"Laisser vide pour conserver"}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("button",{type:"button",onClick:()=>V(!H),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"},H?e.createElement(dc,{className:"w-4 h-4"}):e.createElement(Jn,{className:"w-4 h-4"})))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-green-500"}),e.createElement("span",null,"Confirmer le mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:H?"text":"password",className:"w-full px-4 py-3 pl-11 pr-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"confirmPassword",value:s.confirmPassword,onChange:Rt,disabled:l,placeholder:"Confirmez le mot de passe"}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})))),e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4 space-y-3"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-700"},"Code de vrification email"),e.createElement("p",{className:"text-xs text-gray-500"},"Un code est requis pour confirmer la modification du mot de passe.")),e.createElement("button",{type:"button",onClick:dt,disabled:Q||l,className:"px-4 py-2 rounded-xl border border-indigo-200 text-indigo-600 font-semibold hover:bg-indigo-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},Q?"Envoi...":z?"Renvoyer le code":"Envoyer le code")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Code reu par email",value:q,onChange:de=>Y(de.target.value),disabled:l}),e.createElement(pa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})),ae&&e.createElement("p",{className:"text-sm text-red-600"},ae),ge&&e.createElement("p",{className:"text-sm text-emerald-600"},ge)),e.createElement("label",{className:"flex items-center space-x-2 text-sm text-gray-500 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:H,onChange:()=>V(!H),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.createElement("span",null,"Afficher les mots de passe"))),e.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t border-gray-100"},e.createElement("div",{className:"flex-1"},f&&e.createElement("div",{className:"flex items-center space-x-2 text-red-600"},e.createElement(Ba,{className:"w-4 h-4"}),e.createElement("span",{className:"text-sm"},f)),m&&e.createElement("div",{className:"flex items-center space-x-2 text-green-600"},e.createElement(ar,{className:"w-4 h-4"}),e.createElement("span",{className:"text-sm"},m))),e.createElement("button",{type:"submit",disabled:l,className:"px-8 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center space-x-2 shadow-lg"},l?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,"Enregistrement...")):e.createElement(e.Fragment,null,e.createElement(vc,{className:"w-5 h-5"}),e.createElement("span",null,"Sauvegarder les modifications"))))))),Ee==="stats"&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-2 h-6 bg-blue-600 rounded-full"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Vue d'ensemble")),e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("span",{className:"text-sm text-gray-500"},"Priode :"),tce.map(de=>e.createElement("button",{key:de.value,type:"button",onClick:()=>K(de.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${j===de.value?"bg-indigo-600 text-white shadow":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},de.label)))),O?e.createElement("div",{className:"flex justify-center py-8"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-600 border-t-transparent"})):D?e.createElement("div",{className:"text-center py-8 text-red-600"},e.createElement(Ba,{className:"w-12 h-12 mx-auto mb-3"}),e.createElement("p",null,D)):e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8"},e.createElement("button",{type:"button",onClick:()=>{Ge(!0),!ve&&!W&&nr()},className:"bg-indigo-600 text-white rounded-2xl p-5 shadow-lg text-left hover:bg-indigo-700 active:scale-[0.98] transition-all cursor-pointer"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(ea,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-xl font-bold"},Hn(P.orders?.purchases?.totalCount||0))),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Commandes"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},"Attente: ",Hn(P.orders?.purchases?.byStatus?.pending?.count||0),"  Livres: ",Hn(P.orders?.purchases?.byStatus?.delivered?.count||0))),t?.accountType==="shop"?e.createElement("div",{className:"bg-emerald-600 text-white rounded-2xl p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(Ea,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-lg font-bold truncate ml-1"},Hn((P.orders?.sales?.totalAmount||0)/1e3),"k")),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Revenus"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},Ow(P.orders?.sales?.totalAmount||0))):e.createElement("div",{className:"bg-emerald-600 text-white rounded-2xl p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(Ea,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-lg font-bold truncate ml-1"},Hn((P.orders?.purchases?.totalAmount||0)/1e3),"k")),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Montant achats"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},Ow(P.orders?.purchases?.totalAmount||0))),e.createElement(ye,{to:"/my",className:"bg-blue-600 text-white rounded-2xl p-5 shadow-lg block hover:bg-blue-700 active:scale-[0.98] transition-all"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(Ft,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-xl font-bold"},Hn(P.listings.total))),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Produits"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},"Actifs: ",Hn(P.listings.approved),"  Attente: ",Hn(P.listings.pending))),e.createElement("div",{className:"bg-purple-600 text-white rounded-2xl p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(Pr,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-xl font-bold"},Hn(P.performance.views))),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Vues"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},"Vues totales")),e.createElement("div",{className:"bg-pink-600 text-white rounded-2xl p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(Yr,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-xl font-bold"},Hn(P.engagement.favoritesReceived))),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Engagement"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},"Favoris  WhatsApp: ",Hn(P.performance.clicks))),e.createElement("div",{className:"bg-amber-600 text-white rounded-2xl p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement(ko,{className:"w-7 h-7 opacity-90"}),e.createElement("span",{className:"text-xl font-bold"},P.listings.approved>0?Math.round((P.engagement.favoritesReceived+P.engagement.commentsReceived)/P.listings.approved):"0")),e.createElement("p",{className:"text-white/90 text-sm font-medium"},"Score"),e.createElement("p",{className:"text-white/70 text-xs mt-1"},"Conversion: ",P.performance.conversion??0,"%"))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement("div",{className:"bg-gray-50 rounded-2xl border border-gray-100 p-5"},e.createElement("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(Pr,{className:"w-5 h-5 text-emerald-600"}),"volution des revenus"),t?.accountType==="shop"&&(P.orders?.sales?.totalAmount||0)>0?e.createElement(du,{width:"100%",height:220},e.createElement(q$,{data:[{label:"Priode",revenue:P.orders?.sales?.totalAmount||0}]},e.createElement(vd,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.createElement(Sl,{dataKey:"label",stroke:"#6b7280",fontSize:12}),e.createElement(Vo,{stroke:"#6b7280",fontSize:12,tickFormatter:de=>`${(de/1e3).toFixed(0)}k`}),e.createElement(ys,{formatter:de=>[Ow(de),"Revenus"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),e.createElement(bc,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Revenus",dot:{r:4}}))):e.createElement("div",{className:"h-[220px] flex items-center justify-center text-gray-500 text-sm"},"Aucune donne de revenus sur la priode")),e.createElement("div",{className:"bg-gray-50 rounded-2xl border border-gray-100 p-5"},e.createElement("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(ea,{className:"w-5 h-5 text-indigo-600"}),"Commandes par statut"),e.createElement(du,{width:"100%",height:220},e.createElement(U1,{data:[{label:"En attente",count:P.orders?.purchases?.byStatus?.pending?.count||0,fill:"#f59e0b"},{label:"Confirmes",count:P.orders?.purchases?.byStatus?.confirmed?.count||0,fill:"#3b82f6"},{label:"Livraison",count:P.orders?.purchases?.byStatus?.delivering?.count||0,fill:"#8b5cf6"},{label:"Livres",count:P.orders?.purchases?.byStatus?.delivered?.count||0,fill:"#10b981"},{label:"Annules",count:P.orders?.purchases?.byStatus?.cancelled?.count||0,fill:"#ef4444"}],margin:{top:8,right:8,left:8,bottom:8}},e.createElement(vd,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.createElement(Sl,{dataKey:"label",stroke:"#6b7280",fontSize:11}),e.createElement(Vo,{stroke:"#6b7280",fontSize:12}),e.createElement(ys,{contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"},formatter:de=>[Hn(de),"Commandes"]}),e.createElement(Ol,{dataKey:"count",name:"Commandes",radius:[6,6,0,0]},[{fill:"#f59e0b"},{fill:"#3b82f6"},{fill:"#8b5cf6"},{fill:"#10b981"},{fill:"#ef4444"}].map((de,De)=>e.createElement(Pu,{key:`cell-${De}`,fill:de.fill})))))),e.createElement("div",{className:"bg-gray-50 rounded-2xl border border-gray-100 p-5"},e.createElement("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(Ft,{className:"w-5 h-5 text-blue-600"}),"Rpartition des produits"),e.createElement(du,{width:"100%",height:220},e.createElement(U1,{data:[{label:"Approuves",count:P.listings.approved,fill:"#10b981"},{label:"En attente",count:P.listings.pending,fill:"#f59e0b"},{label:"Rejetes",count:P.listings.rejected,fill:"#ef4444"},{label:"Dsactives",count:P.listings.disabled,fill:"#6b7280"}],layout:"vertical",margin:{top:8,right:24,left:60,bottom:8}},e.createElement(vd,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),e.createElement(Sl,{type:"number",stroke:"#6b7280",fontSize:12}),e.createElement(Vo,{type:"category",dataKey:"label",stroke:"#6b7280",fontSize:11,width:56}),e.createElement(ys,{contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"},formatter:de=>[Hn(de),""]}),e.createElement(Ol,{dataKey:"count",radius:[0,6,6,0]},[{fill:"#10b981"},{fill:"#f59e0b"},{fill:"#ef4444"},{fill:"#6b7280"}].map((de,De)=>e.createElement(Pu,{key:`cell-${De}`,fill:de.fill})))))),e.createElement("div",{className:"bg-gray-50 rounded-2xl border border-gray-100 p-5"},e.createElement("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(mn,{className:"w-5 h-5 text-purple-600"}),"Activit par jour"),e.createElement("div",{className:"h-[220px] flex items-center justify-center rounded-xl bg-white border border-gray-100"},e.createElement("div",{className:"text-center text-gray-500 text-sm"},e.createElement(mn,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),e.createElement("p",null,"Donnes d'activit par jour  venir")))))))),Ee==="performance"&&e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3 mb-6"},e.createElement("div",{className:"w-2 h-6 bg-purple-600 rounded-full"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Performance et Insights")),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-6"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2"},e.createElement(Pr,{className:"w-5 h-5 text-purple-500"}),e.createElement("span",null,"Vos performances")),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center justify-between p-4 rounded-xl bg-purple-50 border border-purple-100"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-purple-900"},"Score d'engagement"),e.createElement("p",{className:"text-2xl font-bold text-purple-600"},Math.round((P.engagement.favoritesReceived+P.engagement.commentsReceived)/Math.max(P.listings.approved,1)))),e.createElement(ko,{className:"w-8 h-8 text-purple-500"})),e.createElement("div",{className:"flex items-center justify-between p-4 rounded-xl bg-blue-50 border border-blue-100"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-blue-900"},"Taux d'approbation"),e.createElement("p",{className:"text-2xl font-bold text-blue-600"},P.listings.total>0?`${Math.round(P.listings.approved/P.listings.total*100)}%`:"0%")),e.createElement(ar,{className:"w-8 h-8 text-blue-500"})))),e.createElement("div",{className:"space-y-6"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2"},e.createElement(zr,{className:"w-5 h-5 text-amber-500"}),e.createElement("span",null,"Recommandations")),e.createElement("div",{className:"space-y-3"},P.listings.pending>0&&e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 p-3 rounded-xl bg-amber-50 border border-amber-200"},e.createElement(Xt,{className:"w-4 h-4 text-amber-600"}),e.createElement("p",{className:"text-sm text-amber-800"},"Vous avez ",P.listings.pending," annonce(s) en attente de validation")),P.engagement.favoritesReceived===0&&P.listings.approved>0&&e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 p-3 rounded-xl bg-blue-50 border border-blue-200"},e.createElement(Yr,{className:"w-4 h-4 text-blue-600"}),e.createElement("p",{className:"text-sm text-blue-800"},"Amliorez vos photos pour augmenter les favoris")),P.listings.approved>5&&e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 p-3 rounded-xl bg-green-50 border border-green-200"},e.createElement(Pr,{className:"w-4 h-4 text-green-600"}),e.createElement("p",{className:"text-sm text-green-800"},"Excellent ! Pensez  promouvoir vos meilleures annonces")))))),J&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:()=>Ge(!1)},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 w-full max-w-2xl max-h-[85vh] flex flex-col",onClick:de=>de.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2"},e.createElement(ea,{className:"w-5 h-5 text-indigo-600"}),"Mes commandes"),e.createElement("button",{type:"button",onClick:()=>Ge(!1),className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors","aria-label":"Fermer"},e.createElement(jt,{className:"w-5 h-5"}))),e.createElement("div",{className:"flex-1 overflow-y-auto px-6 py-4"},ne&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-sm text-red-600 mb-4"},ne),W&&re.length===0?e.createElement("div",{className:"space-y-4"},Array.from({length:3}).map((de,De)=>e.createElement("div",{key:De,className:"animate-pulse border border-gray-100 rounded-2xl p-5 bg-gray-50 h-28"}))):re.length===0?e.createElement("div",{className:"text-center py-10 text-gray-500"},e.createElement(ea,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.createElement("p",{className:"font-medium text-gray-700"},"Aucune commande"),e.createElement("p",{className:"text-sm"},"Vos commandes apparatront ici.")):e.createElement("div",{className:"space-y-4 pb-2"},re.map(de=>{const De=de.items&&de.items.length?de.items:de.productSnapshot?[{snapshot:de.productSnapshot,quantity:1}]:[];return e.createElement("div",{key:de._id,className:"border border-gray-100 rounded-2xl p-5 shadow-sm bg-gray-50/50"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm text-gray-500"},"Commande #",de._id.slice(-6)),e.createElement("div",{className:"mt-1 space-y-1 text-sm text-gray-700"},De.map((F,ie)=>e.createElement("div",{key:`${de._id}-${ie}`},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"font-medium text-gray-900"},F.snapshot?.title||"Produit"),e.createElement("span",{className:"text-xs text-gray-500"},"x",F.quantity,"  ",Number(F.snapshot?.price||0).toLocaleString()," FCFA"))))),e.createElement("p",{className:"mt-2 text-xs text-gray-500"},"Statut : ",Ui[de.status]||"Enregistre")),e.createElement("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold border ${Tw[de.status]||"border-gray-200 bg-gray-50 text-gray-600"}`},de.status==="pending"&&e.createElement(Xt,{size:14}),de.status==="confirmed"&&e.createElement(Ft,{size:14}),de.status==="delivering"&&e.createElement(Kr,{size:14}),de.status==="delivered"&&e.createElement(ar,{size:14}),Ui[de.status]||"Statut inconnu")),e.createElement("p",{className:"mt-3 text-xs text-gray-500"},"Cre le ",new Date(de.createdAt).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})))}))),e.createElement("div",{className:"px-6 py-3 border-t border-gray-100 flex justify-end"},e.createElement(ye,{to:"/profile",onClick:()=>Ge(!1),className:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},"Voir tout l'historique ")))),Ee==="orders"&&e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-6"},e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-indigo-600"},e.createElement(ea,{className:"w-4 h-4"}),"Gestion des commandes"),e.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Mes commandes"),e.createElement("p",{className:"text-sm text-gray-500"},"Filtres, recherche, tri et export.")),e.createElement("div",{className:"flex items-center gap-3 flex-wrap"},e.createElement(ye,{to:"/orders",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-indigo-200 bg-indigo-50 text-indigo-700 text-sm font-medium hover:bg-indigo-100 transition-colors"},e.createElement(Ar,{className:"w-4 h-4"}),"Page complte"),e.createElement(ye,{to:"/orders/draft",className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl border-2 border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50 text-amber-700 text-sm font-semibold hover:from-amber-100 hover:to-orange-100 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(Xt,{className:"w-4 h-4"}),"Brouillons"),e.createElement("button",{type:"button",onClick:nr,disabled:W,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-50 disabled:opacity-60"},W?e.createElement(e.Fragment,null,e.createElement("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},e.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"#c7d2fe",strokeWidth:"4",opacity:"0.3"}),e.createElement("path",{d:"M22 12a10 10 0 00-10-10",stroke:"#6366f1",strokeWidth:"4",strokeLinecap:"round"})),"Chargement"):e.createElement(e.Fragment,null,e.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582M20 20v-5h-.581M5 9a7 7 0 0114 0M19 15a7 7 0 01-14 0"})),"Actualiser")))),e.createElement("div",{className:"flex flex-wrap items-center gap-2 mb-4"},[{key:"all",label:"Toutes"},{key:"pending",label:"En attente"},{key:"confirmed",label:"Confirmes"},{key:"delivering",label:"En livraison"},{key:"delivered",label:"Livres"},{key:"cancelled",label:"Annules"}].map(de=>e.createElement("button",{key:de.key,type:"button",onClick:()=>He(de.key),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${At===de.key?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},de.label))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-3 mb-4"},e.createElement("div",{className:"relative flex-1"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("input",{type:"text",placeholder:"Rechercher par n commande, produit, client...",value:je,onChange:de=>tt(de.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})),e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("button",{type:"button",onClick:()=>Le(!pt),className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl border text-sm font-medium ${pt?"border-indigo-300 bg-indigo-50 text-indigo-700":"border-gray-200 text-gray-600 hover:bg-gray-50"}`},e.createElement(ls,{className:"w-4 h-4"}),"Filtres"),e.createElement("select",{value:Tt,onChange:de=>Re(de.target.value),className:"px-3 py-2 rounded-xl border border-gray-200 text-sm font-medium text-gray-700 focus:ring-2 focus:ring-indigo-500"},e.createElement("option",{value:"date_desc"},"Date "),e.createElement("option",{value:"date_asc"},"Date "),e.createElement("option",{value:"amount_desc"},"Montant "),e.createElement("option",{value:"amount_asc"},"Montant "),e.createElement("option",{value:"status"},"Statut")),e.createElement("div",{className:"flex rounded-xl border border-gray-200 overflow-hidden"},e.createElement("button",{type:"button",onClick:()=>gt("list"),className:`p-2 ${et==="list"?"bg-indigo-100 text-indigo-600":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:"Vue liste"},e.createElement(E2,{className:"w-4 h-4"})),e.createElement("button",{type:"button",onClick:()=>gt("grid"),className:`p-2 ${et==="grid"?"bg-indigo-100 text-indigo-600":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:"Vue grille"},e.createElement(iu,{className:"w-4 h-4"}))),e.createElement("button",{type:"button",onClick:Nt,className:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-50",title:"Export CSV"},e.createElement(zo,{className:"w-4 h-4"})," CSV"),e.createElement("button",{type:"button",onClick:sr,className:"inline-flex items-center gap-1.5 px-3 py-2 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-50",title:"Export PDF"},e.createElement(zo,{className:"w-4 h-4"})," PDF"))),pt&&e.createElement("div",{className:"flex flex-wrap items-end gap-3 p-4 rounded-xl bg-gray-50 border border-gray-100 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-600 mb-1"},"Date dbut"),e.createElement("input",{type:"date",value:Dt,onChange:de=>nt(de.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 text-sm"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-600 mb-1"},"Date fin"),e.createElement("input",{type:"date",value:Me,onChange:de=>Qe(de.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 text-sm"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-600 mb-1"},"Montant min (FCFA)"),e.createElement("input",{type:"number",placeholder:"0",value:wt,onChange:de=>lt(de.target.value),min:0,className:"px-3 py-2 rounded-lg border border-gray-200 text-sm w-32"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-semibold text-gray-600 mb-1"},"Montant max (FCFA)"),e.createElement("input",{type:"number",placeholder:"",value:we,onChange:de=>vt(de.target.value),min:0,className:"px-3 py-2 rounded-lg border border-gray-200 text-sm w-32"})),e.createElement("button",{type:"button",onClick:()=>{nt(""),Qe(""),lt(""),vt("")},className:"px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-200"},"Rinitialiser")),ne&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-sm text-red-600 mb-6"},ne),!W&&re.length>0&&e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-50 border border-indigo-100"},e.createElement("p",{className:"text-xs font-semibold text-indigo-600 uppercase tracking-wide"},"Affiches"),e.createElement("p",{className:"text-xl font-bold text-indigo-900"},er.length)),e.createElement("div",{className:"p-3 rounded-xl bg-emerald-50 border border-emerald-100"},e.createElement("p",{className:"text-xs font-semibold text-emerald-600 uppercase tracking-wide"},"Total montant"),e.createElement("p",{className:"text-lg font-bold text-emerald-900"},Hn(er.reduce((de,De)=>{const F=De.totalAmount??(De.items||[]).reduce((ie,he)=>ie+Number(he.snapshot?.price||0)*Number(he.quantity||1),0);return de+F},0))," ","FCFA")),e.createElement("div",{className:"p-3 rounded-xl bg-amber-50 border border-amber-100"},e.createElement("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide"},"En attente"),e.createElement("p",{className:"text-xl font-bold text-amber-900"},er.filter(de=>(de.status||"pending")==="pending").length)),e.createElement("div",{className:"p-3 rounded-xl bg-green-50 border border-green-100"},e.createElement("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide"},"Livres"),e.createElement("p",{className:"text-xl font-bold text-green-900"},er.filter(de=>(de.status||"pending")==="delivered").length))),!W&&!ne&&re.length===0&&e.createElement("div",{className:"text-center py-10 border border-dashed border-gray-200 rounded-2xl"},e.createElement("div",{className:"w-16 h-16 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-3"},e.createElement(ea,{className:"w-8 h-8 text-gray-400"})),e.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-1"},"Aucune commande disponible"),e.createElement("p",{className:"text-sm text-gray-500 max-w-md mx-auto"},"Un gestionnaire enregistre vos commandes depuis ladmin. Ds quune commande est cre, elle saffichera ici avec son statut.")),(W||er.length>0)&&e.createElement("div",{className:et==="grid"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4":"space-y-4"},W&&er.length===0?Array.from({length:3}).map((de,De)=>e.createElement("div",{key:De,className:"animate-pulse border border-gray-100 rounded-2xl p-5 bg-gray-50"})):er.map(de=>{const De=de.items&&de.items.length?de.items:de.productSnapshot?[{snapshot:de.productSnapshot,quantity:1}]:[];return e.createElement("div",{key:de._id,className:"border border-gray-100 rounded-2xl p-5 shadow-sm flex flex-col"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm text-gray-500"},"Commande #",de._id.slice(-6)),e.createElement("div",{className:"mt-1 space-y-1 text-sm text-gray-700"},De.map((F,ie)=>e.createElement("div",{key:`${de._id}-${ie}`,className:"space-y-0.5"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"font-medium text-gray-900"},F.snapshot?.title||"Produit"),e.createElement("span",{className:"text-xs text-gray-500"},"x",F.quantity,"  ",Number(F.snapshot?.price||0).toLocaleString()," FCFA")),F.snapshot?.confirmationNumber&&e.createElement("span",{className:"text-[11px] text-indigo-600 font-semibold uppercase tracking-wide"},"Code produit : ",F.snapshot.confirmationNumber)))),e.createElement("div",{className:"mt-3 flex flex-wrap gap-3 text-xs text-gray-500"},e.createElement("span",{className:"inline-flex items-center gap-1"},e.createElement(pa,{className:"w-3.5 h-3.5 text-indigo-500"}),"Gestionnaire : ",de.createdBy?.name||de.createdBy?.email||"Admin HDMarket"),e.createElement("span",{className:"hidden sm:block text-gray-300"},""),e.createElement("span",{className:"font-semibold text-gray-700"},"Statut : ",Ui[de.status]||"Enregistre"))),e.createElement("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold border ${Tw[de.status]||"border-gray-200 bg-gray-50 text-gray-600"}`},de.status==="pending"&&e.createElement(Xt,{size:14}),de.status==="confirmed"&&e.createElement(Ft,{size:14}),de.status==="delivering"&&e.createElement(Kr,{size:14}),de.status==="delivered"&&e.createElement(ar,{size:14}),de.status==="cancelled"&&e.createElement(Ba,{size:14}),Ui[de.status]||"Statut inconnu")),e.createElement("div",{className:"mt-4 grid gap-3 md:grid-cols-2 text-sm text-gray-600"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-400"},"Adresse de livraison"),e.createElement("p",{className:"font-medium text-gray-900"},de.deliveryAddress),e.createElement("p",{className:"flex items-center gap-1 text-xs text-gray-500 mt-0.5"},e.createElement(Wr,{size:13}),de.deliveryCity)),e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-400"},"Suivi"),de.trackingNote?e.createElement("p",null,de.trackingNote):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune note ajoute pour le moment."))),e.createElement(sce,{status:de.status}),e.createElement("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-gray-500"},e.createElement("span",{className:"inline-flex items-center gap-1"},e.createElement(Xt,{size:12}),"Cre le ",new Date(de.createdAt).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})),de.shippedAt&&e.createElement("span",{className:"inline-flex items-center gap-1"},e.createElement(Kr,{size:12}),"Expdie le ",new Date(de.shippedAt).toLocaleDateString("fr-FR")),de.deliveredAt&&e.createElement("span",{className:"inline-flex items-center gap-1"},e.createElement(ar,{size:12}),"Livre le ",new Date(de.deliveredAt).toLocaleDateString("fr-FR"))),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-100 flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>xt(de),className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium text-indigo-600 hover:bg-indigo-50 border border-indigo-200"},e.createElement(Ft,{size:14}),"Voir dtails"),e.createElement(ye,{to:"/orders/messages",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 border border-gray-200"},e.createElement(Hr,{size:14}),"Messages")))})),Ze&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:()=>xt(null)},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:de=>de.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 sticky top-0 bg-white"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2"},e.createElement(ea,{className:"w-5 h-5 text-indigo-600"}),"Commande #",Ze._id?.slice(-6)),e.createElement("button",{type:"button",onClick:()=>xt(null),className:"p-2 rounded-full text-gray-500 hover:bg-gray-100","aria-label":"Fermer"},e.createElement(jt,{className:"w-5 h-5"}))),e.createElement("div",{className:"p-6 space-y-6"},e.createElement("div",null,e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2"},"Statut"),e.createElement("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold border ${Tw[Ze.status]||"border-gray-200 bg-gray-50"}`},Ze.status==="pending"&&e.createElement(Xt,{size:16}),Ze.status==="confirmed"&&e.createElement(Ft,{size:16}),Ze.status==="delivering"&&e.createElement(Kr,{size:16}),Ze.status==="delivered"&&e.createElement(ar,{size:16}),Ze.status==="cancelled"&&e.createElement(Ba,{size:16}),Ui[Ze.status]||"Inconnu")),e.createElement("div",null,e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2"},"Produits"),e.createElement("div",{className:"space-y-2"},(Ze.items||(Ze.productSnapshot?[{snapshot:Ze.productSnapshot,quantity:1}]:[])).map((de,De)=>e.createElement("div",{key:De,className:"flex justify-between items-center py-2 border-b border-gray-50 last:border-0"},e.createElement("span",{className:"font-medium text-gray-900"},de.snapshot?.title||"Produit"),e.createElement("span",{className:"text-sm text-gray-600"},"x",de.quantity,"  ",Number(de.snapshot?.price||0).toLocaleString()," FCFA")))),e.createElement("p",{className:"mt-2 text-sm font-semibold text-gray-900"},"Total : ",Number(Ze.totalAmount??0).toLocaleString()," FCFA")),e.createElement("div",null,e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2"},"Adresse de livraison"),e.createElement("p",{className:"text-gray-900"},Ze.deliveryAddress),e.createElement("p",{className:"flex items-center gap-1 text-sm text-gray-500 mt-1"},e.createElement(Wr,{size:14})," ",Ze.deliveryCity)),e.createElement("div",null,e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3"},"Timeline"),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex gap-3"},e.createElement("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Xt,{className:"w-4 h-4 text-indigo-600"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},"Cre"),e.createElement("p",{className:"text-sm text-gray-500"},Ze.createdAt?new Date(Ze.createdAt).toLocaleString("fr-FR"):""))),Ze.shippedAt&&e.createElement("div",{className:"flex gap-3"},e.createElement("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},e.createElement(Kr,{className:"w-4 h-4 text-blue-600"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},"Expdie"),e.createElement("p",{className:"text-sm text-gray-500"},new Date(Ze.shippedAt).toLocaleString("fr-FR")))),Ze.deliveredAt&&e.createElement("div",{className:"flex gap-3"},e.createElement("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0"},e.createElement(ar,{className:"w-4 h-4 text-emerald-600"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},"Livre"),e.createElement("p",{className:"text-sm text-gray-500"},new Date(Ze.deliveredAt).toLocaleString("fr-FR")))),Ze.cancelledAt&&e.createElement("div",{className:"flex gap-3"},e.createElement("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ba,{className:"w-4 h-4 text-red-600"})),e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},"Annule"),e.createElement("p",{className:"text-sm text-gray-500"},new Date(Ze.cancelledAt).toLocaleString("fr-FR"))))))),e.createElement("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end gap-2"},e.createElement(ye,{to:"/orders/messages",onClick:()=>xt(null),className:"px-4 py-2 rounded-xl border border-indigo-200 text-indigo-600 font-medium hover:bg-indigo-50"},"Messages"),e.createElement(ye,{to:"/orders",onClick:()=>xt(null),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white font-medium hover:bg-indigo-700"},"Page commandes"))))),Ee==="shop"&&t?.accountType==="shop"&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden"},e.createElement("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50/50"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900"},"Prvisualisation"),e.createElement("p",{className:"text-xs text-gray-500"},"Aperu de votre boutique telle quelle apparat aux acheteurs.")),e.createElement("div",{className:"p-4"},e.createElement("a",{href:pe||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 rounded-xl border-2 border-gray-100 p-4 hover:border-indigo-200 hover:bg-indigo-50/30 transition-colors"},v||t?.shopLogo?e.createElement("img",{src:v||t?.shopLogo,alt:"Logo",className:"w-14 h-14 rounded-xl object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-14 h-14 rounded-xl bg-gray-200 flex items-center justify-center flex-shrink-0"},e.createElement(Er,{className:"w-7 h-7 text-gray-400"})),e.createElement("div",{className:"min-w-0 flex-1"},e.createElement("p",{className:"font-semibold text-gray-900 truncate"},s.shopName||"Ma boutique"),e.createElement("p",{className:"text-xs text-gray-500 truncate"},s.shopAddress||"Adresse non renseigne")),e.createElement("span",{className:"text-sm font-semibold text-indigo-600 flex-shrink-0"},"Voir laperu public ")))),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-2"},"Informations de la boutique"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Nom, adresse, description."),e.createElement("dl",{className:"space-y-2 text-sm"},e.createElement("div",null,e.createElement("dt",{className:"text-gray-500"},"Nom"),e.createElement("dd",{className:"font-medium text-gray-900"},s.shopName||"")),e.createElement("div",null,e.createElement("dt",{className:"text-gray-500"},"Adresse"),e.createElement("dd",{className:"font-medium text-gray-900"},s.shopAddress||""))),e.createElement("button",{type:"button",onClick:()=>fe("profile"),className:"mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-700"},"Modifier dans longlet Profil")),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-2"},"Logo et bannire"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Upload avec preview. Gestion dans longlet Profil."),e.createElement("div",{className:"flex gap-3"},v||t?.shopLogo?e.createElement("img",{src:v||t?.shopLogo,alt:"Logo",className:"w-16 h-16 rounded-xl object-cover border border-gray-200"}):e.createElement("div",{className:"w-16 h-16 rounded-xl bg-gray-100 border border-dashed border-gray-300 flex items-center justify-center"},e.createElement(yf,{className:"w-6 h-6 text-gray-400"})),t?.shopVerified&&(k||t?.shopBanner)?e.createElement("img",{src:k||t?.shopBanner,alt:"Bannire",className:"h-16 flex-1 max-w-[120px] rounded-xl object-cover border border-gray-200"}):t?.shopVerified?e.createElement("div",{className:"h-16 flex-1 max-w-[120px] rounded-xl bg-gray-100 border border-dashed border-gray-300 flex items-center justify-center"},e.createElement(El,{className:"w-6 h-6 text-gray-400"})):null),e.createElement("button",{type:"button",onClick:()=>fe("profile"),className:"mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-700"},"Grer dans longlet Profil")),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center gap-2"},e.createElement(Xt,{className:"w-4 h-4 text-amber-500"}),"Horaires douverture"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Gestion des horaires par jour."),e.createElement("ul",{className:"space-y-1.5 text-sm text-gray-700"},A.slice(0,5).map(de=>e.createElement("li",{key:de.day,className:"flex justify-between"},e.createElement("span",null,de.label),e.createElement("span",{className:"text-gray-500"},de.closed?"Ferm":de.open&&de.close?`${de.open}  ${de.close}`:""))),A.length>5&&e.createElement("li",{className:"text-gray-500"},"+ ",A.length-5," autre(s) jour(s)")),e.createElement("button",{type:"button",onClick:()=>fe("profile"),className:"mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-700"},"Modifier dans longlet Profil")),P&&e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-2"},"Statistiques de la boutique"),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},"Vues, favoris, produits."),e.createElement("div",{className:"grid grid-cols-3 gap-3"},e.createElement("div",{className:"rounded-xl bg-gray-50 p-3 text-center"},e.createElement("p",{className:"text-lg font-bold text-gray-900"},P?.listings?.total??0),e.createElement("p",{className:"text-xs text-gray-500"},"Annonces")),e.createElement("div",{className:"rounded-xl bg-gray-50 p-3 text-center"},e.createElement("p",{className:"text-lg font-bold text-gray-900"},P?.engagement?.favoritesReceived??0),e.createElement("p",{className:"text-xs text-gray-500"},"Favoris reus")),e.createElement("div",{className:"rounded-xl bg-gray-50 p-3 text-center"},e.createElement("p",{className:"text-lg font-bold text-gray-900"},P?.performance?.views??0),e.createElement("p",{className:"text-xs text-gray-500"},"Vues"))),e.createElement("button",{type:"button",onClick:()=>fe("stats"),className:"mt-3 text-sm font-semibold text-indigo-600 hover:text-indigo-700"},"Voir tout dans longlet Statistiques")),e.createElement(ye,{to:pe||"/profile",className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-colors"},e.createElement(Er,{className:"w-4 h-4"}),"Voir ma boutique publique")),Ee==="notifications"&&e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col gap-3 mb-6"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-indigo-600"},e.createElement(Kn,{className:"w-4 h-4"}),"Prfrences de notifications"),e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Notifications"),e.createElement("p",{className:"text-sm text-gray-500"},"Choisissez les types de notifications que vous souhaitez recevoir.")),e.createElement(ye,{to:"/notifications",className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-colors"},e.createElement(Kn,{className:"w-4 h-4"}),"Grer les prfrences")),Ee==="security"&&e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3 mb-6"},e.createElement("div",{className:"w-2 h-6 bg-emerald-600 rounded-full"}),e.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Mot de passe et authentification")),e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-green-500"}),e.createElement("span",null,"Nouveau mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:H?"text":"password",className:"w-full px-4 py-3 pl-11 pr-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"password",value:s.password,onChange:Rt,disabled:l,placeholder:"Laisser vide pour conserver"}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("button",{type:"button",onClick:()=>V(!H),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"},H?e.createElement(dc,{className:"w-4 h-4"}):e.createElement(Jn,{className:"w-4 h-4"})))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700"},e.createElement(cn,{className:"w-4 h-4 text-green-500"}),e.createElement("span",null,"Confirmer le mot de passe")),e.createElement("div",{className:"relative"},e.createElement("input",{type:H?"text":"password",className:"w-full px-4 py-3 pl-11 pr-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",name:"confirmPassword",value:s.confirmPassword,onChange:Rt,disabled:l,placeholder:"Confirmez le mot de passe"}),e.createElement(cn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})))),e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4 space-y-3"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-700"},"Code de vrification email"),e.createElement("p",{className:"text-xs text-gray-500"},"Un code est requis pour confirmer la modification du mot de passe.")),e.createElement("button",{type:"button",onClick:dt,disabled:Q||l,className:"px-4 py-2 rounded-xl border border-indigo-200 text-indigo-600 font-semibold hover:bg-indigo-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},Q?"Envoi...":z?"Renvoyer le code":"Envoyer le code")),e.createElement("div",{className:"relative"},e.createElement("input",{className:"w-full px-4 py-3 pl-11 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Code reu par email",value:q,onChange:de=>Y(de.target.value),disabled:l}),e.createElement(pa,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})),ae&&e.createElement("p",{className:"text-sm text-red-600"},ae),ge&&e.createElement("p",{className:"text-sm text-emerald-600"},ge)),e.createElement("label",{className:"flex items-center space-x-2 text-sm text-gray-500 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:H,onChange:()=>V(!H),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.createElement("span",null,"Afficher les mots de passe")),e.createElement("button",{type:"button",onClick:async()=>{await ut()&&a("Mot de passe mis  jour.",{variant:"success"})},disabled:l||!s.password||s.password!==s.confirmPassword||!q.trim(),className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-5 py-3 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(cn,{className:"w-4 h-4"}),"Mettre  jour le mot de passe"))))):e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ia,{className:"w-8 h-8 text-white"})),e.createElement("p",{className:"text-gray-500"},"Vous devez tre connect pour accder  votre profil.")))}const cce=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",dce={pending:"En attente",in_review:"En cours",resolved:"Rsolue"},mce={pending:"bg-orange-100 text-orange-700",in_review:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-700"};function uce(){const{user:t}=u.useContext(Sr),{showToast:r}=ms(),[a,n]=u.useState([]),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState(""),[f,g]=u.useState(""),[b,x]=u.useState([]),[v,E]=u.useState(!1),[y,w]=u.useState(""),[k,C]=u.useState(""),A=e.useMemo(()=>"https://hdmarket-backend.onrender.com/api".replace(/\/api\/?$/,""),[]),S=u.useCallback(D=>{if(!D)return"";const $=String(D).replace(/\\/g,"/");return/^https?:\/\//i.test($)?$:`${A}/${$.replace(/^\/+/,"")}`},[A]),P=u.useCallback(async()=>{if(!t){n([]),c("");return}o(!0),c("");try{const{data:D}=await oe.get("/users/complaints"),$=Array.isArray(D)?D:[];n($.map(j=>({...j,attachments:(Array.isArray(j.attachments)?j.attachments:[]).map(K=>({...K,url:S(K.path||K.url||"")}))})))}catch(D){c(D.response?.data?.message||D.message||"Impossible de charger vos rclamations.")}finally{o(!1)}},[t,S]);u.useEffect(()=>{P()},[P]);const T=D=>{const $=Array.from(D.target.files||[]);if(!$.length)return;const j=Math.max(0,2-b.length),K=$.slice(0,j);x(H=>[...H,...K]),D.target.value=""},O=D=>{x($=>$.filter((j,K)=>K!==D)),w("")},R=async D=>{if(D.preventDefault(),w(""),C(""),!f.trim()){w("Veuillez dtailler votre rclamation.");return}E(!0);try{const $=new FormData;$.append("subject",m.trim()),$.append("message",f.trim()),b.forEach(j=>$.append("attachments",j)),await oe.post("/users/complaints",$,{headers:{"Content-Type":"multipart/form-data"}}),C("Votre rclamation a bien t envoye."),p(""),g(""),x([]),r("Rclamation envoye",{variant:"success"}),await P()}catch($){const j=$.response?.data?.message||$.message||"Une erreur est survenue.";w(j),r(j,{variant:"error"})}finally{E(!1)}};return t?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-3xl mx-auto px-4 py-6"},e.createElement(ye,{to:"/profile",className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-indigo-600 mb-6"},e.createElement(Gr,{size:18}),"Retour au profil"),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},e.createElement("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-rose-600 rounded-full"}),e.createElement("div",null,e.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Rclamations"),e.createElement("p",{className:"text-sm text-gray-500"},"Signalez un problme ou partagez une capture dcran : vous pouvez joindre deux fichiers."))),e.createElement("form",{onSubmit:R,className:"space-y-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-rose-500"}),"Objet (facultatif)"),e.createElement("input",{type:"text",className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Ex : Annonce non conforme",value:m,onChange:D=>{p(D.target.value),w("")},disabled:v,maxLength:150})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700"},e.createElement(Hr,{className:"w-4 h-4 text-rose-500"}),"Description *"),e.createElement("textarea",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:ring-2 focus:ring-rose-500 focus:border-transparent placeholder-gray-400",rows:4,value:f,onChange:D=>{g(D.target.value),w("")},placeholder:"Expliquez en dtail votre problme.",disabled:v,required:!0,maxLength:1500})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700"},e.createElement(pd,{className:"w-4 h-4 text-rose-500"}),"Fichiers (max 2)"),e.createElement("label",{className:"flex items-center justify-between rounded-xl border border-dashed border-gray-300 bg-gray-50 px-4 py-3 text-xs font-semibold text-gray-600 hover:border-rose-300 hover:bg-rose-50 cursor-pointer"},e.createElement("span",null,"Ajouter un fichier"),e.createElement("span",{className:"text-[11px] text-gray-400"},"PNG, JPG, PDF"),e.createElement("input",{type:"file",multiple:!0,className:"hidden",onChange:T,disabled:v}))),b.length>0&&e.createElement("div",{className:"space-y-2"},b.map((D,$)=>e.createElement("div",{key:`${D.name}-${$}`,className:"flex items-center justify-between rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-600"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(pd,{className:"w-4 h-4 text-gray-400"}),e.createElement("span",{className:"truncate"},D.name)),e.createElement("button",{type:"button",onClick:()=>O($),disabled:v,className:"text-xs font-semibold text-red-600 hover:text-red-500"},"Supprimer")))),(y||k)&&e.createElement("div",{className:`flex items-center gap-2 text-sm ${y?"text-red-600":"text-green-600"}`},y?e.createElement(yN,{className:"w-4 h-4"}):e.createElement(ar,{className:"w-4 h-4"}),e.createElement("span",null,y||k)),e.createElement("div",{className:"flex justify-end"},e.createElement("button",{type:"submit",disabled:v,className:"inline-flex items-center gap-2 rounded-xl bg-rose-600 px-5 py-3 text-sm font-semibold text-white shadow-sm hover:bg-rose-700 disabled:opacity-60"},v?e.createElement("span",{className:"flex items-center gap-2"},e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Envoi..."):e.createElement(e.Fragment,null,e.createElement(yN,{className:"w-4 h-4"}),"Envoyer la rclamation"))))),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Vos rclamations"),s?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement"):l?e.createElement("p",{className:"text-sm text-red-600"},l):a.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune rclamation pour le moment."):e.createElement("ul",{className:"space-y-3"},a.map(D=>e.createElement("li",{key:D._id,className:"rounded-2xl border border-gray-100 bg-gray-50 px-4 py-3 text-sm"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"font-medium text-gray-900"},D.subject||"Sans objet"),e.createElement("p",{className:"text-[11px] text-gray-500"},cce(D.createdAt))),e.createElement("span",{className:`rounded-full px-3 py-1 text-[11px] font-semibold shrink-0 ${mce[D.status]||"bg-gray-100 text-gray-600"}`},dce[D.status]||D.status)),e.createElement("p",{className:"mt-2 text-gray-600 whitespace-pre-line break-words"},D.message),D.attachments?.length>0&&e.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},D.attachments.filter($=>$.url).map(($,j)=>e.createElement("a",{key:j,href:$.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-xl border border-gray-200 bg-white px-3 py-1 text-xs font-medium text-gray-600 hover:border-rose-200"},e.createElement(pd,{className:"w-3 h-3"}),$.originalName||$.filename||"Pice jointe"))))))))):e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ia,{className:"w-8 h-8 text-white"})),e.createElement("p",{className:"text-gray-500"},"Vous devez tre connect pour accder  cette page."),e.createElement(ye,{to:"/login",className:"mt-4 inline-flex items-center gap-2 text-indigo-600 font-medium"},e.createElement(Gr,{size:16}),"Retour  la connexion")))}const Mw=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"";function pce(){const{user:t}=u.useContext(Sr),[r,a]=u.useState([]),[n,s]=u.useState({total:0,remaining:5}),[o,l]=u.useState(!1),[c,m]=u.useState(""),[p,f]=u.useState(""),[g,b]=u.useState(""),[x,v]=u.useState(!1),[E,y]=u.useState(""),[w,k]=u.useState(""),[C,A]=u.useState(null),S=u.useCallback(async()=>{if(!t){a([]),s({total:0,remaining:5}),m("");return}l(!0),m("");try{const{data:T}=await oe.get("/users/feedback"),O=Array.isArray(T?.items)?T.items:[];a(O),s({total:Number(T?.total??O.length??0),remaining:Number.isFinite(Number(T?.remaining))?Number(T.remaining):Math.max(0,5-Number(T?.total??O.length??0))})}catch(T){a([]),s({total:0,remaining:5}),m(T.response?.data?.message||T.message||"Impossible de charger vos avis.")}finally{l(!1)}},[t]);u.useEffect(()=>{S()},[S]);const P=async T=>{if(T.preventDefault(),y(""),k(""),!p.trim()){y("Veuillez renseigner un sujet.");return}if(!g.trim()){y("Veuillez dtailler votre avis.");return}if(n.remaining<=0){y("Vous avez atteint la limite de 5 avis.");return}v(!0);try{const{data:O}=await oe.post("/users/feedback",{subject:p.trim(),body:g.trim()});k("Merci ! Votre avis a t envoy."),f(""),b(""),O?.feedback&&a(R=>[O.feedback,...R].slice(0,5)),typeof O?.remaining=="number"?s(R=>({total:R.total+1,remaining:O.remaining})):await S()}catch(O){y(O.response?.data?.message||O.message||"Impossible denvoyer votre avis.")}finally{v(!1)}};return t?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-3xl mx-auto px-4 py-6"},e.createElement(ye,{to:"/profile",className:"inline-flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-indigo-600 mb-6"},e.createElement(Gr,{size:18}),"Retour au profil"),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},e.createElement("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:gap-3 mb-4"},e.createElement("div",{className:"w-2 h-6 bg-emerald-600 rounded-full"}),e.createElement("div",null,e.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Avis sur lamlioration"),e.createElement("p",{className:"text-sm text-gray-500"},"Partagez vos ides pour amliorer HDMarket. Limit  5 avis par utilisateur."))),e.createElement("div",{className:"space-y-3 mb-6"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Vos avis envoys"),e.createElement("span",{className:"text-xs font-semibold text-gray-500"},n.total," / 5"))),e.createElement("form",{onSubmit:P,className:"space-y-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700"},e.createElement(Pn,{className:"w-4 h-4 text-emerald-500"}),"Sujet *"),e.createElement("input",{type:"text",className:"w-full px-4 py-3 pl-11 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Ex : Nouvelle fonctionnalit",value:p,onChange:T=>{f(T.target.value),y(""),k("")},maxLength:150,disabled:x,required:!0})),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700"},e.createElement(Hr,{className:"w-4 h-4 text-emerald-500"}),"Votre avis *"),e.createElement("textarea",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-50 focus:ring-2 focus:ring-emerald-500 focus:border-transparent placeholder-gray-400",rows:4,value:g,onChange:T=>{b(T.target.value),y(""),k("")},placeholder:"Expliquez votre ide ou votre suggestion.",disabled:x,maxLength:2e3,required:!0})),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs text-gray-500"},e.createElement("span",null,n.remaining>0?`Il vous reste ${n.remaining} avis sur 5.`:"Limite atteinte : 5 avis envoys."),e.createElement("span",null,n.total," envoy",n.total>1?"s":"")),(E||w)&&e.createElement("div",{className:`flex items-center gap-2 text-sm ${E?"text-red-600":"text-green-600"}`},E?e.createElement("span",null,E):e.createElement(e.Fragment,null,e.createElement(ar,{className:"w-4 h-4"}),e.createElement("span",null,w))),e.createElement("div",{className:"flex justify-end"},e.createElement("button",{type:"submit",disabled:x||n.remaining<=0,className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-5 py-3 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 disabled:opacity-60"},x?e.createElement("span",{className:"flex items-center gap-2"},e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Envoi..."):e.createElement(e.Fragment,null,e.createElement(Hr,{className:"w-4 h-4"}),"Envoyer lavis"))))),e.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Vos avis envoys"),o?e.createElement("div",{className:"space-y-2"},[1,2].map(T=>e.createElement("div",{key:T,className:"animate-pulse rounded-2xl border border-gray-100 bg-gray-50 p-4"},e.createElement("div",{className:"h-4 w-1/2 rounded bg-gray-200"}),e.createElement("div",{className:"mt-2 h-3 w-3/4 rounded bg-gray-200"})))):c?e.createElement("p",{className:"text-sm text-red-600"},c):r.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun avis envoy pour le moment."):e.createElement("div",{className:"space-y-2"},r.map(T=>{const O=!!T.readAt;return e.createElement("button",{type:"button",key:T._id,onClick:()=>A(T),className:"w-full text-left rounded-2xl border border-gray-100 bg-gray-50 px-4 py-3 shadow-sm hover:border-emerald-200 transition-colors"},e.createElement("div",{className:"flex items-start justify-between gap-2"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},T.subject),e.createElement("p",{className:"text-xs text-gray-500"},Mw(T.createdAt))),e.createElement("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold shrink-0 ${O?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`},O?"Lu":"Non lu")),e.createElement("p",{className:"mt-2 text-xs text-gray-600 line-clamp-2"},T.body))})))),C&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",onClick:()=>A(null),"aria-hidden":!0}),e.createElement("div",{className:"relative w-full max-w-lg rounded-3xl bg-white shadow-xl border border-gray-100 p-6",onClick:T=>T.stopPropagation()},e.createElement("div",{className:"flex items-start justify-between gap-3"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},"Avis sur lamlioration"),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},C.subject)),e.createElement("button",{type:"button",onClick:()=>A(null),className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Fermer"},e.createElement(jt,{size:16}))),e.createElement("div",{className:"mt-4 space-y-3"},e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},e.createElement("span",null,Mw(C.createdAt)),e.createElement("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${C.readAt?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`},C.readAt?"Lu":"Non lu")),e.createElement("p",{className:"text-sm text-gray-700 whitespace-pre-line"},C.body),C.readAt&&e.createElement("p",{className:"text-xs text-gray-500"},"Lu le ",Mw(C.readAt)))))):e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Ia,{className:"w-8 h-8 text-white"})),e.createElement("p",{className:"text-gray-500"},"Vous devez tre connect pour accder  cette page."),e.createElement(ye,{to:"/login",className:"mt-4 inline-flex items-center gap-2 text-indigo-600 font-medium"},e.createElement(Gr,{size:16}),"Retour  la connexion")))}const hO={product_comment:!0,reply:!0,favorite:!0,rating:!0,product_approval:!0,product_rejection:!0,promotional:!0,shop_review:!0,shop_follow:!0,payment_pending:!0,order_created:!0,order_received:!0,order_reminder:!0,order_delivering:!0,order_delivered:!0,installment_due_reminder:!0,installment_overdue_warning:!0,installment_payment_submitted:!0,installment_payment_validated:!0,installment_sale_confirmation_required:!0,installment_sale_confirmed:!0,installment_completed:!0,installment_product_suspended:!0,order_cancelled:!0,feedback_read:!0,complaint_created:!0,improvement_feedback_created:!0,admin_broadcast:!0,account_restriction:!0,account_restriction_lifted:!0,shop_conversion_approved:!0,shop_conversion_rejected:!0},fce=new Set(["order_received","order_reminder","installment_sale_confirmation_required","installment_payment_submitted","order_address_updated","installment_product_suspended"]),gce=(t,r)=>{const a=String(t?.metadata?.orderId||"").trim();return a?r?.role==="admin"||r?.role==="manager"?`/admin/orders?orderId=${encodeURIComponent(a)}`:fce.has(t?.type)?`/seller/orders/detail/${a}`:`/orders/detail/${a}`:""},hce=t=>{if(!t)return"";const r=new Date(t);if(Number.isNaN(r.getTime()))return"";const n=new Date-r,s=Math.floor(n/(1e3*60)),o=Math.floor(n/(1e3*60*60)),l=Math.floor(n/(1e3*60*60*24));return s<1?" l'instant":s<60?`Il y a ${s} min`:o<24?`Il y a ${o} h`:l===1?"Hier":l<7?`Il y a ${l} j`:r.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:l>365?"numeric":void 0})},bO=({preferences:t,onUpdate:r})=>{const[a,n]=u.useState(!1),[s,o]=u.useState(!1),l=rs(768),c=async m=>{o(!0);const p={...t,[m]:!t[m]};try{const{data:f}=await oe.patch("/users/notification-preferences",p);r(f?.preferences??p)}catch(f){console.error("Failed to update preferences:",f)}finally{o(!1)}};return e.createElement("div",{className:"relative"},e.createElement("button",{onClick:()=>n(!a),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 text-sm font-semibold text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-indigo-300 dark:hover:border-indigo-700 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95"},e.createElement(wu,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Prfrences"),e.createElement(Za,{className:`w-4 h-4 transition-transform duration-200 ${a?"rotate-180":""}`})),a&&e.createElement(e.Fragment,null,e.createElement("div",{className:"fixed inset-0 z-40 bg-black/20 backdrop-blur-sm",onClick:()=>n(!1)}),e.createElement("div",{className:`z-50 overflow-hidden bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border-2 border-gray-200 dark:border-gray-700 ${l?"fixed left-1/2 -translate-x-1/2 top-[4.5rem] w-[calc(100vw-2rem)] max-w-sm":"absolute right-0 top-full mt-2 w-80 sm:w-96"}`},e.createElement("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-600 to-purple-600 px-6 py-5"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h3",{className:"font-bold text-white text-base flex items-center gap-2"},e.createElement(ba,{className:"w-4 h-4"}),"Prfrences"),e.createElement("p",{className:"text-indigo-100 text-xs mt-1"},"Personnalisez vos alertes")),e.createElement("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white transition-colors p-1.5 rounded-lg hover:bg-white/10 active:scale-95"},e.createElement(jt,{className:"w-5 h-5"})))),e.createElement("div",{className:"max-h-96 overflow-y-auto p-4 space-y-1.5"},[{key:"product_comment",label:"Nouveaux commentaires",icon:ca},{key:"reply",label:"Rponses  mes commentaires",icon:ca},{key:"favorite",label:"Ajouts aux favoris",icon:Yr},{key:"rating",label:"Nouvelles notes",icon:zr},{key:"product_approval",label:"Approbations d'annonce",icon:za},{key:"product_rejection",label:"Rejets d'annonce",icon:Ba},{key:"promotional",label:"Promotions appliques",icon:Wa},{key:"shop_review",label:"Avis sur ma boutique",icon:zr},{key:"shop_follow",label:"Nouveaux abonns",icon:tn},{key:"payment_pending",label:"Paiements  valider",icon:Sa},{key:"order_created",label:"Commandes confirmes",icon:ws},{key:"order_delivering",label:"Commandes en livraison",icon:Kr},{key:"order_received",label:"Nouvelles commandes",icon:Ft},{key:"order_reminder",label:"Relances commandes",icon:ld},{key:"order_delivered",label:"Commandes livres",icon:za},{key:"installment_due_reminder",label:"Rappels chances tranche",icon:ld},{key:"installment_overdue_warning",label:"Alertes tranche en retard",icon:Yt},{key:"installment_payment_submitted",label:"Preuves tranche soumises",icon:Sa},{key:"installment_payment_validated",label:"Tranches valides",icon:za},{key:"installment_sale_confirmation_required",label:"Vente tranche  confirmer",icon:ea},{key:"installment_sale_confirmed",label:"Vente tranche confirme",icon:za},{key:"installment_completed",label:"Paiements tranche termins",icon:ba},{key:"installment_product_suspended",label:"Tranche suspendue produit",icon:Ba},{key:"order_cancelled",label:"Commandes annules",icon:Ba},{key:"feedback_read",label:"Avis lus",icon:li},{key:"complaint_created",label:"Nouvelles rclamations",icon:Yt},{key:"improvement_feedback_created",label:"Nouveaux avis d'amlioration",icon:ca},{key:"admin_broadcast",label:"Messages de l'quipe",icon:Kn},{key:"account_restriction",label:"Restrictions de compte",icon:Yt},{key:"account_restriction_lifted",label:"Restrictions leves",icon:za},{key:"shop_conversion_approved",label:"Demande boutique accepte",icon:za},{key:"shop_conversion_rejected",label:"Demande boutique refuse",icon:Ba}].map(({key:m,label:p,icon:f})=>e.createElement("div",{key:m,className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center transition-all duration-200 ${t[m]?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-400 group-hover:bg-gray-200 dark:group-hover:bg-gray-600"}`},e.createElement(f,{className:"w-4 h-4"})),e.createElement("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200"},p)),e.createElement("button",{onClick:()=>c(m),disabled:s,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 ${t[m]?"bg-indigo-600 dark:bg-indigo-500":"bg-gray-300 dark:bg-gray-600"}`},e.createElement("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-300 ${t[m]?"translate-x-6":"translate-x-1"}`}))))))))};function bce(){const t=wa(),{user:r}=u.useContext(Sr),{counts:a,loading:n,error:s,updateCounts:o}=sj(!!r,{skipRefreshEvent:!0}),l=a.alerts||[],[c,m]=u.useState(!1),[p,f]=u.useState(""),[g,b]=u.useState("all"),[x,v]=u.useState(()=>({...hO})),[E,y]=u.useState(!1),w=rs(768);u.useEffect(()=>{if(a?.preferences){const j={...hO};Object.keys(j).forEach(K=>{typeof a.preferences[K]=="boolean"&&(j[K]=a.preferences[K])}),v(K=>Object.keys(j).some(V=>j[V]!==K[V])?j:K)}},[a?.preferences]);const k={product_comment:{label:"Commentaire",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",icon:e.createElement(ca,{className:"w-4 h-4"})},reply:{label:"Rponse",badgeClass:"bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800",icon:e.createElement(ca,{className:"w-4 h-4"})},favorite:{label:"Favori",badgeClass:"bg-rose-50 text-rose-700 border border-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800",icon:e.createElement(Yr,{className:"w-4 h-4"})},rating:{label:"Note",badgeClass:"bg-amber-50 text-amber-700 border border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800",icon:e.createElement(zr,{className:"w-4 h-4"})},product_approval:{label:"Approbation",badgeClass:"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:e.createElement(za,{className:"w-4 h-4"})},product_rejection:{label:"Rejet",badgeClass:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:e.createElement(Ba,{className:"w-4 h-4"})},promotional:{label:"Promotion",badgeClass:"bg-orange-50 text-orange-700 border border-orange-200 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-800",icon:e.createElement(Wa,{className:"w-4 h-4"})},shop_review:{label:"Avis boutique",badgeClass:"bg-indigo-50 text-indigo-700 border border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-800",icon:e.createElement(Er,{className:"w-4 h-4"})},shop_follow:{label:"Abonns boutique",badgeClass:"bg-cyan-50 text-cyan-700 border border-cyan-200 dark:bg-cyan-900/30 dark:text-cyan-400 dark:border-cyan-800",icon:e.createElement(tn,{className:"w-4 h-4"})},payment_pending:{label:"Paiement en attente",badgeClass:"bg-yellow-50 text-yellow-700 border border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-800",icon:e.createElement(Sa,{className:"w-4 h-4"})},order_created:{label:"Commande en attente",badgeClass:"bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800",icon:e.createElement(ws,{className:"w-4 h-4"})},order_delivering:{label:"Commande en livraison",badgeClass:"bg-indigo-50 text-indigo-700 border border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-800",icon:e.createElement(Kr,{className:"w-4 h-4"})},order_received:{label:"Nouvelle commande",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",icon:e.createElement(Ft,{className:"w-4 h-4"})},order_reminder:{label:"Relance commande",badgeClass:"bg-amber-50 text-amber-700 border border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800",icon:e.createElement(ld,{className:"w-4 h-4"})},order_delivered:{label:"Commande livre",badgeClass:"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:e.createElement(za,{className:"w-4 h-4"})},installment_due_reminder:{label:"chance tranche",badgeClass:"bg-indigo-50 text-indigo-700 border border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-800",icon:e.createElement(ld,{className:"w-4 h-4"})},installment_overdue_warning:{label:"Tranche en retard",badgeClass:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:e.createElement(Yt,{className:"w-4 h-4"})},installment_payment_submitted:{label:"Preuve soumise",badgeClass:"bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800",icon:e.createElement(Sa,{className:"w-4 h-4"})},installment_payment_validated:{label:"Tranche valide",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",icon:e.createElement(za,{className:"w-4 h-4"})},installment_sale_confirmation_required:{label:"Confirmation de vente",badgeClass:"bg-amber-50 text-amber-700 border border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800",icon:e.createElement(ea,{className:"w-4 h-4"})},installment_sale_confirmed:{label:"Vente confirme",badgeClass:"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:e.createElement(za,{className:"w-4 h-4"})},installment_completed:{label:"Tranches termines",badgeClass:"bg-purple-50 text-purple-700 border border-purple-200 dark:bg-purple-900/30 dark:text-purple-400 dark:border-purple-800",icon:e.createElement(ba,{className:"w-4 h-4"})},installment_product_suspended:{label:"Tranche suspendue",badgeClass:"bg-rose-50 text-rose-700 border border-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800",icon:e.createElement(Ba,{className:"w-4 h-4"})},order_cancelled:{label:"Commande annule",badgeClass:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:e.createElement(Ba,{className:"w-4 h-4"})},feedback_read:{label:"Avis lu",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",icon:e.createElement(li,{className:"w-4 h-4"})},complaint_created:{label:"Nouvelle rclamation",badgeClass:"bg-rose-50 text-rose-700 border border-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800",icon:e.createElement(Yt,{className:"w-4 h-4"})},improvement_feedback_created:{label:"Nouvel avis d'amlioration",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800",icon:e.createElement(ca,{className:"w-4 h-4"})},admin_broadcast:{label:"Message de l'quipe",badgeClass:"bg-violet-50 text-violet-700 border border-violet-200 dark:bg-violet-900/30 dark:text-violet-400 dark:border-violet-800",icon:e.createElement(Kn,{className:"w-4 h-4"})},account_restriction:{label:"Restriction de compte",badgeClass:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:e.createElement(Yt,{className:"w-4 h-4"})},account_restriction_lifted:{label:"Restriction leve",badgeClass:"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:e.createElement(za,{className:"w-4 h-4"})},shop_conversion_approved:{label:"Demande boutique accepte",badgeClass:"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:e.createElement(za,{className:"w-4 h-4"})},shop_conversion_rejected:{label:"Demande boutique refuse",badgeClass:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:e.createElement(Ba,{className:"w-4 h-4"})}},C=u.useMemo(()=>{let j=l;return g==="all"?j=j.filter(K=>x[K.type]!==!1):g==="unread"?j=j.filter(K=>x[K.type]!==!1).filter(K=>K.isNew):j=j.filter(K=>K.type===g),j},[l,x,g]),A=u.useMemo(()=>C.filter(j=>j.isNew),[C]),S=u.useMemo(()=>C.filter(j=>!j.isNew),[C]),P=(j,K,H=!1)=>{const V=j.product?.status,q=gce(j,r),Y=j?.metadata?.orderId?String(j.metadata.orderId).slice(-6):"",z=k[j.type]||{label:"Notification",badgeClass:"bg-gray-100 text-gray-700 border border-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600",icon:e.createElement(Kn,{className:"w-4 h-4"})};return e.createElement("div",{key:j._id,className:`group relative transition-all duration-200 overflow-hidden ${H?`border-b border-gray-100 dark:border-gray-700/80 last:border-b-0 ${K?"bg-indigo-50/50 dark:bg-indigo-950/20":"bg-white dark:bg-gray-800"}`:`rounded-2xl ${K?"bg-gradient-to-br from-white via-white to-indigo-50/30 dark:from-gray-800 dark:via-gray-800 dark:to-indigo-900/10 border-2 border-indigo-300 dark:border-indigo-700 shadow-md hover:shadow-xl":"bg-white/80 dark:bg-gray-800/80 border-2 border-gray-200/80 dark:border-gray-700/80 hover:bg-white dark:hover:bg-gray-800 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600"}`}`},K&&!H&&e.createElement("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600"}),e.createElement("div",{className:H?"pl-4 pr-4 py-3.5 flex gap-3":"p-4 sm:p-5"},H&&K&&e.createElement("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 mt-1.5","aria-hidden":!0}),e.createElement("div",{className:`flex flex-col gap-3 sm:gap-4 ${H?"flex-1 min-w-0":""}`},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-start justify-between gap-3 mb-2.5 sm:mb-3"},e.createElement("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0"},e.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-bold ${z.badgeClass}`},z.icon,e.createElement("span",{className:"hidden sm:inline"},z.label)),e.createElement("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400"},e.createElement(Xt,{className:"w-3.5 h-3.5"}),e.createElement("span",{className:"font-medium"},hce(j.createdAt))),K&&e.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800"},e.createElement("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"}),e.createElement("span",{className:"hidden sm:inline"},"Nouveau"))),e.createElement("div",{className:"flex items-center gap-1.5"},K&&e.createElement("button",{onClick:()=>O([j._id]),className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-semibold text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-lg border border-indigo-200 dark:border-indigo-800 transition-all duration-200 active:scale-95",title:"Marquer comme lu"},e.createElement(li,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Marquer lu")),e.createElement("button",{onClick:()=>R(j._id),className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-semibold text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 rounded-lg border border-red-200 dark:border-red-800 transition-all duration-200 active:scale-95",title:"Supprimer"},e.createElement(is,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Supprimer")))),j.user?.name&&e.createElement("div",{className:"flex items-center gap-2.5 mb-3"},e.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-md ring-2 ring-white dark:ring-gray-800"},j.user.name.charAt(0).toUpperCase()),e.createElement("span",{className:"text-sm font-semibold text-gray-900 dark:text-white"},j.user.name)),j.type==="reply"&&j.parent?.message&&e.createElement("div",{className:"mb-3.5 p-3.5 bg-gradient-to-br from-gray-50 to-gray-100/50 dark:from-gray-700/50 dark:to-gray-700/30 rounded-xl border-l-4 border-indigo-400"},e.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1.5 font-semibold uppercase tracking-wide flex items-center gap-1.5"},e.createElement(ca,{className:"w-3 h-3"}),"Votre commentaire"),e.createElement("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic leading-relaxed"},'"',j.parent.message,'"')),e.createElement("p",{className:"text-sm sm:text-base text-gray-800 dark:text-gray-200 leading-relaxed mb-3.5 font-medium"},j.message),j.type==="shop_review"&&j.metadata?.rating&&e.createElement("div",{className:"flex items-center gap-2 mb-3 px-3.5 py-2.5 bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-900/20 dark:to-amber-900/10 rounded-xl border border-amber-200 dark:border-amber-800"},e.createElement(zr,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),e.createElement("span",{className:"text-sm font-bold text-amber-700 dark:text-amber-400"},"Note : ",Number(j.metadata.rating).toFixed(1),"/5")),j.type==="shop_review"&&j.metadata?.comment&&e.createElement("div",{className:"p-3.5 bg-gradient-to-br from-gray-50 to-gray-100/50 dark:from-gray-700/50 dark:to-gray-700/30 rounded-xl border-l-4 border-indigo-400 mb-3.5"},e.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1.5 font-semibold uppercase tracking-wide flex items-center gap-1.5"},e.createElement(ca,{className:"w-3 h-3"}),"Commentaire"),e.createElement("p",{className:"text-sm text-gray-700 dark:text-gray-300 italic leading-relaxed"},'"',j.metadata.comment,'"')),j.type==="payment_pending"&&(r?.role==="admin"||r?.role==="manager")&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:"/admin/payment-verification",className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg active:scale-95"},e.createElement(Sa,{className:"w-4 h-4"}),e.createElement("span",{className:"truncate"},"Vrifier paiements"))),j.type==="complaint_created"&&(r?.role==="admin"||r?.role==="manager"||r?.canManageComplaints)&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:"/admin/complaints",className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-rose-700 dark:text-rose-400 bg-gradient-to-br from-rose-50 to-rose-100/50 dark:from-rose-900/20 dark:to-rose-900/10 hover:from-rose-100 dark:hover:from-rose-900/30 transition-all duration-200 border-2 border-rose-200 dark:border-rose-800 active:scale-95"},e.createElement(Yt,{className:"w-4 h-4"}),e.createElement("span",{className:"truncate"},"Traiter les rclamations"))),j.type==="improvement_feedback_created"&&(r?.role==="admin"||r?.canReadFeedback)&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:"/admin/feedback",className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-emerald-700 dark:text-emerald-400 bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-900/10 hover:from-emerald-100 dark:hover:from-emerald-900/30 transition-all duration-200 border-2 border-emerald-200 dark:border-emerald-800 active:scale-95"},e.createElement(ca,{className:"w-4 h-4"}),e.createElement("span",{className:"truncate"},"Voir les avis d'amlioration"))),j.type==="order_cancelled"&&e.createElement("div",{className:"mt-4 space-y-3"},j.metadata?.reason&&e.createElement("div",{className:"p-3.5 bg-gradient-to-br from-red-50 to-red-100/50 dark:from-red-900/20 dark:to-red-900/10 rounded-xl border-l-4 border-red-400"},e.createElement("p",{className:"text-xs text-red-600 dark:text-red-400 mb-1.5 font-semibold uppercase tracking-wide flex items-center gap-1.5"},e.createElement(Ba,{className:"w-3 h-3"}),"Raison de l'annulation"),e.createElement("p",{className:"text-sm text-red-700 dark:text-red-300 italic leading-relaxed"},'"',j.metadata.reason,'"'))),q&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:q,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-indigo-700 dark:text-indigo-400 bg-gradient-to-br from-indigo-50 to-indigo-100/50 dark:from-indigo-900/20 dark:to-indigo-900/10 hover:from-indigo-100 hover:to-indigo-100 dark:hover:from-indigo-900/30 dark:hover:to-indigo-900/20 transition-all duration-200 border-2 border-indigo-200 dark:border-indigo-800 active:scale-95"},e.createElement(ea,{className:"w-4 h-4"}),e.createElement("span",{className:"truncate"},"Voir la commande",Y?` #${Y}`:""))),j.product&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700 space-y-2"},e.createElement("button",{type:"button",onClick:()=>{t(Dr(j.product)),K&&O([j._id])},className:"w-full sm:w-auto inline-flex items-center justify-center sm:justify-start gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-indigo-700 dark:text-indigo-400 bg-gradient-to-br from-indigo-50 to-indigo-100/50 dark:from-indigo-900/20 dark:to-indigo-900/10 hover:from-indigo-100 hover:to-indigo-100 dark:hover:from-indigo-900/30 dark:hover:to-indigo-900/20 transition-all duration-200 border-2 border-indigo-200 dark:border-indigo-800 group/link active:scale-95"},e.createElement(Ft,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"truncate flex-1 text-left"},e.createElement("span",{className:"hidden sm:inline"},"Voir l'annonce : "),j.product.title)),V&&V!=="approved"&&e.createElement("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},e.createElement(Yt,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0"}),e.createElement("p",{className:"text-xs font-medium text-amber-700 dark:text-amber-400"},"Annonce actuellement  ",V==="pending"?"En attente":V," "))),!j.product&&j.shop&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700"},e.createElement(ye,{to:Da(j.shop),className:"w-full sm:w-auto inline-flex items-center justify-center sm:justify-start gap-2 px-4 py-2.5 rounded-xl text-sm font-bold text-indigo-700 dark:text-indigo-400 bg-gradient-to-br from-indigo-50 to-indigo-100/50 dark:from-indigo-900/20 dark:to-indigo-900/10 hover:from-indigo-100 hover:to-indigo-100 dark:hover:from-indigo-900/30 dark:hover:to-indigo-900/20 transition-all duration-200 border-2 border-indigo-200 dark:border-indigo-800 group/link active:scale-95"},e.createElement(Er,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"truncate flex-1 text-left"},e.createElement("span",{className:"hidden sm:inline"},"Voir la boutique : "),j.shop.shopName||j.shop.name||"Boutique")))))))},T=async()=>{if(!(!A.length||c)){m(!0),f("");try{await oe.patch("/users/notifications/read"),o(j=>({...j,alerts:(j.alerts||[]).map(K=>({...K,isNew:!1})),unreadCount:0,commentAlerts:0})),lx()}catch(j){console.error(j),f(j.response?.data?.message||j.message||"Impossible de marquer les notifications comme lues.")}finally{m(!1)}}},O=async j=>{if(!(!Array.isArray(j)||!j.length))try{await oe.patch("/users/notifications/read",{notificationIds:j});const K=new Set(j);o(H=>{const V=(H.alerts||[]).map(Y=>K.has(Y._id)?{...Y,isNew:!1}:Y),q=(H.alerts||[]).filter(Y=>K.has(Y._id)&&Y.isNew).length;return{...H,alerts:V,unreadCount:Math.max(0,(H.unreadCount||0)-q),commentAlerts:Math.max(0,(H.commentAlerts||0)-q)}}),lx()}catch(K){console.error("Failed to mark notification as read:",K)}},R=async j=>{try{await oe.delete(`/users/notifications/${j}`),o(K=>{const V=(K.alerts||[]).find(q=>q._id===j)?.isNew===!0;return{...K,alerts:(K.alerts||[]).filter(q=>q._id!==j),unreadCount:V?Math.max(0,(K.unreadCount||0)-1):K.unreadCount,commentAlerts:V?Math.max(0,(K.commentAlerts||0)-1):K.commentAlerts}}),lx()}catch(K){console.error("Failed to delete notification:",K)}},D=[{key:"all",label:"Toutes",count:l.length,icon:Kn},{key:"unread",label:"Non lues",count:A.length,icon:H4},{key:"product_comment",label:"Commentaires",count:l.filter(j=>j.type==="product_comment").length,icon:ca},{key:"reply",label:"Rponses",count:l.filter(j=>j.type==="reply").length,icon:ca},{key:"favorite",label:"Favoris",count:l.filter(j=>j.type==="favorite").length,icon:Yr},{key:"rating",label:"Notes",count:l.filter(j=>j.type==="rating").length,icon:zr},{key:"product_approval",label:"Approbations",count:l.filter(j=>j.type==="product_approval").length,icon:za},{key:"product_rejection",label:"Rejets",count:l.filter(j=>j.type==="product_rejection").length,icon:Ba},{key:"promotional",label:"Promotions",count:l.filter(j=>j.type==="promotional").length,icon:Wa},{key:"shop_review",label:"Avis boutique",count:l.filter(j=>j.type==="shop_review").length,icon:Er},{key:"payment_pending",label:"Paiements",count:l.filter(j=>j.type==="payment_pending").length,icon:Sa},{key:"order_created",label:"Commandes confirmes",count:l.filter(j=>j.type==="order_created").length,icon:ws},{key:"order_delivering",label:"En livraison",count:l.filter(j=>j.type==="order_delivering").length,icon:Kr},{key:"order_received",label:"Nouvelles commandes",count:l.filter(j=>j.type==="order_received").length,icon:Ft},{key:"order_reminder",label:"Relances",count:l.filter(j=>j.type==="order_reminder").length,icon:ld},{key:"order_delivered",label:"Livres",count:l.filter(j=>j.type==="order_delivered").length,icon:za},{key:"installment_due_reminder",label:"chances tranche",count:l.filter(j=>j.type==="installment_due_reminder").length,icon:ld},{key:"installment_overdue_warning",label:"Retards tranche",count:l.filter(j=>j.type==="installment_overdue_warning").length,icon:Yt},{key:"installment_payment_submitted",label:"Preuves tranche",count:l.filter(j=>j.type==="installment_payment_submitted").length,icon:Sa},{key:"installment_payment_validated",label:"Tranches valides",count:l.filter(j=>j.type==="installment_payment_validated").length,icon:za},{key:"installment_sale_confirmation_required",label:"Ventes  confirmer",count:l.filter(j=>j.type==="installment_sale_confirmation_required").length,icon:ea},{key:"installment_sale_confirmed",label:"Ventes confirmes",count:l.filter(j=>j.type==="installment_sale_confirmed").length,icon:za},{key:"installment_completed",label:"Paiements termins",count:l.filter(j=>j.type==="installment_completed").length,icon:ba},{key:"installment_product_suspended",label:"Tranche suspendue",count:l.filter(j=>j.type==="installment_product_suspended").length,icon:Ba},{key:"order_cancelled",label:"Annules",count:l.filter(j=>j.type==="order_cancelled").length,icon:Ba},{key:"feedback_read",label:"Avis lus",count:l.filter(j=>j.type==="feedback_read").length,icon:li},{key:"complaint_created",label:"Rclamations",count:l.filter(j=>j.type==="complaint_created").length,icon:Yt},{key:"improvement_feedback_created",label:"Avis d'amlioration",count:l.filter(j=>j.type==="improvement_feedback_created").length,icon:ca},{key:"admin_broadcast",label:"Messages quipe",count:l.filter(j=>j.type==="admin_broadcast").length,icon:Kn},{key:"account_restriction",label:"Restrictions",count:l.filter(j=>j.type==="account_restriction").length,icon:Yt},{key:"account_restriction_lifted",label:"Restrictions leves",count:l.filter(j=>j.type==="account_restriction_lifted").length,icon:za},{key:"shop_conversion_approved",label:"Boutique accepte",count:l.filter(j=>j.type==="shop_conversion_approved").length,icon:za},{key:"shop_conversion_rejected",label:"Boutique refuse",count:l.filter(j=>j.type==="shop_conversion_rejected").length,icon:Ba}],$=({variant:j="stack",closeOnSelect:K=!1}={})=>D.map(({key:H,label:V,count:q,icon:Y})=>{const z=g===H,L=j==="pills",Q=L?`flex-shrink-0 inline-flex items-center gap-2 whitespace-nowrap rounded-full border-2 px-3.5 py-2 text-sm font-bold transition-all duration-200 active:scale-95 ${z?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white border-transparent shadow-lg":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-md"}`:`w-full flex items-center justify-between px-3.5 py-3 rounded-xl text-sm font-semibold transition-all duration-200 active:scale-[0.98] ${z?"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 text-indigo-700 dark:text-indigo-400 border-2 border-indigo-300 dark:border-indigo-700 shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-700"}`,B=L?`text-xs font-bold px-2 py-0.5 rounded-full ${z?"bg-white/25 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`:`px-2 py-0.5 rounded-full text-xs font-bold ${z?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`;return e.createElement("button",{key:`${j}-${H}`,onClick:()=>{b(H),K&&y(!1)},className:Q},e.createElement("span",{className:"flex items-center gap-2"},Y&&e.createElement(Y,{className:"w-4 h-4"}),V),e.createElement("span",{className:B},q))});return r?e.createElement("main",{className:"min-h-screen bg-[#f2f2f7] dark:bg-black"},e.createElement("div",{className:`max-w-7xl mx-auto ${w?"px-0 pb-8":"px-4 py-6 sm:px-6 lg:px-8"} space-y-6`},w&&e.createElement("header",{className:"sticky top-0 z-10 bg-[#f2f2f7]/95 dark:bg-black/95 backdrop-blur-xl border-b border-gray-200/80 dark:border-gray-800 safe-area-top"},e.createElement("div",{className:"px-4 pt-4 pb-3"},e.createElement("h1",{className:"text-[34px] font-bold text-gray-900 dark:text-white tracking-tight"},"Notifications"),e.createElement("p",{className:"text-[15px] text-gray-500 dark:text-gray-400 mt-0.5"},A.length>0?`${A.length} non lue${A.length>1?"s":""}`:`${l.length} notification${l.length!==1?"s":""}`)),e.createElement("div",{className:"px-4 pb-3"},e.createElement("div",{className:"inline-flex p-1 rounded-[10px] bg-gray-200 dark:bg-gray-800"},e.createElement("button",{type:"button",onClick:()=>b("all"),className:`min-h-[36px] min-w-[80px] px-4 rounded-[8px] text-[13px] font-semibold transition-all ${g==="all"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}`},"Toutes"),e.createElement("button",{type:"button",onClick:()=>b("unread"),className:`min-h-[36px] min-w-[80px] px-4 rounded-[8px] text-[13px] font-semibold transition-all ${g==="unread"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}`},"Non lues"))),e.createElement("div",{className:"flex items-center justify-between px-4 pb-3 gap-2"},e.createElement(bO,{preferences:x,onUpdate:v}),A.length>0&&e.createElement("button",{type:"button",onClick:T,disabled:c,className:"text-[15px] font-semibold text-blue-600 dark:text-blue-400 active:opacity-70 disabled:opacity-50"},c?"...":"Tout marquer lu"))),!w&&e.createElement("header",{className:"bg-gradient-to-br from-white via-white to-indigo-50/50 dark:from-gray-800 dark:via-gray-800 dark:to-indigo-900/20 rounded-3xl p-6 sm:p-8 border-2 border-gray-200/60 dark:border-gray-700/50 shadow-xl"},e.createElement("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between"},e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg ring-4 ring-indigo-100 dark:ring-indigo-900/30"},e.createElement(Kn,{className:"w-7 h-7 text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl sm:text-4xl font-black bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 dark:from-white dark:via-indigo-200 dark:to-purple-200 bg-clip-text text-transparent"},"Notifications"),e.createElement("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 font-medium"},A.length>0?`${A.length} nouvelle${A.length>1?"s":""} notification${A.length>1?"s":""}`:"Toutes vos notifications sont  jour")))),e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},e.createElement(bO,{preferences:x,onUpdate:v}),A.length>0&&e.createElement("button",{type:"button",onClick:T,disabled:c,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 px-5 py-3 text-sm font-bold text-white transition-all hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl active:scale-95"},c?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.createElement("span",null,"Traitement...")):e.createElement(e.Fragment,null,e.createElement(li,{className:"w-5 h-5"}),e.createElement("span",null,"Tout marquer comme lu")))))),w&&e.createElement("div",{className:"px-4"},e.createElement("button",{type:"button",onClick:()=>y(j=>!j),className:"w-full flex items-center justify-between py-3.5 px-4 rounded-xl bg-white dark:bg-gray-800 text-[17px] font-medium text-gray-900 dark:text-white active:bg-gray-100 dark:active:bg-gray-700"},e.createElement("span",{className:"flex items-center gap-2"},e.createElement(ls,{className:"w-5 h-5 text-gray-500"}),"Filtres"),e.createElement(Ar,{className:`w-5 h-5 text-gray-400 transition-transform ${E?"rotate-90":""}`})),E&&e.createElement("div",{className:"mt-2 p-4 rounded-xl bg-white dark:bg-gray-800 space-y-1"},$({variant:"stack",closeOnSelect:!0}))),e.createElement("div",{className:"space-y-4 lg:hidden hidden sm:block"},e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl p-5 text-white shadow-xl"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(Kn,{className:"w-5 h-5 opacity-90"}),e.createElement("p",{className:"text-xs uppercase tracking-wide text-white/80 font-bold"},"Total")),e.createElement("p",{className:"text-4xl font-black"},l.length)),e.createElement("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-5 text-white shadow-xl"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),e.createElement("p",{className:"text-xs uppercase tracking-wide text-white/80 font-bold"},"Non lues")),e.createElement("p",{className:"text-4xl font-black"},A.length))),e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border-2 border-gray-200 dark:border-gray-700 p-5 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(ls,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.createElement("h3",{className:"text-base font-bold text-gray-900 dark:text-white"},"Filtres")),e.createElement("button",{type:"button",onClick:()=>y(j=>!j),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-semibold text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors active:scale-95"},E?"Masquer":"Voir tout",e.createElement(Za,{className:`w-4 h-4 transition-transform duration-200 ${E?"rotate-180":""}`}))),e.createElement("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},$({variant:"pills"})),E&&e.createElement("div",{className:"mt-4 pt-4 border-t-2 border-gray-200 dark:border-gray-700 space-y-1.5"},$({variant:"stack",closeOnSelect:!0})))),e.createElement("div",{className:"flex flex-col lg:flex-row gap-6"},e.createElement("div",{className:"hidden lg:block lg:w-80 flex-shrink-0"},e.createElement("div",{className:"sticky top-6 space-y-4"},e.createElement("div",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 rounded-3xl p-6 text-white shadow-2xl"},e.createElement("div",{className:"flex items-center gap-3 mb-5"},e.createElement("div",{className:"w-11 h-11 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center ring-2 ring-white/30"},e.createElement(H4,{className:"w-6 h-6"})),e.createElement("h3",{className:"font-black text-xl"},"Aperu")),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex justify-between items-center p-4 bg-white/15 backdrop-blur-sm rounded-xl border border-white/20"},e.createElement("span",{className:"text-white/90 font-semibold"},"Total"),e.createElement("span",{className:"font-black text-2xl"},l.length)),e.createElement("div",{className:"flex justify-between items-center p-4 bg-white/15 backdrop-blur-sm rounded-xl border border-white/20"},e.createElement("span",{className:"text-white/90 font-semibold"},"Non lues"),e.createElement("span",{className:"font-black text-2xl bg-white/30 backdrop-blur-sm px-3 py-1 rounded-lg"},A.length)))),e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border-2 border-gray-200 dark:border-gray-700 p-5 shadow-lg"},e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement(ls,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),e.createElement("h3",{className:"font-bold text-gray-900 dark:text-white"},"Filtrer par")),e.createElement("div",{className:"space-y-1.5 max-h-[600px] overflow-y-auto"},$())))),e.createElement("div",{className:"flex-1 min-w-0"},n&&e.createElement("div",{className:"flex items-center justify-center py-20"},e.createElement("div",{className:"flex flex-col items-center gap-4"},e.createElement("div",{className:"w-14 h-14 border-4 border-indigo-200 dark:border-indigo-800 border-t-indigo-600 dark:border-t-indigo-400 rounded-full animate-spin"}),e.createElement("span",{className:"text-gray-600 dark:text-gray-400 font-semibold"},"Chargement des notifications..."))),s&&e.createElement("div",{className:"bg-gradient-to-br from-red-50 to-red-100/50 dark:from-red-900/20 dark:to-red-900/10 border-2 border-red-300 dark:border-red-800 rounded-3xl p-8 text-center shadow-xl"},e.createElement("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4"},e.createElement(Yt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})),e.createElement("p",{className:"text-red-700 dark:text-red-400 font-bold text-lg mb-2"},"Erreur de chargement"),e.createElement("p",{className:"text-red-600 dark:text-red-500 text-sm"},s)),p&&e.createElement("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-4 mb-6"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.createElement("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium"},p))),A.length>0&&(g==="all"||g==="unread")&&e.createElement("section",{className:w?"mb-4":"space-y-4 mb-8"},!w&&e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement("div",{className:"w-1.5 h-10 bg-gradient-to-b from-indigo-600 to-purple-600 rounded-full shadow-lg"}),e.createElement("h2",{className:"text-2xl sm:text-3xl font-black text-gray-900 dark:text-white"},"Non lues"),e.createElement("span",{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white text-xs font-bold px-3.5 py-1.5 rounded-full shadow-lg ring-2 ring-red-100 dark:ring-red-900/30"},A.length)),e.createElement("div",{className:w?"rounded-2xl overflow-hidden bg-white dark:bg-gray-800 shadow-sm":"space-y-4"},A.map(j=>P(j,!0,w)))),S.length>0&&(g==="all"||g!=="unread")&&e.createElement("section",{className:w?"":"space-y-4"},!w&&e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement("div",{className:"w-1.5 h-10 bg-gray-400 rounded-full"}),e.createElement("h2",{className:"text-2xl sm:text-3xl font-black text-gray-900 dark:text-white"},g==="all"?"Notifications lues":"Notifications")),e.createElement("div",{className:w&&A.length>0?"mt-4 rounded-2xl overflow-hidden bg-white dark:bg-gray-800 shadow-sm":w?"rounded-2xl overflow-hidden bg-white dark:bg-gray-800 shadow-sm":"space-y-4"},S.map(j=>P(j,!1,w)))),!n&&!s&&C.length===0&&e.createElement("div",{className:"text-center py-20"},e.createElement("div",{className:"w-28 h-28 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl"},e.createElement(h2,{className:"w-14 h-14 text-gray-400 dark:text-gray-500"})),e.createElement("h3",{className:"text-2xl sm:text-3xl font-black text-gray-900 dark:text-white mb-3"},g==="all"?"Aucune notification":"Aucune notification correspondante"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto leading-relaxed"},g==="all"?"Les notifications concernant vos annonces et commentaires apparatront ici.":"Aucune notification ne correspond aux filtres slectionns.")))))):e.createElement("main",{className:"max-w-4xl mx-auto p-6"},e.createElement("div",{className:"text-center py-16 sm:py-20"},e.createElement("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl"},e.createElement(Kn,{className:"w-10 h-10 sm:w-12 sm:h-12 text-indigo-600 dark:text-indigo-400"})),e.createElement("h2",{className:"text-2xl sm:text-3xl font-black text-gray-900 dark:text-white mb-3"},"Connectez-vous"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 max-w-sm mx-auto leading-relaxed"},"Connectez-vous  votre compte pour consulter vos notifications et rester inform des dernires activits.")))}const jw=12,Rw=[{value:"all",label:"Tous les prix",min:null,max:null},{value:"0-10000",label:"0 - 10 000 FCFA",min:0,max:1e4},{value:"10000-50000",label:"10 000 - 50 000 FCFA",min:1e4,max:5e4},{value:"50000-100000",label:"50 000 - 100 000 FCFA",min:5e4,max:1e5},{value:"100000-500000",label:"100 000 - 500 000 FCFA",min:1e5,max:5e5},{value:"500000+",label:"500 000+ FCFA",min:5e5,max:null}];function xce(){const t=wa(),{favorites:r,loading:a}=u.useContext(em),[n,s]=u.useState(1),[o,l]=u.useState(""),[c,m]=u.useState("all"),[p,f]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=767),g=u.useMemo(()=>{const k=new Set,C=[];return r.forEach(A=>{const S=A?.category;if(S&&!k.has(S)){k.add(S);const P=Ug(S);C.push({value:S,label:P?.label||S})}}),C.sort((A,S)=>A.label.localeCompare(S.label))},[r]),b=u.useMemo(()=>Rw.find(k=>k.value===c)||Rw[0],[c]),x=u.useMemo(()=>r.filter(k=>{if(o&&(k?.category||"")!==o)return!1;const C=Number(k?.price??0);return!(b.min!=null&&C<b.min||b.max!=null&&C>b.max)}),[r,o,b]),v=r.length>0,E=Math.max(1,Math.ceil(x.length/jw));u.useEffect(()=>{s(1)},[r.length,o,c]),u.useEffect(()=>{const k=()=>{typeof window>"u"||f(window.innerWidth<=767)};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),u.useEffect(()=>{if(!p||n>=E)return;const k=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&s(A=>Math.min(A+1,E))};return window.addEventListener("scroll",k,{passive:!0}),()=>window.removeEventListener("scroll",k)},[p,n,E]),u.useEffect(()=>{n>E&&s(E)},[n,E]);const y=u.useMemo(()=>{const k=n*jw;return x.slice(0,k)},[x,n]),w=()=>{if(p||x.length<=jw)return null;const k=Math.min(5,E),C=Math.floor(k/2);let A=Math.max(1,n-C),S=Math.min(E,A+k-1);A=Math.max(1,S-k+1);const P=Array.from({length:S-A+1},(T,O)=>A+O);return e.createElement("div",{className:"flex justify-center items-center space-x-2 mt-8 mb-4 pb-[88px] md:pb-0"},e.createElement("button",{onClick:()=>s(T=>Math.max(1,T-1)),disabled:n<=1,className:"flex items-center justify-center min-w-[44px] min-h-[44px] rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors tap-feedback"},""),A>1&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>s(1),className:`flex items-center justify-center min-w-[44px] min-h-[44px] rounded-lg border transition-colors tap-feedback ${n===1?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},"1"),A>2&&e.createElement("span",{className:"px-1 text-gray-500"},"...")),P.map(T=>e.createElement("button",{key:T,onClick:()=>s(T),className:`flex items-center justify-center w-10 h-10 rounded-lg border transition-colors ${n===T?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},T)),S<E&&e.createElement(e.Fragment,null,S<E-1&&e.createElement("span",{className:"px-1 text-gray-500"},"..."),e.createElement("button",{onClick:()=>s(E),className:`flex items-center justify-center min-w-[44px] min-h-[44px] rounded-lg border transition-colors tap-feedback ${n===E?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 hover:bg-gray-50"}`},E)),e.createElement("button",{onClick:()=>s(T=>Math.min(E,T+1)),disabled:n>=E,className:"flex items-center justify-center min-w-[44px] min-h-[44px] rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors tap-feedback"},""))};return e.createElement("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 space-y-4 sm:space-y-8 pb-12 md:pb-16"},e.createElement("header",{className:"text-center sm:text-left"},e.createElement("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 mb-4 text-sm font-semibold text-gray-600 hover:text-indigo-600 transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour"),e.createElement("p",{className:"text-sm uppercase tracking-wide text-indigo-600 font-semibold"},"Vos favoris"),e.createElement("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 mt-1"},"Articles enregistrs"),e.createElement("p",{className:"text-xs sm:text-base text-gray-600 mt-2"},"Retrouvez rapidement les produits que vous avez ajouts  votre liste de souhaits.")),a?e.createElement("div",{className:"rounded-3xl border border-dashed border-gray-200 bg-white px-6 py-12 text-center shadow-sm"},e.createElement("p",{className:"text-gray-600"},"Chargement de vos favoris")):v?e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-wrap items-center gap-3 p-4 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 shadow-sm"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300"},e.createElement(ls,{className:"w-4 h-4 text-indigo-500"}),"Filtres"),e.createElement("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Wa,{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":!0}),e.createElement("select",{value:o,onChange:k=>l(k.target.value),className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm py-2 pl-3 pr-8 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 min-w-[160px]","aria-label":"Filtrer par catgorie"},e.createElement("option",{value:""},"Toutes les catgories"),g.map(k=>e.createElement("option",{key:k.value,value:k.value},k.label)))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Ea,{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":!0}),e.createElement("select",{value:c,onChange:k=>m(k.target.value),className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm py-2 pl-3 pr-8 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 min-w-[180px]","aria-label":"Filtrer par prix"},Rw.map(k=>e.createElement("option",{key:k.value,value:k.value},k.label)))),(o||c!=="all")&&e.createElement("button",{type:"button",onClick:()=>{l(""),m("all"),s(1)},className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline"},"Rinitialiser")),e.createElement("p",{className:"w-full sm:w-auto text-xs text-gray-500 dark:text-gray-400 mt-1 sm:mt-0"},x.length," article",x.length!==1?"s":"",(o||c!=="all")&&` sur ${r.length}`)),x.length===0?e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 px-6 py-10 text-center"},e.createElement("p",{className:"text-gray-700 dark:text-gray-300 font-medium"},"Aucun favori ne correspond aux filtres."),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Modifiez les filtres ou rinitialisez."),e.createElement("button",{type:"button",onClick:()=>{l(""),m("all"),s(1)},className:"mt-3 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:underline"},"Rinitialiser les filtres")):e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 lg:gap-5"},y.map(k=>e.createElement(un,{key:k._id,p:k}))),w())):e.createElement("div",{className:"rounded-3xl border border-dashed border-gray-300 bg-white px-6 py-12 text-center shadow-sm"},e.createElement("p",{className:"text-lg font-semibold text-gray-700"},"Aucun favori pour le moment"),e.createElement("p",{className:"text-gray-500 mt-2"},"Explorez le catalogue et cliquez sur le coeur d'un produit pour le retrouver ici."),e.createElement(ye,{to:"/",className:"inline-flex items-center justify-center rounded-full bg-indigo-600 px-6 py-3 font-medium text-white mt-6 hover:bg-indigo-700 transition"},"Dcouvrir les produits")))}const yce={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"},H$=new Intl.NumberFormat("fr-FR"),Qm=t=>{const r=Number(t);return Number.isFinite(r)?H$.format(r):"0"},xO=t=>{const r=Number(t);return Number.isFinite(r)?`${H$.format(r)} FCFA`:"0 FCFA"},H0=t=>{if(!t)return"Date inconnue";const r=new Date(t);return Number.isNaN(r.getTime())?"Date inconnue":r.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})},sd=t=>{const r=Number(t);return Number.isFinite(r)?r.toFixed(1).replace(".",","):"0,0"},vce=[5,4,3,2,1];function Ece(){const{slug:t}=Jo(),{user:r,updateUser:a}=u.useContext(Sr),n=wa(),[s,o]=u.useState(null),[l,c]=u.useState([]),[m,p]=u.useState([]),[f,g]=u.useState(!0),[b,x]=u.useState(""),[v,E]=u.useState("all"),[y,w]=u.useState(0),[k,C]=u.useState(!1),[A,S]=u.useState(!1),[P,T]=u.useState(0),[O,R]=u.useState({rating:0,comment:""}),[D,$]=u.useState(!1),[j,K]=u.useState(""),[H,V]=u.useState(""),[q,Y]=u.useState(null),[z,L]=u.useState(!0),[Q,B]=u.useState(!1),[ae,te]=u.useState([]),[ge,ue]=u.useState(!1),[Ee,fe]=u.useState(""),[re,U]=u.useState([]),[W,me]=u.useState(!1),[ne,ee]=u.useState(""),ve=s?.slug||s?._id||t,be=cs(),J=rs();u.useEffect(()=>{let we=!0;return(async()=>{try{g(!0);const{data:pt}=await oe.get(`/shops/${t}`);if(!we)return;o(pt.shop);const Le=Array.isArray(pt.products)?pt.products:[];if(c(Le),p(Array.isArray(pt.recentReviews)?pt.recentReviews:[]),x(""),Le.length>0){const pe=Le.filter(Pe=>Number(Pe.salesCount||0)>0).sort((Pe,ft)=>Number(ft.salesCount||0)-Number(Pe.salesCount||0)).slice(0,5);U(pe),me(!1)}}catch(pt){if(!we)return;x(pt.response?.data?.message||pt.message||"Boutique introuvable."),o(null),c([]),p([]),U([]),me(!1)}finally{we&&g(!1)}})(),()=>{we=!1}},[t,P]),u.useEffect(()=>{if(!s?._id||re.length>0)return;if(l.length>0){const Le=l.filter(pe=>Number(pe.salesCount||0)>0).sort((pe,Pe)=>Number(Pe.salesCount||0)-Number(pe.salesCount||0)).slice(0,5);if(Le.length>0){U(Le);return}}let we=!0;const vt=async()=>{me(!0),ee("");try{const{data:Le}=await oe.get(`/shops/${t}`,{params:{limit:100}});if(!we)return;const pe=Array.isArray(Le?.products)?Le.products:[],Pe=[...l,...pe],ft=Array.from(new Map(Pe.map(Lt=>[String(Lt._id),Lt])).values()),ht=ft.filter(Lt=>Number(Lt.salesCount||0)>0).sort((Lt,nr)=>Number(nr.salesCount||0)-Number(Lt.salesCount||0)).slice(0,5);U(ht),ht.length===0&&ft.length>0&&ee("Aucun produit avec des ventes enregistres.")}catch(Le){if(!we)return;console.error("Error fetching top selling products:",Le),ee("Impossible de charger les produits les plus vendus.")}finally{we&&me(!1)}};return l.filter(Le=>Number(Le.salesCount||0)>0).length<5&&vt(),()=>{we=!1}},[s?._id,t]),u.useEffect(()=>{E("all")},[t]),u.useEffect(()=>{K(""),V("")},[t,r]),u.useEffect(()=>{let we=!0;return!s?._id||!r?(Y(null),R({rating:0,comment:""}),()=>{we=!1}):((async()=>{try{const{data:pt}=await oe.get(`/shops/${ve}/reviews/user`);if(!we)return;Y(pt),R({rating:pt.rating||0,comment:pt.comment||""}),L(!pt.comment?.trim())}catch(pt){if(!we)return;pt.response?.status===404&&(Y(null),R({rating:0,comment:""}),L(!0))}})(),()=>{we=!1})},[s?._id,t,r,P]),u.useEffect(()=>{if(!s){w(0);return}w(Number(s.followersCount??0))},[s?.followersCount,s]),u.useEffect(()=>{if(!s?._id||!r){C(!1);return}const vt=(Array.isArray(r.followingShops)?r.followingShops:[]).some(pt=>String(pt)===String(s._id));C(vt)},[s?._id,r?.followingShops]);const Ge=u.useMemo(()=>{const we=new Set;return l.reduce((vt,pt)=>{const Le=pt?.category,pe=typeof Le=="string"?Le.trim():"";return!pe||we.has(pe)||(we.add(pe),vt.push(pe)),vt},[])},[l]),je=u.useMemo(()=>!v||v==="all"?l:l.filter(we=>{const vt=we?.category;return(typeof vt=="string"?vt.trim():"")===v}),[v,l]),tt=!!q?.comment?.trim(),At=!tt||z;if(f)return e.createElement("main",{className:"max-w-5xl mx-auto px-4 py-10"},e.createElement("p",{className:"text-gray-600"},"Chargement de la boutique"));if(b)return e.createElement("main",{className:"max-w-5xl mx-auto px-4 py-10 space-y-3"},e.createElement("p",{className:"text-red-600 font-semibold"},b),e.createElement(ye,{to:"/",className:"text-indigo-600 underline"},"Retourner  l'accueil"));if(!s)return null;s.phone&&(r?s.phone:`${t}`);const He=Number(s.ratingAverage||0),Tt=Number(s.ratingCount||0),Re=Array.isArray(s.shopHours)?s.shopHours:[],et=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()]||"monday";s.productCount??l.length;const gt=r&&s.phone?e.createElement("a",{href:`tel:${s.phone}`,className:"group inline-flex items-center justify-center gap-2 rounded-xl bg-white/20 px-6 py-3 text-sm font-bold text-white backdrop-blur-md transition-all duration-300 hover:bg-white/30 hover:scale-105 hover:shadow-lg"},e.createElement(Es,{size:18,className:"transition-transform duration-300 group-hover:scale-110"}),"Appeler la boutique"):e.createElement(ye,{to:"/login",state:{from:`/shop/${t}`},className:"inline-flex items-center justify-center gap-2 rounded-xl border-2 border-white/60 bg-white/10 px-6 py-3 text-sm font-bold text-white backdrop-blur-md transition-all duration-300 hover:border-white hover:bg-white/20 hover:scale-105"},e.createElement(Es,{size:18}),"Connectez-vous pour appeler"),Ze=s?.shopVerified?k?"Boutique suivie":"Suivre la boutique":"Boutique non certifie",xt=async()=>{if(!(!s?._id||A)){if(!r){n("/login",{state:{from:`/shop/${t}`}});return}if(s.shopVerified){S(!0);try{const we=k?await oe.delete(`/users/shops/${s._id}/follow`):await oe.post(`/users/shops/${s._id}/follow`);if(C(!k),w(we.data?.followersCount??y),typeof a=="function"){const pt=(Array.isArray(r.followingShops)?r.followingShops:[]).map(pe=>String(pe)),Le=k?pt.filter(pe=>pe!==String(s._id)):Array.from(new Set([...pt,String(s._id)]));a({followingShops:Le})}}catch(we){console.error(we)}finally{S(!1)}}}},Dt=e.createElement("button",{type:"button",onClick:xt,disabled:A||!s?.shopVerified,className:`group inline-flex items-center justify-center gap-2 rounded-xl border-2 px-6 py-3 text-sm font-bold transition-all duration-300 ${k?"border-white/60 bg-gradient-to-r from-emerald-500/30 to-teal-500/30 text-white backdrop-blur-md hover:from-emerald-500/40 hover:to-teal-500/40 hover:scale-105 hover:shadow-lg":"border-white/60 bg-white/10 text-white backdrop-blur-md hover:bg-white/20 hover:scale-105"} ${!s?.shopVerified||A?"opacity-50 cursor-not-allowed hover:scale-100":""}`},e.createElement(Yr,{size:18,className:`transition-all duration-300 ${k?"fill-white text-white":""} ${A?"":"group-hover:scale-110"}`}),A?"Traitement...":Ze),nt=async()=>{ue(!0),fe("");try{const{data:we}=await oe.get(`/shops/${ve}/reviews`,{params:{page:1,limit:50}});te(Array.isArray(we.reviews)?we.reviews:[])}catch(we){fe(we.response?.data?.message||we.message||"Impossible de charger les commentaires.")}finally{ue(!1)}},Me=async()=>{B(!0),await nt()},Qe=()=>{B(!1)},wt=async we=>{if(we.preventDefault(),!r){n("/login",{state:{from:`/shop/${t}`}});return}const vt=!!O.rating,pt=!!O.comment?.trim();if(!vt&&!pt){K("Ajoutez une note ou un commentaire pour continuer.");return}$(!0),K(""),V("");try{const Le=ve,{data:pe}=await oe.post(`/shops/${Le}/reviews`,O);Y(pe),R({rating:pe.rating||0,comment:pe.comment||""}),L(!pe.comment?.trim()),V("Votre avis a bien t enregistr."),T(Pe=>Pe+1)}catch(Le){K(Le.response?.data?.message||Le.message||"Impossible d'enregistrer votre avis pour l'instant.")}finally{$(!1)}},lt=we=>{L(!0),R({rating:we.rating||0,comment:we.comment||""}),V(""),K("")};return e.createElement("main",{className:`bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 py-4 sm:py-8 ${J?"pb-24":""}`},e.createElement("div",{className:`mx-auto flex max-w-7xl flex-col text-slate-900 ${J?"gap-4 px-3":"gap-8 px-4 sm:px-6 lg:px-8"}`},e.createElement("section",{className:`relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 text-white shadow-2xl ${J?"rounded-2xl":"rounded-[32px]"}`},s.shopBanner&&e.createElement("div",{className:"absolute inset-0"},e.createElement("img",{src:s.shopBanner,alt:`Bannire ${s.shopName}`,className:"h-full w-full object-cover"}),e.createElement("div",{className:"absolute inset-0 bg-slate-950/70"})),e.createElement("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at top right, rgba(255,255,255,0.3), transparent 60%), radial-gradient(circle at 20% 20%, rgba(255,255,255,0.15), transparent 45%)"}}),e.createElement("div",{className:`relative z-10 flex flex-col ${J?"gap-4 px-4 py-5":"gap-8 px-6 py-10 md:px-10 md:py-12"}`},e.createElement("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},e.createElement("div",{className:"flex items-center gap-4 sm:flex-row sm:items-start sm:gap-5"},e.createElement("div",{className:`overflow-hidden rounded-xl border border-white/40 bg-white/20 shrink-0 ${J?"h-16 w-16":"h-24 w-24 rounded-2xl"}`},s.shopLogo?e.createElement("img",{src:s.shopLogo,alt:`Logo ${s.shopName}`,className:"h-full w-full object-cover"}):e.createElement("div",{className:"flex h-full w-full items-center justify-center text-xl font-semibold uppercase tracking-wide text-white/90"},s.shopName?.charAt(0)||"B")),e.createElement("div",{className:`flex-1 min-w-0 space-y-0.5 text-white ${J?"":"text-center sm:text-left"}`},e.createElement("p",{className:`uppercase tracking-wider text-white/80 ${J?"text-[10px]":"text-xs tracking-[0.4em]"}`},"Boutique"),e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("h1",{className:`font-bold leading-tight text-white truncate ${J?"text-xl":"text-3xl"}`},s.shopName),e.createElement(_n,{verified:s.shopVerified})),e.createElement("p",{className:`text-white/80 truncate ${J?"text-xs":"text-sm"}`},"Gre par ",s.ownerName))),!J&&e.createElement("div",{className:"flex flex-col gap-2 text-sm text-white/80"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Xt,{className:"h-4 w-4"}),e.createElement("span",null,"Cre le ",H0(s.createdAt))),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Wr,{className:"h-4 w-4"}),e.createElement("span",null,s.shopAddress||"Adresse non renseigne")))),J&&e.createElement("div",{className:"flex items-center gap-3 text-white/80 text-xs flex-wrap"},e.createElement("div",{className:"flex items-center gap-1 truncate min-w-0"},e.createElement(Wr,{className:"h-3.5 w-3.5 shrink-0"}),e.createElement("span",{className:"truncate"},s.shopAddress||"Adresse non renseigne")),e.createElement("div",{className:"flex items-center gap-1 shrink-0"},e.createElement(Xt,{className:"h-3.5 w-3.5"}),e.createElement("span",null,H0(s.createdAt)))),e.createElement("p",{className:`text-white/80 ${J?"text-xs line-clamp-2":"max-w-2xl text-sm"}`},s.shopDescription||"Aucune description publique na encore t ajoute  cette boutique."),e.createElement("div",{className:`grid text-xs uppercase tracking-wider text-white/80 sm:grid-cols-3 ${J?"grid-cols-3 gap-2":"gap-4 tracking-[0.2em]"}`},e.createElement("div",{className:`rounded-xl border border-white/30 bg-white/5 text-center backdrop-blur ${J?"px-2 py-2":"rounded-2xl px-4 py-3"}`},e.createElement("p",{className:J?"text-[9px]":"text-[10px]"},"Prod."),e.createElement("p",{className:`font-semibold ${J?"text-sm mt-0.5":"text-lg mt-2"}`},Qm(s.productCount??l.length))),e.createElement("div",{className:`rounded-xl border border-white/30 bg-white/5 text-center backdrop-blur ${J?"px-2 py-2":"rounded-2xl px-4 py-3"}`},e.createElement("p",{className:J?"text-[9px]":"text-[10px]"},"Avis"),e.createElement("p",{className:`font-semibold ${J?"text-sm mt-0.5":"text-lg mt-2"}`},sd(He))),e.createElement("div",{className:`rounded-xl border border-white/30 bg-white/5 text-center backdrop-blur ${J?"px-2 py-2":"rounded-2xl px-4 py-3"}`},e.createElement("p",{className:J?"text-[9px]":"text-[10px]"},"Abonns"),e.createElement("p",{className:`font-semibold ${J?"text-sm mt-0.5":"text-lg mt-2"}`},Qm(y)))),e.createElement("div",{className:`flex flex-wrap items-center gap-2 justify-center ${J?"flex-col":""}`},gt,Dt,!J&&e.createElement(ye,{to:"/shops/verified",className:"inline-flex items-center justify-center rounded-full border border-white/60 bg-white/10 px-5 py-2 text-sm font-semibold text-white transition hover:border-white"},"Dcouvrir dautres boutiques")))),e.createElement("section",{className:`rounded-2xl sm:rounded-3xl border border-gray-200/60 bg-gradient-to-br from-white to-gray-50/50 shadow-xl ${J?"p-4":"p-8"}`},e.createElement("article",{className:J?"space-y-4":"space-y-6"},e.createElement("div",{className:`flex items-start justify-between gap-3 ${J?"flex-col sm:flex-row":""}`},e.createElement("div",{className:"flex items-center gap-3 sm:gap-4"},e.createElement("div",{className:`flex items-center justify-center rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 ${J?"h-10 w-10":"h-12 w-12"}`},e.createElement(zr,{size:J?20:24,className:"text-amber-600 fill-amber-600"})),e.createElement("div",null,e.createElement("h3",{className:`font-bold text-gray-900 ${J?"text-lg":"text-2xl"}`},"Avis & Commentaires"),e.createElement("p",{className:`text-gray-500 mt-0.5 ${J?"text-xs":"text-sm mt-1"}`},Tt," avis  Note moyenne ",sd(He),"/5"))),e.createElement("button",{type:"button",onClick:Me,className:`inline-flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-4 py-2 font-semibold text-indigo-700 transition-all duration-200 hover:bg-indigo-100 hover:border-indigo-300 active:scale-95 w-full sm:w-auto justify-center ${J?"text-sm py-2.5":"text-sm"}`},e.createElement(Hr,{size:16}),"Voir tous les commentaires")),Tt>0&&e.createElement("div",{className:`rounded-2xl border border-gray-200 bg-white ${J?"p-4":"p-6"}`},e.createElement("div",{className:`flex items-center justify-center gap-3 ${J?"mb-3":"mb-4"}`},e.createElement("div",{className:"text-center"},e.createElement("div",{className:`font-black bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent ${J?"text-3xl":"text-5xl"}`},sd(He)),e.createElement("div",{className:"flex items-center justify-center gap-1 mt-2"},[1,2,3,4,5].map(we=>e.createElement(zr,{key:we,size:20,className:we<=Math.round(He)?"text-amber-400 fill-amber-400":"text-gray-300"}))),e.createElement("p",{className:"text-sm text-gray-600 mt-2"},Qm(Tt)," avis vrifis")))),H&&e.createElement("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 p-4 flex items-center gap-3"},e.createElement(ar,{size:20,className:"text-emerald-600 flex-shrink-0"}),e.createElement("p",{className:"text-sm font-medium text-emerald-800"},H)),At&&e.createElement("form",{className:`space-y-5 rounded-2xl border border-gray-200 bg-white ${J?"p-4":"p-6"}`,onSubmit:wt},e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"text-sm font-bold text-gray-900"},"Votre note"),e.createElement("div",{className:`flex items-center gap-2 ${J?"flex-wrap":""}`},vce.map(we=>e.createElement("button",{type:"button",key:`rating-${we}`,onClick:()=>R(vt=>({...vt,rating:we})),className:`group flex items-center gap-1.5 rounded-xl border-2 text-sm font-bold transition-all duration-200 ${J?"px-3 py-2":"px-4 py-2.5"} ${O.rating===we?"border-amber-500 bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 scale-105 shadow-md":"border-gray-200 bg-white text-gray-600 hover:border-amber-300 hover:bg-amber-50"}`},e.createElement(zr,{size:16,className:O.rating===we?"text-amber-500 fill-amber-500":"text-gray-400"}),e.createElement("span",null,we))))),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"text-sm font-bold text-gray-900"},"Votre commentaire"),e.createElement("textarea",{value:O.comment,onChange:we=>R(vt=>({...vt,comment:we.target.value})),rows:4,className:"w-full rounded-xl border-2 border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-900 transition-all duration-200 focus:border-indigo-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-100",placeholder:"Partagez votre exprience avec cette boutique..."})),e.createElement("div",{className:"flex flex-col gap-2"},j&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3"},e.createElement("p",{className:"text-xs font-medium text-red-800"},j)),!r&&e.createElement("p",{className:"text-xs text-gray-600"},e.createElement(ye,{to:"/login",state:{from:`/shop/${t}`},className:"font-semibold text-indigo-600 hover:text-indigo-700"},"Connectez-vous")," ","pour laisser un commentaire.")),e.createElement("button",{type:"submit",disabled:D||!r,className:"w-full rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-3 text-sm font-bold text-white shadow-lg transition-all duration-200 hover:from-indigo-700 hover:to-purple-700 hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"},D?"Envoi en cours":q?"Mettre  jour mon avis":"Publier mon avis")),!At&&tt&&e.createElement("div",{className:"flex items-center justify-between rounded-xl border border-emerald-200 bg-emerald-50 px-5 py-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(ar,{size:20,className:"text-emerald-600"}),e.createElement("p",{className:"text-sm font-semibold text-emerald-900"},"Votre commentaire est publi.")),e.createElement("button",{type:"button",onClick:()=>L(!0),className:"inline-flex items-center gap-2 rounded-lg border border-emerald-300 bg-white px-3 py-2 text-xs font-semibold text-emerald-700 transition-all duration-200 hover:bg-emerald-100"},e.createElement(vu,{size:14}),"Modifier")),e.createElement("div",{className:"space-y-4"},m.length?m.map(we=>{const vt=!!r&&!!we.user?._id&&String(we.user._id)===String(r.id);return e.createElement("div",{key:we._id,className:"group rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-md hover:border-indigo-200"},e.createElement("div",{className:"flex items-start justify-between gap-4"},e.createElement("div",{className:"flex items-start gap-3 flex-1"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement("span",{className:"text-sm font-bold text-indigo-600"},(we.user?.name||we.user?.shopName||"U").charAt(0).toUpperCase())),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement("div",{className:"flex items-center gap-1"},[1,2,3,4,5].map(pt=>e.createElement(zr,{key:pt,size:14,className:pt<=we.rating?"text-amber-400 fill-amber-400":"text-gray-300"}))),e.createElement("span",{className:"text-sm font-bold text-gray-900"},sd(we.rating))),e.createElement("p",{className:"text-xs font-semibold text-gray-700 mb-1"},we.user?.name||we.user?.shopName||"Utilisateur"),e.createElement("p",{className:"text-sm text-gray-600 leading-relaxed"},we.comment||"Pas de commentaire fourni."))),e.createElement("div",{className:"flex flex-col items-end gap-2"},e.createElement("span",{className:"text-xs text-gray-400"},H0(we.createdAt)),vt&&e.createElement("button",{type:"button",onClick:()=>lt(we),className:"inline-flex items-center justify-center rounded-lg p-2 text-gray-500 transition-all duration-200 hover:bg-gray-100 hover:text-indigo-600"},e.createElement(vu,{size:14})))))}):e.createElement("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 p-8 text-center"},e.createElement(Hr,{size:32,className:"text-gray-400 mx-auto mb-3"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Aucun commentaire publi pour le moment."))))),e.createElement("section",{className:`grid gap-6 ${J?"":"lg:grid-cols-[minmax(0,1.3fr)_minmax(0,0.7fr)]"}`},e.createElement("div",{className:"space-y-6"},e.createElement("article",{className:`overflow-hidden border border-gray-200/60 bg-gradient-to-br from-white to-gray-50/30 shadow-xl ${J?"rounded-2xl":"rounded-3xl"}`},e.createElement("div",{className:`flex flex-wrap items-center justify-between gap-3 border-b border-gray-200 bg-gradient-to-r from-indigo-50/50 via-white to-purple-50/30 ${J?"px-4 py-4":"px-6 py-5"}`},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(Xt,{className:"h-6 w-6 text-indigo-600"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Horaires d'ouverture"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Planification communique par la boutique"))),e.createElement("span",{className:"rounded-full bg-indigo-100 px-3 py-1.5 text-[10px] font-bold uppercase tracking-wider text-indigo-700 border border-indigo-200"},"Donnes directes")),Re.length?e.createElement("div",{className:`space-y-3 ${J?"px-4 py-4":"px-6 py-5"}`},Re.map(we=>{const vt=yce[we.day]||we.day||"Jour",pt=we.closed?"Ferm":we.open&&we.close?`${we.open}  ${we.close}`:"Horaires partiels",Le=we.day===et;return e.createElement("div",{key:`${we.day}-${we.open}-${we.close}`,className:`flex flex-wrap items-center justify-between gap-3 rounded-2xl border px-4 py-3 shadow-sm ${Le?"border-indigo-200 bg-indigo-50/60":"border-slate-100 bg-white"}`},e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2"},e.createElement("p",{className:"text-sm font-semibold text-slate-900"},vt),Le&&e.createElement("span",{className:"rounded-full bg-indigo-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.2em] text-indigo-600"},"Aujourd'hui")),e.createElement("p",{className:"text-xs text-slate-500"},pt)),e.createElement("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${we.closed?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-700"}`},e.createElement("span",{className:`h-2 w-2 rounded-full ${we.closed?"bg-rose-500":"bg-emerald-500"}`}),we.closed?"Ferm":"Ouvert"))})):e.createElement("div",{className:"px-6 py-5"},e.createElement("p",{className:"text-sm text-slate-500"},"Pas encore dhoraire organis."))),e.createElement("article",{className:`rounded-2xl sm:rounded-3xl border border-gray-100 bg-white shadow-sm text-center ${J?"p-4":"p-6"}`},e.createElement("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500"},"Note moyenne"),e.createElement("div",{className:"mt-3 flex items-center justify-center gap-2"},e.createElement(zr,{className:"h-6 w-6 text-yellow-500"}),e.createElement("span",{className:"text-4xl font-bold text-gray-900"},sd(He))),e.createElement("p",{className:"mt-2 text-xs text-gray-500"},Qm(Tt)," avis vrifis")))),e.createElement("section",{className:`rounded-2xl sm:rounded-3xl border border-gray-200/60 bg-gradient-to-br from-emerald-50/30 via-white to-teal-50/20 shadow-xl ${J?"p-4":"p-8"}`},e.createElement("div",{className:`flex items-center justify-between gap-4 ${J?"mb-4 flex-col sm:flex-row items-start":"mb-6"}`},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 shadow-md"},e.createElement(Pr,{size:24,className:"text-emerald-600"})),e.createElement("div",null,e.createElement("h2",{className:`font-bold text-gray-900 ${J?"text-lg":"text-2xl"}`},"Produits les plus vendus"),e.createElement("p",{className:`text-gray-500 mt-0.5 ${J?"text-xs":"text-sm mt-1"}`},"Les 5 meilleures ventes de cette boutique"))),e.createElement("div",{className:"hidden sm:flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-100 to-teal-100 px-4 py-2 border border-emerald-200 shadow-sm"},e.createElement(ko,{size:18,className:"text-emerald-600"}),e.createElement("span",{className:"text-xs font-bold text-emerald-700"},"Top Ventes"))),W?e.createElement("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-5"},[1,2,3,4,5].map(we=>e.createElement("div",{key:we,className:"animate-pulse rounded-2xl border border-gray-200 bg-gray-100 aspect-square"}))):ne&&re.length===0?e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 flex items-center gap-3"},e.createElement(jt,{size:20,className:"text-red-600 flex-shrink-0"}),e.createElement("p",{className:"text-sm font-medium text-red-800"},ne)):re.length>0?e.createElement("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-5"},re.map((we,vt)=>e.createElement("div",{key:we._id,className:"group relative overflow-hidden rounded-2xl border-2 border-gray-200 bg-white shadow-sm transition-all duration-300 hover:border-emerald-300 hover:shadow-lg hover:scale-105"},e.createElement("div",{className:"absolute top-2 left-2 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 text-white shadow-lg ring-2 ring-white"},e.createElement("span",{className:"text-sm font-black"},"#",vt+1)),e.createElement(ye,{to:Dr(we),...be,className:"block aspect-square overflow-hidden bg-gray-100"},e.createElement("img",{src:we.images?.[0]||we.image||"/api/placeholder/200/200",alt:we.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"})),e.createElement("div",{className:"p-3 space-y-2"},e.createElement(ye,{to:Dr(we),...be,className:"block"},e.createElement("h3",{className:"text-xs font-bold text-gray-900 line-clamp-2 group-hover:text-emerald-600 transition-colors"},we.title)),e.createElement("div",{className:"flex items-baseline gap-1"},e.createElement("span",{className:"text-sm font-black text-gray-900"},xO(we.price)),we.priceBeforeDiscount&&we.priceBeforeDiscount>we.price&&e.createElement("span",{className:"text-[10px] text-gray-400 line-through"},xO(we.priceBeforeDiscount))),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-1 rounded-full bg-emerald-100 px-2 py-1 border border-emerald-200"},e.createElement(Pr,{size:10,className:"text-emerald-600"}),e.createElement("span",{className:"text-[10px] font-bold text-emerald-700"},Qm(we.salesCount||0)," vente",we.salesCount>1?"s":"")),we.ratingAverage>0&&e.createElement("div",{className:"flex items-center gap-0.5"},e.createElement(zr,{size:10,className:"text-amber-400 fill-amber-400"}),e.createElement("span",{className:"text-[10px] font-semibold text-gray-600"},Number(we.ratingAverage).toFixed(1)))))))):e.createElement("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 p-8 text-center"},e.createElement(Pr,{size:32,className:"text-gray-400 mx-auto mb-3"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Aucun produit vendu pour le moment."))),e.createElement("section",{className:`rounded-2xl sm:rounded-3xl border border-gray-200/60 bg-gradient-to-br from-white to-gray-50/30 shadow-xl ${J?"p-4":"p-8"}`},e.createElement("div",{className:"flex flex-col gap-4 sm:gap-6 sm:flex-row sm:items-start sm:justify-between "},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(Ft,{size:24,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Produits de la boutique"),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},je.length," produit",je.length>1?"s":""," disponible",je.length>1?"s":""))),Ge.length>0&&e.createElement("div",{className:`flex items-center gap-2 ${J?"overflow-x-auto pb-2 -mx-1 hide-scrollbar flex-nowrap":"flex-wrap"}`},e.createElement("button",{type:"button",onClick:()=>E("all"),className:`inline-flex items-center gap-2 rounded-xl border-2 px-4 py-2 text-xs font-bold transition-all duration-200 shrink-0 ${v==="all"?"border-indigo-500 bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 shadow-md scale-105":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"}`},e.createElement(x2,{size:14}),"Tous"),Ge.map(we=>e.createElement("button",{key:we,type:"button",onClick:()=>E(we),className:`inline-flex items-center gap-2 rounded-xl border-2 px-4 py-2 text-xs font-bold transition-all duration-200 shrink-0 ${v===we?"border-indigo-500 bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 shadow-md scale-105":"border-gray-200 bg-white text-gray-600 hover:border-indigo-300 hover:bg-indigo-50"}`},we)))),je.length?e.createElement("div",{className:"mt-6 grid grid-cols-2 gap-4 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3"},je.map(we=>e.createElement(un,{key:we._id,p:we,hideMobileDiscountBadge:!0}))):e.createElement("div",{className:"mt-6 rounded-2xl border border-dashed border-gray-300 bg-slate-50 px-6 py-12 text-center"},e.createElement("p",{className:"text-lg font-semibold text-gray-700"},Ge.length&&v!=="all"?`Aucun produit dans la catgorie ${v}.`:"Aucun produit publi pour le moment."),e.createElement(ye,{to:"/",className:"mt-4 inline-flex items-center justify-center rounded-full bg-indigo-600 px-6 py-2 text-sm font-semibold text-white transition hover:bg-indigo-700"},"Retour  laccueil"))),J&&s&&e.createElement("div",{className:"fixed bottom-0 left-0 right-0 z-40 flex items-center gap-2 bg-white/95 backdrop-blur-lg border-t border-gray-200 px-4 py-3 safe-area-pb"},e.createElement("div",{className:"flex-1 flex gap-2"},r&&s.phone?e.createElement("a",{href:`tel:${s.phone}`,className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-600 px-4 py-3 text-sm font-bold text-white transition active:scale-95"},e.createElement(Es,{size:18}),"Appeler"):e.createElement(ye,{to:"/login",state:{from:`/shop/${t}`},className:"flex-1 inline-flex items-center justify-center gap-2 rounded-xl border-2 border-indigo-200 bg-indigo-50 px-4 py-3 text-sm font-bold text-indigo-700 transition active:scale-95"},e.createElement(Es,{size:18}),"Appeler"),e.createElement("button",{type:"button",onClick:xt,disabled:A||!s?.shopVerified,className:`flex-1 inline-flex items-center justify-center gap-2 rounded-xl px-4 py-3 text-sm font-bold transition active:scale-95 ${k?"border-2 border-emerald-300 bg-emerald-50 text-emerald-700":"border-2 border-indigo-200 bg-indigo-50 text-indigo-700"} ${!s?.shopVerified||A?"opacity-50 cursor-not-allowed":""}`},e.createElement(Yr,{size:18,className:k?"fill-current":""}),A?"...":k?"Suivie":"Suivre"))),Q&&e.createElement("div",{className:`fixed inset-0 z-50 flex bg-black/60 backdrop-blur-sm ${J?"items-end justify-center":"items-center justify-center px-4 py-8"}`,onClick:we=>we.target===we.currentTarget&&Qe()},e.createElement("div",{className:`relative w-full border border-gray-200 bg-white shadow-2xl flex flex-col ${J?"max-h-[90vh] rounded-t-3xl max-w-full":"max-w-4xl max-h-[90vh] rounded-3xl"}`,onClick:we=>we.stopPropagation()},e.createElement("div",{className:`sticky top-0 z-10 flex items-center justify-between gap-4 border-b border-gray-200 bg-white rounded-t-3xl ${J?"px-4 py-4":"px-6 py-5"}`},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-amber-100 to-orange-100"},e.createElement(Hr,{size:20,className:"text-amber-600"})),e.createElement("div",null,e.createElement("h3",{className:"text-xl font-bold text-gray-900"},"Tous les commentaires"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},ae.length," commentaire",ae.length>1?"s":""))),e.createElement("button",{type:"button",onClick:Qe,className:"flex h-10 w-10 items-center justify-center rounded-xl border border-gray-200 text-gray-500 transition-all duration-200 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700","aria-label":"Fermer"},e.createElement(jt,{size:20}))),e.createElement("div",{className:`flex-1 overflow-y-auto space-y-4 ${J?"px-4 py-4":"px-6 py-6"}`},ge?e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"flex flex-col items-center gap-3"},e.createElement("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Chargement des commentaires"))):Ee?e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 flex items-center gap-3"},e.createElement(jt,{size:20,className:"text-red-600 flex-shrink-0"}),e.createElement("p",{className:"text-sm font-medium text-red-800"},Ee)):ae.length?ae.map(we=>e.createElement("div",{key:`modal-${we._id}`,className:"group rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-md hover:border-indigo-200"},e.createElement("div",{className:"flex items-start gap-4"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex-shrink-0"},e.createElement("span",{className:"text-base font-bold text-indigo-600"},(we.user?.name||we.user?.shopName||"U").charAt(0).toUpperCase())),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center justify-between gap-3 mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("p",{className:"text-sm font-bold text-gray-900"},we.user?.name||we.user?.shopName||"Utilisateur"),e.createElement("div",{className:"flex items-center gap-1"},[1,2,3,4,5].map(vt=>e.createElement(zr,{key:vt,size:14,className:vt<=we.rating?"text-amber-400 fill-amber-400":"text-gray-300"}))),e.createElement("span",{className:"text-xs font-semibold text-gray-600"},sd(we.rating))),e.createElement("span",{className:"text-xs text-gray-400 whitespace-nowrap"},H0(we.createdAt))),e.createElement("p",{className:"text-sm text-gray-700 leading-relaxed"},we.comment||"Pas de commentaire."))))):e.createElement("div",{className:"rounded-xl border border-dashed border-gray-300 bg-gray-50 p-12 text-center"},e.createElement(Hr,{size:48,className:"text-gray-400 mx-auto mb-4"}),e.createElement("p",{className:"text-sm font-medium text-gray-600"},"Aucun commentaire pour cette boutique.")))))))}function wce({phonesDisplay:t}){const r=t||"Numro indisponible";return e.createElement("p",{className:"flex items-center gap-2"},e.createElement(Es,{size:16,className:"text-green-600"}),r)}const W0=[{title:"Paiements scuriss",description:"Tous les paiements vers ETS HD Tech Filial sont vrifis manuellement avant la mise en ligne dune annonce."},{title:"Vendeurs vrifis",description:"Les boutiques et les particuliers doivent fournir des informations valides pour publier sur HDMarket."},{title:"Service client ractif",description:"Notre support rpond sous 24h ouvres par email ou WhatsApp pour toute rclamation ou assistance."}];function Jm(t=[]){const r=Date.now();return t.map((a,n)=>({...a,id:a.id||`condition-${r}-${n}`}))}function yO(t=[]){return t.map(({title:r,description:a})=>({title:(r||"").trim(),description:(a||"").trim()}))}function Nce(){const{user:t}=u.useContext(Sr),r=t?.role==="admin",a=r||t?.canManageHelpCenter,{networks:n}=Vg(),s=u.useMemo(()=>{const fe=fU(n);return fe.length?fe.map(re=>re.display).join("  "):""},[n]),[o,l]=u.useState("ETS HD Tech Filial"),[c,m]=u.useState(()=>Jm(W0)),[p,f]=u.useState({title:"",description:""}),[g,b]=u.useState(null),[x,v]=u.useState(""),[E,y]=u.useState(!0),[w,k]=u.useState(!1),[C,A]=u.useState(""),[S,P]=u.useState([]),[T,O]=u.useState(!1),[R,D]=u.useState(""),[$,j]=u.useState(!1),[K,H]=u.useState([]),[V,q]=u.useState("");u.useEffect(()=>{let fe=!0;return(async()=>{y(!0);try{const{data:U}=await oe.get("/support/help-center");if(!fe)return;const W=Array.isArray(U?.conditions)&&U.conditions.length?U.conditions:W0;l(U?.companyName||"ETS HD Tech Filial"),m(Jm(W)),A("")}catch(U){if(!fe)return;m(Jm(W0)),A(U.response?.data?.message||U.message||"Impossible de charger les conditions pour le moment.")}finally{fe&&y(!1)}})(),()=>{fe=!1}},[]),u.useEffect(()=>{if(!x)return;const fe=setTimeout(()=>v(""),3e3);return()=>clearTimeout(fe)},[x]),u.useEffect(()=>{if(!V)return;const fe=setTimeout(()=>q(""),3e3);return()=>clearTimeout(fe)},[V]);const Y=u.useMemo(()=>[{label:"Entreprise",value:o},{label:"Sige social",value:"Brazzaville, Congo"},{label:"Support 24/7",value:"support@hdmarket.cg"},{label:"WhatsApp",value:s||"Numro indisponible"}],[o,s]),z=u.useMemo(()=>new Set(S.map(fe=>String(fe.id||fe._id))),[S]),L=u.useCallback(async()=>{if(r){O(!0);try{const{data:fe}=await oe.get("/admin/help-center-editors");P(Array.isArray(fe?.editors)?fe.editors:[])}catch(fe){console.error("Load help center editors error:",fe),P([])}finally{O(!1)}}},[r]);u.useEffect(()=>{L()},[L]);const Q=u.useCallback(async(fe,re)=>{if(!a)return v("Vous ntes pas autoris  enregistrer des changements."),!1;k(!0);try{const U={companyName:o,conditions:yO(fe)},{data:W}=await oe.put("/support/help-center",U),me=Array.isArray(W?.conditions)&&W.conditions.length?W.conditions:yO(fe);return m(Jm(me)),l(W?.companyName||o),v(re||"Modifications enregistres."),A(""),!0}catch(U){return v(U.response?.data?.message||U.message||"Impossible denregistrer les modifications."),!1}finally{k(!1)}},[o,a]),B=fe=>{if(!a){v("Vous ntes pas autoris  modifier les conditions.");return}b(fe.id),f({title:fe.title,description:fe.description})},ae=async fe=>{if(fe.preventDefault(),!a){v("Vous ntes pas autoris  enregistrer des changements.");return}if(!p.title.trim()||!p.description.trim()){v("Merci de renseigner un titre et un contenu.");return}const re={title:p.title.trim(),description:p.description.trim()},U=g?c.map(me=>me.id===g?{...me,...re}:me):[{id:`condition-${Date.now()}`,...re},...c];await Q(U,g?"Condition mise  jour avec succs.":"Nouvelle condition ajoute.")&&(f({title:"",description:""}),b(null))},te=()=>{b(null),f({title:"",description:""})},ge=async()=>{if(!a){v("Vous ntes pas autoris  restaurer la version officielle.");return}const fe=Jm(W0);await Q(fe,"Conditions par dfaut restaures.")&&(b(null),f({title:"",description:""}))},ue=async()=>{if(R.trim()){j(!0);try{const{data:fe}=await oe.get(`/admin/users?search=${encodeURIComponent(R.trim())}&limit=10`),re=Array.isArray(fe)?fe.filter(U=>U.role!=="admin"):[];H(re)}catch(fe){console.error("Search users error:",fe),H([])}finally{j(!1)}}},Ee=async fe=>{if(!(!fe||typeof fe!="string")){if(!/^[0-9a-fA-F]{24}$/.test(fe)){q("Identifiant utilisateur invalide.");return}try{const{data:re}=await oe.patch(`/admin/help-center-editors/${fe}/toggle`);q(re?.message||"Statut mis  jour."),await L(),H([]),D("")}catch(re){q(re.response?.data?.message||"Erreur lors de la mise  jour.")}}};return e.createElement("div",{className:"bg-gray-50 min-h-screen"},e.createElement("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-10"},e.createElement("header",{className:"space-y-3"},e.createElement("p",{className:"text-xs font-semibold uppercase tracking-widest text-indigo-600"},o),e.createElement("h1",{className:"text-3xl font-extrabold text-gray-900"},"Aide et service client"),e.createElement("p",{className:"text-sm text-gray-600 max-w-2xl"},"Retrouvez les conditions d'utilisation de la plateforme HDMarket, gre par ETS HD Tech Filial, et mettez-les  jour facilement grce au formulaire ddi.")),C&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700"},C),e.createElement("section",{className:"grid gap-4 sm:grid-cols-2"},e.createElement("article",{className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"rounded-xl bg-indigo-100 p-3 text-indigo-600"},e.createElement(pa,{size:20})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Conditions vrifies"),e.createElement("p",{className:"text-sm text-gray-500"},"Politique de confiance et modration."))),e.createElement("ul",{className:"mt-4 space-y-2 text-sm text-gray-700"},Y.map(fe=>e.createElement("li",{key:fe.label},e.createElement("span",{className:"font-semibold"},fe.label," :")," ",fe.value)))),e.createElement("article",{className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm space-y-4"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Contactez-nous"),e.createElement("div",{className:"space-y-3 text-sm text-gray-700"},e.createElement("p",{className:"flex items-center gap-2"},e.createElement(gi,{size:16,className:"text-indigo-600"}),"support@hdmarket.cg"),e.createElement(wce,{phonesDisplay:s}),e.createElement("p",{className:"flex items-center gap-2"},e.createElement(ca,{size:16,className:"text-emerald-600"}),"Assistance WhatsApp disponible 7j/7")),e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 text-sm font-semibold text-indigo-600 hover:text-indigo-500"},"Retourner aux annonces"))),e.createElement("section",{className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm space-y-4"},e.createElement("div",{className:"flex items-center justify-between flex-wrap gap-2"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Pn,{size:20,className:"text-indigo-600"}),"Conditions d'utilisation actuelles"),a?e.createElement("button",{type:"button",onClick:ge,className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-60",disabled:w},e.createElement(Cd,{size:14}),"Restaurer la version officielle"):null),e.createElement("ul",{className:"space-y-4"},E?e.createElement("li",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50 p-4 text-sm text-gray-500"},"Chargement des conditions"):c.map(fe=>e.createElement("li",{key:fe.id,className:"rounded-xl border border-gray-100 bg-gray-50 p-4 text-sm text-gray-700 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between gap-3"},e.createElement("p",{className:"text-base font-semibold text-gray-900"},fe.title),a&&e.createElement("button",{type:"button",onClick:()=>B(fe),className:"inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:text-indigo-500"},e.createElement(vu,{size:14}),"Modifier")),e.createElement("p",{className:"mt-2 text-gray-600"},fe.description))))),r&&e.createElement("section",{className:"rounded-2xl border border-amber-100 bg-white p-5 shadow-lg space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"rounded-xl bg-amber-50 p-3 text-amber-600"},e.createElement(tn,{size:20})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Accs diteurs Help Center"),e.createElement("p",{className:"text-sm text-gray-500"},"Autorisez un utilisateur  modifier cette page sans lui donner le rle admin."))),V&&e.createElement("div",{className:"flex items-center gap-2 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800"},e.createElement(Yt,{size:16}),V),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, tlphone)...",value:R,onChange:fe=>D(fe.target.value),onKeyDown:fe=>fe.key==="Enter"&&ue(),className:"flex-1 rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"}),e.createElement("button",{type:"button",onClick:ue,disabled:$||!R.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-amber-600 px-4 py-2 text-sm font-semibold text-white hover:bg-amber-700 disabled:opacity-60"},e.createElement(Tr,{size:16}),"Rechercher")),K.length>0&&e.createElement("div",{className:"space-y-2"},K.map(fe=>{const re=fe._id||fe.id,U=z.has(String(re));return e.createElement("div",{key:re,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-gray-50 p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},fe.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},fe.email,"  ",fe.phone)),e.createElement("button",{type:"button",onClick:()=>Ee(String(re)),className:`inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-xs font-semibold ${U?"bg-red-600 text-white hover:bg-red-700":"bg-amber-600 text-white hover:bg-amber-700"}`},U?e.createElement(Go,{size:14}):e.createElement(hi,{size:14}),U?"Retirer":"Ajouter"))}))),e.createElement("div",{className:"border-t border-gray-100 pt-4"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 mb-2"},"diteurs actuels (",S.length,")"),T?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement"):S.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun diteur pour le moment."):e.createElement("div",{className:"space-y-2"},S.map(fe=>e.createElement("div",{key:fe.id||fe._id,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-white p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},fe.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},fe.email,"  ",fe.phone)),e.createElement("button",{type:"button",onClick:()=>Ee(String(fe.id||fe._id)),className:"inline-flex items-center gap-1 rounded-lg bg-red-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-700"},e.createElement(Go,{size:14}),"Retirer")))))),a&&e.createElement("section",{className:"rounded-2xl border border-indigo-100 bg-white p-5 shadow-lg space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"rounded-xl bg-indigo-50 p-3 text-indigo-600"},e.createElement(Pn,{size:20})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Ajouter ou mettre  jour une condition"),e.createElement("p",{className:"text-sm text-gray-500"},"Ce formulaire vous permet de garder les conditions  jour sans crire de code."))),x&&e.createElement("div",{className:"flex items-center gap-2 rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800"},e.createElement(Yt,{size:16}),x),e.createElement("form",{className:"space-y-4",onSubmit:ae},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Titre"),e.createElement("input",{type:"text",value:p.title,onChange:fe=>f(re=>({...re,title:fe.target.value})),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ex: Politique de remboursement"})),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Description"),e.createElement("textarea",{value:p.description,onChange:fe=>f(re=>({...re,description:fe.target.value})),rows:4,className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Dcrivez clairement la condition d'utilisation."})),e.createElement("div",{className:"flex flex-wrap items-center gap-3"},e.createElement("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-60",disabled:w},e.createElement(vc,{size:16}),w?"Enregistrement":g?"Mettre  jour":"Ajouter la condition"),g&&e.createElement("button",{type:"button",onClick:te,className:"text-sm font-semibold text-gray-600 hover:text-gray-800",disabled:w},"Annuler la modification"))))))}const vO=["Brazzaville","Pointe-Noire","Ouesso","Oyo"];function kce(){const{user:t}=u.useContext(Sr),r=t?.role==="admin",[a,n]=u.useState(""),[s,o]=u.useState([]),l=u.useRef(!1);u.useEffect(()=>{l.current||t?.city&&vO.includes(t.city)&&(n(t.city),l.current=!0)},[t?.city]);const[c,m]=u.useState([]),p=u.useMemo(()=>s.length?s.reduce((L,Q)=>{if(!L)return Q;const B=Number(L.ratingCount??0),ae=Number(Q.ratingCount??0);if(ae>B)return Q;if(ae===B){const te=Number(L.ratingAverage??0);return Number(Q.ratingAverage??0)>te?Q:L}return L},null):null,[s]),f=u.useMemo(()=>s.length?[...s].sort((L,Q)=>Number(Q.followersCount??0)-Number(L.followersCount??0)).slice(0,3):[],[s]),[g,b]=u.useState({}),[x,v]=u.useState(!0),[E,y]=u.useState(""),[w,k]=u.useState(new Map),[C,A]=u.useState(!1),[S,P]=u.useState("");u.useEffect(()=>{let L=!0;return(async()=>{v(!0),y("");try{const{data:B}=await oe.get("/shops",{params:{withImages:!0,imageLimit:6,...a?{city:a}:{}}}),ae=Array.isArray(B)?B:[],te=ae.filter(Ee=>Ee.shopVerified),ge=ae.filter(Ee=>!Ee.shopVerified);if(!L)return;o(te),m(ge);const ue=new Map;if(await Promise.all(te.slice(0,20).map(async Ee=>{try{const fe=Ee.slug||Ee._id;if(!fe)return;const{data:re}=await oe.get(`/shops/${fe}`,{params:{limit:6}});if(L&&re?.products){const U=Array.isArray(re.products)?re.products:[];ue.set(Ee._id,U.slice(0,6))}}catch{}})),L&&k(ue),r)try{const{data:Ee}=await oe.get("/admin/shops/verified");if(!L)return;const fe={};(Ee||[]).forEach(re=>{fe[re.id]=re}),b(fe)}catch(Ee){console.error("Erreur chargement meta admin:",Ee)}else b({})}catch(B){if(!L)return;y(B.response?.data?.message||B.message||"Impossible de charger les boutiques."),o([]),m([])}finally{L&&v(!1)}})(),()=>{L=!1}},[r,a]),u.useMemo(()=>r?"Boutiques vrifies (Admin)":"Boutiques vrifies",[r]);const T=u.useMemo(()=>"https://hdmarket-backend.onrender.com/api".replace(/\/api\/?$/,""),[]),O=u.useMemo(()=>L=>{if(!L)return"";if(/^https?:\/\//i.test(L))return L;const Q=L.replace(/\\/g,"/");return`${T}/${Q.replace(/^\/+/,"")}`},[T]),R=u.useMemo(()=>{const L=new Map;return s.forEach(Q=>{const B=Array.isArray(Q.sampleImages)?Q.sampleImages:[],ae=Q.shopBanner?O(Q.shopBanner):"",te=Q.shopLogo?O(Q.shopLogo):"",ue=[...B.filter(Boolean).map(O).filter(fe=>fe&&fe!==ae&&fe!==te)];for(let fe=ue.length-1;fe>0;fe-=1){const re=Math.floor(Math.random()*(fe+1));[ue[fe],ue[re]]=[ue[re],ue[fe]]}const Ee=ue.slice(0,6);L.set(Q._id,Ee)}),L},[s,O]),D=u.useMemo(()=>Number(s.length||0).toLocaleString("fr-FR"),[s.length]),$=u.useMemo(()=>L=>{if(!L.shopBoosted)return!1;const Q=new Date,B=L.shopBoostStartDate!==null&&L.shopBoostStartDate!==void 0,ae=L.shopBoostEndDate!==null&&L.shopBoostEndDate!==void 0;return!B&&!ae?!0:!(B&&Q<new Date(L.shopBoostStartDate)||ae&&Q>new Date(L.shopBoostEndDate))},[]),j=u.useMemo(()=>s.length?[...s].sort((L,Q)=>{const B=$(L),ae=$(Q);if(B&&!ae)return-1;if(!B&&ae)return 1;if(B&&ae){const ue=Number(L.shopBoostScore??0),Ee=Number(Q.shopBoostScore??0);if(ue!==Ee)return Ee-ue}const te=Number(L.followersCount??0),ge=Number(Q.followersCount??0);return te!==ge?ge-te:0}):[],[s,$]),K=L=>{if(!L)return"Rcemment";const Q=new Date,B=new Date(L),ae=Q-B,te=Math.floor(ae/(1e3*60*60*24));return te<1?"Aujourd'hui":te===1?"Hier":te<7?`Il y a ${te} jours`:te<30?`Il y a ${Math.floor(te/7)} semaines`:B.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},H=L=>`${Number(L||0).toLocaleString("fr-FR")} FCFA`,V=L=>Number(L||0).toLocaleString("fr-FR"),q=u.useMemo(()=>{const L=[...s,...c];if(!S.trim())return L;const Q=S.toLowerCase().trim();return L.filter(B=>B.shopName?.toLowerCase().includes(Q)||B.shopAddress?.toLowerCase().includes(Q)||B.name?.toLowerCase().includes(Q))},[s,c,S]),Y=u.useMemo(()=>[...q.filter(Q=>Q.shopVerified)].sort((Q,B)=>{const ae=$(Q),te=$(B);if(ae&&!te)return-1;if(!ae&&te)return 1;if(ae&&te){const Ee=Number(Q.shopBoostScore??0),fe=Number(B.shopBoostScore??0);if(Ee!==fe)return fe-Ee}const ge=Number(Q.followersCount??0),ue=Number(B.followersCount??0);return ge!==ue?ue-ge:0}),[q,$]),z=u.useMemo(()=>q.filter(L=>!L.shopVerified),[q]);return e.createElement("div",{className:"min-h-screen bg-white"},e.createElement("header",{className:"verified-shops-header sticky top-0 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200/80 dark:border-gray-800/80 shadow-sm transition-[visibility] duration-150"},e.createElement("div",{className:"max-w-2xl mx-auto px-4 py-4 sm:py-5"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between sm:gap-4"},e.createElement("div",{className:"flex items-center gap-3 min-w-0"},e.createElement("div",{className:"flex-shrink-0 w-10 h-10 sm:w-11 sm:h-11 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-md"},e.createElement(pa,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})),e.createElement("div",{className:"min-w-0"},e.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate"},"Boutiques vrifies"),e.createElement("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap"},e.createElement("span",{className:"text-sm text-gray-500 dark:text-gray-400 tabular-nums font-medium"},D," boutique",D!=="1"?"s":""),r&&e.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border border-amber-200 dark:border-amber-700/50"},"Admin")))),e.createElement("button",{type:"button",onClick:()=>A(!0),className:"flex-shrink-0 w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white px-4 py-3 sm:py-2.5 text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-200 active:scale-[0.98]"},e.createElement(x2,{className:"w-4 h-4","aria-hidden":!0}),"Voir toutes les boutiques")))),e.createElement("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4"},e.createElement("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 hide-scrollbar"},e.createElement("span",{className:"flex-shrink-0 flex items-center gap-1.5 text-sm font-medium text-gray-500 dark:text-gray-400"},e.createElement(Wr,{className:"w-4 h-4"}),"Ville"),e.createElement("div",{className:"flex gap-2 flex-1 min-w-0"},e.createElement("button",{type:"button",onClick:()=>n(""),className:`flex-shrink-0 px-3 py-1.5 rounded-xl text-sm font-semibold transition-all ${a===""?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`},"Toutes"),vO.map(L=>e.createElement("button",{key:L,type:"button",onClick:()=>n(L),className:`flex-shrink-0 px-3 py-1.5 rounded-xl text-sm font-semibold transition-all ${a===L?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`},L)))),x?e.createElement("div",{className:"space-y-4"},[1,2,3].map(L=>e.createElement("div",{key:L,className:"bg-white rounded-2xl border border-gray-200 p-4 animate-pulse"},e.createElement("div",{className:"flex gap-3 mb-4"},e.createElement("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),e.createElement("div",{className:"flex-1 space-y-2"},e.createElement("div",{className:"h-4 w-32 bg-gray-200 rounded"}),e.createElement("div",{className:"h-3 w-24 bg-gray-200 rounded"}))),e.createElement("div",{className:"grid grid-cols-3 gap-2 mb-4"},[1,2,3,4,5,6].map(Q=>e.createElement("div",{key:Q,className:"aspect-square bg-gray-200 rounded-xl"})))))):E?e.createElement("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 text-center"},e.createElement("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3"},e.createElement(pa,{className:"w-6 h-6 text-red-600"})),e.createElement("p",{className:"text-red-700 font-semibold"},E)):s.length?e.createElement("div",{className:"space-y-4"},j.map(L=>{const Q=g[String(L._id)],B=w.get(L._id)||[],ae=R.get(L._id)||[],te=B.length>0?B:ae.slice(0,6).map((re,U)=>({images:[re],_id:`img-${U}`})),ge=B.length>0&&B[0]?.createdAt?K(B[0].createdAt):L.createdAt?K(L.createdAt):"Rcemment",ue=f.findIndex(re=>re._id===L._id),Ee=ue>=0&&ue<3,fe=p?._id===L._id;return e.createElement("div",{key:L._id,className:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow"},e.createElement("div",{className:"p-4 border-b border-gray-100"},e.createElement("div",{className:"flex items-start justify-between gap-3"},e.createElement("div",{className:"flex items-center gap-3 flex-1 min-w-0"},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("img",{src:L.shopLogo||"/api/placeholder/60/60",alt:L.shopName,className:"w-12 h-12 rounded-full object-cover border-2 border-indigo-200"}),e.createElement("div",{className:"absolute -bottom-1 -left-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-[8px] font-black px-1.5 py-0.5 rounded-full shadow-lg"},"Vrifi")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement("p",{className:"font-bold text-gray-900 truncate text-sm"},L.shopName),e.createElement(_n,{verified:!0,showLabel:!1}),Ee&&e.createElement("span",{className:"inline-flex items-center gap-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-[10px] font-black px-2 py-0.5 rounded-full"},e.createElement(ko,{className:"w-3 h-3"}),"TOP",ue+1),fe&&e.createElement("span",{className:"inline-flex items-center gap-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-[10px] font-black px-2 py-0.5 rounded-full"},e.createElement(Iz,{className:"w-3 h-3"}),"#1")),e.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-500"},e.createElement(dn,{className:"w-3 h-3"}),e.createElement("span",null,ge)))),e.createElement("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors"},e.createElement(uj,{className:"w-5 h-5"})))),te.length>0&&e.createElement("div",{className:"p-4"},e.createElement("div",{className:"grid grid-cols-3 gap-2"},te.slice(0,6).map((re,U)=>{const W=re.images?.[0]||re.image||"/api/placeholder/200/200",me=re.slug?Dr({slug:re.slug,_id:re._id}):Da(L),ne=re.title||re.price;return e.createElement(ye,{key:re._id||`product-${U}`,to:me,className:"group relative aspect-square overflow-hidden rounded-xl bg-gray-100"},e.createElement("img",{src:W,alt:re.title||`Produit ${U+1}`,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"}),re.discount>0&&e.createElement("div",{className:"absolute top-1 left-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-[9px] font-black px-1.5 py-0.5 rounded shadow-lg z-10"},"-",re.discount,"%"),ne&&e.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20"},e.createElement("div",{className:"absolute bottom-0 left-0 right-0 p-2.5 text-white"},re.title&&e.createElement("p",{className:"text-xs font-bold mb-1.5 line-clamp-2 leading-tight"},re.title),re.price&&e.createElement("div",{className:"flex items-baseline gap-2 mb-2"},e.createElement("p",{className:"text-sm font-black text-white"},H(re.price)),re.priceBeforeDiscount&&re.priceBeforeDiscount>re.price&&e.createElement("p",{className:"text-[10px] text-gray-300 line-through"},H(re.priceBeforeDiscount))),e.createElement("div",{className:"flex items-center gap-3 text-[10px]"},re.ratingAverage>0&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(zr,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),e.createElement("span",{className:"font-semibold"},Number(re.ratingAverage).toFixed(1)),re.ratingCount>0&&e.createElement("span",{className:"text-gray-300"},"(",V(re.ratingCount),")")),re.commentCount>0&&e.createElement("div",{className:"flex items-center gap-1 text-gray-300"},e.createElement(Hr,{className:"w-3 h-3"}),e.createElement("span",null,V(re.commentCount)))),e.createElement("div",{className:"mt-2 pt-2 border-t border-white/20"},e.createElement("p",{className:"text-[9px] text-white/80 font-medium"},"Cliquer pour voir ")))))}))),e.createElement("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50/50"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-600"},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Yr,{className:"w-4 h-4 text-pink-500"}),e.createElement("span",{className:"font-semibold"},V(L.followersCount||0))),e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(en,{className:"w-4 h-4 text-indigo-500"}),e.createElement("span",{className:"font-semibold"},V(L.productCount||0))),e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Jn,{className:"w-4 h-4 text-gray-500"}),e.createElement("span",{className:"font-semibold"},V(L.totalViews??Math.floor((L.productCount||0)*12.5))))),e.createElement(ye,{to:Da(L),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-sm hover:shadow-md"},"Voir boutique",e.createElement(Ar,{className:"w-3 h-3"})))),r&&Q?.shopVerifiedBy&&e.createElement("div",{className:"px-4 py-3 border-t border-gray-100 bg-indigo-50/50"},e.createElement("div",{className:"flex items-center gap-2 text-xs text-indigo-700"},e.createElement(Ia,{className:"w-3.5 h-3.5"}),e.createElement("span",{className:"font-semibold"},"Vrifie par ",Q.shopVerifiedBy.name),Q.shopVerifiedAt&&e.createElement("span",{className:"text-indigo-600"}," ",new Date(Q.shopVerifiedAt).toLocaleDateString("fr-FR")))))})):e.createElement("div",{className:"bg-white rounded-2xl border-2 border-dashed border-gray-300 p-12 text-center"},e.createElement(Er,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.createElement("p",{className:"text-gray-600 font-semibold"},a?`Aucune boutique vrifie  ${a} pour le moment.`:"Aucune boutique vrifie pour le moment."),a&&e.createElement("button",{type:"button",onClick:()=>n(""),className:"mt-3 text-sm font-medium text-indigo-600 hover:text-indigo-700"},"Voir toutes les villes")),!x&&!E&&c.length>0&&e.createElement("section",{className:"mt-10 space-y-4"},e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase font-semibold text-amber-600 flex items-center gap-2"},e.createElement(pa,{size:16,className:"text-amber-500"}),"Boutiques en attente de vrification"),e.createElement("h2",{className:"text-2xl font-bold text-gray-900 mt-1"},"Soumissions rcentes"),e.createElement("p",{className:"text-sm text-gray-500"},"Ces boutiques seront examines prochainement par lquipe HDMarket.")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},c.map(L=>e.createElement(ye,{key:`pending-${L._id}`,to:Da(L),className:"rounded-2xl border border-amber-100 bg-white p-4 hover:border-amber-200 hover:shadow-md transition-all space-y-3"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("img",{src:L.shopLogo||"/api/placeholder/80/80",alt:L.shopName,className:"w-14 h-14 rounded-2xl object-cover border border-amber-100"}),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 truncate"},L.shopName||L.name),e.createElement("p",{className:"text-xs text-gray-500 truncate flex items-center gap-1"},e.createElement(Wr,{size:12}),L.shopAddress||"Adresse en cours"))),e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},e.createElement("span",null,L.productCount||0," annonce",L.productCount>1?"s":""),e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-amber-50 px-2 py-1 text-amber-700 border border-amber-100"},"En revue")))))),e.createElement("div",{className:"text-center"},e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-indigo-600 hover:text-indigo-500"},"Retourner  l'accueil"))),C&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black/50 backdrop-blur-sm p-4",onClick:()=>{A(!1),P("")}},e.createElement("div",{className:"relative w-full max-w-5xl rounded-3xl bg-white shadow-2xl border border-gray-200 max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation()},e.createElement("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-4 p-6 border-b border-gray-200 bg-white rounded-t-3xl"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(Er,{size:24,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Toutes les boutiques"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},q.length," boutique",q.length>1?"s":""," au total"))),e.createElement("button",{onClick:()=>{A(!1),P("")},className:"flex h-10 w-10 items-center justify-center rounded-xl border border-gray-200 text-gray-500 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200","aria-label":"Fermer"},e.createElement(jt,{size:20}))),e.createElement("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.createElement("input",{type:"text",value:S,onChange:L=>P(L.target.value),placeholder:"Rechercher une boutique par nom ou adresse...",className:"w-full pl-11 pr-4 py-3 rounded-xl border border-gray-200 bg-white text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-100 transition-all duration-200"}))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6 space-y-8"},Y.length>0&&e.createElement("section",{className:"space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-emerald-100 to-teal-100"},e.createElement(ar,{size:18,className:"text-emerald-600"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Boutiques certifies"),e.createElement("p",{className:"text-xs text-gray-500"},Y.length," boutique",Y.length>1?"s":""," vrifie",Y.length>1?"s":""))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Y.map(L=>e.createElement(ye,{key:`certified-${L._id}`,to:Da(L),onClick:()=>{A(!1),P("")},className:"group relative rounded-2xl border border-emerald-100 bg-gradient-to-br from-white to-emerald-50/30 p-4 hover:border-emerald-200 hover:shadow-lg transition-all duration-200"},e.createElement("div",{className:"flex items-start gap-3 mb-3"},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("img",{src:L.shopLogo||"/api/placeholder/60/60",alt:L.shopName,className:"w-14 h-14 rounded-xl object-cover border-2 border-emerald-200"}),e.createElement("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 shadow-lg"},e.createElement(ar,{size:12,className:"text-white"}))),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement("p",{className:"font-bold text-gray-900 truncate text-sm"},L.shopName||L.name),e.createElement(_n,{verified:!0,showLabel:!1})),e.createElement("div",{className:"flex items-center gap-1.5 text-xs text-gray-500"},e.createElement(Wr,{size:12}),e.createElement("span",{className:"truncate"},L.shopAddress||"Adresse non renseigne")))),e.createElement("div",{className:"flex items-center justify-between text-xs"},e.createElement("div",{className:"flex items-center gap-3 text-gray-600"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(en,{size:12,className:"text-indigo-500"}),e.createElement("span",{className:"font-semibold"},V(L.productCount||0))),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{size:12,className:"text-pink-500"}),e.createElement("span",{className:"font-semibold"},V(L.followersCount||0)))),e.createElement(Ar,{size:14,className:"text-gray-400 group-hover:text-indigo-600 transition-colors"})))))),z.length>0&&e.createElement("section",{className:"space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-amber-100 to-orange-100"},e.createElement(Xt,{size:18,className:"text-amber-600"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Boutiques non certifies"),e.createElement("p",{className:"text-xs text-gray-500"},z.length," boutique",z.length>1?"s":""," en attente de vrification"))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},z.map(L=>e.createElement(ye,{key:`non-certified-${L._id}`,to:Da(L),onClick:()=>{A(!1),P("")},className:"group relative rounded-2xl border border-amber-100 bg-gradient-to-br from-white to-amber-50/30 p-4 hover:border-amber-200 hover:shadow-lg transition-all duration-200"},e.createElement("div",{className:"flex items-start gap-3 mb-3"},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("img",{src:L.shopLogo||"/api/placeholder/60/60",alt:L.shopName,className:"w-14 h-14 rounded-xl object-cover border-2 border-amber-200"}),e.createElement("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-gradient-to-r from-amber-400 to-orange-400 shadow-lg"},e.createElement(Xt,{size:12,className:"text-white"}))),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement("p",{className:"font-bold text-gray-900 truncate text-sm"},L.shopName||L.name),e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-amber-50 px-2 py-0.5 text-[10px] font-semibold text-amber-700 border border-amber-200"},"En attente")),e.createElement("div",{className:"flex items-center gap-1.5 text-xs text-gray-500"},e.createElement(Wr,{size:12}),e.createElement("span",{className:"truncate"},L.shopAddress||"Adresse non renseigne")))),e.createElement("div",{className:"flex items-center justify-between text-xs"},e.createElement("div",{className:"flex items-center gap-3 text-gray-600"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(en,{size:12,className:"text-indigo-500"}),e.createElement("span",{className:"font-semibold"},V(L.productCount||0))),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{size:12,className:"text-pink-500"}),e.createElement("span",{className:"font-semibold"},V(L.followersCount||0)))),e.createElement(Ar,{size:14,className:"text-gray-400 group-hover:text-indigo-600 transition-colors"})))))),q.length===0&&e.createElement("div",{className:"flex flex-col items-center justify-center py-12 text-center"},e.createElement("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 mb-4"},e.createElement(Tr,{size:32,className:"text-gray-400"})),e.createElement("p",{className:"text-sm font-semibold text-gray-900 mb-1"},"Aucune boutique trouve"),e.createElement("p",{className:"text-xs text-gray-500"},"Essayez de modifier votre recherche"))))))}const Sce=new Intl.NumberFormat("fr-FR"),Vr=t=>{const r=Number(t);return!Number.isFinite(r)||r<0?"0":Sce.format(r)},Io=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Qs={listings:{total:0,approved:0,pending:0,rejected:0,disabled:0},engagement:{favoritesReceived:0,commentsReceived:0,favoritesSaved:0,shopsFollowed:0},performance:{views:0,clicks:0,conversion:0},breakdown:{categories:[],conditions:[]},timeline:[],topProducts:[],advertismentSpend:0,orders:{purchases:{totalCount:0,totalAmount:0,paidAmount:0,remainingAmount:0,totalItems:0,byStatus:{pending:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0},confirmed:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0},delivering:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0},delivered:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0},cancelled:{count:0,totalAmount:0,paidAmount:0,remainingAmount:0,items:0}}},sales:{totalCount:0,totalAmount:0,byStatus:{pending:{count:0,totalAmount:0},confirmed:{count:0,totalAmount:0},delivering:{count:0,totalAmount:0},delivered:{count:0,totalAmount:0},cancelled:{count:0,totalAmount:0}}}}},G0=({icon:t,label:r,value:a,subtitle:n,gradient:s,iconBg:o,trend:l})=>e.createElement("div",{className:"group relative overflow-hidden rounded-2xl bg-white border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300"},e.createElement("div",{className:`absolute inset-0 ${s.replace("from-","bg-").split(" ")[0]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),e.createElement("div",{className:"relative p-6"},e.createElement("div",{className:"flex items-start justify-between mb-4"},e.createElement("div",{className:`p-3 rounded-xl ${o} shadow-sm`},e.createElement(t,{className:"w-6 h-6 text-white"})),l&&e.createElement("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-emerald-50 border border-emerald-200"},e.createElement(Pr,{className:"w-3 h-3 text-emerald-600"}),e.createElement("span",{className:"text-xs font-bold text-emerald-700"},l))),e.createElement("div",{className:"space-y-1"},e.createElement("p",{className:"text-sm font-medium text-gray-600"},r),e.createElement("p",{className:"text-3xl font-bold text-gray-900"},a),n&&e.createElement("p",{className:"text-xs text-gray-500 mt-2"},n)))),ai=({title:t,value:r,subtitle:a,icon:n,color:s="indigo"})=>{const o={indigo:{icon:"bg-indigo-600",bg:"bg-indigo-50",border:"border-indigo-100",text:"text-indigo-600"},emerald:{icon:"bg-emerald-600",bg:"bg-emerald-50",border:"border-emerald-100",text:"text-emerald-600"},amber:{icon:"bg-amber-600",bg:"bg-amber-50",border:"border-amber-100",text:"text-amber-600"},purple:{icon:"bg-purple-600",bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-600"},rose:{icon:"bg-rose-600",bg:"bg-rose-50",border:"border-rose-100",text:"text-rose-600"}},l=o[s]||o.indigo;return e.createElement("div",{className:`rounded-xl border ${l.border} ${l.bg} p-4`},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:`p-2 rounded-lg ${l.icon}`},e.createElement(n,{className:"w-4 h-4 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},r)),e.createElement("p",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide"},t),a&&e.createElement("p",{className:"text-xs text-gray-500 mt-1"},a))};function Cce(){const{user:t}=u.useContext(Sr),r=wa(),[a]=bi(),[n,s]=u.useState(Qs),[o,l]=u.useState(!0),[c,m]=u.useState(!1),[p,f]=u.useState(""),[g,b]=u.useState(""),[x,v]=u.useState(""),[E,y]=u.useState(""),[w,k]=u.useState(""),[C,A]=u.useState([]),[S,P]=u.useState(!1),[T,O]=u.useState(!1),[R,D]=u.useState(!1),[$,j]=u.useState([]),[K,H]=u.useState(!1),[V,q]=u.useState(""),[Y,z]=u.useState(!1),[L,Q]=u.useState([]),[B,ae]=u.useState(!1),[te,ge]=u.useState(""),ue=t?.accountType==="shop"?Da(t):null,Ee=u.useRef(!0),fe=a.get("debug")==="1"||typeof window<"u"&&window.localStorage?.getItem("hdmarket_debug_stats")==="1";u.useEffect(()=>()=>{Ee.current=!1},[]),u.useEffect(()=>{fe&&(console.log("[UserStats] debug enabled"),console.log("[UserStats] user snapshot:",{id:t?._id||t?.id,role:t?.role,token:!!t?.token,accountType:t?.accountType}))},[fe,t?._id,t?.id,t?.role,t?.token,t?.accountType]);const re=u.useCallback(async({showLoading:J=!1}={})=>{if(!t)return;J?(l(!0),f("")):m(!0);const Ge=typeof performance<"u"?performance.now():Date.now();b(new Date().toISOString()),y("pending"),v(""),k("");try{fe&&console.log("[UserStats] fetching /users/profile/stats",{apiBase:"https://hdmarket-backend.onrender.com/api"});const{data:je,status:tt}=await oe.get("/users/profile/stats",{timeout:1e4,skipCache:!0});if(!Ee.current)return;s(He=>({...Qs,...je,listings:{...Qs.listings,...je?.listings||{}},engagement:{...Qs.engagement,...je?.engagement||{}},performance:{...Qs.performance,...je?.performance||{}},breakdown:{categories:je?.breakdown?.categories||[],conditions:je?.breakdown?.conditions||[]},timeline:je?.timeline||[],topProducts:je?.topProducts||[],advertismentSpend:je?.advertismentSpend??He.advertismentSpend??0,followedShops:Array.isArray(je?.followedShops)?je.followedShops:[],orders:{...Qs.orders,...je?.orders||{},purchases:{...Qs.orders.purchases,...je?.orders?.purchases||{},byStatus:{...Qs.orders.purchases.byStatus,...je?.orders?.purchases?.byStatus||{}}},sales:{...Qs.orders.sales,...je?.orders?.sales||{},byStatus:{...Qs.orders.sales.byStatus,...je?.orders?.sales?.byStatus||{}}}}})),b(new Date().toISOString()),v(""),y(String(tt||"200"));const At=Math.round((typeof performance<"u"?performance.now():Date.now())-Ge);k(`${At}ms`)}catch(je){if(!Ee.current)return;const tt=je.response?.data?.message||je.message||"Impossible de charger les statistiques.",At=je?.response?.status?String(je.response.status):"network";J&&f(tt),v(tt),y(At);const He=Math.round((typeof performance<"u"?performance.now():Date.now())-Ge);k(`${He}ms`),fe&&console.error("[UserStats] fetch error",{status:je?.response?.status,message:tt})}finally{if(!Ee.current)return;J?l(!1):m(!1)}},[t]);u.useEffect(()=>{re({showLoading:!0})},[re]);const U=()=>{c||re()};u.useEffect(()=>{let J=!0;return(async()=>{if(!t){A([]);return}P(!0);try{const{data:je}=await oe.get("/users/search-history");if(!J)return;A(Array.isArray(je)?je:[])}catch{if(!J)return;A([])}finally{J&&P(!1)}})(),()=>{J=!1}},[t]);const W=u.useMemo(()=>Array.isArray(n.followedShops)?n.followedShops:[],[n.followedShops]);u.useEffect(()=>{!t&&!o&&r("/login")},[t,o,r]),u.useEffect(()=>{if(!R||!t)return;let J=!0;return(async()=>{H(!0),q("");try{const{data:je}=await oe.get("/orders",{params:{limit:500}});if(!J)return;const tt=Array.isArray(je)?je:je?.items||[],At=new Map;tt.forEach(Tt=>{(Array.isArray(Tt.items)?Tt.items:[]).forEach(et=>{const gt=et.product?._id||et.product||"",Ze=et.snapshot?.title||et.product?.title||"Produit",xt=gt||Ze,Dt=Number(et.quantity||1),Me=Number(et.snapshot?.price||et.product?.price||0)*Dt,Qe=At.get(xt);if(Qe){Qe.quantity+=Dt,Qe.totalSpent+=Me;return}At.set(xt,{key:xt,product:et.product||null,title:Ze,image:et.snapshot?.image||et.product?.images?.[0]||null,quantity:Dt,totalSpent:Me})})});const He=Array.from(At.values()).sort((Tt,Re)=>Re.totalSpent-Tt.totalSpent);j(He)}catch(je){if(!J)return;q(je.response?.data?.message||"Impossible de charger les produits commands."),j([])}finally{J&&H(!1)}})(),()=>{J=!1}},[R]),u.useEffect(()=>{if(!Y)return;let J=!0;return(async()=>{ae(!0),ge("");try{const{data:je}=await oe.get("/orders/seller?limit=100");if(!J)return;const tt=Array.isArray(je)?je:je?.items||[],At=new Map,He=t?.id||t?._id?String(t.id||t._id):null;tt.forEach(Re=>{(Array.isArray(Re.items)?Re.items:[]).forEach(gt=>{const Ze=gt.snapshot?.shopId?._id||gt.snapshot?.shopId;if(He&&Ze&&String(Ze)!==He)return;const xt=gt.product?._id||gt.product||"",Dt=gt.snapshot?.title||gt.product?.title||"Produit",nt=xt||Dt,Me=Number(gt.quantity||1),wt=Number(gt.snapshot?.price||gt.product?.price||0)*Me,lt=At.get(nt);if(lt){lt.quantity+=Me,lt.totalEarned+=wt;return}At.set(nt,{key:nt,product:gt.product||null,title:Dt,image:gt.snapshot?.image||gt.product?.images?.[0]||null,quantity:Me,totalEarned:wt})})});const Tt=Array.from(At.values()).sort((Re,et)=>et.totalEarned-Re.totalEarned);Q(Tt)}catch(je){if(!J)return;ge(je.response?.data?.message||"Impossible de charger les produits vendus."),Q([])}finally{J&&ae(!1)}})(),()=>{J=!1}},[Y,t]);const me=u.useMemo(()=>n.breakdown.categories.reduce((J,Ge)=>Math.max(J,Ge.count||0),0)||1,[n.breakdown.categories]),ne=u.useMemo(()=>n.timeline||[],[n.timeline]),ee=u.useMemo(()=>n.orders?.purchases||Qs.orders.purchases,[n.orders]),ve=u.useMemo(()=>n.orders?.sales||Qs.orders.sales,[n.orders]);if(!t)return e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-16"},e.createElement("div",{className:"max-w-md w-full text-center space-y-6"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-indigo-600 flex items-center justify-center shadow-xl"},e.createElement(mn,{className:"w-10 h-10 text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Accs aux statistiques"),e.createElement("p",{className:"text-gray-600"},"Connectez-vous pour visualiser vos performances et insights personnaliss.")),e.createElement(ye,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all duration-200"},e.createElement(Gr,{className:"w-4 h-4"}),"Se connecter")));const be=()=>fe?e.createElement("div",{className:"max-w-7xl mx-auto px-4 pt-6"},e.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-4 text-xs text-amber-900 space-y-1"},e.createElement("p",{className:"font-semibold"},"Debug /my/stats"),e.createElement("p",null,"userId: ",t?._id||t?.id||""),e.createElement("p",null,"role: ",t?.role||"","  accountType: ",t?.accountType||""),e.createElement("p",null,"token: ",t?.token?"present":"missing"),e.createElement("p",null,"api: ","https://hdmarket-backend.onrender.com/api"),e.createElement("p",null,"lastFetchAt: ",g||""),e.createElement("p",null,"lastFetchStatus: ",E||""),e.createElement("p",null,"lastFetchMs: ",w||""),e.createElement("p",null,"lastFetchError: ",x||""),e.createElement("p",null,"tip: add `?debug=1` to URL or set `localStorage.hdmarket_debug_stats=1`"))):null;return o?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement(be,null),e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-12"},e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-xl w-64 animate-pulse"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded-lg w-96 animate-pulse"})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},[1,2,3,4].map(J=>e.createElement("div",{key:J,className:"h-40 bg-white rounded-2xl border border-gray-100 animate-pulse"})))))):p?e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-16"},e.createElement(be,null),e.createElement("div",{className:"max-w-md w-full bg-white rounded-2xl border border-red-200 shadow-xl p-8 text-center"},e.createElement("div",{className:"mx-auto w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mb-4"},e.createElement(jt,{className:"w-8 h-8 text-red-600"})),e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-2"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},p),e.createElement("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-colors"},"Ressayer"))):e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement(be,null),e.createElement("div",{className:"bg-indigo-600 text-white"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},e.createElement("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(mn,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-white/80 uppercase tracking-wide"},"Tableau de bord"),e.createElement("h1",{className:"text-3xl font-bold"},"Statistiques & Performance"))),e.createElement("p",{className:"text-white/90 text-sm max-w-2xl"},"Analysez vos performances, suivez votre croissance et optimisez votre prsence sur HDMarket.")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:U,disabled:c,className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all disabled:opacity-60"},e.createElement(Cs,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Actualisation...":"Actualiser"),e.createElement(ye,{to:"/my",className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all"},e.createElement(Ft,{className:"w-4 h-4"}),"Mes annonces"),ue&&e.createElement(ye,{to:ue,className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all"},e.createElement(Er,{className:"w-4 h-4"}),"Ma boutique"),e.createElement(ye,{to:"/profile",className:"inline-flex items-center gap-2 rounded-xl bg-white text-indigo-600 px-4 py-2.5 text-sm font-semibold hover:bg-white/90 transition-all shadow-lg"},e.createElement(tn,{className:"w-4 h-4"}),"Mon profil"))))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 pb-12"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},e.createElement(G0,{icon:Ft,label:"Annonces totales",value:Vr(n.listings.total),subtitle:`${Vr(n.listings.approved)} approuves`,gradient:"bg-indigo-600",iconBg:"bg-indigo-600"}),e.createElement(G0,{icon:Yr,label:"Favoris reus",value:Vr(n.engagement.favoritesReceived),subtitle:`${Vr(n.engagement.commentsReceived)} commentaires`,gradient:"bg-pink-600",iconBg:"bg-pink-600"}),e.createElement(G0,{icon:Jn,label:"Vues totales",value:Vr(n.performance.views),subtitle:`${Vr(n.performance.clicks)} clics WhatsApp`,gradient:"bg-purple-600",iconBg:"bg-purple-600"}),e.createElement(G0,{icon:Ea,label:"Budget annonces",value:Io(n.advertismentSpend),subtitle:"Total des frais confirms",gradient:"bg-emerald-600",iconBg:"bg-emerald-600"})),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-indigo-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-600"},e.createElement(ws,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Mes commandes"),e.createElement("p",{className:"text-sm text-gray-600"},Vr(ee.totalCount)," commande(s)"))),ee.totalItems>0&&e.createElement("button",{type:"button",onClick:()=>D(!0),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700"},"Voir dtails"))),e.createElement("div",{className:"p-6"},e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},e.createElement(ai,{title:"Total dpens",value:Io(ee.totalAmount),icon:Ea,color:"indigo"}),e.createElement(ai,{title:"Acompte vers",value:Io(ee.paidAmount),icon:ar,color:"emerald"})),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement(ai,{title:"Reste  payer",value:Io(ee.remainingAmount),icon:xN,color:"amber"}),e.createElement("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4"},e.createElement("p",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-2"},"Statuts"),e.createElement("div",{className:"space-y-1 text-xs text-gray-600"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"En attente:"),e.createElement("span",{className:"font-semibold"},Vr(ee.byStatus?.pending?.count||0))),e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"Confirmes:"),e.createElement("span",{className:"font-semibold"},Vr(ee.byStatus?.confirmed?.count||0))),e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"En cours:"),e.createElement("span",{className:"font-semibold"},Vr(ee.byStatus?.delivering?.count||0))),e.createElement("div",{className:"flex justify-between"},e.createElement("span",null,"Livres:"),e.createElement("span",{className:"font-semibold"},Vr(ee.byStatus?.delivered?.count||0))),e.createElement("div",{className:"flex justify-between pt-1 border-t border-gray-200"},e.createElement("span",{className:"text-red-600"},"Annules:"),e.createElement("span",{className:"font-semibold text-red-600"},Vr(ee.byStatus?.cancelled?.count||0)))))))),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-emerald-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-emerald-600"},e.createElement(Pr,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Mes ventes"),e.createElement("p",{className:"text-sm text-gray-600"},Vr(ve.totalCount)," commande(s)"))),ve.totalCount>0&&e.createElement("button",{type:"button",onClick:()=>z(!0),className:"text-xs font-semibold text-emerald-600 hover:text-emerald-700"},"Voir dtails"))),e.createElement("div",{className:"p-6"},e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},e.createElement(ai,{title:"Gains estims",value:Io(ve.totalAmount),icon:Ea,color:"emerald"}),e.createElement(ai,{title:"Commandes",value:Vr(ve.totalCount),icon:Ft,color:"purple"})),e.createElement("div",{className:"rounded-xl border border-gray-100 bg-gray-50 p-4"},e.createElement("p",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-3"},"Rpartition par statut"),e.createElement("div",{className:"grid grid-cols-2 gap-3 text-xs"},e.createElement("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white"},e.createElement("span",{className:"text-gray-600"},"En attente"),e.createElement("span",{className:"font-bold text-gray-900"},Vr(ve.byStatus?.pending?.count||0))),e.createElement("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white"},e.createElement("span",{className:"text-gray-600"},"Confirmes"),e.createElement("span",{className:"font-bold text-gray-900"},Vr(ve.byStatus?.confirmed?.count||0))),e.createElement("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white"},e.createElement("span",{className:"text-gray-600"},"En cours"),e.createElement("span",{className:"font-bold text-gray-900"},Vr(ve.byStatus?.delivering?.count||0))),e.createElement("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white"},e.createElement("span",{className:"text-gray-600"},"Livres"),e.createElement("span",{className:"font-bold text-gray-900"},Vr(ve.byStatus?.delivered?.count||0))),e.createElement("div",{className:"flex justify-between items-center p-2 rounded-lg bg-red-50 border border-red-200 col-span-2"},e.createElement("span",{className:"text-red-600 font-semibold"},"Annules"),e.createElement("span",{className:"font-bold text-red-700"},Vr(ve.byStatus?.cancelled?.count||0)))))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-purple-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-purple-600"},e.createElement(Er,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Boutiques suivies"),e.createElement("p",{className:"text-sm text-gray-600"},Vr(n.engagement.shopsFollowed)," boutique(s)"))),W.length>0&&e.createElement("button",{type:"button",onClick:()=>O(!0),className:"text-xs font-semibold text-purple-600 hover:text-purple-700"},"Voir toutes"))),e.createElement("div",{className:"p-6"},o?e.createElement("div",{className:"space-y-3"},[1,2].map(J=>e.createElement("div",{key:J,className:"h-16 rounded-xl bg-gray-100 animate-pulse"}))):W.length?e.createElement("div",{className:"space-y-3"},W.slice(0,3).map(J=>e.createElement(ye,{key:J._id||J.id,to:Da(J),className:"flex items-center gap-3 rounded-xl border border-gray-100 p-3 hover:border-purple-200 hover:bg-purple-50/50 transition-all group"},e.createElement("div",{className:"h-12 w-12 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0"},J.shopLogo?e.createElement("img",{src:J.shopLogo,alt:J.shopName||J.name,className:"h-full w-full object-cover"}):e.createElement("div",{className:"h-full w-full bg-purple-100 flex items-center justify-center text-purple-600 text-sm font-bold"},(J.shopName||J.name)?.charAt(0)||"B")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 group-hover:text-purple-600 transition-colors truncate"},J.shopName||J.name),e.createElement("p",{className:"text-xs text-gray-500"},Vr(J.followersCount||0)," abonn(s)")),J.shopVerified&&e.createElement(ko,{className:"w-5 h-5 text-emerald-600 flex-shrink-0"}))),W.length>3&&e.createElement("button",{type:"button",onClick:()=>O(!0),className:"w-full text-center text-sm font-semibold text-purple-600 hover:text-purple-700 py-2"},"Voir ",W.length-3," autre(s) boutique(s)")):e.createElement("div",{className:"text-center py-8"},e.createElement(Er,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.createElement("p",{className:"text-sm text-gray-500 mb-4"},"Aucune boutique suivie"),e.createElement(ye,{to:"/shops/verified",className:"inline-flex items-center gap-2 text-sm font-semibold text-purple-600 hover:text-purple-700"},"Explorer les boutiques",e.createElement(Gr,{className:"w-4 h-4 rotate-180"}))))),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-blue-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-blue-600"},e.createElement(cj,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Performance"),e.createElement("p",{className:"text-sm text-gray-600"},"Indicateurs cls")))),e.createElement("div",{className:"p-6"},e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement(ai,{title:"Taux de conversion",value:`${n.performance.conversion}%`,subtitle:"Bas sur vos annonces",icon:xN,color:"blue"}),e.createElement(ai,{title:"Commentaires",value:Vr(n.engagement.commentsReceived),subtitle:"Interactions clients",icon:Hr,color:"purple"}),e.createElement(ai,{title:"Favoris sauvegards",value:Vr(n.engagement.favoritesSaved),subtitle:"Dans votre liste",icon:Yr,color:"rose"}),e.createElement("div",{className:"rounded-xl border border-amber-100 bg-amber-50 p-4"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"p-2 rounded-lg bg-amber-600"},e.createElement(Ln,{className:"w-4 h-4 text-white"}))),e.createElement("p",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide mb-1"},"Statut annonces"),e.createElement("p",{className:"text-sm text-gray-600"},Vr(n.listings.pending)," en attente"),e.createElement("p",{className:"text-sm text-gray-600"},Vr(n.listings.rejected)," rejetes")))))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-indigo-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-600"},e.createElement(mn,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Catgories actives"),e.createElement("p",{className:"text-sm text-gray-600"},"Rpartition de vos annonces")))),e.createElement("div",{className:"p-6"},n.breakdown.categories.length===0?e.createElement("div",{className:"text-center py-8"},e.createElement(mn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.createElement("p",{className:"text-sm text-gray-500"},"Publiez des annonces pour voir vos catgories")):e.createElement("div",{className:"space-y-4"},n.breakdown.categories.map(J=>e.createElement("div",{key:J.category,className:"space-y-2"},e.createElement("div",{className:"flex items-center justify-between text-sm"},e.createElement("span",{className:"font-semibold text-gray-900 capitalize"},J.category),e.createElement("span",{className:"text-gray-600 font-bold"},Vr(J.count))),e.createElement("div",{className:"h-2.5 rounded-full bg-gray-100 overflow-hidden"},e.createElement("div",{className:"h-full rounded-full bg-indigo-600 transition-all duration-500",style:{width:`${Math.min(J.count/me*100,100)}%`}}))))))),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-pink-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-pink-600"},e.createElement(dn,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Activit mensuelle"),e.createElement("p",{className:"text-sm text-gray-600"},"Publications rcentes")))),e.createElement("div",{className:"p-6"},ne.length===0?e.createElement("div",{className:"text-center py-8"},e.createElement(dn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.createElement("p",{className:"text-sm text-gray-500"},"Publiez vos premires annonces")):e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3"},ne.map(J=>e.createElement("div",{key:`${J.year}-${J.month}`,className:"rounded-xl border border-gray-100 bg-white p-4 text-center hover:border-pink-200 transition-colors"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2"},J.label),e.createElement("p",{className:"text-2xl font-bold text-gray-900 mb-1"},Vr(J.count)),e.createElement("div",{className:"flex items-center justify-center gap-3 text-[10px] text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{className:"w-3 h-3 text-pink-500"}),Vr(J.favorites)),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Hr,{className:"w-3 h-3 text-green-500"}),Vr(J.clicks))))))))),n.topProducts.length>0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"bg-amber-50 border-b border-gray-100 px-6 py-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-amber-600"},e.createElement(zr,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Meilleures annonces"),e.createElement("p",{className:"text-sm text-gray-600"},"Vos produits les plus performants")))),e.createElement("div",{className:"p-6"},e.createElement("div",{className:"space-y-4"},n.topProducts.map((J,Ge)=>e.createElement("div",{key:J._id,className:"flex items-center gap-4 p-4 rounded-xl border border-gray-100 hover:border-amber-200 hover:bg-amber-50/30 transition-all group"},e.createElement("div",{className:"flex-shrink-0"},e.createElement("div",{className:"w-12 h-12 rounded-lg bg-amber-600 flex items-center justify-center text-white font-bold text-sm"},"#",Ge+1)),e.createElement("img",{src:J.image||"/api/placeholder/80/80",alt:J.title,className:"w-16 h-16 rounded-xl object-cover border border-gray-200"}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement(ye,{to:Dr(J),className:"font-semibold text-gray-900 hover:text-amber-600 transition-colors block truncate"},J.title),e.createElement("p",{className:"text-sm text-gray-500 capitalize truncate"},J.category||"Sans catgorie"),e.createElement("p",{className:"text-sm font-bold text-gray-900 mt-1"},Io(J.price||0))),e.createElement("div",{className:"flex items-center gap-4 text-sm"},e.createElement("div",{className:"flex items-center gap-1 text-pink-600"},e.createElement(Yr,{className:"w-4 h-4"}),e.createElement("span",{className:"font-semibold"},Vr(J.favorites))),e.createElement("div",{className:"flex items-center gap-1 text-green-600"},e.createElement(Hr,{className:"w-4 h-4"}),e.createElement("span",{className:"font-semibold"},Vr(J.whatsappClicks)))))))))),T&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:()=>O(!1)}),e.createElement("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-2xl border border-gray-100 max-h-[90vh] overflow-hidden flex flex-col",onClick:J=>J.stopPropagation()},e.createElement("div",{className:"bg-purple-600 text-white px-6 py-5"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(Er,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},"Boutiques suivies"),e.createElement("h3",{className:"text-xl font-bold mt-1"},W.length?`${W.length} boutique(s)`:"Aucune boutique suivie"))),e.createElement("button",{type:"button",onClick:()=>O(!1),className:"h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center text-white hover:bg-white/20 transition-all","aria-label":"Fermer"},e.createElement(jt,{size:20})))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6"},o?e.createElement("div",{className:"space-y-4"},[1,2,3,4].map(J=>e.createElement("div",{key:J,className:"h-20 rounded-xl bg-gray-100 animate-pulse"}))):W.length?e.createElement("div",{className:"grid gap-4 sm:grid-cols-2"},W.map(J=>e.createElement(ye,{key:J._id||J.id,to:Da(J),className:"group flex items-center gap-4 rounded-xl border-2 border-gray-100 bg-white p-4 hover:border-purple-300 hover:shadow-lg transition-all duration-200",onClick:()=>O(!1)},e.createElement("div",{className:"relative flex-shrink-0"},e.createElement("div",{className:"h-16 w-16 rounded-xl bg-gray-100 overflow-hidden ring-2 ring-gray-100 group-hover:ring-purple-200 transition-all"},J.shopLogo?e.createElement("img",{src:J.shopLogo,alt:J.shopName||J.name,className:"h-full w-full object-cover"}):e.createElement("div",{className:"h-full w-full bg-purple-100 flex items-center justify-center text-purple-600 text-lg font-bold"},(J.shopName||J.name)?.charAt(0)||"B")),J.shopVerified&&e.createElement("div",{className:"absolute -top-1 -right-1 p-1 bg-white rounded-full shadow-md"},e.createElement(ko,{className:"w-4 h-4 text-emerald-600"}))),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-bold text-gray-900 truncate group-hover:text-purple-600 transition-colors"},J.shopName||J.name),e.createElement("div",{className:"flex items-center gap-3 mt-1 flex-wrap"},J.city&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Wr,{className:"w-3 h-3 text-gray-400"}),e.createElement("p",{className:"text-xs text-gray-500"},J.city)),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(tn,{className:"w-3 h-3 text-gray-400"}),e.createElement("p",{className:"text-xs text-gray-500"},Vr(J.followersCount||0)," abonn(s)")))),e.createElement(Gr,{className:"w-5 h-5 text-gray-300 group-hover:text-purple-600 rotate-180 transition-colors flex-shrink-0"})))):e.createElement("div",{className:"text-center py-12"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-purple-100 flex items-center justify-center mb-4"},e.createElement(Er,{className:"w-10 h-10 text-purple-600"})),e.createElement("h4",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucune boutique suivie"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},"Commencez  suivre vos boutiques prfres pour les retrouver facilement"),e.createElement(ye,{to:"/shops/verified",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-purple-600 text-white font-semibold hover:bg-purple-700 shadow-lg hover:shadow-xl transition-all",onClick:()=>O(!1)},e.createElement(Er,{className:"w-4 h-4"}),"Explorer les boutiques"))))),R&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:()=>D(!1)}),e.createElement("div",{className:"relative w-full max-w-4xl rounded-3xl bg-white shadow-2xl border border-gray-100 max-h-[90vh] overflow-hidden flex flex-col",onClick:J=>J.stopPropagation()},e.createElement("div",{className:"bg-indigo-600 text-white px-6 py-5"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(ws,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},"Produits commands"),e.createElement("h3",{className:"text-xl font-bold mt-1"},ee.totalItems?`${Vr(ee.totalItems)} produit(s)`:"Aucun produit command"),e.createElement("p",{className:"text-sm text-white/80 mt-1"},"Total dpens: ",Io(ee.totalAmount)))),e.createElement("button",{type:"button",onClick:()=>D(!1),className:"h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center text-white hover:bg-white/20 transition-all","aria-label":"Fermer"},e.createElement(jt,{size:20})))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6"},K?e.createElement("div",{className:"space-y-4"},[1,2,3,4,5].map(J=>e.createElement("div",{key:J,className:"h-20 rounded-xl bg-gray-100 animate-pulse"}))):V?e.createElement("div",{className:"text-center py-12"},e.createElement("div",{className:"mx-auto w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mb-4"},e.createElement(jt,{className:"w-8 h-8 text-red-600"})),e.createElement("h4",{className:"text-lg font-bold text-gray-900 mb-2"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},V)):$.length?e.createElement("div",{className:"space-y-3"},$.map((J,Ge)=>{const je=e.createElement("div",{className:"group flex items-center gap-4 rounded-xl border-2 border-gray-100 bg-white p-4 hover:border-indigo-300 hover:shadow-lg transition-all duration-200"},e.createElement("div",{className:"flex-shrink-0"},e.createElement("div",{className:"w-12 h-12 rounded-lg bg-indigo-600 flex items-center justify-center text-white font-bold text-sm"},"#",Ge+1)),e.createElement("div",{className:"h-16 w-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0 ring-2 ring-gray-100 group-hover:ring-indigo-200 transition-all"},J.image?e.createElement("img",{src:J.image,alt:J.title,className:"h-full w-full object-cover"}):e.createElement("div",{className:"h-full w-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-sm font-bold"},J.title?.charAt(0)||"P")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-bold text-gray-900 truncate group-hover:text-indigo-600 transition-colors"},J.title),e.createElement("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Ft,{className:"w-3 h-3"}),Vr(J.quantity)," article(s)"),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Ea,{className:"w-3 h-3"}),Io(J.totalSpent)))),J.product&&e.createElement(Gr,{className:"w-5 h-5 text-gray-300 group-hover:text-indigo-600 rotate-180 transition-colors flex-shrink-0"}));return J.product?e.createElement(ye,{key:J.key,to:Dr(J.product),className:"block"},je):e.createElement("div",{key:J.key},je)})):e.createElement("div",{className:"text-center py-12"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-indigo-100 flex items-center justify-center mb-4"},e.createElement(ws,{className:"w-10 h-10 text-indigo-600"})),e.createElement("h4",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucun produit command"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},"Vos produits commands apparatront ici"),e.createElement(ye,{to:"/orders",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all",onClick:()=>D(!1)},e.createElement(ws,{className:"w-4 h-4"}),"Voir mes commandes"))))),Y&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md transition-opacity",onClick:()=>z(!1)}),e.createElement("div",{className:"relative w-full max-w-4xl rounded-3xl bg-white shadow-2xl border border-gray-100 max-h-[90vh] overflow-hidden flex flex-col",onClick:J=>J.stopPropagation()},e.createElement("div",{className:"bg-emerald-600 text-white px-6 py-5"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(Pr,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},"Produits vendus"),e.createElement("h3",{className:"text-xl font-bold mt-1"},ve.totalCount?`${Vr(ve.totalCount)} commande(s)`:"Aucune vente"),e.createElement("p",{className:"text-sm text-white/80 mt-1"},"Gains estims: ",Io(ve.totalAmount)))),e.createElement("button",{type:"button",onClick:()=>z(!1),className:"h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center text-white hover:bg-white/20 transition-all","aria-label":"Fermer"},e.createElement(jt,{size:20})))),e.createElement("div",{className:"flex-1 overflow-y-auto p-6"},B?e.createElement("div",{className:"space-y-4"},[1,2,3,4,5].map(J=>e.createElement("div",{key:J,className:"h-20 rounded-xl bg-gray-100 animate-pulse"}))):te?e.createElement("div",{className:"text-center py-12"},e.createElement("div",{className:"mx-auto w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mb-4"},e.createElement(jt,{className:"w-8 h-8 text-red-600"})),e.createElement("h4",{className:"text-lg font-bold text-gray-900 mb-2"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},te)):L.length?e.createElement("div",{className:"space-y-3"},L.map((J,Ge)=>{const je=e.createElement("div",{className:"group flex items-center gap-4 rounded-xl border-2 border-gray-100 bg-white p-4 hover:border-emerald-300 hover:shadow-lg transition-all duration-200"},e.createElement("div",{className:"flex-shrink-0"},e.createElement("div",{className:"w-12 h-12 rounded-lg bg-emerald-600 flex items-center justify-center text-white font-bold text-sm"},"#",Ge+1)),e.createElement("div",{className:"h-16 w-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0 ring-2 ring-gray-100 group-hover:ring-emerald-200 transition-all"},J.image?e.createElement("img",{src:J.image,alt:J.title,className:"h-full w-full object-cover"}):e.createElement("div",{className:"h-full w-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-sm font-bold"},J.title?.charAt(0)||"P")),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-bold text-gray-900 truncate group-hover:text-emerald-600 transition-colors"},J.title),e.createElement("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Ft,{className:"w-3 h-3"}),Vr(J.quantity)," article(s)"),e.createElement("span",{className:"flex items-center gap-1 font-semibold text-emerald-600"},e.createElement(Ea,{className:"w-3 h-3"}),Io(J.totalEarned)))),J.product&&e.createElement(Gr,{className:"w-5 h-5 text-gray-300 group-hover:text-emerald-600 rotate-180 transition-colors flex-shrink-0"}));return J.product?e.createElement(ye,{key:J.key,to:Dr(J.product),className:"block"},je):e.createElement("div",{key:J.key},je)})):e.createElement("div",{className:"text-center py-12"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-emerald-100 flex items-center justify-center mb-4"},e.createElement(Pr,{className:"w-10 h-10 text-emerald-600"})),e.createElement("h4",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucun produit vendu"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},"Vos produits vendus apparatront ici une fois que vous recevrez des commandes"),e.createElement(ye,{to:"/seller/orders",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 shadow-lg hover:shadow-xl transition-all",onClick:()=>z(!1)},e.createElement(Pr,{className:"w-4 h-4"}),"Voir mes ventes"))))))}function W$({deadline:t,remainingMs:r,isActive:a,onExpire:n}){const[s,o]=u.useState(r||0),[l,c]=u.useState(!1);if(u.useEffect(()=>{if(!a||s<=0){c(!0),n&&n();return}const x=setInterval(()=>{if(t){const v=Date.now(),y=new Date(t).getTime()-v;y<=0?(o(0),c(!0),n&&n(),clearInterval(x)):o(y)}else o(v=>{const E=v-1e3;return E<=0?(c(!0),n&&n(),clearInterval(x),0):E})},1e3);return()=>clearInterval(x)},[t,a,n]),!a||l)return null;const m=Math.floor(s/1e3),p=Math.floor(m/60),f=m%60,g=p<5,b=(x,v)=>`${String(x).padStart(2,"0")}:${String(v).padStart(2,"0")}`;return e.createElement("div",{className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border-2 ${g?"bg-red-50 border-red-300 text-red-700 dark:bg-red-900/20 dark:border-red-700 dark:text-red-400":"bg-amber-50 border-amber-300 text-amber-700 dark:bg-amber-900/20 dark:border-amber-700 dark:text-amber-400"}`},e.createElement(Xt,{size:18,className:`${g?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`}),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs font-semibold uppercase tracking-wide mb-0.5"},"Dlai d'annulation"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-lg font-black tabular-nums"},b(p,f)),e.createElement("span",{className:"text-xs font-medium"},"restant",p>1?"s":""))),g&&e.createElement(Yt,{size:16,className:"text-red-600 dark:text-red-400 animate-pulse"}))}const Ace=["Brazzaville","Pointe-Noire","Ouesso","Oyo"];function G$({isOpen:t,onClose:r,order:a,onSave:n}){const[s,o]=u.useState(""),[l,c]=u.useState("Brazzaville"),[m,p]=u.useState(!1),[f,g]=u.useState("");if(u.useEffect(()=>{t&&a&&(o(a.deliveryAddress||""),c(a.deliveryCity||"Brazzaville"),g(""))},[t,a]),!t)return null;const b=async v=>{if(v.preventDefault(),g(""),!s.trim()||s.trim().length<4){g("L'adresse doit contenir au moins 4 caractres.");return}p(!0);try{await n({deliveryAddress:s.trim(),deliveryCity:l}),r()}catch(E){g(E.response?.data?.message||"Impossible de modifier l'adresse.")}finally{p(!1)}},x=a&&a.status!=="delivering"&&a.status!=="delivered"&&a.status!=="cancelled";return e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md"},e.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/30"},e.createElement(Wr,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})),e.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-white"},"Modifier l'adresse de livraison")),e.createElement("button",{type:"button",onClick:r,className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},e.createElement(jt,{size:20}))),e.createElement("form",{onSubmit:b,className:"p-6 space-y-4"},!x&&e.createElement("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300"},"Modification impossible"),e.createElement("p",{className:"text-xs text-red-700 dark:text-red-400 mt-1"},"L'adresse ne peut tre modifie que pour les commandes en attente ou confirmes, avant l'expdition."))),f&&e.createElement("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"},e.createElement("p",{className:"text-sm text-red-700 dark:text-red-300"},f)),x&&e.createElement(e.Fragment,null,a&&e.createElement("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"Adresse actuelle"),e.createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-white"},a.deliveryAddress),e.createElement("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1"},a.deliveryCity)),e.createElement("div",null,e.createElement("label",{htmlFor:"deliveryAddress",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Nouvelle adresse de livraison *"),e.createElement("textarea",{id:"deliveryAddress",value:s,onChange:v=>o(v.target.value),placeholder:"Entrez la nouvelle adresse complte...",rows:3,required:!0,minLength:4,maxLength:300,className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"}),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Minimum 4 caractres, maximum 300 caractres")),e.createElement("div",null,e.createElement("label",{htmlFor:"deliveryCity",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Ville *"),e.createElement("select",{id:"deliveryCity",value:l,onChange:v=>c(v.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"},Ace.map(v=>e.createElement("option",{key:v,value:v},v)))),e.createElement("div",{className:"p-3 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"},e.createElement("p",{className:"text-xs text-blue-800 dark:text-blue-300"},e.createElement("span",{className:"font-semibold"},"Note :")," La modification de l'adresse sera notifie aux vendeurs concerns."))),e.createElement("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("button",{type:"button",onClick:r,disabled:m,className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all disabled:opacity-50"},"Annuler"),x&&e.createElement("button",{type:"submit",disabled:m||!s.trim(),className:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},m?"Enregistrement...":"Enregistrer")))))}const cf={pending:"En attente",pending_installment:"Validation vente",installment_active:"Tranche active",overdue_installment:"Tranche en retard",confirmed:"Commande confirme",delivering:"En cours de livraison",delivered:"Commande termine",completed:"Paiement termin",cancelled:"Commande annule"},Cg={pending:{header:"bg-gray-600",card:"bg-gray-50 border-gray-200 text-gray-700"},pending_installment:{header:"bg-violet-600",card:"bg-violet-50 border-violet-200 text-violet-800"},installment_active:{header:"bg-indigo-600",card:"bg-indigo-50 border-indigo-200 text-indigo-800"},overdue_installment:{header:"bg-rose-600",card:"bg-rose-50 border-rose-200 text-rose-800"},confirmed:{header:"bg-amber-600",card:"bg-amber-50 border-amber-200 text-amber-800"},delivering:{header:"bg-blue-600",card:"bg-blue-50 border-blue-200 text-blue-800"},delivered:{header:"bg-emerald-600",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},completed:{header:"bg-emerald-700",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},cancelled:{header:"bg-red-600",card:"bg-red-50 border-red-200 text-red-800"}},K$={pending:Xt,pending_installment:Xt,installment_active:Sa,overdue_installment:Yt,confirmed:Ft,delivering:Kr,delivered:ar,completed:ar,cancelled:jt},_ce={confirmed:"Confirme",delivering:"En cours de livraison",delivered:"Livre",cancelled:"Annule"},Pce=[{key:"all",label:"Toutes",icon:ea,count:null},{key:"pending",label:"En attente",icon:Xt,count:null},{key:"pending_installment",label:"Vente  confirmer",icon:qg,count:null},{key:"installment_active",label:"Tranches actives",icon:Sa,count:null},{key:"overdue_installment",label:"Tranches en retard",icon:Yt,count:null},{key:"confirmed",label:"Confirmes",icon:Ft,count:null},{key:"delivering",label:"En livraison",icon:Kr,count:null},{key:"delivered",label:"Livres",icon:ar,count:null},{key:"completed",label:"Paiement termin",icon:ar,count:null},{key:"cancelled",label:"Annules",icon:jt,count:null}],EO=6,Ag=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,H1=t=>t?t.paymentType==="installment"&&t.status==="completed"?t.installmentSaleStatus||"confirmed":t.status||"pending":"pending",Tce=({order:t})=>{const r=t.items?.length?t.items:t.productSnapshot?[{snapshot:t.productSnapshot,quantity:1,product:t.product}]:[],a=r.reduce((w,k)=>w+Number(k.snapshot?.price||0)*Number(k.quantity||1),0),n=Number(t.totalAmount??a),s=t.paymentType==="installment",o=s?t.installmentPlan||{}:null,l=Number(o?.totalAmount??n),c=Number(o?.amountPaid||0),m=s&&t.status==="completed"?t.installmentSaleStatus||"confirmed":t.installmentSaleStatus||"",p=H1(t),f=l>0?Math.min(100,Math.round(c/l*100)):0,g=r[0],b=g?.snapshot?.shopName||"Boutique",x=g?.snapshot?.title||"Produit",v=r.length,E=K$[p]||Xt,y=Cg[p]||Cg.pending;return e.createElement(ye,{to:`/orders/detail/${t._id}`,className:"block bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all overflow-hidden"},e.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/50"},e.createElement("div",{className:"flex items-center gap-1.5 min-w-0"},e.createElement(Er,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),e.createElement("span",{className:"font-semibold text-gray-900 truncate"},b),e.createElement(Ar,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})),e.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold border flex-shrink-0 ${y.card}`},e.createElement(E,{className:"w-3.5 h-3.5"}),cf[p]||p)),e.createElement("div",{className:"p-4 flex gap-3"},g?.snapshot?.image?e.createElement("img",{src:g.snapshot.image,alt:x,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ft,{className:"w-8 h-8 text-indigo-600"})),e.createElement("div",{className:"min-w-0 flex-1"},e.createElement("p",{className:"font-semibold text-gray-900 text-sm line-clamp-2"},x),v>1&&e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"+",v-1," autre",v>2?"s":""),e.createElement("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600"},e.createElement("span",null,Ag(g?.snapshot?.price??0)),e.createElement("span",{className:"text-gray-400"},""),e.createElement("span",null,g?.quantity??1)),s&&e.createElement("div",{className:"mt-2 space-y-1"},e.createElement("p",{className:"text-xs font-semibold text-indigo-700"},"Progression tranche: ",f,"%"),e.createElement("div",{className:"h-1.5 rounded-full bg-indigo-100 overflow-hidden"},e.createElement("div",{className:"h-full bg-indigo-600",style:{width:`${f}%`}})),o?.nextDueDate&&e.createElement("p",{className:"text-[11px] text-gray-500"},"Prochaine chance: ",new Date(o.nextDueDate).toLocaleDateString("fr-FR")),t.status==="completed"&&e.createElement("p",{className:"text-[11px] text-gray-500"},"Statut vente: ",_ce[m]||"Confirme")))),e.createElement("div",{className:"px-4 pb-4 flex items-center justify-between gap-3"},e.createElement("span",{className:"text-xs text-gray-500"},s?"Montant valid":"Montant pay"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"font-bold text-gray-900"},Ag(s?c:n)),e.createElement("span",{className:"text-indigo-600 font-medium text-sm flex items-center gap-0.5"},"Voir le dtail ",e.createElement(Ar,{className:"w-4 h-4"})))))};function Oce(){cs();const{user:t}=u.useContext(Sr),[r,a]=u.useState([]),[n,s]=u.useState(!1),[o,l]=u.useState(""),[c,m]=u.useState(1),[p,f]=u.useState({total:0,totalPages:1}),[g,b]=u.useState({total:0,totalAmount:0,byStatus:{}}),[x,v]=u.useState(!1),[E,y]=u.useState(!1),[w,k]=u.useState(null),[C,A]=u.useState(!1),[S,P]=u.useState(null),[T,O]=u.useState(""),[R,D]=u.useState(""),[$,j]=u.useState({}),[K,H]=u.useState(!1),[V,q]=u.useState({dateFrom:"",dateTo:"",amountMin:"",amountMax:"",shopName:""}),[Y,z]=u.useState([]),[L,Q]=u.useState("card"),[B,ae]=u.useState(!1),[te,ge]=u.useState(navigator.onLine),[ue,Ee]=u.useState(null),[fe,re]=u.useState(null),[U,W]=u.useState(null),me=u.useRef(0),ne=u.useRef(0),[ee,ve]=u.useState(0),be=u.useRef(null),{status:J}=Jo(),{addItem:Ge}=u.useContext($l);wa();const je=rs(768),tt=u.useMemo(()=>J&&Object.keys(cf).includes(J)?J:"all",[J]);u.useEffect(()=>{const Me=()=>ge(!0),Qe=()=>ge(!1);return window.addEventListener("online",Me),window.addEventListener("offline",Qe),()=>{window.removeEventListener("online",Me),window.removeEventListener("offline",Qe)}},[]),u.useEffect(()=>{if(r.length>0&&te)try{localStorage.setItem("cached_orders",JSON.stringify({orders:r,timestamp:Date.now(),status:tt}))}catch(Me){console.warn("Failed to cache orders:",Me)}},[r,te,tt]),u.useEffect(()=>{if(!te&&r.length===0)try{const Me=localStorage.getItem("cached_orders");if(Me){const{orders:Qe}=JSON.parse(Me);a(Qe)}}catch(Me){console.warn("Failed to load cached orders:",Me)}},[te,r.length]);const At=u.useCallback(Me=>{be.current?.scrollTop===0&&(me.current=Me.touches[0].clientY)},[]),He=u.useCallback(Me=>{if(me.current===0)return;ne.current=Me.touches[0].clientY;const Qe=ne.current-me.current;Qe>0&&Qe<150&&ve(Qe)},[]),Tt=u.useCallback(async()=>{if(ee>80&&!B&&te){ae(!0);try{const Me=new URLSearchParams;Me.set("page",c),Me.set("limit",EO),tt!=="all"&&Me.set("status",tt);const{data:Qe}=await oe.get(`/orders?${Me.toString()}`),wt=Array.isArray(Qe)?Qe:Qe?.items||[];a(wt),f({total:Qe?.total??wt.length,totalPages:Math.max(1,Number(Qe?.totalPages)||1)})}catch(Me){console.error("Refresh failed:",Me)}finally{ae(!1)}}me.current=0,ne.current=0,ve(0)},[ee,B,te,c,tt]);u.useEffect(()=>{m(1)},[tt]),u.useEffect(()=>{let Me=!0;return(async()=>{v(!0);try{const{data:wt}=await oe.get("/orders?limit=1000");if(!Me)return;const lt=Array.isArray(wt)?wt:wt?.items||[],we=lt.length,vt=lt.reduce((pe,Pe)=>{const ht=(Pe.items||(Pe.productSnapshot?[{snapshot:Pe.productSnapshot,quantity:1}]:[])).reduce((Lt,nr)=>Lt+Number(nr.snapshot?.price||0)*Number(nr.quantity||1),0);return pe+Number(Pe.totalAmount??ht)},0),pt=lt.reduce((pe,Pe)=>{const ft=H1(Pe);return pe[ft]=(pe[ft]||0)+1,pe},{});b({total:we,totalAmount:vt,byStatus:pt});const Le=new Set;lt.forEach(pe=>{(pe.items||(pe.productSnapshot?[{snapshot:pe.productSnapshot}]:[])).forEach(ft=>{ft.snapshot?.shopName&&Le.add(ft.snapshot.shopName)})}),z(Array.from(Le).sort())}catch(wt){console.error("Error loading stats:",wt)}finally{Me&&v(!1)}})(),()=>{Me=!1}},[]);const Re=async Me=>{if(!Me||Me.length===0||!t?._id)return{};try{return(await Promise.all(Me.map(async wt=>{try{const{data:lt}=await oe.get(`/orders/${wt}/messages`),we=Array.isArray(lt)?lt.filter(vt=>String(vt.recipient?._id)===String(t._id)&&!vt.readAt):[];return{orderId:wt,count:we.length}}catch{return{orderId:wt,count:0}}}))).reduce((wt,{orderId:lt,count:we})=>(wt[lt]=we,wt),{})}catch{return{}}},et=u.useRef(!1);u.useEffect(()=>{(async()=>{et.current||s(!0),l("");try{const Qe=new URLSearchParams;Qe.set("page",c),Qe.set("limit",EO),tt!=="all"&&Qe.set("status",tt),R.trim()&&Qe.set("search",R.trim());const{data:wt}=await oe.get(`/orders?${Qe.toString()}`),lt=Array.isArray(wt)?wt:wt?.items||[],we=Math.max(1,Number(wt?.totalPages)||1);a(lt);const vt=lt.map(pe=>pe._id),pt=await Re(vt);j(pt),f({total:wt?.total??lt.length,totalPages:we});const Le=Number(wt?.page);Number.isFinite(Le)&&Le>0&&Le!==c&&m(Le)}catch(Qe){l(Qe.response?.data?.message||"Impossible de charger vos commandes."),a([]),f({total:0,totalPages:1})}finally{s(!1),et.current=!0}})()},[tt,c,R,t?._id]),u.useEffect(()=>{const Me=setTimeout(()=>{D(T.trim())},400);return()=>clearTimeout(Me)},[T]),u.useEffect(()=>{m(1)},[tt,R]);const gt=u.useMemo(()=>r.filter(Me=>{if(V.dateFrom){const we=new Date(Me.createdAt),vt=new Date(V.dateFrom);if(vt.setHours(0,0,0,0),we<vt)return!1}if(V.dateTo){const we=new Date(Me.createdAt),vt=new Date(V.dateTo);if(vt.setHours(23,59,59,999),we>vt)return!1}const wt=(Me.items||(Me.productSnapshot?[{snapshot:Me.productSnapshot,quantity:1}]:[])).reduce((we,vt)=>we+Number(vt.snapshot?.price||0)*Number(vt.quantity||1),0),lt=Number(Me.totalAmount??wt);return!(V.amountMin&&lt<Number(V.amountMin)||V.amountMax&&lt>Number(V.amountMax)||V.shopName&&!(Me.items||(Me.productSnapshot?[{snapshot:Me.productSnapshot}]:[])).some(pt=>pt.snapshot?.shopName?.toLowerCase().includes(V.shopName.toLowerCase())))}),[r,V]),Ze=V.dateFrom||V.dateTo||V.amountMin||V.amountMax||V.shopName,xt=()=>{q({dateFrom:"",dateTo:"",amountMin:"",amountMax:"",shopName:""})},Dt=Ze?"Aucune commande ne correspond  vos critres de filtrage.":tt==="all"?"Vous n'avez pas encore de commande.":`Aucune commande ${cf[tt].toLowerCase()} pour le moment.`,nt=async Me=>{if(w)try{const{data:Qe}=await oe.patch(`/orders/${w._id}/address`,Me);a(wt=>wt.map(lt=>lt._id===w._id?Qe:lt)),y(!1),k(null)}catch(Qe){throw Qe}};return n&&r.length===0?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-12"},e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-xl w-64 animate-pulse"}),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},[1,2,3].map(Me=>e.createElement("div",{key:Me,className:"h-32 bg-white rounded-2xl border border-gray-100 animate-pulse"}))),e.createElement("div",{className:"space-y-4"},[1,2].map(Me=>e.createElement("div",{key:Me,className:"h-64 bg-white rounded-2xl border border-gray-100 animate-pulse"})))))):e.createElement("div",{className:"min-h-screen bg-gray-50",ref:be,onTouchStart:At,onTouchMove:He,onTouchEnd:Tt},ee>0&&e.createElement("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center bg-indigo-600 text-white transition-all duration-200",style:{height:Math.min(ee,80)}},e.createElement(Cs,{className:`w-5 h-5 transition-transform ${ee>80?"animate-spin":""}`,style:{transform:`rotate(${ee*2}deg)`}}),e.createElement("span",{className:"ml-2 text-sm font-medium"},ee>80?"Relchez pour actualiser":"Tirez pour actualiser")),B&&e.createElement("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center bg-indigo-600 text-white py-3"},e.createElement(Cs,{className:"w-5 h-5 animate-spin"}),e.createElement("span",{className:"ml-2 text-sm font-medium"},"Actualisation...")),!te&&e.createElement("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center gap-2 bg-amber-500 text-white py-2 px-4"},e.createElement(pj,{className:"w-4 h-4"}),e.createElement("span",{className:"text-sm font-medium"},"Mode hors ligne - Donnes en cache")),e.createElement("div",{className:`bg-indigo-600 text-white ${te?"":"mt-10"}`},e.createElement("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${je?"py-6 safe-area-top":"py-12"}`},e.createElement("div",{className:"flex flex-col gap-4 sm:gap-6 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-1 sm:space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:`rounded-xl bg-white/20 backdrop-blur-sm ${je?"p-2":"p-3"}`},e.createElement(ea,{className:je?"w-5 h-5":"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-xs sm:text-sm font-medium text-white/80 uppercase tracking-wide"},"Mes commandes"),e.createElement("h1",{className:je?"text-xl font-bold":"text-3xl font-bold"},"Suivi de vos commandes"))),!je&&e.createElement("p",{className:"text-white/90 text-sm max-w-2xl"},"Consultez l'tat de vos commandes, suivez les livraisons et accdez  tous les dtails de vos achats.")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 min-h-[44px] text-sm font-semibold text-white hover:bg-white/20 transition-all active:scale-[0.98]"},e.createElement(Gr,{className:"w-4 h-4"}),"Accueil"),e.createElement(ye,{to:"/my/stats",className:"inline-flex items-center gap-2 rounded-xl bg-white text-indigo-600 px-4 py-2.5 min-h-[44px] text-sm font-semibold hover:bg-white/90 transition-all shadow-lg active:scale-[0.98]"},e.createElement(Pr,{className:"w-4 h-4"}),"Statistiques"))))),e.createElement("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${je?"-mt-4 pb-6":"-mt-8 pb-12"} pb-[env(safe-area-inset-bottom)]`},!x&&g.total>0&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 sm:mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},g.total)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total commandes"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Toutes vos commandes")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-emerald-600"},e.createElement(Ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Ag(g.totalAmount))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total dpens"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant total de vos achats")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-amber-600"},e.createElement(Xt,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},g.byStatus.pending||0)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"En attente"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Commandes en cours de traitement"))),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 mb-6 sm:mb-8 space-y-4"},e.createElement("div",{className:`flex items-center gap-2 sm:gap-3 ${je?"flex-col":""}`},e.createElement("div",{className:`relative w-full ${je?"":"flex-1 max-w-md"}`},e.createElement(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.createElement("input",{type:"text",placeholder:"Rechercher par produit, boutique, adresse...",value:T,onChange:Me=>O(Me.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border-2 border-gray-200 bg-white text-sm font-medium text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",title:"Rechercher par nom de produit, nom de boutique, adresse de livraison ou code de livraison"}),T&&e.createElement("button",{type:"button",onClick:()=>O(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},e.createElement(jt,{className:"w-4 h-4"}))),e.createElement("div",{className:`flex items-center gap-2 ${je?"w-full":""}`},e.createElement("button",{type:"button",onClick:()=>H(!K),className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 min-h-[44px] ${K||Ze?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-200"} ${je?"flex-1":""}`},e.createElement(ls,{className:"w-4 h-4"}),e.createElement("span",null,"Filtres"),Ze&&e.createElement("span",{className:"px-1.5 py-0.5 rounded-full text-xs font-bold bg-white/20"},[V.dateFrom||V.dateTo,V.amountMin||V.amountMax,V.shopName].filter(Boolean).length),K?e.createElement(wo,{className:"w-4 h-4"}):e.createElement(Za,{className:"w-4 h-4"})),!je&&e.createElement("div",{className:"flex items-center rounded-xl border border-gray-200 bg-gray-50 p-1"},e.createElement("button",{type:"button",onClick:()=>Q("card"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 ${L==="card"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,title:"Vue carte"},e.createElement(iu,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Carte")),e.createElement("button",{type:"button",onClick:()=>Q("list"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 ${L==="list"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,title:"Vue liste"},e.createElement(E2,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Liste"))))),K&&e.createElement("div",{className:"border-t border-gray-100 pt-4 space-y-4"},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-700 uppercase tracking-wide"},e.createElement(dn,{className:"w-3.5 h-3.5"}),"Priode"),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("div",{className:"relative"},e.createElement("input",{type:"date",value:V.dateFrom,onChange:Me=>q(Qe=>({...Qe,dateFrom:Me.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 text-sm text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Du"}),e.createElement("span",{className:"absolute -top-2 left-2 px-1 bg-white text-[10px] text-gray-500"},"Du")),e.createElement("div",{className:"relative"},e.createElement("input",{type:"date",value:V.dateTo,onChange:Me=>q(Qe=>({...Qe,dateTo:Me.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 text-sm text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Au"}),e.createElement("span",{className:"absolute -top-2 left-2 px-1 bg-white text-[10px] text-gray-500"},"Au")))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-700 uppercase tracking-wide"},e.createElement(Ea,{className:"w-3.5 h-3.5"}),"Montant (FCFA)"),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("div",{className:"relative"},e.createElement("input",{type:"number",value:V.amountMin,onChange:Me=>q(Qe=>({...Qe,amountMin:Me.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 text-sm text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Minimum",min:"0"}),e.createElement("span",{className:"absolute -top-2 left-2 px-1 bg-white text-[10px] text-gray-500"},"Min")),e.createElement("div",{className:"relative"},e.createElement("input",{type:"number",value:V.amountMax,onChange:Me=>q(Qe=>({...Qe,amountMax:Me.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 text-sm text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Maximum",min:"0"}),e.createElement("span",{className:"absolute -top-2 left-2 px-1 bg-white text-[10px] text-gray-500"},"Max")))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center gap-2 text-xs font-bold text-gray-700 uppercase tracking-wide"},e.createElement(Er,{className:"w-3.5 h-3.5"}),"Vendeur/Boutique"),e.createElement("select",{value:V.shopName,onChange:Me=>q(Qe=>({...Qe,shopName:Me.target.value})),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 text-sm text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all bg-white"},e.createElement("option",{value:""},"Toutes les boutiques"),Y.map(Me=>e.createElement("option",{key:Me,value:Me},Me)))),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"text-xs font-bold text-transparent"},"Actions"),e.createElement("button",{type:"button",onClick:xt,disabled:!Ze,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg border-2 border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},e.createElement(hN,{className:"w-4 h-4"}),"Rinitialiser"))),Ze&&e.createElement("div",{className:"flex flex-wrap items-center gap-2 pt-2 border-t border-gray-100"},e.createElement("span",{className:"text-xs font-semibold text-gray-500"},"Filtres actifs:"),(V.dateFrom||V.dateTo)&&e.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-indigo-50 border border-indigo-200 text-xs font-medium text-indigo-700"},e.createElement(dn,{className:"w-3 h-3"}),V.dateFrom&&V.dateTo?`${new Date(V.dateFrom).toLocaleDateString("fr-FR")} - ${new Date(V.dateTo).toLocaleDateString("fr-FR")}`:V.dateFrom?`Depuis ${new Date(V.dateFrom).toLocaleDateString("fr-FR")}`:`Jusqu'au ${new Date(V.dateTo).toLocaleDateString("fr-FR")}`,e.createElement("button",{type:"button",onClick:()=>q(Me=>({...Me,dateFrom:"",dateTo:""})),className:"ml-1 hover:text-indigo-900"},e.createElement(jt,{className:"w-3 h-3"}))),(V.amountMin||V.amountMax)&&e.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-emerald-50 border border-emerald-200 text-xs font-medium text-emerald-700"},e.createElement(Ea,{className:"w-3 h-3"}),V.amountMin&&V.amountMax?`${Number(V.amountMin).toLocaleString("fr-FR")} - ${Number(V.amountMax).toLocaleString("fr-FR")} FCFA`:V.amountMin?`Min ${Number(V.amountMin).toLocaleString("fr-FR")} FCFA`:`Max ${Number(V.amountMax).toLocaleString("fr-FR")} FCFA`,e.createElement("button",{type:"button",onClick:()=>q(Me=>({...Me,amountMin:"",amountMax:""})),className:"ml-1 hover:text-emerald-900"},e.createElement(jt,{className:"w-3 h-3"}))),V.shopName&&e.createElement("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-amber-50 border border-amber-200 text-xs font-medium text-amber-700"},e.createElement(Er,{className:"w-3 h-3"}),V.shopName,e.createElement("button",{type:"button",onClick:()=>q(Me=>({...Me,shopName:""})),className:"ml-1 hover:text-amber-900"},e.createElement(jt,{className:"w-3 h-3"}))))),e.createElement("div",{className:`flex gap-2 ${je?"overflow-x-auto pb-2 -mx-1 px-1 hide-scrollbar snap-x snap-mandatory":"flex-wrap"}`,style:je?{WebkitOverflowScrolling:"touch"}:void 0},Pce.map(Me=>{const Qe=Me.key===tt,wt=Me.key==="all"?"/orders":`/orders/${Me.key}`,lt=Me.icon,we=Me.key==="all"?g.total:g.byStatus[Me.key]||0;return e.createElement(ye,{key:Me.key,to:wt,className:`group relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 min-h-[44px] flex-shrink-0 snap-start ${Qe?"bg-indigo-600 text-white shadow-lg scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200"}`},e.createElement(lt,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"whitespace-nowrap"},Me.label),we>0&&e.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold flex-shrink-0 ${Qe?"bg-white/20 text-white":"bg-indigo-100 text-indigo-700"}`},we))}))),o?e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-bold text-red-800 mb-1"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},o)))):gt.length===0?e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-gray-100 flex items-center justify-center mb-4"},Ze?e.createElement(ls,{className:"w-10 h-10 text-gray-400"}):e.createElement(ea,{className:"w-10 h-10 text-gray-400"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},Ze?"Aucun rsultat":"Aucune commande"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},Dt),e.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3"},Ze&&e.createElement("button",{type:"button",onClick:xt,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 min-h-[48px] rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition-all active:scale-[0.98]"},e.createElement(hN,{className:"w-4 h-4"}),"Rinitialiser les filtres"),e.createElement(ye,{to:"/",className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 min-h-[48px] rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all active:scale-[0.98]"},e.createElement(ba,{className:"w-4 h-4"}),"Dcouvrir nos produits"))):e.createElement(e.Fragment,null,L==="list"&&!je&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:"hidden md:grid md:grid-cols-12 gap-4 px-6 py-3 bg-gray-50 border-b border-gray-100 text-xs font-bold text-gray-500 uppercase tracking-wide"},e.createElement("div",{className:"col-span-1"},"N"),e.createElement("div",{className:"col-span-3"},"Produit(s)"),e.createElement("div",{className:"col-span-2"},"Boutique"),e.createElement("div",{className:"col-span-2"},"Date"),e.createElement("div",{className:"col-span-2"},"Montant"),e.createElement("div",{className:"col-span-2"},"Statut")),e.createElement("div",{className:"divide-y divide-gray-100"},gt.map(Me=>{const Qe=Me.items&&Me.items.length?Me.items:Me.productSnapshot?[{snapshot:Me.productSnapshot,quantity:1,product:Me.product}]:[],wt=Qe.reduce((ht,Lt)=>ht+Number(Lt.snapshot?.price||0)*Number(Lt.quantity||1),0),lt=Number(Me.totalAmount??wt),we=H1(Me),vt=K$[we]||Xt,pt=Cg[we]||Cg.pending,Le=Qe[0],pe=Le?.snapshot?.shopName||"N/A",Pe=Le?.snapshot?.title||"Produit",ft=Qe.length;return e.createElement(ye,{key:Me._id,to:`/orders/detail/${Me._id}`,className:"grid grid-cols-1 md:grid-cols-12 gap-2 md:gap-4 px-4 md:px-6 py-4 hover:bg-gray-50 transition-colors items-center"},e.createElement("div",{className:"col-span-1 flex items-center gap-2 md:block"},e.createElement("span",{className:"md:hidden text-xs font-medium text-gray-500"},"N:"),e.createElement("span",{className:"font-bold text-gray-900 text-sm"},"#",Me._id.slice(-6))),e.createElement("div",{className:"col-span-3 flex items-center gap-3"},Le?.snapshot?.image?e.createElement("img",{src:Le.snapshot.image,alt:Pe,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ft,{className:"w-5 h-5 text-indigo-600"})),e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"font-semibold text-gray-900 text-sm truncate"},Pe),ft>1&&e.createElement("p",{className:"text-xs text-gray-500"},"+",ft-1," autre",ft>2?"s":""))),e.createElement("div",{className:"col-span-2 flex items-center gap-2 md:block"},e.createElement("span",{className:"md:hidden text-xs font-medium text-gray-500"},"Boutique:"),e.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},e.createElement(Er,{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0"}),e.createElement("span",{className:"truncate"},pe))),e.createElement("div",{className:"col-span-2 flex items-center gap-2 md:block"},e.createElement("span",{className:"md:hidden text-xs font-medium text-gray-500"},"Date:"),e.createElement("div",{className:"flex items-center gap-1 text-sm text-gray-600"},e.createElement(dn,{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0"}),e.createElement("span",null,new Date(Me.createdAt).toLocaleDateString("fr-FR")))),e.createElement("div",{className:"col-span-2 flex items-center gap-2 md:block"},e.createElement("span",{className:"md:hidden text-xs font-medium text-gray-500"},"Montant:"),e.createElement("span",{className:"font-bold text-gray-900 text-sm"},Ag(lt))),e.createElement("div",{className:"col-span-2 flex items-center gap-2"},e.createElement("span",{className:"md:hidden text-xs font-medium text-gray-500"},"Statut:"),e.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold border ${pt.card}`},e.createElement(vt,{className:"w-3.5 h-3.5"}),cf[we]||we)))}))),(L==="card"||je)&&e.createElement("div",{className:`space-y-4 sm:space-y-6 ${je?"pb-4":""}`},gt.map(Me=>e.createElement(Tce,{key:Me._id,order:Me}))),p.totalPages>1&&e.createElement("div",{className:"mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-between bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("p",{className:"text-sm text-gray-600"},"Page ",e.createElement("span",{className:"font-bold text-gray-900"},c)," sur"," ",e.createElement("span",{className:"font-bold text-gray-900"},p.totalPages)," "," ",e.createElement("span",{className:"font-bold text-gray-900"},p.total)," commande",p.total>1?"s":""),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>m(Me=>Math.max(1,Me-1)),disabled:c<=1,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>m(Me=>Math.min(p.totalPages,Me+1)),disabled:c>=p.totalPages,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},"Suivant")))),e.createElement(G$,{isOpen:E,onClose:()=>{y(!1),k(null)},order:w,onSave:nt})))}const Mce={pending:"En attente",pending_installment:"Validation de vente en attente",installment_active:"Paiement par tranche actif",overdue_installment:"Tranche en retard",confirmed:"Commande confirme",delivering:"En cours de livraison",delivered:"Commande termine",completed:"Paiement termin",cancelled:"Commande annule"},wO={pending:{header:"bg-gray-600",card:"bg-gray-50 border-gray-200 text-gray-700"},pending_installment:{header:"bg-violet-600",card:"bg-violet-50 border-violet-200 text-violet-800"},installment_active:{header:"bg-indigo-600",card:"bg-indigo-50 border-indigo-200 text-indigo-800"},overdue_installment:{header:"bg-rose-600",card:"bg-rose-50 border-rose-200 text-rose-800"},confirmed:{header:"bg-amber-600",card:"bg-amber-50 border-amber-200 text-amber-800"},delivering:{header:"bg-blue-600",card:"bg-blue-50 border-blue-200 text-blue-800"},delivered:{header:"bg-emerald-600",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},completed:{header:"bg-emerald-700",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},cancelled:{header:"bg-red-600",card:"bg-red-50 border-red-200 text-red-800"}},jce={pending:Xt,pending_installment:Xt,installment_active:Sa,overdue_installment:Yt,confirmed:Ft,delivering:Kr,delivered:ar,completed:ar,cancelled:jt},Rce={confirmed:"Confirme",delivering:"En cours de livraison",delivered:"Livre",cancelled:"Annule"},$ce=[{id:"pending",label:"Commande en attente",description:"Votre commande est enregistre.",icon:Xt,color:"gray"},{id:"confirmed",label:"Commande confirme",description:"Validation et prparation.",icon:Ft,color:"amber"},{id:"delivering",label:"En cours de livraison",description:"Le colis est en route.",icon:Kr,color:"blue"},{id:"delivered",label:"Commande termine",description:"Livre avec succs.",icon:ar,color:"emerald"},{id:"cancelled",label:"Commande annule",description:"Cette commande a t annule.",icon:jt,color:"red"}],Lce=[{id:"pending_installment",label:"Validation de vente",description:"Le vendeur doit confirmer la preuve de vente.",icon:Xt,color:"violet"},{id:"installment_active",label:"Plan actif",description:"Les tranches sont en cours de paiement.",icon:Sa,color:"indigo"},{id:"overdue_installment",label:"En retard",description:"Au moins une tranche est en retard.",icon:Yt,color:"rose"},{id:"completed",label:"Paiement termin",description:"Toutes les tranches ont t valides.",icon:ar,color:"emerald"},{id:"cancelled",label:"Commande annule",description:"Cette commande a t annule.",icon:jt,color:"red"}],Vi=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):null,Js=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Ice=t=>t?t.paymentType==="installment"&&t.status==="completed"?t.installmentSaleStatus||"confirmed":t.status||"pending":"pending",Dce=t=>{switch(t){case"paid":return"Pay";case"proof_uploaded":return"Preuve envoye";case"overdue":return"En retard";case"waived":return"Annul";default:return" payer"}},Fce=t=>{switch(t){case"paid":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"proof_uploaded":return"bg-indigo-50 text-indigo-700 border-indigo-200";case"overdue":return"bg-rose-50 text-rose-700 border-rose-200";case"waived":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-amber-50 text-amber-700 border-amber-200"}},zce=({status:t,paymentType:r})=>{const a=r==="installment"?Lce:$ce,n=a.findIndex(l=>l.id===t),s=n>=0?n:0,o={gray:"bg-gray-600",amber:"bg-amber-600",blue:"bg-blue-600",emerald:"bg-emerald-600",violet:"bg-violet-600",indigo:"bg-indigo-600",rose:"bg-rose-600"};return e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 p-5"},e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-600"},e.createElement(Pr,{className:"w-4 h-4 text-white"})),e.createElement("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Suivi de commande")),e.createElement("div",{className:"relative"},e.createElement("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"},e.createElement("div",{className:"absolute top-0 left-0 w-full bg-indigo-600 transition-all duration-500",style:{height:`${s/(a.length-1)*100}%`}})),e.createElement("div",{className:"space-y-6 relative"},a.filter(l=>l.id!=="cancelled").map((l,c)=>{const m=l.icon,p=s>=c;return e.createElement("div",{key:l.id,className:"flex items-start gap-4 relative"},e.createElement("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${p?`${o[l.color]||"bg-gray-600"} border-transparent text-white`:"border-gray-300 text-gray-400 bg-white"}`},e.createElement(m,{size:16})),e.createElement("div",{className:"flex-1 pt-1"},e.createElement("p",{className:`text-sm font-bold ${p?"text-gray-900":"text-gray-500"}`},l.label),e.createElement("p",{className:`text-xs ${p?"text-gray-600":"text-gray-400"}`},l.description)))}))))};function Bce(){const{orderId:t}=Jo(),r=wa(),{user:a}=e.useContext(Sr),{addItem:n}=e.useContext($l),s=cs(),[o,l]=u.useState(null),[c,m]=u.useState(!0),[p,f]=u.useState(""),[g,b]=u.useState(0),[x,v]=u.useState(null),[E,y]=u.useState(!1),[w,k]=u.useState(!1),[C,A]=u.useState({}),[S,P]=u.useState(-1),[T,O]=u.useState([]),[R,D]=u.useState(!1),$=rs(),j=u.useCallback(async()=>{if(t){m(!0),f("");try{const{data:Re}=await oe.get(`/orders/detail/${t}`);l(Re);const{data:et}=await oe.get(`/orders/${t}/messages`),gt=Array.isArray(et)?et.filter(Ze=>String(Ze.recipient?._id)===String(a?._id)&&!Ze.readAt):[];b(gt.length)}catch(Re){f(Re.response?.data?.message||"Commande introuvable."),l(null)}finally{m(!1)}}},[t,a?._id]);u.useEffect(()=>{j()},[j]),u.useEffect(()=>{if(!o?.items?.length&&!o?.productSnapshot)return;const Re=new Set((o?.items||[]).map(Ze=>Ze.product?._id||Ze.product).filter(Boolean).map(String));o?.productSnapshot&&o?.product&&Re.add(String(o.product._id||o.product));let et=!0;D(!0);const gt=o?.items?.[0]?.product?.category||o?.items?.[0]?.product?.category||null;return oe.get("/products/public",{params:{limit:12,sort:"new",...gt?{category:gt}:{}}}).then(Ze=>{if(!et)return;const Dt=(Array.isArray(Ze.data)?Ze.data:Ze.data?.items||Ze.data?.data||[]).filter(nt=>nt?._id&&!Re.has(String(nt._id)));O(Dt.slice(0,10))}).catch(()=>{et&&O([])}).finally(()=>{et&&D(!1)}),()=>{et=!1}},[o?._id,o?.items?.length]);const K=async()=>{if(!(!o||!confirm("En confirmant, vous autorisez le vendeur  traiter immdiatement cette commande."))){v(o._id);try{const{data:Re}=await oe.post(`/orders/${o._id}/skip-cancellation-window`);l(Re)}catch(Re){alert(Re.response?.data?.message||"Impossible de lever le dlai.")}finally{v(null)}}},H=async()=>{if(!(!o||!confirm("tes-vous sr de vouloir annuler cette commande ?")))try{const{data:Re}=await oe.patch(`/orders/${o._id}/status`,{status:"cancelled"});l(Re)}catch(Re){alert(Re.response?.data?.message||"Impossible d'annuler la commande.")}},V=async Re=>{if(o)try{const{data:et}=await oe.patch(`/orders/${o._id}/address`,Re);l(et),k(!1)}catch(et){throw et}},q=(Re,et,gt)=>{A(Ze=>({...Ze,[Re]:{...Ze[Re]||{},[et]:et==="transactionCode"?String(gt||"").replace(/\D/g,"").slice(0,10):gt}}))},Y=async(Re,et)=>{if(!o)return;const gt=C[Re]||{payerName:et?.transactionProof?.senderName||a?.name||"",transactionCode:et?.transactionProof?.transactionCode||""},Ze=String(gt.payerName||"").trim(),xt=String(gt.transactionCode||"").replace(/\D/g,""),Dt=Number(et?.amount||0);if(!Ze){alert("Le nom de lexpditeur est requis.");return}if(xt.length!==10){alert("LID de transaction doit contenir exactement 10 chiffres.");return}if(!Number.isFinite(Dt)||Dt<=0){alert("Montant de tranche invalide.");return}P(Re);try{const{data:nt}=await oe.post(`/orders/${o._id}/installment/payments/${Re}/proof`,{payerName:Ze,transactionCode:xt,amount:Dt});l(nt),A(Me=>{const Qe={...Me};return delete Qe[Re],Qe}),alert("Preuve transactionnelle transmise au vendeur. En attente de validation.")}catch(nt){alert(nt.response?.data?.message||"Impossible de transmettre la preuve.")}finally{P(-1)}},z=async()=>{if(!o?.items?.length)return;y(!0);const Re=[],et=[];try{for(const gt of o.items){const Ze=gt.product?._id||gt.product,xt=gt.quantity||1;if(!Ze){et.push(gt.snapshot?.title||"Produit inconnu");continue}try{await n(Ze,xt),Re.push(gt.snapshot?.title||"Produit")}catch{et.push(gt.snapshot?.title||"Produit inconnu")}}if(Re.length>0){const gt=et.length>0?`${Re.length} article(s) ajout(s). ${et.length} non disponible(s).`:"Tous les articles ont t ajouts au panier !";alert(gt),r("/cart")}else et.length>0&&alert("Aucun article disponible pour le moment.")}catch{alert("Erreur lors de l'ajout au panier.")}finally{y(!1)}},L=Re=>{const et=Re?.items?.length?Re.items:Re?.productSnapshot?[{snapshot:Re.productSnapshot,quantity:1}]:[],gt=et.reduce((wt,lt)=>wt+Number(lt.snapshot?.price||0)*Number(lt.quantity||1),0),Ze=Number(Re?.totalAmount??gt),xt=wt=>String(wt??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Dt=et.map((wt,lt)=>{const we=xt(wt.snapshot?.title||"Produit"),vt=xt(wt.snapshot?.shopName||""),pt=Number(wt.quantity||1),Le=Js((wt.snapshot?.price||0)*pt);return`<tr><td>${lt+1}</td><td><div class="title">${we}</div>${vt?`<div class="meta">Boutique: ${vt}</div>`:""}</td><td class="right">x${pt}</td><td class="right">${Le}</td></tr>`}).join(""),nt=xt(Re?._id?.slice(-6)||""),Me=`<!doctype html><html lang="fr"><head><meta charset="utf-8"/><title>Bon de commande ${nt}</title><style>body{font-family:sans-serif;margin:32px;} table{width:100%;border-collapse:collapse;} th,td{border-bottom:1px solid #eee;padding:10px;} .right{text-align:right;} .total-row td{font-weight:700;}</style></head><body><h1>Bon de commande #${nt}</h1><p>${xt(new Date(Re?.createdAt).toLocaleDateString("fr-FR"))}</p><table><thead><tr><th>#</th><th>Article</th><th class="right">Qt</th><th class="right">Total</th></tr></thead><tbody>${Dt}<tr class="total-row"><td colspan="3" class="right">Total</td><td class="right">${Js(Ze)}</td></tr></tbody></table></body></html>`,Qe=window.open("","_blank");if(Qe)Qe.document.write(Me),Qe.document.close(),Qe.focus();else{const wt=new Blob([Me],{type:"text/html"}),lt=URL.createObjectURL(wt);window.location.href=lt,setTimeout(()=>URL.revokeObjectURL(lt),1500)}};if(c&&!o)return e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"animate-pulse text-gray-400"},"Chargement..."));if(p||!o)return e.createElement("div",{className:"min-h-screen bg-gray-50 p-4"},e.createElement(ye,{to:"/orders",className:"inline-flex items-center gap-2 text-indigo-600 font-medium mb-4"},e.createElement(Gr,{className:"w-4 h-4"})," Retour aux commandes"),e.createElement("p",{className:"text-red-600"},p||"Commande introuvable."));const Q=o.items?.length?o.items:o.productSnapshot?[{snapshot:o.productSnapshot,quantity:1,product:o.product}]:[],B=Q.reduce((Re,et)=>Re+Number(et.snapshot?.price||0)*Number(et.quantity||1),0),ae=Number(o.totalAmount??B),te=Number(o.paidAmount||0),ge=Number(o.remainingAmount??Math.max(0,ae-te)),ue=o.paymentType==="installment",Ee=ue?o.installmentPlan||{}:null,fe=Array.isArray(Ee?.schedule)?Ee.schedule:[],re=fe.findIndex(Re=>!["paid","waived"].includes(Re?.status)),U=re===-1?fe.map((Re,et)=>({entry:Re,index:et})):fe.slice(0,re+1).map((Re,et)=>({entry:Re,index:et})),W=Number(Ee?.totalAmount??ae),me=Number(Ee?.amountPaid??te),ne=Number(Ee?.remainingAmount??Math.max(0,W-me)),ee=W>0?Math.min(100,Math.round(me/W*100)):0,ve=!!Ee?.saleConfirmationConfirmedAt,be=ue&&o.status==="completed"?o.installmentSaleStatus||"confirmed":o.installmentSaleStatus||"",J=Ice(o),Ge=ue&&o.status==="completed"?"full":o.paymentType,je=!!(ue||te||o.paymentTransactionCode||o.paymentName),At=(o.createdBy?._id&&o.customer?._id?o.createdBy._id===o.customer._id:!1)?"Vous":o.createdBy?.name||o.createdBy?.email||"Admin HDMarket",He=jce[J]||Xt,Tt=wO[J]||wO.pending;return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-3xl mx-auto px-4 py-6"},e.createElement(ye,{to:"/orders",className:"inline-flex items-center gap-2 text-indigo-600 font-medium mb-4 hover:text-indigo-700"},e.createElement(Gr,{className:"w-4 h-4"})," Retour aux commandes"),e.createElement("div",{className:"bg-white rounded-2xl border-2 border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:`${Tt.header} text-white px-6 py-4`},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-2 rounded-lg bg-white/20 backdrop-blur-sm"},e.createElement(He,{className:"w-5 h-5"})),e.createElement("div",null,e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},"Commande"),e.createElement("h3",{className:"text-lg font-bold"},"#",o._id.slice(-6)))),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"px-3 py-1.5 rounded-lg bg-white/20 text-xs font-bold uppercase"},Mce[J]||J),e.createElement("button",{type:"button",onClick:()=>L(o),className:"p-2 rounded-lg bg-white/20 hover:bg-white/30",title:"Tlcharger le bon de commande"},e.createElement(zo,{className:"w-4 h-4"}))))),e.createElement("div",{className:"p-6 space-y-6"},o.cancellationWindow?.isActive&&J!=="cancelled"&&e.createElement("div",{className:"space-y-3"},e.createElement(W$,{deadline:o.cancellationWindow.deadline,remainingMs:o.cancellationWindow.remainingMs,isActive:o.cancellationWindow.isActive,onExpire:()=>l(Re=>Re?{...Re,cancellationWindow:{...Re.cancellationWindow,isActive:!1,remainingMs:0}}:null)}),e.createElement("button",{type:"button",onClick:K,disabled:x===o._id,className:"w-full px-6 py-3 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 disabled:opacity-70"},e.createElement(Ga,{className:"w-5 h-5 inline mr-2"}),x===o._id?"En cours...":"Autoriser le vendeur  traiter"),e.createElement("button",{type:"button",onClick:H,className:"w-full px-6 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700"},e.createElement(jt,{className:"w-5 h-5 inline mr-2"})," Annuler la commande")),e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement(Ft,{className:"w-4 h-4 text-gray-500"}),e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Articles commands")),e.createElement("div",{className:"space-y-3"},Q.map((Re,et)=>e.createElement("div",{key:`${o._id}-${et}`,className:"flex items-start gap-4 p-4 rounded-xl border border-gray-100 bg-gray-50/50"},Re.snapshot?.image||Re.product?.images?.[0]?e.createElement("img",{src:Re.snapshot?.image||Re.product?.images?.[0],alt:Re.snapshot?.title||"Produit",className:"w-16 h-16 rounded-xl object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-16 h-16 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ft,{className:"w-6 h-6 text-indigo-600"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex justify-between gap-2 mb-1"},Re.product?e.createElement(ye,{to:Dr(Re.product),...s,className:"font-bold text-gray-900 hover:text-indigo-600 truncate"},Re.snapshot?.title||"Produit"):e.createElement("span",{className:"font-bold text-gray-900"},Re.snapshot?.title||"Produit"),e.createElement("span",{className:"text-sm font-bold text-gray-900 whitespace-nowrap"},Js((Re.snapshot?.price||0)*(Re.quantity||1)))),e.createElement("div",{className:"flex items-center gap-3 text-xs text-gray-500 mb-1"},e.createElement("span",null,"Quantit: ",Re.quantity||1),e.createElement("span",null,"Prix unitaire: ",Js(Re.snapshot?.price||0))),Re.snapshot?.shopName&&e.createElement("div",{className:"flex items-center gap-1 text-xs text-gray-500"},e.createElement(Er,{className:"w-3 h-3"}),e.createElement("span",null,Re.snapshot.shopName))))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},o.deliveryCode&&e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-2 flex items-center gap-2"},e.createElement(Ga,{className:"w-4 h-4 text-indigo-500"})," Code de livraison"),e.createElement("div",{className:"p-5 rounded-xl border-2 border-indigo-200 bg-indigo-50"},e.createElement("p",{className:"text-xs font-semibold text-indigo-700 uppercase mb-2"},"Prsentez ce code au livreur"),e.createElement("div",{className:"text-4xl font-black text-indigo-900 tracking-wider font-mono text-center"},o.deliveryCode))),e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase flex items-center gap-2"},e.createElement(Wr,{className:"w-4 h-4 text-gray-500"})," Adresse de livraison"),(o.status==="pending"||o.status==="confirmed"||o.status==="pending_installment")&&e.createElement("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 rounded-lg border border-indigo-200 bg-indigo-50 text-indigo-700 text-xs font-semibold hover:bg-indigo-100"},"Modifier")),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-2"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},o.deliveryAddress||"Non renseigne"),e.createElement("p",{className:"text-xs text-gray-500"},o.deliveryCity||"Ville non renseigne"),o.deliveryGuy&&e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs"},e.createElement(Kr,{className:"w-3 h-3 text-blue-600 inline mr-1"}),e.createElement("span",{className:"font-semibold"},"Livreur:")," ",o.deliveryGuy.name||"Non assign",o.deliveryGuy.phone&&`  ${o.deliveryGuy.phone}`)))),o.trackingNote&&e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(v2,{className:"w-4 h-4 text-gray-500"})," Note de suivi"),e.createElement("div",{className:"p-4 rounded-xl border border-blue-100 bg-blue-50/50"},e.createElement("p",{className:"text-sm text-gray-700"},o.trackingNote))),e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-3 flex items-center gap-2"},e.createElement(Sa,{className:"w-4 h-4 text-gray-500"})," Paiement"),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-3"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Total commande"),e.createElement("span",{className:"text-lg font-bold text-gray-900"},Js(ue?W:ae))),je&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between pt-2 border-t border-gray-200"},e.createElement("span",{className:"text-sm text-gray-600"},ue?"Montant valid":"Acompte vers"),e.createElement("span",{className:"text-sm font-semibold text-emerald-700"},Js(ue?me:te))),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Reste  payer"),e.createElement("span",{className:"text-sm font-semibold text-amber-700"},Js(ue?ne:ge))),ue&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden"},e.createElement("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${ee}%`}})),e.createElement("p",{className:"mt-1 text-xs text-gray-600"},"Progression: ",ee,"%")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-600"},e.createElement("p",null,"Prochaine chance:"," ",e.createElement("span",{className:"font-semibold text-gray-900"},Ee?.nextDueDate?Vi(Ee.nextDueDate):"Aucune")),e.createElement("p",null,"Pnalits cumules:"," ",e.createElement("span",{className:"font-semibold text-gray-900"},Js(Ee?.totalPenaltyAccrued||0)))),o.status==="completed"&&e.createElement("div",{className:"pt-2 border-t border-gray-200 text-xs text-gray-600"},e.createElement("p",null,"Statut de vente:"," ",e.createElement("span",{className:"font-semibold text-gray-900"},Rce[be]||"Confirme")))),!ue&&(o.paymentName||o.paymentTransactionCode)&&e.createElement("div",{className:"pt-2 border-t border-gray-200 text-xs text-gray-500"},o.paymentName&&e.createElement("p",null,"Payeur: ",o.paymentName),o.paymentTransactionCode&&e.createElement("p",null,"Transaction: ",o.paymentTransactionCode))))),ue&&e.createElement("div",{className:"rounded-2xl border border-indigo-200 bg-indigo-50/40 p-4 space-y-3"},e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase flex items-center gap-2"},e.createElement(qg,{className:"w-4 h-4 text-indigo-600"})," Validation de vente"),e.createElement("p",{className:"text-sm text-gray-700"},"Statut:"," ",e.createElement("span",{className:"font-semibold"},ve?"Confirme par le vendeur":"En attente de confirmation vendeur")),Ee?.guarantor?.required&&e.createElement("p",{className:"text-xs text-gray-600"},"Garant enregistr: ",Ee?.guarantor?.fullName||"N/A"," (",Ee?.guarantor?.phone||"N/A",")")),ue&&e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 space-y-4"},e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase flex items-center gap-2"},e.createElement(Sa,{className:"w-4 h-4 text-gray-500"})," chancier et preuves transactionnelles"),U.length?U.map(({entry:Re,index:et})=>{const Ze=ve&&re===et&&["pending","overdue"].includes(Re?.status),xt=Re?.transactionProof||{},Dt=!!xt?.transactionCode,nt=C[et]||{},Me={payerName:nt?.payerName??xt?.senderName??a?.name??"",transactionCode:nt?.transactionCode??xt?.transactionCode??""};return e.createElement("div",{key:`${o._id}-installment-${et}`,className:"rounded-xl border border-gray-200 p-3 space-y-2"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},"Tranche ",et+1,"  ",Js(Re?.amount||0)),e.createElement("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-xs font-semibold ${Fce(Re?.status)}`},Dce(Re?.status))),e.createElement("div",{className:"text-xs text-gray-600"},"chance: ",Re?.dueDate?Vi(Re.dueDate):"Non dfinie"),Dt&&e.createElement("div",{className:"rounded-lg border border-indigo-100 bg-indigo-50/50 p-2 text-xs text-indigo-900 space-y-1"},e.createElement("p",null,"Expditeur: ",e.createElement("span",{className:"font-semibold"},xt.senderName||"N/A")),e.createElement("p",null,"ID transaction:"," ",e.createElement("span",{className:"font-semibold"},xt.transactionCode||"N/A")),e.createElement("p",null,"Montant:"," ",e.createElement("span",{className:"font-semibold"},Js(xt.amount||Re?.amount||0))),xt?.submittedAt&&e.createElement("p",null,"Soumis le:"," ",e.createElement("span",{className:"font-semibold"},Vi(xt.submittedAt)))),!ve&&e.createElement("p",{className:"text-xs text-amber-700"},"La vente doit tre confirme par le vendeur avant lenvoi des preuves transactionnelles."),Ze&&e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:"block text-[11px] font-bold uppercase text-gray-700 mb-1"},"Nom de lexpditeur"),e.createElement("input",{type:"text",value:String(Me.payerName??""),onChange:Qe=>q(et,"payerName",Qe.target.value),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-xs",placeholder:"Nom affich dans le transfert"})),e.createElement("div",{className:"rounded-xl border border-blue-100 bg-blue-50/50 p-3 overflow-hidden"},e.createElement("p",{className:"text-xs font-bold uppercase text-blue-800 mb-2"},"Exemple: o trouver l'ID dans le SMS"),e.createElement("img",{src:"/images/transaction-id-sms-example-checkout.png",alt:"Exemple de SMS Mobile Money montrant l'ID de la transaction",className:"w-full max-w-sm mx-auto rounded-lg border border-gray-200 bg-white shadow-sm object-contain"})),e.createElement("div",null,e.createElement("label",{className:"block text-[11px] font-bold uppercase text-gray-700 mb-1"},"ID transaction (10 chiffres)"),e.createElement("input",{type:"text",inputMode:"numeric",maxLength:10,value:String(Me.transactionCode??""),onChange:Qe=>q(et,"transactionCode",Qe.target.value),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-xs",placeholder:"Ex: 7232173826"})),e.createElement("div",null,e.createElement("label",{className:"block text-[11px] font-bold uppercase text-gray-700 mb-1"},"Montant de la tranche"),e.createElement("input",{type:"text",value:Js(Re?.amount||0),readOnly:!0,className:"w-full rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-xs text-gray-700"})),e.createElement("button",{type:"button",onClick:()=>Y(et,Re),disabled:S===et||!String(Me.payerName||"").trim()||String(Me.transactionCode||"").replace(/\D/g,"").length!==10,className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-3 py-2 text-xs font-semibold text-white hover:bg-indigo-700 disabled:opacity-60"},S===et?"Envoi...":"Envoyer la preuve transactionnelle")),Re?.status==="proof_uploaded"&&e.createElement("p",{className:"text-xs text-indigo-700"},"Votre preuve est transmise. En attente de validation vendeur."))}):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune tranche disponible.")),e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(Ga,{className:"w-4 h-4 text-gray-500"})," Gestionnaire"),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},At),o.createdBy?.email&&e.createElement("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1"},e.createElement(gi,{className:"w-3 h-3"}),o.createdBy.email))),J==="cancelled"&&e.createElement("div",{className:"rounded-2xl border-2 border-red-200 bg-red-50 p-4 space-y-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Yt,{className:"w-5 h-5 text-red-600"}),e.createElement("p",{className:"text-sm font-bold text-red-800"},"Commande annule")),o.cancellationReason&&e.createElement("p",{className:"text-sm text-red-700"},"Raison: ",o.cancellationReason),o.cancelledAt&&e.createElement("p",{className:"text-xs text-red-600"},"Annule le ",Vi(o.cancelledAt))),J!=="cancelled"&&e.createElement(zce,{status:J,paymentType:Ge}),e.createElement("div",{className:"space-y-3"},e.createElement(Yd,{order:o,buttonText:"Contacter le vendeur",unreadCount:g}),J==="delivered"&&o.items?.length>0&&e.createElement("button",{type:"button",onClick:z,disabled:E,className:"w-full px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-50"},E?e.createElement(Xt,{className:"w-5 h-5 animate-spin"}):e.createElement(ba,{className:"w-5 h-5"}),e.createElement("span",null,E?"Ajout au panier...":"Commander  nouveau"))),e.createElement("div",{className:"flex flex-wrap gap-4 pt-4 border-t border-gray-100 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(dn,{className:"w-3 h-3"})," Cre: ",Vi(o.createdAt)),o.shippedAt&&e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Kr,{className:"w-3 h-3"})," Expdie: ",Vi(o.shippedAt)),o.deliveredAt&&e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(ar,{className:"w-3 h-3"})," Livre: ",Vi(o.deliveredAt))))),$&&e.createElement("div",{className:"mt-8 md:hidden"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2"},e.createElement(ba,{className:"w-4 h-4 text-indigo-600"}),"Suggestions & produits similaires"),e.createElement(ye,{to:"/suggestions",className:"text-sm font-semibold text-indigo-600 flex items-center gap-0.5"},"Voir tout ",e.createElement(Ar,{className:"w-4 h-4"}))),R?e.createElement("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide"},[1,2,3,4,5].map(Re=>e.createElement("div",{key:Re,className:"flex-shrink-0 w-28 h-40 rounded-xl bg-gray-100 animate-pulse"}))):T.length>0?e.createElement("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide"},T.map(Re=>{const et=Array.isArray(Re.images)?Re.images[0]:Re.image,gt=Re.price!=null?Re.price:Re.prix;return e.createElement(ye,{key:Re._id,to:Dr(Re),...s,className:"flex-shrink-0 w-28 rounded-xl border border-gray-100 bg-white overflow-hidden shadow-sm hover:shadow-md active:scale-[0.98] transition-all"},e.createElement("div",{className:"aspect-square w-full bg-gray-50 relative"},et?e.createElement("img",{src:et,alt:Re.title||"Produit",className:"w-full h-full object-cover"}):e.createElement("div",{className:"w-full h-full flex items-center justify-center"},e.createElement(Ft,{className:"w-8 h-8 text-gray-300"}))),e.createElement("div",{className:"p-2"},e.createElement("p",{className:"text-xs font-semibold text-gray-900 line-clamp-2 min-h-[2rem]"},Re.title||"Produit"),e.createElement("p",{className:"text-xs font-bold text-indigo-600 mt-0.5"},Js(gt))))})):e.createElement(ye,{to:"/suggestions",className:"block py-6 rounded-xl border border-dashed border-gray-200 text-center text-sm text-gray-500 hover:border-indigo-200 hover:text-indigo-600"},"Dcouvrir des suggestions personnalises"))),e.createElement(G$,{isOpen:w,onClose:()=>k(!1),order:o,onSave:V}))}const W1={pending:"En attente",pending_installment:"Validation vente",installment_active:"Tranche active",overdue_installment:"Retard tranche",confirmed:"Commande confirme",delivering:"En cours de livraison",delivered:"Commande termine",completed:"Paiement termin",cancelled:"Commande annule"},NO={pending:{header:"bg-gray-600",card:"bg-gray-50 border-gray-200 text-gray-700"},pending_installment:{header:"bg-violet-600",card:"bg-violet-50 border-violet-200 text-violet-800"},installment_active:{header:"bg-indigo-600",card:"bg-indigo-50 border-indigo-200 text-indigo-800"},overdue_installment:{header:"bg-rose-600",card:"bg-rose-50 border-rose-200 text-rose-800"},confirmed:{header:"bg-amber-600",card:"bg-amber-50 border-amber-200 text-amber-800"},delivering:{header:"bg-blue-600",card:"bg-blue-50 border-blue-200 text-blue-800"},delivered:{header:"bg-emerald-600",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},completed:{header:"bg-emerald-700",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},cancelled:{header:"bg-red-600",card:"bg-red-50 border-red-200 text-red-800"}},qce={pending:Xt,pending_installment:Xt,installment_active:Sa,overdue_installment:Yt,confirmed:Ft,delivering:Kr,delivered:ar,completed:ar,cancelled:jt},Uce={confirmed:"Confirme",delivering:"En cours de livraison",delivered:"Livre",cancelled:"Annule"},Vce=[{key:"all",label:"Toutes",icon:ea,count:null},{key:"pending",label:"En attente",icon:Xt,count:null},{key:"pending_installment",label:"Vente  confirmer",icon:qg,count:null},{key:"installment_active",label:"Tranches actives",icon:Sa,count:null},{key:"overdue_installment",label:"Tranches en retard",icon:Yt,count:null},{key:"confirmed",label:"Confirmes",icon:Ft,count:null},{key:"delivering",label:"En livraison",icon:Kr,count:null},{key:"delivered",label:"Livres",icon:ar,count:null},{key:"completed",label:"Paiement termin",icon:ar,count:null},{key:"cancelled",label:"Annules",icon:jt,count:null}],Hce=6,ud=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Wce=({order:t})=>{const r=Array.isArray(t.items)?t.items:[],a=r.reduce((y,w)=>y+Number(w.snapshot?.price||0)*Number(w.quantity||1),0),n=Number(t.totalAmount??a),s=t.paymentType==="installment",o=s?t.installmentPlan||{}:null,l=Number(o?.totalAmount??n),c=Number(o?.amountPaid||0),m=s&&t.status==="completed"?t.installmentSaleStatus||"confirmed":t.installmentSaleStatus||"",p=l>0?Math.min(100,Math.round(c/l*100)):0,f=r[0],g=f?.snapshot?.title||"Produit",b=r.length,x=t.customer?.name||"Client",v=qce[t.status]||Xt,E=NO[t.status]||NO.pending;return e.createElement(ye,{to:`/seller/orders/detail/${t._id}`,className:"block bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all overflow-hidden"},e.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 bg-gray-50/50"},e.createElement("div",{className:"flex items-center gap-1.5 min-w-0"},e.createElement(Ia,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),e.createElement("span",{className:"font-semibold text-gray-900 truncate"},x),e.createElement(Ar,{className:"w-4 h-4 text-gray-400 flex-shrink-0"})),e.createElement("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold border flex-shrink-0 ${E.card}`},e.createElement(v,{className:"w-3.5 h-3.5"}),W1[t.status])),e.createElement("div",{className:"p-4 flex gap-3"},f?.snapshot?.image?e.createElement("img",{src:f.snapshot.image,alt:g,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ft,{className:"w-8 h-8 text-indigo-600"})),e.createElement("div",{className:"min-w-0 flex-1"},e.createElement("p",{className:"font-semibold text-gray-900 text-sm line-clamp-2"},g),b>1&&e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"+",b-1," autre",b>2?"s":""),e.createElement("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600"},e.createElement("span",null,ud(f?.snapshot?.price??0)),e.createElement("span",{className:"text-gray-400"},""),e.createElement("span",null,f?.quantity??1)),s&&e.createElement("div",{className:"mt-2 space-y-1"},e.createElement("p",{className:"text-xs font-semibold text-indigo-700"},"Tranche: ",p,"% valid"),e.createElement("div",{className:"h-1.5 rounded-full bg-indigo-100 overflow-hidden"},e.createElement("div",{className:"h-full bg-indigo-600",style:{width:`${p}%`}})),t.status==="completed"&&e.createElement("p",{className:"text-[11px] text-gray-500"},"Statut vente: ",Uce[m]||"Confirme")))),e.createElement("div",{className:"px-4 pb-4 flex items-center justify-between gap-3"},e.createElement("span",{className:"text-xs text-gray-500"},"Total"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"font-bold text-gray-900"},ud(n)),e.createElement("span",{className:"text-indigo-600 font-medium text-sm flex items-center gap-0.5"},"Voir le dtail ",e.createElement(Ar,{className:"w-4 h-4"})))))};function Gce(){const{user:t}=u.useContext(Sr),{showToast:r}=ms();cs(),rs(768);const[a,n]=u.useState([]),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState(1),[f,g]=u.useState({total:0,totalPages:1}),[b,x]=u.useState(""),[v,E]=u.useState({id:"",message:""}),[y,w]=u.useState(!1),[k,C]=u.useState(null),[A,S]=u.useState(""),[P,T]=u.useState(!1),[O,R]=u.useState({total:0,totalAmount:0,byStatus:{}}),[D,$]=u.useState(!1),[j,K]=u.useState({totalInstallmentSales:0,revenueInProgress:0,collectedAmount:0,riskExposure:0,overdueOrders:0,completedOrders:0}),[H,V]=u.useState(!1),[q,Y]=u.useState({}),{status:z}=Jo(),L=u.useMemo(()=>z&&Object.keys(W1).includes(z)?z:"all",[z]);u.useEffect(()=>{p(1)},[L]),u.useEffect(()=>{let ue=!0;return(async()=>{$(!0);try{const{data:fe}=await oe.get("/orders/seller?limit=1000");if(!ue)return;const re=Array.isArray(fe)?fe:fe?.items||[],U=new Set,W=re.filter(ve=>!ve?._id||U.has(ve._id)?!1:(U.add(ve._id),!0)),me=W.length,ne=W.reduce((ve,be)=>{const Ge=(be.items||[]).reduce((je,tt)=>je+Number(tt.snapshot?.price||0)*Number(tt.quantity||1),0);return ve+Number(be.totalAmount??Ge)},0),ee=W.reduce((ve,be)=>{const J=be.status||"pending";return ve[J]=(ve[J]||0)+1,ve},{});R({total:me,totalAmount:ne,byStatus:ee})}catch(fe){console.error("Error loading stats:",fe)}finally{ue&&$(!1)}})(),()=>{ue=!1}},[]),u.useEffect(()=>{let ue=!0;return(async()=>{V(!0);try{const{data:fe}=await oe.get("/orders/seller/installment/analytics");if(!ue)return;K({totalInstallmentSales:Number(fe?.totalInstallmentSales||0),revenueInProgress:Number(fe?.revenueInProgress||0),collectedAmount:Number(fe?.collectedAmount||0),riskExposure:Number(fe?.riskExposure||0),overdueOrders:Number(fe?.overdueOrders||0),completedOrders:Number(fe?.completedOrders||0)})}catch(fe){console.error("Error loading installment analytics:",fe)}finally{ue&&V(!1)}})(),()=>{ue=!1}},[]);const Q=async ue=>{if(!ue||ue.length===0||!t?._id)return{};try{return(await Promise.all(ue.map(async fe=>{try{const{data:re}=await oe.get(`/orders/${fe}/messages`),U=Array.isArray(re)?re.filter(W=>String(W.recipient?._id)===String(t._id)&&!W.readAt):[];return{orderId:fe,count:U.length}}catch{return{orderId:fe,count:0}}}))).reduce((fe,{orderId:re,count:U})=>(fe[re]=U,fe),{})}catch{return{}}},B=u.useRef(!1);u.useEffect(()=>{(async()=>{B.current||o(!0),c("");try{const Ee=new URLSearchParams;Ee.set("page",m),Ee.set("limit",Hce),L!=="all"&&Ee.set("status",L);const{data:fe}=await oe.get(`/orders/seller?${Ee.toString()}`),re=Array.isArray(fe)?fe:fe?.items||[],U=new Set,W=re.filter(be=>!be?._id||U.has(be._id)?!1:(U.add(be._id),!0)),me=Math.max(1,Number(fe?.totalPages)||1);n(W);const ne=re.map(be=>be._id),ee=await Q(ne);Y(ee),g({total:fe?.total??re.length,totalPages:me});const ve=Number(fe?.page);Number.isFinite(ve)&&ve>0&&ve!==m&&p(ve)}catch(Ee){c(Ee.response?.data?.message||"Impossible de charger les commandes clients."),n([]),g({total:0,totalPages:1})}finally{o(!1),B.current=!0}})()},[L,m,t?._id]);const ae=()=>{w(!1),C(null),S("")},te=async()=>{if(!k)return;const ue=A.trim();if(!ue||ue.length<5){r("Veuillez fournir une raison d'annulation (minimum 5 caractres).",{variant:"error"});return}T(!0);try{const{data:Ee}=await oe.post(`/orders/seller/${k}/cancel`,{reason:ue}),re=a.find(U=>U._id===k)?.status||"pending";n(U=>{const W=U.map(ne=>ne._id===k?Ee:ne),me=new Set;return W.filter(ne=>!ne?._id||me.has(ne._id)?!1:(me.add(ne._id),!0))}),R(U=>({...U,byStatus:{...U.byStatus,[re]:Math.max(0,(U.byStatus[re]||1)-1),cancelled:(U.byStatus.cancelled||0)+1}})),r("Commande annule avec succs. Le client a t notifi.",{variant:"success"}),ae()}catch(Ee){const fe=Ee.response?.data?.message||Ee.response?.data?.details?.[0]||"Impossible d'annuler la commande.";r(fe,{variant:"error"})}finally{T(!1)}},ge=L==="all"?"Aucune commande client pour le moment.":`Aucune commande ${W1[L].toLowerCase()} pour le moment.`;return s&&a.length===0?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-12"},e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-xl w-64 animate-pulse"}),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},[1,2,3].map(ue=>e.createElement("div",{key:ue,className:"h-32 bg-white rounded-2xl border border-gray-100 animate-pulse"}))),e.createElement("div",{className:"space-y-4"},[1,2].map(ue=>e.createElement("div",{key:ue,className:"h-64 bg-white rounded-2xl border border-gray-100 animate-pulse"})))))):e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"bg-indigo-600 text-white"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},e.createElement("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(ea,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-white/80 uppercase tracking-wide"},"Commandes clients"),e.createElement("h1",{className:"text-3xl font-bold"},"Gestion des commandes"))),e.createElement("p",{className:"text-white/90 text-sm max-w-2xl"},"Suivez les commandes passes sur vos produits, mettez  jour leur statut et grez les livraisons.")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all"},e.createElement(Gr,{className:"w-4 h-4"}),"Accueil"),(t?.role==="admin"||t?.role==="manager")&&e.createElement(ye,{to:"/admin/orders",className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all"},e.createElement(ea,{className:"w-4 h-4"}),"Toutes les commandes (admin)"),e.createElement(ye,{to:"/my/stats",className:"inline-flex items-center gap-2 rounded-xl bg-white text-indigo-600 px-4 py-2.5 text-sm font-semibold hover:bg-white/90 transition-all shadow-lg"},e.createElement(Pr,{className:"w-4 h-4"}),"Statistiques"))))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 pb-12"},!D&&O.total>0&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},O.total)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Total commandes"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Toutes les commandes clients")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-emerald-600"},e.createElement(Ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},ud(O.totalAmount))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Chiffre d'affaires"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant total des commandes")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-amber-600"},e.createElement(Xt,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},O.byStatus.pending||0)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"En attente"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Commandes en cours de traitement"))),!H&&j.totalInstallmentSales>0&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-indigo-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(Sa,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},j.totalInstallmentSales)),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Ventes en tranche"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Termines: ",j.completedOrders,"  Retard: ",j.overdueOrders)),e.createElement("div",{className:"bg-white rounded-2xl border border-amber-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-amber-600"},e.createElement(Ea,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},ud(j.revenueInProgress))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Revenus en cours"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Dj collect: ",ud(j.collectedAmount))),e.createElement("div",{className:"bg-white rounded-2xl border border-rose-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-rose-600"},e.createElement(Yt,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},ud(j.riskExposure))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Exposition au risque"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant des commandes  risque."))),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 mb-8"},e.createElement("div",{className:"flex flex-wrap gap-2"},Vce.map(ue=>{const Ee=ue.key===L,fe=ue.key==="all"?"/seller/orders":`/seller/orders/${ue.key}`,re=ue.icon,U=ue.key==="all"?O.total:O.byStatus[ue.key]||0;return e.createElement(ye,{key:ue.key,to:fe,className:`group relative flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 ${Ee?"bg-indigo-600 text-white shadow-lg scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200"}`},e.createElement(re,{className:"w-4 h-4"}),e.createElement("span",null,ue.label),U>0&&e.createElement("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${Ee?"bg-white/20 text-white":"bg-indigo-100 text-indigo-700"}`},U))}))),l?e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-bold text-red-800 mb-1"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},l)))):a.length===0?e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-gray-100 flex items-center justify-center mb-4"},e.createElement(ea,{className:"w-10 h-10 text-gray-400"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucune commande"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},ge),e.createElement(ye,{to:"/my",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all"},e.createElement(ba,{className:"w-4 h-4"}),"Grer mes annonces")):e.createElement(e.Fragment,null,e.createElement("div",{className:"space-y-6"},a.map(ue=>e.createElement(Wce,{key:ue._id,order:ue}))),y&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:ae}),e.createElement("div",{className:"relative w-full max-w-md rounded-3xl bg-white shadow-2xl border border-gray-100 p-6",onClick:ue=>ue.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-red-600"},e.createElement(Yt,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Annuler la commande"),e.createElement("p",{className:"text-xs text-gray-500"},"Commande #",k?.slice(-6)))),e.createElement("button",{type:"button",onClick:ae,className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:border-gray-300","aria-label":"Fermer"},e.createElement(jt,{size:16}))),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3"},e.createElement("p",{className:"text-xs font-semibold text-amber-800 mb-1"}," Attention"),e.createElement("p",{className:"text-xs text-amber-700"},"Cette action est irrversible. Le client sera notifi de l'annulation.")),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-900 mb-2"},"Raison de l'annulation ",e.createElement("span",{className:"text-red-600"},"*")),e.createElement("textarea",{value:A,onChange:ue=>S(ue.target.value),placeholder:"Expliquez la raison de l'annulation (minimum 5 caractres)...",className:"w-full rounded-xl border border-gray-200 px-4 py-3 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",rows:4,required:!0,minLength:5}),A.length>0&&A.length<5&&e.createElement("p",{className:"mt-1 text-xs text-red-600"},"La raison doit contenir au moins 5 caractres.")),e.createElement("div",{className:"flex gap-3"},e.createElement("button",{type:"button",onClick:ae,disabled:P,className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Annuler"),e.createElement("button",{type:"button",onClick:te,disabled:P||!A.trim()||A.trim().length<5,className:"flex-1 px-4 py-2.5 rounded-xl bg-red-600 text-white text-sm font-semibold hover:bg-red-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},P?"Annulation...":"Confirmer l'annulation"))))),f.totalPages>1&&e.createElement("div",{className:"mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-between bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("p",{className:"text-sm text-gray-600"},"Page ",e.createElement("span",{className:"font-bold text-gray-900"},m)," sur"," ",e.createElement("span",{className:"font-bold text-gray-900"},f.totalPages)," "," ",e.createElement("span",{className:"font-bold text-gray-900"},f.total)," commande",f.total>1?"s":""),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>p(ue=>Math.max(1,ue-1)),disabled:m<=1,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>p(ue=>Math.min(f.totalPages,ue+1)),disabled:m>=f.totalPages,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},"Suivant"))))))}const Kce={pending:"En attente",pending_installment:"Validation de vente en attente",installment_active:"Paiement par tranche actif",overdue_installment:"Tranche en retard",confirmed:"Commande confirme",delivering:"En cours de livraison",delivered:"Commande termine",completed:"Paiement termin",cancelled:"Commande annule"},kO={pending:{header:"bg-gray-600",card:"bg-gray-50 border-gray-200 text-gray-700"},pending_installment:{header:"bg-violet-600",card:"bg-violet-50 border-violet-200 text-violet-800"},installment_active:{header:"bg-indigo-600",card:"bg-indigo-50 border-indigo-200 text-indigo-800"},overdue_installment:{header:"bg-rose-600",card:"bg-rose-50 border-rose-200 text-rose-800"},confirmed:{header:"bg-amber-600",card:"bg-amber-50 border-amber-200 text-amber-800"},delivering:{header:"bg-blue-600",card:"bg-blue-50 border-blue-200 text-blue-800"},delivered:{header:"bg-emerald-600",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},completed:{header:"bg-emerald-700",card:"bg-emerald-50 border-emerald-200 text-emerald-800"},cancelled:{header:"bg-red-600",card:"bg-red-50 border-red-200 text-red-800"}},Yce={pending:Xt,pending_installment:Xt,installment_active:Sa,overdue_installment:Yt,confirmed:Ft,delivering:Kr,delivered:ar,completed:ar,cancelled:jt},Xce={confirmed:"Confirme",delivering:"En cours de livraison",delivered:"Livre",cancelled:"Annule"},Qce=t=>{switch(t){case"delivered":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"delivering":return"bg-blue-50 text-blue-700 border-blue-200";case"cancelled":return"bg-red-50 text-red-700 border-red-200";default:return"bg-amber-50 text-amber-700 border-amber-200"}},Jce=[{id:"pending",label:"Commande en attente",description:"En attente de confirmation.",icon:Xt,color:"gray"},{id:"confirmed",label:"Commande confirme",description:"Prte pour la prparation.",icon:Ft,color:"amber"},{id:"delivering",label:"En cours de livraison",description:"Colis pris en charge.",icon:Kr,color:"blue"},{id:"delivered",label:"Commande termine",description:"Livre avec succs.",icon:ar,color:"emerald"},{id:"cancelled",label:"Commande annule",description:"Cette commande a t annule.",icon:jt,color:"red"}],Zce=[{id:"pending_installment",label:"Validation de vente",description:"Confirmez la preuve de vente du client.",icon:Xt,color:"violet"},{id:"installment_active",label:"Plan actif",description:"Les tranches sont en cours de validation.",icon:Sa,color:"indigo"},{id:"overdue_installment",label:"Retard",description:"Une ou plusieurs tranches sont en retard.",icon:Yt,color:"rose"},{id:"completed",label:"Paiement termin",description:"Toutes les tranches sont valides.",icon:ar,color:"emerald"},{id:"cancelled",label:"Commande annule",description:"Cette commande a t annule.",icon:jt,color:"red"}],Hi=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):null,Wi=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,ede=t=>{switch(t){case"paid":return"Pay";case"proof_uploaded":return"Preuve reue";case"overdue":return"En retard";case"waived":return"Annul";default:return"En attente"}},tde=t=>{switch(t){case"paid":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"proof_uploaded":return"bg-indigo-50 text-indigo-700 border-indigo-200";case"overdue":return"bg-rose-50 text-rose-700 border-rose-200";case"waived":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-amber-50 text-amber-700 border-amber-200"}},rde=({status:t,paymentType:r})=>{const a=r==="installment"?Zce:Jce,n=a.findIndex(l=>l.id===t),s=n>=0?n:0,o={gray:"bg-gray-600",amber:"bg-amber-600",blue:"bg-blue-600",emerald:"bg-emerald-600",red:"bg-red-600",violet:"bg-violet-600",indigo:"bg-indigo-600",rose:"bg-rose-600"};return e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 p-5"},e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-600"},e.createElement(Pr,{className:"w-4 h-4 text-white"})),e.createElement("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Suivi de commande")),e.createElement("div",{className:"relative"},e.createElement("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"},e.createElement("div",{className:"absolute top-0 left-0 w-full bg-indigo-600 transition-all duration-500",style:{height:`${s/(a.length-1)*100}%`}})),e.createElement("div",{className:"space-y-6 relative"},a.filter(l=>l.id!=="cancelled").map((l,c)=>{const m=l.icon,p=s>=c;return e.createElement("div",{key:l.id,className:"flex items-start gap-4 relative"},e.createElement("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${p?`${o[l.color]||"bg-gray-600"} border-transparent text-white`:"border-gray-300 text-gray-400 bg-white"}`},e.createElement(m,{size:16})),e.createElement("div",{className:"flex-1 pt-1"},e.createElement("p",{className:`text-sm font-bold ${p?"text-gray-900":"text-gray-500"}`},l.label),e.createElement("p",{className:`text-xs ${p?"text-gray-600":"text-gray-400"}`},l.description)))}))))};function ade(){const{orderId:t}=Jo(),{showToast:r}=ms(),a=cs(),[n,s]=u.useState(null),[o,l]=u.useState(!0),[c,m]=u.useState(""),[p,f]=u.useState(0),[g,b]=u.useState(""),[x,v]=u.useState({id:"",message:""}),[E,y]=u.useState(!1),[w,k]=u.useState(""),[C,A]=u.useState(!1),[S,P]=u.useState(!1),[T,O]=u.useState(-1),R=u.useCallback(async()=>{if(t){l(!0),m("");try{const{data:ne}=await oe.get(`/orders/seller/detail/${t}`);s(ne);const{data:ee}=await oe.get(`/orders/${t}/messages`),ve=JSON.parse(localStorage.getItem("user")||"{}"),be=Array.isArray(ee)?ee.filter(J=>String(J.recipient?._id)===String(ve?._id)&&!J.readAt):[];f(be.length)}catch(ne){m(ne.response?.data?.message||"Commande introuvable."),s(null)}finally{l(!1)}}},[t]);u.useEffect(()=>{R()},[R]);const D=async ne=>{if(n){b(n._id),v({id:"",message:""});try{const{data:ee}=await oe.patch(`/orders/seller/${n._id}/status`,{status:ne});s(ee),r("Statut mis  jour.",{variant:"success"})}catch(ee){const ve=ee.response?.data?.message||"Impossible de mettre  jour le statut.";v({id:n._id,message:ve}),r(ve,{variant:"error"})}finally{b("")}}},$=async ne=>{if(n){P(!0);try{const{data:ee}=await oe.patch(`/orders/seller/${n._id}/installment/confirm-sale`,{approve:ne});ee?._id?s(ee):await R(),r(ne?"Preuve de vente confirme. Le plan de tranches est activ.":"Commande tranche refuse et annule.",{variant:"success"})}catch(ee){const ve=ee.response?.data?.message||"Impossible de traiter la preuve de vente.";r(ve,{variant:"error"})}finally{P(!1)}}},j=async(ne,ee)=>{if(n){O(ne);try{const{data:ve}=await oe.patch(`/orders/seller/${n._id}/installment/payments/${ne}/validate`,{approve:ee});s(ve),r(ee?"Tranche valide.":"Tranche rejete. Le client doit renvoyer une preuve.",{variant:"success"})}catch(ve){const be=ve.response?.data?.message||"Impossible de valider cette tranche.";r(be,{variant:"error"})}finally{O(-1)}}},K=async()=>{if(!(!n||!w.trim()||w.trim().length<5)){A(!0);try{const{data:ne}=await oe.post(`/orders/seller/${n._id}/cancel`,{reason:w.trim()});s(ne),r("Commande annule. Le client a t notifi.",{variant:"success"}),y(!1),k("")}catch(ne){const ee=ne.response?.data?.message||ne.response?.data?.details?.[0]||"Impossible d'annuler la commande.";r(ee,{variant:"error"})}finally{A(!1)}}};if(o&&!n)return e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"animate-pulse text-gray-400"},"Chargement..."));if(c||!n)return e.createElement("div",{className:"min-h-screen bg-gray-50 p-4"},e.createElement(ye,{to:"/seller/orders",className:"inline-flex items-center gap-2 text-indigo-600 font-medium mb-4"},e.createElement(Gr,{className:"w-4 h-4"})," Retour aux commandes"),e.createElement("p",{className:"text-red-600"},c||"Commande introuvable."));const H=Array.isArray(n.items)?n.items:[],V=H.reduce((ne,ee)=>ne+Number(ee.snapshot?.price||0)*Number(ee.quantity||1),0),q=Number(n.totalAmount??V),Y=Number(n.paidAmount||0),z=Number(n.remainingAmount??Math.max(0,q-Y)),L=n.paymentType==="installment",Q=L?n.installmentPlan||{}:null,B=Array.isArray(Q?.schedule)?Q.schedule:[],ae=Number(Q?.totalAmount??q),te=Number(Q?.amountPaid??Y),ge=Number(Q?.remainingAmount??Math.max(0,ae-te)),ue=ae>0?Math.min(100,Math.round(te/ae*100)):0,Ee=!!Q?.saleConfirmationConfirmedAt,fe=L&&n.status==="completed"?n.installmentSaleStatus||"confirmed":n.installmentSaleStatus||"",re=!!(L||Y||n.paymentTransactionCode||n.paymentName),U=Yce[n.status]||Xt,W=kO[n.status]||kO.pending,me=L&&n.status==="completed"&&!["delivered","cancelled"].includes(fe);return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-3xl mx-auto px-4 py-6"},e.createElement(ye,{to:"/seller/orders",className:"inline-flex items-center gap-2 text-indigo-600 font-medium mb-4 hover:text-indigo-700"},e.createElement(Gr,{className:"w-4 h-4"})," Retour aux commandes"),e.createElement("div",{className:"bg-white rounded-2xl border-2 border-gray-100 shadow-sm overflow-hidden"},e.createElement("div",{className:`${W.header} text-white px-6 py-4`},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-2 rounded-lg bg-white/20 backdrop-blur-sm"},e.createElement(U,{className:"w-5 h-5"})),e.createElement("div",null,e.createElement("p",{className:"text-xs font-medium text-white/80 uppercase tracking-wide"},"Commande"),e.createElement("h3",{className:"text-lg font-bold"},"#",n._id.slice(-6)))),e.createElement("span",{className:"px-3 py-1.5 rounded-lg bg-white/20 text-xs font-bold uppercase"},Kce[n.status]||n.status))),e.createElement("div",{className:"p-6 space-y-6"},e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2 mb-4"},e.createElement(Ft,{className:"w-4 h-4 text-gray-500"}),e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Articles commands")),e.createElement("div",{className:"space-y-3"},H.map((ne,ee)=>e.createElement("div",{key:`${n._id}-${ee}`,className:"flex items-start gap-4 p-4 rounded-xl border border-gray-100 bg-gray-50/50"},ne.snapshot?.image||ne.product?.images?.[0]?e.createElement("img",{src:ne.snapshot?.image||ne.product?.images?.[0],alt:ne.snapshot?.title||"Produit",className:"w-16 h-16 rounded-xl object-cover border border-gray-200 flex-shrink-0"}):e.createElement("div",{className:"w-16 h-16 rounded-xl bg-indigo-100 flex items-center justify-center flex-shrink-0"},e.createElement(Ft,{className:"w-6 h-6 text-indigo-600"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex justify-between gap-2 mb-1"},ne.product?e.createElement(ye,{to:Dr(ne.product),...a,className:"font-bold text-gray-900 hover:text-indigo-600 truncate"},ne.snapshot?.title||"Produit"):e.createElement("span",{className:"font-bold text-gray-900"},ne.snapshot?.title||"Produit"),e.createElement("span",{className:"text-sm font-bold text-gray-900 whitespace-nowrap"},Wi((ne.snapshot?.price||0)*(ne.quantity||1)))),e.createElement("div",{className:"flex items-center gap-3 text-xs text-gray-500 mb-1"},e.createElement("span",null,"Quantit: ",ne.quantity||1),e.createElement("span",null,"Prix unitaire: ",Wi(ne.snapshot?.price||0))),ne.snapshot?.confirmationNumber&&e.createElement("div",{className:"mt-2 inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-indigo-50 border border-indigo-200"},e.createElement("span",{className:"text-[10px] font-bold text-indigo-700 uppercase"},"Code: ",ne.snapshot.confirmationNumber))))))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.deliveryCode&&e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(Ga,{className:"w-4 h-4 text-indigo-500"})," Code de livraison"),e.createElement("div",{className:"p-5 rounded-xl border-2 border-indigo-200 bg-indigo-50"},e.createElement("p",{className:"text-xs font-semibold text-indigo-700 uppercase mb-2"},"Code pour le livreur"),e.createElement("div",{className:"text-4xl font-black text-indigo-900 tracking-wider font-mono text-center"},n.deliveryCode))),e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(Ia,{className:"w-4 h-4 text-gray-500"})," Client"),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-2"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},n.customer?.name||"Client"),n.customer?.phone&&e.createElement("p",{className:"text-xs text-gray-500 flex items-center gap-1"},e.createElement(Es,{className:"w-3 h-3"}),n.customer.phone),n.customer?.email&&e.createElement("p",{className:"text-xs text-gray-500 flex items-center gap-1"},e.createElement(gi,{className:"w-3 h-3"}),n.customer.email)))),e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(Wr,{className:"w-4 h-4 text-gray-500"})," Adresse de livraison"),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-2"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},n.deliveryAddress||"Non renseigne"),e.createElement("p",{className:"text-xs text-gray-500"},n.deliveryCity||"Ville non renseigne"),n.deliveryGuy&&e.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs"},e.createElement(Kr,{className:"w-3 h-3 text-blue-600 inline mr-1"}),e.createElement("span",{className:"font-semibold"},"Livreur:")," ",n.deliveryGuy.name||"Non assign",n.deliveryGuy.phone&&`  ${n.deliveryGuy.phone}`))),n.trackingNote&&e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-2 flex items-center gap-2"},e.createElement(v2,{className:"w-4 h-4 text-gray-500"})," Note de suivi"),e.createElement("div",{className:"p-4 rounded-xl border border-blue-100 bg-blue-50/50"},e.createElement("p",{className:"text-sm text-gray-700"},n.trackingNote))),e.createElement("div",null,e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase mb-3 flex items-center gap-2"},e.createElement(Sa,{className:"w-4 h-4 text-gray-500"})," Paiement"),e.createElement("div",{className:"p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-3"},e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Total commande"),e.createElement("span",{className:"text-lg font-bold text-gray-900"},Wi(L?ae:q))),re&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between pt-2 border-t border-gray-200"},e.createElement("span",{className:"text-sm text-gray-600"},L?"Montant valid":"Acompte vers"),e.createElement("span",{className:"text-sm font-semibold text-emerald-700"},Wi(L?te:Y))),e.createElement("div",{className:"flex justify-between"},e.createElement("span",{className:"text-sm text-gray-600"},"Reste  payer"),e.createElement("span",{className:"text-sm font-semibold text-amber-700"},Wi(L?ge:z))),L&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("div",{className:"h-2 rounded-full bg-gray-200 overflow-hidden"},e.createElement("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${ue}%`}})),e.createElement("p",{className:"mt-1 text-xs text-gray-600"},"Progression client: ",ue,"%")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-600"},e.createElement("p",null,"Prochaine chance:"," ",e.createElement("span",{className:"font-semibold text-gray-900"},Q?.nextDueDate?Hi(Q.nextDueDate):"Aucune")),e.createElement("p",null,"Risque client:"," ",e.createElement("span",{className:"font-semibold text-gray-900"},Q?.riskLevel||"N/A"," (",Math.round(Q?.eligibilityScore||0),"/100)"))),n.status==="completed"&&e.createElement("div",{className:"pt-2 border-t border-gray-200"},e.createElement("p",{className:"text-xs text-gray-600 mb-1"},"Statut de vente"),e.createElement("span",{className:`inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold ${Qce(fe)}`},Xce[fe]||"Confirme"))),!L&&(n.paymentName||n.paymentTransactionCode)&&e.createElement("div",{className:"pt-2 border-t border-gray-200 text-xs text-gray-500"},n.paymentName&&e.createElement("p",null,"Payeur: ",n.paymentName),n.paymentTransactionCode&&e.createElement("p",null,"Transaction: ",n.paymentTransactionCode))))),L&&e.createElement("div",{className:"rounded-2xl border border-indigo-200 bg-indigo-50/40 p-4 space-y-3"},e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase flex items-center gap-2"},e.createElement(qg,{className:"w-4 h-4 text-indigo-600"})," Preuve de vente"),e.createElement("p",{className:"text-sm text-gray-700"},"Statut:"," ",e.createElement("span",{className:"font-semibold"},Ee?"Confirme":"En attente de votre confirmation")),Q?.guarantor?.required&&e.createElement("div",{className:"rounded-lg border border-indigo-200 bg-white p-3 text-xs text-gray-700 space-y-1"},e.createElement("p",{className:"font-semibold text-gray-900"},"Garant requis"),e.createElement("p",null,"Nom: ",Q?.guarantor?.fullName||"N/A"),e.createElement("p",null,"Tlphone: ",Q?.guarantor?.phone||"N/A"),e.createElement("p",null,"Relation: ",Q?.guarantor?.relation||"N/A"),e.createElement("p",null,"Adresse: ",Q?.guarantor?.address||"N/A")),!Ee&&n.status==="pending_installment"&&e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>$(!0),disabled:S,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-semibold text-white hover:bg-emerald-700 disabled:opacity-60"},e.createElement(ar,{className:"w-4 h-4"}),S?"Traitement...":"Confirmer la vente"),e.createElement("button",{type:"button",onClick:()=>$(!1),disabled:S,className:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-3 py-2 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-60"},e.createElement(jt,{className:"w-4 h-4"}),"Refuser la vente"))),L&&e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 space-y-4"},e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase flex items-center gap-2"},e.createElement(Sa,{className:"w-4 h-4 text-gray-500"})," chancier, preuves et validations"),B.length?B.map((ne,ee)=>{const ve=Ee&&ne?.status==="proof_uploaded";return e.createElement("div",{key:`${n._id}-installment-${ee}`,className:"rounded-xl border border-gray-200 p-3 space-y-2"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},"Tranche ",ee+1,"  ",Wi(ne?.amount||0)),e.createElement("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-xs font-semibold ${tde(ne?.status)}`},ede(ne?.status))),e.createElement("p",{className:"text-xs text-gray-600"},"chance: ",ne?.dueDate?Hi(ne.dueDate):"Non dfinie"),ne?.transactionProof?.transactionCode?e.createElement("div",{className:"rounded-lg border border-indigo-100 bg-indigo-50/50 p-2 text-xs text-indigo-900 space-y-1"},e.createElement("p",null,"Expditeur:"," ",e.createElement("span",{className:"font-semibold"},ne?.transactionProof?.senderName||"N/A")),e.createElement("p",null,"ID transaction:"," ",e.createElement("span",{className:"font-semibold"},ne?.transactionProof?.transactionCode||"N/A")),e.createElement("p",null,"Montant dclar:"," ",e.createElement("span",{className:"font-semibold"},Wi(ne?.transactionProof?.amount||ne?.amount||0))),ne?.transactionProof?.submittedAt&&e.createElement("p",null,"Soumis le:"," ",e.createElement("span",{className:"font-semibold"},Hi(ne.transactionProof.submittedAt)))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune preuve transactionnelle dpose."),ve&&e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>j(ee,!0),disabled:T===ee,className:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-3 py-2 text-xs font-semibold text-white hover:bg-emerald-700 disabled:opacity-60"},e.createElement(ar,{className:"w-4 h-4"}),T===ee?"Validation...":"Valider"),e.createElement("button",{type:"button",onClick:()=>j(ee,!1),disabled:T===ee,className:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-3 py-2 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-60"},e.createElement(jt,{className:"w-4 h-4"}),"Rejeter")))}):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune tranche dfinie.")),n.cancellationWindow?.isActive&&n.status!=="cancelled"&&e.createElement("div",{className:"rounded-2xl border-2 border-amber-200 bg-amber-50 p-4 space-y-3"},e.createElement(W$,{deadline:n.cancellationWindow.deadline,remainingMs:n.cancellationWindow.remainingMs,isActive:n.cancellationWindow.isActive}),e.createElement("div",{className:"flex items-start gap-2 p-3 rounded-xl bg-amber-100 border border-amber-200"},e.createElement(Yt,{className:"w-4 h-4 text-amber-700 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-xs text-amber-800"},e.createElement("span",{className:"font-semibold"},"Dlai d'annulation actif :")," Vous ne pouvez pas modifier le statut pendant les 30 premires minutes."))),e.createElement("div",{className:"rounded-2xl border border-indigo-100 bg-indigo-50 p-4"},e.createElement(Yd,{order:n,buttonText:"Contacter l'acheteur",unreadCount:p})),me&&e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4 space-y-3"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Ga,{className:"w-4 h-4 text-gray-500"}),e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Mettre  jour le statut de vente")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>D("confirmed"),disabled:fe!=="confirmed"||g===n._id,className:"inline-flex items-center gap-2 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-semibold text-amber-700 hover:bg-amber-100 disabled:opacity-50"},e.createElement(Ft,{size:12})," Confirme"),e.createElement("button",{type:"button",onClick:()=>D("delivering"),disabled:fe!=="confirmed"||g===n._id,className:"inline-flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 px-3 py-2 text-xs font-semibold text-blue-700 hover:bg-blue-100 disabled:opacity-50"},e.createElement(Kr,{size:12})," En livraison"),e.createElement("button",{type:"button",onClick:()=>D("delivered"),disabled:fe!=="delivering"||g===n._id,className:"inline-flex items-center gap-2 rounded-xl border border-green-200 bg-green-50 px-3 py-2 text-xs font-semibold text-green-700 hover:bg-green-100 disabled:opacity-50"},e.createElement(ar,{size:12})," Livre"),e.createElement("button",{type:"button",onClick:()=>D("cancelled"),disabled:["delivered","cancelled"].includes(fe)||g===n._id,className:"inline-flex items-center gap-2 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-100 disabled:opacity-50"},e.createElement(jt,{size:12})," Annuler")),x.id===n._id&&e.createElement("p",{className:"text-xs text-red-600"},x.message)),!L&&n.status!=="cancelled"&&n.status!=="delivered"&&e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4 space-y-3"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Ga,{className:"w-4 h-4 text-gray-500"}),e.createElement("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Mettre  jour le statut")),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>D("confirmed"),disabled:n.status!=="pending"||g===n._id||n.cancellationWindow?.isActive,className:"inline-flex items-center gap-2 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-xs font-semibold text-amber-700 hover:bg-amber-100 disabled:opacity-50"},e.createElement(Ft,{size:12})," Confirmer"),e.createElement("button",{type:"button",onClick:()=>D("delivering"),disabled:n.status!=="confirmed"||g===n._id||n.cancellationWindow?.isActive,className:"inline-flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 px-3 py-2 text-xs font-semibold text-blue-700 hover:bg-blue-100 disabled:opacity-50"},e.createElement(Kr,{size:12})," En livraison"),e.createElement("button",{type:"button",onClick:()=>D("delivered"),disabled:n.status!=="delivering"||g===n._id||n.cancellationWindow?.isActive,className:"inline-flex items-center gap-2 rounded-xl border border-green-200 bg-green-50 px-3 py-2 text-xs font-semibold text-green-700 hover:bg-green-100 disabled:opacity-50"},e.createElement(ar,{size:12})," Marquer livre"),e.createElement("button",{type:"button",onClick:()=>y(!0),disabled:n.status==="delivered"||g===n._id||n.cancellationWindow?.isActive,className:"inline-flex items-center gap-2 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-100 disabled:opacity-50"},e.createElement(jt,{size:12})," Annuler")),x.id===n._id&&e.createElement("p",{className:"text-xs text-red-600"},x.message)),n.status==="cancelled"&&e.createElement("div",{className:"rounded-2xl border-2 border-red-200 bg-red-50 p-5 space-y-3"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-red-600"},e.createElement(Yt,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-bold text-red-800"},"Commande annule"),n.cancelledAt&&e.createElement("p",{className:"text-xs text-red-600 mt-1"},"Annule le ",Hi(n.cancelledAt)))),n.cancellationReason&&e.createElement("div",{className:"p-4 rounded-xl border border-red-200 bg-red-100/50"},e.createElement("p",{className:"text-xs font-semibold text-red-700 uppercase mb-2"},"Raison"),e.createElement("p",{className:"text-sm text-red-800 font-medium"},n.cancellationReason))),n.status!=="cancelled"&&e.createElement(rde,{status:n.status,paymentType:n.paymentType}),e.createElement("div",{className:"flex flex-wrap gap-4 pt-4 border-t border-gray-100 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(dn,{className:"w-3 h-3"})," Cre: ",Hi(n.createdAt)),n.shippedAt&&e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Kr,{className:"w-3 h-3"})," Expdie: ",Hi(n.shippedAt)),n.deliveredAt&&e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(ar,{className:"w-3 h-3"})," Livre: ",Hi(n.deliveredAt)))))),E&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6"},e.createElement("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:()=>y(!1)}),e.createElement("div",{className:"relative w-full max-w-md rounded-3xl bg-white shadow-2xl border border-gray-100 p-6",onClick:ne=>ne.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-red-600"},e.createElement(Yt,{className:"w-5 h-5 text-white"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Annuler la commande"),e.createElement("p",{className:"text-xs text-gray-500"},"Commande #",n._id?.slice(-6)))),e.createElement("button",{type:"button",onClick:()=>y(!1),className:"h-9 w-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700"},e.createElement(jt,{size:16}))),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-3"},e.createElement("p",{className:"text-xs font-semibold text-amber-800 mb-1"}," Attention"),e.createElement("p",{className:"text-xs text-amber-700"},"Cette action est irrversible. Le client sera notifi.")),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-900 mb-2"},"Raison de l'annulation ",e.createElement("span",{className:"text-red-600"},"*")),e.createElement("textarea",{value:w,onChange:ne=>k(ne.target.value),placeholder:"Expliquez la raison (minimum 5 caractres)...",className:"w-full rounded-xl border border-gray-200 px-4 py-3 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",rows:4,minLength:5}),w.length>0&&w.length<5&&e.createElement("p",{className:"mt-1 text-xs text-red-600"},"Minimum 5 caractres.")),e.createElement("div",{className:"flex gap-3"},e.createElement("button",{type:"button",onClick:()=>y(!1),disabled:C,className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},"Annuler"),e.createElement("button",{type:"button",onClick:K,disabled:C||!w.trim()||w.trim().length<5,className:"flex-1 px-4 py-2.5 rounded-xl bg-red-600 text-white text-sm font-semibold hover:bg-red-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},C?"Annulation...":"Confirmer l'annulation"))))))}const Rn=t=>Number(t||0).toLocaleString("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0});function nde(){const{cart:t,clearCart:r}=u.useContext($l),{user:a}=u.useContext(Sr),{showToast:n}=ms(),s=wa(),[o,l]=u.useState({}),[c,m]=u.useState({}),[p,f]=u.useState({}),[g,b]=u.useState(!1),[x,v]=u.useState(""),[E,y]=u.useState(!1),[w,k]=u.useState("full"),[C,A]=u.useState({fullName:"",phone:"",relation:"",nationalId:"",address:""}),[S,P]=u.useState({score:null,riskLevel:""}),T=t.totals||{subtotal:0},O=t.items||[],R=u.useMemo(()=>{if(O.length!==1)return!1;const U=O[0]?.product;if(!U?.installmentEnabled)return!1;const W=U.installmentStartDate?new Date(U.installmentStartDate):null,me=U.installmentEndDate?new Date(U.installmentEndDate):null;if(!W||Number.isNaN(W.getTime())||!me||Number.isNaN(me.getTime()))return!1;const ne=new Date;return ne>=W&&ne<=me},[O]),D=R?O[0]?.product:null,$=Number(D?.installmentMinAmount||0),j=Number(D?.installmentDuration||0),K=!!D?.installmentRequireGuarantor,H=u.useMemo(()=>{if(!R)return 0;const U=Number(T.subtotal||0),W=Math.max(0,Number($||0));return!Number.isFinite(U)||U<=0?0:Math.min(U,W)},[R,T.subtotal,$]),V=Math.max(0,Number(T.subtotal||0)-H),q=u.useMemo(()=>{const U=new Map;return O.forEach(W=>{const me=W?.product?.user||null,ne=me?._id,ee=ne?String(ne):"unknown",ve=me?.shopName||me?.name||"Vendeur",be=me?.phone||W?.product?.contactPhone||"";U.has(ee)||U.set(ee,{sellerId:ee,sellerName:ve,sellerPhone:be,items:[],subtotal:0});const J=U.get(ee);J.items.push(W),J.subtotal+=Number(W?.lineTotal||0)}),Array.from(U.values())},[O]),Y=U=>c[U]||{status:"idle",message:"",code:"",pricing:null,promo:null},z=U=>{const W=Y(U),me=String(o[U]?.promoCode||"").trim().toUpperCase();return W.status==="valid"&&!!me&&me===W.code},L=U=>{if(w!=="full"||!z(U.sellerId))return Number(U.subtotal||0);const W=Number(Y(U.sellerId)?.pricing?.finalAmount);return Number.isFinite(W)?W:Number(U.subtotal||0)},Q=u.useMemo(()=>w!=="full"?Number(T.subtotal||0):q.reduce((U,W)=>U+L(W),0),[w,T.subtotal,q,c,o]),B=u.useMemo(()=>w!=="full"?0:q.reduce((U,W)=>{const me=Number(W.subtotal||0),ne=L(W);return U+Math.max(0,me-ne)},0),[w,q,c,o]),ae=u.useMemo(()=>Math.round(Q*.25),[Q]),te=Math.max(0,Number(Q||0)-ae),ge=w==="installment"?H:ae,ue=w==="installment"?Math.max(0,Number(T.subtotal||0)-H):te;u.useEffect(()=>{!R&&w==="installment"&&k("full")},[R,w]),u.useEffect(()=>{l(U=>{const W={};return q.forEach(me=>{const ne=me.sellerId,ee=U[ne]||{};W[ne]={payerName:ee.payerName??a?.name??"",transactionCode:ee.transactionCode??"",promoCode:ee.promoCode??""}}),W}),m(U=>{const W={};return q.forEach(me=>{const ne=me.sellerId;W[ne]=U[ne]||{status:"idle",message:"",code:"",pricing:null,promo:null}}),W})},[q,a?.name]),u.useEffect(()=>{if(!R){P({score:null,riskLevel:""});return}let U=!0;return oe.get("/orders/installment/eligibility").then(({data:W})=>{U&&P({score:Number(W?.score??0),riskLevel:W?.riskLevel||"medium"})}).catch(()=>{U&&P({score:null,riskLevel:""})}),()=>{U=!1}},[R]);const Ee=async U=>{if(U.preventDefault(),!O.length){v("Votre panier est vide.");return}if(w==="installment"){if(!R||!D){v("Le paiement par tranche nest pas disponible pour cette commande.");return}const ve=q[0],be=ve?o[ve.sellerId]||{}:{},J=Number(H||0);if(!Number.isFinite(J)||J<$){v(`Le premier paiement minimum est de ${Rn($)} FCFA.`);return}if(J>Number(T.subtotal||0)){v("Le premier paiement ne peut pas dpasser le total de la commande.");return}if(!be?.payerName?.trim()||!be?.transactionCode?.trim()){v("Le nom du payeur et le code de transaction sont requis.");return}const Ge=String(be.transactionCode).replace(/\D/g,"");if(Ge.length!==10){v("Le code de transaction doit contenir exactement 10 chiffres.");return}if(K&&(!C.fullName||!C.phone||!C.relation||!C.address)){v("Les informations du garant sont requises pour ce produit.");return}b(!0),v("");try{await oe.post("/orders/installment/checkout",{productId:D._id,quantity:Number(O[0]?.quantity||1),firstPaymentAmount:Number(J),payerName:be.payerName.trim(),transactionCode:Ge,guarantor:C}),y(!0),await r(),n("Commande en tranche cre. En attente de validation vendeur.",{variant:"success"}),s("/orders")}catch(je){const tt=je.response?.data?.message||"Impossible de crer la commande en tranche.";v(tt),n(tt,{variant:"error"})}finally{b(!1)}return}if(q.some(ve=>!ve.sellerId||ve.sellerId==="unknown")){v("Impossible de dterminer le vendeur pour certains articles.");return}if(q.some(ve=>{const be=o[ve.sellerId]||{};return!be.payerName?.trim()||!be.transactionCode?.trim()})){v(q.length>1?"Veuillez renseigner le nom et le code de transaction pour chaque vendeur.":"Veuillez renseigner le nom et le code de transaction.");return}if(q.some(ve=>((o[ve.sellerId]||{}).transactionCode||"").trim().replace(/\D/g,"").length!==10)){v("Le code de transaction doit contenir exactement 10 chiffres.");return}if(q.some(ve=>{const be=o[ve.sellerId]||{};return String(be.promoCode||"").trim().toUpperCase()?!z(ve.sellerId):!1})){v("Veuillez appliquer/valider chaque code promo saisi avant de confirmer.");return}b(!0),v("");try{await oe.post("/orders/checkout",{payments:q.map(ve=>{const be=o[ve.sellerId]||{},J=String(be.promoCode||"").trim().toUpperCase(),Ge=z(ve.sellerId)?J:"";return{sellerId:ve.sellerId,payerName:be.payerName.trim(),transactionCode:be.transactionCode.trim().replace(/\D/g,""),promoCode:Ge}})}),y(!0),await r(),n("Commande enregistre. Elle est en attente de validation.",{variant:"success"}),s("/orders")}catch(ve){const be=ve.response?.data?.message||"Impossible de confirmer la commande.";v(be),n(be,{variant:"error"})}finally{b(!1)}},fe=(U,W,me)=>{if(W==="transactionCode"&&(me=String(me).replace(/\D/g,"").slice(0,10)),W==="promoCode"&&(me=String(me||"").toUpperCase()),l(ne=>({...ne,[U]:{...ne[U]||{},[W]:me}})),W==="promoCode"){const ne=String(me||"").trim().toUpperCase();m(ee=>{const ve=ee[U]||{code:""};return ne?ve.code&&ve.code!==ne?{...ee,[U]:{status:"idle",message:'Code modifi, cliquez sur "Appliquer".',code:"",pricing:null,promo:null}}:ee:{...ee,[U]:{status:"idle",message:"",code:"",pricing:null,promo:null}}})}},re=async U=>{const W=U?.sellerId;if(!W||W==="unknown")return;const me=o[W]||{},ne=String(me.promoCode||"").trim().toUpperCase();if(!ne){m(ve=>({...ve,[W]:{status:"error",message:"Veuillez saisir un code promo.",code:"",pricing:null,promo:null}}));return}const ee=(U.items||[]).map(ve=>({productId:ve?.product?._id,quantity:Number(ve?.quantity||1)})).filter(ve=>!!ve.productId);if(!ee.length){m(ve=>({...ve,[W]:{status:"error",message:"Aucun produit valide pour ce vendeur.",code:"",pricing:null,promo:null}}));return}f(ve=>({...ve,[W]:!0}));try{const{data:ve}=await oe.post("/marketplace-promo-codes/preview",{code:ne,items:ee});m(be=>({...be,[W]:{status:"valid",message:ve?.message||"Code promo appliqu.",code:ne,pricing:ve?.pricing||null,promo:ve?.promo||null}})),n("Code promo appliqu.",{variant:"success"})}catch(ve){const be=ve.response?.data?.message||"Code promo invalide ou expir.";m(J=>({...J,[W]:{status:"error",message:be,code:"",pricing:null,promo:null}})),n(be,{variant:"error"})}finally{f(ve=>({...ve,[W]:!1}))}};return u.useEffect(()=>{if(!a||!O.length)return;(async()=>{try{const{data:W}=await oe.get("/orders/draft");if(W.items&&W.items.length>0){const me={};W.items.forEach(ne=>{ne.draftPayments&&ne.draftPayments.length>0&&ne.draftPayments.forEach(ee=>{if(ee.sellerId){const ve=(ee.transactionCode||"").replace(/\D/g,"").slice(0,10);me[String(ee.sellerId)]={payerName:ee.payerName||"",transactionCode:ve,promoCode:String(ee.promoCode||"").toUpperCase()}}})}),Object.keys(me).length>0&&l(ne=>({...ne,...me}))}}catch(W){console.error("Failed to load draft payments:",W)}})()},[a,O.length]),u.useEffect(()=>{if(!a||!O.length||g||E||w==="installment")return;const U=async()=>{try{const W=q.map(me=>{const ne=o[me.sellerId]||{};return{sellerId:me.sellerId,payerName:ne.payerName?.trim()||"",transactionCode:ne.transactionCode?.trim()||"",promoCode:ne.promoCode?.trim()?.toUpperCase()||""}});await oe.post("/orders/draft",{payments:W})}catch(W){console.error("Failed to save draft order:",W)}};return()=>{E||U()}},[a,O.length,q,o,g,E,w]),O.length?e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50"},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 space-y-6 sm:space-y-8"},e.createElement("header",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl p-6 sm:p-8 border-2 border-blue-100 shadow-lg"},e.createElement(ye,{to:"/cart",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors"},e.createElement(Gr,{size:18}),e.createElement("span",{className:"font-medium text-sm"},"Retour au panier")),e.createElement("div",{className:"space-y-3"},e.createElement("h1",{className:"text-3xl sm:text-4xl font-black text-gray-900"},"Confirmer votre commande"),e.createElement("p",{className:"text-gray-600 font-medium"},w==="installment"?"Cette commande sera traite en paiement par tranche aprs validation du vendeur.":"Un acompte de 25% est requis pour confirmer votre commande."))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.1fr_0.9fr] gap-6 sm:gap-8"},e.createElement("section",{className:"bg-white rounded-3xl border-2 border-gray-200 shadow-xl p-5 sm:p-6 space-y-5"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(ws,{size:20,className:"text-white"})),e.createElement("h2",{className:"text-xl font-black text-gray-900"},"Rsum de la commande")),e.createElement("div",{className:"space-y-3"},O.map(({product:U,quantity:W,lineTotal:me})=>e.createElement("div",{key:U._id,className:"flex items-start gap-3 p-3 bg-gray-50 rounded-2xl border border-gray-200"},e.createElement("div",{className:"w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 rounded-xl overflow-hidden bg-gray-200"},e.createElement("img",{src:U.images?.[0]||"https://via.placeholder.com/80",alt:U.title,className:"w-full h-full object-cover"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"font-black text-gray-900 text-sm sm:text-base line-clamp-2 mb-1"},U.title),e.createElement("p",{className:"text-xs text-gray-600 font-medium mb-1"},"Quantit: x",W),e.createElement("p",{className:"text-xs text-gray-500"},"Vendeur: ",U.user?.phone||U.contactPhone||"")),e.createElement("div",{className:"text-right"},e.createElement("span",{className:"font-black text-blue-600 text-base sm:text-lg"},Rn(me)," FCFA"))))),e.createElement("div",{className:"border-t-2 border-gray-200 pt-4 space-y-3"},e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-xl"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Total commande"),e.createElement("span",{className:"font-black text-gray-900 text-lg"},Rn(w==="full"?Q:T.subtotal)," FCFA")),w==="full"&&B>0&&e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-emerald-50 rounded-xl border border-emerald-200"},e.createElement("span",{className:"text-emerald-700 font-semibold"},"conomie via promo"),e.createElement("span",{className:"font-black text-emerald-600 text-lg"},"-",Rn(B)," FCFA")),e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-blue-50 rounded-xl border border-blue-200"},e.createElement("span",{className:"text-blue-700 font-semibold"},w==="installment"?"Premier paiement":"Acompte (25%)"),e.createElement("span",{className:"font-black text-blue-600 text-lg"},Rn(ge)," FCFA")),e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-xl"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Reste  payer"),e.createElement("span",{className:"font-black text-gray-900 text-lg"},Rn(ue)," FCFA"))),e.createElement("div",{className:"rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 p-4 text-xs sm:text-sm text-blue-800 flex items-start gap-3"},e.createElement(Ga,{size:16}),e.createElement("span",null,w==="installment"?"Le vendeur doit confirmer la vente puis valider chaque tranche.":"Le paiement de lacompte confirme la commande. Le solde sera rgl  la livraison."))),e.createElement("section",{className:"bg-white rounded-3xl border-2 border-gray-200 shadow-xl p-5 sm:p-6 space-y-5"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(Sa,{size:20,className:"text-white"})),e.createElement("h2",{className:"text-xl font-black text-gray-900"},"Informations de paiement")),e.createElement("form",{className:"space-y-5",onSubmit:Ee},R&&e.createElement("div",{className:"rounded-2xl border-2 border-indigo-200 bg-indigo-50/50 p-4 space-y-3"},e.createElement("p",{className:"text-xs font-bold uppercase text-indigo-700"},"Mode de paiement"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2"},e.createElement("button",{type:"button",onClick:()=>k("full"),className:`rounded-xl border px-3 py-2 text-sm font-semibold transition-all ${w==="full"?"border-indigo-500 bg-white text-indigo-700":"border-gray-200 bg-white text-gray-600"}`},"Paiement classique (acompte 25%)"),e.createElement("button",{type:"button",onClick:()=>k("installment"),className:`rounded-xl border px-3 py-2 text-sm font-semibold transition-all ${w==="installment"?"border-indigo-500 bg-white text-indigo-700":"border-gray-200 bg-white text-gray-600"}`},"Paiement par tranche (",j," jours)")),e.createElement("p",{className:"text-xs text-indigo-700"},"Paiement en plusieurs fois disponible"),S.score!==null&&e.createElement("p",{className:"text-xs text-indigo-700"},"Score d'ligibilit: ",e.createElement("span",{className:"font-semibold"},S.score,"/100")," ","(",S.riskLevel||"medium",")")),q.map(U=>{const W=o[U.sellerId]||{},me=Y(U.sellerId),ne=L(U),ee=w==="installment"?H:Math.round(Number(ne||0)*.25),ve=Math.max(0,Number(ne||0)-ee);return e.createElement("div",{key:U.sellerId,className:"rounded-3xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-blue-50/30 p-5 sm:p-6 space-y-4 shadow-md"},e.createElement("div",{className:"flex items-start justify-between gap-3 pb-3 border-b-2 border-gray-200"},e.createElement("div",{className:"space-y-1.5"},e.createElement("p",{className:"text-xs font-bold uppercase text-gray-500 tracking-wide"},"Paiement vendeur"),e.createElement("p",{className:"text-base sm:text-lg font-black text-gray-900"},U.sellerName),U.sellerPhone&&e.createElement("p",{className:"text-xs text-gray-600 font-medium"}," ",U.sellerPhone)),e.createElement("div",{className:"text-right bg-blue-100 px-3 py-2 rounded-xl border border-blue-200"},e.createElement("p",{className:"text-base sm:text-lg font-black text-blue-600"},Rn(ee)," FCFA"),e.createElement("p",{className:"text-xs text-gray-600 font-medium"},w==="installment"?"Premier paiement":"Acompte (25%)"))),e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-bold uppercase text-gray-700 mb-2"},"Nom du payeur"),e.createElement("input",{type:"text",value:W.payerName||"",onChange:be=>fe(U.sellerId,"payerName",be.target.value),className:"w-full rounded-3xl border-2 border-gray-300 px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white",placeholder:a?.name||"Ex: Jean K."})),e.createElement("div",{className:"rounded-xl border-2 border-blue-100 bg-blue-50/50 p-3 overflow-hidden"},e.createElement("p",{className:"text-xs font-bold uppercase text-blue-800 mb-2"},"Exemple : o trouver l'ID dans le SMS"),e.createElement("img",{src:"/images/transaction-id-sms-example-checkout.png",alt:"Exemple de SMS Mobile Money montrant l'ID de la transaction (ex: 7232173826)",className:"w-full max-w-sm mx-auto rounded-lg border border-gray-200 bg-white shadow-sm object-contain"}),e.createElement("p",{className:"text-xs text-blue-700 mt-2 text-center"},"Saisissez le numro indiqu  ct de ID ou ID de la transaction dans le SMS de confirmation.")),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-bold uppercase text-gray-700 mb-2"},"Code transaction"),e.createElement("div",{className:"flex items-center gap-3 rounded-3xl border-2 border-gray-300 px-4 py-3 bg-white focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 transition-all"},e.createElement(Sa,{size:18,className:"text-gray-400 flex-shrink-0"}),e.createElement("input",{type:"text",inputMode:"numeric",maxLength:10,value:W.transactionCode||"",onChange:be=>fe(U.sellerId,"transactionCode",be.target.value),className:"w-full border-none p-0 text-sm font-medium focus:outline-none",placeholder:"10 chiffres (ex: 7232173826)",title:"ID de la transaction : 10 chiffres reus par SMS"}))),w==="full"&&e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"block text-xs font-bold uppercase text-gray-700"},"Code promo vendeur"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"flex items-center gap-2 rounded-2xl border-2 border-gray-300 px-3 py-2.5 bg-white flex-1"},e.createElement(Wa,{size:16,className:"text-gray-400 flex-shrink-0"}),e.createElement("input",{type:"text",value:W.promoCode||"",onChange:be=>fe(U.sellerId,"promoCode",be.target.value),className:"w-full border-none p-0 text-sm font-medium focus:outline-none uppercase",placeholder:"Ex: WELCOME20",maxLength:40})),e.createElement("button",{type:"button",onClick:()=>re(U),disabled:!!p[U.sellerId]||!String(W.promoCode||"").trim(),className:"rounded-2xl bg-indigo-600 px-4 py-2.5 text-xs font-semibold text-white hover:bg-indigo-700 disabled:opacity-60"},p[U.sellerId]?"Validation...":"Appliquer")),(me.message||me.status==="valid")&&e.createElement("div",{className:`rounded-xl border px-3 py-2 text-xs ${me.status==="valid"?"border-emerald-200 bg-emerald-50 text-emerald-700":me.status==="error"?"border-red-200 bg-red-50 text-red-700":"border-gray-200 bg-gray-50 text-gray-600"}`},e.createElement("p",{className:"font-semibold"},me.message||"Code prt  tre appliqu."),me.status==="valid"&&me.pricing&&e.createElement("p",{className:"mt-1"},"Nouveau total vendeur: ",Rn(me.pricing.finalAmount)," FCFA","  ","conomie: ",Rn(me.pricing.discountAmount)," FCFA"))),w==="installment"&&e.createElement("div",{className:"space-y-4 rounded-2xl border border-indigo-200 bg-indigo-50/60 p-4"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-bold uppercase text-indigo-700 mb-2"},"Premier paiement fixe (",Rn($)," FCFA)"),e.createElement("input",{type:"number",min:$||1,max:Number(U.subtotal||0),value:H,readOnly:!0,disabled:!0,className:"w-full rounded-2xl border border-indigo-200 px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),e.createElement("p",{className:"mt-1 text-xs text-indigo-700"},"Reste estim: ",Rn(V)," FCFA")),K&&e.createElement("div",{className:"space-y-3 rounded-xl border border-indigo-200 bg-white p-3"},e.createElement("p",{className:"text-xs font-bold uppercase text-indigo-700"},"Informations garant"),e.createElement("input",{type:"text",placeholder:"Nom complet",value:C.fullName,onChange:be=>A(J=>({...J,fullName:be.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm"}),e.createElement("input",{type:"text",placeholder:"Tlphone",value:C.phone,onChange:be=>A(J=>({...J,phone:be.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm"}),e.createElement("input",{type:"text",placeholder:"Relation avec le client",value:C.relation,onChange:be=>A(J=>({...J,relation:be.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm"}),e.createElement("input",{type:"text",placeholder:"Pice d'identit (optionnel)",value:C.nationalId,onChange:be=>A(J=>({...J,nationalId:be.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm"}),e.createElement("input",{type:"text",placeholder:"Adresse",value:C.address,onChange:be=>A(J=>({...J,address:be.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm"})))),e.createElement("div",{className:"rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 px-4 py-3 space-y-2 text-xs sm:text-sm"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Sous-total vendeur"),e.createElement("span",{className:"font-black text-gray-900"},Rn(ne)," FCFA")),w==="full"&&ne<Number(U.subtotal||0)&&e.createElement("div",{className:"flex justify-between items-center"},e.createElement("span",{className:"text-emerald-700 font-semibold"},"conomie promo"),e.createElement("span",{className:"font-black text-emerald-600"},"-",Rn(Number(U.subtotal||0)-ne)," FCFA")),e.createElement("div",{className:"flex justify-between items-center"},e.createElement("span",{className:"text-blue-700 font-semibold"},w==="installment"?"Premier paiement":"Acompte (25%)"),e.createElement("span",{className:"font-black text-blue-600"},Rn(ee)," FCFA")),e.createElement("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Reste  payer"),e.createElement("span",{className:"font-black text-gray-900"},Rn(ve)," FCFA"))))}),e.createElement("div",{className:"rounded-2xl border-2 border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50 px-4 py-3 text-xs sm:text-sm text-amber-800 flex items-start gap-3"},e.createElement(ar,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),w==="installment"?`Merci de payer le premier montant de ${Rn(ge)} FCFA puis de suivre lchancier.`:q.length>1?"Merci de payer lacompte indiqu pour chaque vendeur avant validation.":`Merci de payer exactement ${Rn(ae)} FCFA avant validation.`),x&&e.createElement("div",{className:"rounded-2xl border-2 border-red-200 bg-red-50 px-4 py-3 flex items-start gap-3"},e.createElement(Yt,{size:18,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-red-700 font-semibold"},x)),e.createElement("button",{type:"submit",disabled:g,className:"w-full inline-flex items-center justify-center gap-2 rounded-3xl bg-blue-600 px-6 py-4 text-sm sm:text-base font-semibold text-white hover:bg-blue-700 disabled:opacity-60 transition-all duration-200 active:scale-95 shadow-sm"},g?e.createElement(e.Fragment,null,e.createElement("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Confirmation..."):e.createElement(e.Fragment,null,e.createElement(cn,{size:18}),"Confirmer la commande"))))))):e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 flex items-center justify-center px-4 py-10"},e.createElement("div",{className:"max-w-md w-full text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-3xl bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center mb-6 shadow-lg border-2 border-blue-100"},e.createElement(ea,{size:32,className:"text-blue-600"})),e.createElement("h1",{className:"text-2xl sm:text-3xl font-black text-gray-900 mb-3"},"Votre panier est vide"),e.createElement("p",{className:"text-gray-600 font-medium mb-8"},"Ajoutez des produits avant de confirmer une commande."),e.createElement(ye,{to:"/products",className:"inline-flex items-center justify-center gap-2 rounded-3xl bg-blue-600 px-6 py-3.5 text-sm font-semibold text-white hover:bg-blue-700 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(ws,{size:18}),"Explorer le march")))}const K0=t=>Number(t||0).toLocaleString("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0});function sde(){const{user:t}=u.useContext(Sr),r=wa(),[a,n]=u.useState([]),[s,o]=u.useState(!0),[l,c]=u.useState(""),[m,p]=u.useState({});u.useEffect(()=>{if(!t){r("/login");return}f()},[t,r]);const f=async()=>{o(!0),c("");try{const{data:b}=await oe.get("/orders/draft");n(b.items||[])}catch(b){c(b.response?.data?.message||"Impossible de charger les brouillons.")}finally{o(!1)}},g=async b=>{if(confirm("tes-vous sr de vouloir supprimer ce brouillon ?")){p(x=>({...x,[b]:!0}));try{await oe.delete(`/orders/draft/${b}`),n(x=>x.filter(v=>v._id!==b))}catch(x){alert(x.response?.data?.message||"Impossible de supprimer le brouillon.")}finally{p(x=>({...x,[b]:!1}))}}};return t?s?e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.createElement("p",{className:"text-gray-600 font-medium"},"Chargement..."))):e.createElement("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50"},e.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 space-y-6 sm:space-y-8"},e.createElement("header",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 rounded-3xl p-6 sm:p-8 border-2 border-blue-100 shadow-lg"},e.createElement(ye,{to:"/profile",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors"},e.createElement(Gr,{size:18}),e.createElement("span",{className:"font-medium text-sm"},"Retour au profil")),e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(ea,{size:24,className:"text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl sm:text-4xl font-black text-gray-900"},"Mes commandes en brouillon"),e.createElement("p",{className:"text-gray-600 font-medium mt-1"},"Commandes non finalises que vous pouvez complter")))),l&&e.createElement("div",{className:"rounded-2xl border-2 border-red-200 bg-red-50 px-4 py-3 flex items-start gap-3"},e.createElement(Yt,{size:18,className:"text-red-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-red-700 font-semibold"},l)),a.length===0?e.createElement("div",{className:"bg-white rounded-3xl border-2 border-gray-200 shadow-xl p-8 sm:p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mb-6 shadow-lg"},e.createElement(ea,{size:32,className:"text-gray-400"})),e.createElement("h2",{className:"text-2xl font-black text-gray-900 mb-3"},"Aucun brouillon"),e.createElement("p",{className:"text-gray-600 font-medium mb-8"},"Vous n'avez pas de commandes en brouillon pour le moment."),e.createElement(ye,{to:"/cart",className:"inline-flex items-center justify-center gap-2 rounded-3xl bg-blue-600 px-6 py-3.5 text-sm font-semibold text-white hover:bg-blue-700 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(en,{size:18}),"Voir mon panier")):e.createElement("div",{className:"space-y-4 sm:space-y-6"},a.map(b=>{const x=Math.round((b.totalAmount||0)*.25),v=Math.max(0,(b.totalAmount||0)-x),E=b.draftPayments?.[0]||{};return e.createElement("div",{key:b._id,className:"bg-white rounded-3xl border-2 border-gray-200 shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-300"},e.createElement("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-b-2 border-amber-200 px-5 sm:px-6 py-4 flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg"},e.createElement(Xt,{size:20,className:"text-white"})),e.createElement("div",null,e.createElement("h3",{className:"text-lg font-black text-gray-900"},"Brouillon"),e.createElement("p",{className:"text-xs text-gray-600 font-medium"},"Cr le ",new Date(b.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})))),e.createElement("button",{onClick:()=>g(b._id),disabled:m[b._id],className:"p-2 rounded-full bg-white border border-red-200 text-red-600 hover:bg-red-50 transition-all duration-200 active:scale-95"},e.createElement(is,{size:18}))),e.createElement("div",{className:"p-5 sm:p-6 space-y-5"},e.createElement("div",{className:"space-y-3"},e.createElement("h4",{className:"text-sm font-bold uppercase text-gray-500 tracking-wide"},"Articles"),e.createElement("div",{className:"space-y-2"},b.items?.map((y,w)=>e.createElement("div",{key:w,className:"flex items-start gap-3 p-3 bg-gray-50 rounded-2xl border border-gray-200"},e.createElement("div",{className:"w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 rounded-xl overflow-hidden bg-gray-200"},e.createElement("img",{src:y.snapshot?.image||y.product?.images?.[0]||"https://via.placeholder.com/80",alt:y.snapshot?.title||y.product?.title,className:"w-full h-full object-cover"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement(ye,{to:Dr(y.product),className:"font-black text-gray-900 text-sm sm:text-base line-clamp-2 mb-1 hover:text-blue-600 transition-colors"},y.snapshot?.title||y.product?.title),e.createElement("p",{className:"text-xs text-gray-600 font-medium mb-1"},"Quantit: x",y.quantity),e.createElement("p",{className:"text-sm font-black text-blue-600"},K0((y.snapshot?.price||y.product?.price||0)*(y.quantity||1))," FCFA")))))),E.payerName||E.transactionCode?e.createElement("div",{className:"rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 p-4 space-y-2"},e.createElement("h4",{className:"text-xs font-bold uppercase text-blue-700 tracking-wide"},"Informations de paiement"),E.payerName&&e.createElement("p",{className:"text-sm text-gray-700"},e.createElement("span",{className:"font-semibold"},"Payeur:")," ",E.payerName),E.transactionCode&&e.createElement("p",{className:"text-sm text-gray-700"},e.createElement("span",{className:"font-semibold"},"Code transaction:")," ",E.transactionCode)):e.createElement("div",{className:"rounded-2xl border-2 border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50 p-4 flex items-start gap-3"},e.createElement(Yt,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-amber-800 font-medium"},"Les informations de paiement n'ont pas encore t renseignes.")),e.createElement("div",{className:"border-t-2 border-gray-200 pt-4 space-y-3"},e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-xl"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Total commande"),e.createElement("span",{className:"font-black text-gray-900 text-lg"},K0(b.totalAmount)," FCFA")),e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-blue-50 rounded-xl border border-blue-200"},e.createElement("span",{className:"text-blue-700 font-semibold"},"Acompte (25%)"),e.createElement("span",{className:"font-black text-blue-600 text-lg"},K0(x)," FCFA")),e.createElement("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-xl"},e.createElement("span",{className:"text-gray-700 font-semibold"},"Reste  payer"),e.createElement("span",{className:"font-black text-gray-900 text-lg"},K0(v)," FCFA"))),e.createElement("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t-2 border-gray-200"},e.createElement(ye,{to:"/orders/checkout",className:"flex-1 inline-flex items-center justify-center gap-2 rounded-3xl bg-blue-600 px-6 py-3.5 text-sm font-semibold text-white hover:bg-blue-700 transition-all duration-200 active:scale-95 shadow-sm"},e.createElement(Sa,{size:18}),"Continuer la commande"),e.createElement("button",{onClick:()=>g(b._id),disabled:m[b._id],className:"inline-flex items-center justify-center gap-2 rounded-3xl border border-red-300 bg-white text-red-600 px-6 py-3.5 text-sm font-semibold hover:bg-red-50 transition-all duration-200 active:scale-95 shadow-sm disabled:opacity-60"},e.createElement(is,{size:18}),"Supprimer"))))})))):null}function ode(t=767){u.useEffect(()=>{if(typeof window>"u"||typeof document>"u")return;const r=window.matchMedia(`(max-width: ${t}px)`),a=s=>{if(typeof s.composedPath=="function")return s.composedPath().find(l=>l instanceof HTMLElement&&(l.tagName==="A"||l.tagName==="AREA")&&l.getAttribute("target")==="_blank");const o=s.target;return o&&typeof o.closest=="function"?o.closest('a[target="_blank"],area[target="_blank"]'):null},n=s=>{if(!r.matches)return;const o=a(s);if(!o)return;const l=o.getAttribute("href");if(!l)return;const c=new URL(l,window.location.href);c.origin===window.location.origin&&(s.preventDefault(),window.location.assign(c.pathname+c.search+c.hash))};return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}},[t])}function lde(){const t=ts();return u.useEffect(()=>{typeof window>"u"||(window.requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"instant"})}),window.scrollTo(0,0))},[t.pathname]),null}const Yo=Object.create(null);Yo.open="0";Yo.close="1";Yo.ping="2";Yo.pong="3";Yo.message="4";Yo.upgrade="5";Yo.noop="6";const df=Object.create(null);Object.keys(Yo).forEach(t=>{df[Yo[t]]=t});const G1={type:"error",data:"parser error"},Y$=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",X$=typeof ArrayBuffer=="function",Q$=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Tk=({type:t,data:r},a,n)=>Y$&&r instanceof Blob?a?n(r):SO(r,n):X$&&(r instanceof ArrayBuffer||Q$(r))?a?n(r):SO(new Blob([r]),n):n(Yo[t]+(r||"")),SO=(t,r)=>{const a=new FileReader;return a.onload=function(){const n=a.result.split(",")[1];r("b"+(n||""))},a.readAsDataURL(t)};function CO(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let $w;function ide(t,r){if(Y$&&t.data instanceof Blob)return t.data.arrayBuffer().then(CO).then(r);if(X$&&(t.data instanceof ArrayBuffer||Q$(t.data)))return r(CO(t.data));Tk(t,!1,a=>{$w||($w=new TextEncoder),r($w.encode(a))})}const AO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ou=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<AO.length;t++)ou[AO.charCodeAt(t)]=t;const cde=t=>{let r=t.length*.75,a=t.length,n,s=0,o,l,c,m;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);const p=new ArrayBuffer(r),f=new Uint8Array(p);for(n=0;n<a;n+=4)o=ou[t.charCodeAt(n)],l=ou[t.charCodeAt(n+1)],c=ou[t.charCodeAt(n+2)],m=ou[t.charCodeAt(n+3)],f[s++]=o<<2|l>>4,f[s++]=(l&15)<<4|c>>2,f[s++]=(c&3)<<6|m&63;return p},dde=typeof ArrayBuffer=="function",Ok=(t,r)=>{if(typeof t!="string")return{type:"message",data:J$(t,r)};const a=t.charAt(0);return a==="b"?{type:"message",data:mde(t.substring(1),r)}:df[a]?t.length>1?{type:df[a],data:t.substring(1)}:{type:df[a]}:G1},mde=(t,r)=>{if(dde){const a=cde(t);return J$(a,r)}else return{base64:!0,data:t}},J$=(t,r)=>r==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Z$="",ude=(t,r)=>{const a=t.length,n=new Array(a);let s=0;t.forEach((o,l)=>{Tk(o,!1,c=>{n[l]=c,++s===a&&r(n.join(Z$))})})},pde=(t,r)=>{const a=t.split(Z$),n=[];for(let s=0;s<a.length;s++){const o=Ok(a[s],r);if(n.push(o),o.type==="error")break}return n};function fde(){return new TransformStream({transform(t,r){ide(t,a=>{const n=a.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(s[0]|=128),r.enqueue(s),r.enqueue(a)})}})}let Lw;function Y0(t){return t.reduce((r,a)=>r+a.length,0)}function X0(t,r){if(t[0].length===r)return t.shift();const a=new Uint8Array(r);let n=0;for(let s=0;s<r;s++)a[s]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),a}function gde(t,r){Lw||(Lw=new TextDecoder);const a=[];let n=0,s=-1,o=!1;return new TransformStream({transform(l,c){for(a.push(l);;){if(n===0){if(Y0(a)<1)break;const m=X0(a,1);o=(m[0]&128)===128,s=m[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Y0(a)<2)break;const m=X0(a,2);s=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),n=3}else if(n===2){if(Y0(a)<8)break;const m=X0(a,8),p=new DataView(m.buffer,m.byteOffset,m.length),f=p.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(G1);break}s=f*Math.pow(2,32)+p.getUint32(4),n=3}else{if(Y0(a)<s)break;const m=X0(a,s);c.enqueue(Ok(o?m:Lw.decode(m),r)),n=0}if(s===0||s>t){c.enqueue(G1);break}}}})}const eL=4;function pn(t){if(t)return hde(t)}function hde(t){for(var r in pn.prototype)t[r]=pn.prototype[r];return t}pn.prototype.on=pn.prototype.addEventListener=function(t,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(r),this};pn.prototype.once=function(t,r){function a(){this.off(t,a),r.apply(this,arguments)}return a.fn=r,this.on(t,a),this};pn.prototype.off=pn.prototype.removeListener=pn.prototype.removeAllListeners=pn.prototype.removeEventListener=function(t,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+t];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,s=0;s<a.length;s++)if(n=a[s],n===r||n.fn===r){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+t],this};pn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),a=this._callbacks["$"+t],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(a){a=a.slice(0);for(var n=0,s=a.length;n<s;++n)a[n].apply(this,r)}return this};pn.prototype.emitReserved=pn.prototype.emit;pn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};pn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Nh=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,a)=>a(r,0),Zs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),bde="arraybuffer";function tL(t,...r){return r.reduce((a,n)=>(t.hasOwnProperty(n)&&(a[n]=t[n]),a),{})}const xde=Zs.setTimeout,yde=Zs.clearTimeout;function kh(t,r){r.useNativeTimers?(t.setTimeoutFn=xde.bind(Zs),t.clearTimeoutFn=yde.bind(Zs)):(t.setTimeoutFn=Zs.setTimeout.bind(Zs),t.clearTimeoutFn=Zs.clearTimeout.bind(Zs))}const vde=1.33;function Ede(t){return typeof t=="string"?wde(t):Math.ceil((t.byteLength||t.size)*vde)}function wde(t){let r=0,a=0;for(let n=0,s=t.length;n<s;n++)r=t.charCodeAt(n),r<128?a+=1:r<2048?a+=2:r<55296||r>=57344?a+=3:(n++,a+=4);return a}function rL(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Nde(t){let r="";for(let a in t)t.hasOwnProperty(a)&&(r.length&&(r+="&"),r+=encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return r}function kde(t){let r={},a=t.split("&");for(let n=0,s=a.length;n<s;n++){let o=a[n].split("=");r[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return r}class Sde extends Error{constructor(r,a,n){super(r),this.description=a,this.context=n,this.type="TransportError"}}class Mk extends pn{constructor(r){super(),this.writable=!1,kh(this,r),this.opts=r,this.query=r.query,this.socket=r.socket,this.supportsBinary=!r.forceBase64}onError(r,a,n){return super.emitReserved("error",new Sde(r,a,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"&&this.write(r)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const a=Ok(r,this.socket.binaryType);this.onPacket(a)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,a={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const a=Nde(r);return a.length?"?"+a:""}}class Cde extends Mk{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(r){this.readyState="pausing";const a=()=>{this.readyState="paused",r()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||a()})),this.writable||(n++,this.once("drain",function(){--n||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){const a=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};pde(r,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const r=()=>{this.write([{type:"close"}])};this.readyState==="open"?r():this.once("open",r)}write(r){this.writable=!1,ude(r,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=rL()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(r,a)}}let aL=!1;try{aL=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ade=aL;function _de(){}class Pde extends Cde{constructor(r){if(super(r),typeof location<"u"){const a=location.protocol==="https:";let n=location.port;n||(n=a?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||n!==r.port}}doWrite(r,a){const n=this.request({method:"POST",data:r});n.on("success",a),n.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(a,n)=>{this.onError("xhr poll error",a,n)}),this.pollXhr=r}}class Ho extends pn{constructor(r,a,n){super(),this.createRequest=r,kh(this,n),this._opts=n,this._method=n.method||"GET",this._uri=a,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var r;const a=tL(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(a);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(r=this._opts.cookieJar)===null||r===void 0||r.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ho.requestsCount++,Ho.requests[this._index]=this)}_onError(r){this.emitReserved("error",r,this._xhr),this._cleanup(!0)}_cleanup(r){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=_de,r)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ho.requests[this._index],this._xhr=null}}_onLoad(){const r=this._xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ho.requestsCount=0;Ho.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_O);else if(typeof addEventListener=="function"){const t="onpagehide"in Zs?"pagehide":"unload";addEventListener(t,_O,!1)}}function _O(){for(let t in Ho.requests)Ho.requests.hasOwnProperty(t)&&Ho.requests[t].abort()}const Tde=(function(){const t=nL({xdomain:!1});return t&&t.responseType!==null})();class Ode extends Pde{constructor(r){super(r);const a=r&&r.forceBase64;this.supportsBinary=Tde&&!a}request(r={}){return Object.assign(r,{xd:this.xd},this.opts),new Ho(nL,this.uri(),r)}}function nL(t){const r=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||Ade))return new XMLHttpRequest}catch{}if(!r)try{return new Zs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const sL=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Mde extends Mk{get name(){return"websocket"}doOpen(){const r=this.uri(),a=this.opts.protocols,n=sL?{}:tL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(r,a,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let a=0;a<r.length;a++){const n=r[a],s=a===r.length-1;Tk(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}s&&Nh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=rL()),this.supportsBinary||(a.b64=1),this.createUri(r,a)}}const Iw=Zs.WebSocket||Zs.MozWebSocket;class jde extends Mde{createSocket(r,a,n){return sL?new Iw(r,a,n):a?new Iw(r,a):new Iw(r)}doWrite(r,a){this.ws.send(a)}}class Rde extends Mk{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(r){return this.emitReserved("error",r)}this._transport.closed.then(()=>{this.onClose()}).catch(r=>{this.onError("webtransport error",r)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(r=>{const a=gde(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=r.readable.pipeThrough(a).getReader(),s=fde();s.readable.pipeTo(r.writable),this._writer=s.writable.getWriter();const o=()=>{n.read().then(({done:c,value:m})=>{c||(this.onPacket(m),o())}).catch(c=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let a=0;a<r.length;a++){const n=r[a],s=a===r.length-1;this._writer.write(n).then(()=>{s&&Nh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this._transport)===null||r===void 0||r.close()}}const $de={websocket:jde,webtransport:Rde,polling:Ode},Lde=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ide=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function K1(t){if(t.length>8e3)throw"URI too long";const r=t,a=t.indexOf("["),n=t.indexOf("]");a!=-1&&n!=-1&&(t=t.substring(0,a)+t.substring(a,n).replace(/:/g,";")+t.substring(n,t.length));let s=Lde.exec(t||""),o={},l=14;for(;l--;)o[Ide[l]]=s[l]||"";return a!=-1&&n!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Dde(o,o.path),o.queryKey=Fde(o,o.query),o}function Dde(t,r){const a=/\/{2,9}/g,n=r.replace(a,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&n.splice(0,1),r.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Fde(t,r){const a={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,o){s&&(a[s]=o)}),a}const Y1=typeof addEventListener=="function"&&typeof removeEventListener=="function",mf=[];Y1&&addEventListener("offline",()=>{mf.forEach(t=>t())},!1);class pi extends pn{constructor(r,a){if(super(),this.binaryType=bde,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,r&&typeof r=="object"&&(a=r,r=null),r){const n=K1(r);a.hostname=n.host,a.secure=n.protocol==="https"||n.protocol==="wss",a.port=n.port,n.query&&(a.query=n.query)}else a.host&&(a.hostname=K1(a.host).host);kh(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=kde(this.opts.query)),Y1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(r){const a=Object.assign({},this.opts.query);a.EIO=eL,a.transport=r,this.id&&(a.sid=this.id);const n=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return new this._transportsByName[r](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const r=this.opts.rememberUpgrade&&pi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(r);a.open(),this.setTransport(a)}setTransport(r){this.transport&&this.transport.removeAllListeners(),this.transport=r,r.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",pi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",r),this.emitReserved("heartbeat"),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=r.data,this._onError(a);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this._pingInterval=r.pingInterval,this._pingTimeout=r.pingTimeout,this._maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const r=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+r,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},r),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this._getWritablePackets();this.transport.send(r),this._prevBufferLen=r.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(a+=Ede(s)),n>0&&a>this._maxPayload)return this.writeBuffer.slice(0,n);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const r=Date.now()>this._pingTimeoutTime;return r&&(this._pingTimeoutTime=0,Nh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),r}write(r,a,n){return this._sendPacket("message",r,a,n),this}send(r,a,n){return this._sendPacket("message",r,a,n),this}_sendPacket(r,a,n,s){if(typeof a=="function"&&(s=a,a=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:r,data:a,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const r=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),r()},n=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():r()}):this.upgrading?n():r()),this}_onError(r){if(pi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",r),this._onClose("transport error",r)}_onClose(r,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Y1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=mf.indexOf(this._offlineEventListener);n!==-1&&mf.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",r,a),this.writeBuffer=[],this._prevBufferLen=0}}}pi.protocol=eL;class zde extends pi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let r=0;r<this._upgrades.length;r++)this._probe(this._upgrades[r])}_probe(r){let a=this.createTransport(r),n=!1;pi.priorWebsocketSuccess=!1;const s=()=>{n||(a.send([{type:"ping",data:"probe"}]),a.once("packet",g=>{if(!n)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;pi.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=a.name,this.emitReserved("upgradeError",b)}}))};function o(){n||(n=!0,f(),a.close(),a=null)}const l=g=>{const b=new Error("probe error: "+g);b.transport=a.name,o(),this.emitReserved("upgradeError",b)};function c(){l("transport closed")}function m(){l("socket closed")}function p(g){a&&g.name!==a.name&&o()}const f=()=>{a.removeListener("open",s),a.removeListener("error",l),a.removeListener("close",c),this.off("close",m),this.off("upgrading",p)};a.once("open",s),a.once("error",l),a.once("close",c),this.once("close",m),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{n||a.open()},200):a.open()}onHandshake(r){this._upgrades=this._filterUpgrades(r.upgrades),super.onHandshake(r)}_filterUpgrades(r){const a=[];for(let n=0;n<r.length;n++)~this.transports.indexOf(r[n])&&a.push(r[n]);return a}}let Bde=class extends zde{constructor(r,a={}){const n=typeof r=="object"?r:a;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>$de[s]).filter(s=>!!s)),super(r,n)}};function qde(t,r="",a){let n=t;a=a||typeof location<"u"&&location,t==null&&(t=a.protocol+"//"+a.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=a.protocol+t:t=a.host+t),/^(https?|wss?):\/\//.test(t)||(typeof a<"u"?t=a.protocol+"//"+t:t="https://"+t),n=K1(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+r,n.href=n.protocol+"://"+o+(a&&a.port===n.port?"":":"+n.port),n}const Ude=typeof ArrayBuffer=="function",Vde=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,oL=Object.prototype.toString,Hde=typeof Blob=="function"||typeof Blob<"u"&&oL.call(Blob)==="[object BlobConstructor]",Wde=typeof File=="function"||typeof File<"u"&&oL.call(File)==="[object FileConstructor]";function jk(t){return Ude&&(t instanceof ArrayBuffer||Vde(t))||Hde&&t instanceof Blob||Wde&&t instanceof File}function uf(t,r){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let a=0,n=t.length;a<n;a++)if(uf(t[a]))return!0;return!1}if(jk(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return uf(t.toJSON(),!0);for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&uf(t[a]))return!0;return!1}function Gde(t){const r=[],a=t.data,n=t;return n.data=X1(a,r),n.attachments=r.length,{packet:n,buffers:r}}function X1(t,r){if(!t)return t;if(jk(t)){const a={_placeholder:!0,num:r.length};return r.push(t),a}else if(Array.isArray(t)){const a=new Array(t.length);for(let n=0;n<t.length;n++)a[n]=X1(t[n],r);return a}else if(typeof t=="object"&&!(t instanceof Date)){const a={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=X1(t[n],r));return a}return t}function Kde(t,r){return t.data=Q1(t.data,r),delete t.attachments,t}function Q1(t,r){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<r.length)return r[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let a=0;a<t.length;a++)t[a]=Q1(t[a],r);else if(typeof t=="object")for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=Q1(t[a],r));return t}const lL=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Yde=5;var Or;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Or||(Or={}));class Xde{constructor(r){this.replacer=r}encode(r){return(r.type===Or.EVENT||r.type===Or.ACK)&&uf(r)?this.encodeAsBinary({type:r.type===Or.EVENT?Or.BINARY_EVENT:Or.BINARY_ACK,nsp:r.nsp,data:r.data,id:r.id}):[this.encodeAsString(r)]}encodeAsString(r){let a=""+r.type;return(r.type===Or.BINARY_EVENT||r.type===Or.BINARY_ACK)&&(a+=r.attachments+"-"),r.nsp&&r.nsp!=="/"&&(a+=r.nsp+","),r.id!=null&&(a+=r.id),r.data!=null&&(a+=JSON.stringify(r.data,this.replacer)),a}encodeAsBinary(r){const a=Gde(r),n=this.encodeAsString(a.packet),s=a.buffers;return s.unshift(n),s}}class Rk extends pn{constructor(r){super(),this.reviver=r}add(r){let a;if(typeof r=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(r);const n=a.type===Or.BINARY_EVENT;n||a.type===Or.BINARY_ACK?(a.type=n?Or.EVENT:Or.ACK,this.reconstructor=new Qde(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(jk(r)||r.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(r),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+r)}decodeString(r){let a=0;const n={type:Number(r.charAt(0))};if(Or[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Or.BINARY_EVENT||n.type===Or.BINARY_ACK){const o=a+1;for(;r.charAt(++a)!=="-"&&a!=r.length;);const l=r.substring(o,a);if(l!=Number(l)||r.charAt(a)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(r.charAt(a+1)==="/"){const o=a+1;for(;++a&&!(r.charAt(a)===","||a===r.length););n.nsp=r.substring(o,a)}else n.nsp="/";const s=r.charAt(a+1);if(s!==""&&Number(s)==s){const o=a+1;for(;++a;){const l=r.charAt(a);if(l==null||Number(l)!=l){--a;break}if(a===r.length)break}n.id=Number(r.substring(o,a+1))}if(r.charAt(++a)){const o=this.tryParse(r.substr(a));if(Rk.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(r){try{return JSON.parse(r,this.reviver)}catch{return!1}}static isPayloadValid(r,a){switch(r){case Or.CONNECT:return _g(a);case Or.DISCONNECT:return a===void 0;case Or.CONNECT_ERROR:return typeof a=="string"||_g(a);case Or.EVENT:case Or.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&lL.indexOf(a[0])===-1);case Or.ACK:case Or.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Qde{constructor(r){this.packet=r,this.buffers=[],this.reconPack=r}takeBinaryData(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){const a=Kde(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Jde(t){return typeof t=="string"}const Zde=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function eme(t){return t===void 0||Zde(t)}function _g(t){return Object.prototype.toString.call(t)==="[object Object]"}function tme(t,r){switch(t){case Or.CONNECT:return r===void 0||_g(r);case Or.DISCONNECT:return r===void 0;case Or.EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&lL.indexOf(r[0])===-1);case Or.ACK:return Array.isArray(r);case Or.CONNECT_ERROR:return typeof r=="string"||_g(r);default:return!1}}function rme(t){return Jde(t.nsp)&&eme(t.id)&&tme(t.type,t.data)}const ame=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Rk,Encoder:Xde,get PacketType(){return Or},isPacketValid:rme,protocol:Yde},Symbol.toStringTag,{value:"Module"}));function yo(t,r,a){return t.on(r,a),function(){t.off(r,a)}}const nme=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class iL extends pn{constructor(r,a,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=a,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[yo(r,"open",this.onopen.bind(this)),yo(r,"packet",this.onpacket.bind(this)),yo(r,"error",this.onerror.bind(this)),yo(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...a){var n,s,o;if(nme.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(a.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const l={type:Or.EVENT,data:a};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const f=this.ids++,g=a.pop();this._registerAckCallback(f,g),l.id=f}const c=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,m=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(m?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(r,a){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[r]=a;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===r&&this.sendBuffer.splice(c,1);a.call(this,new Error("operation has timed out"))},s),l=(...c)=>{this.io.clearTimeoutFn(o),a.apply(this,c)};l.withError=!0,this.acks[r]=l}emitWithAck(r,...a){return new Promise((n,s)=>{const o=(l,c)=>l?s(l):n(c);o.withError=!0,a.push(o),this.emit(r,...a)})}_addToQueue(r){let a;typeof r[r.length-1]=="function"&&(a=r.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((s,...o)=>(this._queue[0],s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(s)):(this._queue.shift(),a&&a(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(r=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!r||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:Or.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",r,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(n=>String(n.id)===r)){const n=this.acks[r];delete this.acks[r],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case Or.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Or.EVENT:case Or.BINARY_EVENT:this.onevent(r);break;case Or.ACK:case Or.BINARY_ACK:this.onack(r);break;case Or.DISCONNECT:this.ondisconnect();break;case Or.CONNECT_ERROR:this.destroy();const n=new Error(r.data.message);n.data=r.data.data,this.emitReserved("connect_error",n);break}}onevent(r){const a=r.data||[];r.id!=null&&a.push(this.ack(r.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const n of a)n.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const a=this;let n=!1;return function(...s){n||(n=!0,a.packet({type:Or.ACK,id:r,data:s}))}}onack(r){const a=this.acks[r.id];typeof a=="function"&&(delete this.acks[r.id],a.withError&&r.data.unshift(null),a.apply(this,r.data))}onconnect(r,a){this.id=r,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Or.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const a=this._anyListeners;for(let n=0;n<a.length;n++)if(r===a[n])return a.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const a=this._anyOutgoingListeners;for(let n=0;n<a.length;n++)if(r===a[n])return a.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const n of a)n.apply(this,r.data)}}}function cm(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}cm.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),a=Math.floor(r*this.jitter*t);t=(Math.floor(r*10)&1)==0?t-a:t+a}return Math.min(t,this.max)|0};cm.prototype.reset=function(){this.attempts=0};cm.prototype.setMin=function(t){this.ms=t};cm.prototype.setMax=function(t){this.max=t};cm.prototype.setJitter=function(t){this.jitter=t};class J1 extends pn{constructor(r,a){var n;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(a=r,r=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,kh(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((n=a.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new cm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=r;const s=a.parser||ame;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,r||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var a;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(a=this.backoff)===null||a===void 0||a.setMin(r),this)}randomizationFactor(r){var a;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(a=this.backoff)===null||a===void 0||a.setJitter(r),this)}reconnectionDelayMax(r){var a;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(a=this.backoff)===null||a===void 0||a.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(~this._readyState.indexOf("open"))return this;this.engine=new Bde(this.uri,this.opts);const a=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=yo(a,"open",function(){n.onopen(),r&&r()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),r?r(c):this.maybeReconnectOnOpen()},l=yo(a,"error",o);if(this._timeout!==!1){const c=this._timeout,m=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),a.close()},c);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(s),this.subs.push(l),this}connect(r){return this.open(r)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(yo(r,"ping",this.onping.bind(this)),yo(r,"data",this.ondata.bind(this)),yo(r,"error",this.onerror.bind(this)),yo(r,"close",this.onclose.bind(this)),yo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(a){this.onclose("parse error",a)}}ondecoded(r){Nh(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){this.emitReserved("error",r)}socket(r,a){let n=this.nsps[r];return n?this._autoConnect&&!n.active&&n.connect():(n=new iL(this,r,a),this.nsps[r]=n),n}_destroy(r){const a=Object.keys(this.nsps);for(const n of a)if(this.nsps[n].active)return;this._close()}_packet(r){const a=this.encoder.encode(r);for(let n=0;n<a.length;n++)this.engine.write(a[n],r.options)}cleanup(){this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(r,a){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{r.skipReconnect||(this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(s=>{s?(r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",s)):r.onreconnect()}))},a);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}const Zm={};function pf(t,r){typeof t=="object"&&(r=t,t=void 0),r=r||{};const a=qde(t,r.path||"/socket.io"),n=a.source,s=a.id,o=a.path,l=Zm[s]&&o in Zm[s].nsps,c=r.forceNew||r["force new connection"]||r.multiplex===!1||l;let m;return c?m=new J1(n,r):(Zm[s]||(Zm[s]=new J1(n,r)),m=Zm[s]),a.query&&!r.query&&(r.query=a.queryKey),m.socket(a.path,r)}Object.assign(pf,{Manager:J1,Socket:iL,io:pf,connect:pf});const sme=t=>{const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},ome=t=>{const r=new Date(t),a=new Date,n=new Date(a);return n.setDate(n.getDate()-1),r.toDateString()===a.toDateString()?"Aujourd'hui":r.toDateString()===n.toDateString()?"Hier":r.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})},Dw={id:"welcome",from:"support",text:"Bonjour !  Bienvenue sur le support HDMarket. Comment pouvons-nous vous aider ?",createdAt:new Date().toISOString()},PO=768,TO=70,lme=22,ime=18,cme=56,dme=()=>{const{user:t}=u.useContext(Sr),r=t?.token,[a,n]=u.useState(!1),[s,o]=u.useState([Dw]),[l,c]=u.useState([]),[m,p]=u.useState(!1),[f,g]=u.useState(""),[b,x]=u.useState(!1),[v,E]=u.useState(0),[y,w]=u.useState(!1),[k,C]=u.useState(()=>{if(typeof window>"u")return!1;try{return localStorage.getItem("hdmarket_chat_hidden")==="true"}catch{return!1}}),[A,S]=u.useState(()=>{if(typeof window>"u")return!1;try{return localStorage.getItem("hdmarket_chat_button_collapsed")==="true"}catch{return!1}}),P=u.useRef(null),T=u.useRef(null),O=u.useRef(null),R=u.useRef(null),D="https://hdmarket-backend.onrender.com/api".replace(/\/api$/,"");u.useEffect(()=>{if(!r){O.current&&(O.current.disconnect(),O.current=null),p(!1);return}const U=pf(D,{auth:r?{token:r}:void 0,transports:["websocket"]});return O.current=U,U.on("message",async W=>{if(W.from==="user"&&R.current&&W.text===R.current){R.current=null;return}o(me=>[...me,W]),!a&&W.from==="support"&&E(me=>me+1),x(!1)}),U.on("typing",()=>x(!0)),U.on("stopTyping",()=>x(!1)),U.on("connect",()=>p(!0)),U.on("disconnect",()=>p(!1)),U.on("connect_error",()=>p(!1)),()=>{U.disconnect(),O.current=null}},[r,D,a]),u.useEffect(()=>{if(!r){c([]);return}(async()=>{try{const{data:W}=await oe.get("/chat/templates");c(Array.isArray(W)?W:[])}catch(W){console.error("Templates load error:",W)}})()},[r]);const[$,j]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<PO),[K,H]=u.useState(!1);u.useEffect(()=>{if(typeof window>"u")return;const U=()=>{j(window.innerWidth<PO)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),u.useEffect(()=>{if(typeof window>"u")return;const U=W=>{const me=!!W?.detail?.visible;H(me)};return window.addEventListener("hdmarket:scroll-top-visibility",U),()=>window.removeEventListener("hdmarket:scroll-top-visibility",U)},[]),u.useEffect(()=>{if(!r){o([Dw]);return}(async()=>{try{const{data:W}=await oe.get("/chat/history?limit=100");o(W.length?W:[Dw])}catch(W){console.error("Chat history load error:",W)}})()},[r]),u.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[s,a]),u.useEffect(()=>{a&&(E(0),T.current?.focus())},[a]);const V=()=>{if(!P.current)return;const{scrollTop:U,scrollHeight:W,clientHeight:me}=P.current;w(W-U-me>100)},q=()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},Y=async U=>{if(!O.current||!U?.trim())return;const W=U.trim();R.current=W,O.current.emit("sendMessage",{text:W});const me={id:`local-user-${Date.now()}`,from:"user",text:W,createdAt:new Date().toISOString(),status:"sent"};o(ne=>[...ne,me]),g("")},z=U=>{if(!O.current||!U?.question)return;const W=U.question.trim();R.current=W,O.current.emit("sendMessage",{text:W});const me={id:`local-response-${U._id}-${Date.now()}`,from:"support",text:U.response||"Le support vous rpondra bientt.",createdAt:new Date().toISOString()},ne={id:`local-user-${U._id}-${Date.now()}`,from:"user",text:W,createdAt:new Date().toISOString(),status:"sent"};o(ee=>[...ee,ne,me])},L=U=>{U.preventDefault(),Y(f)},Q=async U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),await Y(f))},B=()=>{C(!0);try{localStorage.setItem("hdmarket_chat_hidden","true")}catch(U){console.error("Failed to save chat hidden state:",U)}},ae=()=>{C(!1),n(!0),S(!1);try{localStorage.removeItem("hdmarket_chat_hidden"),localStorage.removeItem("hdmarket_chat_button_collapsed")}catch(U){console.error("Failed to remove chat hidden state:",U)}},te=()=>{n(!1),S(!0);try{localStorage.setItem("hdmarket_chat_button_collapsed","true")}catch(U){console.error("Failed to save button collapsed state:",U)}},ge=()=>{S(!1);try{localStorage.removeItem("hdmarket_chat_button_collapsed")}catch(U){console.error("Failed to remove button collapsed state:",U)}},ue=u.useMemo(()=>l.slice(0,4),[l]),Ee=K?TO+ime+cme:TO+lme,fe=u.useMemo(()=>{const U=[];let W=null;return s.forEach(me=>{const ne=new Date(me.createdAt).toDateString();ne!==W&&(W=ne,U.push({type:"date",date:me.createdAt})),U.push({type:"message",...me})}),U},[s]);if(!r)return null;if(k)return e.createElement("div",{className:"fixed z-50 flex items-center transition-all duration-300 ease-out sm:right-6",style:{bottom:$?`calc(env(safe-area-inset-bottom, 0px) + ${Ee}px)`:"24px",right:A?0:"1rem"}},e.createElement("div",{className:"relative flex items-center"},e.createElement("button",{type:"button",onClick:A?ge:ae,className:`flex items-center justify-center gap-2 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-indigo-500/40 ${A?"h-11 w-11 min-w-11 rounded-l-full":"px-4 py-2.5 pl-4 pr-12"}`,title:"Afficher le support"},v>0&&!A&&e.createElement("span",{className:"absolute -right-1 -top-1 flex h-5 w-5"},e.createElement("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),e.createElement("span",{className:"relative inline-flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold"},v>9?"9+":v)),v>0&&A&&e.createElement("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[9px] font-bold"},v>9?"9+":v),A?e.createElement(xu,{className:"h-5 w-5"}):e.createElement(e.Fragment,null,e.createElement(Jn,{className:"h-4 w-4"}),e.createElement("span",{className:"text-sm font-medium"},"Support"))),!A&&e.createElement("button",{type:"button",onClick:U=>{U.stopPropagation(),te()},className:"absolute -right-1.5 top-1/2 flex h-8 w-8 -translate-y-1/2 items-center justify-center rounded-full border-2 border-white bg-indigo-600 text-white shadow-md transition-colors hover:bg-indigo-700",title:"Rentrer le bouton","aria-label":"Rentrer le bouton"},e.createElement(Ar,{className:"h-4 w-4"}))));const re={bottom:$?`calc(env(safe-area-inset-bottom, 0px) + ${Ee}px)`:"24px",right:A?0:"1rem"};return e.createElement("div",{className:"fixed z-50 flex flex-col items-end transition-all duration-300 ease-out sm:right-6",style:re},a&&e.createElement("div",{className:"mb-3 w-[340px] max-w-[calc(100vw-2rem)] rounded-2xl border border-gray-200 bg-white shadow-2xl transition-all duration-300 dark:border-gray-700 dark:bg-gray-900"},e.createElement("div",{className:"relative overflow-hidden rounded-t-2xl bg-gradient-to-r from-indigo-600 via-indigo-500 to-purple-600 px-4 py-4"},e.createElement("div",{className:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-white/10 blur-2xl"}),e.createElement("div",{className:"absolute -left-6 -bottom-6 h-20 w-20 rounded-full bg-purple-400/20 blur-xl"}),e.createElement("div",{className:"relative flex items-start justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"relative"},e.createElement("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(cB,{className:"h-5 w-5 text-white"})),e.createElement("span",{className:`absolute -bottom-0.5 -right-0.5 h-3.5 w-3.5 rounded-full border-2 border-indigo-600 ${m?"bg-emerald-400":"bg-gray-400"}`})),e.createElement("div",null,e.createElement("h3",{className:"font-semibold text-white"},"Support HDMarket"),e.createElement("div",{className:"flex items-center gap-1.5 text-xs text-white/80"},m?e.createElement(e.Fragment,null,e.createElement(Zq,{className:"h-3 w-3"}),e.createElement("span",null,"En ligne  Rponse rapide")):e.createElement(e.Fragment,null,e.createElement(pj,{className:"h-3 w-3"}),e.createElement("span",null,"Hors ligne"))))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:B,className:"flex items-center gap-1.5 rounded-lg px-2.5 py-1.5 text-xs font-medium text-white/90 bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Masquer le chat",title:"Masquer le chat"},e.createElement(dc,{className:"h-3.5 w-3.5"}),e.createElement("span",null,"Masquer")),e.createElement("button",{type:"button",onClick:()=>n(!1),className:"rounded-lg p-1.5 text-white/80 transition-colors hover:bg-white/20 hover:text-white","aria-label":"Fermer le chat",title:"Fermer le chat"},e.createElement(jt,{className:"h-5 w-5"})))),e.createElement("div",{className:"relative mt-3 flex items-center gap-2 rounded-lg bg-white/10 px-3 py-1.5 backdrop-blur-sm"},e.createElement(cn,{className:"h-3.5 w-3.5 text-emerald-300"}),e.createElement("span",{className:"text-xs text-white/90"},"Conversation scurise et chiffre"))),e.createElement("div",{ref:P,onScroll:V,className:"relative flex max-h-[320px] min-h-[200px] flex-col gap-1 overflow-y-auto bg-gradient-to-b from-gray-50 to-white p-4 dark:from-gray-800 dark:to-gray-900"},fe.map((U,W)=>{if(U.type==="date")return e.createElement("div",{key:`date-${U.date}-${W}`,className:"my-3 flex items-center justify-center"},e.createElement("div",{className:"rounded-full bg-gray-100 px-3 py-1 text-xs font-medium text-gray-500 dark:bg-gray-700 dark:text-gray-400"},ome(U.date)));const me=U.from==="user";return e.createElement("div",{key:U.id||`msg-${W}-${U.createdAt}`,className:`flex ${me?"justify-end":"justify-start"} mb-1`},e.createElement("div",{className:`group relative max-w-[85%] rounded-2xl px-3.5 py-2 ${me?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white":"bg-white text-gray-800 shadow-sm ring-1 ring-gray-100 dark:bg-gray-800 dark:text-gray-200 dark:ring-gray-700"}`},!me&&e.createElement("div",{className:"mb-1 flex items-center gap-1.5"},e.createElement(pa,{className:"h-3 w-3 text-indigo-500"}),e.createElement("span",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400"},"Support")),e.createElement("p",{className:"text-sm leading-relaxed whitespace-pre-wrap"},U.text),e.createElement("div",{className:`mt-1 flex items-center gap-1.5 text-[10px] ${me?"justify-end text-indigo-200":"text-gray-400"}`},e.createElement("span",null,sme(U.createdAt)),me&&e.createElement("span",null,U.status==="read"?e.createElement(mj,{className:"h-3 w-3 text-emerald-300"}):e.createElement(li,{className:"h-3 w-3"})))))}),b&&e.createElement("div",{className:"flex justify-start mb-1"},e.createElement("div",{className:"flex items-center gap-1.5 rounded-2xl bg-white px-4 py-3 shadow-sm ring-1 ring-gray-100 dark:bg-gray-800 dark:ring-gray-700"},e.createElement("div",{className:"flex gap-1"},e.createElement("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0ms"}}),e.createElement("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"150ms"}}),e.createElement("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"300ms"}})),e.createElement("span",{className:"ml-1 text-xs text-gray-500"},"Support crit..."))),y&&e.createElement("button",{type:"button",onClick:q,className:"sticky bottom-2 left-1/2 -translate-x-1/2 rounded-full bg-white p-2 shadow-lg ring-1 ring-gray-200 transition-all hover:bg-gray-50 dark:bg-gray-800 dark:ring-gray-700"},e.createElement(Za,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}))),ue.length>0&&e.createElement("div",{className:"border-t border-gray-100 bg-gray-50/50 px-3 py-2 dark:border-gray-700 dark:bg-gray-800/50"},e.createElement("p",{className:"mb-2 flex items-center gap-1.5 text-xs font-medium text-gray-500 dark:text-gray-400"},e.createElement(ba,{className:"h-3 w-3"}),"Rponses rapides"),e.createElement("div",{className:"flex flex-wrap gap-1.5"},ue.map(U=>e.createElement("button",{key:U._id,type:"button",onClick:()=>z(U),className:"rounded-full border border-indigo-200 bg-white px-3 py-1.5 text-xs font-medium text-indigo-600 transition-all hover:border-indigo-300 hover:bg-indigo-50 dark:border-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300 dark:hover:bg-indigo-900/50"},U.question)))),e.createElement("form",{onSubmit:L,className:"border-t border-gray-100 p-3 dark:border-gray-700"},e.createElement("div",{className:"flex items-end gap-2"},e.createElement("div",{className:"relative flex-1"},e.createElement("input",{ref:T,type:"text",value:f,onChange:U=>g(U.target.value),onKeyDown:Q,placeholder:"crivez votre message...",className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-2.5 pr-10 text-sm text-gray-800 placeholder-gray-400 transition-all focus:border-indigo-300 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:placeholder-gray-500 dark:focus:border-indigo-500 dark:focus:ring-indigo-900/50",disabled:!m})),e.createElement("button",{type:"submit",disabled:!f.trim()||!m,className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-md shadow-indigo-500/30 transition-all hover:from-indigo-600 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none dark:disabled:from-gray-600 dark:disabled:to-gray-700"},e.createElement(Eu,{className:"h-4 w-4"}))),e.createElement("p",{className:"mt-2 flex items-center justify-center gap-1.5 text-[10px] text-gray-400 dark:text-gray-500"},e.createElement(pa,{className:"h-3 w-3"}),"Messages protgs"))),e.createElement("div",{className:"relative flex items-center"},e.createElement("button",{type:"button",onClick:A?ge:()=>n(U=>!U),className:`group relative flex items-center justify-center gap-2 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-indigo-500/40 ${A?"h-11 w-11 min-w-11 rounded-l-full":"px-5 py-3 pl-5 pr-12"}`,title:A?"Afficher le support":a?"Fermer":"Support"},v>0&&!A&&e.createElement("span",{className:"absolute -right-1 -top-1 flex h-5 w-5"},e.createElement("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),e.createElement("span",{className:"relative inline-flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold"},v>9?"9+":v)),v>0&&A&&e.createElement("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[9px] font-bold"},v>9?"9+":v),A?e.createElement(xu,{className:"h-5 w-5"}):e.createElement(e.Fragment,null,e.createElement(Hr,{className:`h-5 w-5 transition-transform duration-300 ${a?"rotate-12":"group-hover:scale-110"}`}),e.createElement("span",{className:"font-medium"},a?"Fermer":"Support"),e.createElement("span",{className:`flex h-2.5 w-2.5 rounded-full ${m?"bg-emerald-400":"bg-gray-400"}`},m&&e.createElement("span",{className:"animate-ping absolute inline-flex h-2.5 w-2.5 rounded-full bg-emerald-400 opacity-75"})))),!A&&e.createElement("button",{type:"button",onClick:U=>{U.stopPropagation(),te()},className:"absolute -right-1.5 top-1/2 flex h-8 w-8 -translate-y-1/2 items-center justify-center rounded-full border-2 border-white bg-indigo-600 text-white shadow-md transition-colors hover:bg-indigo-700",title:"Rentrer le bouton","aria-label":"Rentrer le bouton"},e.createElement(Ar,{className:"h-4 w-4"}))))},OO=768,mme=120,ume=["/","/products","/notifications","/suggestions"],pme=70,fme=18;function gme(){const t=ts(),[r,a]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<OO),[n,s]=u.useState(!1),o=u.useMemo(()=>ume.includes(t.pathname),[t.pathname]);return u.useEffect(()=>{if(typeof window>"u")return;const l=()=>{a(window.innerWidth<OO)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),u.useEffect(()=>{if(!o||!r||typeof window>"u"){s(!1);return}let l=null;const c=()=>{l||(l=requestAnimationFrame(()=>{l=null;const m=window.scrollY||window.pageYOffset,p=window.innerHeight,f=document.documentElement?.scrollHeight||document.body?.scrollHeight||0,g=m+p>=f-mme;s(b=>b===g?b:g)}))};return c(),window.addEventListener("scroll",c,{passive:!0}),()=>{window.removeEventListener("scroll",c),l&&cancelAnimationFrame(l)}},[o,r]),u.useEffect(()=>{if(typeof window>"u")return;const l=new CustomEvent("hdmarket:scroll-top-visibility",{detail:{visible:n}});window.dispatchEvent(l)},[n]),n?e.createElement("button",{type:"button",onClick:()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Remonter en haut",style:{bottom:`calc(env(safe-area-inset-bottom, 0px) + ${pme+fme}px)`},className:"fixed right-4 z-40 inline-flex h-12 w-12 items-center justify-center rounded-full bg-indigo-600/95 text-white shadow-xl shadow-indigo-500/40 transition hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-500"},e.createElement(cz,{className:"h-5 w-5"})):null}function hme(){const[t,r]=u.useState([]),[a,n]=u.useState(""),[s,o]=u.useState(""),[l,c]=u.useState(!1),[m,p]=u.useState(!1),[f,g]=u.useState(""),[b,x]=u.useState(null),[v,E]=u.useState(""),[y,w]=u.useState(""),k=async()=>{c(!0);try{const{data:T}=await oe.get("/chat/templates");r(Array.isArray(T)?T:[])}catch(T){console.error("Templates load error:",T),g("Impossible de charger les modles.")}finally{c(!1)}};u.useEffect(()=>{k()},[]);const C=async T=>{if(T.preventDefault(),!a.trim()||!s.trim()){g("Question et rponse requises.");return}p(!0);try{await oe.post("/admin/chat/templates",{question:a.trim(),response:s.trim()}),n(""),o(""),g(""),await k()}catch(O){console.error("Template save error:",O),g(O.response?.data?.message||"Impossible de crer le modle.")}finally{p(!1)}},A=T=>{x(T._id),E(T.question),w(T.response),g("")},S=async T=>{if(T.preventDefault(),!v.trim()||!y.trim()){g("Question et rponse requises.");return}p(!0);try{await oe.patch(`/chat/templates/${b}`,{question:v.trim(),response:y.trim()}),x(null),E(""),w(""),await k()}catch(O){console.error("Template edit error:",O),g(O.response?.data?.message||"Impossible de mettre  jour.")}finally{p(!1)}},P=async T=>{try{await oe.delete(`/chat/templates/${T}`),await k()}catch(O){console.error("Template delete error:",O),g("Impossible de supprimer le modle.")}};return e.createElement("div",{className:"mx-auto max-w-4xl space-y-6 px-4"},e.createElement("header",{className:"space-y-3 rounded-2xl border border-gray-200 bg-white/80 p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900/80"},e.createElement("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 flex items-center gap-2"},e.createElement(ca,{className:"h-6 w-6 text-indigo-600"}),"Gestion des modles de chat"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Ajoutez des questions et rponses standards pour guider le support en conversation.")),e.createElement("section",{className:"rounded-2xl border border-gray-200 bg-white/80 p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900/80"},e.createElement("form",{className:"space-y-4",onSubmit:C},e.createElement("div",null,e.createElement("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Question"),e.createElement("input",{value:a,onChange:T=>n(T.target.value),className:"w-full rounded-2xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none dark:border-gray-700 dark:bg-gray-800",placeholder:"Exemple : Quels sont vos dlais de livraison ?"})),e.createElement("div",null,e.createElement("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Rponse"),e.createElement("textarea",{rows:3,value:s,onChange:T=>o(T.target.value),className:"w-full rounded-2xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none dark:border-gray-700 dark:bg-gray-800",placeholder:"Rponse par dfaut du support."})),f&&e.createElement("p",{className:"text-sm text-red-600 dark:text-red-400"},f),e.createElement("button",{type:"submit",disabled:m,className:"inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-500 disabled:opacity-60"},m?"Enregistrement...":"Crer le modle"))),b&&e.createElement("section",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-5 shadow-sm dark:border-yellow-700 dark:bg-yellow-900/80"},e.createElement("h3",{className:"text-base font-semibold text-yellow-800 dark:text-yellow-200"},"Modifier le modle"),e.createElement("form",{className:"mt-3 space-y-3",onSubmit:S},e.createElement("div",null,e.createElement("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Question"),e.createElement("input",{value:v,onChange:T=>E(T.target.value),className:"w-full rounded-2xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none dark:border-gray-700 dark:bg-gray-800"})),e.createElement("div",null,e.createElement("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"},"Rponse"),e.createElement("textarea",{rows:3,value:y,onChange:T=>w(T.target.value),className:"w-full rounded-2xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none dark:border-gray-700 dark:bg-gray-800"})),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{className:"inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-500 disabled:opacity-60",disabled:m,type:"submit"},m?"Sauvegarde...":"Sauvegarder"),e.createElement("button",{type:"button",onClick:()=>{x(null),E(""),w(""),g("")},className:"inline-flex items-center justify-center rounded-2xl border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:border-gray-400 dark:border-gray-600 dark:text-gray-200"},"Annuler")))),e.createElement("section",{className:"rounded-2xl border border-gray-200 bg-white/80 p-6 shadow-sm dark:border-gray-800 dark:bg-gray-900/80"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50"},"Modles existants"),l?e.createElement("p",{className:"mt-4 text-sm text-gray-500"},"Chargement..."):t.length?e.createElement("div",{className:"mt-4 space-y-3"},t.map(T=>e.createElement("div",{key:T._id,className:"rounded-2xl border border-gray-100 p-4 text-sm text-gray-800 dark:border-gray-700 dark:text-gray-100"},e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2"},e.createElement(ca,{className:"h-4 w-4 text-indigo-500"}),T.question),e.createElement("p",{className:"mt-2 text-gray-600 dark:text-gray-300"},T.response),e.createElement("div",{className:"mt-3 flex gap-2"},e.createElement("button",{type:"button",onClick:()=>A(T),className:"rounded-full border border-indigo-200 px-3 py-1 text-xs text-indigo-600 hover:bg-indigo-50 dark:border-gray-700 dark:text-indigo-200"},"diter"),e.createElement("button",{type:"button",onClick:()=>P(T._id),className:"rounded-full border border-red-200 px-3 py-1 text-xs text-red-600 hover:bg-red-50 dark:border-gray-700 dark:text-red-400"},"Supprimer"))))):e.createElement("p",{className:"mt-4 text-sm text-gray-500"},"Aucun modle renseign pour le moment.")))}const MO=12;function bme(){const{user:t}=u.useContext(Sr),[r,a]=u.useState([]),[n,s]=u.useState([]),[o,l]=u.useState(!1),[c,m]=u.useState(!1),[p,f]=u.useState(""),[g,b]=u.useState(""),[x,v]=u.useState(1),[E,y]=u.useState(1),[w,k]=u.useState(1),[C,A]=u.useState(1),[S,P]=u.useState(null),[T,O]=u.useState(""),[R,D]=u.useState(null),[$,j]=u.useState(!0),[K,H]=u.useState([]),[V,q]=u.useState(!1),[Y,z]=u.useState([]),[L,Q]=u.useState(!1),[B,ae]=u.useState(!1),[te,ge]=u.useState(""),[ue,Ee]=u.useState({}),[fe,re]=u.useState([]),[U,W]=u.useState([]),[me,ne]=u.useState(!1),[ee,ve]=u.useState(!1),[be,J]=u.useState(""),[Ge,je]=u.useState(""),[tt,At]=u.useState(1),[He,Tt]=u.useState(1),[Re,et]=u.useState(1),[gt,Ze]=u.useState(1),[xt,Dt]=u.useState(null),[nt,Me]=u.useState(""),[Qe,wt]=u.useState(null),[lt,we]=u.useState(!0),[vt,pt]=u.useState({}),[Le,pe]=u.useState("all"),[Pe,ft]=u.useState("all"),ht=t?.role==="admin",Lt=Z=>{O(Z.target.value),v(1),y(1)},nr=Z=>{Me(Z.target.value),At(1),Tt(1)},er=u.useCallback(async()=>{j(!0);try{const{data:Z}=await oe.get("/admin/products/boosts/stats");D(Z)}catch(Z){console.error("Stats load error",Z)}finally{j(!1)}},[]),Nt=u.useCallback(async()=>{we(!0);try{const{data:Z}=await oe.get("/admin/shops/boosts/stats");wt(Z)}catch(Z){console.error("Shop stats load error",Z)}finally{we(!1)}},[]),sr=u.useCallback(async()=>{if(ht){q(!0);try{const{data:Z}=await oe.get("/admin/boost-managers");H(Array.isArray(Z)?Z:[])}catch(Z){console.error("Boost managers load error",Z)}finally{q(!1)}}},[ht]),Rt=u.useCallback(async(Z="")=>{if(ht){Q(!0);try{const{data:le}=await oe.get("/admin/users",{params:{q:Z,limit:50}}),_e=Array.isArray(le)?le:le?.items||[];z(_e)}catch(le){console.error("Users load error",le)}finally{Q(!1)}}},[ht]),zt=u.useCallback(async({boostedFilter:Z,pageNumber:le,searchQuery:_e,setItems:Be,setTotalPages:Te,setLoading:Se,setError:Je})=>{Se(!0),Je("");try{const{data:qt}=await oe.get("/admin/products/boosts",{params:{q:_e,page:le,limit:MO,boosted:Z}});Be(Array.isArray(qt?.items)?qt.items:[]),Te(qt?.pagination?.pages||1)}catch(qt){console.error("Boosts load error",qt),Be([]),Te(1),Je(Z?"Impossible de charger les produits boosts.":"Impossible de charger les produits  booster.")}finally{Se(!1)}},[]),mr=u.useCallback(async({boostedFilter:Z,pageNumber:le,searchQuery:_e,setItems:Be,setTotalPages:Te,setLoading:Se,setError:Je})=>{Se(!0),Je("");try{const{data:qt}=await oe.get("/admin/shops/boosts",{params:{q:_e,page:le,limit:MO,boosted:Z}});Be(Array.isArray(qt?.items)?qt.items:[]),Te(qt?.pagination?.pages||1)}catch(qt){console.error("Shop boosts load error",qt),Be([]),Te(1),Je(Z?"Impossible de charger les boutiques boostes.":"Impossible de charger les boutiques  booster.")}finally{Se(!1)}},[]);u.useEffect(()=>{er(),Nt(),sr();const Z=setInterval(()=>{er(),Nt()},6e4);return()=>clearInterval(Z)},[er,Nt,sr]),u.useEffect(()=>{zt({boostedFilter:!0,pageNumber:x,searchQuery:T,setItems:a,setTotalPages:k,setLoading:l,setError:f})},[T,x,zt]),u.useEffect(()=>{zt({boostedFilter:!1,pageNumber:E,searchQuery:T,setItems:s,setTotalPages:A,setLoading:m,setError:b})},[T,E,zt]),u.useEffect(()=>{mr({boostedFilter:!0,pageNumber:tt,searchQuery:nt,setItems:re,setTotalPages:et,setLoading:ne,setError:J})},[nt,tt,mr]),u.useEffect(()=>{mr({boostedFilter:!1,pageNumber:He,searchQuery:nt,setItems:W,setTotalPages:Ze,setLoading:ve,setError:je})},[nt,He,mr]),u.useEffect(()=>{B&&te.length>=2?Rt(te):B&&te.length===0&&z([])},[B,te,Rt]);const Mr=(Z,le,_e)=>{Ee(Be=>({...Be,[Z]:{...Be[Z],[le]:_e}}))},br=(Z,le,_e)=>{pt(Be=>({...Be,[Z]:{...Be[Z],[le]:_e}}))},or=async Z=>{P(Z);try{const le=ue[Z]||{},_e={};le.boostStartDate&&(_e.boostStartDate=le.boostStartDate),le.boostEndDate&&(_e.boostEndDate=le.boostEndDate),await oe.patch(`/admin/products/${Z}/boost`,_e),Ee(Be=>{const Te={...Be};return delete Te[Z],Te}),await Promise.all([zt({boostedFilter:!0,pageNumber:x,searchQuery:T,setItems:a,setTotalPages:k,setLoading:l,setError:f}),zt({boostedFilter:!1,pageNumber:E,searchQuery:T,setItems:s,setTotalPages:A,setLoading:m,setError:b}),er()])}catch(le){console.error("Toggle boost error",le);const _e=le.response?.data?.message||"Impossible de modifier le boost.";f(_e),b(_e)}finally{P(null)}},Gt=async Z=>{Dt(Z);try{const le=vt[Z]||{},_e={};le.shopBoostStartDate&&(_e.shopBoostStartDate=le.shopBoostStartDate),le.shopBoostEndDate&&(_e.shopBoostEndDate=le.shopBoostEndDate),await oe.patch(`/admin/shops/${Z}/boost`,_e),pt(Be=>{const Te={...Be};return delete Te[Z],Te}),await Promise.all([mr({boostedFilter:!0,pageNumber:tt,searchQuery:nt,setItems:re,setTotalPages:et,setLoading:ne,setError:J}),mr({boostedFilter:!1,pageNumber:He,searchQuery:nt,setItems:W,setTotalPages:Ze,setLoading:ve,setError:je}),Nt()])}catch(le){console.error("Toggle shop boost error",le);const _e=le.response?.data?.message||"Impossible de modifier le boost.";J(_e),je(_e)}finally{Dt(null)}},Zt=async Z=>{try{await oe.patch(`/admin/boost-managers/${Z}/toggle`),await Promise.all([sr(),Rt(te)])}catch(le){console.error("Toggle boost manager error",le),alert(le.response?.data?.message||"Erreur lors de la modification de la permission.")}},se=(Z,le,_e,Be)=>{if(_e<=1)return null;const Te=[],Se=7;let Je=Math.max(1,le-Math.floor(Se/2)),qt=Math.min(_e,Je+Se-1);qt-Je<Se-1&&(Je=Math.max(1,qt-Se+1)),Je>1&&(Te.push(e.createElement("button",{key:`${Z}-1`,type:"button",onClick:()=>Be(1),className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},"1")),Je>2&&Te.push(e.createElement("span",{key:`${Z}-ellipsis-start`,className:"px-2 text-gray-500"},"...")));for(let lr=Je;lr<=qt;lr++)Te.push(e.createElement("button",{key:`${Z}-${lr}`,type:"button",onClick:()=>Be(lr),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${le===lr?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700"}`},lr));return qt<_e&&(qt<_e-1&&Te.push(e.createElement("span",{key:`${Z}-ellipsis-end`,className:"px-2 text-gray-500"},"...")),Te.push(e.createElement("button",{key:`${Z}-${_e}`,type:"button",onClick:()=>Be(_e),className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},_e))),Te},dt=Z=>{const le=Z.images?.[0]||Z.image||"https://via.placeholder.com/400x400?text=HDMarket",_e=Z.description?`${Z.description.slice(0,100)}...`:"Aucune description disponible.",Be=Number(Z.price),Te=Number.isFinite(Be)?Be.toLocaleString("fr-FR"):"-",Se=Z.createdAt?new Date(Z.createdAt).toLocaleDateString("fr-FR"):"-";return e.createElement("article",{key:Z._id,className:"group rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-sm hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-300"},e.createElement("div",{className:"mb-4 h-48 overflow-hidden rounded-xl bg-gray-100 dark:bg-gray-700"},e.createElement("img",{src:le,alt:Z.title,className:"h-full w-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"})),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-start justify-between gap-2"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement(Wa,{className:"h-3.5 w-3.5 text-indigo-500 flex-shrink-0"}),e.createElement("p",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400 truncate"},Z.category)),e.createElement("h2",{className:"text-lg font-bold text-gray-900 dark:text-white line-clamp-2"},Z.title)),e.createElement("div",{className:"text-right flex-shrink-0"},e.createElement("p",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400"},Te," FCFA"),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},Se))),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2"},_e),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Yr,{className:"h-3.5 w-3.5"}),e.createElement("span",null,Z.favoritesCount||0)),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(en,{className:"h-3.5 w-3.5"}),e.createElement("span",null,Z.salesCount||0)),Z.user?.shopName&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement("span",{className:"truncate max-w-[100px]"},Z.user.shopName))),!Z.boosted&&e.createElement("div",{className:"space-y-2 px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(dn,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400 flex-shrink-0"}),e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Priode de boost (optionnel)")),e.createElement("div",{className:"grid grid-cols-2 gap-2"},e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Date de dbut"),e.createElement("input",{type:"date",value:ue[Z._id]?.boostStartDate||"",onChange:Je=>Mr(Z._id,"boostStartDate",Je.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Date de fin"),e.createElement("input",{type:"date",value:ue[Z._id]?.boostEndDate||"",onChange:Je=>Mr(Z._id,"boostEndDate",Je.target.value),min:ue[Z._id]?.boostStartDate||new Date().toISOString().split("T")[0],className:"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}))),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Laissez vide pour un boost permanent")),Z.boosted&&(Z.boostStartDate||Z.boostEndDate)&&e.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800"},e.createElement(dn,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400 flex-shrink-0"}),e.createElement("div",{className:"flex-1 text-xs text-indigo-700 dark:text-indigo-300"},Z.boostStartDate&&Z.boostEndDate?e.createElement("span",null,"Du ",new Date(Z.boostStartDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})," au ",new Date(Z.boostEndDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):Z.boostStartDate?e.createElement("span",null," partir du ",new Date(Z.boostStartDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):Z.boostEndDate?e.createElement("span",null,"Jusqu'au ",new Date(Z.boostEndDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):null)),e.createElement("button",{onClick:()=>or(Z._id),disabled:S===Z._id,className:`w-full rounded-xl px-4 py-2.5 text-sm font-semibold transition-all duration-200 ${Z.boosted?"bg-red-500 hover:bg-red-600 text-white shadow-md hover:shadow-lg":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-md hover:shadow-lg"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`},S===Z._id?e.createElement(e.Fragment,null,e.createElement(vs,{className:"h-4 w-4 animate-spin"}),e.createElement("span",null,"Chargement...")):Z.boosted?e.createElement(e.Fragment,null,e.createElement(jt,{className:"h-4 w-4"}),e.createElement("span",null,"Retirer le boost")):e.createElement(e.Fragment,null,e.createElement(Ln,{className:"h-4 w-4"}),e.createElement("span",null,"Booster ce produit")))))},ut=Z=>{const le=Z.shopLogo||"https://via.placeholder.com/200x200?text=HDMarket",_e=Z.createdAt?new Date(Z.createdAt).toLocaleDateString("fr-FR"):"-";return e.createElement("article",{key:Z._id,className:"group rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-sm hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-600 transition-all duration-300"},e.createElement("div",{className:"mb-4 h-48 overflow-hidden rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},e.createElement("img",{src:le,alt:Z.shopName||Z.name,className:"h-full w-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"})),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-start justify-between gap-2"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement(Er,{className:"h-3.5 w-3.5 text-indigo-500 flex-shrink-0"}),e.createElement("p",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400 truncate"},"Boutique vrifie")),e.createElement("h2",{className:"text-lg font-bold text-gray-900 dark:text-white line-clamp-2"},Z.shopName||Z.name)),e.createElement("div",{className:"text-right flex-shrink-0"},e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},_e))),Z.shopAddress&&e.createElement("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 dark:text-gray-300"},e.createElement(Wr,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.createElement("span",{className:"line-clamp-1"},Z.shopAddress)),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400"},e.createElement("div",{className:"flex items-center gap-1"},e.createElement(Yr,{className:"h-3.5 w-3.5"}),e.createElement("span",null,Z.followersCount||0)),e.createElement("div",{className:"flex items-center gap-1"},e.createElement(en,{className:"h-3.5 w-3.5"}),e.createElement("span",null,Z.productCount||0)),Z.ratingAverage>0&&e.createElement("div",{className:"flex items-center gap-1"},e.createElement(zr,{className:"h-3.5 w-3.5 text-amber-400 fill-amber-400"}),e.createElement("span",null,Number(Z.ratingAverage).toFixed(1)),Z.ratingCount>0&&e.createElement("span",{className:"text-gray-400"},"(",Z.ratingCount,")"))),!De(Z)&&e.createElement("div",{className:"space-y-2 px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement(dn,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400 flex-shrink-0"}),e.createElement("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300"},"Priode de boost (optionnel)")),e.createElement("div",{className:"grid grid-cols-2 gap-2"},e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Date de dbut"),e.createElement("input",{type:"date",value:vt[Z._id]?.shopBoostStartDate||"",onChange:Be=>br(Z._id,"shopBoostStartDate",Be.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1"},"Date de fin"),e.createElement("input",{type:"date",value:vt[Z._id]?.shopBoostEndDate||"",onChange:Be=>br(Z._id,"shopBoostEndDate",Be.target.value),min:vt[Z._id]?.shopBoostStartDate||new Date().toISOString().split("T")[0],className:"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}))),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Laissez vide pour un boost permanent")),De(Z)&&(Z.shopBoostStartDate||Z.shopBoostEndDate)&&e.createElement("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800"},e.createElement(dn,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400 flex-shrink-0"}),e.createElement("div",{className:"flex-1 text-xs text-indigo-700 dark:text-indigo-300"},Z.shopBoostStartDate&&Z.shopBoostEndDate?e.createElement("span",null,"Du ",new Date(Z.shopBoostStartDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})," au ",new Date(Z.shopBoostEndDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):Z.shopBoostStartDate?e.createElement("span",null," partir du ",new Date(Z.shopBoostStartDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):Z.shopBoostEndDate?e.createElement("span",null,"Jusqu'au ",new Date(Z.shopBoostEndDate).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})):null)),e.createElement("button",{onClick:()=>Gt(Z._id),disabled:xt===Z._id,className:`w-full rounded-xl px-4 py-2.5 text-sm font-semibold transition-all duration-200 ${De(Z)?"bg-red-500 hover:bg-red-600 text-white shadow-md hover:shadow-lg":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white shadow-md hover:shadow-lg"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`},xt===Z._id?e.createElement(e.Fragment,null,e.createElement(vs,{className:"h-4 w-4 animate-spin"}),e.createElement("span",null,"Chargement...")):De(Z)?e.createElement(e.Fragment,null,e.createElement(jt,{className:"h-4 w-4"}),e.createElement("span",null,"Retirer le boost")):e.createElement(e.Fragment,null,e.createElement(Ln,{className:"h-4 w-4"}),e.createElement("span",null,"Booster cette boutique")))))},It=u.useMemo(()=>[...r,...n],[r,n]),de=u.useMemo(()=>Le==="all"?It:Le==="boosted"?It.filter(Z=>Z.boosted):Le==="non-boosted"?It.filter(Z=>!Z.boosted):It,[It,Le]),De=u.useCallback(Z=>{if(!Z.shopBoosted)return!1;const le=new Date,_e=Z.shopBoostStartDate!==null&&Z.shopBoostStartDate!==void 0,Be=Z.shopBoostEndDate!==null&&Z.shopBoostEndDate!==void 0;return!_e&&!Be?!0:!(_e&&le<new Date(Z.shopBoostStartDate)||Be&&le>new Date(Z.shopBoostEndDate))},[]),F=u.useMemo(()=>[...fe,...U],[fe,U]),ie=u.useMemo(()=>Pe==="all"?F:Pe==="boosted"?F.filter(Z=>De(Z)):Pe==="non-boosted"?F.filter(Z=>!De(Z)):F,[F,Pe,De]),he=se("boosted",x,w,v),ke=se("non-boosted",E,C,y),mt=se("boosted-shops",tt,Re,At),G=se("non-boosted-shops",He,gt,Tt);return e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6"},e.createElement("header",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-4"},e.createElement("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg"},e.createElement(ba,{className:"h-8 w-8 text-white"})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-black text-gray-900 dark:text-white"},"Gestion des Boosts"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Promouvez vos produits et augmentez leur visibilit"))),ht&&e.createElement("button",{type:"button",onClick:()=>ae(!B),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold shadow-md hover:shadow-lg transition-all"},e.createElement(tn,{className:"h-5 w-5"}),e.createElement("span",null,"Grer les permissions"))),$?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},[1,2,3,4].map(Z=>e.createElement("div",{key:Z,className:"rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 animate-pulse"},e.createElement("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 mb-3"}),e.createElement("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})))):R?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},e.createElement("div",{className:"rounded-2xl border-2 border-indigo-200 dark:border-indigo-800 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-indigo-500 text-white"},e.createElement(Ln,{className:"h-5 w-5"})),e.createElement(Pr,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})),e.createElement("p",{className:"text-sm font-semibold text-indigo-700 dark:text-indigo-300 mb-1"},"Produits boosts"),e.createElement("p",{className:"text-3xl font-black text-indigo-900 dark:text-indigo-100"},R.totalBoosted||0),e.createElement("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2"},"Sur ",R.totalProducts||0," produits")),e.createElement("div",{className:"rounded-2xl border-2 border-purple-200 dark:border-purple-800 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-purple-500 text-white"},e.createElement(Ft,{className:"h-5 w-5"})),e.createElement(mn,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})),e.createElement("p",{className:"text-sm font-semibold text-purple-700 dark:text-purple-300 mb-1"},"Non boosts"),e.createElement("p",{className:"text-3xl font-black text-purple-900 dark:text-purple-100"},R.totalNonBoosted||0),e.createElement("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-2"},"Disponibles pour boost")),e.createElement("div",{className:"rounded-2xl border-2 border-emerald-200 dark:border-emerald-800 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-emerald-500 text-white"},e.createElement(dn,{className:"h-5 w-5"})),e.createElement(Pr,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})),e.createElement("p",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-1"},"Boosts ce mois"),e.createElement("p",{className:"text-3xl font-black text-emerald-900 dark:text-emerald-100"},R.boostedThisMonth||0),e.createElement("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-2"},R.boostedThisWeek||0," cette semaine")),e.createElement("div",{className:"rounded-2xl border-2 border-amber-200 dark:border-amber-800 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-amber-500 text-white"},e.createElement(tn,{className:"h-5 w-5"})),e.createElement(Ar,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})),e.createElement("p",{className:"text-sm font-semibold text-amber-700 dark:text-amber-300 mb-1"},"Gestionnaires"),e.createElement("p",{className:"text-3xl font-black text-amber-900 dark:text-amber-100"},K.length),e.createElement("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2"},"Utilisateurs autoriss"))):null,R?.boostedByCategory&&R.boostedByCategory.length>0&&e.createElement("div",{className:"rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},e.createElement(Wa,{className:"h-5 w-5 text-indigo-600"}),"Top catgories boostes"),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3"},R.boostedByCategory.map((Z,le)=>e.createElement("div",{key:Z._id||le,className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 border border-gray-200 dark:border-gray-600"},e.createElement("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 truncate"},Z._id||"Non catgoris"),e.createElement("p",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400"},Z.count))))),ht&&B&&e.createElement("div",{className:"rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2"},e.createElement(tn,{className:"h-5 w-5 text-indigo-600"}),"Gestionnaires de boosts"),e.createElement("button",{type:"button",onClick:()=>ae(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},e.createElement(jt,{className:"h-5 w-5 text-gray-500"}))),e.createElement("div",{className:"mb-4"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.createElement("input",{type:"text",value:te,onChange:Z=>ge(Z.target.value),placeholder:"Rechercher un utilisateur...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-900 transition-all"}))),K.length>0&&e.createElement("div",{className:"mb-6"},e.createElement("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Gestionnaires actuels (",K.length,")"),e.createElement("div",{className:"space-y-2"},K.map(Z=>e.createElement("div",{key:Z._id,className:"flex items-center justify-between p-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-500 text-white"},e.createElement(tn,{className:"h-4 w-4"})),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white"},Z.name),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},Z.email))),e.createElement("button",{type:"button",onClick:()=>Zt(Z._id),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white text-sm font-medium transition-colors"},e.createElement(Go,{className:"h-4 w-4"}),e.createElement("span",null,"Retirer")))))),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Tous les utilisateurs"),L?e.createElement("div",{className:"flex items-center justify-center py-8"},e.createElement(vs,{className:"h-6 w-6 animate-spin text-indigo-600"})):e.createElement("div",{className:"space-y-2 max-h-96 overflow-y-auto"},Y.filter(Z=>!Z.isBlocked&&Z.role!=="admin"&&!K.some(le=>le._id===Z._id||le._id===Z.id)).map(Z=>e.createElement("div",{key:Z._id||Z.id,className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 transition-colors"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-gray-200 dark:bg-gray-700"},e.createElement(tn,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900 dark:text-white"},Z.name),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},Z.email,"  ",Z.role))),e.createElement("button",{type:"button",onClick:()=>Zt(Z._id||Z.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium transition-colors"},e.createElement(hi,{className:"h-4 w-4"}),e.createElement("span",null,"Ajouter")))),Y.filter(Z=>!Z.isBlocked&&Z.role!=="admin"&&!K.some(le=>le._id===Z._id||le._id===Z.id)).length===0&&e.createElement("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400"},"Aucun utilisateur disponible")))),e.createElement("div",{className:"flex flex-col gap-3 rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-lg"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-indigo-100 dark:bg-indigo-900/20"},e.createElement(Tr,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})),e.createElement("input",{value:T,onChange:Lt,placeholder:"Rechercher par titre, catgorie ou vendeur...",className:"flex-1 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 px-4 py-2.5 text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 dark:focus:ring-indigo-900 transition-all text-gray-900 dark:text-white placeholder-gray-400"})),e.createElement("div",{className:"flex items-center justify-between pl-12"},e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},"Recherche dans les produits approuvs avec tri par statut de boost"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Filtrer:"),e.createElement("button",{type:"button",onClick:()=>pe("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Le==="all"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Tous (",It.length,")"),e.createElement("button",{type:"button",onClick:()=>pe("boosted"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Le==="boosted"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Boosts (",r.length,")"),e.createElement("button",{type:"button",onClick:()=>pe("non-boosted"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Le==="non-boosted"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Non boosts (",n.length,")")))),e.createElement("section",{className:"space-y-8"},e.createElement("div",{className:"space-y-5 rounded-2xl border-2 border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-xl bg-indigo-500 text-white"},e.createElement(Ft,{className:"h-6 w-6"})),e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-black text-gray-900 dark:text-white"},"Produits"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Le==="all"&&"Tous les produits",Le==="boosted"&&"Produits boosts uniquement",Le==="non-boosted"&&"Produits non boosts uniquement"))),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},de.length," produit",de.length!==1?"s":""),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},Le==="all"&&`${r.length} boosts, ${n.length} non boosts`,Le==="boosted"&&`${r.length} au total`,Le==="non-boosted"&&`${n.length} au total`))),(p||g)&&e.createElement("div",{className:"rounded-xl border-2 border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 px-4 py-3 text-sm text-red-700 dark:text-red-300 flex items-center gap-2"},e.createElement(Yt,{className:"h-5 w-5"}),p||g),e.createElement("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3"},o||c?e.createElement("div",{className:"col-span-full rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-12 text-center"},e.createElement(vs,{className:"h-8 w-8 animate-spin text-indigo-600 mx-auto mb-3"}),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Chargement des produits...")):de.length?de.map(Z=>dt(Z)):e.createElement("div",{className:"col-span-full rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-12 text-center"},e.createElement(Ft,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},Le==="all"&&"Aucun produit disponible pour le moment.",Le==="boosted"&&"Aucun produit boost pour le moment.",Le==="non-boosted"&&"Aucun produit non boost pour le moment."))),(Le==="all"||Le==="boosted")&&he&&he.length>0&&e.createElement("div",{className:"flex flex-wrap justify-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700"},he),(Le==="all"||Le==="non-boosted")&&ke&&ke.length>0&&e.createElement("div",{className:"flex flex-wrap justify-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700"},ke))),e.createElement("section",{className:"space-y-8 mt-12"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"p-2 rounded-xl bg-emerald-500 text-white"},e.createElement(Er,{className:"h-6 w-6"})),e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-black text-gray-900 dark:text-white"},"Boosts Boutiques Certifies"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Promouvez les boutiques vrifies et augmentez leur visibilit"))),lt?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},[1,2,3,4].map(Z=>e.createElement("div",{key:Z,className:"rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 animate-pulse"},e.createElement("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 mb-3"}),e.createElement("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})))):Qe?e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},e.createElement("div",{className:"rounded-2xl border-2 border-emerald-200 dark:border-emerald-800 bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-emerald-500 text-white"},e.createElement(Ln,{className:"h-5 w-5"})),e.createElement(Pr,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})),e.createElement("p",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-1"},"Boutiques boostes"),e.createElement("p",{className:"text-3xl font-black text-emerald-900 dark:text-emerald-100"},Qe.totalBoosted||0),e.createElement("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-2"},"Sur ",Qe.totalShops||0," boutiques vrifies")),e.createElement("div",{className:"rounded-2xl border-2 border-purple-200 dark:border-purple-800 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-purple-500 text-white"},e.createElement(Er,{className:"h-5 w-5"})),e.createElement(mn,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})),e.createElement("p",{className:"text-sm font-semibold text-purple-700 dark:text-purple-300 mb-1"},"Non boostes"),e.createElement("p",{className:"text-3xl font-black text-purple-900 dark:text-purple-100"},Qe.totalNonBoosted||0),e.createElement("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-2"},"Disponibles pour boost")),e.createElement("div",{className:"rounded-2xl border-2 border-amber-200 dark:border-amber-800 bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-amber-500 text-white"},e.createElement(dn,{className:"h-5 w-5"})),e.createElement(Pr,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})),e.createElement("p",{className:"text-sm font-semibold text-amber-700 dark:text-amber-300 mb-1"},"Boostes ce mois"),e.createElement("p",{className:"text-3xl font-black text-amber-900 dark:text-amber-100"},Qe.boostedThisMonth||0),e.createElement("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2"},Qe.boostedThisWeek||0," cette semaine")),e.createElement("div",{className:"rounded-2xl border-2 border-indigo-200 dark:border-indigo-800 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("div",{className:"p-2 rounded-xl bg-indigo-500 text-white"},e.createElement(Yr,{className:"h-5 w-5"})),e.createElement(Ar,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})),e.createElement("p",{className:"text-sm font-semibold text-indigo-700 dark:text-indigo-300 mb-1"},"Total followers"),e.createElement("p",{className:"text-3xl font-black text-indigo-900 dark:text-indigo-100"},Qe.topBoostedShops?.reduce((Z,le)=>Z+(le.followersCount||0),0)||0),e.createElement("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2"},"Boutiques boostes"))):null,e.createElement("div",{className:"flex flex-col gap-3 rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-5 shadow-lg"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/20"},e.createElement(Tr,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})),e.createElement("input",{value:nt,onChange:nr,placeholder:"Rechercher par nom de boutique ou adresse...",className:"flex-1 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-900 transition-all text-gray-900 dark:text-white placeholder-gray-400"})),e.createElement("div",{className:"flex items-center justify-between pl-12"},e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},"Recherche dans les boutiques vrifies avec tri par statut de boost"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Filtrer:"),e.createElement("button",{type:"button",onClick:()=>ft("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Pe==="all"?"bg-emerald-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Toutes (",F.length,")"),e.createElement("button",{type:"button",onClick:()=>ft("boosted"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Pe==="boosted"?"bg-emerald-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Boostes (",fe.length,")"),e.createElement("button",{type:"button",onClick:()=>ft("non-boosted"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Pe==="non-boosted"?"bg-emerald-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`},"Non boostes (",U.length,")")))),e.createElement("div",{className:"space-y-5 rounded-2xl border-2 border-emerald-200 dark:border-emerald-800 bg-white dark:bg-gray-800 p-6 shadow-lg"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-xl bg-emerald-500 text-white"},e.createElement(Er,{className:"h-6 w-6"})),e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-black text-gray-900 dark:text-white"},"Boutiques"),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Pe==="all"&&"Toutes les boutiques",Pe==="boosted"&&"Boutiques boostes uniquement",Pe==="non-boosted"&&"Boutiques non boostes uniquement"))),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},ie.length," boutique",ie.length!==1?"s":""),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400"},Pe==="all"&&`${fe.length} boostes, ${U.length} non boostes`,Pe==="boosted"&&`${fe.length} au total`,Pe==="non-boosted"&&`${U.length} au total`))),(be||Ge)&&e.createElement("div",{className:"rounded-xl border-2 border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20 px-4 py-3 text-sm text-red-700 dark:text-red-300 flex items-center gap-2"},e.createElement(Yt,{className:"h-5 w-5"}),be||Ge),e.createElement("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3"},me||ee?e.createElement("div",{className:"col-span-full rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-12 text-center"},e.createElement(vs,{className:"h-8 w-8 animate-spin text-emerald-600 mx-auto mb-3"}),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Chargement des boutiques...")):ie.length?ie.map(Z=>ut(Z)):e.createElement("div",{className:"col-span-full rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-12 text-center"},e.createElement(Er,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.createElement("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400"},Pe==="all"&&"Aucune boutique disponible pour le moment.",Pe==="boosted"&&"Aucune boutique booste pour le moment.",Pe==="non-boosted"&&"Aucune boutique non booste pour le moment."))),(Pe==="all"||Pe==="boosted")&&mt&&mt.length>0&&e.createElement("div",{className:"flex flex-wrap justify-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700"},mt),(Pe==="all"||Pe==="non-boosted")&&G&&G.length>0&&e.createElement("div",{className:"flex flex-wrap justify-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700"},G))))}const jO={pending:"En attente",approved:"Valide",rejected:"Rejete",disabled:"Dsactive"},xme={pending:"bg-yellow-100 text-yellow-800",approved:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800",disabled:"bg-gray-100 text-gray-600"},yme=[{value:"recent",label:"Plus rcents"},{value:"price_asc",label:"Prix croissants"},{value:"price_desc",label:"Prix dcroissants"},{value:"discount",label:"Meilleure remise"}],vme={created:"Cration",updated:"Mise  jour",deleted:"Suppression",disabled:"Dsactivation",enabled:"Ractivation",certified:"Certification",uncertified:"Certification retire",boosted:"Boost activ",unboosted:"Boost retir"},Eme={created:"bg-emerald-50 text-emerald-700",updated:"bg-indigo-50 text-indigo-700",deleted:"bg-red-50 text-red-700",disabled:"bg-amber-50 text-amber-700",enabled:"bg-green-50 text-green-700",certified:"bg-indigo-50 text-indigo-700",uncertified:"bg-gray-100 text-gray-600",boosted:"bg-purple-50 text-purple-700",unboosted:"bg-gray-100 text-gray-600"},wme=20,ff=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Pg=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",Nme=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",kme=(t={})=>{const r=[];return Array.isArray(t.updatedFields)&&t.updatedFields.length&&r.push(`Champs modifis: ${t.updatedFields.join(", ")}`),t.previousStatus&&t.restoredStatus?r.push(`Statut: ${t.previousStatus} -> ${t.restoredStatus}`):t.previousStatus&&t.status?r.push(`Statut: ${t.previousStatus} -> ${t.status}`):t.status&&r.push(`Statut: ${t.status}`),typeof t.certified=="boolean"&&r.push(`Certification: ${t.certified?"Oui":"Non"}`),t.price!==void 0&&t.price!==null&&r.push(`Prix: ${ff(t.price)}`),t.discount!==void 0&&t.discount!==null&&r.push(`Remise: ${t.discount}%`),t.title&&r.push(`Titre: ${t.title}`),(t.boostStartDate||t.boostEndDate)&&r.push(`Priode boost: ${t.boostStartDate?Pg(t.boostStartDate):""} au ${t.boostEndDate?Pg(t.boostEndDate):""}`),t.boostedByName&&r.push(`Boost par: ${t.boostedByName}`),t.disabledByAdmin!==void 0&&r.push(`Dsactivation admin: ${t.disabledByAdmin?"Oui":"Non"}`),r},Q0=({title:t,value:r,helper:a,icon:n,highlight:s,trend:o})=>{const l=s?"from-indigo-500 to-purple-600":"from-gray-400 to-gray-500";return e.createElement("div",{className:`group relative overflow-hidden rounded-2xl border transition-all duration-300 ${s?"border-indigo-200/60 bg-gradient-to-br from-indigo-50/50 via-white to-purple-50/30 shadow-md hover:shadow-lg":"border-gray-200/60 bg-gradient-to-br from-white to-gray-50/50 shadow-sm hover:shadow-md hover:border-indigo-200/40"}`},e.createElement("div",{className:"p-5"},e.createElement("div",{className:"flex items-start justify-between mb-3"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:`text-xs font-semibold uppercase tracking-wider mb-1 ${s?"text-indigo-700":"text-gray-600"}`},t),e.createElement("p",{className:`text-3xl font-bold mb-1 ${s?"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent":"text-gray-900"}`},r),a&&e.createElement("p",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-1"},o&&e.createElement(Pr,{size:12,className:o>0?"text-green-500":"text-red-500"}),a)),n&&e.createElement("div",{className:`ml-3 flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ${l} text-white shadow-sm transition-transform duration-300 group-hover:scale-110 group-hover:shadow-md`},e.createElement(n,{size:22,strokeWidth:2.5})))),s&&e.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/0 via-purple-500/0 to-pink-500/0 transition-opacity duration-300 group-hover:from-indigo-500/5 group-hover:via-purple-500/5 group-hover:to-pink-500/5"}))},Sme=to.flatMap(t=>t.options.map(r=>({value:r.value,label:`${t.label}  ${r.label}`})));function Cme(){const{user:t}=u.useContext(Sr),r=t?.role==="admin",a=t?.role==="admin"||t?.role==="manager"||t?.canManageProducts,[n,s]=u.useState([]),[o,l]=u.useState(null),[c,m]=u.useState(!1),[p,f]=u.useState(""),[g,b]=u.useState(1),[x,v]=u.useState(1),[E,y]=u.useState(0),[w,k]=u.useState(""),[C,A]=u.useState(""),[S,P]=u.useState(""),[T,O]=u.useState(""),[R,D]=u.useState("recent"),[$,j]=u.useState(null),[K,H]=u.useState(""),[V,q]=u.useState(""),[Y,z]=u.useState(!1),[L,Q]=u.useState(""),[B,ae]=u.useState(""),[te,ge]=u.useState(""),[ue,Ee]=u.useState([]),[fe,re]=u.useState(!1),[U,W]=u.useState(""),[me,ne]=u.useState([]),[ee,ve]=u.useState(!1),[be,J]=u.useState(""),[Ge,je]=u.useState(!1),[tt,At]=u.useState([]),[He,Tt]=u.useState(""),[Re,et]=u.useState(""),gt=u.useCallback(async()=>{m(!0),f("");try{const pe={page:g,limit:wme,sort:R};w&&(pe.status=w),C&&(pe.category=C),S&&(pe.certified=S),T&&(pe.search=T.trim());const{data:Pe}=await oe.get("/admin/products",{params:pe});s(Array.isArray(Pe?.items)?Pe.items:[]),v(Pe?.pagination?.pages||1),y(Pe?.pagination?.total||0),l(Pe?.stats||null)}catch(pe){console.error("Erreur chargement produits admin",pe),f(pe?.response?.data?.message||pe.message||"Impossible de charger les produits.")}finally{m(!1)}},[g,w,C,S,T,R]);u.useEffect(()=>{const pe=setTimeout(()=>{gt()},250);return()=>clearTimeout(pe)},[gt]);const Ze=u.useCallback(async pe=>{if(pe){re(!0),W("");try{const{data:Pe}=await oe.get(`/admin/products/${pe}/history`);Ee(Array.isArray(Pe)?Pe:[])}catch(Pe){console.error("Erreur chargement historique produit",Pe),W(Pe?.response?.data?.message||"Impossible de charger l'historique."),Ee([])}finally{re(!1)}}},[]);u.useEffect(()=>{if(!$){Ee([]),W(""),re(!1);return}const pe=$._id||$.slug;Ze(pe)},[Ze,$]);const xt=()=>{k(""),A(""),P(""),O(""),D("recent"),b(1)},Dt=async()=>{if(!(!$||Y||!a)){H(""),q(""),z(!0);try{const pe=!$.certified,{data:Pe}=await oe.patch(`/admin/products/${$._id}/certify`,{certified:pe}),ft={...$,certified:Pe.certified,certifiedBy:Pe.certifiedBy,certifiedAt:Pe.certifiedAt};j(ft),s(ht=>ht.map(Lt=>Lt._id===ft._id?{...Lt,...ft}:Lt)),l(ht=>{if(!ht)return ht;const Lt=Pe.certified?1:-1,nr=-Lt;return{...ht,certifiedCount:Math.max(0,(ht.certifiedCount||0)+Lt),uncertifiedCount:Math.max(0,(ht.uncertifiedCount||0)+nr)}}),H(Pe.certified?"Produit certifi.":"Certification retire.")}catch(pe){console.error("Erreur certification",pe),q(pe?.response?.data?.message||"Une erreur est survenue.")}finally{z(!1)}}},nt=u.useCallback((pe,Pe,ft)=>{!pe||!ft||(s(ht=>ht.map(Lt=>Lt._id===pe?{...Lt,status:ft}:Lt)),j(ht=>!ht||ht._id!==pe?ht:{...ht,status:ft}),l(ht=>{if(!ht?.statusCounts||Pe===ft)return ht;const Lt={...ht.statusCounts};return Pe&&(Lt[Pe]=Math.max(0,(Lt[Pe]||0)-1)),Lt[ft]=(Lt[ft]||0)+1,{...ht,statusCounts:Lt}}))},[]),Me=u.useCallback(async pe=>{if(!(!pe?._id||!a)){ge(pe._id),Q(""),ae(""),H(""),q("");try{const Pe=pe.slug||pe._id,{data:ft}=await oe.patch(`/products/${Pe}/disable`),ht=ft?.status||"disabled";nt(pe._id,pe.status,ht),Q("Annonce dsactive avec succs.")}catch(Pe){ae(Pe?.response?.data?.message||Pe.message||"Impossible de dsactiver l'annonce.")}finally{ge("")}}},[nt,a]),Qe=u.useCallback(async pe=>{if(!(!pe?._id||!a)){ge(pe._id),Q(""),ae(""),H(""),q("");try{const Pe=pe.slug||pe._id,{data:ft}=await oe.patch(`/products/${Pe}/enable`),ht=ft?.status||"approved";nt(pe._id,pe.status,ht),Q("Annonce ractive avec succs.")}catch(Pe){ae(Pe?.response?.data?.message||Pe.message||"Impossible de ractiver l'annonce.")}finally{ge("")}}},[nt,a]);u.useEffect(()=>{if(!L&&!B)return;const pe=setTimeout(()=>{Q(""),ae("")},4e3);return()=>clearTimeout(pe)},[L,B]),u.useEffect(()=>{if(!He)return;const pe=setTimeout(()=>Tt(""),3e3);return()=>clearTimeout(pe)},[He]);const wt=u.useMemo(()=>new Set(me.map(pe=>String(pe.id||pe._id))),[me]),lt=u.useCallback(async()=>{if(r){ve(!0);try{const{data:pe}=await oe.get("/admin/product-managers");ne(Array.isArray(pe?.managers)?pe.managers:[])}catch(pe){console.error("Load product managers error:",pe),ne([])}finally{ve(!1)}}},[r]);u.useEffect(()=>{lt()},[lt]);const we=async()=>{if(be.trim()){je(!0);try{const{data:pe}=await oe.get(`/admin/users?search=${encodeURIComponent(be.trim())}&limit=10`),Pe=Array.isArray(pe)?pe.filter(ft=>ft.role!=="admin"):[];At(Pe)}catch(pe){console.error("Search users error:",pe),At([])}finally{je(!1)}}},vt=async pe=>{if(!(!pe||typeof pe!="string")){if(!/^[0-9a-fA-F]{24}$/.test(pe)){Tt("Identifiant utilisateur invalide.");return}et(pe);try{const{data:Pe}=await oe.patch(`/admin/product-managers/${pe}/toggle`);Tt(Pe?.message||"Statut mis  jour."),await lt(),At([]),J("")}catch(Pe){Tt(Pe.response?.data?.message||"Erreur lors de la mise  jour.")}finally{et("")}}},pt=u.useMemo(()=>{if(!o)return[];const pe=Pe=>o.statusCounts?.[Pe]||0;return[{title:"En attente",value:pe("pending")},{title:"Valides",value:pe("approved")},{title:"Rejetes",value:pe("rejected")},{title:"Dsactives",value:pe("disabled")}]},[o]),Le=o?.topCategories||[];return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8 sm:px-6 lg:px-8"},e.createElement("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between pb-6 border-b border-gray-200/60"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 shadow-lg"},e.createElement(Ft,{size:24,className:"text-white",strokeWidth:2.5})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent"},"Gestion des produits"),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Visualisez les annonces, filtrez-les et certifiez celles qui respectent la charte HDMarket.")))),e.createElement("div",{className:"flex flex-wrap gap-3"},e.createElement(ye,{to:"/admin",className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:border-indigo-300 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},e.createElement(Gr,{size:16}),"Retour au tableau"),e.createElement("button",{type:"button",onClick:gt,className:"inline-flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-4 py-2.5 text-sm font-semibold text-indigo-700 transition-all duration-200 hover:bg-indigo-100 hover:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},e.createElement(Cd,{size:16,className:"transition-transform duration-300 hover:rotate-180"}),"Actualiser"))),e.createElement("section",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},e.createElement(Q0,{title:"Produits total",value:E,helper:`${x} page(s)`,icon:Ft}),e.createElement(Q0,{title:"Produits certifis",value:o?.certifiedCount??0,helper:`${o?.uncertifiedCount??0} non certifis`,icon:Ga,highlight:!0}),e.createElement(Q0,{title:"Certifications en attente",value:pt[0]?.value||0,helper:"Suivre les validations",icon:Xt}),e.createElement(Q0,{title:"Produits dsactivs",value:pt[3]?.value||0,helper:"Vrifier les suspensions",icon:Yt})),r&&e.createElement("section",{className:"rounded-2xl border border-indigo-100 bg-white p-6 shadow-sm space-y-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600"},e.createElement(tn,{size:18})),e.createElement("div",null,e.createElement("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Accs gestion des produits"),e.createElement("p",{className:"text-xs text-gray-500"},"Autorisez un utilisateur  grer et certifier les produits."))),He&&e.createElement("div",{className:"flex items-center gap-2 rounded-xl border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm text-indigo-800"},e.createElement(Yt,{size:16}),He),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, tlphone)...",value:be,onChange:pe=>J(pe.target.value),onKeyDown:pe=>pe.key==="Enter"&&we(),className:"flex-1 rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("button",{type:"button",onClick:we,disabled:Ge||!be.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-60"},e.createElement(Tr,{size:14}),"Rechercher")),tt.length>0&&e.createElement("div",{className:"space-y-2"},tt.map(pe=>{const Pe=pe._id||pe.id,ft=wt.has(String(Pe)),ht=Re===String(Pe);return e.createElement("div",{key:Pe,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-gray-50 p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},pe.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},pe.email,"  ",pe.phone)),e.createElement("button",{type:"button",onClick:()=>vt(String(Pe)),disabled:ht,className:`inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-xs font-semibold disabled:opacity-70 ${ft?"bg-red-600 text-white hover:bg-red-700":"bg-indigo-600 text-white hover:bg-indigo-700"}`},ht?e.createElement(vs,{size:14,className:"animate-spin"}):ft?e.createElement(Go,{size:14}):e.createElement(hi,{size:14}),ht?"Traitement...":ft?"Retirer":"Ajouter"))})),e.createElement("div",{className:"border-t border-gray-100 pt-4"},e.createElement("p",{className:"text-xs font-semibold text-gray-500 mb-2"},"Gestionnaires actuels (",me.length,")"),ee?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement"):me.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun gestionnaire pour le moment."):e.createElement("div",{className:"space-y-2"},me.map(pe=>e.createElement("div",{key:pe.id||pe._id,className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-white p-3"},e.createElement("div",{className:"min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},pe.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},pe.email,"  ",pe.phone)),e.createElement("button",{type:"button",onClick:()=>vt(String(pe.id||pe._id)),disabled:Re===String(pe.id||pe._id),className:"inline-flex items-center gap-1 rounded-lg bg-red-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-700 disabled:opacity-70"},Re===String(pe.id||pe._id)?e.createElement(vs,{size:14,className:"animate-spin"}):e.createElement(Go,{size:14}),Re===String(pe.id||pe._id)?"Traitement...":"Retirer")))))),e.createElement("section",{className:"rounded-2xl border border-gray-200/60 bg-gradient-to-br from-white to-indigo-50/20 p-6 shadow-sm"},e.createElement("div",{className:"flex flex-col gap-4"},e.createElement("div",{className:"flex items-center justify-between gap-3"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100"},e.createElement(ls,{size:20,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Filtres rapides"),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},"Recherchez et filtrez les produits"))),e.createElement("button",{type:"button",onClick:xt,className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-4 py-2 text-xs font-semibold text-gray-600 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:border-indigo-300 hover:text-indigo-700"},e.createElement(jt,{size:14}),"Rinitialiser")),e.createElement("div",{className:"flex flex-col gap-4"},e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.createElement("input",{value:T,onChange:pe=>{O(pe.target.value),b(1)},placeholder:"Rechercher par titre ou description...",className:"w-full rounded-xl border border-gray-200 bg-white px-4 py-3 pl-11 text-sm shadow-sm transition-all duration-200 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-100"})),e.createElement("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-5"},e.createElement("select",{value:w,onChange:pe=>{k(pe.target.value),b(1)},className:"rounded-2xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"},e.createElement("option",{value:""},"Tous les statuts"),e.createElement("option",{value:"pending"},"En attente"),e.createElement("option",{value:"approved"},"Valids"),e.createElement("option",{value:"rejected"},"Rejets"),e.createElement("option",{value:"disabled"},"Dsactivs")),e.createElement("select",{value:S,onChange:pe=>{P(pe.target.value),b(1)},className:"rounded-2xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"},e.createElement("option",{value:""},"Tous les produits"),e.createElement("option",{value:"true"},"Certifis"),e.createElement("option",{value:"false"},"Non certifis")),e.createElement("select",{value:C,onChange:pe=>{A(pe.target.value),b(1)},className:"rounded-2xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"},e.createElement("option",{value:""},"Toutes les catgories"),Sme.map(pe=>e.createElement("option",{key:pe.value,value:pe.value},pe.label))),e.createElement("select",{value:R,onChange:pe=>{D(pe.target.value),b(1)},className:"rounded-2xl border border-gray-200 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none"},yme.map(pe=>e.createElement("option",{key:pe.value,value:pe.value},pe.label))))))),e.createElement("section",{className:"space-y-4"},p&&e.createElement("p",{className:"text-sm text-red-600"},p),(L||B)&&e.createElement("p",{className:`text-sm ${B?"text-red-600":"text-green-600"}`},B||L),c?e.createElement("div",{className:"space-y-3"},Array.from({length:3}).map((pe,Pe)=>e.createElement("div",{key:Pe,className:"animate-pulse rounded-2xl border border-gray-100 bg-white px-4 py-5"},e.createElement("div",{className:"h-4 w-2/5 bg-gray-200 mb-3 rounded"}),e.createElement("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},e.createElement("div",{className:"h-8 bg-gray-200 rounded"}),e.createElement("div",{className:"h-8 bg-gray-200 rounded"}))))):n.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 gap-4"},n.map(pe=>e.createElement("article",{key:pe._id,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement("div",{className:"h-20 w-20 rounded-2xl bg-gray-100 overflow-hidden"},e.createElement("img",{src:pe.images?.[0]||"/api/placeholder/120/120",alt:pe.title,className:"h-full w-full object-cover",loading:"lazy"})),e.createElement("div",null,e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},pe.category||""),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},pe.title),e.createElement("p",{className:"text-xs text-gray-500"},pe.user?.shopName||pe.user?.name||"Vendeur indisponible"))),e.createElement("div",{className:"flex items-center gap-3 text-right"},e.createElement("div",null,e.createElement("p",{className:"text-sm text-gray-500"},"Prix"),e.createElement("p",{className:"text-lg font-semibold text-gray-900"},ff(pe.price))),e.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${xme[pe.status]||"bg-gray-100 text-gray-600"}`},jO[pe.status]||pe.status))),e.createElement("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-xs text-gray-500"},pe.certified?e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-3 py-1 text-emerald-600"},e.createElement(Ga,{className:"w-4 h-4"}),"Certifi"):e.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-3 py-1 text-gray-600"},e.createElement(pa,{className:"w-4 h-4"}),"Non certifi"),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>{j(pe),H(""),q("")},className:"inline-flex items-center gap-2 text-xs font-semibold text-indigo-600 hover:text-indigo-500"},"Dtails",e.createElement(Ar,{className:"w-3 h-3"})),a&&e.createElement(e.Fragment,null,pe.status!=="disabled"?e.createElement("button",{type:"button",onClick:()=>Me(pe),disabled:te===pe._id,className:"inline-flex items-center gap-2 rounded-full border border-red-200 px-3 py-1 text-xs font-semibold text-red-700 hover:bg-red-50 disabled:opacity-60"},"Dsactiver"):e.createElement("button",{type:"button",onClick:()=>Qe(pe),disabled:te===pe._id,className:"inline-flex items-center gap-2 rounded-full border border-green-200 px-3 py-1 text-xs font-semibold text-green-700 hover:bg-green-50 disabled:opacity-60"},"Activer"))))))),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-gray-100 bg-white px-4 py-3 text-xs text-gray-500"},e.createElement("span",null,"Page ",g," / ",x,"  ",E," annonce",E>1?"s":""),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>b(pe=>Math.max(1,pe-1)),disabled:g<=1,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>b(pe=>Math.min(x,pe+1)),disabled:g>=x,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))):e.createElement("p",{className:"rounded-2xl border border-dashed border-gray-300 bg-white p-6 text-center text-sm text-gray-500"},"Aucun produit ne correspond aux filtres actuels.")),Le.length>0&&e.createElement("section",{className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between mb-3 text-xs uppercase tracking-wide text-gray-500"},e.createElement("span",null,"Catgories les plus populaires"),e.createElement(Wa,{className:"h-4 w-4 text-indigo-500"})),e.createElement("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-4"},Le.map(pe=>e.createElement("div",{key:pe.category,className:"rounded-2xl border border-gray-100 p-3 text-xs font-semibold text-gray-700"},e.createElement("p",{className:"text-sm text-gray-900"},pe.category),e.createElement("p",{className:"text-xs text-gray-500"},pe.count," annonces")))))),$&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto bg-black/40 p-4",onClick:()=>{j(null),H(""),q("")}},e.createElement("div",{className:"w-full max-w-4xl rounded-2xl bg-white p-6 shadow-2xl",onClick:pe=>pe.stopPropagation()},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-500"},"Dtail produit"),e.createElement("h2",{className:"text-lg font-bold text-gray-900"},$.title)),e.createElement("button",{type:"button",onClick:()=>{j(null),H(""),q("")},className:"text-xs font-semibold uppercase tracking-wide text-gray-500 transition hover:text-gray-900"},"Fermer ",e.createElement(jt,{className:"inline-block h-4 w-4"}))),e.createElement("div",{className:"mt-4 grid gap-4 lg:grid-cols-[1fr,1fr]"},e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"grid grid-cols-3 gap-2"},($.images||[]).slice(0,3).map((pe,Pe)=>e.createElement("img",{key:`modal-img-${Pe}`,src:pe,alt:`${$.title} ${Pe+1}`,className:"h-24 w-full rounded-2xl object-cover border border-gray-200"})),!$.images?.length&&e.createElement("div",{className:"col-span-3 h-24 rounded-2xl border border-gray-200 bg-gray-100"})),e.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500"},$.category),e.createElement("p",{className:"text-sm text-gray-600"},$.description)),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},e.createElement("span",null,"Prix"),e.createElement("span",{className:"text-gray-900 font-semibold"},ff($.price))),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"rounded-full px-3 py-1 text-xs font-semibold"},jO[$.status]||$.status),e.createElement("span",{className:"text-xs text-gray-500"},"Cr le ",Pg($.createdAt))),e.createElement("div",{className:"border-t border-gray-100 pt-3 space-y-2 text-xs text-gray-500"},e.createElement("p",null,"Vendeur: ",$.user?.shopName||$.user?.name||""),e.createElement("p",null,"Email: ",$.user?.email||""),e.createElement("p",null,"Tlphone: ",$.user?.phone||"")),e.createElement("div",{className:"border-t border-gray-100 pt-3"},$.certified?e.createElement("div",{className:"text-xs text-emerald-700"},e.createElement("span",{className:"flex items-center gap-2 text-emerald-600"},e.createElement(Ga,{className:"w-4 h-4"}),"Produit certifi"),$.certifiedBy?e.createElement("p",null,"Valid par ",$.certifiedBy.name||"Admin"," (",$.certifiedBy.email||"",")"):null,$.certifiedAt?e.createElement("p",null,"Le ",Pg($.certifiedAt)):null):e.createElement("div",{className:"text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-2"},e.createElement(pa,{className:"w-4 h-4"}),"Produit non certifi"))),e.createElement("div",{className:"border-t border-gray-100 pt-3 space-y-2"},a&&e.createElement(e.Fragment,null,$.status!=="disabled"?e.createElement("button",{type:"button",onClick:()=>Me($),disabled:te===$._id||Y,className:"w-full rounded-full border border-red-200 px-4 py-2 text-xs font-semibold text-red-700 hover:bg-red-50 disabled:opacity-60"},"Dsactiver l'annonce"):e.createElement("button",{type:"button",onClick:()=>Qe($),disabled:te===$._id||Y,className:"w-full rounded-full border border-green-200 px-4 py-2 text-xs font-semibold text-green-700 hover:bg-green-50 disabled:opacity-60"},"Activer l'annonce")),(L||B)&&e.createElement("p",{className:`text-xs ${B?"text-red-600":"text-green-600"}`},B||L)),a&&e.createElement("div",{className:"space-y-2"},e.createElement("button",{type:"button",onClick:Dt,disabled:Y,className:"w-full rounded-full bg-indigo-600 px-4 py-2 text-xs font-semibold text-white hover:bg-indigo-500 disabled:opacity-60"},$.certified?"Retirer la certification":"Certifier ce produit"),(K||V)&&e.createElement("p",{className:`text-xs ${V?"text-red-600":"text-green-600"}`},V||K)),$.payment&&e.createElement("div",{className:"border-t border-gray-100 pt-3 text-xs text-gray-500 space-y-1"},e.createElement("p",{className:"font-semibold text-gray-900 text-sm"},"Paiement"),e.createElement("p",null,"Status: ",$.payment.status),e.createElement("p",null,"Montant: ",ff($.payment.amount)),e.createElement("p",null,"Oprateur: ",$.payment.operator)),e.createElement("div",{className:"border-t border-gray-100 pt-3 space-y-2"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500"},"Historique"),e.createElement("button",{type:"button",onClick:()=>Ze($._id||$.slug),className:"text-[11px] font-semibold text-indigo-600 hover:text-indigo-500"},"Actualiser")),fe?e.createElement("p",{className:"text-xs text-gray-500"},"Chargement..."):U?e.createElement("p",{className:"text-xs text-red-600"},U):ue.length===0?e.createElement("p",{className:"text-xs text-gray-500"},"Aucune action enregistre."):e.createElement("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-1"},ue.map(pe=>{const Pe=kme(pe.details),ft=vme[pe.action]||pe.action||"Action",ht=Eme[pe.action]||"bg-gray-100 text-gray-600",Lt=pe.performedBy?.name||pe.performedBy?.email||"Systme";return e.createElement("div",{key:pe.id,className:"rounded-xl border border-gray-100 bg-gray-50 px-3 py-2"},e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},e.createElement("span",{className:`rounded-full px-2 py-0.5 text-[11px] font-semibold ${ht}`},ft),e.createElement("span",{className:"text-[11px] text-gray-400"},Nme(pe.createdAt))),e.createElement("p",{className:"text-xs text-gray-700 mt-1"},"Par ",Lt,pe.performedBy?.role?`  ${pe.performedBy.role}`:""),Pe.length>0&&e.createElement("div",{className:"mt-1 space-y-0.5"},Pe.map((nr,er)=>e.createElement("p",{key:`${pe.id}-detail-${er}`,className:"text-[11px] text-gray-500"},nr))))}))))))))}const RO=[{key:"all",label:"Tous"},{key:"unread",label:"Non lus"},{key:"read",label:"Lus"}],$O=12,eu=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";function Ame(){const{user:t}=u.useContext(Sr),r=t?.role==="admin",[a,n]=u.useState([]),[s,o]=u.useState("unread"),[l,c]=u.useState(""),[m,p]=u.useState(""),[f,g]=u.useState(1),[b,x]=u.useState({total:0,totalPages:1}),[v,E]=u.useState(!1),[y,w]=u.useState(""),[k,C]=u.useState(""),[A,S]=u.useState(!1),[P,T]=u.useState(""),[O,R]=u.useState([]),[D,$]=u.useState(!1),[j,K]=u.useState(!1),[H,V]=u.useState(""),[q,Y]=u.useState(!1),[z,L]=u.useState([]),Q=u.useCallback(async()=>{E(!0),w("");try{const re=new URLSearchParams;re.set("page",f),re.set("limit",$O),s!=="all"&&re.set("status",s),m&&re.set("search",m);const{data:U}=await oe.get(`/admin/feedback?${re.toString()}`),W=Array.isArray(U?.items)?U.items:[];n(W),x({total:U?.total??W.length,totalPages:U?.totalPages??1})}catch(re){w(re.response?.data?.message||re.message||"Impossible de charger les avis."),n([]),x({total:0,totalPages:1})}finally{E(!1)}},[f,m,s]);u.useEffect(()=>{Q()},[Q]),u.useEffect(()=>{const re=setTimeout(()=>{p(l.trim())},300);return()=>clearTimeout(re)},[l]),u.useEffect(()=>{g(1)},[s,m]);const B=u.useCallback(async re=>{if(re){C(re);try{const{data:U}=await oe.patch(`/admin/feedback/${re}/read`),W=U?.feedback;W&&(n(me=>me.map(ne=>ne._id===W._id?W:ne)),window.dispatchEvent(new CustomEvent("hdmarket:admin-counts-refresh")),s==="unread"&&(n(me=>me.filter(ne=>ne._id!==W._id)),x(me=>({...me,total:Math.max(0,(me.total||0)-1),totalPages:Math.max(1,Math.ceil(Math.max(0,(me.total||0)-1)/$O))}))))}catch(U){w(U.response?.data?.message||"Impossible de marquer comme lu.")}finally{C("")}}},[s]),ae=async()=>{S(!0);try{const re=(await yl(async()=>{const{default:J}=await import("./jspdf.es.min-Bc-3z7PL.js").then(Ge=>Ge.j);return{default:J}},[])).default,U=(await yl(async()=>{const{default:J}=await import("./jspdf.plugin.autotable-CBbcTuFj.js");return{default:J}},[])).default,W=new URLSearchParams;s!=="all"&&W.set("status",s),m&&W.set("search",m);const{data:me}=await oe.get(`/admin/feedback/export-pdf?${W.toString()}`),ne=me.items||[],ee=new re;ee.setFontSize(18),ee.setFont(void 0,"bold"),ee.text("Avis sur l'amelioration",14,20),ee.setFontSize(10),ee.setFont(void 0,"normal"),ee.text(`Date d'export: ${new Date().toLocaleDateString("fr-FR")}`,14,28),ee.text(`Total: ${ne.length} avis`,14,34),ee.text(`Filtre: ${RO.find(J=>J.key===s)?.label||"Tous"}`,14,40);const ve=ne.map((J,Ge)=>[Ge+1,J.subject||"-",(J.body||"-").substring(0,100)+(J.body?.length>100?"...":""),J.user?.name||"N/A",J.user?.phone||"-",J.readAt?"Oui":"Non",eu(J.createdAt)]);U(ee,{startY:48,head:[["#","Sujet","Contenu","Utilisateur","Telephone","Lu","Date"]],body:ve,styles:{fontSize:8,cellPadding:2},headStyles:{fillColor:[79,70,229],fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},margin:{top:48}});const be=`avis-amelioration-${s}-${new Date().toISOString().split("T")[0]}.pdf`;ee.save(be)}catch(re){console.error("Export PDF error:",re),alert("Impossible d'exporter en PDF: "+(re.response?.data?.message||re.message))}finally{S(!1)}},te=async re=>{T(re._id);try{const U=(await yl(async()=>{const{default:Tt}=await import("./jspdf.es.min-Bc-3z7PL.js").then(Re=>Re.j);return{default:Tt}},[])).default,W=new U;W.setFontSize(20),W.setFont(void 0,"bold"),W.text("Avis d'amelioration",14,20),W.setLineWidth(.5),W.setDrawColor(79,70,229),W.line(14,25,196,25);let me=35;const ne=7,ee=180;W.setFontSize(14),W.setFont(void 0,"bold"),W.text("Sujet:",14,me),W.setFont(void 0,"normal"),W.setFontSize(12);const ve=W.splitTextToSize(re.subject||"-",ee-30);W.text(ve,40,me),me+=ve.length*ne+5,W.setFontSize(10),W.setTextColor(100,100,100);const be=re.user?.name||re.user?.email||"Utilisateur",J=re.user?.phone||"N/A";W.text(`Auteur: ${be} - Tel: ${J}`,14,me),me+=ne,W.text(`Date: ${eu(re.createdAt)}`,14,me),me+=ne;const Ge=re.readAt?`Lu le ${eu(re.readAt)}`:"Non lu",je=re.readBy?.name?` par ${re.readBy.name}`:"";W.text(`Statut: ${Ge}${je}`,14,me),me+=ne+8,W.setFontSize(12),W.setTextColor(0,0,0),W.setFont(void 0,"bold"),W.text("Contenu:",14,me),me+=ne,W.setFont(void 0,"normal"),W.setFontSize(11);const tt=W.splitTextToSize(re.body||"-",ee);W.text(tt,14,me);const At=W.internal.getNumberOfPages();for(let Tt=1;Tt<=At;Tt++)W.setPage(Tt),W.setFontSize(8),W.setTextColor(150,150,150),W.text(`Page ${Tt} sur ${At} - Exporte le ${new Date().toLocaleDateString("fr-FR")}`,14,W.internal.pageSize.height-10);const He=`avis-${re._id}-${new Date().toISOString().split("T")[0]}.pdf`;W.save(He)}catch(U){console.error("Export single PDF error:",U),alert("Impossible d'exporter en PDF: "+U.message)}finally{T("")}},ge=async()=>{K(!0);try{const{data:re}=await oe.get("/admin/feedback-readers");R(re.readers||[])}catch(re){console.error("Load readers error:",re)}finally{K(!1)}},ue=async re=>{if(console.log("Toggle feedback reader - userId:",re),console.log("userId type:",typeof re),console.log("userId length:",re?.length),!re||typeof re!="string"){console.error("Invalid userId - not a string:",re),alert("ID utilisateur invalide");return}if(!/^[0-9a-fA-F]{24}$/.test(re)){console.error("Invalid MongoDB ObjectId format:",re),alert(`Format d'ID invalide: ${re}`);return}try{console.log("Making API request to:",`/admin/feedback-readers/${re}/toggle`);const{data:U}=await oe.patch(`/admin/feedback-readers/${re}/toggle`);alert(U.message||"Statut mis a jour"),await ge(),L([]),V("")}catch(U){console.error("Toggle feedback reader error:",U),console.error("Error response:",U.response?.data),alert(U.response?.data?.message||"Erreur lors de la mise a jour")}},Ee=async()=>{if(H.trim()){Y(!0);try{const{data:re}=await oe.get(`/admin/users?search=${encodeURIComponent(H.trim())}&limit=10`),U=Array.isArray(re)?re.filter(W=>W.role!=="admin"):[];console.log("Search results:",U),console.log("First user structure:",U[0]),L(U)}catch(re){console.error("Search users error:",re),L([])}finally{Y(!1)}}},fe=u.useMemo(()=>{if(!b.total)return"0 avis";const re=(b.total>1,"avis");return`${b.total} ${re}`},[b.total]);return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6"},e.createElement("header",{className:"flex flex-col gap-3"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Avis sur l'amelioration"),e.createElement("p",{className:"text-sm text-gray-500"},"Centralisez les retours utilisateurs et marquez-les comme lus.")),e.createElement("div",{className:"inline-flex items-center gap-2 rounded-full bg-white border border-gray-200 px-3 py-2 text-xs font-semibold text-gray-600"},e.createElement(ls,{className:"h-4 w-4"}),fe)),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:ae,disabled:A||a.length===0,className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-3xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-semibold shadow-sm hover:shadow-md active:scale-95 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(Pn,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},A?"Export en cours...":"Exporter en PDF"),e.createElement("span",{className:"sm:hidden"},A?"Export...":"PDF")),r&&e.createElement("button",{type:"button",onClick:()=>{$(!D),!D&&O.length===0&&ge()},className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-3xl bg-white border-2 border-indigo-200 text-indigo-700 text-sm font-semibold hover:bg-indigo-50 active:scale-95 transition-all duration-200"},e.createElement(Ia,{className:"w-4 h-4"}),e.createElement("span",{className:"hidden sm:inline"},"Gerer les lecteurs"),e.createElement("span",{className:"sm:hidden"},"Lecteurs")))),r&&D&&e.createElement("section",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 space-y-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h2",{className:"text-lg font-bold text-gray-900"},"Lecteurs d'avis autorises"),e.createElement("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600 transition-colors"},"")),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex gap-2"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, telephone)...",value:H,onChange:re=>V(re.target.value),onKeyDown:re=>re.key==="Enter"&&Ee(),className:"flex-1 px-3 py-2 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("button",{onClick:Ee,disabled:q||!H.trim(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50"},e.createElement(Tr,{className:"w-4 h-4"}))),z.length>0&&e.createElement("div",{className:"space-y-2 max-h-48 overflow-y-auto"},e.createElement("p",{className:"text-xs text-gray-500 font-semibold"},"Resultats de recherche:"),z.map(re=>e.createElement("div",{key:re._id||re.id,className:"flex items-center justify-between p-3 rounded-xl border border-gray-200 bg-gray-50"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},re.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},re.email,"  ",re.phone)),e.createElement("button",{onClick:()=>ue(re._id||re.id),className:"ml-3 inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-xs font-semibold hover:bg-indigo-700 active:scale-95 transition-all"},e.createElement(hi,{className:"w-3.5 h-3.5"}),"Ajouter")))),e.createElement("div",{className:"pt-3 border-t border-gray-200"},e.createElement("p",{className:"text-xs text-gray-500 font-semibold mb-2"},"Lecteurs actuels (",O.length,"):"),j?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement..."):O.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun lecteur autorise pour le moment."):e.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},O.map(re=>e.createElement("div",{key:re._id||re.id,className:"flex items-center justify-between p-3 rounded-xl border border-gray-200"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 truncate"},re.name),e.createElement("p",{className:"text-xs text-gray-500 truncate"},re.email,"  ",re.phone)),e.createElement("button",{onClick:()=>ue(re._id||re.id),className:"ml-3 inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-red-600 text-white text-xs font-semibold hover:bg-red-700 active:scale-95 transition-all"},e.createElement(Go,{className:"w-3.5 h-3.5"}),"Retirer"))))))),e.createElement("section",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 space-y-4"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"flex flex-wrap gap-2"},RO.map(re=>e.createElement("button",{key:re.key,type:"button",onClick:()=>o(re.key),className:`rounded-full px-4 py-2 text-xs font-semibold transition ${s===re.key?"bg-indigo-600 text-white shadow":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},re.label))),e.createElement("div",{className:"relative w-full sm:max-w-xs"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),e.createElement("input",{type:"text",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Rechercher un avis",value:l,onChange:re=>c(re.target.value)}))),y&&e.createElement("p",{className:"text-sm text-red-600"},y),v?e.createElement("div",{className:"space-y-3"},Array.from({length:4}).map((re,U)=>e.createElement("div",{key:`skeleton-${U}`,className:"animate-pulse rounded-2xl border border-gray-100 bg-gray-50 p-4"},e.createElement("div",{className:"h-4 w-1/3 rounded bg-gray-200"}),e.createElement("div",{className:"mt-3 h-3 w-full rounded bg-gray-200"}),e.createElement("div",{className:"mt-2 h-3 w-4/5 rounded bg-gray-200"})))):a.length===0?e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white p-6 text-center text-sm text-gray-500"},"Aucun avis disponible pour ce filtre."):e.createElement("div",{className:"space-y-4"},a.map(re=>{const U=!!re.readAt,W=re.user?.name||re.user?.email||"Utilisateur";return e.createElement("article",{key:re._id,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm space-y-3"},e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-1"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(ca,{className:"h-4 w-4 text-indigo-500"}),e.createElement("h3",{className:"text-base font-semibold text-gray-900"},re.subject)),e.createElement("p",{className:"text-xs text-gray-500"},"Envoye le ",eu(re.createdAt))),e.createElement("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${U?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"}`},U?"Lu":"Non lu")),e.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-line break-words"},re.body),e.createElement("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"text-xs text-gray-500 flex items-center gap-2"},e.createElement(Ia,{className:"h-4 w-4 text-gray-400"}),e.createElement("span",null,W),re.user?.phone?e.createElement("span",null,"- ",re.user.phone):null),e.createElement("div",{className:"flex flex-wrap items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>te(re),disabled:P===re._id,className:"inline-flex items-center gap-1.5 rounded-full border border-purple-200 bg-purple-50 px-3 py-1.5 text-xs font-semibold text-purple-700 hover:bg-purple-100 disabled:opacity-60 transition-all",title:"Exporter cet avis en PDF"},e.createElement(Yz,{className:"h-3.5 w-3.5"}),P===re._id?"Export...":"PDF"),U?e.createElement("p",{className:"text-xs text-gray-500"},"Lu le ",eu(re.readAt),re.readBy?.name?` - ${re.readBy.name}`:""):e.createElement("button",{type:"button",onClick:()=>B(re._id),disabled:k===re._id,className:"inline-flex items-center gap-2 rounded-full border border-indigo-200 bg-indigo-50 px-3 py-2 text-xs font-semibold text-indigo-700 hover:bg-indigo-100 disabled:opacity-60"},e.createElement(ar,{className:"h-4 w-4"}),k===re._id?"Mise a jour...":"Marquer comme lu"))))})),b.totalPages>1&&e.createElement("div",{className:"flex items-center justify-between pt-2"},e.createElement("button",{type:"button",onClick:()=>g(re=>Math.max(1,re-1)),disabled:f<=1,className:"rounded-full border border-gray-200 px-4 py-2 text-xs font-semibold text-gray-600 hover:border-gray-300 disabled:opacity-50"},"Precedent"),e.createElement("span",{className:"text-xs text-gray-500"},"Page ",f," / ",b.totalPages),e.createElement("button",{type:"button",onClick:()=>g(re=>Math.min(b.totalPages,re+1)),disabled:f>=b.totalPages,className:"rounded-full border border-gray-200 px-4 py-2 text-xs font-semibold text-gray-600 hover:border-gray-300 disabled:opacity-50"},"Suivant")))))}const _me=new Intl.NumberFormat("fr-FR"),Xa=t=>{const r=Number(t);return Number.isFinite(r)?_me.format(r):"0"},Fw=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Pme=({label:t,value:r,helper:a})=>e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-white px-4 py-5 shadow-sm"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},t),e.createElement("p",{className:"text-2xl font-semibold text-gray-900"},r),a?e.createElement("p",{className:"text-xs text-gray-400 mt-1"},a):null),Tme=({label:t,value:r,helper:a})=>e.createElement("div",{className:"rounded-2xl border border-gray-100 bg-gradient-to-br from-indigo-600 to-blue-600 px-4 py-5 text-white shadow-lg"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-indigo-100"},t),e.createElement("p",{className:"text-3xl font-semibold"},r),a?e.createElement("p",{className:"text-xs text-indigo-100/80 mt-1"},a):null),Ome=({title:t,onClose:r,children:a})=>e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6"},e.createElement("div",{className:"w-full max-w-3xl overflow-hidden rounded-2xl bg-white p-5 shadow-2xl"},e.createElement("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},t),e.createElement("button",{type:"button",onClick:r,className:"text-xs font-semibold uppercase tracking-wide text-gray-500 hover:text-gray-800"},"Fermer")),e.createElement("div",{className:"mt-4 max-h-[70vh] overflow-y-auto pr-1"},a)));function Mme(){const{id:t}=Jo(),r=6,[a,n]=u.useState(null),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState(null),[f,g]=u.useState(1);u.useEffect(()=>{if(!t)return;const R=new AbortController;let D=!0;return o(!0),c(""),oe.get(`/admin/users/${t}/stats`,{signal:R.signal}).then($=>{D&&n($.data)}).catch($=>{D&&c($.response?.data?.message||$.message||"Impossible de charger les statistiques.")}).finally(()=>{D&&o(!1)}),()=>{D=!1,R.abort()}},[t]);const b=u.useMemo(()=>a?.timeline||[],[a]),x=u.useMemo(()=>a?.breakdown?.categories||[],[a]),v=u.useMemo(()=>a?.topProducts||[],[a]),E=u.useMemo(()=>a?[{label:"Annonces totales",value:Xa(a.listings.total),helper:`${Xa(a.listings.approved)} publies`},{label:"Favoris reus",value:Xa(a.engagement.favoritesReceived)},{label:"Commentaires reus",value:Xa(a.engagement.commentsReceived)},{label:"Favoris enregistrs",value:Xa(a.engagement.favoritesSaved)},{label:"Boutiques suivies",value:Xa(a.engagement.shopsFollowed)},{label:"Budget annonces",value:Fw(a.advertismentSpend)}]:[],[a]),y=u.useMemo(()=>a?[{label:"Contacts WhatsApp",value:Xa(a.performance.clicks),helper:"Nombre de clics gnrs"},{label:"Vues totales",value:Xa(a.performance.views),helper:"Rponses aux annonces"},{label:"Conversion",value:`${Xa(a.performance.conversion)} %`,helper:"Annonces approuves"}]:[],[a]),w=R=>p(R),k=()=>p(null),C=()=>{if(!m||!a)return null;switch(m){case"summary":return e.createElement("dl",{className:"space-y-3"},E.map(R=>e.createElement("div",{key:R.label,className:"flex items-center justify-between border-b border-gray-100 pb-2"},e.createElement("dt",{className:"text-xs uppercase tracking-wide text-gray-500"},R.label),e.createElement("dd",{className:"text-sm font-semibold text-gray-900"},R.helper?`${R.value}  ${R.helper}`:R.value))));case"highlights":return e.createElement("div",{className:"space-y-3"},y.map(R=>e.createElement("div",{key:R.label,className:"rounded-2xl border border-gray-100 bg-gray-50 p-4"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},R.label),e.createElement("p",{className:"text-xl font-semibold text-gray-900"},R.value),R.helper?e.createElement("p",{className:"text-xs text-gray-500"},R.helper):null)));case"timeline":return b.length?e.createElement("div",{className:"space-y-3"},b.map(R=>e.createElement("div",{key:R.label,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},R.label),e.createElement("p",{className:"text-sm font-semibold text-gray-900"},Xa(R.count)," annonces"),e.createElement("p",{className:"text-xs text-gray-500"},Xa(R.favorites)," favoris  ",Xa(R.clicks)," contacts")))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune activit rcente.");case"categories":return x.length?e.createElement("div",{className:"flex flex-wrap gap-2"},x.map(R=>e.createElement("span",{key:R.category,className:"rounded-full border border-gray-200 bg-white px-4 py-1 text-xs font-semibold text-gray-600"},R.category,"  ",Xa(R.count)," annonces"))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune donne catgorielle disponible.");case"topProducts":return v.length?e.createElement("div",{className:"space-y-3"},v.map(R=>e.createElement("div",{key:R._id,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("p",{className:"text-sm font-semibold text-gray-900"},R.title),e.createElement("span",{className:"text-xs text-gray-500"},R.category||"Catgorie inconnue")),e.createElement("p",{className:"text-[11px] uppercase tracking-wide text-gray-400"},R.status||"Statut inconnu"),e.createElement("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{className:"h-3 w-3 text-pink-500"}),Xa(R.favorites)),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Hr,{className:"h-3 w-3 text-purple-500"}),Xa(R.whatsappClicks)),e.createElement("span",{className:"text-xs text-gray-400"},Fw(R.price)))))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucun produit avec suffisamment d'engagement.");default:return null}},A=u.useMemo(()=>a?.followedShops||[],[a]),S=Math.max(1,Math.ceil(A.length/r)),P=u.useMemo(()=>{const R=(f-1)*r;return A.slice(R,R+r)},[A,f]);u.useEffect(()=>{g(R=>{const D=Math.max(1,Math.ceil(A.length/r));return Math.min(R,D)})},[A.length]);const O=m?{summary:"Vue densemble",highlights:"Performances",timeline:"Timeline dtaille",categories:"Rpartition par catgorie",topProducts:"Produits les plus engags"}[m]:"";return s?e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-6"},e.createElement("div",{className:"animate-pulse rounded-2xl border border-gray-200 bg-white p-6 text-center text-sm text-gray-500"},"Chargement des statistiques")):e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-500"},e.createElement(ye,{to:"/admin",className:"inline-flex items-center gap-2 rounded-full border border-gray-200 px-4 py-1 text-xs font-semibold text-gray-600 hover:border-indigo-300 hover:text-indigo-700"},e.createElement(Gr,{className:"h-4 w-4"}),"Retour au back office"),a?.user?e.createElement("span",{className:"text-sm font-semibold text-gray-900"},"Statistiques de ",a.user.name):e.createElement("span",{className:"text-sm font-semibold text-gray-900"},"Statistiques utilisateur")),a?.user?e.createElement("div",{className:"text-right text-xs text-gray-500"},e.createElement("p",null,a.user.email),e.createElement("p",null,a.user.accountType==="shop"?"Boutique":"Particulier"," "," ",a.user.role==="manager"?"Gestionnaire":"Utilisateur")):null),l?e.createElement("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700"},l):null,!a&&!l?e.createElement("p",{className:"text-sm text-gray-500"},"Slectionnez un utilisateur pour afficher ses statistiques."):null,a?e.createElement(e.Fragment,null,e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Vue densemble"),e.createElement("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800",onClick:()=>w("summary")},"Voir les rsultats")),e.createElement("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},E.map(R=>e.createElement(Pme,{key:R.label,label:R.label,value:R.value,helper:R.helper})))),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Performances"),e.createElement("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800",onClick:()=>w("highlights")},"Voir les rsultats")),e.createElement("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3"},y.map(R=>e.createElement(Tme,{key:R.label,label:R.label,value:R.value,helper:R.helper})))),e.createElement("section",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Boutiques suivies"),e.createElement("p",{className:"text-xs text-gray-400"},A.length," boutique(s)")),A.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"space-y-2"},P.map(R=>e.createElement(ye,{key:R.id,to:Da(R),className:"flex items-center justify-between rounded-2xl border border-gray-100 bg-white px-4 py-3 text-xs font-semibold text-gray-700 transition hover:border-indigo-200 hover:text-indigo-800"},e.createElement("div",{className:"min-w-0 space-y-0.5"},e.createElement("p",{className:"truncate text-sm font-semibold text-gray-900"},R.name),e.createElement("p",{className:"truncate text-[11px] text-gray-500"},R.city||"Localisation inconnue")),e.createElement("span",{className:"flex-shrink-0 text-[11px] text-gray-400"},Xa(R.followersCount)," abonns")))),e.createElement("div",{className:"flex items-center justify-between text-[11px] text-gray-500"},e.createElement("span",null,"Affichage"," ",Math.min((f-1)*r+1,A.length),"-",Math.min(f*r,A.length)," sur ",A.length),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>g(R=>Math.max(1,R-1)),disabled:f<=1,className:"rounded border border-gray-200 px-2 py-1 font-semibold text-gray-600 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>g(R=>Math.min(S,R+1)),disabled:f>=S,className:"rounded border border-gray-200 px-2 py-1 font-semibold text-gray-600 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune boutique suivie.")),e.createElement("section",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Timeline"),e.createElement("p",{className:"text-xs text-gray-400"},"6 derniers mois")),e.createElement("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800",onClick:()=>w("timeline")},"Voir les rsultats")),e.createElement("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3"},b.length?b.map(R=>e.createElement("div",{key:R.label,className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-sm"},e.createElement("p",{className:"text-xs uppercase tracking-wide text-gray-500"},R.label),e.createElement("p",{className:"text-lg font-semibold text-gray-900"},Xa(R.count)," annonces"),e.createElement("p",{className:"text-xs text-gray-500"},Xa(R.favorites)," favoris  ",Xa(R.clicks)," contacts"))):e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white/70 p-4 text-xs text-gray-500"},"Aucune activit rcente."))),e.createElement("section",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Rpartition par catgorie"),e.createElement("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800",onClick:()=>w("categories")},"Voir les rsultats")),e.createElement("div",{className:"flex flex-wrap gap-2"},x.length?x.map(R=>e.createElement("span",{key:R.category,className:"rounded-full border border-gray-200 bg-white px-4 py-1 text-xs font-semibold text-gray-600"},R.category,"  ",Xa(R.count)," annonces")):e.createElement("p",{className:"text-xs text-gray-500"},"Aucune donne catgorielle disponible."))),e.createElement("section",{className:"space-y-3"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Produits les plus engags"),e.createElement("p",{className:"text-xs text-gray-400"},"Favoris + clics")),e.createElement("button",{type:"button",className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800",onClick:()=>w("topProducts")},"Voir les rsultats")),e.createElement("div",{className:"space-y-3"},v.length?v.map(R=>e.createElement(ye,{key:R._id,to:Dr(R),className:"flex flex-col gap-2 rounded-2xl border border-gray-100 bg-white p-4 shadow-sm transition hover:border-indigo-200 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",null,e.createElement("p",{className:"text-sm font-semibold text-gray-900"},R.title),e.createElement("p",{className:"text-xs text-gray-500"},R.category||"Catgorie inconnue","  ",R.status||"Statut inconnu")),e.createElement("div",{className:"flex items-center gap-4 text-xs text-gray-500"},e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Yr,{className:"h-3 w-3 text-pink-500"}),Xa(R.favorites)),e.createElement("span",{className:"flex items-center gap-1"},e.createElement(Hr,{className:"h-3 w-3 text-purple-500"}),Xa(R.whatsappClicks)),e.createElement("span",{className:"text-xs text-gray-400"},Fw(R.price))))):e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white/70 p-4 text-xs text-gray-500"},"Aucun produit avec suffisamment d'engagement.")))):null,m&&e.createElement(Ome,{title:O,onClose:k},C()))}function jme(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(!1),[m,p]=u.useState([]),f=u.useCallback(async()=>{n(!0);try{const{data:x}=await oe.get("/admin/payment-verifiers");r(x.verifiers||[])}catch(x){console.error("Load verifiers error:",x)}finally{n(!1)}},[]);u.useEffect(()=>{f()},[f]);const g=async x=>{if(!x||typeof x!="string"){alert("ID utilisateur invalide");return}if(!/^[0-9a-fA-F]{24}$/.test(x)){alert(`Format d'ID invalide: ${x}`);return}try{const{data:v}=await oe.patch(`/admin/payment-verifiers/${x}/toggle`);alert(v.message||"Statut mis  jour"),await f(),p([]),o("")}catch(v){console.error("Toggle verifier error:",v),alert(v.response?.data?.message||"Erreur lors de la mise  jour")}},b=async()=>{if(s.trim()){c(!0);try{const{data:x}=await oe.get(`/admin/users?search=${encodeURIComponent(s.trim())}&limit=10`),v=Array.isArray(x)?x.filter(E=>E.role!=="admin"):[];p(v)}catch(x){console.error("Search users error:",x),p([])}finally{c(!1)}}};return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50/30 dark:from-gray-900 dark:to-gray-800"},e.createElement("div",{className:"max-w-5xl mx-auto px-4 py-8"},e.createElement("header",{className:"mb-8"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement(Ea,{className:"w-8 h-8 text-indigo-600"}),e.createElement("h1",{className:"text-3xl font-black bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"},"Vrificateurs de paiements")),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Grez les utilisateurs autoriss  vrifier les paiements")),e.createElement("section",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 space-y-6"},e.createElement("div",{className:"space-y-3"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 dark:text-white"},"Ajouter un vrificateur"),e.createElement("div",{className:"flex gap-2"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, tlphone)...",value:s,onChange:x=>o(x.target.value),onKeyDown:x=>x.key==="Enter"&&b(),className:"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("button",{onClick:b,disabled:l||!s.trim(),className:"px-4 py-2.5 rounded-xl bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-50"},e.createElement(Tr,{className:"w-4 h-4"}))),m.length>0&&e.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold"},"Rsultats de recherche:"),m.map(x=>e.createElement("div",{key:x._id||x.id,className:"flex items-center justify-between p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate"},x.name),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate"},x.email,"  ",x.phone)),e.createElement("button",{onClick:()=>g(x._id||x.id),className:"ml-3 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-xs font-semibold hover:bg-indigo-700 active:scale-95 transition-all"},e.createElement(hi,{className:"w-3.5 h-3.5"}),"Ajouter"))))),e.createElement("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-600"},e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-semibold mb-3"},"Vrificateurs actuels (",t.length,"):"),a?e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Chargement..."):t.length===0?e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Aucun vrificateur de paiements pour le moment."):e.createElement("div",{className:"space-y-2 max-h-96 overflow-y-auto"},t.map(x=>e.createElement("div",{key:x.id,className:"flex items-center justify-between p-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800"},e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate"},x.name),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate"},x.email,"  ",x.phone)),e.createElement("button",{onClick:()=>g(x.id),className:"ml-3 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-600 text-white text-xs font-semibold hover:bg-red-700 active:scale-95 transition-all"},e.createElement(Go,{className:"w-3.5 h-3.5"}),"Retirer"))))))))}const zw=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,Rme=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",LO={MTN:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",Airtel:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",Orange:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",Moov:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",Other:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};function $me(){const[t,r]=u.useState([]),[a,n]=u.useState(!1),[s,o]=u.useState(""),[l,c]=u.useState(""),m=u.useCallback(async()=>{n(!0);try{const g=new URLSearchParams;g.set("status","waiting"),s.trim()&&g.set("search",s.trim());const{data:b}=await oe.get(`/payments/admin?${g.toString()}`);r(Array.isArray(b)?b:[])}catch(g){console.error("Load payments error:",g),r([])}finally{n(!1)}},[s]);u.useEffect(()=>{m()},[m]),u.useEffect(()=>{const g=()=>{m()},b=()=>{document.visibilityState==="visible"&&m()};return window.addEventListener("paymentStatusChanged",g),document.addEventListener("visibilitychange",b),window.addEventListener("focus",g),()=>{window.removeEventListener("paymentStatusChanged",g),document.removeEventListener("visibilitychange",b),window.removeEventListener("focus",g)}},[m]);const p=async g=>{if(confirm("Voulez-vous vrifier ce paiement ? Le produit sera approuv.")){c(g);try{await oe.put(`/payments/admin/${g}/verify`),alert("Paiement vrifi avec succs"),await m(),window.dispatchEvent(new CustomEvent("paymentStatusChanged",{detail:{paymentId:g,status:"verified"}}))}catch(b){console.error("Verify payment error:",b),alert(b.response?.data?.message||"Erreur lors de la vrification")}finally{c("")}}},f=async g=>{if(confirm("Voulez-vous rejeter ce paiement ? Le produit sera rejet.")){c(g);try{await oe.put(`/payments/admin/${g}/reject`),alert("Paiement rejet"),await m(),window.dispatchEvent(new CustomEvent("paymentStatusChanged",{detail:{paymentId:g,status:"rejected"}}))}catch(b){console.error("Reject payment error:",b),alert(b.response?.data?.message||"Erreur lors du rejet")}finally{c("")}}};return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50/30 dark:from-gray-900 dark:to-gray-800"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8"},e.createElement("header",{className:"mb-8"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement(Ea,{className:"w-8 h-8 text-indigo-600"}),e.createElement("h1",{className:"text-3xl font-black bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"},"Vrification des paiements"),t.length>0&&e.createElement("div",{className:"relative"},e.createElement("div",{className:"absolute -top-2 -right-2 flex items-center justify-center min-w-[24px] h-6 px-2 bg-red-500 text-white text-xs font-bold rounded-full shadow-lg border-2 border-white dark:border-gray-800 animate-pulse"},t.length>99?"99+":t.length))),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},t.length," paiement",t.length!==1?"s":""," en attente de vrification"),t.length>0&&e.createElement("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 text-xs font-semibold border border-amber-200 dark:border-amber-800"},e.createElement("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),"Action requise"))),e.createElement("div",{className:"mb-6"},e.createElement("div",{className:"relative max-w-md"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.createElement("input",{type:"text",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Rechercher un produit...",value:s,onChange:g=>o(g.target.value)}))),a?e.createElement("div",{className:"grid grid-cols-1 gap-4"},Array.from({length:3}).map((g,b)=>e.createElement("div",{key:b,className:"animate-pulse rounded-2xl border border-gray-100 bg-white p-4"},e.createElement("div",{className:"h-4 w-2/3 rounded bg-gray-200 mb-3"}),e.createElement("div",{className:"h-3 w-full rounded bg-gray-200 mb-2"}),e.createElement("div",{className:"h-3 w-4/5 rounded bg-gray-200"})))):t.length===0?e.createElement("div",{className:"rounded-2xl border border-dashed border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-8 text-center text-sm text-gray-500 dark:text-gray-400"},"Aucun paiement en attente de vrification."):e.createElement("div",{className:"space-y-4"},t.map(g=>e.createElement("article",{key:g._id,className:"rounded-2xl border border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 p-6 shadow-sm"},e.createElement("div",{className:"flex flex-col lg:flex-row gap-4"},g.product?.images?.[0]&&e.createElement("div",{className:"w-full lg:w-32 h-32 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-700 flex-shrink-0"},e.createElement("img",{src:g.product.images[0],alt:g.product.title,className:"w-full h-full object-cover"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-start justify-between gap-3 mb-3"},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},e.createElement("h3",{className:"text-lg font-bold text-gray-900 dark:text-white"},g.product?.title||"Produit supprim"),g.product?.slug&&e.createElement(ye,{to:`/product/${g.product.slug}`,target:"_blank",className:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Voir le produit"},e.createElement(fN,{size:16}))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm mb-3"},e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Payeur:")," ",e.createElement("span",{className:"font-semibold text-gray-900 dark:text-white"},g.payerName)),e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Vendeur:")," ",e.createElement("span",{className:"font-semibold text-gray-900 dark:text-white"},g.user?.name||"Utilisateur inconnu")),e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Transaction:")," ",e.createElement("span",{className:"font-mono text-xs font-semibold text-gray-900 dark:text-white"},g.transactionNumber)),g.promoCodeValue&&e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Code promo:")," ",e.createElement("span",{className:"font-semibold text-emerald-700 dark:text-emerald-300"},g.promoCodeValue)),e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Oprateur:")," ",e.createElement("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-semibold ${LO[g.operator]||LO.Other}`},g.operator))),e.createElement("div",{className:"flex flex-wrap items-center gap-3 text-sm"},e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Montant pay:")," ",e.createElement("span",{className:"font-bold text-indigo-600 dark:text-indigo-400"},zw(g.amount))),e.createElement("span",{className:"text-gray-300 dark:text-gray-600"},""),e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Commission due:")," ",e.createElement("span",{className:"font-semibold text-gray-900 dark:text-white"},zw(g.commissionDueAmount??g.amount))),e.createElement("span",{className:"text-gray-300 dark:text-gray-600"},""),e.createElement("div",null,e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Prix produit:")," ",e.createElement("span",{className:"font-semibold text-gray-900 dark:text-white"},zw(g.product?.price))),e.createElement("span",{className:"text-gray-300 dark:text-gray-600"},""),e.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400"},"Soumis le ",Rme(g.submittedAt))))),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{onClick:()=>p(g._id),disabled:l===g._id,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 active:scale-95 transition-all disabled:opacity-60"},e.createElement(ar,{className:"w-4 h-4"}),l===g._id?"Vrification...":"Vrifier"),e.createElement("button",{onClick:()=>f(g._id),disabled:l===g._id,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700 active:scale-95 transition-all disabled:opacity-60"},e.createElement(Ba,{className:"w-4 h-4"}),l===g._id?"Rejet...":"Rejeter")))))))))}const Lme=[{value:"today",label:"Aujourd'hui"},{value:"week",label:"Cette semaine"},{value:"month",label:"Ce mois"},{value:"year",label:"Cette anne"},{value:"custom",label:"Priode personnalise"}];function Ime(){const[t,r]=u.useState("month"),[a,n]=u.useState(""),[s,o]=u.useState(""),[l,c]=u.useState(null),[m,p]=u.useState(!1),[f,g]=u.useState(""),b=u.useCallback(async()=>{p(!0),g("");try{const E=new URLSearchParams({period:t});if(t==="custom"){if(!a||!s){g("Veuillez slectionner une date de dbut et de fin"),p(!1);return}E.set("startDate",a),E.set("endDate",s)}const{data:y}=await oe.get(`/admin/reports?${E.toString()}`);c(y)}catch(E){console.error("Generate report error:",E),g(E.response?.data?.message||"Erreur lors de la gnration du rapport")}finally{p(!1)}},[t,a,s]),x=u.useCallback(async()=>{if(l)try{const{jsPDF:E}=await yl(async()=>{const{jsPDF:A}=await import("./jspdf.es.min-Bc-3z7PL.js").then(S=>S.j);return{jsPDF:A}},[]),{default:y}=await yl(async()=>{const{default:A}=await import("./jspdf.plugin.autotable-CBbcTuFj.js");return{default:A}},[]),w=new E;let k=20;if(w.setFontSize(20),w.setFont(void 0,"bold"),w.text("Rapport HDMarket",105,k,{align:"center"}),k+=10,w.setFontSize(12),w.setFont(void 0,"normal"),w.text(l.period.label,105,k,{align:"center"}),k+=5,w.setFontSize(10),w.text(`Gnr le ${new Date(l.generatedAt).toLocaleDateString("fr-FR")}`,105,k,{align:"center"}),k+=15,w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Utilisateurs",14,k),k+=7,y(w,{startY:k,head:[["Mtrique","Valeur"]],body:[["Total utilisateurs",l.users.total.toLocaleString()],["Nouveaux utilisateurs",l.users.new.toLocaleString()],["Convertis en boutique",l.users.convertedToShop.toLocaleString()],["Utilisateurs suspendus",l.users.suspended.toLocaleString()],["Utilisateurs vrifis",l.users.verified.toLocaleString()]],theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}}),k=w.lastAutoTable.finalY+10,k>250&&(w.addPage(),k=20),w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Commandes",14,k),k+=7,y(w,{startY:k,head:[["Mtrique","Valeur"]],body:[["Total commandes",l.orders.total.toLocaleString()],["Nouvelles commandes",l.orders.new.toLocaleString()],["Valeur totale",`${l.orders.totalValue.toLocaleString()} FCFA`],["Valeur moyenne",`${Math.round(l.orders.averageValue).toLocaleString()} FCFA`]],theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}}),k=w.lastAutoTable.finalY+10,k>250&&(w.addPage(),k=20),w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Annonces",14,k),k+=7,y(w,{startY:k,head:[["Mtrique","Valeur"]],body:[["Total annonces",l.products.total.toLocaleString()],["Nouvelles annonces",l.products.new.toLocaleString()],["Annonces approuves",(l.products.byStatus.approved||0).toLocaleString()],["Annonces en attente",(l.products.byStatus.pending||0).toLocaleString()],["Annonces rejetes",(l.products.byStatus.rejected||0).toLocaleString()]],theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}}),k=w.lastAutoTable.finalY+10,k>250&&(w.addPage(),k=20),w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Paiements",14,k),k+=7,y(w,{startY:k,head:[["Mtrique","Valeur"]],body:[["Total paiements",l.payments.total.toLocaleString()],["Nouveaux paiements",l.payments.new.toLocaleString()],["Montant total",`${l.payments.totalValue.toLocaleString()} FCFA`],["Montant moyen",`${Math.round(l.payments.averageValue).toLocaleString()} FCFA`],["Taux de vrification",`${l.payments.verificationRate}%`]],theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}}),k=w.lastAutoTable.finalY+10,k>250&&(w.addPage(),k=20),l.growth&&(w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Croissance",14,k),k+=7,y(w,{startY:k,head:[["Mtrique","Taux de croissance"]],body:[["Utilisateurs",`${l.growth.monthlyGrowthRate.users>=0?"+":""}${l.growth.monthlyGrowthRate.users}%`],["Annonces",`${l.growth.monthlyGrowthRate.products>=0?"+":""}${l.growth.monthlyGrowthRate.products}%`],["Commandes",`${l.growth.monthlyGrowthRate.orders>=0?"+":""}${l.growth.monthlyGrowthRate.orders}%`],["Paiements",`${l.growth.monthlyGrowthRate.payments>=0?"+":""}${l.growth.monthlyGrowthRate.payments}%`]],theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}}),k=w.lastAutoTable.finalY+10),k>250&&(w.addPage(),k=20),l.content){w.setFontSize(14),w.setFont(void 0,"bold"),w.text("Mtriques de contenu",14,k),k+=7;const A=[["Photos moyennes par annonce",l.content.avgPhotosPerListing.toFixed(2)],["Longueur moyenne des descriptions",`${l.content.avgDescriptionLength} caractres`]];l.content.avgPriceByCategory&&Object.keys(l.content.avgPriceByCategory).length>0&&(A.push(["",""]),A.push(["Prix moyen par catgorie",""]),Object.entries(l.content.avgPriceByCategory).sort((S,P)=>P[1]-S[1]).slice(0,8).forEach(([S,P])=>{A.push([S,`${Math.round(P).toLocaleString()} FCFA`])})),y(w,{startY:k,head:[["Mtrique","Valeur"]],body:A,theme:"grid",headStyles:{fillColor:[79,70,229]},margin:{left:14}})}const C=w.internal.getNumberOfPages();for(let A=1;A<=C;A++)w.setPage(A),w.setFontSize(8),w.setFont(void 0,"normal"),w.text(`Page ${A} sur ${C} - HDMarket Admin`,105,w.internal.pageSize.height-10,{align:"center"});w.save(`rapport-hdmarket-${l.period.type}-${new Date().toISOString().split("T")[0]}.pdf`)}catch(E){console.error("PDF export error:",E),alert("Erreur lors de l'export PDF")}},[l]),v=u.useCallback(async()=>{if(l)try{const E=(await yl(async()=>{const{default:T}=await import("./exceljs.min-BfuUCdT1.js").then(O=>O.e);return{default:T}},[])).default,y=new E.Workbook,w=y.addWorksheet("Rsum");w.columns=[{header:"Catgorie",key:"category",width:30},{header:"Mtrique",key:"metric",width:30},{header:"Valeur",key:"value",width:20}],w.addRow({category:"Priode",metric:l.period.label,value:""}),w.addRow({category:"Gnr le",metric:new Date(l.generatedAt).toLocaleString("fr-FR"),value:""}),w.addRow({}),w.addRow({category:"UTILISATEURS",metric:"",value:""}),w.addRow({category:"",metric:"Total utilisateurs",value:l.users.total}),w.addRow({category:"",metric:"Nouveaux utilisateurs",value:l.users.new}),w.addRow({category:"",metric:"Convertis en boutique",value:l.users.convertedToShop}),w.addRow({category:"",metric:"Utilisateurs suspendus",value:l.users.suspended}),w.addRow({category:"",metric:"Utilisateurs vrifis",value:l.users.verified}),w.addRow({}),w.addRow({category:"COMMANDES",metric:"",value:""}),w.addRow({category:"",metric:"Total commandes",value:l.orders.total}),w.addRow({category:"",metric:"Nouvelles commandes",value:l.orders.new}),w.addRow({category:"",metric:"Valeur totale (FCFA)",value:l.orders.totalValue}),w.addRow({category:"",metric:"Valeur moyenne (FCFA)",value:Math.round(l.orders.averageValue)}),w.addRow({}),w.addRow({category:"ANNONCES",metric:"",value:""}),w.addRow({category:"",metric:"Total annonces",value:l.products.total}),w.addRow({category:"",metric:"Nouvelles annonces",value:l.products.new}),w.addRow({category:"",metric:"Annonces approuves",value:l.products.byStatus.approved||0}),w.addRow({category:"",metric:"Annonces en attente",value:l.products.byStatus.pending||0}),w.addRow({category:"",metric:"Annonces rejetes",value:l.products.byStatus.rejected||0}),w.addRow({}),w.addRow({category:"PAIEMENTS",metric:"",value:""}),w.addRow({category:"",metric:"Total paiements",value:l.payments.total}),w.addRow({category:"",metric:"Nouveaux paiements",value:l.payments.new}),w.addRow({category:"",metric:"Montant total (FCFA)",value:l.payments.totalValue}),w.addRow({category:"",metric:"Montant moyen (FCFA)",value:Math.round(l.payments.averageValue)}),w.addRow({category:"",metric:"Taux de vrification (%)",value:l.payments.verificationRate}),w.addRow({}),l.growth&&(w.addRow({category:"CROISSANCE",metric:"",value:""}),w.addRow({category:"",metric:"Taux croissance utilisateurs (%)",value:l.growth.monthlyGrowthRate.users}),w.addRow({category:"",metric:"Taux croissance annonces (%)",value:l.growth.monthlyGrowthRate.products}),w.addRow({category:"",metric:"Taux croissance commandes (%)",value:l.growth.monthlyGrowthRate.orders}),w.addRow({category:"",metric:"Taux croissance paiements (%)",value:l.growth.monthlyGrowthRate.payments}),w.addRow({})),l.content&&(w.addRow({category:"CONTENU",metric:"",value:""}),w.addRow({category:"",metric:"Photos moyennes par annonce",value:l.content.avgPhotosPerListing.toFixed(2)}),w.addRow({category:"",metric:"Longueur moyenne descriptions",value:l.content.avgDescriptionLength}),w.addRow({}),l.content.avgPriceByCategory&&Object.keys(l.content.avgPriceByCategory).length>0&&(w.addRow({category:"PRIX MOYEN PAR CATGORIE",metric:"",value:""}),Object.entries(l.content.avgPriceByCategory).sort((T,O)=>O[1]-T[1]).forEach(([T,O])=>{w.addRow({category:"",metric:T,value:Math.round(O)})}))),w.getRow(1).font={bold:!0},w.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F46E5"}},w.getRow(1).font={color:{argb:"FFFFFFFF"},bold:!0};const k=y.addWorksheet("Par Ville");k.columns=[{header:"Ville",key:"city",width:20},{header:"Utilisateurs",key:"users",width:15}],Object.entries(l.users.byCity).forEach(([T,O])=>{k.addRow({city:T,users:O})}),k.getRow(1).font={bold:!0},k.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4F46E5"}},k.getRow(1).font={color:{argb:"FFFFFFFF"},bold:!0};const C=await y.xlsx.writeBuffer(),A=new Blob([C],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),S=window.URL.createObjectURL(A),P=document.createElement("a");P.href=S,P.download=`rapport-hdmarket-${l.period.type}-${new Date().toISOString().split("T")[0]}.xlsx`,P.click(),window.URL.revokeObjectURL(S)}catch(E){console.error("Excel export error:",E),alert("Erreur lors de l'export Excel")}},[l]);return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50/30 dark:from-gray-900 dark:to-gray-800"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8"},e.createElement("header",{className:"mb-8"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement(Pn,{className:"w-8 h-8 text-indigo-600"}),e.createElement("h1",{className:"text-3xl font-black bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent"},"Rapports Administratifs")),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Gnrez des rapports dtaills sur l'activit de votre plateforme")),e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm p-6 mb-6"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Configuration du rapport"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Priode"),e.createElement("select",{value:t,onChange:E=>r(E.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},Lme.map(E=>e.createElement("option",{key:E.value,value:E.value},E.label)))),t==="custom"&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Date de dbut"),e.createElement("input",{type:"date",value:a,onChange:E=>n(E.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Date de fin"),e.createElement("input",{type:"date",value:s,onChange:E=>o(E.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})))),f&&e.createElement("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm"},f),e.createElement("div",{className:"flex flex-wrap gap-3"},e.createElement("button",{onClick:b,disabled:m,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 active:scale-95 transition-all disabled:opacity-60"},e.createElement(dn,{className:"w-4 h-4"}),m?"Gnration...":"Gnrer le rapport"),l&&e.createElement(e.Fragment,null,e.createElement("button",{onClick:x,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700 active:scale-95 transition-all"},e.createElement(zo,{className:"w-4 h-4"}),"Exporter PDF"),e.createElement("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-semibold hover:bg-green-700 active:scale-95 transition-all"},e.createElement(zo,{className:"w-4 h-4"}),"Exporter Excel")))),l&&e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},e.createElement(J0,{icon:tn,title:"Utilisateurs",value:l.users.total,change:l.users.new,color:"blue"}),e.createElement(J0,{icon:Ft,title:"Annonces",value:l.products.total,change:l.products.new,color:"purple"}),e.createElement(J0,{icon:Ea,title:"Paiements",value:`${Math.round(l.payments.totalValue).toLocaleString()} FCFA`,change:l.payments.new,color:"green"}),e.createElement(J0,{icon:Pr,title:"Commandes",value:l.orders.total,change:l.orders.new,color:"orange"})),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement(ho,{title:"Utilisateurs",icon:tn},e.createElement(ir,{label:"Total",value:l.users.total.toLocaleString()}),e.createElement(ir,{label:"Nouveaux",value:l.users.new.toLocaleString(),highlight:!0}),e.createElement(ir,{label:"Convertis en boutique",value:l.users.convertedToShop.toLocaleString()}),e.createElement(ir,{label:"Suspendus",value:l.users.suspended.toLocaleString()}),e.createElement(ir,{label:"Vrifis",value:l.users.verified.toLocaleString()}),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par genre"),Object.entries(l.users.byGender).map(([E,y])=>e.createElement(ir,{key:E,label:E==="homme"?"Hommes":"Femmes",value:y.toLocaleString(),small:!0}))),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par ville"),Object.entries(l.users.byCity).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:y.toLocaleString(),small:!0})))),e.createElement(ho,{title:"Commandes",icon:Pr},e.createElement(ir,{label:"Total",value:l.orders.total.toLocaleString()}),e.createElement(ir,{label:"Nouvelles",value:l.orders.new.toLocaleString(),highlight:!0}),e.createElement(ir,{label:"Valeur totale",value:`${Math.round(l.orders.totalValue).toLocaleString()} FCFA`}),e.createElement(ir,{label:"Valeur moyenne",value:`${Math.round(l.orders.averageValue).toLocaleString()} FCFA`}),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par statut"),Object.entries(l.orders.byStatus).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:y.toLocaleString(),small:!0})))),e.createElement(ho,{title:"Annonces",icon:Ft},e.createElement(ir,{label:"Total",value:l.products.total.toLocaleString()}),e.createElement(ir,{label:"Nouvelles",value:l.products.new.toLocaleString(),highlight:!0}),e.createElement(ir,{label:"Avec paiement",value:l.products.withPayment.toLocaleString()}),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par statut"),e.createElement(ir,{label:"Approuves",value:(l.products.byStatus.approved||0).toLocaleString(),small:!0}),e.createElement(ir,{label:"En attente",value:(l.products.byStatus.pending||0).toLocaleString(),small:!0}),e.createElement(ir,{label:"Rejetes",value:(l.products.byStatus.rejected||0).toLocaleString(),small:!0})),Object.keys(l.products.byCategory).length>0&&e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par catgorie"),Object.entries(l.products.byCategory).slice(0,5).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:y.toLocaleString(),small:!0})))),e.createElement(ho,{title:"Paiements",icon:Ea},e.createElement(ir,{label:"Total",value:l.payments.total.toLocaleString()}),e.createElement(ir,{label:"Nouveaux",value:l.payments.new.toLocaleString(),highlight:!0}),e.createElement(ir,{label:"Montant total",value:`${Math.round(l.payments.totalValue).toLocaleString()} FCFA`}),e.createElement(ir,{label:"Montant moyen",value:`${Math.round(l.payments.averageValue).toLocaleString()} FCFA`}),e.createElement(ir,{label:"Taux de vrification",value:`${l.payments.verificationRate}%`}),e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par oprateur"),Object.entries(l.payments.byOperator).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:y.toLocaleString(),small:!0})))),e.createElement(ho,{title:"Avis d'amlioration",icon:ca},e.createElement(ir,{label:"Total",value:l.feedback.total.toLocaleString()}),e.createElement(ir,{label:"Nouveaux",value:l.feedback.new.toLocaleString(),highlight:!0}),e.createElement(ir,{label:"Lus",value:l.feedback.read.toLocaleString()}),e.createElement(ir,{label:"Non lus",value:l.feedback.unread.toLocaleString()})),e.createElement(ho,{title:"Rclamations",icon:Yt},e.createElement(ir,{label:"Total",value:l.complaints.total.toLocaleString()}),e.createElement(ir,{label:"Nouvelles",value:l.complaints.new.toLocaleString(),highlight:!0}),Object.keys(l.complaints.byStatus).length>0&&e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Par statut"),Object.entries(l.complaints.byStatus).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:y.toLocaleString(),small:!0})))),e.createElement(ho,{title:"Boutiques",icon:Er},e.createElement(ir,{label:"Total",value:l.shops.total.toLocaleString()}),e.createElement(ir,{label:"Vrifies",value:l.shops.verified.toLocaleString()}),e.createElement(ir,{label:"Taux de conversion",value:`${l.shops.conversionRate}%`}),l.shops.topShops.length>0&&e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Top boutiques"),l.shops.topShops.map((E,y)=>e.createElement(ir,{key:y,label:E.name,value:`${E.followers} followers`,small:!0})))),e.createElement(ho,{title:"Mtriques cls",icon:Pr},e.createElement(ir,{label:"Taux d'approbation",value:`${l.metrics.approvalRate}%`}),e.createElement(ir,{label:"Taux de vrification",value:`${l.metrics.verificationRate}%`}),e.createElement(ir,{label:"Taux de conversion boutique",value:`${l.metrics.shopConversionRate}%`}),e.createElement(ir,{label:"Valeur moyenne commande",value:`${Math.round(l.metrics.averageOrderValue).toLocaleString()} FCFA`}),e.createElement(ir,{label:"Valeur moyenne paiement",value:`${Math.round(l.metrics.averagePaymentValue).toLocaleString()} FCFA`}))),l.growth&&e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},e.createElement(ho,{title:"Croissance",icon:Pr},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Taux de croissance mensuel"),e.createElement(ir,{label:"Utilisateurs",value:`${l.growth.monthlyGrowthRate.users>=0?"+":""}${l.growth.monthlyGrowthRate.users}%`}),e.createElement(ir,{label:"Annonces",value:`${l.growth.monthlyGrowthRate.products>=0?"+":""}${l.growth.monthlyGrowthRate.products}%`}),e.createElement(ir,{label:"Commandes",value:`${l.growth.monthlyGrowthRate.orders>=0?"+":""}${l.growth.monthlyGrowthRate.orders}%`}),e.createElement(ir,{label:"Paiements",value:`${l.growth.monthlyGrowthRate.payments>=0?"+":""}${l.growth.monthlyGrowthRate.payments}%`}),l.growth.growthByCity&&Object.keys(l.growth.growthByCity).length>0&&e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Croissance par ville"),Object.entries(l.growth.growthByCity).slice(0,5).map(([E,y])=>e.createElement("div",{key:E,className:"mb-2"},e.createElement("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1"},E),e.createElement(ir,{label:"Utilisateurs",value:`${y.users>=0?"+":""}${y.users}%`,small:!0}),e.createElement(ir,{label:"Annonces",value:`${y.products>=0?"+":""}${y.products}%`,small:!0}))))),l.growth.seasonalTrends&&e.createElement(ho,{title:"Tendances saisonnires",icon:dn},e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3"},"volution sur les 12 derniers mois"),l.growth.seasonalTrends.users&&l.growth.seasonalTrends.users.length>0&&e.createElement("div",{className:"mb-4"},e.createElement("h4",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Utilisateurs"),e.createElement("div",{className:"space-y-1 max-h-32 overflow-y-auto"},l.growth.seasonalTrends.users.slice(-6).map((E,y)=>e.createElement(ir,{key:y,label:E.period,value:E.count.toLocaleString(),small:!0})))),l.growth.seasonalTrends.products&&l.growth.seasonalTrends.products.length>0&&e.createElement("div",{className:"mb-4"},e.createElement("h4",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Annonces"),e.createElement("div",{className:"space-y-1 max-h-32 overflow-y-auto"},l.growth.seasonalTrends.products.slice(-6).map((E,y)=>e.createElement(ir,{key:y,label:E.period,value:E.count.toLocaleString(),small:!0})))),l.growth.seasonalTrends.orders&&l.growth.seasonalTrends.orders.length>0&&e.createElement("div",null,e.createElement("h4",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Commandes"),e.createElement("div",{className:"space-y-1 max-h-32 overflow-y-auto"},l.growth.seasonalTrends.orders.slice(-6).map((E,y)=>e.createElement(ir,{key:y,label:E.period,value:`${E.count} (${Math.round(E.totalValue).toLocaleString()} FCFA)`,small:!0})))))),l.content&&e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},e.createElement(ho,{title:"Mtriques de contenu",icon:Ft},e.createElement(ir,{label:"Photos moyennes par annonce",value:l.content.avgPhotosPerListing.toFixed(2)}),e.createElement(ir,{label:"Longueur moyenne des descriptions",value:`${l.content.avgDescriptionLength} caractres`}),l.content.avgPriceByCategory&&Object.keys(l.content.avgPriceByCategory).length>0&&e.createElement("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},e.createElement("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Prix moyen par catgorie"),Object.entries(l.content.avgPriceByCategory).sort((E,y)=>y[1]-E[1]).slice(0,8).map(([E,y])=>e.createElement(ir,{key:E,label:E,value:`${Math.round(y).toLocaleString()} FCFA`,small:!0}))))))))}function J0({icon:t,title:r,value:a,change:n,color:s}){const o={blue:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",purple:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",green:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400",orange:"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400"};return e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-3"},e.createElement("div",{className:`p-3 rounded-xl ${o[s]}`},e.createElement(t,{className:"w-6 h-6"})),e.createElement("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400"},r)),e.createElement("p",{className:"text-2xl font-black text-gray-900 dark:text-white mb-1"},typeof a=="number"?a.toLocaleString():a),n!==void 0&&e.createElement("p",{className:"text-sm text-green-600 dark:text-green-400"},"+",typeof n=="number"?n.toLocaleString():n," nouveaux"))}function ho({title:t,icon:r,children:a}){return e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(r,{className:"w-5 h-5 text-indigo-600"}),e.createElement("h3",{className:"text-lg font-bold text-gray-900 dark:text-white"},t)),e.createElement("div",{className:"space-y-2"},a))}function ir({label:t,value:r,highlight:a,small:n}){return e.createElement("div",{className:`flex items-center justify-between ${n?"text-sm":""} ${a?"font-semibold":""}`},e.createElement("span",{className:`${a?"text-indigo-600 dark:text-indigo-400":"text-gray-600 dark:text-gray-400"}`},t),e.createElement("span",{className:`${a?"text-indigo-900 dark:text-indigo-300":"text-gray-900 dark:text-white"} font-semibold`},r))}const Z0=t=>{if(!t)return"";const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toISOString().slice(0,10)};function Dme({network:t,onSave:r,onCancel:a}){const[n,s]=u.useState(t.name),[o,l]=u.useState(t.phoneNumber);return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-3"},e.createElement("input",{type:"text",value:n,onChange:c=>s(c.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent"}),e.createElement("input",{type:"text",value:o,onChange:c=>l(c.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent"})),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>r(n.trim(),o.trim()),className:"p-2 rounded-lg bg-teal-600 text-white hover:bg-teal-700 transition-colors"},e.createElement(vc,{size:16})),e.createElement("button",{type:"button",onClick:a,className:"p-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors"},e.createElement(jt,{size:16}))))}function Fme(){const{showToast:t}=ms(),[r,a]=u.useState(null),[n,s]=u.useState(""),[o,l]=u.useState(!1),[c,m]=u.useState(""),[p,f]=u.useState(""),[g,b]=u.useState(null),[x,v]=u.useState(""),[E,y]=u.useState(!1),[w,k]=u.useState(""),[C,A]=u.useState(""),[S,P]=u.useState(null),[T,O]=u.useState(""),[R,D]=u.useState(!1),[$,j]=u.useState(""),[K,H]=u.useState(""),[V,q]=u.useState(null),[Y,z]=u.useState(""),[L,Q]=u.useState(null),[B,ae]=u.useState(""),[te,ge]=u.useState(""),[ue,Ee]=u.useState(""),[fe,re]=u.useState(""),[U,W]=u.useState(!1),[me,ne]=u.useState(""),[ee,ve]=u.useState(""),[be,J]=u.useState([]),[Ge,je]=u.useState(""),[tt,At]=u.useState(!1),[He,Tt]=u.useState(""),[Re,et]=u.useState(""),[gt,Ze]=u.useState(null),[xt,Dt]=u.useState(""),[nt,Me]=u.useState(3),[Qe,wt]=u.useState(!0),[lt,we]=u.useState(!1),[vt,pt]=u.useState(""),[Le,pe]=u.useState(""),[Pe,ft]=u.useState([]),[ht,Lt]=u.useState(!1),[nr,er]=u.useState(null),[Nt,sr]=u.useState({name:"",phoneNumber:"",isActive:!0,order:0}),[Rt,zt]=u.useState(""),[mr,Mr]=u.useState([]),[br,or]=u.useState(!1),[Gt,Zt]=u.useState("all"),[se,dt]=u.useState("all"),[ut,It]=u.useState(null),[de,De]=u.useState(!0);u.useEffect(()=>{let Oe=!0;return(async()=>{De(!0);try{const[gr,wr,xa,fa,Ua,Na]=await Promise.all([oe.get("/settings/hero-banner"),oe.get("/settings/app-logo"),oe.get("/settings/promo-banner"),oe.get("/admin/prohibited-words").catch(()=>({data:[]})),oe.get("/settings/splash").catch(()=>({data:null})),oe.get("/admin/networks").catch(()=>({data:[]}))]);if(F(),!Oe)return;O(gr?.data?.heroBanner||""),s(wr?.data?.appLogoDesktop||""),v(wr?.data?.appLogoMobile||""),z(xa?.data?.promoBanner||""),ae(xa?.data?.promoBannerMobile||""),ge(xa?.data?.promoBannerLink||""),Ee(Z0(xa?.data?.promoBannerStartAt)),re(Z0(xa?.data?.promoBannerEndAt)),J(Array.isArray(fa?.data)?fa.data:[]),Ua?.data&&(Dt(Ua.data.splashImage||""),Me(Math.min(30,Math.max(1,Number(Ua.data.splashDurationSeconds)||3))),wt(Ua.data.splashEnabled!==!1)),ft(Array.isArray(Na?.data)?Na.data:[])}catch(gr){if(!Oe)return;t(gr.response?.data?.message||"Erreur chargement paramtres.",{variant:"error"})}finally{Oe&&De(!1)}})(),()=>{Oe=!1}},[t]);const F=u.useCallback(async()=>{or(!0);try{const Oe={};Gt!=="all"&&(Oe.status=Gt),se!=="all"&&(Oe.type=se);const{data:it}=await oe.get("/admin/content-reports",{params:Oe});Mr(Array.isArray(it)?it:[])}catch(Oe){t(Oe.response?.data?.message||"Erreur chargement signalements.",{variant:"error"}),Mr([])}finally{or(!1)}},[Gt,se,t]);u.useEffect(()=>{F()},[F]);const ie=u.useCallback(async(Oe,it,gr="")=>{It(Oe);try{await oe.patch(`/admin/content-reports/${Oe}/status`,{status:it,adminNote:gr}),await F(),t("Statut du signalement mis  jour.",{variant:"success"})}catch(wr){t(wr.response?.data?.message||"Erreur mise  jour.",{variant:"error"})}finally{It(null)}},[F,t]),he=Oe=>Oe?new Date(Oe).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",ke=Oe=>{const it={pending:"bg-yellow-100 text-yellow-700 border-yellow-300",reviewed:"bg-blue-100 text-blue-700 border-blue-300",resolved:"bg-green-100 text-green-700 border-green-300",dismissed:"bg-gray-100 text-gray-700 border-gray-300"},gr={pending:"En attente",reviewed:"Examin",resolved:"Rsolu",dismissed:"Rejet"};return e.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-semibold border ${it[Oe]||it.pending}`},gr[Oe]||Oe)};u.useEffect(()=>()=>{[T,n,x,Y,B,xt].forEach(it=>{it&&typeof it=="string"&&it.startsWith("blob:")&&URL.revokeObjectURL(it)})},[T,n,x,Y,B,xt]);const mt=Oe=>{const it=Oe.target.files?.[0]??null;a(it),m(""),f(""),it&&(n?.startsWith?.("blob:")&&URL.revokeObjectURL(n),s(URL.createObjectURL(it)))},G=Oe=>{const it=Oe.target.files?.[0]??null;b(it),k(""),A(""),it&&(x?.startsWith?.("blob:")&&URL.revokeObjectURL(x),v(URL.createObjectURL(it)))},Z=Oe=>{const it=Oe.target.files?.[0]??null;P(it),j(""),H(""),it&&(T?.startsWith?.("blob:")&&URL.revokeObjectURL(T),O(URL.createObjectURL(it)))},le=Oe=>{const it=Oe.target.files?.[0]??null;q(it),ne(""),ve(""),it&&(Y?.startsWith?.("blob:")&&URL.revokeObjectURL(Y),z(URL.createObjectURL(it)))},_e=Oe=>{const it=Oe.target.files?.[0]??null;Q(it),ne(""),ve(""),it&&(B?.startsWith?.("blob:")&&URL.revokeObjectURL(B),ae(URL.createObjectURL(it)))},Be=Oe=>{const it=Oe.target.files?.[0]??null;Ze(it),pt(""),pe(""),it&&(xt?.startsWith?.("blob:")&&URL.revokeObjectURL(xt),Dt(URL.createObjectURL(it)))},Te=u.useCallback(async()=>{const Oe=Math.min(30,Math.max(1,Math.round(nt)));if(Oe<1||Oe>30){pt("La dure doit tre entre 1 et 30 secondes.");return}if(!(gt||xt)&&Qe){pt("Veuillez ajouter une image pour l'cran de dmarrage ou dsactiver l'cran.");return}we(!0),pt(""),pe("");try{const gr=new FormData;gt&&gr.append("splashImage",gt),gr.append("splashDurationSeconds",String(Oe)),gr.append("splashEnabled",String(Qe));const{data:wr}=await oe.put("/admin/splash",gr,{headers:{"Content-Type":"multipart/form-data"}});wr?.splashImage!=null&&Dt(wr.splashImage||""),wr?.splashDurationSeconds!=null&&Me(wr.splashDurationSeconds),wr?.splashEnabled!==void 0&&wt(wr.splashEnabled),Ze(null),pe("cran de dmarrage mis  jour."),t("cran de dmarrage mis  jour.",{variant:"success"})}catch(gr){const wr=gr.response?.data?.message||"Impossible d'enregistrer l'cran de dmarrage.";pt(wr),t(wr,{variant:"error"})}finally{we(!1)}},[gt,nt,Qe,t]),Se=u.useCallback(async()=>{if(!S){j("Veuillez slectionner une image pour la bannire.");return}D(!0),j(""),H("");try{const Oe=new FormData;Oe.append("heroBanner",S);const{data:it}=await oe.put("/admin/hero-banner",Oe,{headers:{"Content-Type":"multipart/form-data"}});O(it?.heroBanner??T),P(null),H("Bannire mise  jour avec succs."),t("Bannire HERO mise  jour.",{variant:"success"})}catch(Oe){const it=Oe.response?.data?.message||"Impossible d'enregistrer la bannire.";j(it),t(it,{variant:"error"})}finally{D(!1)}},[S,T,t]),Je=u.useCallback(async()=>{if(ue&&fe){const Oe=new Date(ue),it=new Date(fe);if(Number.isNaN(Oe.getTime())||Number.isNaN(it.getTime())){ne("Dates de bannire invalides.");return}if(it<Oe){ne("La date de fin doit tre aprs la date de dbut.");return}}W(!0),ne(""),ve("");try{const Oe=new FormData;V&&Oe.append("promoBanner",V),L&&Oe.append("promoBannerMobile",L),Oe.append("promoBannerLink",te.trim()),Oe.append("promoBannerStartAt",ue),Oe.append("promoBannerEndAt",fe);const{data:it}=await oe.put("/admin/promo-banner",Oe,{headers:{"Content-Type":"multipart/form-data"}});z(it?.promoBanner??Y),ae(it?.promoBannerMobile??B),ge(it?.promoBannerLink??te),Ee(Z0(it?.promoBannerStartAt)),re(Z0(it?.promoBannerEndAt)),q(null),Q(null),ve("Bannire publicitaire mise  jour avec succs."),t("Bannire publicitaire mise  jour.",{variant:"success"})}catch(Oe){const it=Oe.response?.data?.message||"Impossible d'enregistrer la bannire publicitaire.";ne(it),t(it,{variant:"error"})}finally{W(!1)}},[V,L,te,ue,fe,Y,B,t]),qt=u.useCallback(async()=>{if(!r){m("Veuillez slectionner un logo desktop.");return}l(!0),m(""),f("");try{const Oe=new FormData;Oe.append("appLogoDesktop",r);const{data:it}=await oe.put("/admin/app-logo/desktop",Oe,{headers:{"Content-Type":"multipart/form-data"}});s(it?.appLogoDesktop??n),a(null),f("Logo desktop mis  jour avec succs."),t("Logo desktop mis  jour.",{variant:"success"})}catch(Oe){const it=Oe.response?.data?.message||"Impossible d'enregistrer le logo desktop.";m(it),t(it,{variant:"error"})}finally{l(!1)}},[r,n,t]),lr=u.useCallback(async()=>{if(!g){k("Veuillez slectionner un logo mobile.");return}y(!0),k(""),A("");try{const Oe=new FormData;Oe.append("appLogoMobile",g);const{data:it}=await oe.put("/admin/app-logo/mobile",Oe,{headers:{"Content-Type":"multipart/form-data"}});v(it?.appLogoMobile??x),b(null),A("Logo mobile mis  jour avec succs."),t("Logo mobile mis  jour.",{variant:"success"})}catch(Oe){const it=Oe.response?.data?.message||"Impossible d'enregistrer le logo mobile.";k(it),t(it,{variant:"error"})}finally{y(!1)}},[g,x,t]),Nr=u.useCallback(async Oe=>{if(Oe.preventDefault(),!!Ge.trim()){Tt(""),et("");try{const{data:it}=await oe.post("/admin/prohibited-words",{word:Ge.trim()});J(gr=>[...gr,it]),je(""),et("Mot ajout  la liste."),t("Mot interdit ajout.",{variant:"success"})}catch(it){const gr=it.response?.data?.message||it.message||"chec de l'ajout du mot interdit.";Tt(gr),t(gr,{variant:"error"})}}},[Ge,t]),ra=u.useCallback(async Oe=>{Tt(""),et("");try{await oe.delete(`/admin/prohibited-words/${Oe}`),J(it=>it.filter(gr=>gr.id!==Oe)),et("Mot supprim de la liste."),t("Mot interdit supprim.",{variant:"success"})}catch(it){const gr=it.response?.data?.message||it.message||"Impossible de supprimer le mot.";Tt(gr),t(gr,{variant:"error"})}},[t]);return de?e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20"},e.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8"},e.createElement("div",{className:"flex flex-col items-center justify-center py-24"},e.createElement("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"}),e.createElement("p",{className:"mt-4 text-sm font-medium text-gray-600"},"Chargement des paramtres")))):e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20"},e.createElement("div",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8 sm:px-6 lg:px-8"},e.createElement("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between pb-6 border-b border-gray-200/60"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 shadow-lg"},e.createElement(El,{size:24,className:"text-white",strokeWidth:2.5})),e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent"},"App Settings"),e.createElement("p",{className:"text-sm text-gray-600 mt-0.5"},"Logo, bannire HERO et bannire publicitaire"))),e.createElement(ye,{to:"/admin",className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50 hover:border-indigo-300 hover:text-indigo-700 transition-all"},e.createElement(Gr,{size:16}),"Retour au tableau de bord")),e.createElement("section",{className:"space-y-8"},e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-100"},e.createElement(Z4,{size:20,className:"text-amber-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Logos de lapplication"),e.createElement("p",{className:"text-sm text-gray-500"},"Utiliss dans la barre de navigation (desktop et mobile)."))),e.createElement("div",{className:"grid gap-6 md:grid-cols-2"},e.createElement("div",{className:"space-y-3 rounded-xl border border-gray-100 bg-gray-50/50 p-4"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2"},e.createElement(Z4,{size:16})," Logo desktop"),c&&e.createElement("p",{className:"text-sm text-red-600"},c),p&&e.createElement("p",{className:"text-sm text-emerald-600"},p),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-white p-6 cursor-pointer hover:bg-gray-50 transition-colors"},n?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:n,alt:"Logo desktop",className:"h-16 w-auto max-w-full object-contain mx-auto mb-2"}),e.createElement("p",{className:"text-xs text-gray-500"},"Logo actuel")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun logo dfini."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:20,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Cliquez pour uploader"),e.createElement("span",{className:"text-xs text-gray-400"},"PNG, JPG, WEBP  format horizontal"),e.createElement("input",{type:"file",accept:"image/*",onChange:mt,className:"hidden"}))),e.createElement("button",{type:"button",onClick:qt,disabled:o||!r,className:"w-full rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},o?"Mise  jour":"Enregistrer le logo desktop")),e.createElement("div",{className:"space-y-3 rounded-xl border border-gray-100 bg-gray-50/50 p-4"},e.createElement("p",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2"},e.createElement(bN,{size:16})," Logo mobile"),w&&e.createElement("p",{className:"text-sm text-red-600"},w),C&&e.createElement("p",{className:"text-sm text-emerald-600"},C),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-white p-6 cursor-pointer hover:bg-gray-50 transition-colors"},x?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:x,alt:"Logo mobile",className:"h-16 w-16 rounded-xl object-contain mx-auto mb-2 border border-gray-200"}),e.createElement("p",{className:"text-xs text-gray-500"},"Logo actuel")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun logo dfini."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:20,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Cliquez pour uploader"),e.createElement("span",{className:"text-xs text-gray-400"},"PNG, JPG, WEBP  format carr"),e.createElement("input",{type:"file",accept:"image/*",onChange:G,className:"hidden"}))),e.createElement("button",{type:"button",onClick:lr,disabled:E||!g,className:"w-full rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},E?"Mise  jour":"Enregistrer le logo mobile")))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-100"},e.createElement(El,{size:20,className:"text-indigo-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Bannire du HERO (Accueil)"),e.createElement("p",{className:"text-sm text-gray-500"},"Image en arrire-plan du HERO sur la page daccueil. 1600600px recommand."))),$&&e.createElement("p",{className:"text-sm text-red-600 mb-2"},$),K&&e.createElement("p",{className:"text-sm text-emerald-600 mb-2"},K),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-6 cursor-pointer hover:bg-gray-100 transition-colors"},T?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:T,alt:"Bannire HERO",className:"h-32 w-full rounded-xl object-cover mx-auto mb-2 border-2 border-indigo-200"}),e.createElement("p",{className:"text-sm text-gray-600"},"Bannire actuelle")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune bannire dfinie."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:20,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Cliquez pour uploader"),e.createElement("span",{className:"text-xs text-gray-400"},"PNG, JPG  1600600px recommand"),e.createElement("input",{type:"file",accept:"image/*",onChange:Z,className:"hidden"}))),e.createElement("button",{type:"button",onClick:Se,disabled:R||!S,className:"mt-4 w-full rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},R?"Mise  jour":"Enregistrer la bannire HERO")),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-pink-100"},e.createElement(El,{size:20,className:"text-pink-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Bannire publicitaire"),e.createElement("p",{className:"text-sm text-gray-500"},"Bannire sur la page daccueil. Lien optionnel et plage de dates."))),me&&e.createElement("p",{className:"text-sm text-red-600 mb-2"},me),ee&&e.createElement("p",{className:"text-sm text-emerald-600 mb-2"},ee),e.createElement("div",{className:"space-y-4 mb-6"},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Lien du banner"),e.createElement("input",{type:"text",value:te,onChange:Oe=>ge(Oe.target.value),placeholder:"https://exemple.com/promo ou /products",className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",{className:"grid gap-3 sm:grid-cols-2"},e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Date de dbut"),e.createElement("input",{type:"date",value:ue,onChange:Oe=>Ee(Oe.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",null,e.createElement("label",{className:"text-xs font-semibold uppercase text-gray-500"},"Date de fin"),e.createElement("input",{type:"date",value:fe,onChange:Oe=>re(Oe.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}))),e.createElement("p",{className:"text-xs text-gray-500"},"Hors priode, la bannire par dfaut saffiche.")),e.createElement("div",{className:"grid gap-4 lg:grid-cols-2 mb-6"},e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-6 cursor-pointer hover:bg-gray-100 transition-colors"},Y?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:Y,alt:"Bannire publicitaire",className:"h-28 w-full rounded-xl object-cover mx-auto mb-2 border border-gray-200"}),e.createElement("p",{className:"text-xs text-gray-600"},"Desktop")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune bannire desktop."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:18,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Upload"),e.createElement("input",{type:"file",accept:"image/*",onChange:le,className:"hidden"}))),e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-6 cursor-pointer hover:bg-gray-100 transition-colors"},B?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:B,alt:"Bannire publicitaire mobile",className:"h-28 w-full rounded-xl object-cover mx-auto mb-2 border border-gray-200"}),e.createElement("p",{className:"text-xs text-gray-600"},"Mobile")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune bannire mobile."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:18,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Upload"),e.createElement("input",{type:"file",accept:"image/*",onChange:_e,className:"hidden"})))),e.createElement("button",{type:"button",onClick:Je,disabled:U,className:"w-full rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},U?"Mise  jour":"Enregistrer la bannire publicitaire")),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-100"},e.createElement(ba,{size:20,className:"text-amber-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"cran de dmarrage"),e.createElement("p",{className:"text-sm text-gray-500"},"Image plein cran affiche  louverture de lapp avant la page daccueil. Dure en secondes (130) et bouton  Passer ."))),vt&&e.createElement("p",{className:"text-sm text-red-600 mb-2"},vt),Le&&e.createElement("p",{className:"text-sm text-emerald-600 mb-2"},Le),e.createElement("div",{className:"flex items-center gap-3 mb-4 p-3 rounded-xl bg-gray-50 border border-gray-200"},e.createElement("input",{type:"checkbox",id:"splash-enabled",checked:Qe,onChange:Oe=>wt(Oe.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.createElement("label",{htmlFor:"splash-enabled",className:"text-sm font-medium text-gray-700 cursor-pointer"},"Afficher lcran de dmarrage au chargement de lapp")),e.createElement("div",{className:"grid gap-4 lg:grid-cols-2 mb-6"},e.createElement("div",{className:"flex flex-col items-center justify-center w-full border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 p-6 cursor-pointer hover:bg-gray-100 transition-colors"},xt?e.createElement("div",{className:"text-center w-full"},e.createElement("img",{src:xt,alt:"cran de dmarrage",className:"h-40 w-full rounded-xl object-cover mx-auto mb-2 border border-gray-200"}),e.createElement("p",{className:"text-xs text-gray-600"},"Image actuelle")):e.createElement("p",{className:"text-sm text-gray-500"},"Aucune image. Ajoutez une image pour afficher lcran de dmarrage."),e.createElement("label",{className:"mt-2 flex flex-col items-center gap-1 cursor-pointer"},e.createElement(gl,{size:18,className:"text-gray-400"}),e.createElement("span",{className:"text-xs text-indigo-600 font-medium"},"Choisir une image"),e.createElement("span",{className:"text-xs text-gray-400"},"PNG, JPG  plein cran"),e.createElement("input",{type:"file",accept:"image/*",onChange:Be,className:"hidden"}))),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"block text-sm font-semibold text-gray-900"},"Dure daffichage (secondes)"),e.createElement("input",{type:"number",min:1,max:30,value:nt,onChange:Oe=>Me(Math.min(30,Math.max(1,Number(Oe.target.value)||3))),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("p",{className:"text-xs text-gray-500"},"Entre 1 et 30 secondes. Lutilisateur peut passer avant la fin."))),e.createElement("button",{type:"button",onClick:Te,disabled:lt||Qe&&!gt&&!xt,className:"w-full rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},lt?"Mise  jour":"Enregistrer lcran de dmarrage")),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-100"},e.createElement(pa,{size:20,className:"text-amber-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Mots interdits"),e.createElement("p",{className:"text-sm text-gray-500"},"Ajoutez les mots que les vendeurs ne doivent pas utiliser dans leurs annonces. Les annonces contenant ces mots seront bloques."))),e.createElement("form",{onSubmit:Nr,className:"flex flex-col gap-3 sm:flex-row mb-4"},e.createElement("div",{className:"relative flex-1"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.createElement("input",{type:"text",placeholder:"Ex : contrefaon, interdit...",value:Ge,onChange:Oe=>je(Oe.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 bg-white text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:tt})),e.createElement("button",{type:"submit",disabled:tt||!Ge.trim(),className:"inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},tt?e.createElement(e.Fragment,null,e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Ajout..."):e.createElement(e.Fragment,null,e.createElement(pa,{size:16}),"Ajouter"))),Re&&e.createElement("p",{className:"text-sm text-emerald-600 mb-2"},Re),He&&e.createElement("p",{className:"text-sm text-red-600 mb-2"},He),e.createElement("div",{className:"flex flex-wrap gap-2"},be.map(Oe=>e.createElement("span",{key:Oe.id,className:"flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-3 py-1.5 text-xs font-semibold text-gray-700"},Oe.word,e.createElement("button",{type:"button",onClick:()=>ra(Oe.id),className:"text-[11px] text-red-600 hover:text-red-500 transition-colors"},e.createElement(jt,{size:12})))),!be.length&&e.createElement("p",{className:"text-sm text-gray-400"},"Aucun mot interdit dfini pour l'instant."))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-teal-100"},e.createElement(bN,{size:20,className:"text-teal-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Rseaux de contact"),e.createElement("p",{className:"text-sm text-gray-500"},"Configurez les rseaux tlphoniques et leurs numros. Ces numros remplaceront les numros cods en dur dans l'application."))),Rt&&e.createElement("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200"},e.createElement("p",{className:"text-sm text-red-600"},Rt)),e.createElement("form",{onSubmit:async Oe=>{if(Oe.preventDefault(),!Nt.name.trim()||!Nt.phoneNumber.trim()){zt("Le nom et le numro de tlphone sont requis.");return}Lt(!0),zt("");try{const it=await oe.post("/admin/networks",Nt);ft([...Pe,it.data]),sr({name:"",phoneNumber:"",isActive:!0,order:0}),t("Rseau ajout avec succs.",{variant:"success"})}catch(it){zt(it.response?.data?.message||"Erreur lors de l'ajout du rseau.")}finally{Lt(!1)}},className:"mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200"},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-1"},"Nom du rseau ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("input",{type:"text",value:Nt.name,onChange:Oe=>sr({...Nt,name:Oe.target.value}),placeholder:"Ex: MTN, Airtel",className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:ht})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-semibold text-gray-700 mb-1"},"Numro de tlphone ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("input",{type:"text",value:Nt.phoneNumber,onChange:Oe=>sr({...Nt,phoneNumber:Oe.target.value}),placeholder:"Ex: +242 06 000 00 00",className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:ht}))),e.createElement("div",{className:"flex items-center gap-4 mb-4"},e.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:Nt.isActive,onChange:Oe=>sr({...Nt,isActive:Oe.target.checked}),className:"rounded border-gray-300 text-teal-600 focus:ring-teal-500",disabled:ht}),e.createElement("span",{className:"text-sm text-gray-700"},"Actif")),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("label",{className:"text-sm text-gray-700"},"Ordre:"),e.createElement("input",{type:"number",value:Nt.order,onChange:Oe=>sr({...Nt,order:Number(Oe.target.value)||0}),className:"w-20 rounded-xl border border-gray-200 px-2 py-1 text-sm focus:ring-2 focus:ring-teal-500 focus:border-transparent",disabled:ht,min:"0"}))),e.createElement("button",{type:"submit",disabled:ht||!Nt.name.trim()||!Nt.phoneNumber.trim(),className:"inline-flex items-center gap-2 rounded-xl bg-teal-600 px-4 py-2 text-sm font-semibold text-white hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"},ht?e.createElement(e.Fragment,null,e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Ajout..."):e.createElement(e.Fragment,null,e.createElement(Bo,{size:16}),"Ajouter un rseau"))),e.createElement("div",{className:"space-y-3"},Pe.length===0?e.createElement("p",{className:"text-sm text-gray-400 text-center py-4"},"Aucun rseau configur."):Pe.map(Oe=>e.createElement("div",{key:Oe._id,className:"flex items-center gap-4 p-4 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-colors"},nr===Oe._id?e.createElement(Dme,{network:Oe,onSave:async(it,gr)=>{if(!it||!gr){zt("Le nom et le numro sont requis.");return}Lt(!0),zt("");try{const wr=await oe.patch(`/admin/networks/${Oe._id}`,{name:it,phoneNumber:gr});ft(Pe.map(xa=>xa._id===Oe._id?wr.data:xa)),er(null),t("Rseau mis  jour.",{variant:"success"})}catch(wr){zt(wr.response?.data?.message||"Erreur lors de la mise  jour.")}finally{Lt(!1)}},onCancel:()=>er(null)}):e.createElement(e.Fragment,null,e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("span",{className:"font-semibold text-gray-900"},Oe.name),e.createElement("span",{className:"text-sm text-gray-600"},Oe.phoneNumber),!Oe.isActive&&e.createElement("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-200 text-gray-600"},"Inactif"))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>er(Oe._id),className:"p-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"},e.createElement(fd,{size:16})),e.createElement("button",{type:"button",onClick:async()=>{if(window.confirm(`Supprimer le rseau "${Oe.name}" ?`)){Lt(!0),zt("");try{await oe.delete(`/admin/networks/${Oe._id}`),ft(Pe.filter(it=>it._id!==Oe._id)),t("Rseau supprim.",{variant:"success"})}catch(it){zt(it.response?.data?.message||"Erreur lors de la suppression.")}finally{Lt(!1)}}},className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors"},e.createElement(is,{size:16})))))))),e.createElement("div",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-red-100"},e.createElement(yu,{size:20,className:"text-red-600"})),e.createElement("div",null,e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Signalements de contenu"),e.createElement("p",{className:"text-sm text-gray-500"},"Consultez et grez les signalements de commentaires et photos."))),e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4"},e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("select",{value:Gt,onChange:Oe=>Zt(Oe.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent"},e.createElement("option",{value:"all"},"Tous les statuts"),e.createElement("option",{value:"pending"},"En attente"),e.createElement("option",{value:"reviewed"},"Examin"),e.createElement("option",{value:"resolved"},"Rsolu"),e.createElement("option",{value:"dismissed"},"Rejet")),e.createElement("select",{value:se,onChange:Oe=>dt(Oe.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent"},e.createElement("option",{value:"all"},"Tous les types"),e.createElement("option",{value:"comment"},"Commentaires"),e.createElement("option",{value:"photo"},"Photos"))),e.createElement("button",{type:"button",onClick:F,disabled:br,className:"rounded-xl border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-60"},br?"Chargement...":"Actualiser")),br?e.createElement("div",{className:"py-12 text-center"},e.createElement("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-red-200 border-t-red-600 mx-auto mb-2"}),e.createElement("p",{className:"text-sm text-gray-500"},"Chargement des signalements...")):mr.length===0?e.createElement("p",{className:"text-sm text-gray-400 text-center py-8"},"Aucun signalement pour le moment."):e.createElement("div",{className:"space-y-4"},mr.map(Oe=>e.createElement("div",{key:Oe._id,className:"rounded-xl border border-gray-200 bg-gray-50 p-4 space-y-3"},e.createElement("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between"},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-2 mb-2"},Oe.type==="comment"?e.createElement(ca,{size:16,className:"text-blue-600"}):e.createElement(b2,{size:16,className:"text-purple-600"}),e.createElement("span",{className:"font-semibold text-gray-900"},Oe.type==="comment"?"Commentaire signal":"Photo signale"),ke(Oe.status)),e.createElement("div",{className:"text-xs text-gray-600 space-y-1"},e.createElement("p",null,e.createElement("span",{className:"font-medium"},"Signal par:")," ",Oe.reporter?.name||"Anonyme"," (",Oe.reporter?.email||"",")"),e.createElement("p",null,e.createElement("span",{className:"font-medium"},"Utilisateur signal:")," ",Oe.reportedUser?.name||""," (",Oe.reportedUser?.email||"",")"),e.createElement("p",null,e.createElement("span",{className:"font-medium"},"Produit:")," ",e.createElement(ye,{to:`/product/${Oe.product?.slug||Oe.product?._id}`,target:"_blank",className:"text-indigo-600 hover:underline"},Oe.product?.title||"")),Oe.type==="comment"&&Oe.comment&&e.createElement("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200"},e.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Commentaire:"),e.createElement("p",{className:"text-sm text-gray-700"},Oe.comment?.message||"")),Oe.type==="photo"&&Oe.photoUrl&&e.createElement("div",{className:"mt-2"},e.createElement("img",{src:Oe.photoUrl,alt:"Photo signale",className:"max-w-xs h-32 object-cover rounded-lg border border-gray-200"})),Oe.reason&&e.createElement("div",{className:"mt-2 p-2 bg-white rounded-lg border border-gray-200"},e.createElement("p",{className:"text-xs text-gray-500 mb-1"},"Raison:"),e.createElement("p",{className:"text-sm text-gray-700"},Oe.reason)),e.createElement("p",{className:"text-gray-400 mt-2"},"Signal le ",he(Oe.createdAt),Oe.handledAt&&`  Trait le ${he(Oe.handledAt)}`,Oe.handledBy&&` par ${Oe.handledBy?.name||""}`),Oe.adminNote&&e.createElement("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg border border-blue-200"},e.createElement("p",{className:"text-xs text-blue-600 font-medium mb-1"},"Note admin:"),e.createElement("p",{className:"text-sm text-blue-700"},Oe.adminNote)))),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement("select",{value:Oe.status,onChange:it=>ie(Oe._id,it.target.value),disabled:ut===Oe._id,className:"rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:ring-2 focus:ring-red-500"},e.createElement("option",{value:"pending"},"En attente"),e.createElement("option",{value:"reviewed"},"Examin"),e.createElement("option",{value:"resolved"},"Rsolu"),e.createElement("option",{value:"dismissed"},"Rejet")),ut===Oe._id&&e.createElement("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-red-200 border-t-red-600 mx-auto"}))))))))))}const IO={pending:"En attente",in_review:"En cours",resolved:"Rsolue"},zme={pending:"bg-orange-100 text-orange-800",in_review:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"},Bme=[{value:"",label:"Toutes"},{value:"pending",label:"En attente"},{value:"in_review",label:"En cours"},{value:"resolved",label:"Rsolues"}],qme=t=>t?new Date(t).toLocaleString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";function Ume(){const{user:t}=u.useContext(Sr),{showToast:r}=ms(),[a,n]=u.useState([]),[s,o]=u.useState(!1),[l,c]=u.useState(""),[m,p]=u.useState("pending"),[f,g]=u.useState(""),[b,x]=u.useState([]),[v,E]=u.useState(!1),[y,w]=u.useState(""),[k,C]=u.useState(!1),[A,S]=u.useState([]),[P,T]=u.useState(""),O=t?.role==="admin",R=u.useMemo(()=>"https://hdmarket-backend.onrender.com/api".replace(/\/api\/?$/,""),[]),D=u.useCallback(q=>{if(!q)return q;const Y=String(q).replace(/\\/g,"/");return/^https?:\/\//i.test(Y)?Y:`${R}/${Y.replace(/^\/+/,"")}`},[R]),$=u.useCallback(async()=>{o(!0),c("");try{const q=m?{status:m}:{},{data:Y}=await oe.get("/admin/complaints",{params:q}),L=(Array.isArray(Y)?Y:[]).map(Q=>({...Q,attachments:(Array.isArray(Q.attachments)?Q.attachments:[]).map(B=>({...B,url:D(B.path||B.url||"")}))}));n(L)}catch(q){c(q.response?.data?.message||q.message||"Erreur lors du chargement des rclamations.")}finally{o(!1)}},[m,D]),j=u.useCallback(async()=>{if(O){E(!0);try{const{data:q}=await oe.get("/admin/complaint-managers");x(q.managers||[])}catch(q){console.error("Load complaint managers error:",q)}finally{E(!1)}}},[O]);u.useEffect(()=>{$()},[$]),u.useEffect(()=>{j()},[j]);const K=u.useCallback(async(q,Y)=>{if(!(!q||!Y)){g(q);try{await oe.patch(`/admin/complaints/${q}/status`,{status:Y}),r("Statut de la rclamation mis  jour.",{variant:"success"}),await $()}catch(z){const L=z.response?.data?.message||z.message||"Impossible de mettre  jour le statut.";r(L,{variant:"error"})}finally{g("")}}},[$,r]),H=async()=>{if(y.trim()){C(!0);try{const{data:q}=await oe.get(`/admin/users?search=${encodeURIComponent(y.trim())}&limit=10`),Y=Array.isArray(q)?q:[];S(Y.filter(z=>z.role!=="admin"))}catch{S([])}finally{C(!1)}}},V=async q=>{if(q){T(q);try{const{data:Y}=await oe.patch(`/admin/complaint-managers/${q}/toggle`);r(Y.message||"Permission mise  jour.",{variant:"success"}),await j(),S([]),w("")}catch(Y){r(Y.response?.data?.message||"Erreur lors de la mise  jour.",{variant:"error"})}finally{T("")}}};return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20 lg:min-h-0 lg:bg-transparent"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8 sm:px-6 lg:px-8"},e.createElement("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between pb-6 border-b border-gray-200/60"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 shadow-lg"},e.createElement(Yt,{size:24,className:"text-white",strokeWidth:2.5})),e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Rclamations"),e.createElement("p",{className:"text-sm text-gray-600 mt-0.5"},"Consultez les plaintes et grez les responsables."))),e.createElement("button",{type:"button",onClick:$,disabled:s,className:"inline-flex items-center gap-2 rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50"},e.createElement(Cs,{size:16,className:s?"animate-spin":""}),"Actualiser")),O&&e.createElement("section",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(hi,{size:20,className:"text-indigo-600"}),"Responsables des rclamations"),e.createElement("p",{className:"text-sm text-gray-500 mb-4"},"Les utilisateurs ajouts ici pourront consulter et traiter les rclamations (changer le statut)."),e.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},e.createElement("input",{type:"text",placeholder:"Rechercher un utilisateur (nom, email, tlphone)...",value:y,onChange:q=>w(q.target.value),onKeyDown:q=>q.key==="Enter"&&H(),className:"flex-1 min-w-[200px] px-4 py-2.5 rounded-xl border border-gray-200 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),e.createElement("button",{type:"button",onClick:H,disabled:k||!y.trim(),className:"px-4 py-2.5 rounded-xl bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50 inline-flex items-center gap-2"},e.createElement(Tr,{size:18}),"Rechercher")),A.length>0&&e.createElement("div",{className:"mb-4 space-y-2"},e.createElement("p",{className:"text-xs font-semibold text-gray-500"},"Rsultats :"),A.map(q=>{const Y=q._id||q.id,z=b.some(L=>L.id===Y);return e.createElement("div",{key:Y,className:"flex items-center justify-between p-3 rounded-xl border border-gray-200 bg-gray-50"},e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900"},q.name),e.createElement("p",{className:"text-xs text-gray-500"},q.email,"  ",q.phone)),e.createElement("button",{type:"button",onClick:()=>V(Y),disabled:P===Y,className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold ${z?"bg-amber-100 text-amber-800 hover:bg-amber-200":"bg-indigo-600 text-white hover:bg-indigo-700"} disabled:opacity-50`},z?e.createElement(Go,{size:14}):e.createElement(hi,{size:14}),z?"Retirer":"Ajouter"))})),v?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement"):e.createElement("div",{className:"space-y-2"},e.createElement("p",{className:"text-xs font-semibold text-gray-500"},b.length," responsable",b.length!==1?"s":""),b.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucun responsable ajout. Recherchez un utilisateur ci-dessus."):e.createElement("ul",{className:"divide-y divide-gray-100"},b.map(q=>e.createElement("li",{key:q.id,className:"flex items-center justify-between py-2"},e.createElement("span",{className:"text-sm text-gray-700"},q.name,"  ",q.email),e.createElement("button",{type:"button",onClick:()=>V(q.id),disabled:P===q.id,className:"text-xs font-semibold text-amber-600 hover:text-amber-700"},"Retirer")))))),e.createElement("section",{className:"rounded-2xl border border-gray-200/60 bg-white p-6 shadow-sm"},e.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4"},e.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Liste des rclamations"),e.createElement("select",{value:m,onChange:q=>p(q.target.value),className:"rounded-xl border border-gray-200 px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},Bme.map(q=>e.createElement("option",{key:q.value,value:q.value},q.label)))),l&&e.createElement("div",{className:"rounded-xl bg-red-50 border border-red-200 p-4 flex items-center gap-3 text-red-800 text-sm"},e.createElement(Yt,{size:20}),l),s?e.createElement("div",{className:"py-12 flex justify-center"},e.createElement("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})):a.length===0?e.createElement("p",{className:"text-sm text-gray-500 py-8"},"Aucune rclamation pour ce filtre."):e.createElement("ul",{className:"space-y-4"},a.map(q=>e.createElement("li",{key:q._id,className:"rounded-2xl border border-gray-100 p-4 space-y-3"},e.createElement("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between"},e.createElement("div",null,e.createElement("p",{className:"font-semibold text-gray-900"},q.subject||"Sans objet"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},q.user?.name||"Anonyme","  ",q.user?.email||"","  ",q.user?.phone||""),e.createElement("p",{className:"text-xs text-gray-400"},qme(q.createdAt))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${zme[q.status]||"bg-gray-100 text-gray-600"}`},IO[q.status]||q.status),e.createElement("select",{value:q.status,onChange:Y=>K(q._id,Y.target.value),disabled:f===q._id,className:"rounded-lg border border-gray-200 px-3 py-1.5 text-xs focus:ring-2 focus:ring-indigo-500"},Object.entries(IO).map(([Y,z])=>e.createElement("option",{key:Y,value:Y},z))))),e.createElement("p",{className:"text-sm text-gray-600 whitespace-pre-line break-words"},q.message),q.attachments?.filter(Y=>Y.url).length>0&&e.createElement("div",{className:"flex flex-wrap gap-2"},q.attachments.filter(Y=>Y.url).map((Y,z)=>e.createElement("a",{key:z,href:Y.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-xs font-medium text-gray-600 hover:border-indigo-200"},e.createElement(pd,{size:14}),Y.originalName||Y.filename))),q.adminNote&&e.createElement("p",{className:"text-xs text-gray-500"},e.createElement("span",{className:"font-semibold text-gray-700"},"Note admin :")," ",q.adminNote)))))))}const Bw=t=>`${Number(t||0).toLocaleString("fr-FR")} FCFA`,ef=t=>{if(!t)return"";const r=new Date(t);return Number.isNaN(r.getTime())?"":r.toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},DO=t=>{if(!t)return"";const r=new Date(t);if(Number.isNaN(r.getTime()))return"";const a=n=>String(n).padStart(2,"0");return`${r.getFullYear()}-${a(r.getMonth()+1)}-${a(r.getDate())}T${a(r.getHours())}:${a(r.getMinutes())}`},FO={code:"",autoGenerate:!0,codePrefix:"",codeLength:8,discountType:"full_waiver",discountValue:100,usageLimit:10,startDate:"",endDate:"",isActive:!0,referralTag:"",isFlashPromo:!1,flashDurationHours:""};function Vme(){const[t,r]=u.useState([]),[a,n]=u.useState({page:1,pages:1,total:0}),[s,o]=u.useState(null),[l,c]=u.useState([]),[m,p]=u.useState(!1),[f,g]=u.useState(!1),[b,x]=u.useState(!1),[v,E]=u.useState(""),[y,w]=u.useState(""),[k,C]=u.useState("all"),[A,S]=u.useState(""),[P,T]=u.useState(1),[O,R]=u.useState(""),[D,$]=u.useState(FO),j=!!O,K=u.useCallback(()=>{const te={code:D.code?.trim()||void 0,autoGenerate:!!D.autoGenerate,codePrefix:D.codePrefix?.trim()||void 0,codeLength:Number(D.codeLength||8),discountType:D.discountType,discountValue:D.discountType==="full_waiver"?100:Math.max(0,Math.min(100,Number(D.discountValue||0))),usageLimit:Math.max(1,Number(D.usageLimit||1)),startDate:D.startDate,endDate:D.endDate||null,isActive:!!D.isActive,referralTag:D.referralTag?.trim()||"",isFlashPromo:!!D.isFlashPromo,flashDurationHours:D.flashDurationHours?Number(D.flashDurationHours):null};return j&&(delete te.autoGenerate,delete te.codePrefix,delete te.codeLength),te},[D,j]),H=u.useCallback(async()=>{p(!0),E("");try{const te=new URLSearchParams;te.set("page",String(P)),te.set("limit","20"),te.set("status",k),A.trim()&&te.set("search",A.trim());const{data:ge}=await oe.get(`/admin/promo-codes?${te.toString()}`);r(Array.isArray(ge?.items)?ge.items:[]),n(ge?.pagination||{page:1,pages:1,total:0})}catch(te){E(te.response?.data?.message||te.message||"Impossible de charger les codes promo."),r([])}finally{p(!1)}},[P,A,k]),V=u.useCallback(async()=>{g(!0);try{const[te,ge]=await Promise.all([oe.get("/admin/promo-codes/analytics"),oe.get("/admin/promo-codes/usage?limit=10")]);o(te.data||null),c(Array.isArray(ge.data?.items)?ge.data.items:[])}catch{o(null),c([])}finally{g(!1)}},[]);u.useEffect(()=>{H()},[H]),u.useEffect(()=>{V()},[V]),u.useEffect(()=>{T(1)},[k]);const q=()=>{R(""),$(FO)},Y=async()=>{try{const{data:te}=await oe.post("/admin/promo-codes/generate",{prefix:D.codePrefix,length:Number(D.codeLength||8)});$(ge=>({...ge,code:te?.code||"",autoGenerate:!1}))}catch(te){E(te.response?.data?.message||te.message||"Impossible de gnrer un code.")}},z=async te=>{te.preventDefault(),x(!0),E(""),w("");try{const ge=K();if(j){const{data:ue}=await oe.patch(`/admin/promo-codes/${O}`,ge);w(ue?.message||"Code promo mis  jour.")}else{const{data:ue}=await oe.post("/admin/promo-codes",ge);w(ue?.message||"Code promo cr.")}q(),await Promise.all([H(),V()])}catch(ge){E(ge.response?.data?.message||ge.message||"Impossible denregistrer le code promo.")}finally{x(!1)}},L=te=>{R(te.id||te._id),$({code:te.code||"",autoGenerate:!1,codePrefix:"",codeLength:8,discountType:te.discountType||"full_waiver",discountValue:Number(te.discountValue||100),usageLimit:Number(te.usageLimit||1),startDate:DO(te.startDate),endDate:DO(te.endDate),isActive:!!te.isActive,referralTag:te.referralTag||"",isFlashPromo:!!te.isFlashPromo,flashDurationHours:te.flashDurationHours||""}),window.scrollTo({top:0,behavior:"smooth"})},Q=async te=>{try{await oe.patch(`/admin/promo-codes/${te.id||te._id}/toggle`,{isActive:!te.isActive}),await Promise.all([H(),V()])}catch(ge){E(ge.response?.data?.message||ge.message||"Impossible de changer le statut.")}},B=s?.overview||{},ae=u.useMemo(()=>s?.topCodes||[],[s]);return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50/30"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-6"},e.createElement("header",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-black text-gray-900 flex items-center gap-3"},e.createElement(w2,{className:"w-8 h-8 text-indigo-600"}),"Codes Promo Commission"),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},"Administration des exonrations de commission (3%) pour validation des produits.")),e.createElement("button",{type:"button",onClick:()=>{H(),V()},className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50"},e.createElement(Cs,{className:"w-4 h-4"}),"Rafrachir")),(v||y)&&e.createElement("div",{className:"space-y-2"},v&&e.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700"},v),y&&e.createElement("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm text-emerald-700"},y)),e.createElement("section",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-3"},e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-white p-4"},e.createElement("p",{className:"text-xs text-gray-500"},"Total codes"),e.createElement("p",{className:"text-2xl font-bold text-gray-900"},Number(B.totalCodes||0).toLocaleString("fr-FR"))),e.createElement("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 p-4"},e.createElement("p",{className:"text-xs text-emerald-600"},"Codes actifs"),e.createElement("p",{className:"text-2xl font-bold text-emerald-700"},Number(B.activeCodes||0).toLocaleString("fr-FR"))),e.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-4"},e.createElement("p",{className:"text-xs text-amber-700"},"Flash promos"),e.createElement("p",{className:"text-2xl font-bold text-amber-800"},Number(B.flashPromoCodes||0).toLocaleString("fr-FR"))),e.createElement("div",{className:"rounded-2xl border border-blue-200 bg-blue-50 p-4"},e.createElement("p",{className:"text-xs text-blue-700"},"Utilisations (30j)"),e.createElement("p",{className:"text-2xl font-bold text-blue-800"},Number(B.usageLast30Days||0).toLocaleString("fr-FR"))),e.createElement("div",{className:"rounded-2xl border border-indigo-200 bg-indigo-50 p-4"},e.createElement("p",{className:"text-xs text-indigo-700"},"Commission annule"),e.createElement("p",{className:"text-xl font-bold text-indigo-800"},Bw(B.totalCommissionWaived||0))),e.createElement("div",{className:"rounded-2xl border border-purple-200 bg-purple-50 p-4"},e.createElement("p",{className:"text-xs text-purple-700"},"Acquisition nouveaux vendeurs"),e.createElement("p",{className:"text-xl font-bold text-purple-800"},Number(B.newSellerAcquisitionRate||0).toLocaleString("fr-FR"),"%"))),e.createElement("section",{className:"rounded-2xl border border-gray-200 bg-white p-5"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(Bo,{className:"w-5 h-5 text-indigo-600"}),j?"Modifier le code promo":"Crer un code promo"),e.createElement("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4"},e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Code"),e.createElement("input",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.code,onChange:te=>$(ge=>({...ge,code:te.target.value.toUpperCase()})),disabled:!j&&D.autoGenerate,placeholder:"FIRST10"})),!j&&e.createElement(e.Fragment,null,e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Prfixe auto"),e.createElement("input",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.codePrefix,onChange:te=>$(ge=>({...ge,codePrefix:te.target.value.toUpperCase()})),placeholder:"NEW"})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Longueur auto"),e.createElement("input",{type:"number",min:4,max:16,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.codeLength,onChange:te=>$(ge=>({...ge,codeLength:te.target.value}))})),e.createElement("div",{className:"space-y-1 flex items-end"},e.createElement("button",{type:"button",onClick:Y,className:"w-full rounded-xl border border-indigo-200 bg-indigo-50 px-3 py-2 text-sm font-semibold text-indigo-700 hover:bg-indigo-100"},"Gnrer un code"))),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Type de rduction"),e.createElement("select",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.discountType,onChange:te=>$(ge=>({...ge,discountType:te.target.value,discountValue:te.target.value==="full_waiver"?100:ge.discountValue}))},e.createElement("option",{value:"full_waiver"},"Exonration totale"),e.createElement("option",{value:"percentage"},"Rduction (%)"))),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Valeur rduction (%)"),e.createElement("input",{type:"number",min:0,max:100,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.discountType==="full_waiver"?100:D.discountValue,onChange:te=>$(ge=>({...ge,discountValue:te.target.value})),disabled:D.discountType==="full_waiver"})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Limite dutilisation"),e.createElement("input",{type:"number",min:1,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.usageLimit,onChange:te=>$(ge=>({...ge,usageLimit:te.target.value}))})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Dbut"),e.createElement("input",{type:"datetime-local",className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.startDate,onChange:te=>$(ge=>({...ge,startDate:te.target.value})),required:!0})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Fin"),e.createElement("input",{type:"datetime-local",className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.endDate,onChange:te=>$(ge=>({...ge,endDate:te.target.value}))})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Tag referral"),e.createElement("input",{className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.referralTag,onChange:te=>$(ge=>({...ge,referralTag:te.target.value})),placeholder:"affiliate-camp-2026"})),e.createElement("div",{className:"space-y-1"},e.createElement("label",{className:"text-xs font-semibold text-gray-600"},"Flash promo (heures)"),e.createElement("input",{type:"number",min:1,max:720,className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm",value:D.flashDurationHours,onChange:te=>$(ge=>({...ge,flashDurationHours:te.target.value,isFlashPromo:!!te.target.value})),placeholder:"24"})),e.createElement("div",{className:"md:col-span-2 xl:col-span-4 flex flex-wrap items-center gap-3 pt-2"},e.createElement("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700"},e.createElement("input",{type:"checkbox",checked:D.autoGenerate,disabled:j,onChange:te=>$(ge=>({...ge,autoGenerate:te.target.checked}))}),"Gnrer automatiquement le code"),e.createElement("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700"},e.createElement("input",{type:"checkbox",checked:D.isActive,onChange:te=>$(ge=>({...ge,isActive:te.target.checked}))}),"Actif"),e.createElement("button",{type:"submit",disabled:b,className:"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700 disabled:opacity-50"},e.createElement(Ga,{className:"w-4 h-4"}),b?"Enregistrement...":j?"Mettre  jour":"Crer le code"),j&&e.createElement("button",{type:"button",onClick:q,className:"rounded-xl border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50"},"Annuler")))),e.createElement("section",{className:"rounded-2xl border border-gray-200 bg-white p-5"},e.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2"},e.createElement(Tr,{className:"w-5 h-5 text-indigo-600"}),"Liste des codes promo"),e.createElement("div",{className:"flex gap-2"},e.createElement("select",{className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",value:k,onChange:te=>C(te.target.value)},e.createElement("option",{value:"all"},"Tous"),e.createElement("option",{value:"active"},"Actifs"),e.createElement("option",{value:"inactive"},"Inactifs"),e.createElement("option",{value:"expired"},"Expirs"),e.createElement("option",{value:"upcoming"}," venir")),e.createElement("input",{className:"rounded-xl border border-gray-200 px-3 py-2 text-sm",placeholder:"Rechercher un code",value:A,onChange:te=>S(te.target.value)}))),m?e.createElement("div",{className:"py-8 text-center text-sm text-gray-500"},"Chargement des codes promo..."):t.length===0?e.createElement("div",{className:"py-8 text-center text-sm text-gray-500"},"Aucun code promo trouv."):e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"min-w-full text-sm"},e.createElement("thead",null,e.createElement("tr",{className:"text-left text-gray-500 border-b border-gray-200"},e.createElement("th",{className:"py-2 pr-3"},"Code"),e.createElement("th",{className:"py-2 pr-3"},"Rduction"),e.createElement("th",{className:"py-2 pr-3"},"Usage"),e.createElement("th",{className:"py-2 pr-3"},"Priode"),e.createElement("th",{className:"py-2 pr-3"},"Statut"),e.createElement("th",{className:"py-2 pr-3"},"Actions"))),e.createElement("tbody",null,t.map(te=>e.createElement("tr",{key:te.id||te._id,className:"border-b border-gray-100"},e.createElement("td",{className:"py-3 pr-3 font-semibold text-gray-900"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("span",null,te.code),te.isFlashPromo&&e.createElement(Ln,{className:"w-4 h-4 text-amber-500"})),te.referralTag&&e.createElement("p",{className:"text-xs text-gray-500"},te.referralTag)),e.createElement("td",{className:"py-3 pr-3"},te.discountType==="full_waiver"?"Exonration totale":`${Number(te.discountValue||0).toLocaleString("fr-FR")}%`),e.createElement("td",{className:"py-3 pr-3"},Number(te.usedCount||0).toLocaleString("fr-FR")," / ",Number(te.usageLimit||0).toLocaleString("fr-FR")),e.createElement("td",{className:"py-3 pr-3"},e.createElement("p",null,ef(te.startDate)),e.createElement("p",{className:"text-xs text-gray-500"},"au ",ef(te.endDate))),e.createElement("td",{className:"py-3 pr-3"},e.createElement("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-semibold ${te.isActive&&!te.isExpired?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700"}`},te.isActive&&!te.isExpired?e.createElement(ar,{className:"w-3.5 h-3.5"}):e.createElement(Ba,{className:"w-3.5 h-3.5"}),te.isActive&&!te.isExpired?"Actif":"Inactif")),e.createElement("td",{className:"py-3 pr-3"},e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("button",{type:"button",onClick:()=>L(te),className:"rounded-lg border border-gray-200 px-2.5 py-1.5 text-xs font-semibold text-gray-700 hover:bg-gray-50"},"Modifier"),e.createElement("button",{type:"button",onClick:()=>Q(te),className:"rounded-lg border border-indigo-200 bg-indigo-50 px-2.5 py-1.5 text-xs font-semibold text-indigo-700 hover:bg-indigo-100"},te.isActive?"Dsactiver":"Activer")))))))),e.createElement("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600"},e.createElement("p",null,Number(a.total||0).toLocaleString("fr-FR")," code(s) promo"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{type:"button",onClick:()=>T(te=>Math.max(1,te-1)),disabled:P<=1,className:"rounded-lg border border-gray-200 px-3 py-1.5 disabled:opacity-50"},"Prcdent"),e.createElement("span",null,"Page ",P," / ",Math.max(1,Number(a.pages||1))),e.createElement("button",{type:"button",onClick:()=>T(te=>Math.min(Number(a.pages||1),te+1)),disabled:P>=Number(a.pages||1),className:"rounded-lg border border-gray-200 px-3 py-1.5 disabled:opacity-50"},"Suivant")))),e.createElement("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5"},e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-white p-5"},e.createElement("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2 mb-3"},e.createElement(mn,{className:"w-5 h-5 text-indigo-600"}),"Top performances"),f?e.createElement("p",{className:"text-sm text-gray-500"},"Chargement analytics..."):ae.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune donne de performance pour le moment."):e.createElement("div",{className:"space-y-3"},ae.map(te=>e.createElement("div",{key:te.promoCodeId,className:"rounded-xl border border-gray-100 bg-gray-50 px-3 py-2"},e.createElement("div",{className:"flex items-center justify-between gap-3"},e.createElement("p",{className:"font-semibold text-gray-900"},te.code||"Code supprim"),e.createElement("p",{className:"text-xs text-gray-500"},Number(te.usageRate||0).toLocaleString("fr-FR"),"% utilis")),e.createElement("div",{className:"mt-1 text-xs text-gray-600 flex flex-wrap gap-x-3 gap-y-1"},e.createElement("span",null,"Usages: ",Number(te.usageCount||0).toLocaleString("fr-FR")),e.createElement("span",null,"Annul: ",Bw(te.commissionDiscounted||0)),e.createElement("span",null,"Dernier usage: ",ef(te.lastUsedAt))))))),e.createElement("div",{className:"rounded-2xl border border-gray-200 bg-white p-5"},e.createElement("h3",{className:"text-base font-bold text-gray-900 mb-3"},"Dernires utilisations"),l.length===0?e.createElement("p",{className:"text-sm text-gray-500"},"Aucune utilisation rcente."):e.createElement("div",{className:"space-y-3"},l.map(te=>e.createElement("div",{key:te._id,className:"rounded-xl border border-gray-100 bg-gray-50 px-3 py-2 text-sm"},e.createElement("div",{className:"flex items-center justify-between gap-2"},e.createElement("p",{className:"font-semibold text-gray-900"},te.promoCode?.code||te.codeSnapshot),e.createElement("p",{className:"text-xs text-gray-500"},ef(te.createdAt))),e.createElement("p",{className:"text-xs text-gray-600 mt-1"},"Vendeur: ",te.seller?.name||"","  Produit: ",te.product?.title||""),e.createElement("p",{className:"text-xs text-emerald-700 mt-1"},"Commission annule: ",Bw(te.discountAmount||0)))))))))}const Hme=[{to:"/admin",end:!0,label:"Tableau de bord",icon:SB,show:t=>t?.role==="admin"||t?.role==="manager"},{to:"/admin/orders",label:"Commandes",icon:ea,show:t=>t?.role==="admin"||t?.role==="manager"},{to:"/admin/payments",label:"Paiements",icon:Ea,show:t=>t?.role==="admin"||t?.role==="manager"},{to:"/admin/users",label:"Utilisateurs",icon:tn,show:t=>t?.role==="admin"},{to:"/admin/products",label:"Produits",icon:Ft,show:t=>t?.role==="admin"||t?.role==="manager"||t?.canManageProducts},{to:"/admin/delivery-guys",label:"Livreurs",icon:Kr,show:t=>t?.role==="admin"||t?.role==="manager"||t?.canManageDelivery},{to:"/admin/complaints",label:"Rclamations",icon:Yt,show:t=>t?.role==="admin"||t?.role==="manager"||t?.canManageComplaints},{to:"/admin/chat-templates",label:"Chat templates",icon:ca,show:t=>t?.role==="admin"},{to:"/admin/promo-codes",label:"Codes promo",icon:w2,show:t=>t?.role==="admin"},{to:"/admin/settings",label:"Paramtres app",icon:Nu,show:t=>t?.role==="admin"},{to:"/admin/feedback",label:"Avis amlioration",icon:ca,show:t=>t?.role==="admin"||t?.canReadFeedback},{to:"/admin/payment-verification",label:"Vrifier paiements",icon:ar,show:t=>t?.role==="admin"||t?.canVerifyPayments},{to:"/admin/product-boosts",label:"Boost produits",icon:ba,show:t=>t?.role==="admin"||t?.canManageBoosts},{to:"/admin/payment-verifiers",label:"Vrificateurs",icon:pa,show:t=>t?.role==="admin"},{to:"/admin/reports",label:"Rapports",icon:Pn,show:t=>t?.role==="admin"}];function Wme(){const{user:t}=u.useContext(Sr),[r,a]=u.useState(!1),n=t?.role==="manager",s=Hme.filter(o=>o.show(t));return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20 flex lg:h-[calc(100vh-5rem)] lg:min-h-0 lg:overflow-hidden"},e.createElement("aside",{className:`hidden lg:flex lg:h-full flex-col border-r border-gray-200/80 bg-white/90 backdrop-blur-sm shrink-0 transition-[width] duration-200 ${r?"w-[72px]":"w-64"}`},e.createElement("div",{className:"flex flex-col h-full pt-6 pb-4"},e.createElement("div",{className:`flex items-center px-3 ${r?"justify-center":"justify-between"} mb-4`},!r&&e.createElement("div",{className:"flex items-center gap-2 min-w-0"},e.createElement("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shrink-0"},e.createElement(mn,{size:18,className:"text-white"})),e.createElement("span",{className:"font-bold text-gray-900 truncate text-sm"},n?"Gestion":"Admin")),e.createElement("button",{type:"button",onClick:()=>a(o=>!o),className:"p-1.5 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700","aria-label":r?"Ouvrir le menu":"Rduire le menu"},r?e.createElement(Ar,{size:18}):e.createElement(xu,{size:18}))),e.createElement("nav",{className:"flex-1 overflow-y-auto overscroll-contain px-2 space-y-0.5"},s.map(o=>{const l=o.icon;return e.createElement($r,{key:o.to,to:o.to,end:o.end??!1,className:({isActive:c})=>`flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition-colors ${c?"bg-indigo-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"} ${r?"justify-center":""}`},e.createElement(l,{size:20,className:"shrink-0"}),!r&&e.createElement("span",{className:"truncate"},o.label))})))),e.createElement("main",{className:"flex-1 min-w-0 lg:h-full lg:overflow-y-auto"},e.createElement(u8,null)))}const Gme=12;function Kme(){const t=wa(),[r,a]=u.useState([]),[n,s]=u.useState(!1),[o,l]=u.useState(""),[c,m]=u.useState(1),[p,f]=u.useState(1),g=async()=>{s(!0),l("");try{const{data:b}=await oe.get("/products/public",{params:{certified:!0,sort:"new",limit:Gme,page:c}}),v=(Array.isArray(b?.items)?b.items:Array.isArray(b)?b:[]).filter(E=>E?.certified);a(v),f(b?.pagination?.pages||1)}catch(b){console.error("Erreur chargement certifis",b),l(b.response?.data?.message||b.message||"Impossible de charger les produits certifis.")}finally{s(!1)}};return u.useEffect(()=>{g()},[c]),e.createElement("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 space-y-4 sm:space-y-8 pb-8"},e.createElement("header",{className:"space-y-2"},e.createElement("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 mb-4 text-sm font-semibold text-gray-600 hover:text-indigo-600 transition-colors"},e.createElement(Gr,{className:"w-4 h-4"}),"Retour"),e.createElement("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900"},"Produits certifis"),e.createElement("p",{className:"text-xs sm:text-sm text-gray-500"},"Toutes les annonces approuves par nos quipes certifies HDMarket.")),o&&e.createElement("p",{className:"text-sm text-red-600"},o),n?e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4"},Array.from({length:8}).map((b,x)=>e.createElement("div",{key:x,className:"rounded-2xl border border-gray-100 bg-white p-2 sm:p-4 shadow-sm"},e.createElement("div",{className:"h-32 rounded-xl bg-gray-100 animate-pulse"}),e.createElement("div",{className:"mt-2 sm:mt-3 space-y-1.5 sm:space-y-2"},e.createElement("div",{className:"h-3 rounded bg-gray-100 animate-pulse"}),e.createElement("div",{className:"h-3 w-24 rounded bg-gray-100 animate-pulse"}))))):r.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4"},r.map(b=>e.createElement(un,{key:b._id,p:b}))),e.createElement("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-gray-100 bg-white px-4 py-3 text-xs text-gray-500"},e.createElement("span",null,"Page ",c," / ",p),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>m(b=>Math.max(1,b-1)),disabled:c<=1,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>m(b=>Math.min(p,b+1)),disabled:c>=p,className:"rounded-full border border-gray-200 px-3 py-1 font-semibold text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50"},"Suivant")))):e.createElement("p",{className:"text-sm text-gray-500"},"Aucun produit certifi nest disponible pour le moment. Revenez plus tard."))}const qw=12,Yme=4,Xme=t=>new Set(t.map(r=>String(r?.id)).filter(Boolean)),Uw=t=>{const r=Number(t);return!Number.isFinite(r)||r<0?"0":r.toLocaleString("fr-FR")},Qme={lectronique:"lectronique","Mode & Accessoires":"Mode","Maison & Jardin":"Maison",Vhicules:"Vhicules","Sports & Loisirs":"Sports",Services:"Services",Autre:"Autre"};function Jme(){const t=rs();cs();const{user:r}=u.useContext(Sr),[a,n]=u.useState([]),[s,o]=u.useState([]),[l,c]=u.useState(!1),[m,p]=u.useState(""),[f,g]=u.useState({}),[b,x]=u.useState({}),[v,E]=u.useState(!0),[y,w]=u.useState(!1);u.useEffect(()=>{let O=!0;return(async()=>{if(!r){O&&n(Ki());return}try{const D=await tC();O&&n(D.length?D:Ki())}catch{O&&n(Ki())}})(),()=>{O=!1}},[r]);const k=u.useMemo(()=>wU(a,Yme),[a]),C=u.useMemo(()=>Xme(a),[a]),A=r?._id||r?.id||null;u.useEffect(()=>{o([]),p(""),g({}),x({}),E(k.length>0)},[k]);const S=u.useCallback(async()=>{if(l||!v||!k.length)return;c(!0),p("");const O=new Set(s.map(K=>String(K?._id))),R={...f},D={...b},$=[];for(const K of k){if($.length>=qw)break;if(D[K])continue;const H=R[K]||1;try{const{data:V}=await oe.get("/products/public",{params:{category:K,page:H,limit:qw,sort:"new"}}),q=Array.isArray(V)?V:V?.items||[],Y=Array.isArray(V)?1:V?.pagination?.pages||1;q.forEach(z=>{if($.length>=qw||!z?._id)return;const L=String(z._id),Q=z.user?._id||z.user?.id||z.user;A&&Q&&String(Q)===String(A)||C.has(L)||O.has(L)||$.some(B=>String(B._id)===L)||$.push(z)}),H>=Y?D[K]=!0:R[K]=H+1}catch(V){p(V.response?.data?.message||V.message||"Erreur de chargement.");break}}o(K=>[...K,...$]),g(R),x(D),k.some(K=>!D[K])||E(!1),c(!1)},[l,v,k,s,f,b,C,A]);u.useEffect(()=>{k.length&&S()},[k,S]),u.useEffect(()=>{if(!t||l||!v)return;const O=()=>{window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&S()};return window.addEventListener("scroll",O,{passive:!0}),()=>window.removeEventListener("scroll",O)},[t,l,v,S]);const P=async()=>{if(w(!0),o([]),g({}),x({}),E(!0),p(""),r)try{const O=await tC();n(O.length?O:Ki())}catch{n(Ki())}else n(Ki());w(!1)},T=u.useMemo(()=>{const O={};return k.forEach(R=>{const D=s.filter($=>$.category===R);O[R]=D.length}),O},[k,s]);return l&&s.length===0?e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-12"},e.createElement("div",{className:"space-y-8"},e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"h-8 bg-gray-200 rounded-xl w-64 animate-pulse"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded-lg w-96 animate-pulse"})),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},[1,2,3,4,5,6,7,8].map(O=>e.createElement("div",{key:O,className:"h-80 bg-white rounded-2xl border border-gray-100 animate-pulse"})))))):e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"bg-indigo-600 text-white"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},e.createElement("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between"},e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(ba,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("p",{className:"text-sm font-medium text-white/80 uppercase tracking-wide"},"Suggestions personnalises"),e.createElement("h1",{className:"text-3xl font-bold"},"Dcouvrez pour vous"))),e.createElement("p",{className:"text-white/90 text-sm max-w-2xl"},"Des produits slectionns spcialement pour vous, bass sur vos recherches et consultations rcentes.")),e.createElement("button",{type:"button",onClick:P,disabled:y||l,className:"inline-flex items-center gap-2 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-2.5 text-sm font-semibold text-white hover:bg-white/20 transition-all disabled:opacity-50"},e.createElement(Cs,{className:`w-4 h-4 ${y?"animate-spin":""}`}),"Actualiser")))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 pb-12"},a.length>0&&e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-indigo-600"},e.createElement(Jn,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Uw(a.length))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Produits consults"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Vos vues rcentes")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-purple-600"},e.createElement(xN,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Uw(k.length))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Catgories prfres"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Bas sur vos intrts")),e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",{className:"p-3 rounded-xl bg-emerald-600"},e.createElement(ws,{className:"w-5 h-5 text-white"})),e.createElement("span",{className:"text-2xl font-bold text-gray-900"},Uw(s.length))),e.createElement("p",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide"},"Suggestions"),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Produits recommands"))),k.length>0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 mb-8"},e.createElement("div",{className:"flex items-center gap-2 mb-3"},e.createElement(ls,{className:"w-4 h-4 text-gray-500"}),e.createElement("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide"},"Catgories suggres")),e.createElement("div",{className:"flex flex-wrap gap-2"},k.map(O=>e.createElement("div",{key:O,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-50 border border-indigo-200"},e.createElement(Pr,{className:"w-4 h-4 text-indigo-600"}),e.createElement("span",{className:"text-sm font-semibold text-indigo-700"},Qme[O]||O),T[O]>0&&e.createElement("span",{className:"px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700 text-xs font-bold"},T[O]))))),m&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 mb-8"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(Yt,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-bold text-red-800 mb-1"},"Erreur de chargement"),e.createElement("p",{className:"text-sm text-red-600"},m)))),!k.length&&!l&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-indigo-100 flex items-center justify-center mb-4"},e.createElement(Tr,{className:"w-10 h-10 text-indigo-600"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucune suggestion disponible"),e.createElement("p",{className:"text-sm text-gray-500 mb-6 max-w-md mx-auto"},"Consultez quelques produits pour obtenir des suggestions personnalises bases sur vos intrts."),e.createElement("div",{className:"flex flex-wrap gap-3 justify-center"},e.createElement(ye,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all"},e.createElement(ws,{className:"w-4 h-4"}),"Explorer les produits"),e.createElement(ye,{to:"/shops/verified",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl border-2 border-indigo-200 bg-white text-indigo-600 font-semibold hover:bg-indigo-50 transition-all"},e.createElement(ko,{className:"w-4 h-4"}),"Boutiques vrifies"))),!l&&s.length===0&&k.length>0&&e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement("div",{className:"mx-auto w-20 h-20 rounded-2xl bg-amber-100 flex items-center justify-center mb-4"},e.createElement(Ln,{className:"w-10 h-10 text-amber-600"})),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucune suggestion disponible"),e.createElement("p",{className:"text-sm text-gray-500 mb-6 max-w-md mx-auto"},"Nous avons analys vos prfrences, mais aucun nouveau produit ne correspond  vos critres pour le moment."),e.createElement("button",{type:"button",onClick:P,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all"},e.createElement(Cs,{className:"w-4 h-4"}),"Actualiser les suggestions")),s.length>0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center justify-between mb-6"},e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Produits recommands"),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},s.length," produit",s.length>1?"s":""," suggr",s.length>1?"s":""," pour vous"))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},s.map(O=>e.createElement(un,{key:O._id,p:O})))),l&&s.length>0&&e.createElement("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},[1,2,3,4].map(O=>e.createElement("div",{key:O,className:"h-80 bg-white rounded-2xl border border-gray-100 animate-pulse"}))),!t&&v&&!l&&s.length>0&&e.createElement("div",{className:"mt-8 text-center"},e.createElement("button",{type:"button",onClick:S,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow-lg hover:shadow-xl transition-all"},e.createElement(dj,{className:"w-4 h-4"}),"Charger plus de suggestions")),!v&&s.length>0&&e.createElement("div",{className:"mt-8 text-center"},e.createElement("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-100 text-gray-600 text-sm"},e.createElement(ar,{className:"w-4 h-4"}),e.createElement("span",null,"Toutes les suggestions ont t charges")))))}const Zme=["Brazzaville","Pointe-Noire","Ouesso","Oyo"],eue=[{value:"new",label:"Neuf"},{value:"used",label:"Occasion"}],tue=[{value:"new",label:"Plus rcents"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix dcroissant"},{value:"discount",label:"Meilleures remises"}],rue=12;function aue(){const{showToast:t}=ms();wa();const[r,a]=bi(),[n,s]=u.useState(r.get("q")||""),[o,l]=u.useState(r.get("category")||""),[c,m]=u.useState(r.get("city")||""),[p,f]=u.useState(r.get("condition")||""),[g,b]=u.useState(r.get("minPrice")||""),[x,v]=u.useState(r.get("maxPrice")||""),[E,y]=u.useState(r.get("certified")||""),[w,k]=u.useState(r.get("shopVerified")||""),[C,A]=u.useState(r.get("hasDiscount")==="true"),[S,P]=u.useState(r.get("minRating")||""),[T,O]=u.useState(r.get("minFavorites")||""),[R,D]=u.useState(r.get("minSales")||""),[$,j]=u.useState(r.get("sort")||"new"),[K,H]=u.useState(Number(r.get("page"))||1),[V,q]=u.useState(!1),[Y,z]=u.useState({basic:!0,price:!1,quality:!1,location:!1}),[L,Q]=u.useState([]),[B,ae]=u.useState(!1),[te,ge]=u.useState(""),[ue,Ee]=u.useState(1),[fe,re]=u.useState(0),U=u.useCallback(()=>{const be=new URLSearchParams;return n&&be.set("q",n),o&&be.set("category",o),c&&be.set("city",c),p&&be.set("condition",p),g&&be.set("minPrice",g),x&&be.set("maxPrice",x),E&&be.set("certified",E),w&&be.set("shopVerified",w),C&&be.set("hasDiscount","true"),S&&be.set("minRating",S),T&&be.set("minFavorites",T),R&&be.set("minSales",R),$&&be.set("sort",$),K>1&&be.set("page",String(K)),be},[n,o,c,p,g,x,E,w,C,S,T,R,$,K]);u.useEffect(()=>{const be=U();a(be,{replace:!0})},[U,a]);const W=u.useCallback(async()=>{ae(!0),ge("");try{const be=U();be.delete("page");const J={};be.forEach((At,He)=>{He!=="page"&&(J[He]=At)}),J.page=K,J.limit=rue;const{data:Ge}=await oe.get("/products/public",{params:J}),je=Array.isArray(Ge)?Ge:Ge?.items||[],tt=Ge?.pagination||{};Q(je),re(tt.total||je.length),Ee(Math.max(1,Number(tt.pages)||1))}catch(be){ge(be.response?.data?.message||be.message||"Impossible de charger les produits."),t("Erreur lors de la recherche",{variant:"error"})}finally{ae(!1)}},[U,K,t]);u.useEffect(()=>{W()},[W]);const me=u.useMemo(()=>{let be=0;return n&&be++,o&&be++,c&&be++,p&&be++,(g||x)&&be++,E&&be++,w&&be++,C&&be++,S&&be++,T&&be++,R&&be++,be},[n,o,c,p,g,x,E,w,C,S,T,R]),ne=()=>{s(""),l(""),m(""),f(""),b(""),v(""),y(""),k(""),A(!1),P(""),O(""),D(""),j("new"),H(1)},ee=be=>{z(J=>({...J,[be]:!J[be]}))},ve=({title:be,icon:J,section:Ge,children:je})=>{const tt=Y[Ge];return e.createElement("div",{className:"border-b border-gray-200 last:border-b-0"},e.createElement("button",{type:"button",onClick:()=>ee(Ge),className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 transition-colors"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(J,{className:"w-4 h-4 text-gray-500"}),e.createElement("span",{className:"font-semibold text-gray-900"},be)),tt?e.createElement(wo,{className:"w-4 h-4 text-gray-500"}):e.createElement(Za,{className:"w-4 h-4 text-gray-500"})),tt&&e.createElement("div",{className:"px-4 pb-4 space-y-3"},je))};return e.createElement("div",{className:"min-h-screen bg-gray-50"},e.createElement("div",{className:"bg-indigo-600 text-white"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},e.createElement("div",{className:"flex items-center gap-3 mb-6"},e.createElement("div",{className:"p-3 rounded-xl bg-white/20 backdrop-blur-sm"},e.createElement(Tr,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("h1",{className:"text-3xl font-bold"},"Recherche avance"),e.createElement("p",{className:"text-white/90 text-sm mt-1"},"Trouvez exactement ce que vous cherchez avec nos filtres avancs"))),e.createElement("div",{className:"relative"},e.createElement(Tr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.createElement("input",{type:"text",value:n,onChange:be=>{s(be.target.value),H(1)},placeholder:"Rechercher un produit...",className:"w-full pl-12 pr-4 py-4 rounded-xl bg-white text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white/50 shadow-lg"})))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},e.createElement("div",{className:"flex flex-col lg:flex-row gap-6"},e.createElement("aside",{className:`lg:w-80 flex-shrink-0 ${V?"block":"hidden lg:block"}`},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm sticky top-4"},e.createElement("div",{className:"p-4 border-b border-gray-200"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2"},e.createElement(Nu,{className:"w-5 h-5"}),"Filtres"),me>0&&e.createElement("button",{type:"button",onClick:ne,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700"},"Tout effacer")),me>0&&e.createElement("p",{className:"text-xs text-gray-500"},me," filtre",me>1?"s":""," actif",me>1?"s":"")),e.createElement("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto"},e.createElement(ve,{title:"Catgorie",icon:Wa,section:"basic"},e.createElement("select",{value:o,onChange:be=>{l(be.target.value),H(1)},className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e.createElement("option",{value:""},"Toutes les catgories"),to.map(be=>e.createElement("optgroup",{key:be.id,label:be.label},be.options.map(J=>e.createElement("option",{key:J.value,value:J.value},J.label)))))),e.createElement(ve,{title:"Prix",icon:Ea,section:"price"},e.createElement("div",{className:"grid grid-cols-2 gap-2"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-1"},"Min (FCFA)"),e.createElement("input",{type:"number",value:g,onChange:be=>{b(be.target.value),H(1)},placeholder:"0",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-1"},"Max (FCFA)"),e.createElement("input",{type:"number",value:x,onChange:be=>{v(be.target.value),H(1)},placeholder:"",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})))),e.createElement(ve,{title:"Qualit & Options",icon:ba,section:"quality"},e.createElement("div",{className:"space-y-3"},e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-2"},"tat"),e.createElement("div",{className:"space-y-2"},eue.map(be=>e.createElement("label",{key:be.value,className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"radio",name:"condition",value:be.value,checked:p===be.value,onChange:J=>{f(J.target.value),H(1)},className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),e.createElement("span",{className:"text-sm text-gray-700"},be.label))),e.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"radio",name:"condition",value:"",checked:p==="",onChange:()=>{f(""),H(1)},className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"}),e.createElement("span",{className:"text-sm text-gray-700"},"Tous")))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-2"},"Certification"),e.createElement("select",{value:E,onChange:be=>{y(be.target.value),H(1)},className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e.createElement("option",{value:""},"Tous"),e.createElement("option",{value:"true"},"Certifis uniquement"),e.createElement("option",{value:"false"},"Non certifis"))),e.createElement("div",null,e.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:w==="true",onChange:be=>{k(be.target.checked?"true":""),H(1)},className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 rounded"}),e.createElement("span",{className:"text-sm text-gray-700 flex items-center gap-1"},e.createElement(ar,{className:"w-4 h-4 text-emerald-500"}),"Boutiques vrifies uniquement"))),e.createElement("div",null,e.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},e.createElement("input",{type:"checkbox",checked:C,onChange:be=>{A(be.target.checked),H(1)},className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500 rounded"}),e.createElement("span",{className:"text-sm text-gray-700 flex items-center gap-1"},e.createElement(Wa,{className:"w-4 h-4 text-amber-500"}),"Avec remise"))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-2"},"Note minimum"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(zr,{className:"w-4 h-4 text-amber-400 fill-amber-400"}),e.createElement("input",{type:"number",min:"0",max:"5",step:"0.5",value:S,onChange:be=>{P(be.target.value),H(1)},placeholder:"0",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-2"},"Minimum de favoris"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Yr,{className:"w-4 h-4 text-red-500"}),e.createElement("input",{type:"number",min:"0",value:T,onChange:be=>{O(be.target.value),H(1)},placeholder:"0",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}))),e.createElement("div",null,e.createElement("label",{className:"block text-xs font-medium text-gray-700 mb-2"},"Minimum de ventes"),e.createElement("div",{className:"flex items-center gap-2"},e.createElement(Pr,{className:"w-4 h-4 text-emerald-500"}),e.createElement("input",{type:"number",min:"0",value:R,onChange:be=>{D(be.target.value),H(1)},placeholder:"0",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}))))),e.createElement(ve,{title:"Localisation",icon:Wr,section:"location"},e.createElement("select",{value:c,onChange:be=>{m(be.target.value),H(1)},className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},e.createElement("option",{value:""},"Toutes les villes"),Zme.map(be=>e.createElement("option",{key:be,value:be},be))))))),e.createElement("main",{className:"flex-1 min-w-0"},e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 mb-6"},e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},e.createElement("div",null,e.createElement("h2",{className:"text-lg font-bold text-gray-900"},B?"Recherche en cours...":`${fe} rsultat${fe>1?"s":""}`),me>0&&e.createElement("p",{className:"text-sm text-gray-500 mt-1"},me," filtre",me>1?"s":""," appliqu",me>1?"s":"")),e.createElement("div",{className:"flex items-center gap-3"},e.createElement("button",{type:"button",onClick:()=>q(!V),className:"lg:hidden inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-semibold text-gray-700 hover:bg-gray-50"},e.createElement(ls,{className:"w-4 h-4"}),"Filtres",me>0&&e.createElement("span",{className:"px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700 text-xs font-bold"},me)),e.createElement("select",{value:$,onChange:be=>{j(be.target.value),H(1)},className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},tue.map(be=>e.createElement("option",{key:be.value,value:be.value},be.label)))))),te&&e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6"},e.createElement("p",{className:"text-sm text-red-700"},te)),B&&L.length===0?e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Array.from({length:6}).map((be,J)=>e.createElement("div",{key:J,className:"bg-white rounded-2xl border border-gray-100 p-4 animate-pulse"},e.createElement("div",{className:"h-48 bg-gray-200 rounded-xl mb-4"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.createElement("div",{className:"h-4 bg-gray-200 rounded w-2/3"})))):L.length>0?e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},L.map(be=>e.createElement(un,{key:be._id,p:be,onProductClick:gp}))),ue>1&&e.createElement("div",{className:"mt-8 flex items-center justify-center gap-2"},e.createElement("button",{type:"button",onClick:()=>H(be=>Math.max(1,be-1)),disabled:K<=1,className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Prcdent"),e.createElement("span",{className:"px-4 py-2 text-sm text-gray-600"},"Page ",K," sur ",ue),e.createElement("button",{type:"button",onClick:()=>H(be=>Math.min(ue,be+1)),disabled:K>=ue,className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-semibold text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},"Suivant"))):e.createElement("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center"},e.createElement(Tr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-2"},"Aucun rsultat"),e.createElement("p",{className:"text-sm text-gray-500 mb-6"},"Aucun produit ne correspond  vos critres de recherche."),e.createElement("button",{type:"button",onClick:ne,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition-colors"},e.createElement(Cs,{className:"w-4 h-4"}),"Rinitialiser les filtres"))))))}const nue={pending:"En attente",confirmed:"Confirme",delivering:"En livraison",delivered:"Livre",cancelled:"Annule",inquiry:"Demande"},zO={pending:"bg-gray-100 text-gray-700 border-gray-200",confirmed:"bg-amber-100 text-amber-800 border-amber-200",delivering:"bg-blue-100 text-blue-800 border-blue-200",delivered:"bg-emerald-100 text-emerald-800 border-emerald-200",cancelled:"bg-red-100 text-red-800 border-red-200",inquiry:"bg-violet-100 text-violet-800 border-violet-200 dark:bg-violet-900/30 dark:text-violet-300 dark:border-violet-700"},sue={pending:Xt,confirmed:Ft,delivering:Kr,delivered:ar,cancelled:jt,inquiry:Hr},oue=12;function lue(){const{user:t}=u.useContext(Sr),r=ts(),a=wa(),[n,s]=u.useState([]),[o,l]=u.useState(!1),[c,m]=u.useState(""),[p,f]=u.useState(1),[g,b]=u.useState({total:0,totalPages:1}),[x,v]=u.useState(null),[E,y]=u.useState(""),[w,k]=u.useState("all"),[C,A]=u.useState(0),[S,P]=u.useState(!1);u.useEffect(()=>{T(),O()},[p,w]),u.useEffect(()=>{const Y=r.state?.inquireProduct;if(!Y?._id||!t)return;let z=!1;return(async()=>{P(!0),m("");try{const{data:Q}=await oe.post("/orders/inquiry",{productId:Y._id});if(z)return;v(Q),await T(),O(),a(r.pathname,{replace:!0,state:{}})}catch(Q){z||m(Q.response?.data?.message||"Impossible de dmarrer la conversation."),a(r.pathname,{replace:!0,state:{}})}finally{z||P(!1)}})(),()=>{z=!0}},[r.state?.inquireProduct?._id,t]);const T=async()=>{l(!0),m("");try{const Y=new URLSearchParams;Y.set("page",p),Y.set("limit",oue),Y.set("archived",w==="archived"?"true":"false");const{data:z}=await oe.get(`/orders/messages/conversations?${Y.toString()}`);s(Array.isArray(z.items)?z.items:[]),b({total:z.total||0,totalPages:z.totalPages||1})}catch(Y){m(Y.response?.data?.message||"Impossible de charger les conversations."),s([])}finally{l(!1)}},O=async()=>{try{const{data:Y}=await oe.get("/orders/messages/unread");A(Y.unreadCount??Y.count??0)}catch(Y){console.error("Error loading unread count:",Y)}},R=Y=>{if(!Y)return"";const z=new Date(Y);if(Number.isNaN(z.getTime()))return"";const Q=new Date-z,B=Math.floor(Q/(1e3*60)),ae=Math.floor(Q/(1e3*60*60)),te=Math.floor(Q/(1e3*60*60*24));return B<1?" l'instant":B<60?`${B} min`:ae<24?`${ae}h`:te<7?`${te}j`:z.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})},D=n.filter(Y=>{if(E.trim()){const z=E.toLowerCase();if(!(Y.productInfo?.title?.toLowerCase().includes(z)||Y.productInfo?.shopName?.toLowerCase().includes(z)||Y.latestMessage?.text?.toLowerCase().includes(z)||Y.orderCode?.toLowerCase().includes(z)))return!1}return!(w==="unread"&&(!Y.unreadCount||Y.unreadCount===0))}),$=()=>{v(null),T(),O()},j=async Y=>{try{await oe.post(`/orders/${String(Y)}/archive`),v(null),T(),O()}catch(z){m(z.response?.data?.message||"Impossible d'archiver.")}},K=async(Y,z)=>{z?.stopPropagation();try{await oe.post(`/orders/${String(Y)}/unarchive`),k("all"),f(1),O()}catch(L){m(L.response?.data?.message||"Impossible de dsarchiver.")}},H=async Y=>{try{await oe.post(`/orders/${String(Y)}/delete`),v(null),T(),O()}catch(z){m(z.response?.data?.message||"Impossible de supprimer.")}},V=Y=>{const z=Y.customerId?._id??Y.customerId;return{_id:Y.orderId!=null?String(Y.orderId):Y.orderId,items:[{snapshot:Y.productInfo}],customer:z!=null?{_id:String(z)}:void 0,status:Y.status,deliveryCode:Y.orderCode}},q=Y=>{v(V(Y)),m("")};return o&&n.length===0||S?e.createElement("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 relative"},S&&e.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"},e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl px-8 py-6 flex flex-col items-center gap-4"},e.createElement("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),e.createElement("p",{className:"text-gray-700 dark:text-gray-200 font-medium"},"Ouverture de la conversation avec le vendeur..."))),o&&n.length===0&&!S&&e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8"},e.createElement("div",{className:"flex items-center justify-center h-96"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"w-16 h-16 rounded-full border-4 border-indigo-100 border-t-indigo-600 animate-spin mx-auto mb-4"}),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Chargement des conversations..."))))):e.createElement("div",{className:"min-h-screen bg-slate-50 dark:bg-gray-900"},e.createElement("header",{className:"border-b border-slate-200 dark:border-gray-800 bg-white dark:bg-gray-900"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-5"},e.createElement("nav",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-gray-400 mb-3"},e.createElement(ye,{to:"/",className:"hover:text-slate-700 dark:hover:text-gray-200 transition-colors"},"Accueil"),e.createElement(Ar,{className:"w-4 h-4 flex-shrink-0"}),e.createElement(ye,{to:"/orders",className:"hover:text-slate-700 dark:hover:text-gray-200 transition-colors"},"Commandes"),e.createElement(Ar,{className:"w-4 h-4 flex-shrink-0"}),e.createElement("span",{className:"text-slate-900 dark:text-white font-medium"},"Messagerie")),e.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"p-2.5 rounded-xl bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400"},e.createElement(Hr,{className:"w-6 h-6"})),e.createElement("div",null,e.createElement("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900 dark:text-white"},"Messagerie"),e.createElement("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-0.5"},g.total," conversation",g.total!==1?"s":"",C>0&&e.createElement("span",{className:"ml-2 inline-flex items-center gap-1 text-amber-600 dark:text-amber-400 font-medium"}," ",C," non lu",C!==1?"s":"")))),e.createElement("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-100 dark:bg-gray-800 text-slate-600 dark:text-gray-300 text-sm"},e.createElement(cn,{className:"w-4 h-4 text-emerald-500"}),e.createElement("span",null,"Messages scuriss"))))),e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6"},e.createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4"},e.createElement("div",{className:"flex-1 relative"},e.createElement(Tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.createElement("input",{type:"text",placeholder:"Rechercher par produit, boutique ou message...",value:E,onChange:Y=>y(Y.target.value),className:"w-full pl-10 pr-10 py-2.5 rounded-xl border border-slate-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all text-sm"}),E&&e.createElement("button",{type:"button",onClick:()=>y(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-md text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-gray-700","aria-label":"Effacer la recherche"},e.createElement(jt,{className:"w-4 h-4"}))),e.createElement("div",{className:"flex items-center gap-2 flex-shrink-0"},e.createElement("button",{type:"button",onClick:()=>{f(1),k("all")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${w==="all"?"bg-indigo-600 text-white shadow-sm":"bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-700 text-slate-700 dark:text-gray-300 hover:bg-slate-50 dark:hover:bg-gray-700"}`},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(EB,{className:"w-4 h-4"}),"Tous")),e.createElement("button",{type:"button",onClick:()=>{f(1),k("unread")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${w==="unread"?"bg-indigo-600 text-white shadow-sm":"bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-700 text-slate-700 dark:text-gray-300 hover:bg-slate-50 dark:hover:bg-gray-700"}`},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(Kn,{className:"w-4 h-4"}),"Non lus",C>0&&e.createElement("span",{className:"min-w-[1.25rem] h-5 px-1.5 rounded-full bg-red-500 text-white text-xs font-semibold flex items-center justify-center"},C>99?"99+":C))),e.createElement("button",{type:"button",onClick:()=>{f(1),k("archived")},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${w==="archived"?"bg-indigo-600 text-white shadow-sm":"bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-700 text-slate-700 dark:text-gray-300 hover:bg-slate-50 dark:hover:bg-gray-700"}`},e.createElement("span",{className:"flex items-center gap-1.5"},e.createElement(h2,{className:"w-4 h-4"}),"Archives")))),c&&e.createElement("div",{className:"mb-4 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center gap-3"},e.createElement("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30 flex-shrink-0"},e.createElement(jt,{className:"w-5 h-5 text-red-600"})),e.createElement("p",{className:"text-sm text-red-700 dark:text-red-300 flex-1"},c),e.createElement("button",{type:"button",onClick:()=>m(""),className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-800/50 text-red-600 dark:text-red-400 transition-colors","aria-label":"Fermer"},e.createElement(jt,{className:"w-4 h-4"}))),e.createElement("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6 min-h-[calc(100vh-16rem)]"},e.createElement("div",{className:`${x?"hidden lg:block lg:w-[400px] xl:w-[420px] flex-shrink-0":"w-full"} flex flex-col`},D.length===0?e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-200 dark:border-gray-700 shadow-sm p-8 sm:p-12 text-center"},e.createElement("div",{className:"w-20 h-20 rounded-2xl bg-slate-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-5"},e.createElement(Hr,{className:"w-10 h-10 text-slate-400 dark:text-gray-500"})),e.createElement("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2"},"Aucune conversation"),e.createElement("p",{className:"text-sm text-slate-500 dark:text-gray-400 max-w-sm mx-auto mb-6"},E?"Aucune conversation ne correspond  votre recherche.":w==="unread"?"Vous avez lu tous vos messages.":"Dmarrez une conversation depuis une fiche produit ou une commande."),e.createElement(ye,{to:"/orders",className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 transition-colors"},e.createElement(Ft,{className:"w-4 h-4"}),"Voir mes commandes")):e.createElement("div",{className:"space-y-2"},D.map(Y=>{const z=Y.isInquiry?"inquiry":Y.status,L=sue[z]||Xt,Q=zO[z]||zO.pending,B=Y.unreadCount>0,ae=t?.role==="admin"||t?.role==="manager",te=Y.customerId&&String(Y.customerId)===String(t?._id),ge=Y.sellerId&&String(Y.sellerId)===String(t?._id);let ue=Y.productInfo?.shopName||"Vendeur";ae||ge?ue=Y.customerName||"Client":te&&(ue=Y.productInfo?.shopName||"Vendeur");const Ee=Y.productInfo?.slug?Dr(Y.productInfo):null,fe=x&&String(x._id)===String(Y.orderId);return e.createElement("div",{key:Y.orderId,role:"button",tabIndex:0,onClick:()=>q(Y),onKeyDown:re=>re.key==="Enter"&&q(Y),className:`group rounded-xl border transition-all duration-200 cursor-pointer ${fe?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-300 dark:border-indigo-700 ring-2 ring-indigo-500/30":B?"bg-white dark:bg-gray-800 border-slate-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-800 hover:bg-slate-50/50 dark:hover:bg-gray-700/50":"bg-white dark:bg-gray-800 border-slate-200 dark:border-gray-700 hover:border-slate-300 dark:hover:border-gray-600 hover:bg-slate-50/50 dark:hover:bg-gray-700/50"}`},e.createElement("div",{className:"p-3 sm:p-4 flex gap-3"},e.createElement("div",{className:"relative flex-shrink-0"},Y.productInfo?.image?e.createElement("img",{src:Y.productInfo.image,alt:"",className:"w-14 h-14 sm:w-16 sm:h-16 rounded-lg object-cover"}):e.createElement("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-lg bg-slate-100 dark:bg-gray-700 flex items-center justify-center"},e.createElement(Ft,{className:"w-7 h-7 text-slate-400 dark:text-gray-500"})),B&&e.createElement("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-red-500 text-white text-[10px] font-bold flex items-center justify-center"},Y.unreadCount>9?"9+":Y.unreadCount)),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-start justify-between gap-2"},e.createElement("div",{className:"min-w-0 flex-1"},Ee?e.createElement(ye,{to:Ee,onClick:re=>re.stopPropagation(),className:`text-sm font-semibold truncate block ${B?"text-slate-900 dark:text-white":"text-slate-800 dark:text-gray-100"} hover:text-indigo-600 dark:hover:text-indigo-400`},Y.productInfo?.title||"Produit"):e.createElement("p",{className:`text-sm font-semibold truncate ${B?"text-slate-900 dark:text-white":"text-slate-800 dark:text-gray-100"}`},Y.productInfo?.title||"Produit"),e.createElement("p",{className:"text-xs text-slate-500 dark:text-gray-400 mt-0.5"},ue,"  #",Y.orderCode||String(Y.orderId||"").slice(-6))),e.createElement("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium flex-shrink-0 ${Q}`},e.createElement(L,{className:"w-3.5 h-3.5"}),nue[z]||"")),Y.latestMessage?e.createElement("p",{className:`text-xs mt-1.5 line-clamp-2 ${B?"text-slate-700 dark:text-gray-200 font-medium":"text-slate-500 dark:text-gray-400"}`},Y.latestMessage.text):e.createElement("p",{className:"text-xs text-slate-400 dark:text-gray-500 italic mt-1.5"},"Aucun message"),e.createElement("p",{className:"text-[11px] text-slate-400 dark:text-gray-500 mt-1"},R(Y.latestMessage?.createdAt)),w==="archived"&&e.createElement("button",{type:"button",onClick:re=>K(Y.orderId,re),className:"mt-2 inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 transition-colors"},e.createElement(rz,{className:"w-3.5 h-3.5"}),"Dsarchiver")),e.createElement(Ar,{className:"w-5 h-5 text-slate-300 dark:text-gray-600 flex-shrink-0 self-center group-hover:text-indigo-500 transition-colors"})))})))),D.length>0&&g.totalPages>1&&e.createElement("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4 rounded-xl border border-slate-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4"},e.createElement("p",{className:"text-sm text-slate-600 dark:text-gray-400"},"Page ",e.createElement("span",{className:"font-semibold text-slate-900 dark:text-white"},p)," sur"," ",e.createElement("span",{className:"font-semibold text-slate-900 dark:text-white"},g.totalPages)),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{type:"button",onClick:()=>f(Y=>Math.max(1,Y-1)),disabled:p<=1,className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm font-medium text-slate-700 dark:text-gray-300 hover:bg-slate-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"Prcdent"),e.createElement("button",{type:"button",onClick:()=>f(Y=>Math.min(g.totalPages,Y+1)),disabled:p>=g.totalPages,className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm font-medium text-slate-700 dark:text-gray-300 hover:bg-slate-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"Suivant"))),e.createElement("footer",{className:"mt-8 text-center"},e.createElement("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-100 dark:bg-gray-800 text-slate-500 dark:text-gray-400 text-xs"},e.createElement(cn,{className:"w-3.5 h-3.5 text-emerald-500"}),e.createElement("span",null,"Tous vos messages sont chiffrs et scuriss")))),x&&e.createElement(Yd,{order:x,onClose:$,defaultOpen:!0,buttonText:"Contacter",unreadCount:0,onArchive:()=>j(x._id),onDelete:()=>H(x._id)}))}const Gi=fp("PushNotifications",{});var BO={};const cL=function(t){const r=[];let a=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?r[a++]=s:s<2048?(r[a++]=s>>6|192,r[a++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[a++]=s>>18|240,r[a++]=s>>12&63|128,r[a++]=s>>6&63|128,r[a++]=s&63|128):(r[a++]=s>>12|224,r[a++]=s>>6&63|128,r[a++]=s&63|128)}return r},iue=function(t){const r=[];let a=0,n=0;for(;a<t.length;){const s=t[a++];if(s<128)r[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[a++];r[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[a++],l=t[a++],c=t[a++],m=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;r[n++]=String.fromCharCode(55296+(m>>10)),r[n++]=String.fromCharCode(56320+(m&1023))}else{const o=t[a++],l=t[a++];r[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return r.join("")},dL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,r){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,m=s+2<t.length,p=m?t[s+2]:0,f=o>>2,g=(o&3)<<4|c>>4;let b=(c&15)<<2|p>>6,x=p&63;m||(x=64,l||(b=64)),n.push(a[f],a[g],a[b],a[x])}return n.join("")},encodeString(t,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(t):this.encodeByteArray(cL(t),r)},decodeString(t,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(t):iue(this.decodeStringToByteArray(t,r))},decodeStringToByteArray(t,r){this.init_();const a=r?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const o=a[t.charAt(s++)],c=s<t.length?a[t.charAt(s)]:0;++s;const p=s<t.length?a[t.charAt(s)]:64;++s;const g=s<t.length?a[t.charAt(s)]:64;if(++s,o==null||c==null||p==null||g==null)throw new cue;const b=o<<2|c>>4;if(n.push(b),p!==64){const x=c<<4&240|p>>2;if(n.push(x),g!==64){const v=p<<6&192|g;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const due=function(t){const r=cL(t);return dL.encodeByteArray(r,!0)},mL=function(t){return due(t).replace(/\./g,"")},mue=function(t){try{return dL.decodeString(t,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};function uue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pue=()=>uue().__FIREBASE_DEFAULTS__,fue=()=>{if(typeof process>"u"||typeof BO>"u")return;const t=BO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=t&&mue(t[1]);return r&&JSON.parse(r)},hue=()=>{try{return pue()||fue()||gue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uL=()=>{var t;return(t=hue())===null||t===void 0?void 0:t.config};class bue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((r,a)=>{this.resolve=r,this.reject=a})}wrapCallback(r){return(a,n)=>{a?this.reject(a):this.resolve(n),typeof r=="function"&&(this.promise.catch(()=>{}),r.length===1?r(a):r(a,n))}}}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sh(){try{return typeof indexedDB=="object"}catch{return!1}}function Ch(){return new Promise((t,r)=>{try{let a=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),a||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{a=!1},s.onerror=()=>{var o;r(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(a){r(a)}})}function $k(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const xue="FirebaseError";class Cc extends Error{constructor(r,a,n){super(a),this.code=r,this.customData=n,this.name=xue,Object.setPrototypeOf(this,Cc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sp.prototype.create)}}class Sp{constructor(r,a,n){this.service=r,this.serviceName=a,this.errors=n}create(r,...a){const n=a[0]||{},s=`${this.service}/${r}`,o=this.errors[r],l=o?yue(o,n):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Cc(s,c,n)}}function yue(t,r){return t.replace(vue,(a,n)=>{const s=r[n];return s!=null?String(s):`<${n}?>`})}const vue=/\{\$([^}]+)}/g;function Tg(t,r){if(t===r)return!0;const a=Object.keys(t),n=Object.keys(r);for(const s of a){if(!n.includes(s))return!1;const o=t[s],l=r[s];if(qO(o)&&qO(l)){if(!Tg(o,l))return!1}else if(o!==l)return!1}for(const s of n)if(!a.includes(s))return!1;return!0}function qO(t){return t!==null&&typeof t=="object"}const Eue=1e3,wue=2,Nue=14400*1e3,kue=.5;function UO(t,r=Eue,a=wue){const n=r*Math.pow(a,t),s=Math.round(kue*n*(Math.random()-.5)*2);return Math.min(Nue,n+s)}function Ac(t){return t&&t._delegate?t._delegate:t}class Xo{constructor(r,a,n){this.name=r,this.instanceFactory=a,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}const Qi="[DEFAULT]";class Sue{constructor(r,a){this.name=r,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(r){const a=this.normalizeInstanceIdentifier(r);if(!this.instancesDeferred.has(a)){const n=new bue;if(this.instancesDeferred.set(a,n),this.isInitialized(a)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:a});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(r){var a;const n=this.normalizeInstanceIdentifier(r?.identifier),s=(a=r?.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(r){if(r.name!==this.name)throw Error(`Mismatching Component ${r.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=r,!!this.shouldAutoInitialize()){if(Aue(r))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[a,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(r=Qi){this.instancesDeferred.delete(r),this.instancesOptions.delete(r),this.instances.delete(r)}async delete(){const r=Array.from(this.instances.values());await Promise.all([...r.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...r.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(r=Qi){return this.instances.has(r)}getOptions(r=Qi){return this.instancesOptions.get(r)||{}}initialize(r={}){const{options:a={}}=r,n=this.normalizeInstanceIdentifier(r.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:a});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);n===c&&l.resolve(s)}return s}onInit(r,a){var n;const s=this.normalizeInstanceIdentifier(a),o=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;o.add(r),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&r(l,s),()=>{o.delete(r)}}invokeOnInitCallbacks(r,a){const n=this.onInitCallbacks.get(a);if(n)for(const s of n)try{s(r,a)}catch{}}getOrInitializeService({instanceIdentifier:r,options:a={}}){let n=this.instances.get(r);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Cue(r),options:a}),this.instances.set(r,n),this.instancesOptions.set(r,a),this.invokeOnInitCallbacks(n,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,n)}catch{}return n||null}normalizeInstanceIdentifier(r=Qi){return this.component?this.component.multipleInstances?r:Qi:r}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cue(t){return t===Qi?void 0:t}function Aue(t){return t.instantiationMode==="EAGER"}class _ue{constructor(r){this.name=r,this.providers=new Map}addComponent(r){const a=this.getProvider(r.name);if(a.isComponentSet())throw new Error(`Component ${r.name} has already been registered with ${this.name}`);a.setComponent(r)}addOrOverwriteComponent(r){this.getProvider(r.name).isComponentSet()&&this.providers.delete(r.name),this.addComponent(r)}getProvider(r){if(this.providers.has(r))return this.providers.get(r);const a=new Sue(r,this);return this.providers.set(r,a),a}getProviders(){return Array.from(this.providers.values())}}var $a;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($a||($a={}));const Pue={debug:$a.DEBUG,verbose:$a.VERBOSE,info:$a.INFO,warn:$a.WARN,error:$a.ERROR,silent:$a.SILENT},Tue=$a.INFO,Oue={[$a.DEBUG]:"log",[$a.VERBOSE]:"log",[$a.INFO]:"info",[$a.WARN]:"warn",[$a.ERROR]:"error"},Mue=(t,r,...a)=>{if(r<t.logLevel)return;const n=new Date().toISOString(),s=Oue[r];if(s)console[s](`[${n}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`)};class fL{constructor(r){this.name=r,this._logLevel=Tue,this._logHandler=Mue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(r){if(!(r in $a))throw new TypeError(`Invalid value "${r}" assigned to \`logLevel\``);this._logLevel=r}setLogLevel(r){this._logLevel=typeof r=="string"?Pue[r]:r}get logHandler(){return this._logHandler}set logHandler(r){if(typeof r!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=r}get userLogHandler(){return this._userLogHandler}set userLogHandler(r){this._userLogHandler=r}debug(...r){this._userLogHandler&&this._userLogHandler(this,$a.DEBUG,...r),this._logHandler(this,$a.DEBUG,...r)}log(...r){this._userLogHandler&&this._userLogHandler(this,$a.VERBOSE,...r),this._logHandler(this,$a.VERBOSE,...r)}info(...r){this._userLogHandler&&this._userLogHandler(this,$a.INFO,...r),this._logHandler(this,$a.INFO,...r)}warn(...r){this._userLogHandler&&this._userLogHandler(this,$a.WARN,...r),this._logHandler(this,$a.WARN,...r)}error(...r){this._userLogHandler&&this._userLogHandler(this,$a.ERROR,...r),this._logHandler(this,$a.ERROR,...r)}}const jue=(t,r)=>r.some(a=>t instanceof a);let VO,HO;function Rue(){return VO||(VO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $ue(){return HO||(HO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gL=new WeakMap,Z1=new WeakMap,hL=new WeakMap,Vw=new WeakMap,Lk=new WeakMap;function Lue(t){const r=new Promise((a,n)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{a(Cl(t.result)),s()},l=()=>{n(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return r.then(a=>{a instanceof IDBCursor&&gL.set(a,t)}).catch(()=>{}),Lk.set(r,t),r}function Iue(t){if(Z1.has(t))return;const r=new Promise((a,n)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{a(),s()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Z1.set(t,r)}let e2={get(t,r,a){if(t instanceof IDBTransaction){if(r==="done")return Z1.get(t);if(r==="objectStoreNames")return t.objectStoreNames||hL.get(t);if(r==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Cl(t[r])},set(t,r,a){return t[r]=a,!0},has(t,r){return t instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in t}};function Due(t){e2=t(e2)}function Fue(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...a){const n=t.call(Hw(this),r,...a);return hL.set(n,r.sort?r.sort():[r]),Cl(n)}:$ue().includes(t)?function(...r){return t.apply(Hw(this),r),Cl(gL.get(this))}:function(...r){return Cl(t.apply(Hw(this),r))}}function zue(t){return typeof t=="function"?Fue(t):(t instanceof IDBTransaction&&Iue(t),jue(t,Rue())?new Proxy(t,e2):t)}function Cl(t){if(t instanceof IDBRequest)return Lue(t);if(Vw.has(t))return Vw.get(t);const r=zue(t);return r!==t&&(Vw.set(t,r),Lk.set(r,t)),r}const Hw=t=>Lk.get(t);function Ah(t,r,{blocked:a,upgrade:n,blocking:s,terminated:o}={}){const l=indexedDB.open(t,r),c=Cl(l);return n&&l.addEventListener("upgradeneeded",m=>{n(Cl(l.result),m.oldVersion,m.newVersion,Cl(l.transaction),m)}),a&&l.addEventListener("blocked",m=>a(m.oldVersion,m.newVersion,m)),c.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}function Ww(t,{blocked:r}={}){const a=indexedDB.deleteDatabase(t);return r&&a.addEventListener("blocked",n=>r(n.oldVersion,n)),Cl(a).then(()=>{})}const Bue=["get","getKey","getAll","getAllKeys","count"],que=["put","add","delete","clear"],Gw=new Map;function WO(t,r){if(!(t instanceof IDBDatabase&&!(r in t)&&typeof r=="string"))return;if(Gw.get(r))return Gw.get(r);const a=r.replace(/FromIndex$/,""),n=r!==a,s=que.includes(a);if(!(a in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Bue.includes(a)))return;const o=async function(l,...c){const m=this.transaction(l,s?"readwrite":"readonly");let p=m.store;return n&&(p=p.index(c.shift())),(await Promise.all([p[a](...c),s&&m.done]))[0]};return Gw.set(r,o),o}Due(t=>({...t,get:(r,a,n)=>WO(r,a)||t.get(r,a,n),has:(r,a)=>!!WO(r,a)||t.has(r,a)}));class Uue{constructor(r){this.container=r}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Vue(a)){const n=a.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(a=>a).join(" ")}}function Vue(t){const r=t.getComponent();return r?.type==="VERSION"}const t2="@firebase/app",GO="0.10.13";const Ml=new fL("@firebase/app"),Hue="@firebase/app-compat",Wue="@firebase/analytics-compat",Gue="@firebase/analytics",Kue="@firebase/app-check-compat",Yue="@firebase/app-check",Xue="@firebase/auth",Que="@firebase/auth-compat",Jue="@firebase/database",Zue="@firebase/data-connect",epe="@firebase/database-compat",tpe="@firebase/functions",rpe="@firebase/functions-compat",ape="@firebase/installations",npe="@firebase/installations-compat",spe="@firebase/messaging",ope="@firebase/messaging-compat",lpe="@firebase/performance",ipe="@firebase/performance-compat",cpe="@firebase/remote-config",dpe="@firebase/remote-config-compat",mpe="@firebase/storage",upe="@firebase/storage-compat",ppe="@firebase/firestore",fpe="@firebase/vertexai-preview",gpe="@firebase/firestore-compat",hpe="firebase";const r2="[DEFAULT]",bpe={[t2]:"fire-core",[Hue]:"fire-core-compat",[Gue]:"fire-analytics",[Wue]:"fire-analytics-compat",[Yue]:"fire-app-check",[Kue]:"fire-app-check-compat",[Xue]:"fire-auth",[Que]:"fire-auth-compat",[Jue]:"fire-rtdb",[Zue]:"fire-data-connect",[epe]:"fire-rtdb-compat",[tpe]:"fire-fn",[rpe]:"fire-fn-compat",[ape]:"fire-iid",[npe]:"fire-iid-compat",[spe]:"fire-fcm",[ope]:"fire-fcm-compat",[lpe]:"fire-perf",[ipe]:"fire-perf-compat",[cpe]:"fire-rc",[dpe]:"fire-rc-compat",[mpe]:"fire-gcs",[upe]:"fire-gcs-compat",[ppe]:"fire-fst",[gpe]:"fire-fst-compat",[fpe]:"fire-vertex","fire-js":"fire-js",[hpe]:"fire-js-all"};const op=new Map,xpe=new Map,a2=new Map;function KO(t,r){try{t.container.addComponent(r)}catch(a){Ml.debug(`Component ${r.name} failed to register with FirebaseApp ${t.name}`,a)}}function jl(t){const r=t.name;if(a2.has(r))return Ml.debug(`There were multiple attempts to register component ${r}.`),!1;a2.set(r,t);for(const a of op.values())KO(a,t);for(const a of xpe.values())KO(a,t);return!0}function Cp(t,r){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(r)}const ype={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Sp("app","Firebase",ype);class vpe{constructor(r,a,n){this._isDeleted=!1,this._options=Object.assign({},r),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(r){this.checkDestroyed(),this._automaticDataCollectionEnabled=r}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(r){this._isDeleted=r}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}function Ik(t,r={}){let a=t;typeof r!="object"&&(r={name:r});const n=Object.assign({name:r2,automaticDataCollectionEnabled:!1},r),s=n.name;if(typeof s!="string"||!s)throw fi.create("bad-app-name",{appName:String(s)});if(a||(a=uL()),!a)throw fi.create("no-options");const o=op.get(s);if(o){if(Tg(a,o.options)&&Tg(n,o.config))return o;throw fi.create("duplicate-app",{appName:s})}const l=new _ue(s);for(const m of a2.values())l.addComponent(m);const c=new vpe(a,n,l);return op.set(s,c),c}function Dk(t=r2){const r=op.get(t);if(!r&&t===r2&&uL())return Ik();if(!r)throw fi.create("no-app",{appName:t});return r}function n2(){return Array.from(op.values())}function Wo(t,r,a){var n;let s=(n=bpe[t])!==null&&n!==void 0?n:t;a&&(s+=`-${a}`);const o=s.match(/\s|\//),l=r.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${r}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${r}" contains illegal characters (whitespace or "/")`),Ml.warn(c.join(" "));return}jl(new Xo(`${s}-version`,()=>({library:s,version:r}),"VERSION"))}const Epe="firebase-heartbeat-database",wpe=1,lp="firebase-heartbeat-store";let Kw=null;function bL(){return Kw||(Kw=Ah(Epe,wpe,{upgrade:(t,r)=>{switch(r){case 0:try{t.createObjectStore(lp)}catch(a){console.warn(a)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),Kw}async function Npe(t){try{const a=(await bL()).transaction(lp),n=await a.objectStore(lp).get(xL(t));return await a.done,n}catch(r){if(r instanceof Cc)Ml.warn(r.message);else{const a=fi.create("idb-get",{originalErrorMessage:r?.message});Ml.warn(a.message)}}}async function YO(t,r){try{const n=(await bL()).transaction(lp,"readwrite");await n.objectStore(lp).put(r,xL(t)),await n.done}catch(a){if(a instanceof Cc)Ml.warn(a.message);else{const n=fi.create("idb-set",{originalErrorMessage:a?.message});Ml.warn(n.message)}}}function xL(t){return`${t.name}!${t.options.appId}`}const kpe=1024,Spe=720*60*60*1e3;class Cpe{constructor(r){this.container=r,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new _pe(a),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var r,a;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=XO();return((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)===null||a===void 0?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=Spe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ml.warn(n)}}async getHeartbeatsHeader(){var r;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=XO(),{heartbeatsToSend:n,unsentEntries:s}=Ape(this._heartbeatsCache.heartbeats),o=mL(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=a,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(a){return Ml.warn(a),""}}}function XO(){return new Date().toISOString().substring(0,10)}function Ape(t,r=kpe){const a=[];let n=t.slice();for(const s of t){const o=a.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),QO(a)>r){o.dates.pop();break}}else if(a.push({agent:s.agent,dates:[s.date]}),QO(a)>r){a.pop();break}n=n.slice(1)}return{heartbeatsToSend:a,unsentEntries:n}}class _pe{constructor(r){this.app=r,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sh()?Ch().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await Npe(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(r){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return YO(this.app,{lastSentHeartbeatDate:(a=r.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:r.heartbeats})}else return}async add(r){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return YO(this.app,{lastSentHeartbeatDate:(a=r.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...r.heartbeats]})}else return}}function QO(t){return mL(JSON.stringify({version:2,heartbeats:t})).length}function Ppe(t){jl(new Xo("platform-logger",r=>new Uue(r),"PRIVATE")),jl(new Xo("heartbeat",r=>new Cpe(r),"PRIVATE")),Wo(t2,GO,t),Wo(t2,GO,"esm2017"),Wo("fire-js","")}Ppe("");var Tpe="firebase",Ope="10.14.1";Wo(Tpe,Ope,"app");const yL="@firebase/installations",Fk="0.6.9";const vL=1e4,EL=`w:${Fk}`,wL="FIS_v2",Mpe="https://firebaseinstallations.googleapis.com/v1",jpe=3600*1e3,Rpe="installations",$pe="Installations";const Lpe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xc=new Sp(Rpe,$pe,Lpe);function NL(t){return t instanceof Cc&&t.code.includes("request-failed")}function kL({projectId:t}){return`${Mpe}/projects/${t}/installations`}function SL(t){return{token:t.token,requestStatus:2,expiresIn:Dpe(t.expiresIn),creationTime:Date.now()}}async function CL(t,r){const n=(await r.json()).error;return xc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function AL({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ipe(t,{refreshToken:r}){const a=AL(t);return a.append("Authorization",Fpe(r)),a}async function _L(t){const r=await t();return r.status>=500&&r.status<600?t():r}function Dpe(t){return Number(t.replace("s","000"))}function Fpe(t){return`${wL} ${t}`}async function zpe({appConfig:t,heartbeatServiceProvider:r},{fid:a}){const n=kL(t),s=AL(t),o=r.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:a,authVersion:wL,appId:t.appId,sdkVersion:EL},c={method:"POST",headers:s,body:JSON.stringify(l)},m=await _L(()=>fetch(n,c));if(m.ok){const p=await m.json();return{fid:p.fid||a,registrationStatus:2,refreshToken:p.refreshToken,authToken:SL(p.authToken)}}else throw await CL("Create Installation",m)}function PL(t){return new Promise(r=>{setTimeout(r,t)})}function Bpe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const qpe=/^[cdef][\w-]{21}$/,s2="";function Upe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const a=Vpe(t);return qpe.test(a)?a:s2}catch{return s2}}function Vpe(t){return Bpe(t).substr(0,22)}function _h(t){return`${t.appName}!${t.appId}`}const TL=new Map;function OL(t,r){const a=_h(t);ML(a,r),Hpe(a,r)}function ML(t,r){const a=TL.get(t);if(a)for(const n of a)n(r)}function Hpe(t,r){const a=Wpe();a&&a.postMessage({key:t,fid:r}),Gpe()}let ac=null;function Wpe(){return!ac&&"BroadcastChannel"in self&&(ac=new BroadcastChannel("[Firebase] FID Change"),ac.onmessage=t=>{ML(t.data.key,t.data.fid)}),ac}function Gpe(){TL.size===0&&ac&&(ac.close(),ac=null)}const Kpe="firebase-installations-database",Ype=1,yc="firebase-installations-store";let Yw=null;function zk(){return Yw||(Yw=Ah(Kpe,Ype,{upgrade:(t,r)=>{r===0&&t.createObjectStore(yc)}})),Yw}async function Og(t,r){const a=_h(t),s=(await zk()).transaction(yc,"readwrite"),o=s.objectStore(yc),l=await o.get(a);return await o.put(r,a),await s.done,(!l||l.fid!==r.fid)&&OL(t,r.fid),r}async function jL(t){const r=_h(t),n=(await zk()).transaction(yc,"readwrite");await n.objectStore(yc).delete(r),await n.done}async function Ph(t,r){const a=_h(t),s=(await zk()).transaction(yc,"readwrite"),o=s.objectStore(yc),l=await o.get(a),c=r(l);return c===void 0?await o.delete(a):await o.put(c,a),await s.done,c&&(!l||l.fid!==c.fid)&&OL(t,c.fid),c}async function Bk(t){let r;const a=await Ph(t.appConfig,n=>{const s=Xpe(n),o=Qpe(t,s);return r=o.registrationPromise,o.installationEntry});return a.fid===s2?{installationEntry:await r}:{installationEntry:a,registrationPromise:r}}function Xpe(t){const r=t||{fid:Upe(),registrationStatus:0};return RL(r)}function Qpe(t,r){if(r.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(xc.create("app-offline"));return{installationEntry:r,registrationPromise:s}}const a={fid:r.fid,registrationStatus:1,registrationTime:Date.now()},n=Jpe(t,a);return{installationEntry:a,registrationPromise:n}}else return r.registrationStatus===1?{installationEntry:r,registrationPromise:Zpe(t)}:{installationEntry:r}}async function Jpe(t,r){try{const a=await zpe(t,r);return Og(t.appConfig,a)}catch(a){throw NL(a)&&a.customData.serverCode===409?await jL(t.appConfig):await Og(t.appConfig,{fid:r.fid,registrationStatus:0}),a}}async function Zpe(t){let r=await JO(t.appConfig);for(;r.registrationStatus===1;)await PL(100),r=await JO(t.appConfig);if(r.registrationStatus===0){const{installationEntry:a,registrationPromise:n}=await Bk(t);return n||a}return r}function JO(t){return Ph(t,r=>{if(!r)throw xc.create("installation-not-found");return RL(r)})}function RL(t){return e0e(t)?{fid:t.fid,registrationStatus:0}:t}function e0e(t){return t.registrationStatus===1&&t.registrationTime+vL<Date.now()}async function t0e({appConfig:t,heartbeatServiceProvider:r},a){const n=r0e(t,a),s=Ipe(t,a),o=r.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:EL,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},m=await _L(()=>fetch(n,c));if(m.ok){const p=await m.json();return SL(p)}else throw await CL("Generate Auth Token",m)}function r0e(t,{fid:r}){return`${kL(t)}/${r}/authTokens:generate`}async function qk(t,r=!1){let a;const n=await Ph(t.appConfig,o=>{if(!$L(o))throw xc.create("not-registered");const l=o.authToken;if(!r&&s0e(l))return o;if(l.requestStatus===1)return a=a0e(t,r),o;{if(!navigator.onLine)throw xc.create("app-offline");const c=l0e(o);return a=n0e(t,c),c}});return a?await a:n.authToken}async function a0e(t,r){let a=await ZO(t.appConfig);for(;a.authToken.requestStatus===1;)await PL(100),a=await ZO(t.appConfig);const n=a.authToken;return n.requestStatus===0?qk(t,r):n}function ZO(t){return Ph(t,r=>{if(!$L(r))throw xc.create("not-registered");const a=r.authToken;return i0e(a)?Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}):r})}async function n0e(t,r){try{const a=await t0e(t,r),n=Object.assign(Object.assign({},r),{authToken:a});return await Og(t.appConfig,n),a}catch(a){if(NL(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await jL(t.appConfig);else{const n=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}});await Og(t.appConfig,n)}throw a}}function $L(t){return t!==void 0&&t.registrationStatus===2}function s0e(t){return t.requestStatus===2&&!o0e(t)}function o0e(t){const r=Date.now();return r<t.creationTime||t.creationTime+t.expiresIn<r+jpe}function l0e(t){const r={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:r})}function i0e(t){return t.requestStatus===1&&t.requestTime+vL<Date.now()}async function c0e(t){const r=t,{installationEntry:a,registrationPromise:n}=await Bk(r);return n?n.catch(console.error):qk(r).catch(console.error),a.fid}async function d0e(t,r=!1){const a=t;return await m0e(a),(await qk(a,r)).token}async function m0e(t){const{registrationPromise:r}=await Bk(t);r&&await r}function u0e(t){if(!t||!t.options)throw Xw("App Configuration");if(!t.name)throw Xw("App Name");const r=["projectId","apiKey","appId"];for(const a of r)if(!t.options[a])throw Xw(a);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xw(t){return xc.create("missing-app-config-values",{valueName:t})}const LL="installations",p0e="installations-internal",f0e=t=>{const r=t.getProvider("app").getImmediate(),a=u0e(r),n=Cp(r,"heartbeat");return{app:r,appConfig:a,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},g0e=t=>{const r=t.getProvider("app").getImmediate(),a=Cp(r,LL).getImmediate();return{getId:()=>c0e(a),getToken:s=>d0e(a,s)}};function h0e(){jl(new Xo(LL,f0e,"PUBLIC")),jl(new Xo(p0e,g0e,"PRIVATE"))}h0e();Wo(yL,Fk);Wo(yL,Fk,"esm2017");const b0e="/firebase-messaging-sw.js",x0e="/firebase-cloud-messaging-push-scope",IL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",y0e="https://fcmregistrations.googleapis.com/v1",DL="google.c.a.c_id",v0e="google.c.a.c_l",E0e="google.c.a.ts",w0e="google.c.a.e";var eM;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(eM||(eM={}));var ip;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ip||(ip={}));function fl(t){const r=new Uint8Array(t);return btoa(String.fromCharCode(...r)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function N0e(t){const r="=".repeat((4-t.length%4)%4),a=(t+r).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(a),s=new Uint8Array(n.length);for(let o=0;o<n.length;++o)s[o]=n.charCodeAt(o);return s}const Qw="fcm_token_details_db",k0e=5,tM="fcm_token_object_Store";async function S0e(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Qw))return null;let r=null;return(await Ah(Qw,k0e,{upgrade:async(n,s,o,l)=>{var c;if(s<2||!n.objectStoreNames.contains(tM))return;const m=l.objectStore(tM),p=await m.index("fcmSenderId").get(t);if(await m.clear(),!!p){if(s===2){const f=p;if(!f.auth||!f.p256dh||!f.endpoint)return;r={token:f.fcmToken,createTime:(c=f.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:fl(f.vapidKey)}}}else if(s===3){const f=p;r={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:fl(f.auth),p256dh:fl(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:fl(f.vapidKey)}}}else if(s===4){const f=p;r={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:fl(f.auth),p256dh:fl(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:fl(f.vapidKey)}}}}}})).close(),await Ww(Qw),await Ww("fcm_vapid_details_db"),await Ww("undefined"),C0e(r)?r:null}function C0e(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:r}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof r.auth=="string"&&r.auth.length>0&&typeof r.p256dh=="string"&&r.p256dh.length>0&&typeof r.endpoint=="string"&&r.endpoint.length>0&&typeof r.swScope=="string"&&r.swScope.length>0&&typeof r.vapidKey=="string"&&r.vapidKey.length>0}const A0e="firebase-messaging-database",_0e=1,cp="firebase-messaging-store";let Jw=null;function FL(){return Jw||(Jw=Ah(A0e,_0e,{upgrade:(t,r)=>{r===0&&t.createObjectStore(cp)}})),Jw}async function P0e(t){const r=zL(t),n=await(await FL()).transaction(cp).objectStore(cp).get(r);if(n)return n;{const s=await S0e(t.appConfig.senderId);if(s)return await Uk(t,s),s}}async function Uk(t,r){const a=zL(t),s=(await FL()).transaction(cp,"readwrite");return await s.objectStore(cp).put(r,a),await s.done,r}function zL({appConfig:t}){return t.appId}const T0e={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Zn=new Sp("messaging","Messaging",T0e);async function O0e(t,r){const a=await Hk(t),n=BL(r),s={method:"POST",headers:a,body:JSON.stringify(n)};let o;try{o=await(await fetch(Vk(t.appConfig),s)).json()}catch(l){throw Zn.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(o.error){const l=o.error.message;throw Zn.create("token-subscribe-failed",{errorInfo:l})}if(!o.token)throw Zn.create("token-subscribe-no-token");return o.token}async function M0e(t,r){const a=await Hk(t),n=BL(r.subscriptionOptions),s={method:"PATCH",headers:a,body:JSON.stringify(n)};let o;try{o=await(await fetch(`${Vk(t.appConfig)}/${r.token}`,s)).json()}catch(l){throw Zn.create("token-update-failed",{errorInfo:l?.toString()})}if(o.error){const l=o.error.message;throw Zn.create("token-update-failed",{errorInfo:l})}if(!o.token)throw Zn.create("token-update-no-token");return o.token}async function j0e(t,r){const n={method:"DELETE",headers:await Hk(t)};try{const o=await(await fetch(`${Vk(t.appConfig)}/${r}`,n)).json();if(o.error){const l=o.error.message;throw Zn.create("token-unsubscribe-failed",{errorInfo:l})}}catch(s){throw Zn.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function Vk({projectId:t}){return`${y0e}/projects/${t}/registrations`}async function Hk({appConfig:t,installations:r}){const a=await r.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${a}`})}function BL({p256dh:t,auth:r,endpoint:a,vapidKey:n}){const s={web:{endpoint:a,auth:r,p256dh:t}};return n!==IL&&(s.web.applicationPubKey=n),s}const R0e=10080*60*1e3;async function $0e(t){const r=await I0e(t.swRegistration,t.vapidKey),a={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:r.endpoint,auth:fl(r.getKey("auth")),p256dh:fl(r.getKey("p256dh"))},n=await P0e(t.firebaseDependencies);if(n){if(D0e(n.subscriptionOptions,a))return Date.now()>=n.createTime+R0e?L0e(t,{token:n.token,createTime:Date.now(),subscriptionOptions:a}):n.token;try{await j0e(t.firebaseDependencies,n.token)}catch(s){console.warn(s)}return rM(t.firebaseDependencies,a)}else return rM(t.firebaseDependencies,a)}async function L0e(t,r){try{const a=await M0e(t.firebaseDependencies,r),n=Object.assign(Object.assign({},r),{token:a,createTime:Date.now()});return await Uk(t.firebaseDependencies,n),a}catch(a){throw a}}async function rM(t,r){const n={token:await O0e(t,r),createTime:Date.now(),subscriptionOptions:r};return await Uk(t,n),n.token}async function I0e(t,r){const a=await t.pushManager.getSubscription();return a||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N0e(r)})}function D0e(t,r){const a=r.vapidKey===t.vapidKey,n=r.endpoint===t.endpoint,s=r.auth===t.auth,o=r.p256dh===t.p256dh;return a&&n&&s&&o}function aM(t){const r={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return F0e(r,t),z0e(r,t),B0e(r,t),r}function F0e(t,r){if(!r.notification)return;t.notification={};const a=r.notification.title;a&&(t.notification.title=a);const n=r.notification.body;n&&(t.notification.body=n);const s=r.notification.image;s&&(t.notification.image=s);const o=r.notification.icon;o&&(t.notification.icon=o)}function z0e(t,r){r.data&&(t.data=r.data)}function B0e(t,r){var a,n,s,o,l;if(!r.fcmOptions&&!(!((a=r.notification)===null||a===void 0)&&a.click_action))return;t.fcmOptions={};const c=(s=(n=r.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&s!==void 0?s:(o=r.notification)===null||o===void 0?void 0:o.click_action;c&&(t.fcmOptions.link=c);const m=(l=r.fcmOptions)===null||l===void 0?void 0:l.analytics_label;m&&(t.fcmOptions.analyticsLabel=m)}function q0e(t){return typeof t=="object"&&!!t&&DL in t}function U0e(t){if(!t||!t.options)throw Zw("App Configuration Object");if(!t.name)throw Zw("App Name");const r=["projectId","apiKey","appId","messagingSenderId"],{options:a}=t;for(const n of r)if(!a[n])throw Zw(n);return{appName:t.name,projectId:a.projectId,apiKey:a.apiKey,appId:a.appId,senderId:a.messagingSenderId}}function Zw(t){return Zn.create("missing-app-config-values",{valueName:t})}class V0e{constructor(r,a,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=U0e(r);this.firebaseDependencies={app:r,appConfig:s,installations:a,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function H0e(t){try{t.swRegistration=await navigator.serviceWorker.register(b0e,{scope:x0e}),t.swRegistration.update().catch(()=>{})}catch(r){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:r?.message})}}async function W0e(t,r){if(!r&&!t.swRegistration&&await H0e(t),!(!r&&t.swRegistration)){if(!(r instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");t.swRegistration=r}}async function G0e(t,r){r?t.vapidKey=r:t.vapidKey||(t.vapidKey=IL)}async function qL(t,r){if(!navigator)throw Zn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Zn.create("permission-blocked");return await G0e(t,r?.vapidKey),await W0e(t,r?.serviceWorkerRegistration),$0e(t)}async function K0e(t,r,a){const n=Y0e(r);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:a[DL],message_name:a[v0e],message_time:a[E0e],message_device_time:Math.floor(Date.now()/1e3)})}function Y0e(t){switch(t){case ip.NOTIFICATION_CLICKED:return"notification_open";case ip.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function X0e(t,r){const a=r.data;if(!a.isFirebaseMessaging)return;t.onMessageHandler&&a.messageType===ip.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(aM(a)):t.onMessageHandler.next(aM(a)));const n=a.data;q0e(n)&&n[w0e]==="1"&&await K0e(t,a.messageType,n)}const nM="@firebase/messaging",sM="0.12.12";const Q0e=t=>{const r=new V0e(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>X0e(r,a)),r},J0e=t=>{const r=t.getProvider("messaging").getImmediate();return{getToken:n=>qL(r,n)}};function Z0e(){jl(new Xo("messaging",Q0e,"PUBLIC")),jl(new Xo("messaging-internal",J0e,"PRIVATE")),Wo(nM,sM),Wo(nM,sM,"esm2017")}async function efe(){try{await Ch()}catch{return!1}return typeof window<"u"&&Sh()&&$k()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function tfe(t,r){if(!navigator)throw Zn.create("only-available-in-window");return t.onMessageHandler=r,()=>{t.onMessageHandler=null}}function rfe(t=Dk()){return efe().then(r=>{if(!r)throw Zn.create("unsupported-browser")},r=>{throw Zn.create("indexed-db-unsupported")}),Cp(Ac(t),"messaging").getImmediate()}async function afe(t,r){return t=Ac(t),qL(t,r)}function nfe(t,r){return t=Ac(t),tfe(t,r)}Z0e();const sfe=!1,ofe=3e3,lfe=2,eN={apiKey:"AIzaSyChYexMhZDqZ-8DaI-ynht7q_OL8M2260M",authDomain:"hdmarketcg.firebaseapp.com",projectId:"hdmarketcg",storageBucket:"hdmarketcg.firebasestorage.app",messagingSenderId:"882664621680",appId:"1:882664621680:web:976a95b6708fe409f0d6b5",measurementId:"G-NCC0QWVJQB"};function UL(t){const r=t?.notification?.data||t?.data||t||{},a=r.url||r.link||r.deeplink||r.path;if(!a||typeof a!="string")return null;const n=a.trim();return n?n.startsWith("http")||n.startsWith("/")?n:`/${n}`:null}function tN(t){const r=UL(t);typeof window>"u"||(r&&window.dispatchEvent(new CustomEvent("hdmarket:notification-link",{detail:{link:r},bubbles:!0,cancelable:!1})),window.dispatchEvent(new Event("hdmarket:notifications-refresh")))}function ife(t){const r=u.useRef(!1),a=u.useRef(null);u.useEffect(()=>{if(!t?.token||r.current)return;r.current=!0;let n=!0;const s=async(o,l,c=0)=>{try{return await oe.post("/users/push-tokens",{token:o,platform:l}),!0}catch{return n&&c<lfe&&setTimeout(()=>s(o,l,c+1),ofe),!1}};if(kd.isNativePlatform()){(async()=>{(await Gi.checkPermissions()).receive!=="granted"&&(await Gi.requestPermissions()).receive!=="granted"||await Gi.register()})().catch(f=>{});const l=Gi.addListener("registration",async f=>{!n||!f?.value||await s(f.value,kd.getPlatform())}),c=Gi.addListener("registrationError",f=>{}),m=Gi.addListener("pushNotificationReceived",f=>{tN(f)}),p=Gi.addListener("pushNotificationActionPerformed",f=>{const g=UL(f?.notification);if(g&&typeof window<"u"){window.location.assign(g);return}tN(f?.notification)});return()=>{n=!1,l.remove(),c.remove(),m.remove(),p.remove()}}return(async function(){if(typeof window>"u"||!("Notification"in window)||!("serviceWorker"in navigator)||!eN.apiKey||!eN.projectId)return;let l=Notification.permission;if(l==="default")try{l=await Notification.requestPermission()}catch{return}if(l==="granted")try{const c=n2().length?Dk():Ik(eN),m=rfe(c),p=await navigator.serviceWorker.ready,g=await afe(m,{vapidKey:void 0,serviceWorkerRegistration:p});if(!n||!g)return;await s(g,"web");const b=nfe(m,x=>{n&&tN(x)});a.current=b}catch{}})(),()=>{n=!1;const o=a.current;if(typeof o=="function"){try{o()}catch{}a.current=null}}},[t?.token])}function cfe(){const{user:t}=u.useContext(Sr);return ife(t),null}const Mg="analytics",dfe="firebase_id",mfe="origin",ufe=60*1e3,pfe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wk="https://www.googletagmanager.com/gtag/js";const es=new fL("@firebase/analytics");const ffe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ds=new Sp("analytics","Analytics",ffe);function gfe(t){if(!t.startsWith(Wk)){const r=Ds.create("invalid-gtag-resource",{gtagURL:t});return es.warn(r.message),""}return t}function VL(t){return Promise.all(t.map(r=>r.catch(a=>a)))}function hfe(t,r){let a;return window.trustedTypes&&(a=window.trustedTypes.createPolicy(t,r)),a}function bfe(t,r){const a=hfe("firebase-js-sdk-policy",{createScriptURL:gfe}),n=document.createElement("script"),s=`${Wk}?l=${t}&id=${r}`;n.src=a?a?.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function xfe(t){let r=[];return Array.isArray(window[t])?r=window[t]:window[t]=r,r}async function yfe(t,r,a,n,s,o){const l=n[s];try{if(l)await r[l];else{const m=(await VL(a)).find(p=>p.measurementId===s);m&&await r[m.appId]}}catch(c){es.error(c)}t("config",s,o)}async function vfe(t,r,a,n,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await VL(a);for(const m of l){const p=c.find(g=>g.measurementId===m),f=p&&r[p.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(r)),await Promise.all(o),t("event",n,s||{})}catch(o){es.error(o)}}function Efe(t,r,a,n){async function s(o,...l){try{if(o==="event"){const[c,m]=l;await vfe(t,r,a,c,m)}else if(o==="config"){const[c,m]=l;await yfe(t,r,a,n,c,m)}else if(o==="consent"){const[c,m]=l;t("consent",c,m)}else if(o==="get"){const[c,m,p]=l;t("get",c,m,p)}else if(o==="set"){const[c]=l;t("set",c)}else t(o,...l)}catch(c){es.error(c)}}return s}function wfe(t,r,a,n,s){let o=function(...l){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=Efe(o,t,r,a),{gtagCore:o,wrappedGtag:window[s]}}function Nfe(t){const r=window.document.getElementsByTagName("script");for(const a of Object.values(r))if(a.src&&a.src.includes(Wk)&&a.src.includes(t))return a;return null}const kfe=30,Sfe=1e3;class Cfe{constructor(r={},a=Sfe){this.throttleMetadata=r,this.intervalMillis=a}getThrottleMetadata(r){return this.throttleMetadata[r]}setThrottleMetadata(r,a){this.throttleMetadata[r]=a}deleteThrottleMetadata(r){delete this.throttleMetadata[r]}}const HL=new Cfe;function Afe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _fe(t){var r;const{appId:a,apiKey:n}=t,s={method:"GET",headers:Afe(n)},o=pfe.replace("{app-id}",a),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let c="";try{const m=await l.json();!((r=m.error)===null||r===void 0)&&r.message&&(c=m.error.message)}catch{}throw Ds.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function Pfe(t,r=HL,a){const{appId:n,apiKey:s,measurementId:o}=t.options;if(!n)throw Ds.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:n};throw Ds.create("no-api-key")}const l=r.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Mfe;return setTimeout(async()=>{c.abort()},ufe),WL({appId:n,apiKey:s,measurementId:o},l,c,r)}async function WL(t,{throttleEndTimeMillis:r,backoffCount:a},n,s=HL){var o;const{appId:l,measurementId:c}=t;try{await Tfe(n,r)}catch(m){if(c)return es.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:c};throw m}try{const m=await _fe(t);return s.deleteThrottleMetadata(l),m}catch(m){const p=m;if(!Ofe(p)){if(s.deleteThrottleMetadata(l),c)return es.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:c};throw m}const f=Number((o=p?.customData)===null||o===void 0?void 0:o.httpStatus)===503?UO(a,s.intervalMillis,kfe):UO(a,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1};return s.setThrottleMetadata(l,g),es.debug(`Calling attemptFetch again in ${f} millis`),WL(t,g,n,s)}}function Tfe(t,r){return new Promise((a,n)=>{const s=Math.max(r-Date.now(),0),o=setTimeout(a,s);t.addEventListener(()=>{clearTimeout(o),n(Ds.create("fetch-throttle",{throttleEndTimeMillis:r}))})})}function Ofe(t){if(!(t instanceof Cc)||!t.customData)return!1;const r=Number(t.customData.httpStatus);return r===429||r===500||r===503||r===504}class Mfe{constructor(){this.listeners=[]}addEventListener(r){this.listeners.push(r)}abort(){this.listeners.forEach(r=>r())}}async function jfe(t,r,a,n,s){if(s&&s.global){t("event",a,n);return}else{const o=await r,l=Object.assign(Object.assign({},n),{send_to:o});t("event",a,l)}}async function Rfe(t,r,a,n){{const s=await r;t("config",s,{update:!0,user_id:a})}}async function $fe(t,r,a,n){{const s=await r;t("config",s,{update:!0,user_properties:a})}}async function Lfe(){if(Sh())try{await Ch()}catch(t){return es.warn(Ds.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return es.warn(Ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Ife(t,r,a,n,s,o,l){var c;const m=Pfe(t);m.then(x=>{a[x.measurementId]=x.appId,t.options.measurementId&&x.measurementId!==t.options.measurementId&&es.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>es.error(x)),r.push(m);const p=Lfe().then(x=>{if(x)return n.getId()}),[f,g]=await Promise.all([m,p]);Nfe(o)||bfe(o,f.measurementId),s("js",new Date);const b=(c=l?.config)!==null&&c!==void 0?c:{};return b[mfe]="firebase",b.update=!0,g!=null&&(b[dfe]=g),s("config",f.measurementId,b),f.measurementId}class Dfe{constructor(r){this.app=r}_delete(){return delete ic[this.app.options.appId],Promise.resolve()}}let ic={},oM=[];const lM={};let rN="dataLayer",Ffe="gtag",iM,Th,cM=!1;function zfe(){const t=[];if(pL()&&t.push("This is a browser extension environment."),$k()||t.push("Cookies are not available."),t.length>0){const r=t.map((n,s)=>`(${s+1}) ${n}`).join(" "),a=Ds.create("invalid-analytics-context",{errorInfo:r});es.warn(a.message)}}function Bfe(t,r,a){zfe();const n=t.options.appId;if(!n)throw Ds.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)es.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ds.create("no-api-key");if(ic[n]!=null)throw Ds.create("already-exists",{id:n});if(!cM){xfe(rN);const{wrappedGtag:o,gtagCore:l}=wfe(ic,oM,lM,rN,Ffe);Th=o,iM=l,cM=!0}return ic[n]=Ife(t,oM,lM,r,iM,rN,a),new Dfe(t)}function qfe(t=Dk()){t=Ac(t);const r=Cp(t,Mg);return r.isInitialized()?r.getImmediate():Ufe(t)}function Ufe(t,r={}){const a=Cp(t,Mg);if(a.isInitialized()){const s=a.getImmediate();if(Tg(r,a.getOptions()))return s;throw Ds.create("already-initialized")}return a.initialize({options:r})}async function Vfe(){if(pL()||!$k()||!Sh())return!1;try{return await Ch()}catch{return!1}}function dM(t,r,a){t=Ac(t),Rfe(Th,ic[t.app.options.appId],r).catch(n=>es.error(n))}function mM(t,r,a){t=Ac(t),$fe(Th,ic[t.app.options.appId],r).catch(n=>es.error(n))}function GL(t,r,a,n){t=Ac(t),jfe(Th,ic[t.app.options.appId],r,a,n).catch(s=>es.error(s))}const uM="@firebase/analytics",pM="0.10.8";function Hfe(){jl(new Xo(Mg,(r,{options:a})=>{const n=r.getProvider("app").getImmediate(),s=r.getProvider("installations-internal").getImmediate();return Bfe(n,s,a)},"PUBLIC")),jl(new Xo("analytics-internal",t,"PRIVATE")),Wo(uM,pM),Wo(uM,pM,"esm2017");function t(r){try{const a=r.getProvider(Mg).getImmediate();return{logEvent:(n,s,o)=>GL(a,n,s,o)}}catch(a){throw Ds.create("interop-component-reg-failed",{reason:a})}}}Hfe();const fM={apiKey:"AIzaSyChYexMhZDqZ-8DaI-ynht7q_OL8M2260M",authDomain:"hdmarketcg.firebaseapp.com",projectId:"hdmarketcg",storageBucket:"hdmarketcg.firebasestorage.app",messagingSenderId:"882664621680",appId:"1:882664621680:web:976a95b6708fe409f0d6b5",measurementId:"G-NCC0QWVJQB"};let gM=null,tf=null;const Wfe=async()=>{if(typeof window>"u")return!1;try{return await Vfe()}catch{return!1}},KL=async()=>tf||(tf=(async()=>{if(!fM.apiKey||!await Wfe())return null;const r=n2().length?n2()[0]:Ik(fM);return gM=qfe(r),gM})(),tf),Gfe=async({path:t,title:r})=>{const a=await KL();if(!a)return;const n=t||window.location.pathname;GL(a,"page_view",{page_path:n,page_location:window.location.href,page_title:r||document.title||"HDMarket"})},Kfe=async t=>{const r=await KL();if(!r)return;if(!t){dM(r,null),mM(r,{});return}const a=t._id||t.id||null;a&&dM(r,String(a)),mM(r,{account_type:t.accountType||"person",role:t.role||"user"})};function Yfe(){const t=ts(),{user:r}=u.useContext(Sr);return u.useEffect(()=>{Kfe(r)},[r]),u.useEffect(()=>{const a=`${t.pathname}${t.search||""}`;Gfe({path:a})},[t]),null}const hM=t=>new Promise((r,a)=>{const n=new FileReader;n.onload=()=>r(n.result),n.onerror=a,n.readAsDataURL(t)});function Xfe(){const{user:t}=u.useContext(Sr),r=wa(),{showToast:a}=ms(),{networks:n,loading:s}=Vg(),[o,l]=u.useState(!1),[c,m]=u.useState(""),[p,f]=u.useState([]),[g,b]=u.useState(!0),x=u.useMemo(()=>n.filter(z=>z.isActive).sort((z,L)=>(z.order||0)-(L.order||0)),[n]);x.length>0&&x[0].name;const[v,E]=u.useState({shopName:"",shopAddress:"",shopDescription:"",transactionName:"",transactionNumber:"",paymentAmount:"50000",operator:""});u.useEffect(()=>{s||(x.length>0&&!v.operator?E(z=>({...z,operator:x[0].name})):x.length===0&&!v.operator&&E(z=>({...z,operator:"MTN"})))},[s,x,v.operator]);const[y,w]=u.useState(null),[k,C]=u.useState(""),[A,S]=u.useState(null),[P,T]=u.useState("");u.useEffect(()=>{t&&t.accountType==="shop"&&(a("Cette page est rserve aux utilisateurs non-boutiques.",{variant:"error"}),r("/"))},[t,r,a]),u.useEffect(()=>{t&&t.accountType!=="shop"&&O()},[t]);const O=async()=>{try{b(!0);const{data:z}=await oe.get("/users/shop-conversion-requests");f(z||[])}catch(z){console.error("Error loading requests:",z)}finally{b(!1)}},R=async z=>{const L=z.target.files?.[0];if(!L)return;if(!L.type.startsWith("image/")){m("Le logo doit tre une image.");return}if(L.size>5*1024*1024){m("Le logo doit faire moins de 5 Mo.");return}w(L);const Q=await hM(L);C(Q),m(""),z.target.value=""},D=async z=>{const L=z.target.files?.[0];if(!L)return;if(!L.type.startsWith("image/")){m("La preuve de boutique doit tre une image.");return}if(L.size>5*1024*1024){m("La preuve de boutique doit faire moins de 5 Mo.");return}S(L);const Q=await hM(L);T(Q),m(""),z.target.value=""},$=()=>{w(null),C("")},j=()=>{S(null),T("")},K=z=>{const L=z.target.value.replace(/\D/g,"").slice(0,10);E(Q=>({...Q,transactionNumber:L}))},H=async z=>{if(z.preventDefault(),m(""),!v.shopName.trim()){m("Le nom de la boutique est requis.");return}if(!v.shopAddress.trim()){m("L'adresse de la boutique est requise.");return}if(!v.transactionName.trim()){m("Le nom de la transaction est requis.");return}if(v.transactionNumber.length!==10){m("Le numro de transaction doit contenir exactement 10 chiffres.");return}if(Number(v.paymentAmount)!==5e4){m("Le montant du paiement doit tre de 50.000 FCFA.");return}if(!A){m("La preuve de boutique est requise.");return}l(!0);try{const L=new FormData;L.append("shopName",v.shopName.trim()),L.append("shopAddress",v.shopAddress.trim()),L.append("shopDescription",v.shopDescription.trim()),L.append("transactionName",v.transactionName.trim()),L.append("transactionNumber",v.transactionNumber),L.append("paymentAmount",v.paymentAmount),L.append("operator",v.operator),y&&L.append("shopLogo",y),L.append("paymentProof",A);const{data:Q}=await oe.post("/users/shop-conversion-requests",L,{headers:{"Content-Type":"multipart/form-data"}});a(Q.message||"Demande soumise avec succs. Traitement sous 48h.",{variant:"success"}),E({shopName:"",shopAddress:"",shopDescription:"",transactionName:"",transactionNumber:"",paymentAmount:"50000",operator:x.length>0?x[0].name:"MTN"}),w(null),C(""),S(null),T(""),await O()}catch(L){const Q=L.response?.data?.message||L.message||"Une erreur est survenue.";m(Q),a(Q,{variant:"error"})}finally{l(!1)}},V=z=>{switch(z){case"approved":return e.createElement("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700"},e.createElement(ar,{size:14}),"Approuve");case"rejected":return e.createElement("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700"},e.createElement(Ba,{size:14}),"Rejete");default:return e.createElement("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-700"},e.createElement(Xt,{size:14}),"En attente")}},q=z=>z?new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";if(!t)return e.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},e.createElement("div",{className:"text-center"},e.createElement("p",{className:"text-gray-600"},"Veuillez vous connecter pour accder  cette page.")));if(t.accountType==="shop")return null;const Y=p.some(z=>z.status==="pending");return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-indigo-50/20 py-8 px-4 sm:px-6 lg:px-8"},e.createElement("div",{className:"max-w-4xl mx-auto"},e.createElement("div",{className:"mb-8"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white"},e.createElement(Er,{size:24})),e.createElement("h1",{className:"text-3xl font-black text-gray-900"},"Devenir Boutique")),e.createElement("p",{className:"text-gray-600"},"Soumettez une demande pour convertir votre compte particulier en boutique. Traitement sous 48h.")),p.length>0&&e.createElement("div",{className:"mb-8 bg-white rounded-2xl border border-gray-200 shadow-sm p-6"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Mes demandes"),e.createElement("div",{className:"space-y-4"},p.map(z=>e.createElement("div",{key:z._id,className:"p-4 rounded-xl border border-gray-200 bg-gray-50 hover:bg-gray-100 transition-colors"},e.createElement("div",{className:"flex items-start justify-between mb-2"},e.createElement("div",null,e.createElement("h3",{className:"font-semibold text-gray-900"},z.shopName),e.createElement("p",{className:"text-sm text-gray-600"},z.shopAddress)),V(z.status)),e.createElement("div",{className:"text-xs text-gray-500 mt-2"},"Soumise le ",q(z.createdAt),z.processedAt&&`  Traite le ${q(z.processedAt)}`),z.rejectionReason&&e.createElement("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg"},e.createElement("p",{className:"text-sm text-red-700"},e.createElement("strong",null,"Raison du rejet:")," ",z.rejectionReason)))))),Y?e.createElement("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement(Xt,{className:"text-yellow-600 flex-shrink-0 mt-0.5",size:20}),e.createElement("div",null,e.createElement("h3",{className:"font-semibold text-yellow-900 mb-1"},"Demande en attente"),e.createElement("p",{className:"text-sm text-yellow-700"},"Vous avez dj une demande en attente de traitement. Veuillez attendre la rponse avant de soumettre une nouvelle demande.")))):e.createElement("form",{onSubmit:H,className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 sm:p-8"},c&&e.createElement("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-200 flex items-start gap-3"},e.createElement(Yt,{className:"text-red-600 flex-shrink-0 mt-0.5",size:20}),e.createElement("p",{className:"text-sm text-red-700"},c)),e.createElement("div",{className:"space-y-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Nom de la boutique ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("input",{type:"text",value:v.shopName,onChange:z=>E(L=>({...L,shopName:z.target.value})),className:"w-full rounded-xl border-2 border-gray-300 px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Ex: Ma Super Boutique",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Adresse de la boutique ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("input",{type:"text",value:v.shopAddress,onChange:z=>E(L=>({...L,shopAddress:z.target.value})),className:"w-full rounded-xl border-2 border-gray-300 px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"Ex: Avenue de la Rpublique, Brazzaville",required:!0})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Description de la boutique"),e.createElement("textarea",{value:v.shopDescription,onChange:z=>E(L=>({...L,shopDescription:z.target.value})),rows:4,className:"w-full rounded-xl border-2 border-gray-300 px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all resize-none",placeholder:"Dcrivez votre boutique..."})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Logo de la boutique"),k?e.createElement("div",{className:"relative inline-block"},e.createElement("img",{src:k,alt:"Logo preview",className:"w-32 h-32 object-cover rounded-xl border-2 border-gray-300"}),e.createElement("button",{type:"button",onClick:$,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"},e.createElement(jt,{size:16}))):e.createElement("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors"},e.createElement(El,{className:"text-gray-400 mb-2",size:32}),e.createElement("span",{className:"text-sm text-gray-600"},"Cliquez pour ajouter un logo"),e.createElement("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"}))),e.createElement("div",{className:"pt-6 border-t border-gray-200"},e.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(Ea,{size:20,className:"text-indigo-600"}),"Informations de paiement"),e.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6"},e.createElement("p",{className:"text-sm font-semibold text-blue-900 mb-1"},"Montant requis: ",e.createElement("span",{className:"text-lg"},"50.000 FCFA")),e.createElement("p",{className:"text-xs text-blue-700"},"Veuillez effectuer un paiement de 50.000 FCFA et fournir les informations de transaction ci-dessous.")),e.createElement("div",{className:"mb-6 rounded-xl border border-gray-200 bg-gray-50 p-4"},e.createElement("p",{className:"text-sm font-semibold text-gray-800 mb-2"},"Exemple de message de confirmation (o trouver lID de la transaction)"),e.createElement("p",{className:"text-xs text-gray-600 mb-3"},"Aprs votre paiement Mobile Money, vous recevrez un SMS. L",e.createElement("strong",null,"ID de la transaction")," (souvent not  ID : ) est le numro  10 chiffres  indiquer ci-dessous."),e.createElement("div",{className:"flex justify-center"},e.createElement("img",{src:"/images/transaction-sms-example-shop-conversion.png",alt:"Exemple de SMS de confirmation avec lID de la transaction",className:"max-w-full rounded-lg border border-gray-200 shadow-sm max-h-64 object-contain"}))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Nom de la transaction ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("div",{className:"flex items-center gap-3 rounded-xl border-2 border-gray-300 px-4 py-3 bg-white focus-within:ring-2 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all"},e.createElement(Sa,{size:18,className:"text-gray-400 flex-shrink-0"}),e.createElement("input",{type:"text",value:v.transactionName,onChange:z=>E(L=>({...L,transactionName:z.target.value})),className:"w-full border-none p-0 text-sm focus:outline-none",placeholder:"Ex: Jean K.",required:!0}))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Oprateur Mobile Money ",e.createElement("span",{className:"text-red-500"},"*")),s?e.createElement("div",{className:"flex items-center justify-center py-4"},e.createElement("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-indigo-600 border-t-transparent"})):x.length>0?e.createElement("div",{className:"space-y-2"},e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},x.map(z=>e.createElement("button",{key:z._id,type:"button",onClick:()=>E(L=>({...L,operator:z.name})),className:`px-4 py-3 rounded-xl border-2 font-semibold text-sm transition-all text-left ${v.operator===z.name?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`},e.createElement("div",{className:"font-bold"},z.name),e.createElement("div",{className:"text-xs text-gray-600 mt-1"},z.phoneNumber))))):e.createElement("div",{className:"grid grid-cols-2 gap-3"},e.createElement("button",{type:"button",onClick:()=>E(z=>({...z,operator:"MTN"})),className:`px-4 py-3 rounded-xl border-2 font-semibold text-sm transition-all ${v.operator==="MTN"?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`},"MTN"),e.createElement("button",{type:"button",onClick:()=>E(z=>({...z,operator:"Airtel"})),className:`px-4 py-3 rounded-xl border-2 font-semibold text-sm transition-all ${v.operator==="Airtel"?"border-indigo-600 bg-indigo-50 text-indigo-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`},"Airtel"))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Numro de transaction (10 chiffres) ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("div",{className:"flex items-center gap-3 rounded-xl border-2 border-gray-300 px-4 py-3 bg-white focus-within:ring-2 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all"},e.createElement(y2,{size:18,className:"text-gray-400 flex-shrink-0"}),e.createElement("input",{type:"text",inputMode:"numeric",maxLength:10,value:v.transactionNumber,onChange:K,className:"w-full border-none p-0 text-sm font-mono focus:outline-none",placeholder:"1234567890",required:!0})),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Le numro de transaction se trouve dans le SMS de confirmation Mobile Money")),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Montant pay ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("input",{type:"number",value:v.paymentAmount,disabled:!0,readOnly:!0,className:"w-full rounded-xl border-2 border-gray-300 px-4 py-3 text-sm bg-gray-100 text-gray-700 cursor-not-allowed",placeholder:"50000",required:!0}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Montant fixe requis pour la conversion en boutique")),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-bold text-gray-700 mb-2"},"Preuve de boutique ",e.createElement("span",{className:"text-red-500"},"*")),e.createElement("p",{className:"text-xs text-gray-600 mb-3"},"Joignez une preuve dexistence de votre boutique : papier de la boutique, photo de la boutique, ou une facture portant le nom de la boutique."),P?e.createElement("div",{className:"relative inline-block"},e.createElement("img",{src:P,alt:"Aperu de la preuve de boutique",className:"max-w-md h-auto rounded-xl border-2 border-gray-300"}),e.createElement("button",{type:"button",onClick:j,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"},e.createElement(jt,{size:16}))):e.createElement("label",{className:"flex flex-col items-center justify-center w-full min-h-[140px] py-6 px-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:bg-gray-50 hover:border-indigo-300 transition-colors"},e.createElement(b2,{className:"text-gray-400 mb-2 flex-shrink-0",size:32}),e.createElement("span",{className:"text-sm text-gray-600 text-center"},"Cliquez pour ajouter une preuve"),e.createElement("span",{className:"text-xs text-gray-500 text-center mt-1"},"Papier de la boutique, photo ou facture avec le nom de la boutique"),e.createElement("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",required:!0})))),e.createElement("button",{type:"submit",disabled:o,className:"w-full py-4 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-sm hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl"},o?"Envoi en cours...":"Soumettre la demande"),e.createElement("p",{className:"text-xs text-center text-gray-500"},"Votre demande sera traite sous 48h. Vous recevrez une notification une fois la demande traite.")))))}function Qfe(){const{user:t,updateUser:r}=u.useContext(Sr),{addFavorite:a}=u.useContext(em),{addItem:n}=u.useContext($l),s=u.useRef(!1);return u.useEffect(()=>{if(!t?.token){s.current=!1;return}const o=NU();o&&(s.current||(s.current=!0,(async()=>{try{if(o.type==="addFavorite"&&o.payload?.product)await a(o.payload.product);else if(o.type==="addToCart"&&o.payload?.productId)await n(o.payload.productId,o.payload.quantity??1);else if(o.type==="followShop"&&o.payload?.shopId&&(await oe.post(`/users/shops/${o.payload.shopId}/follow`),typeof r=="function")){const l=String(o.payload.shopId),c=(t?.followingShops||[]).map(String);r({followingShops:Array.from(new Set([...c,l]))})}}catch(l){console.warn("Pending action failed:",l)}finally{kU()}})()))},[t?.token,t?.followingShops,a,n,r]),null}function Jfe(){const{pathname:t}=ts(),[r,a]=u.useState(null),[n,s]=u.useState(!1),[o,l]=u.useState(!0),[c,m]=u.useState(!1),p=u.useRef(!0);u.useEffect(()=>{t==="/"&&oe.get("/settings/splash").then(b=>a(b.data||null)).catch(()=>a(null))},[t]),u.useEffect(()=>{const b=setTimeout(()=>l(!1),1400);return()=>clearTimeout(b)},[]),u.useEffect(()=>{if(p.current){p.current=!1;return}m(!0);const b=setTimeout(()=>m(!1),800);return()=>clearTimeout(b)},[t]);const f=t==="/"&&r?.splashEnabled!==!1&&r?.splashImage&&!n,g=!f&&(o||c);return f?e.createElement(cU,{splashImage:r.splashImage,splashDurationSeconds:r.splashDurationSeconds,onDismiss:()=>s(!0)}):e.createElement(e.Fragment,null,e.createElement(Qfe,null),e.createElement(mU,{visible:g}),e.createElement(cfe,null),e.createElement(Yfe,null),e.createElement(lde,null),e.createElement(lU,null),e.createElement("main",{className:"pt-20 sm:pt-24 md:pt-32 pb-24 md:pb-0 main-content",style:{paddingTop:"calc(env(safe-area-inset-top, 0px) + 5rem)"}},e.createElement(f8,null,e.createElement(rr,{path:"/",element:e.createElement(aH,null)}),e.createElement(rr,{path:"/login",element:e.createElement(nH,null)}),e.createElement(rr,{path:"/register",element:e.createElement(sH,null)}),e.createElement(rr,{path:"/forgot-password",element:e.createElement(oH,null)}),e.createElement(rr,{path:"/product/:slug",element:e.createElement(Gie,null)}),e.createElement(rr,{path:"/product-preview/:slug",element:e.createElement(Qie,null)}),e.createElement(rr,{path:"/shop/:slug",element:e.createElement(Ece,null)}),e.createElement(rr,{path:"/shops/verified",element:e.createElement(kce,null)}),e.createElement(rr,{path:"/help",element:e.createElement(Nce,null)}),e.createElement(rr,{path:"/top-deals",element:e.createElement(Aie,null)}),e.createElement(rr,{path:"/top-ranking",element:e.createElement(Pie,null)}),e.createElement(rr,{path:"/top-favorites",element:e.createElement(Oie,null)}),e.createElement(rr,{path:"/top-discounts",element:e.createElement($ie,null)}),e.createElement(rr,{path:"/top-new",element:e.createElement(Iie,null)}),e.createElement(rr,{path:"/top-used",element:e.createElement(Fie,null)}),e.createElement(rr,{path:"/top-sales",element:e.createElement(jie,null)}),e.createElement(rr,{path:"/products",element:e.createElement(Vie,null)}),e.createElement(rr,{path:"/search",element:e.createElement(aue,null)}),e.createElement(rr,{path:"/cities",element:e.createElement(Hie,null)}),e.createElement(rr,{path:"/categories/:categoryId",element:e.createElement(Bie,null)}),e.createElement(rr,{path:"/suggestions",element:e.createElement(Jme,null)}),e.createElement(rr,{path:"/favorites",element:e.createElement(ha,null,e.createElement(xce,null))}),e.createElement(rr,{path:"/product/:slug/edit",element:e.createElement(ha,null,e.createElement(Jie,null))}),e.createElement(rr,{path:"/profile",element:e.createElement(ha,null,e.createElement(ice,null))}),e.createElement(rr,{path:"/reclamations",element:e.createElement(ha,null,e.createElement(uce,null))}),e.createElement(rr,{path:"/avis-amelioration",element:e.createElement(ha,null,e.createElement(pce,null))}),e.createElement(rr,{path:"/notifications",element:e.createElement(ha,null,e.createElement(bce,null))}),e.createElement(rr,{path:"/cart",element:e.createElement(ha,null,e.createElement(ece,null))}),e.createElement(rr,{path:"/my",element:e.createElement(ha,null,e.createElement(uH,null))}),e.createElement(rr,{path:"/my/stats",element:e.createElement(ha,null,e.createElement(Cce,null))}),e.createElement(rr,{path:"/shop-conversion-request",element:e.createElement(ha,null,e.createElement(Xfe,null))}),e.createElement(rr,{path:"/orders/checkout",element:e.createElement(ha,null,e.createElement(nde,null))}),e.createElement(rr,{path:"/orders/draft",element:e.createElement(ha,null,e.createElement(sde,null))}),e.createElement(rr,{path:"/orders/detail/:orderId",element:e.createElement(ha,null,e.createElement(Bce,null))}),e.createElement(rr,{path:"/orders/messages",element:e.createElement(ha,null,e.createElement(lue,null))}),e.createElement(rr,{path:"/orders/:status?",element:e.createElement(ha,null,e.createElement(Oce,null))}),e.createElement(rr,{path:"/seller/orders/detail/:orderId",element:e.createElement(ha,null,e.createElement(ade,null))}),e.createElement(rr,{path:"/seller/orders/:status?",element:e.createElement(ha,null,e.createElement(Gce,null))}),e.createElement(rr,{path:"/admin",element:e.createElement(ha,{allowAccess:b=>b?.role==="admin"||b?.role==="manager"||b?.canManageComplaints===!0||b?.canManageDelivery===!0||b?.canManageProducts===!0},e.createElement(Wme,null))},e.createElement(rr,{index:!0,element:e.createElement(die,null)}),e.createElement(rr,{path:"payments",element:e.createElement(mie,null)}),e.createElement(rr,{path:"orders",element:e.createElement(kie,null)}),e.createElement(rr,{path:"delivery-guys",element:e.createElement(Sie,null)}),e.createElement(rr,{path:"complaints",element:e.createElement(ha,{allowAccess:b=>b?.role==="admin"||b?.role==="manager"||b?.canManageComplaints===!0},e.createElement(Ume,null))}),e.createElement(rr,{path:"users/:id/stats",element:e.createElement(Mme,null)}),e.createElement(rr,{path:"products",element:e.createElement(ha,{allowAccess:b=>b?.role==="admin"||b?.role==="manager"||b?.canManageProducts===!0},e.createElement(Cme,null))}),e.createElement(rr,{path:"product-boosts",element:e.createElement(ha,{allowAccess:b=>b.role==="admin"||b.canManageBoosts===!0},e.createElement(bme,null))}),e.createElement(rr,{path:"feedback",element:e.createElement(ha,{allowAccess:b=>b.role==="admin"||b.canReadFeedback===!0},e.createElement(Ame,null))}),e.createElement(rr,{path:"payment-verification",element:e.createElement(ha,{allowAccess:b=>b.role==="admin"||b.canVerifyPayments===!0},e.createElement($me,null))}),e.createElement(rr,{path:"chat-templates",element:e.createElement(ha,{roles:["admin"]},e.createElement(hme,null))}),e.createElement(rr,{path:"payment-verifiers",element:e.createElement(ha,{roles:["admin"]},e.createElement(jme,null))}),e.createElement(rr,{path:"reports",element:e.createElement(ha,{roles:["admin"]},e.createElement(Ime,null))}),e.createElement(rr,{path:"settings",element:e.createElement(ha,{roles:["admin"]},e.createElement(Fme,null))}),e.createElement(rr,{path:"users",element:e.createElement(ha,{roles:["admin"]},e.createElement(uie,null))}),e.createElement(rr,{path:"promo-codes",element:e.createElement(ha,{roles:["admin"]},e.createElement(Vme,null))})),e.createElement(rr,{path:"/certified-products",element:e.createElement(Kme,null)}))),e.createElement(gU,null),e.createElement(dme,null),e.createElement(gme,null))}function Zfe(){return ode(),e.createElement(N8,null,e.createElement(Jfe,null))}const ege=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/"});console.log("Service Worker registered:",t);const r={apiKey:"AIzaSyChYexMhZDqZ-8DaI-ynht7q_OL8M2260M",authDomain:"hdmarketcg.firebaseapp.com",projectId:"hdmarketcg",storageBucket:"hdmarketcg.firebasestorage.app",messagingSenderId:"882664621680",appId:"1:882664621680:web:976a95b6708fe409f0d6b5",measurementId:"G-NCC0QWVJQB"},a="",n=async()=>{if(!(!r.apiKey||!r.messagingSenderId))try{const o=(await navigator.serviceWorker.ready).active||t.active;o&&o.postMessage({type:"SET_FIREBASE_CONFIG",payload:{config:r,sdkBaseUrl:a}})}catch(s){console.warn("[HDMarket] Failed to send Firebase config to SW",s)}};return n(),t.addEventListener("updatefound",()=>{const s=t.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New service worker available"),n())})}),t}catch(t){return console.error("Service Worker registration failed:",t),null}return null},tge=ED.createRoot(document.getElementById("root"));tge.render(e.createElement(e.StrictMode,null,e.createElement(qF,null,e.createElement(UF,null,e.createElement(VF,null,e.createElement(lH,null,e.createElement(Zfe,null)))))));ege();export{p2 as W,yl as _,v0 as c,Aa as g};
